<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radiology St 1 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "X-ray tube in mammography differs from that of a normal X-ray machine in that it has _______.",
    "choices": [
      {
        "id": 1,
        "text": "Glass window & aluminium filter"
      },
      {
        "id": 2,
        "text": "Beryllium window & molybdenum filter"
      },
      {
        "id": 3,
        "text": "Glass window & molybdenum filter"
      },
      {
        "id": 4,
        "text": "Beryllium window & aluminium filter"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Conventional X ray</strong> tube has :</p>\n<ul>\n<li>Glass window</li>\n<li>Aluminium filter</li>\n</ul>\n<p><strong>Mammography</strong> has</p>\n<ul>\n<li>Beryllium window</li>\n<li>Molybdenum filter</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Hounsfield units is used in CT density scale to measure attenuation value of different materials compared to water. The value of fat in HU would be around",
    "choices": [
      {
        "id": 1,
        "text": "-100"
      },
      {
        "id": 2,
        "text": "-1000"
      },
      {
        "id": 3,
        "text": "100"
      },
      {
        "id": 4,
        "text": "1000"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The value of fat is around <strong>-100 HU.</strong></p>\n<p><strong>In a CT density scale</strong></p>\n<ul>\n<li>Air = -1000 <strong>(Black)</strong></li>\n<li>Fat = -100</li>\n<li>Water = 0</li>\n<li>Concealed blood = +60 to +70</li>\n<li>Calcification = +1000 <strong>(White)</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "MR spectroscopy graph of a child shows the following:\n\nWhat is the most likely diagnosis ?",
    "choices": [
      {
        "id": 1,
        "text": "Tuberous sclerosis"
      },
      {
        "id": 2,
        "text": "Craniopharyngioma"
      },
      {
        "id": 3,
        "text": "Canavan\u2019s disease"
      },
      {
        "id": 4,
        "text": "Juvenile myoclonic epilepsy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given MR spectroscopy image shows a <strong>peak in NAA levels</strong> ( N-acetyl aspartate). This is characteristic of <strong>Canavan&rsquo;s disease.&nbsp;</strong>The peak is abnormally high due to decreased catabolization of NAA.</p>\n<p><strong>NAA</strong> is a neuronal marker and is <strong>decreased</strong> in cases of insults to brain</p>\n<ul>\n<li>Neoplasm</li>\n<li>Infarct</li>\n<li>Epilepsy</li>\n<li>Dementia</li>\n</ul>\n<p><strong>MR spectroscopy</strong>&nbsp;is a non-invasive means of obtaining&nbsp;<strong>metabolic information</strong>.&nbsp;The image below shows a normal MR spectroscopy.</p>",
    "explanation_video": "",
    "question_images": [
      "https://daily-rounds-staging.s3.amazonaws.com/uploads/f1b8dcf8bee94c4d8a28f620b37fcdb6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7e70937bf25841718a843eea5c7403a3x1279x1223.JPEG"
    ]
  },
  {
    "text": "Appearance of brain hematoma on MRI -  T1 and T2 weighted images respectively after 7 days is",
    "choices": [
      {
        "id": 1,
        "text": "Iso and Hyper"
      },
      {
        "id": 2,
        "text": "Hyper and Hyper"
      },
      {
        "id": 3,
        "text": "Iso and Hypo"
      },
      {
        "id": 4,
        "text": "Hypo and Hypo"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Appearance of brain hematoma on MRI is variable and depends on the stage of hematoma depending on the changes over time as red cells breakdown and degrade and ultimately taken up as hemosiderin:</p>\n<table style=\"height: 155px; width: 560.783px;\">\n<tbody>\n<tr>\n<td style=\"width: 136px;\"><strong>Stage</strong></td>\n<td style=\"width: 97px;\"><strong>Time</strong></td>\n<td style=\"width: 81px;\"><strong>T1</strong></td>\n<td style=\"width: 54px;\"><strong>T2</strong></td>\n<td style=\"width: 156.783px; text-align: center;\"><strong>Hb Biochemical form in RBC</strong></td>\n</tr>\n<tr>\n<td style=\"width: 136px;\">Hyperacute</td>\n<td style=\"width: 97px;\">&lt; 24 hrs</td>\n<td style=\"width: 81px;\">Iso</td>\n<td style=\"width: 54px;\">Hyper</td>\n<td style=\"width: 156.783px; text-align: center;\">Oxyhaemoglobin</td>\n</tr>\n<tr>\n<td style=\"width: 136px;\">Acute</td>\n<td style=\"width: 97px;\">1 &ndash; 3 days</td>\n<td style=\"width: 81px;\">Iso</td>\n<td style=\"width: 54px;\">Hypo</td>\n<td style=\"width: 156.783px; text-align: center;\">Deoxyhaemoglobin</td>\n</tr>\n<tr>\n<td style=\"width: 136px;\">Early Subacute</td>\n<td style=\"width: 97px;\">3 &ndash; 7 days</td>\n<td style=\"width: 81px;\">Hyper</td>\n<td style=\"width: 54px;\">Hypo</td>\n<td style=\"width: 156.783px; text-align: center;\">Methaemoglobin</td>\n</tr>\n<tr>\n<td style=\"width: 136px;\">Late Subacute</td>\n<td style=\"width: 97px;\">&gt; 7 days</td>\n<td style=\"width: 81px;\">Hyper</td>\n<td style=\"width: 54px;\">Hyper</td>\n<td style=\"width: 156.783px; text-align: center;\">Extracellular Methaemoglobin</td>\n</tr>\n<tr>\n<td style=\"width: 136px;\">Chronic</td>\n<td style=\"width: 97px;\">&gt; 14 days</td>\n<td style=\"width: 81px;\">Iso,hypo</td>\n<td style=\"width: 54px;\">Hypo</td>\n<td style=\"width: 156.783px; text-align: center;\">Ferritin and Haemosiderin</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The intensity of colour in doppler is determined by",
    "choices": [
      {
        "id": 1,
        "text": "Direction of flow"
      },
      {
        "id": 2,
        "text": "Velocity of flow"
      },
      {
        "id": 3,
        "text": "Strength of returning echo"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In colour doppler, intensity (colour saturation)&nbsp;indicates relative <strong>velocity</strong> of cells in blood.</p>\n<p>However, <strong>Type</strong> of colour represents<strong> Direction of Flow</strong></p>\n<ul>\n<li>Yellow , Orange , Red &ndash; Flow is <strong>toward</strong> the transducer</li>\n<li>Blue , Green &ndash; Flow <strong>is away</strong> from the transducer</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with Acute Renal Failure (ARF) with complete anuria but a normal USG. Next investigation would be",
    "choices": [
      {
        "id": 1,
        "text": "IVP"
      },
      {
        "id": 2,
        "text": "Radiorenogram"
      },
      {
        "id": 3,
        "text": "Anterograde Pyelography"
      },
      {
        "id": 4,
        "text": "Retrograde Pyelography"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Radiorenogram would be the next choice of investigation.</p>\n<p>Renal imaging is useful in case of <strong>ARF secondary to obstruction. </strong></p>\n<p>The commonly used imaging modalities are:</p>\n<ul>\n<li><strong>USG</strong></li>\n<li><strong>Nuclear scan &ndash; Radio renogram</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Spider leg appearance is found in",
    "choices": [
      {
        "id": 1,
        "text": "Polycystic kidney"
      },
      {
        "id": 2,
        "text": "Pyelonephritis"
      },
      {
        "id": 3,
        "text": "Hydronephrosis"
      },
      {
        "id": 4,
        "text": "Renal artery stenosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Spider leg appearance on IVP is seen in <strong>Polycystic kidney disease.</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/6241608b44854de7b0ee0cb6ba7ce86dx429x238.PNG"
    ]
  },
  {
    "text": "Which of the following is not a feature of renovascular hypertension on IVU?",
    "choices": [
      {
        "id": 1,
        "text": "Delayed wash out of contrast"
      },
      {
        "id": 2,
        "text": "Ureteral kinking"
      },
      {
        "id": 3,
        "text": "Filling defect in calyces"
      },
      {
        "id": 4,
        "text": "Normal or small sized kidney"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Filling defect incalyces is not a feature of renovascular hypertension on IVU.</p>\n<p>IVU findings of Renal vascular hypertension are :</p>\n<ul>\n<li><strong>Delayed or absent nephrogram</strong></li>\n<li><strong>Normal or atrophic kidney </strong>with atrophic deformity or abnormality</li>\n<li><strong>Ureteral kinking</strong> (in retroperitoneal fibrosis)</li>\n<li>Rim Nephrogram</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Radiation exposure is least in the following procedure",
    "choices": [
      {
        "id": 1,
        "text": "IVP"
      },
      {
        "id": 2,
        "text": "Micturating cystourethrogram"
      },
      {
        "id": 3,
        "text": "Bilateral nephrostomogram"
      },
      {
        "id": 4,
        "text": "Spiral CT for stones"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Micturating cystourethrogram</strong> has least radiation exposure with <strong>Chest X ray equivalent</strong> of <strong>60.</strong></p>\n<p><strong>Other options : </strong></p>\n<ul>\n<li><strong>IVP</strong> &ndash; 120</li>\n<li><strong>Nephrostomogram</strong> &ndash; 170</li>\n<li><strong>CT pelvis</strong> - 500</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The pathology shown in the following image of USG of ovary of an adolescent female in the image is",
    "choices": [
      {
        "id": 1,
        "text": "Serous cystadenoma"
      },
      {
        "id": 2,
        "text": "Mucinous cystadenoma"
      },
      {
        "id": 3,
        "text": "PCOD"
      },
      {
        "id": 4,
        "text": "Dermoid cyst"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given USG shows <strong>multiple cysts</strong> in an adolescent female ovary.</p>\n<p>This characteristically suggests <strong>Polycystic Ovarian Disease.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0c98e4a8c87244f3a72181bf9bb8ece9.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which one of the following has maximum ionization potential?",
    "choices": [
      {
        "id": 1,
        "text": "Electron"
      },
      {
        "id": 2,
        "text": "Proton"
      },
      {
        "id": 3,
        "text": "Helium ion"
      },
      {
        "id": 4,
        "text": "Gamma-photon"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Helium ion\u00a0</strong>has the <strong>maximum ionizing potential.</strong> It is identical to alpha particles, with two protons and two neutrons.</p>\n<p>It has the\u00a0least penetrating ability and penetrates only superficial tissues to an extent of 1 mm.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "SI unit for total radiation exposure is:",
    "choices": [
      {
        "id": 1,
        "text": "Sievert"
      },
      {
        "id": 2,
        "text": "Gray"
      },
      {
        "id": 3,
        "text": "RAD"
      },
      {
        "id": 4,
        "text": "Coulomb/kg"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>SI unit for <strong>total radiation exposure is </strong>Coloumb<strong>/Kg</strong> and the <strong>common unit is Roentgen</strong>.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman diagnosed with DCIS underwent surgery and is now posted for adjuvant radiotherapy with external beam radiotherapy. Which of the following isotopes is commonly used for the same?",
    "choices": [
      {
        "id": 1,
        "text": "Cobalt-59"
      },
      {
        "id": 2,
        "text": "Cobalt -60"
      },
      {
        "id": 3,
        "text": "Radium-226"
      },
      {
        "id": 4,
        "text": "Strontium-89"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Cobalt-60&nbsp;</strong>(Co-60 ) isotope is used for <strong>external beam radiotherapy</strong> (EBRT).</p>\n<p>External beam radiotherapy is given as follows:</p>\n<ul>\n<li><strong>Cobalt machine</strong> - Co-60 produces gamma rays. It emits radiation of energy 1.25 MeV.</li>\n<li><strong>LINAC</strong> (linear accelerator) - X-ray beams are generated to provide ionising radiation.</li>\n</ul>\n<p>The energy spectrum used in radiotherapy is classified as follows:</p>\n<ul>\n<li>Orthovoltage - 200-500kV x-rays are produced. It is used to treat skin conditions.&nbsp;</li>\n<li>Megavoltage - 1-25 MV x-rays are produced. These are used in modern radiotherapy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following modalities use remote afterloading?",
    "choices": [
      {
        "id": 1,
        "text": "Teletherapy"
      },
      {
        "id": 2,
        "text": "Brachytherapy"
      },
      {
        "id": 3,
        "text": "Radioactive iodine therapy"
      },
      {
        "id": 4,
        "text": "Targeted therapy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Remote afterloading</strong> is used in <strong>brachytherapy.</strong></p>\n<p>In brachytherapy, sealed radioactive sources are used to deliver radiation at a short distance by interstitial, intracavitary, or surface application.</p>\n<p>Afterloading is the process of placing the radioactive material into the target region. This is either done manually by the oncologist, or by using remote afterloading devices.</p>\n<p><strong>Remote afterloading</strong> devices enable us to<strong> eliminate direct contact</strong> with <strong>radioactive</strong> sources while administration. It provides protection from radiation exposure to healthcare professionals by securing the radiation source in a shielded safe manner.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Granisetron was prescribed to a patient with gastrointestinal radiation syndrome to manage his symptoms. At what dose of radiation does this condition typically occur?",
    "choices": [
      {
        "id": 1,
        "text": "100\u2013300 rad"
      },
      {
        "id": 2,
        "text": "300\u2013400 rad"
      },
      {
        "id": 3,
        "text": "400\u2013600 rad"
      },
      {
        "id": 4,
        "text": "600\u20131000 rad"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Gastrointestinal radiation syndrome\u00a0</strong>occurs <strong>after</strong> exposure of <strong>600-1000 rad.</strong></p>\n<p>Acute radiation syndrome is characterized by three main presentations:</p>\n<ol>\n<li><strong>Hematopoietic -</strong>\u00a0marked by aplastic anemia. This occurs at 2\u20133\u00a0Gy or higher. This may result in infections, bleeding, and anemia due to the destruction of red blood cells.\u00a0</li>\n<li><strong>Gastrointestinal - </strong>occurs due to absorbed doses of 6-7 Gy (600\u20131000 rad). The signs and symptoms include nausea, vomiting, loss of appetite, and abdominal pain. Symptomatic management is advised with intravenous ondansetron or oral granisetron.\u00a0</li>\n<li><strong>Neurovascular -</strong>\u00a0This syndrome typically occurs at absorbed doses greater than 30 Gy (3000 rad), though it may occur at 10 Gy (1000 rad). It presents with neurological symptoms such as dizziness, headache, or decreased level of consciousness, occurring within minutes to a few hours, and with an absence of vomiting. It is invariably fatal.</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following conditions is treated using gamma knife?",
    "choices": [
      {
        "id": 1,
        "text": "Glioblastoma"
      },
      {
        "id": 2,
        "text": "Arterio-venous malformation"
      },
      {
        "id": 3,
        "text": "Tuberculoma"
      },
      {
        "id": 4,
        "text": "Dandy-Walker malformation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>arterio-venous malformation</strong> is treated using a <strong>gamma knife.\u00a0</strong></p>\n<p>Stereotactic radiosurgery (SRS) is a reasonable alternative for people who refuse or cannot tolerate surgery. Here, beams are modified and focused only to concentrate on the tumor and have little effect on surrounding tissue. It can be done by using:\u00a0</p>\n<ul>\n<li><strong>X-knife</strong> using a linear accelerator (LINAC)</li>\n<li><strong>Gamma-knife</strong> using Cobalt 60\u00a0</li>\n<li><strong>CyberKnife</strong> - image-guided linear accelerator using real-time image guidance to deliver radiation from multiple angles.</li>\n</ul>\n<p>The patient wears a specialized helmet that is surgically fixed to the skull.<strong>\u00a0Gamma knife</strong> aims gamma radiation through a <strong>target point</strong> in the patient\u2019s brain. An ablative dose of radiation is thereby sent through the tumour in one treatment session while surrounding brain tissues are relatively spared.\u00a0</p>\n<p>SRS has been used in the treatment of almost every intracranial lesion but is commonly used in the treatment of acoustic schwannoma, pituitary adenoma, meningioma, and trigeminal neuralgia but not glioblastoma.\u00a0</p>\n<p>The image below is an illustration of the principle of gamma-knife therapy:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0da0a64582ab4a5091c050689a196d0cx1169x1510.JPEG"
    ]
  },
  {
    "text": "A 48-year-old woman who underwent a renal transplant 4 months ago comes for follow-up. Which of the following would you perform to assess her renal function?",
    "choices": [
      {
        "id": 1,
        "text": "Tc 99m DMSA"
      },
      {
        "id": 2,
        "text": "Tc 99m DTPA"
      },
      {
        "id": 3,
        "text": "Tc 99m MAG3"
      },
      {
        "id": 4,
        "text": "Captopril DTPA"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Tc-99m MAG3 (mercaptoacetyltriglycine)</strong> scan can be used in the evaluation of renal transplant function and may also be used in transplant obstruction. The imaging findings of acute rejection are characterised by <strong>diminished flow.\u00a0</strong></p>\n<p>Tc-99m MAG3 radioisotope<strong>\u00a0</strong>is eliminated through the kidney through both <strong>glomeruli filtration </strong>and<strong> tubular excretion\u00a0</strong>and is a measure of both. Indications for 99mTc-MAG3 dynamic renography are as follows:</p>\n<ul>\n<li>To assess divided renal function and urinary drainage where the collecting system is significantly dilated.</li>\n<li>To assess differential renal function following surgery or procedure, for example, post-pyeloplasty.\u00a0</li>\n<li>To assess for a urinary leak or possible obstruction following the renal transplant.\u00a0</li>\n</ul>\n<p>Other options:\u00a0</p>\n<p>Option A: Tc-99m<strong> DMSA</strong> (dimercaptosuccinic acid) is used to evaluate renal structure and morphology, particularly in pediatric imaging for detecting <strong>scarring</strong> and pyelonephritis.\u00a0It is an ideal agent for the assessment of the renal cortex.</p>\n<p>Option B: Tc-99m<strong> DTPA </strong>(diethylene-triamine-pentaacetate) is cleared only via glomeruli and has no tubular excretion. Hence, it is used for direct measurement of<strong> GFR</strong>.</p>\n<p>Option D: <strong>Captopril DTPA</strong> is used for screening in patients with renovascular hypertension.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 84-year-old man has been diagnosed with Alzheimer's disease. Which of the following can be used to assess his cerebral perfusion?",
    "choices": [
      {
        "id": 1,
        "text": "Tc-HMPAO SPECT"
      },
      {
        "id": 2,
        "text": "In-111 DTPA"
      },
      {
        "id": 3,
        "text": "Tc-99m MIBI"
      },
      {
        "id": 4,
        "text": "Tl-201 scintigraphy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Tc-HMPAO</strong>\u00a0(technetium-99m hexamethyl propylenamine oxime) <strong>SPECT</strong>\u00a0is used for the assessment of\u00a0<strong>cerebral perfusion</strong>. In Alzheimer's disease, it shows reduced perfusion of the temporoparietal region.</p>\n<p>Other options:</p>\n<p>Option B:\u00a0In-111 (Indium) DTPA is injected intrathecally to assess CSF flow.</p>\n<p>Option C:\u00a0Tc-99m (Technetium) MIBI is used for parathyroid scintigraphy.</p>\n<p>Option D:\u00a0Tl-201 (Thallium) is used in myocardial perfusion scanning.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young woman presented to the OPD with dysphagia and regurgitation of food. She was diagnosed with iron deficiency anaemia 3 months back. Barium swallow was done and is shown below. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Esophageal carcinoma"
      },
      {
        "id": 2,
        "text": "Zenker's diverticulum"
      },
      {
        "id": 3,
        "text": "Esophageal leiomyoma"
      },
      {
        "id": 4,
        "text": "Plummer-Vinson syndrome"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario along with the barium swallow showing <strong>esophageal web</strong> is suggestive of <strong>Plummer-Vinson syndrome</strong>.</p>\n<p>Plummer-Vinson syndrome is also known as\u00a0<strong>Paterson-Brown-Kelly</strong> syndrome. It commonly affects middle-aged women with long-standing anaemia, and is a recognized risk factor for post-cricoid <strong>hypopharyngeal squamous cell carcinoma</strong>. It consists of dysphagia, iron-deficiency anemia and esophageal webs or hypopharyngeal webs.\u00a0</p>\n<p>Esophageal webs are due to a constriction caused by a thin mucosal membrane projecting into the lumen. More commonly, they are seen in the <strong>cervical\u00a0esophagus</strong>\u00a0near the cricopharyngeus muscle. They typically arise from the <strong>anterior wall</strong>, but\u00a0never from the posterior wall. They may also be circumferential.</p>\n<p>The image below depicts a barium swallow showing an upper esophageal concentric web in a lateral view.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/21a398438ff54f97bc7de7dd628ebb7e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/35d730273c49480ca36eee41f3997d88x592x571.JPEG"
    ]
  },
  {
    "text": "Who is the father of interventional radiology?",
    "choices": [
      {
        "id": 1,
        "text": "Charles Dotter"
      },
      {
        "id": 2,
        "text": "Wilhelm Roengten"
      },
      {
        "id": 3,
        "text": "Godfrey Hounsfield"
      },
      {
        "id": 4,
        "text": "Robert Egan"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Charles Theodore Dotter</strong>&nbsp;was an American vascular radiologist who is credited as the father of interventional radiology. He performed the very first peripheral angioplasty in 1964.</p>\n<p>Option B: Wilhelm Roentgen discovered X-rays.</p>\n<p>Option C: Godfrey Hounsfield developed the first CT machine in 1970. Hounsfield is a unit used to describe the density of tissues on a CT scan.</p>\n<p>Option D: Robert Egan is the father of modern mammography.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old woman is referred from a PHC for the evaluation of nodular thyroid enlargement. As part of the evaluation, she is planned for a radio uptake scan. Which of the following isotopes is not used in this test?",
    "choices": [
      {
        "id": 1,
        "text": "Iodine-123"
      },
      {
        "id": 2,
        "text": "Iodine-124"
      },
      {
        "id": 3,
        "text": "Tc 99m"
      },
      {
        "id": 4,
        "text": "Iodine-127"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Iodine-127</strong> is the<strong> stable isotope</strong> and is not useful for thyroid imaging.</p>\n<p>The following isotopes are useful in thyroid imaging:</p>\n<ul>\n<li>Iodine-<strong>123: </strong>Functional scan of the thyroid</li>\n<li>Iodine-<strong>124: </strong>Produces positrons and is used in <strong>PET scans</strong></li>\n<li><strong>Tc 99m</strong> pertechnetate\u00a0</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 43-year-old woman presented with recurrent headaches, palpitations, and sweating. Her blood pressure was found to be 170/110 mm Hg. Further testing revealed elevated urinary metanephrines. An MRI was negative. What is the next best step in management?",
    "choices": [
      {
        "id": 1,
        "text": "C11 methionine PET"
      },
      {
        "id": 2,
        "text": "18F-NaF PET"
      },
      {
        "id": 3,
        "text": "Gallium 68 DOTATOC PET"
      },
      {
        "id": 4,
        "text": "99mTc pertechnetate scan"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This clinical scenario is suggestive of <strong>pheochromocytoma</strong>. The diagnosis can be confirmed by <strong>gallium-68</strong> somatostatin receptor <strong>DOTATOC PET</strong> scan.</p>\n<p><strong>Somatostatin receptor scintigraphy </strong>shows increased activity in paragangliomas and is a useful technique for identifying extra-adrenal phaeochromocytomas. The compounds often used in molecular imaging with PET include <strong>68Ga-DOTATOC</strong>, <strong>68Ga-DOTATATE</strong>, and <strong>68Ga-DOTANOC</strong>. They bind to somatostatin receptors with varying affinity for different receptors.</p>\n<p>This investigation is useful in the diagnosis of new lesions in patients with or suspected neuroendocrine tumors.\u00a0</p>\n<p>Other options:\u00a0</p>\n<p>Option A: <strong>C11 methionine PET</strong> is a radiolabelled amino acid, and tumour uptake reflects cellular proliferation and microvessel density. It is used in the grading of brain tumors, differential diagnosis and identifying recurrence.\u00a0</p>\n<p>Option B: <strong>18F-NaF PET</strong> uptake reflects blood flow and bone remodelling. It is used for imaging bone pathology by detecting primary and secondary bone tumours.\u00a0</p>\n<p>Option D: <strong>99mTc pertechnetate</strong> is useful for thyroid nodules, and ectopic gastric mucosa.</p>\n<p>Note: The investigation of choice for adrenal phaeochromocytoma is contrast-enhanced MRI.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 42-year-old man is brought to the emergency department with complaints of right-sided chest pain after a motor vehicle collision. Physical examination revealed bilateral breath sounds and a supine chest radiograph was unremarkable. On performing an ultrasound the following was seen. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pneumothorax"
      },
      {
        "id": 2,
        "text": "Pleural effusion"
      },
      {
        "id": 3,
        "text": "Consolidation"
      },
      {
        "id": 4,
        "text": "Collapse"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above M-mode ultrasound of the right lung shows a\u00a0<strong>stratosphere or barcode sign</strong>\u00a0specific for<strong> pneumothorax</strong>.</p>\n<p>In a lung with pneumothorax,<strong> lung sliding</strong> is <strong>abolished</strong> on M-mode ultrasound, and the normal sand-like appearance beneath the pleural line (white line) is replaced by <strong>parallel lines</strong>, which is termed the\u00a0stratosphere or barcode sign, suggesting the presence of pneumothorax.\u00a0</p>\n<p>The image given below shows the <strong>stratosphere sign </strong>or<strong> barcode sign.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/203794b90ce3451387ddce5b845b977e.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/057c6a0707744d58bf851e2e29137bb9x1279x1522.JPEG"
    ]
  },
  {
    "text": "The following x-ray was done on a patient with pulmonary tuberculosis. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Right upper lobe collapse"
      },
      {
        "id": 2,
        "text": "Left upper lobe collapse"
      },
      {
        "id": 3,
        "text": "Right lower lobe collapse"
      },
      {
        "id": 4,
        "text": "Left middle lobe collapse"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Golden\u2019s S-sign,</strong> observed on the given x-ray, represents central focal convexity and peripheral concavity. This radiological finding is typically indicative of a <strong>right upper lobe collapse.\u00a0</strong></p>\n<p>X-ray showing Golden\u2019s S-sign and calcified breast implants:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b4182eb254644404acd403c0a16f4095.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1430e2fc6ec94ec088c0534260a14729x657x598.PNG"
    ]
  },
  {
    "text": "A 52-year-old female with a history of rheumatoid arthritis, currently on methotrexate, presents with a six-month history of progressively worsening dyspnoea. What is the investigation of choice to confirm the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "MRI"
      },
      {
        "id": 2,
        "text": "PET"
      },
      {
        "id": 3,
        "text": "HRCT"
      },
      {
        "id": 4,
        "text": "Chest x-ray"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario of respiratory symptoms along with the history of rheumatoid arthritis is suggestive of <strong>interstitial lung disease\u00a0</strong>(ILD).\u00a0<strong>High-resolution CT</strong> is the investigation of choice for ILD.\u00a0</p>\n<p>It is the standard technique for the evaluation of diffuse parenchymal lung diseases.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 56-year-old man presents with a one-month history of fever, fatigue, and non-productive cough. His chest X-ray is unremarkable, but HRCT is done and provided below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Endobronchial tuberculosis"
      },
      {
        "id": 2,
        "text": "Alveolar proteinosis"
      },
      {
        "id": 3,
        "text": "Wegener's granulomatosis"
      },
      {
        "id": 4,
        "text": "Sarcoidosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above clinical scenario and HRCT showing<strong> tree-in-bud</strong> sign suggest <strong>endobronchial tuberculosis</strong>.</p>\n<p>The <strong>tree-in-bud sign </strong>describes the CT appearance of multiple areas of centrilobular nodules with a linear branching pattern. The chest X-ray is\u00a0usually normal in these patients.</p>\n<p>CT showing a tree-in-bud sign with a linear branching pattern:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/27a95a3df125411f91c60936f661f18b.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c20692260c0949708242f67cfc046edcx512x512.JPEG"
    ]
  },
  {
    "text": "CT scan of a patient is being reviewed. Identify the given pathology.",
    "choices": [
      {
        "id": 1,
        "text": "Hydatid lung"
      },
      {
        "id": 2,
        "text": "Lung abscess"
      },
      {
        "id": 3,
        "text": "Pneumatocele"
      },
      {
        "id": 4,
        "text": "Emphysematous bullae"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The CT shows an air-fluid level with floating membranes (marked using yellow arrows in the image below) characteristic of a <strong>hydatid cyst</strong>. It is called a <strong>water lily</strong> or <strong>camalote sign</strong>. The most common location of hydatid cysts is<strong>\u00a0</strong>the<strong> liver</strong>, followed by the <strong>lung</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/572ad0b7f8814f039a6fdbdf2ae96188.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/438c3ce4f14b498fb49e8ec7044457ebx600x667.JPEG"
    ]
  },
  {
    "text": "A 56-year-old\u200b female patient presented with progressive dysphagia for solids, loss of weight, and loss of appetite. A barium swallow done is given below. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Carcinoma esophagus"
      },
      {
        "id": 2,
        "text": "Diffuse esophageal spasm"
      },
      {
        "id": 3,
        "text": "Esophageal leiomyoma"
      },
      {
        "id": 4,
        "text": "Esophageal web"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>A patient with the given history and barium swallow findings of <strong>irregular narrowing</strong>, <strong>mucosal destruction</strong>, and <strong>shouldered margins</strong> of esophagus, are suggestive of <strong>carcinoma esophagus</strong>.</p>\n<p>Esophageal carcinoma is more common in men, with tobacco use and alcohol being the strongest risk factors. The squamous cell carcinoma variant usually affects the <strong>upper 2/3rd</strong>, and the adenocarcinoma variant usually affects the <strong>lower 1/3rd</strong> of the esophagus. Clinical features include <strong>progressive dysphagia</strong> (most common), regurgitation of food, vomiting, odynophagia and weight loss.</p>\n<p>On barium swallow, carcinoma esophagus presents with irregular narrowing and ulceration of esophagus. <strong>Flexible endoscopy</strong> with <strong>biopsy</strong> is preferred for confirmation of diagnosis.\u00a0<strong>Contrast-enhanced CT and PET</strong> can be used to assess distant metastasis. <strong>Endoscopic ultrasonography (EUS)</strong> is the investigation of choice to assess tumor invasion and lymph node metastasis.</p>\n<p>Other options:\u00a0</p>\n<p>Option B: \u00a0Diffuse esophageal spasm results in the <strong>corkscrew</strong> appearance of the esophagus on barium study.</p>\n<p>Option C: Esophageal leiomyoma appears as a smooth, <strong>semilunar filling defect</strong> on barium swallow. it is seen as a discrete ovoid mass that is well outlined by barium.\u00a0</p>\n<p>Option D: Esophageal webs occur in the upper and middle esophagus as a thin membrane that can be identified by the <strong>translucent</strong> part on contrast radiology.\u00a0</p>\n<p><br />\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7c0ba9fa1e414495a616befd2f38b83d.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "An abdominal X-ray of an infant presenting with vomiting is given below. Which of the following signs will not be seen on his barium study?",
    "choices": [
      {
        "id": 1,
        "text": "Diamond sign"
      },
      {
        "id": 2,
        "text": "Double bubble sign"
      },
      {
        "id": 3,
        "text": "Triple track sign"
      },
      {
        "id": 4,
        "text": "Mushroom sign"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given X-ray is showing a <strong>single bubble sign</strong> suggestive of <strong>congenital hypertrophic pyloric stenosis</strong>. A double bubble sign is seen in duodenal atresia, not CHPS.</p>\n<table style=\"width: 424px; height: 391px;\">\n<tbody>\n<tr>\n<td style=\"width: 163.625px;\"><strong>Signs seen in CHPS</strong></td>\n<td style=\"width: 244.375px;\"><strong>&nbsp;Description</strong></td>\n</tr>\n<tr>\n<td style=\"width: 163.625px;\">String sign</td>\n<td style=\"width: 244.375px;\">Passing of small streak of barium through pyloric canal</td>\n</tr>\n<tr>\n<td style=\"width: 163.625px;\">Double/triple track sign</td>\n<td style=\"width: 244.375px;\">Crowding of muscle folds in the pyloric canal</td>\n</tr>\n<tr>\n<td style=\"width: 163.625px;\">Diamond sign/twining recess</td>\n<td style=\"width: 244.375px;\">A transient triangular tent-like cleft in mid-portion of the pyloric canal with the apex pointing inferiorly.</td>\n</tr>\n<tr>\n<td style=\"width: 163.625px;\">Beak sign</td>\n<td style=\"width: 244.375px;\">The mass impression upon antrum with a streak of barium pointing towards the pyloric channel</td>\n</tr>\n<tr>\n<td style=\"width: 163.625px;\">Mushroom sign/kirkin sign/umbrella sign</td>\n<td style=\"width: 244.375px;\">Indentation of the base of the duodenal bulb by pylorus</td>\n</tr>\n<tr>\n<td style=\"width: 163.625px;\">Caterpillar sign</td>\n<td style=\"width: 244.375px;\">Gastric hyperperistaltic waves</td>\n</tr>\n<tr>\n<td style=\"width: 163.625px;\">Shoulder sign</td>\n<td style=\"width: 244.375px;\">Round indentation caused by hypertrophied pyloric muscle</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5c9df6a31cd942bdad7fd79b6acb5e9d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8aaf5b2df31045218ada459a5af346bbx1200x2112.JPEG"
    ]
  },
  {
    "text": "A newborn presented with severe respiratory distress soon after birth. A chest X-ray was done and is shown below. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Bronchogenic cyst"
      },
      {
        "id": 2,
        "text": "Congenital diaphragmatic hernia"
      },
      {
        "id": 3,
        "text": "Congenital cystic adenomatoid malformation"
      },
      {
        "id": 4,
        "text": "Cystic teratoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A newborn presenting with respiratory distress shortly after birth, along with the chest X-ray showing bowel loops in the thoracic cavity, is suggestive of <strong>congenital diaphragmatic hernia </strong>(CDH).</p>\n<div class=\"page\" title=\"Page 1892\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 1892\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Normally, the pleuroperitoneal cavities separate by 8-10 weeks of gestation. CDH is due to<strong>\u00a0</strong>a <strong>failure </strong>to close\u00a0the <strong>pleuroperitoneal canal</strong> in the developing fetus. This malformation allows the abdominal organs to push into the chest cavity, impairing lung development and function. The most common type of CDH is a <strong>Bochdalek hernia</strong>, which usually involves the <strong>left</strong> side. Mortality is predominantly due to the development of <strong>pulmonary hypoplasia.</strong></p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<p>Chest X-ray findings in congenital diaphragmatic hernia include:</p>\n<ul>\n<li>Bowel loops in the thorax</li>\n<li>Indistinct diaphragm with opacification of part of or all the hemithorax (typically left-sided)</li>\n<li>Deviation of lines such as the endotracheal tube, nasogastric tube, umbilical arterial and venous catheters.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c16ee66ca34248c69021b0269abf697e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1e960a2592f64a42982a69b45d8505bdx251x254.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d2265ac4cd22452480fae1ddc1e40f76x611x1024.JPEG"
    ]
  },
  {
    "text": "A 24-year-old woman presents with chronic bloody diarrhea and abdominal pain. A barium enema was done and is as shown. What is her likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Ulcerative colitis"
      },
      {
        "id": 2,
        "text": "Tuberculosis"
      },
      {
        "id": 3,
        "text": "Crohns disease"
      },
      {
        "id": 4,
        "text": "Sigmoid volvulus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario along with the<strong> lead pipe</strong> <strong>appearance</strong> of the colon in the barium study is suggestive of<strong>\u00a0ulcerative colitis</strong>.\u00a0</p>\n<p>Ulcerative colitis is an inflammatory bowel disease resulting in <strong>superficial</strong> erosions confined to the mucosa and submucosa of the colon. It starts from the rectum and extends proximally in a continuous manner. Clinical features include abdominal pain, diarrhea (often with blood), rectal bleeding, tenesmus, and passage of mucus.\u00a0</p>\n<p>On barium studies, the lead pipe appearance refers to the complete <strong>loss </strong>of<strong> haustral markings</strong> in the affected section of the colon, which appears smooth-walled and cylindrical, resulting from chronic inflammation.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8abbcdf657964919ba30ac567cdf09a5.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 10-year old boy presented with jaundice and right upper abdominal pain. An abdominal CT was done and is as shown. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hepatoma"
      },
      {
        "id": 2,
        "text": "Hemangioma"
      },
      {
        "id": 3,
        "text": "Caroli's disease"
      },
      {
        "id": 4,
        "text": "Hydatid cyst"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario and the CT showing a central dot sign suggest\u00a0<strong>Caroli's disease</strong>.</p>\n<p>The central dot sign of Caroli\u2019s disease is a central enhancing fibrovascular bundle containing a<strong> portal vein</strong> surrounded by a focally dilated intrahepatic bile duct cyst. The arrows in the image below point to the central dot sign.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/554c6f5393ad4f509d7b6c479840243b.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7f5f0703264d47afbc7eda39a1d55879x1280x1094.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c5fde3cc83a74daea0aa646095a8626ax720x454.JPEG"
    ]
  },
  {
    "text": "A neonate was admitted to the NICU with persistent jaundice. A USG abdomen was done and is shown below. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Galactosemia"
      },
      {
        "id": 2,
        "text": "Biliary atresia"
      },
      {
        "id": 3,
        "text": "Hemangioma"
      },
      {
        "id": 4,
        "text": "Caroli's disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical scenario along with the <strong>triangular cord sign</strong> on the USG is suggestive of <strong>biliary atresia</strong>.</p>\n<p>The triangular cord sign represents the <strong>fibrous ductal remnant</strong> of the extrahepatic bile duct in biliary atresia. It is usually seen as an\u00a0echogenicity along the anterior wall of the right portal vein.\u00a0In the above image, the arrow represents the fibrous atretic plate at the porta hepatis.</p>\n<p>Biliary atresia may also be termed as noncystic obliterative cholangiopathy. It is a disease of the intra and extrahepatic bile ducts of unknown etiology.</p>\n<p>The classification of biliary atresia with the regions involved is as follows:</p>\n<p>Type I - Common bile duct<br />Type IIa - Common hepatic duct<br />Type IIb - Common bile duct, hepatic duct, cystic duct.<br /><strong>Type III</strong> (most common type) - Common bile duct, hepatic duct, cystic duct; no anastomosable ducts at porta hepatis.</p>\n<p>Clinical features include persistent jaundice, clay-colored stools, and hepatomegaly. Untreated newborns will show signs of liver cirrhosis and failure (ascites, portal hypertension, and failure to thrive).</p>\n<p>Laboratory evaluation will show<strong> elevated</strong> levels of direct and indirect <strong>bilirubin</strong>, alkaline phosphatase, and gamma-glutamyl transpeptidase. Ultrasound will show <strong>hypoplastic</strong> or <strong>absent gallbladder</strong>\u00a0and the\u00a0<strong>triangular cord sign.</strong><strong>\u00a0</strong>The definitive diagnosis is by <strong>intraoperative cholangiography</strong>. Preoperative percutaneous transhepatic cholecystocholangiography <strong>combined with liver biopsy</strong> in cholestatic infants has a sensitivity of 100% and a specificity of 93% for diagnosing biliary atresia.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8f9e3245616b4144a8188f9e6aea224e.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "What is the earliest sign of left atrial enlargement on a chest x-ray ?",
    "choices": [
      {
        "id": 1,
        "text": "Straightening of right cardiac border"
      },
      {
        "id": 2,
        "text": "Enlargement of left atrial appendage"
      },
      {
        "id": 3,
        "text": "Presence of double atrial shadow"
      },
      {
        "id": 4,
        "text": "Elevation of left main bronchus and widening of carina"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Enlargement</strong> of the <strong>left atrial appendage</strong>\u00a0is the <strong>earliest</strong>\u00a0<strong>sign</strong> of left atrial enlargement (<strong>LAE</strong>) on a chest x-ray. <strong>\u00a0</strong>It is<strong>\u00a0</strong>seen as a fullness below the pulmonary artery.\u00a0</p>\n<p>Other radiographic signs seen in LAE include:</p>\n<ul>\n<li>The third mogul sign represents an enlargement of the left atrial appendage along the upper left cardiac border, leading to <strong>straightening of the left heart border.</strong></li>\n<li><strong>Posterior\u00a0displacement</strong> of the <strong>oesophagus</strong> - seen on the lateral view of the barium swallow study.</li>\n<li>Elevation of left main bronchus and widening of the carina.</li>\n<li><strong>Double</strong> <strong>density\u00a0</strong>sign or double atrial shadow - the enlarged LA extends towards the right cardiac border, hence, both RA and LA borders can be seen distinctly over the right heart border (as shown below):</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dc9f03a621aa4e91a5fabdf444107afdx1069x699.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e5d5ded10df847af8a9ca993699a6317x753x785.JPEG"
    ]
  },
  {
    "text": "Hilar dance was seen on fluoroscopy of an infant with suspected congenital heart disease. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Atrial septal defect"
      },
      {
        "id": 2,
        "text": "Ventricular septal defect"
      },
      {
        "id": 3,
        "text": "Patent ductus arteriosus"
      },
      {
        "id": 4,
        "text": "Tetralogy of Fallot"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Hilar dance</strong> on fluoroscopy is seen in patients with an <strong>atrial septal defect</strong> (<strong>ASD</strong>), due to vigorous<strong> pulmonary artery pulsations</strong>.</p>\n<p>ASD is characterised by an <strong>abnormal opening</strong> in the atrial septum, allowing communication between the right and left atria. There are <strong>four</strong>\u00a0<strong>types</strong>\u00a0based on their location within the septum:</p>\n<ul>\n<li>Secundum ASD -\u00a0<strong>most common</strong>, usually an isolated abnormality</li>\n<li>Primum ASD - associated with abnormal mitral valve leaflet (partial AV septal defect)</li>\n<li>Sinus venous - associated with anomalous right pulmonary venous return to the\u00a0SVC or RA</li>\n<li>Coronary sinus type ASD - also called unroofed coronary sinus</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6e17ae2c4b26467e8f9823d175671e21x1280x1274.JPEG"
    ]
  },
  {
    "text": "A radiologist observes the following finding on a patient's  X-ray. Which condition is it seen in?",
    "choices": [
      {
        "id": 1,
        "text": "Coarctation of aorta"
      },
      {
        "id": 2,
        "text": "Rickets"
      },
      {
        "id": 3,
        "text": "Marfan's syndrome"
      },
      {
        "id": 4,
        "text": "Multiple myeloma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The X-ray shows\u00a0inferior<strong> rib notching</strong>. It is seen in <strong>coarctation of aorta</strong>.</p>\n<p>The most common location of the coarctation is just beyond the origin of the left subclavian artery. The following\u00a0radiograph findings are seen in this condition:</p>\n<ul>\n<li>Inferior rib notching (<strong>Roesler sign</strong>):\n<ul>\n<li>It occurs due to <strong>erosion</strong> of inferior margins of ribs by\u00a0dilated intercostal<strong> collateral vessels</strong> that are formed to bypass the coarctation\u00a0</li>\n<li>It is a <strong>late feature</strong> and is unusual in patients &lt; 5 years of age</li>\n<li>Ribs 4-8 are commonly notched and ribs\u00a01-2<sup>\u00a0</sup>are usually spared</li>\n</ul>\n</li>\n<li><strong>Figure of 3 </strong>or<strong>\u00a0</strong>reverse 3 sign refers to an abnormality in the contour of the aorta, as shown below.</li>\n</ul>\n<p>Causes for inferior rib notching (<strong>Roesler sign</strong>) are:</p>\n<ul>\n<li>Unilateral:\n<ul>\n<li>Subclavian artery occlusion.</li>\n<li>Coarctation of aorta involving left subclavian or anomalous right subclavian artery</li>\n</ul>\n</li>\n<li>Bilateral:\n<ul>\n<li>Coarctation of aorta, occlusion, aortitis</li>\n<li>Takayasu\u2019s disease and atheroma of\u00a0subclavian artery</li>\n<li>Pulmonary oligemia (ToF, pulmonary atresia, stenosis)</li>\n<li>SVC or IVC obstruction</li>\n<li>AV malformation</li>\n<li>Neurofibromatosis type 1</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c178ee18abbc429a95a35dc23bbe88f3.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/71d0357800424aeea41702bae86c38f0x510x660.GIF"
    ]
  },
  {
    "text": "A 57-year-old woman with chest pain was diagnosed with acute myocardial infarction. What test can detect areas of reversible myocardial ischemia in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Coronary angiography"
      },
      {
        "id": 2,
        "text": "MUGA Scan"
      },
      {
        "id": 3,
        "text": "Thallium scan"
      },
      {
        "id": 4,
        "text": "Resting echocardiography"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A<strong> thallium</strong>\u00a0<strong>scan</strong> is performed to detect <strong>reversible myocardial</strong> <strong>ischemia</strong>. It evaluates myocardial perfusion both at rest and during stress (exercise/pharmacological).\u00a0</p>\n<p>In <strong>reversible</strong> ischemia, a <strong>cold</strong> spot is seen during exercise or stress due to reduced perfusion, but <strong>normal</strong> perfusion is observed at rest. Conversely, <strong>irreversible</strong> infarction is indicated by<strong> cold spot</strong> during rest and stress/exercise.\u00a0</p>\n<p>In technetium and pyrophosphate scanning, infarct appears as a <strong>hot</strong> spot.</p>\n<p><strong>MUGA </strong>(multiple gated acquisition) scan is a nuclear imaging test that can evaluate the <strong>function</strong> of the<strong>\u00a0ventricles.</strong> It is used for informed diagnostic intervention in heart failure. Its specific uses are in evaluating the degree of myocardial damage following myocardial infarction and in assessing cardiac dysfunction in patients on cardiotoxic drugs like anthracyclines.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old man presented with thunderclap headaches and seizures. There is no history of trauma. Non-contrast CT was done and is shown below. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Subarachnoid hemorrhage"
      },
      {
        "id": 2,
        "text": "Subdural hemorrhage"
      },
      {
        "id": 3,
        "text": "Extradural hemorrhage"
      },
      {
        "id": 4,
        "text": "Intracerebral hemorrhage"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical features of a <strong>thunderclap headache</strong> and <strong>seizures</strong> with the given CT scan showing hyperdense areas corresponding to blood in the subarachnoid basal cisterns suggest a diagnosis of&nbsp;<strong>subarachnoid hemorrhage.</strong></p>\n<p>Subarachnoid hemorrhage&nbsp;(SAH) is the bleeding&nbsp;into the&nbsp;subarachnoid space, which is the area between the&nbsp;arachnoid membrane&nbsp;and the pia mater&nbsp;surrounding the&nbsp;brain. It usually occurs due to bleeding from a <strong>ruptured aneurysm</strong> or arteriovenous malformation. Most of the ruptured aneurysms are located at the <strong>circle of Willis</strong>.</p>\n<p>Patients present with a sudden and severe&nbsp;headache referred to as&nbsp;<strong>thunderclap headache, </strong>which may be associated with&nbsp;<strong>vomiting,</strong>&nbsp;<strong>decreased consciousness</strong>, and&nbsp;<strong>seizures.&nbsp;</strong>Neck stiffness and photophobia may develop after a few hours.</p>\n<div class=\"page\" title=\"Page 681\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Non-contrast CT scan</strong> is the imaging modality of choice if done within 12 hours. It shows an&nbsp;<strong>increased density </strong>of the<strong> cerebrospinal fluid (CSF) spaces</strong>. A <strong>lumbar puncture</strong> should be done if there is a strong suspicion of SAH but <strong>negative CT findings</strong>. It is ideally done 12 hours later. This allows for red blood cell lysis to occur and bilirubin to be detected in the CSF.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3b56fc3d250b468aa5558f1b20837515.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old man is brought to the emergency room following an RTA. His GCS progressively declines over hours. Based on the MRI finding shown, what is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Diffuse axonal injury"
      },
      {
        "id": 2,
        "text": "Extensive subarachnoid haemorrhage"
      },
      {
        "id": 3,
        "text": "Hypoxic cerebral injury"
      },
      {
        "id": 4,
        "text": "Multiple haemorrhagic contusion"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario of a declining GCS score following a road traffic accident, combined with the given MRI demonstrating <strong>hypointense microhemorrhagic foci</strong>, suggests<strong> diffuse axonal injury (DAI)</strong>.</p>\n<p>Diffuse axonal injury (white matter shearing) is a severe form of traumatic brain injury caused by rotational acceleration/deceleration, leading to axonal shearing or disruption and forming microhemorrhages. Typically, these lesions are located at the <strong>grey-white matter junction</strong>\u00a0in the corpus callosum and, in severe cases, the brainstem.\u00a0</p>\n<p><strong>MRI</strong> is the preferred modality for assessing suspected diffuse axonal injury, even in patients with normal CT of the brain. Gradient-recalled echo (<strong>GRE</strong>) &amp; susceptibility-weighted imaging (<strong>SWI</strong>) are the most sensitive MRI sequences for detecting micro-bleeds, which appear as hypointense foci.\u00a0</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f789d158017645ffafe37836664d9f28.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5d3f52bf065c4f279aa3c99d62f01890x1200x1335.JPEG"
    ]
  },
  {
    "text": "The CT scan of a patient who presented with deteriorating consciousness is shown below. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Subdural hygroma"
      },
      {
        "id": 2,
        "text": "Tension pneumocephalus"
      },
      {
        "id": 3,
        "text": "Non tension pneumocephalus"
      },
      {
        "id": 4,
        "text": "Epidural lipoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given CT image demonstrates the <strong>Mount Fuji sign</strong>, a specific radiological finding of <strong>tension\u00a0pneumocephalus</strong>.</p>\n<p>This sign is characterised by bilateral compression and separation of the frontal lobes due to the trapped subdural and interhemispheric free air, which appears as non-attenuating collections resembling the peak of Mount Fuji.\u00a0</p>\n<p>Tension pneumocephalus is a rare, <strong>life-threatening</strong> condition most commonly caused by traumatic head injury. Other causes include skull base fractures, neurosurgical procedures, infections (meningitis, encephalitis, or brain abscess), brain tumours, or the use of nitrous oxide during anaesthesia.\u00a0</p>\n<p>The <strong>mass effect</strong> exerted by the subdural air compresses the underlying brain parenchyma, often resulting from a ball-valve mechanism causing one-way air entry into the subdural space. This <strong>raises intracranial pressure</strong> (ICP), distinguishing it from non-tension pneumocephalus, which lacks significant mass effect or raised ICP.\u00a0</p>\n<p>The elevated ICP leads to rapid clinical deterioration, such as worsening consciousness, necessitating <strong>urgent neurosurgical intervention</strong> to decompress the trapped air and prevent permanent brain damage.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2445bef1f939478592f509e8c43dbf65.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which condition is associated with the pancake brain sign on CT?",
    "choices": [
      {
        "id": 1,
        "text": "Holoprosencephaly"
      },
      {
        "id": 2,
        "text": "Lissencephaly"
      },
      {
        "id": 3,
        "text": "Schizencephaly"
      },
      {
        "id": 4,
        "text": "Porencephaly"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The<strong> pancake brain sign </strong>represents the appearance of the cerebral parenchyma in the case of\u00a0<strong>a</strong><strong>lobar holoprosencephaly</strong>.</p>\n<p>Holoprosencephaly is a developmental disorder of the brain caused by the defective formation of the <strong>prosencephalon</strong> and impaired induction of forebrain structures. It is commonly associated with trisomy 13 (<strong>Patau syndrome</strong>), with alobar holoprosencephaly representing the most severe form. Features of holoprosencephaly include a\u00a0single ventricular cavity (<strong>boomerang-shaped/horseshoe ventricle</strong>), fusion of frontal lobes, corpus callosum dysgenesis and other abnormalities.</p>\n<p>The following image is a CT brain showing a 'pancake appearance' in alobar holoprosencephaly:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0e7c6941bd094324a343754e29ad5b6ax630x630.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cfd18bef5b9e4f7ba10f87d3f73d4033x928x1068.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/77574f2259034354865128f9d3b3b498x842x963.JPEG"
    ]
  },
  {
    "text": "A 24-year-old primigravida has come for an antenatal ultrasound examination. The sonographic image obtained is shown below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Spina bifida"
      },
      {
        "id": 2,
        "text": "Anencephaly"
      },
      {
        "id": 3,
        "text": "Holoprosencephaly"
      },
      {
        "id": 4,
        "text": "Omphalocele"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows the <strong>lemon sign</strong>, which is seen in <strong>spina bifida.</strong></p>\n<p><strong>Spina bifida</strong>\u00a0is the common\u00a0<strong>open neural tube defect</strong>\u00a0associated with hydrocephalus and<strong> Arnold-Chiari II </strong>malformation. It is the most common open neural tube disorder. Spina bifida is characterized by a cleft in the vertebral column with a corresponding defect in the skin so that the<strong> meninges and spinal cord are exposed.</strong></p>\n<p>The 3 main types of spina bifida:</p>\n<ul>\n<li><strong>Spina bifida occulta</strong> - This is the mildest form of spina bifida. The defect in the vertebral arches is covered by the skin. The splits in the vertebrae are so small that the spinal cord does not protrude. The skin at the site of the lesion may be normal, or it may have some hair growing from it.</li>\n<li><strong>Meningocele</strong> - The defect in the vertebra allows the meninges to protrude through the defect.</li>\n<li><strong>Myelomeningocele</strong> (meningomyelocele) - A defect in the vertebral column allows the spinal cord with the meningeal coverings to protrude.\u00a0</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7adc5b32b0144e20a15e9527b047f4ec.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4898652bfb914bfd95154ad132c676aex500x254.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cc4130462341426a971b770dd25a14d3x512x392.PNG"
    ]
  },
  {
    "text": "The MRI of a patient who presented with seizures is shown below. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Sturge-Weber syndrome"
      },
      {
        "id": 2,
        "text": "Tubercular Meningitis"
      },
      {
        "id": 3,
        "text": "Meningioma"
      },
      {
        "id": 4,
        "text": "Von Hippel-Lindau disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical presentation of seizures, characteristic port-wine stain on the face(capillary malformation), along with the above MRI findings of <strong>leptomeningeal enhancement </strong>and<strong> cortical atrophy, </strong>indicate a diagnosis of\u00a0<strong>Sturge-Weber syndrome</strong>. These findings are because of plial angiomatosis best visualized in contrast-enhanced MRI.</p>\n<p>It occurs due to<strong> </strong>leptomeningeal hemangioma<strong>,\u00a0</strong>resulting in a vascular steal\u00a0affecting the subjacent cortex and white matter producing localized ischemia and calcification.</p>\n<p>The CT brain below, also shows <strong>tram-track cortical calcifications</strong>, a characteristic feature of Sturge-Weber syndrome.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5a63eb42dc504e4a84418fe424c6dac1.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/70e224cb8f474989967b054500d2890dx720x720.JPEG"
    ]
  },
  {
    "text": "An 18-year-old male presented with seizures. On examination, hypopigmented macules and facial angiofibromas were present. CT image is given below. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Von Hippel-Lindau disease"
      },
      {
        "id": 2,
        "text": "Neurofibromatosis 1"
      },
      {
        "id": 3,
        "text": "Tuberous sclerosis"
      },
      {
        "id": 4,
        "text": "Sturge-Weber syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given CT image shows <strong>calcified subependymal hamartomatous nodules. </strong>The CT findings along with\u00a0<strong>hypopigmented macules</strong> (ash-leaf macules) and <strong>facial angiofibromas\u00a0</strong>(adenoma sebaceum) is suggestive of <strong>tuberous sclerosis. </strong>It is associated with renal angiomyolipoma and cardiac rhabdomyoma.</p>\n<p>The image given below shows\u00a0calcified subependymal hamartomatous nodules:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/440883a11019407a98e2f28515aa79d1.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/df9583a069e14cc8860c6b60f1a0d2e1x1048x1258.PNG"
    ]
  },
  {
    "text": "A mother brought her 7-month-old infant with concerns of abnormal eye movements and developmental delay. MRI was done and is shown below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Joubert syndrome"
      },
      {
        "id": 2,
        "text": "Multiple system atrophy"
      },
      {
        "id": 3,
        "text": "Hallevorden-Spatz disease"
      },
      {
        "id": 4,
        "text": "Sturge Weber syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The axial T1-weighted MRI shows <strong>molar tooth sign</strong> at the level of superior cerebellar peduncles. Given the clinical presentation and radiological findings, the diagnosis is <strong>Joubert syndrome.\u00a0</strong></p>\n<p>This <strong>autosomal recessive</strong> neurological disorder is characterised by <strong>cerebellar vermis hypoplasia</strong> and is associated with hypotonia, developmental delay, ataxia, irregular breathing patterns, and abnormal eye movements.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a1b183c6aaf0417eb4d3eb697995dac3.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Eye of tiger sign on MRI is seen in which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Hallervorden-Spatz syndrome"
      },
      {
        "id": 2,
        "text": "Creutzfeldt-Jakob disease"
      },
      {
        "id": 3,
        "text": "Sturge-Weber syndrome"
      },
      {
        "id": 4,
        "text": "Neurofibromatosis 2"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>eye of the tiger sign </strong>can be seen in <strong>Hallervorden-Spatz syndrome</strong>.</p>\n<p>The '<strong>eye of the tiger</strong>' sign on the T2-weighted MRI appears as bilateral symmetrical <strong>hyperintense</strong> signals in global pallidus (due to gliosis and spongiosis), surrounded by <strong>hypointense </strong>areas (due to abnormal accumulation of iron).</p>\n<p>Hallervorden-Spatz syndrome or\u00a0Pantothenate kinase-associated neurodegeneration (<strong>PKAN</strong>) is an <strong>autosomal recessive</strong> disorder causing involuntary spasticity and progressive dementia. It is a subset of neurodegeneration with brain iron accumulation (NBIA).\u00a0</p>\n<p>It is also seen in Progressive supranuclear palsy, early-onset levodopa-responsive Parkinsonism, and cortical-basal ganglionic degeneration.</p>\n<p>The image below depicts the eye of the tiger sign:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f84930ec512d44ebae5ffc4fe1a20f91x630x630.PNG"
    ]
  },
  {
    "text": "Bracket calcification on skull X-Ray is seen in which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Tuberous sclerosis"
      },
      {
        "id": 2,
        "text": "Sturge Weber syndrome"
      },
      {
        "id": 3,
        "text": "Lipoma of corpus callosum"
      },
      {
        "id": 4,
        "text": "Meningioma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Lipoma of the corpus callosum</strong> shows\u00a0bracket calcification<strong>\u00a0</strong>on skull X-ray.</p>\n<p><strong>Intracranial lipomas</strong> are most commonly located in the<strong> midline</strong> and are commonly associated with congenital malformations such as agenesis/dysgenesis of the corpus callosum. Pericallosal lipomas are classified into anteriorly located bulky <strong>tubulo-nodular</strong> type and posteriorly located ribbon-like <strong>curvilinear</strong> type. Imaging is the mainstay in the diagnosis of intracranial lipoma.\u00a0</p>\n<p>The image below shows bracket calcification:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4506c279ae024b31a0421a3ca26ff661x510x699.GIF"
    ]
  },
  {
    "text": "A 65-year-old man has been experiencing worsening headaches and new-onset seizures. MRI with contrast was done and is given below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Glioblastoma"
      },
      {
        "id": 2,
        "text": "Ependymoma"
      },
      {
        "id": 3,
        "text": "Meningioma"
      },
      {
        "id": 4,
        "text": "Acoustic schwannoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given MRI finding is suggestive of<strong> glioblastoma</strong>. Post-contrast MRI in the case of glioblastoma multiforme, demonstrates a large heterogeneous mass that crosses the <strong>corpus callosum</strong> into both frontal lobes.\u00a0</p>\n<p>They have a <strong>preferential spreading</strong> along the condensed white matter tracts such as <strong>corticospinal tracts </strong>and<strong> corpus callosum </strong>and can give rise to the so-called\u00a0<strong>butterfly glioma,\u00a0</strong>to involve the contralateral hemisphere.\u00a0The term butterfly refers to the symmetric wing-like extensions across the midline.\u00a0</p>\n<p>There is also evidence of a previous left-sided craniotomy and biopsy tract down to the lesion.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fdf5080b431b4fcd9a00d86321fb00b3.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d1680d656cc442aca0520e5601453502x510x600.GIF"
    ]
  },
  {
    "text": "A 60-year-old woman presented with hearing loss and tinnitus. MRI was done and showed the following finding. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Otosclerosis"
      },
      {
        "id": 2,
        "text": "Meniere\u2019s disease"
      },
      {
        "id": 3,
        "text": "Acoustic schwannoma"
      },
      {
        "id": 4,
        "text": "Glioblastoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Based on the above clinical findings and the MRI, which reveals a <strong>cerebellopontine angle mass, </strong>the diagnosis is <strong>acoustic schwannoma</strong>(vestibular schwannoma). The extension of the mass into the intra-canalicular portion of the internal acoustic meatus is suggestive of acoustic neuroma.\u00a0</p>\n<p>This tumour is the most common mass in the cerebellopontine(CP) angle. Its extra-canalicular extension into the CP angle may create the \"<strong>ice cream cone</strong>\" appearance. Additionally, the presence of bilateral acoustic schwannoma is highly suggestive of <strong>neurofibromatosis type 2</strong> (NF2). <strong>MRI</strong> is the imaging modality of choice in assessing the possible vestibular schwannoma.\u00a0</p>\n<p>The given image is a post-contrast T1 axial imaging demonstrating the presence of bilateral acoustic schwannomas.<br />\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7c3276ba70e045a3bd2840d0c7916698.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ae403e0b138b421195d32096644f82d9x252x294.JPEG"
    ]
  },
  {
    "text": "During MRI brain scan of a patient, the radiologist notices the absence of swallow tail appearance. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Wilson\u2019s disease"
      },
      {
        "id": 2,
        "text": "Progressive supranuclear palsy"
      },
      {
        "id": 3,
        "text": "Multiple systems atrophy"
      },
      {
        "id": 4,
        "text": "Parkinson's disease"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>absence </strong>of the<strong> swallow tail sign</strong>\u00a0is suggestive of\u00a0<strong>Parkinson's disease.</strong></p>\n<p>The swallow tail sign describes the <strong>normal</strong> axial imaging appearance of<strong> nigrosome-1 </strong>within the <strong>substantia nigra</strong> on a high-resolution T2/SWI weighted MRI.\u00a0</p>\n<p>Other options:\u00a0</p>\n<p>Option A:\u00a0<strong>Wilson\u2019s disease </strong>is a rare, autosomal recessive disorder characterized by <strong>excessive deposition </strong>of free <strong>copper </strong>in tissues. It is due to a loss of function mutation of the ATP7B gene. It is also known as hepatolenticular degenerative disease.</p>\n<p>MRI brain in advanced disease with neurological manifestations can show <strong>giant panda face sign </strong>(as shown below), which is hypointense superior colliculus (chin and mouth of panda), the hyperintense area around the tegmentum of the midbrain (eyes of panda), and normal substantia nigra (ears of panda).\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3141be5a8a0946898bd924eb475ebdd8x1051x1219.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b708b7fdd2d64351a093af36528135a0x510x506.GIF",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/97256ffe34af449bbc44f08842f1d9e6x720x782.JPEG"
    ]
  }
];
        let quizName = 'Radiology St 1';
        const quizFilename = 'radiology-st-1-2010b476.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>