<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surgery St 2 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Damage control surgery for blunt trauma abdomen includes all of the following except",
    "choices": [
      {
        "id": 1,
        "text": "Arrest hemorrhage"
      },
      {
        "id": 2,
        "text": "Control sepsis"
      },
      {
        "id": 3,
        "text": "Prevent contamination"
      },
      {
        "id": 4,
        "text": "Repair of liver laceration"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Damage control surgery is done to stabilize the unstable patient, since repair of liver laceration <strong>can be done only after the patient is stabilized</strong> , it is <strong>not a component of damage control surgery.</strong></p>\n<p><strong>Damage control surgery:</strong></p>\n<ul>\n<li>Damage control surgery is a<strong> staged process</strong> which is used when there is an<strong> unstable patient</strong> whose <strong>disturbed physiology hampers definitive management</strong>.</li>\n<li>Initial focus is <strong>hemorrhage control</strong>, followed by<strong> control and limitation of contamination</strong>.</li>\n<li>This can be achieved by simple ligation of vessels, shunting of major arteries and veins, drainage, temporary stapling off of bowel, and therapeutic packing.</li>\n<li>Then the abdomen is closed temporarily using a plastic sheet with suction.</li>\n<li>Patient is shifted to the ICU and further resuscitation is carried out.</li>\n<li>Once the patient is stabilized he is taken back to the OT and definitive repair (eg; suturing of liver laceration) is done.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements regarding congenital anomalies of kidney is false?",
    "choices": [
      {
        "id": 1,
        "text": "In renal agenesis both adrenals are usually present in the normal position"
      },
      {
        "id": 2,
        "text": "Abnormal descent of the metanephros leads to an ectopic kidney"
      },
      {
        "id": 3,
        "text": "Horseshoe kidneys have an elevated incidence of vesicoureteral reflux"
      },
      {
        "id": 4,
        "text": "Medullary sponge kidney results from collecting tubular ectasia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Abnormal <strong>ascent not the&nbsp; descent</strong>&nbsp;of the metanephros leads to an ectopic kidney.</p>\n<ul>\n<li>\n<p>Because adrenal gland development is unrelated to kidney development, both adrenals are usually present in the normal position.</p>\n</li>\n<li>Horseshoe kidneys have an elevated incidence of vesicoureteral reflux and are at increased risk of ureteropelvic junction obstruction (UPJO).</li>\n<li>Medullary sponge kidney results from <strong>collecting tubular ectasia</strong>&nbsp;and is associated with recurrent urolithiasis and an increased incidence of infection in 50% of patients.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following describes degloving injury?",
    "choices": [
      {
        "id": 1,
        "text": "Skin is stripped off the subcutaneous tissue"
      },
      {
        "id": 2,
        "text": "Skin and subcutaneos fat are stripped off the underlying fascia"
      },
      {
        "id": 3,
        "text": "Skin, subcutaneous fat and fascia stripped off underlying muscle"
      },
      {
        "id": 4,
        "text": "Muscle also is stripped off leaving exposed bone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Degloving injury occurs when the <strong>skin and subcutaneos fat are stripped by avulsion</strong> from its underlying fascia, leaving the <strong>neurovascular structures, tendon or bone exposed. </strong></p>\n<p>Degloving injury can be either open or closed.</p>\n<ul>\n<li><strong>Open degloving injury</strong>- ex: Ring avulsion injury with the loss of finger skin.</li>\n<li><strong>Closed degloving injury</strong>- ex: Roll over injury caused by motor vehicle.</li>\n</ul>\n<p><strong>Investigation for checking viability of skin:</strong></p>\n<ul>\n<li>Examination under UV light after injection of flourescein.</li>\n<li>Serial excision until punctate dermal bleeding is obvious.</li>\n</ul>\n<p>Image:&nbsp;Degloving injury</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/95f295d9d3fa4e808b303f4c4709140ax423x462.PNG"
    ]
  },
  {
    "text": "What is the procedure being shown?",
    "choices": [
      {
        "id": 1,
        "text": "Feeding jejunostomy"
      },
      {
        "id": 2,
        "text": "Percutaneous endoscopic gastrostomy"
      },
      {
        "id": 3,
        "text": "Conventional gastrostomy"
      },
      {
        "id": 4,
        "text": "Endoscopic cystogastrostomy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Percutaneous endoscopic gastrostomy or PEG is one of the latest methods of <strong>placing a gastrostomy tube</strong>.</p>\n<p><strong>Steps being done:</strong></p>\n<ul>\n<li>It uses an endoscope to<strong> insufflate the stomach</strong> and a <strong>direct percutaneos needle puncture</strong> made at a point where the stomach abuts the wall.</li>\n<li><strong>Trochar is inserted</strong> and a wire passed into the stomach, which can be caught with a snare.</li>\n<li>The <strong>scope is withdrawn, pulling the wire out through the mouth</strong>, at which point it is attached to the gastrostomy tube.</li>\n<li>The gastrostomy is pulled through into the stomach and out through the track created by the trochar insertion.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a9bdc06aadc04b96b6c01956d02be296.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "About splenic artery aneuryms all are correct except:",
    "choices": [
      {
        "id": 1,
        "text": "They are twice as common in the female"
      },
      {
        "id": 2,
        "text": "They are usually asymptomatic"
      },
      {
        "id": 3,
        "text": "They are more prone to rupture in pregnancy"
      },
      {
        "id": 4,
        "text": "All diagnosed cases need intervention"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>All diagnosed cases of splenic artery aneurysm <strong>do not need intervention</strong>.</p>\n<ul>\n<li>In the <strong>elderly patient</strong> with a<strong> calcified aneurysm</strong>, there is less risk of rupture and <strong>observation may be preferred</strong>.</li>\n<li>In the younger patient with an asymptomatic aneurysm surgery or inteventional radiology is indicated.</li>\n<li>In patients with <strong>pancreatic necrosis</strong>, the treatment will include <strong>drainage of the septic focus</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The uterine artery crosses the ureter ______",
    "choices": [
      {
        "id": 1,
        "text": "Laterally"
      },
      {
        "id": 2,
        "text": "Medially"
      },
      {
        "id": 3,
        "text": "Anteriorly"
      },
      {
        "id": 4,
        "text": "Posteriorly"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The uterine artery crosses the ureter <strong>anteriorly&nbsp;</strong>(Water under the bridge). Damage to the ureter is more likely at this site (<strong>most dangerous</strong> site) during <strong>hysterectomy</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are true about sliding inguinal hernia except?",
    "choices": [
      {
        "id": 1,
        "text": "It is an acquired hernia"
      },
      {
        "id": 2,
        "text": "It occurs at the deep ring medial to the inferior epigastric vessels"
      },
      {
        "id": 3,
        "text": "Sigmoid colon may be pulled in the the hernia on the left side"
      },
      {
        "id": 4,
        "text": "Extra caution during repair is needed to prevent injury to the bowel"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Sliding inguinal hernia occurs at the deep ring lateral to the inferior epigastric vessels</strong>.</p>\n<p><strong>Sliding inguinal hernia:</strong></p>\n<ul>\n<li>It is an <strong>acquired hernia</strong> due to weakening of the abdominal wall.</li>\n<li>This occurs at the deep inguinal ring<strong> lateral to the Inferior Epigastric vessels</strong>.</li>\n<li>Retroperitoneal fatty tissue is pushed downwards along the inguinal canal.</li>\n<li>As more tissue enters the hernia, <strong>peritoneum is pulled with it</strong>, thus creating a sac.</li>\n<li>However, the <strong>sac has formed secondarily</strong>\u00a0distinguishing it from a classic indirect hernia.</li>\n</ul>\n<p><strong>Sigmoid colon</strong> can be involved on the <strong>left side</strong> and the <strong>caecum</strong> or bladder on the <strong>right side.</strong></p>\n<p>Surgeons need extra caution during repair as the <strong>wall of the large bowel may not be covered by peritoneum and can be damaged</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "TMPRSS2-ETS fusion genes are associated with _____",
    "choices": [
      {
        "id": 1,
        "text": "Carcinoma prostate"
      },
      {
        "id": 2,
        "text": "Carcinoma breast"
      },
      {
        "id": 3,
        "text": "Carcinoma lung"
      },
      {
        "id": 4,
        "text": "Carcinoma colon"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>TMPRSS2-ETS fusion genes </strong>occur in approximately 40\u201350% of prostate cancers; it is possible that unregulated increased expression of ETS transcription factors interfere with prostatic epithelial cell differentiation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Triple assesment in breast carcinoma includes all of the following except_________",
    "choices": [
      {
        "id": 1,
        "text": "Clinical examination"
      },
      {
        "id": 2,
        "text": "Tumor marker levels"
      },
      {
        "id": 3,
        "text": "Mammography"
      },
      {
        "id": 4,
        "text": "Histopathology"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Calculation of Tumour marker levels is not included in triple assessment.</p>\n<p>In any patient who presents with a breast lump, the diagnosis should be made by <strong>triple assessment</strong> which is a combination of:</p>\n<ul>\n<li><strong>Clinical assessment</strong></li>\n<li><strong>Radiological imaging </strong></li>\n<li><strong>Tissue sample</strong> taken for either cytological or histological analysis called as.</li>\n</ul>\n<p>The positive predictive value (PPV) of this combination should exceed <strong>99.9%</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/9c9b5d0a4c9f4c1b98bf86124feef5d9x797x437.PNG"
    ]
  },
  {
    "text": "What is the appropriate age at which corrective surgery should be done for the defect shown in the image?",
    "choices": [
      {
        "id": 1,
        "text": "6-18 months"
      },
      {
        "id": 2,
        "text": "1-6 months"
      },
      {
        "id": 3,
        "text": "Immediately after birth"
      },
      {
        "id": 4,
        "text": "After 2 years of age"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows <strong>penoscrotal hypospadias.</strong> Operations for hypospadias are routinely performed when the patient is between <strong>6 and 18 months</strong> of age. The infant has good <strong>tolerance to surgery</strong> by the age of <strong>6</strong> months. The child is well <strong>aware of his genitalia</strong> and will be <strong>toilet trained</strong> by the age of <strong>18</strong> months.</p>\n<p>Surgery in hypospadias is done to correct problems with the urinary stream and for cosmetic reasons. The main principles of surgery in hypospadias include:</p>\n<div class=\"page\" title=\"Page 971\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 1499\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li><strong>Orthoplasty</strong> - Chordee correction</li>\n<li><strong>Urethroplasty</strong> - To reposition the urethral opening</li>\n<li><strong>Glanuloplasty</strong> - Reconstruction of glans</li>\n<li>Skin cover and <strong>scrotoplasty</strong></li>\n</ul>\n<p>Surgery depends on the <strong>site</strong> of the hypospadias. <strong>Tubularized incised plate (TIP) urethroplasty </strong>is the most commonly done procedure. It is done for <strong>distal</strong> hypospadias.</p>\n<p>&nbsp;<strong>Complications&nbsp;</strong>of hypospadias surgery include:</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<ul>\n<li><strong>Urethrocutaneous fistula </strong>(most common)</li>\n<li>Recurrence of chordee</li>\n<li>Urethral stricture</li>\n<li>Meatal stenosis</li>\n<li>Infection</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e157b1d3274b461f8891381e6f77dfb2.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "What procedure is being done?",
    "choices": [
      {
        "id": 1,
        "text": "NOTES"
      },
      {
        "id": 2,
        "text": "SILS"
      },
      {
        "id": 3,
        "text": "VATS"
      },
      {
        "id": 4,
        "text": "Chest tube insertion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>The procedure that is shown is VATS- <strong>Video-Assisted Thoracoscopic Surgery</strong>.</li>\n<li>Many thoracic procedures can be done through VATS like pneumonectomy, lobectomy, empyema drainage, pleural biopsy and pleurodesis.</li>\n<li>The patient is usually positioned with <strong>the</strong> <strong>disease side uppermost</strong>, having had a double lumen endotracheobronchial tube placed by the anaesthetist to allow for<strong> single-lung ventilation</strong>.</li>\n<li><strong>Lung biopsy and the treatment of recurrent pneumothorax</strong> are the most frequent indications.</li>\n<li>The principal advantage is that a <strong>large incision is avoided</strong> resulting in less postoperative pain and a more rapid recovery.</li>\n</ul>\n<p>SILS- <strong>Single Incision Laparoscopic Surgery</strong></p>\n<p>NOTES- <strong>Natural Orifice Transluminal Endoscopic Surgery</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0a9c7e2c3ce44d499c134f6a8c8062c4.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The Bosniak classification system is used in assessing patients with which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Renal cysts"
      },
      {
        "id": 2,
        "text": "Ureteropelvic junction obstruction"
      },
      {
        "id": 3,
        "text": "Renal carcinoma"
      },
      {
        "id": 4,
        "text": "Renal stones"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>Bosniak classification system</strong> is used&nbsp;for assessing patients with&nbsp;<strong>renal cysts</strong>.</p>\n<p>It divides renal cystic masses into <strong>five classes</strong> based on imaging characteristics seen on<strong> CECT</strong>. It is helpful in <strong>predicting</strong> the <strong>risks of malignancy</strong> and identifying the appropriate choice of <strong>clinical follow-up </strong>or<strong> treatment</strong>.</p>\n<table>\n<tbody>\n<tr>\n<td><strong>Renal cyst class</strong></td>\n<td><strong>Risk of malignancy</strong></td>\n<td><strong>Workup</strong></td>\n</tr>\n<tr>\n<td><strong>1</strong></td>\n<td>0%</td>\n<td>Nil</td>\n</tr>\n<tr>\n<td><strong>2</strong></td>\n<td>0%</td>\n<td>Nil</td>\n</tr>\n<tr>\n<td><strong>2F</strong></td>\n<td>5%</td>\n<td>USG/ CT follow up</td>\n</tr>\n<tr>\n<td><strong>3</strong></td>\n<td>50%</td>\n<td>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Partial nephrectomy</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Radiofrequency ablation - in elderly or poor surgical candidates</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td><strong>4</strong></td>\n<td>100%</td>\n<td>Partial or total nephrectomy</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/210d48e8592e456aa0a4de3830436364x1280x2560.JPEG"
    ]
  },
  {
    "text": "Which salivary gland tumor appears as a hot spot on technetium-99m scan?",
    "choices": [
      {
        "id": 1,
        "text": "Mucoepidermoid carcinoma"
      },
      {
        "id": 2,
        "text": "Adenocystic carcinoma"
      },
      {
        "id": 3,
        "text": "Warthins tumor"
      },
      {
        "id": 4,
        "text": "Pleomorphic adenoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Warthin tumour</strong> is a salivary gland tumour that appears as<strong>\u00a0a hot spot </strong>on the<strong> technetium-99m scan</strong>.</p>\n<p>Because of the <strong>high mitochondrial content within oncocytes</strong>, the oncocyte-rich <strong>warthin tumor and</strong> <strong>oncocytomas incorporate technetium-99m</strong> and appear as <strong>hot spots</strong> on radionuclide scan.</p>\n<p><strong>Warthins tumour:</strong></p>\n<ul>\n<li>Warthins tumor is seen in <strong>elderly male smokers</strong></li>\n<li><strong>2<sup>nd</sup>\u00a0most common benign tumour</strong> of parotid gland.</li>\n<li>Usually<strong> Unilateral</strong> and involves the<strong> lower pole</strong> of parotid</li>\n<li>Slow growing <strong>well encapsulated, cystic </strong></li>\n<li><strong>Hot spot on radionuclide scan</strong></li>\n<li>Histology- Lined by <strong>double layer of neoplastic</strong> epithelial cells resting on dense lymphoid stroma.</li>\n<li>Investigation-<strong>\u00a0FNAC</strong></li>\n<li>Treatment-\u00a0<strong>Superficial parotidectomy</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common symptom of peripheral occlusive vascular disease?",
    "choices": [
      {
        "id": 1,
        "text": "Rest pain"
      },
      {
        "id": 2,
        "text": "Intermittent claudication"
      },
      {
        "id": 3,
        "text": "Ulceration"
      },
      {
        "id": 4,
        "text": "Swollen and erythematous limb"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The most common symptom of peripheral obstructive vascular disease is<strong> intermittent claudication</strong>.&nbsp;</p>\n<p>Intermittent claudication is the debilitating <strong>cramp-like pain</strong> felt in the leg muscles due to&nbsp;<strong>reduced blood flow</strong>&nbsp;brought on by peripheral arterial disease. It&nbsp;usually signifies&nbsp;<strong>mild&nbsp;</strong>to<strong>&nbsp;moderate chronic vascular occlusive disease.</strong></p>\n<p><strong>Rest pain&nbsp;</strong>is when the disease progresses to a degree that perfusion is severely reduced and cramp-like pain in the calf is felt even at rest.&nbsp;</p>\n<p>A swollen and erythematous limb is seen in <strong>critical limb ischemia</strong>. When the limb is in the dependent position, there is pooling of blood which causes the limb to appear red and swollen(<strong>sunset foot sign</strong>).</p>\n<p><strong>Buerger's test</strong>&nbsp;is done to assess the severity of peripheral vascular disease. In normal individuals, the elevation of the lower limb to a 90-degree angle does not produce any pallor but in affected individuals, even at an elevation of 20-degrees, <strong>pallor and venous guttering</strong> of the limb can be seen.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old lady experiences increased frequency of urination and lower abdominal pain which is relieved by micturition. Urinalysis is normal. Cystoscopy reveals fissures and punctate hemorrhages in the bladder mucosa. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Interstitial cystitis"
      },
      {
        "id": 2,
        "text": "Malakoplakia"
      },
      {
        "id": 3,
        "text": "Tuberculosis bladder"
      },
      {
        "id": 4,
        "text": "Cystitis cystica"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario with <strong>normal urinalysis</strong> and cystoscopy findings are suggestive of<strong>\u00a0interstitial cystitis.</strong></p>\n<p>Interstitial cystitis is a persistent, painful form of <strong>chronic cystitis</strong>, occurring most frequently in women. It is also known as chronic pelvic pain syndrome or bladder pain syndrome. Its clinical features include:</p>\n<ul>\n<li>Severe suprapubic pain</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Urinary frequency</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Urgency</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Hematuria</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Dysuria without evidence of bacterial infection</li>\n</ul>\n<p>Cystoscopic findings seen in bladder mucosa are:</p>\n<ul>\n<li>Fissures</li>\n<li><strong>Punctate hemorrhages</strong> (glomerulations)</li>\n<li>Ulcerations in the fundus of the bladder <strong>(Hunner's ulcer)</strong></li>\n</ul>\n<p>The image shows Hunner's ulcer seen in interstitial cystitis:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e67a646b32a44f2c9d707ab182567c90x720x748.JPEG"
    ]
  },
  {
    "text": "Which syndrome is associated with absence of breast?",
    "choices": [
      {
        "id": 1,
        "text": "Di George syndrome"
      },
      {
        "id": 2,
        "text": "Pendred syndrome"
      },
      {
        "id": 3,
        "text": "Poland syndrome"
      },
      {
        "id": 4,
        "text": "Von Hippel-Lindau syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Poland syndrome is associated with <strong>congenital absence of one or both the breasts along with absence of sternal portion of the pectoralis major</strong>.</li>\n<li><strong>Pendred syndrome</strong> is B/L sensorineural hearing loss associated with goitre.</li>\n<li><strong>Di George syndrome is associated with absent thymus</strong>.</li>\n<li><strong>Von Hippel-Lindau syndrome</strong> (<strong>VHL</strong>) is a hereditary condition associated with tumors arising in multiple organs.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the largest artery to the stomach?",
    "choices": [
      {
        "id": 1,
        "text": "Right gastric artery"
      },
      {
        "id": 2,
        "text": "Left gastric artery"
      },
      {
        "id": 3,
        "text": "Right gastroepiploic artery"
      },
      {
        "id": 4,
        "text": "Left gastroepiploic artery"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Left gastric artery is the largest artery to the stomach</strong>.</li>\n<li>It is not uncommon for an aberrant left hepatic artery to originate from it.</li>\n</ul>\n<p>Blood supply of the stomach:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ccd98690a08d4feeae22d80d5694ba3ax613x205.PNG"
    ]
  },
  {
    "text": "Acetohydroxamic acid will be prescribed for patients with which of the following types of renal stones?",
    "choices": [
      {
        "id": 1,
        "text": "Cystine stone"
      },
      {
        "id": 2,
        "text": "Oxalate stone"
      },
      {
        "id": 3,
        "text": "Xanthine stone"
      },
      {
        "id": 4,
        "text": "Struvite stone"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Acetohydroxamic acid</strong> is used&nbsp;for the treatment of <strong>struvite stone</strong>.</p>\n<p>It is a <strong>urease inhibitor. </strong>The urease&nbsp;enzyme generates ammonia from urea, <strong>elevating the pH</strong> of the urine. This favors the production of struvite stones. Thus, the use of AHA(Acetohydroxamic acid) causes complete, noncompetitive inhibition of urease production, thereby slowing struvite stone growth. Owing to its side-effects, the use of this drug has been restricted in cases of recurrent UTIs, and those intolerant or who refuse surgical management.</p>\n<p>It can also be used for oral chemolysis and can potentiate the action of antibiotics.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common primary cardiac tumor is_______",
    "choices": [
      {
        "id": 1,
        "text": "Metastatic tumor"
      },
      {
        "id": 2,
        "text": "Lymphangioma"
      },
      {
        "id": 3,
        "text": "Myxoma"
      },
      {
        "id": 4,
        "text": "Papillary fibroelastoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Cardiac myxomas are the <strong>most common primary cardiac tumor</strong>.</p>\n<p><strong>Myxoma:</strong></p>\n<ul>\n<li>They usually arise from the <strong>interatrial septum near the fossa ovalis </strong>in the left atrium.</li>\n<li>Macroscopically, these tumors are <strong>pedunculated</strong> with a gelatinous consistency, and the surface may be smooth (65%), villous, or friable</li>\n<li><strong>7% of cases are familial</strong> as part of Carney complex</li>\n<li><strong>Carney complex is an autosomal dominant disorder characterized by two or more of the following conditions:</strong>\n<ul>\n<li>Atrial and extracardiac myxomas</li>\n<li>Schwannomas</li>\n<li>Cutaneous lentiginosis</li>\n<li>Spotty pigmentation</li>\n<li>Myxoid fibroadenomas of the breast</li>\n<li>Endocrine overactivity (pituitary adenomas or primary adrenal hyperplasia with Cushing&rsquo;s syndrome)</li>\n<li>Testicular tumors.</li>\n</ul>\n</li>\n<li>Cardiac myxomas should be promptly excised after diagnosis due to the significant risk of embolization and cardiovascular complications, including sudden death.</li>\n</ul>\n<p><strong>Note:</strong></p>\n<p>Most common cardiac tumor is secondaries.</p>\n<p>Most common primary tumors in children&nbsp;is rhabdomyomas.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a patient with critical limb ischemia, what is the ankle-brachial pressure index (ABPI) likely to be?",
    "choices": [
      {
        "id": 1,
        "text": "< 0.1"
      },
      {
        "id": 2,
        "text": "< 0.4"
      },
      {
        "id": 3,
        "text": "< 0.5"
      },
      {
        "id": 4,
        "text": "< 0.9"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In a patient with critical limb ischemia, the ABPI is&nbsp;<strong>&lt; 0.4.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A mother brings her 3-month-old infant to the OPD with complaints of him crying while urinating. On palpation, a left-sided flank mass is felt. A USG KUB revealed dilation of the pelvicalyceal system with a normal-looking distal urinary tract. What is the investigation of choice to confirm his diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Intravenous pyelogram"
      },
      {
        "id": 2,
        "text": "99mTc-MercaptoAcetyl-triGlycine scan"
      },
      {
        "id": 3,
        "text": "Micturating cystourethrogram"
      },
      {
        "id": 4,
        "text": "Retrograde urethrogram"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given scenario is suggestive of a ureteropelvic junction (<strong>UPJ</strong>) <strong>obstruction.</strong> The <strong>investigation of choice</strong> for UPJ obstruction is<strong>\u00a0</strong><sup>99m</sup>Tc-MercaptoAcetyl-triGlycine<strong> (MAG3) scan.\u00a0</strong>Delayed clearance of contrast or the radiotracer implies obstruction.</p>\n<p><strong>Renal isotope scans</strong> have replaced intravenous pyelogram as the diagnostic modality of choice in UPJ obstruction.</p>\n<ul>\n<li><strong><sup>99</sup>mTc-MAG3\u00a0</strong>is the <strong>most commonly used</strong> isotope in dynamic renography. Its uptake reflects the <strong>tubular function.</strong></li>\n<li><strong><sup>99</sup>mTc-DTPA</strong> may also be used.\u00a0Its uptake reflects the <strong>glomerular function.</strong> Hence, it is commonly used to <strong>assess GFR</strong>.</li>\n</ul>\n<p>In<strong> obstructive uropathy,\u00a0</strong><strong><sup>99m</sup>Tc-DTPA</strong> is the preferred isotope as glomerular function declines earlier and more rapidly than tubular function.</p>\n<p><strong>Micturating cystourethrogram</strong> is the\u00a0investigation of choice in <strong>vesicoureteric reflux.</strong>\u00a0</p>\n<p>Tc-99m dimercaptosuccinic acid <strong>(DMSA) scan</strong> is used for assessing <strong>renal scarring</strong>.\u00a0</p>\n<p>Note: In children, crying before and after micturition is usually considered normal. While crying during micturition is usually suggestive of pathology.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In the ABCDE of melanoma, the D stands for diameter greater than",
    "choices": [
      {
        "id": 1,
        "text": "2mm"
      },
      {
        "id": 2,
        "text": "4mm"
      },
      {
        "id": 3,
        "text": "6mm"
      },
      {
        "id": 4,
        "text": "8mm"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In melanoma clinical features, <strong>D stands for Diameter which is to be greater than 6mm</strong>.</p>\n<p>Melanoma most commonly manifests as cutaneous disease, and clinical characteristics include</p>\n<ul>\n<li><strong>A- A</strong>symmetry</li>\n<li><strong>B- B</strong>order irregularity</li>\n<li><strong>C- C</strong>olor variations</li>\n<li><strong>D- D</strong>iameter &gt;6mm</li>\n<li><strong><strong>E- E</strong></strong>volution or change over time</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/03d36ec1af5b4244abf648a830989b40x1225x707.PNG"
    ]
  },
  {
    "text": "What kind of suturing is depicted below?",
    "choices": [
      {
        "id": 1,
        "text": "Continous sutures"
      },
      {
        "id": 2,
        "text": "Interrupted sutures"
      },
      {
        "id": 3,
        "text": "Mattress sutures"
      },
      {
        "id": 4,
        "text": "Subcuticular sutures"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>There are four frequently used suture techniques:</p>\n<p><strong>Continuous:</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/54a66bb98e4d4490a080fa68c43bf150.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/a76570f91c0b488d968011b49769de65x461x244.PNG",
      "https://cdn1.dailyrounds.org/uploads/f8f47340536a40bfaf187d58e481f8e4x486x373.PNG",
      "https://cdn1.dailyrounds.org/uploads/a2ad03a494a7422a9e51329ce02fa6f1x493x504.PNG",
      "https://cdn1.dailyrounds.org/uploads/b9d18d774beb4ae99115790eec9803bdx725x278.PNG"
    ]
  },
  {
    "text": "What is the treatment of choice for the condition shown in the picture?",
    "choices": [
      {
        "id": 1,
        "text": "Surgery"
      },
      {
        "id": 2,
        "text": "Chemotherapy"
      },
      {
        "id": 3,
        "text": "Immunotherapy"
      },
      {
        "id": 4,
        "text": "Radiotherapy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>The picture shows a <strong>sacrococcygeal teratoma</strong>.</li>\n<li><strong>Surgical resection is the standard of care and should be performed promptly</strong> because of the risk of hemorrhage and tumor rupture.</li>\n<li>Operative planning must take into account the <strong>degree of intra-abdominal extension</strong>.</li>\n<li>Most tumors can be resected by a <strong>posterior approach, in which a chevron incision</strong> allows the division of the gluteal muscles, ligation of the blood supply and <strong>enbloc resection of the tumor and the coccyx</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/322d2600ae7a4325ae7891da22801a59.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Nephrogenic systemic fibrosis is caused by",
    "choices": [
      {
        "id": 1,
        "text": "Iodine contrast used in CT"
      },
      {
        "id": 2,
        "text": "Gadolinium contrast used in MRI"
      },
      {
        "id": 3,
        "text": "Chronic glomerulonephritis"
      },
      {
        "id": 4,
        "text": "Systemic sclerosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Nephrogenic systemic fibrosis</strong> is caused by<strong> Gadolinium contrast used in MRI</strong>.</p>\n<ul>\n<li>Gadolinium containing contrast agents are used in <strong>MRI</strong>.</li>\n<li>They can be <strong>nephrotoxic</strong> in patients with pre-existing renal failure.</li>\n<li>It causes nephrogenic systemic fibrosis, which is a life-threatening condition whereby <strong>connective tissue forms in the skin causing it to become coarse and hard</strong>.</li>\n<li>NSF may also <strong>affect other organs</strong>, including joints, muscle, liver and heart.</li>\n<li>High risk gadolinium containing contrast agents are <strong>contraindicated</strong> in:\n<ul>\n<li>Severe renal failure</li>\n<li>Neonates</li>\n<li>Perioperative period of liver transplantation</li>\n<li>Not recommended in pregnancy</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All the following statements about Wilkie's syndrome are true except:",
    "choices": [
      {
        "id": 1,
        "text": "It is also known as superior mesenteric artery syndrome."
      },
      {
        "id": 2,
        "text": "It is most commonly seen in elderly obese women."
      },
      {
        "id": 3,
        "text": "Compression occurs at third part of duodenum."
      },
      {
        "id": 4,
        "text": "One of the surgical treatment includes duodenojejunostomy."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Wilkie's syndrome&nbsp;</strong>is usually seen in<strong> young asthenic women</strong>.&nbsp;</p>\n<p>Wilkie's syndrome is also known as <strong>superior mesenteric artery syndrome&nbsp;</strong>(SMA). It is a rare condition that occurs due to the compression of the <strong>third part</strong> of the <strong>duodenum</strong> between the superior mesenteric artery and the aorta.&nbsp;</p>\n<p>Normally, the angle between the superior mesenteric artery and aorta (aortomesenteric angle) ranges from 38&deg; to 65&deg;. However, decreasing to an angle of&nbsp;<strong>less than 25&deg;</strong>&nbsp;<strong>causes compression</strong> of the third part of the duodenum.&nbsp;</p>\n<p>This syndrome is most commonly seen in young, asthenic women. The main predisposing factors are rapid weight loss, supine immobilization, anorexia nervosa, and placement of body cast. So, it is also called <strong>cast syndrome</strong>.</p>\n<div class=\"page\" title=\"Page 1337\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Symptoms include profound nausea and vomiting; abdominal distension; weight loss; and postprandial epigastric pain, which varies from intermittent to constant, depending on the severity of the duodenal obstruction.</p>\n</div>\n</div>\n</div>\n</div>\n<p class=\"p1\">A barium study of the upper gastrointestinal tract&nbsp;demonstrates cessation of the flow of barium from the duodenum to the jejunum. A <strong>CT scan</strong> can be used to&nbsp;<strong>confirm </strong>SMA by&nbsp;measuring the aortomesenteric angle. The surgical&nbsp;treatment includes&nbsp;<strong>duodenojejunostomy, gastrojejunostomy</strong>, and<strong> duodenal derotation.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/29cb71768aca4ad88e7a29d7d6fd48c5x1280x2560.JPEG"
    ]
  },
  {
    "text": "Proper handling of a traumatically amputated digit or limb includes which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Immerse in an antiseptic solution"
      },
      {
        "id": 2,
        "text": "Place on dry ice"
      },
      {
        "id": 3,
        "text": "Wrapped in moistened gauze"
      },
      {
        "id": 4,
        "text": "Place dry in a waterproof bag"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Amputated part of limb should be <strong>wrapped in a moistened gauze</strong>.</li>\n<li>In preperation for replantation, the amputated part and proximal stump should be appropriately treated.</li>\n<li><strong>Amputated part:</strong>\n<ul>\n<li>Should be wrapped in moistened gauze and placed in a <strong>sealed bag</strong>.</li>\n<li>This bag should then be placed in an<strong> ice water bath</strong> (no dry ice).</li>\n<li>Do <strong>not allow the part to contact ice directly</strong>; frostbite can occur in the amputated part,which will decrease its chance of survival after replantation.</li>\n</ul>\n</li>\n<li><strong>Proximal stump:</strong>\n<ul>\n<li><strong>Bleeding should be controlled</strong> in the proximal stump by as minimal a means necessary</li>\n<li>The stump should be dressed with a <strong>nonadherent gauze and bulky dressing</strong>.</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following are indications for surgical intervention in abdominal aortic aneurysms?",
    "choices": [
      {
        "id": 1,
        "text": "Size more than 5.5 cm in males"
      },
      {
        "id": 2,
        "text": "Size more than 5 cm in females"
      },
      {
        "id": 3,
        "text": "Expansion of  >0.5 cm within 6 months"
      },
      {
        "id": 4,
        "text": "All the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>All the given are indications for surgical intervention in abdominal aortic aneurysm (AAA). The indications include:</p>\n<ul>\n<li>Size <strong>&gt;5.5 cm</strong> in males (option A)</li>\n<li>Size <strong>&gt;</strong><strong>4.5-</strong><strong>5 cm</strong> in females (option B)</li>\n<li>Expansion of <strong>&gt;0.5 cm</strong> within <strong>6 months</strong> or <strong>&gt;1</strong> <strong>cm</strong> in <strong>one year&nbsp;</strong>(option C)</li>\n<li>Painful, tender aneurysm&nbsp;</li>\n<li>Thrombosed aneurysm, aneurysm with distal emboli&nbsp;</li>\n</ul>\n<p>The rupture <strong>risk is high</strong> for aneurysms <strong>&gt;5.5 cm</strong> and begins to rise exponentially with an increase in size.&nbsp;<strong>Women </strong>are at <strong>higher risk</strong> for rupture than men, with a <strong>lower threshold </strong>of 4.5 to 5.0 cm (depending on the reference used).</p>\n<p>Screening is done for:</p>\n<ul>\n<li>Cardiovascular patients in men and women (60-85 years)</li>\n<li>Men and women &gt;50 years with positive family history&nbsp;</li>\n<li>Annual screening in asymptomatic patients with 4-4.5 cm size, size &gt;4.5 cm once in every 6 months.</li>\n</ul>\n<p>Management of AAA can be done by open repair or endovascular aneurysm repair (EVAR). About 75% of infrarenal aneurysms are suitable for <strong>endovascular aneurysm repair (EVAR)</strong>, depending on the morphology of the aneurysm assessed by a CT scan.</p>\n<p>Aneurysms that fall below the mentioned indications may safely be followed with CT or ultrasound at 6-month intervals since long-term outcomes to routine follow-up are equivalent to earlier surgical repair of the aneurysm. Smoking cessation is very important and reduces the mortality rate.</p>\n<div class=\"page\" title=\"Page 983\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 984\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The technique of EVAR:&nbsp;</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f20e39e71fa442a1812e73cf453b43d1x400x401.JPEG"
    ]
  },
  {
    "text": "The image below depicts the abnormalities resulting from the persistence of the omphalomesenteric duct. Identify the structure marked as B in the given image.",
    "choices": [
      {
        "id": 1,
        "text": "Omphalomesenteric duct cyst"
      },
      {
        "id": 2,
        "text": "Meckel\u2019s diverticulum"
      },
      {
        "id": 3,
        "text": "Enterocutaneous fistula"
      },
      {
        "id": 4,
        "text": "Omphalocele"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The structure marked as B in the given image is <strong>Meckel's diverticulum.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/93b631bba68b448e9a7c963d451de3a6.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c8aa05121ea0473ba884a1b0cf562107x1280x288.PNG"
    ]
  },
  {
    "text": "Which of the following treatments is appropriate for congenital hydrocele in a 2-year-old child?",
    "choices": [
      {
        "id": 1,
        "text": "Herniotomy"
      },
      {
        "id": 2,
        "text": "Lord\u2019s operation"
      },
      {
        "id": 3,
        "text": "Jaboulay's Procedure"
      },
      {
        "id": 4,
        "text": "Observation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>Congenital hydroceles are treated by <strong>herniotomy </strong>if they do not resolve spontaneously.</li>\n<li>In congenital hydrocele, the <strong>processus vaginalis</strong> is patent and connects with the peritoneal cavity. Hence all that is required for treatment is ligation of the processus (<strong>herniotomy)</strong>.</li>\n<li>Remember that herniotomy is the treatment of choice for <strong>congenital hydrocele and hernia. </strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the type of flap:",
    "choices": [
      {
        "id": 1,
        "text": "Free flap"
      },
      {
        "id": 2,
        "text": "Axial flap"
      },
      {
        "id": 3,
        "text": "Pedicled flap"
      },
      {
        "id": 4,
        "text": "Random flap"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>This is a type of <strong>pedicled or islanded flap</strong>.</li>\n<li>Flaps are tissues that are transferred with a blood supply.</li>\n<li>Pedicled/islanded flaps: The <strong>axial blood supply allows the flap to be swung round on a stalk</strong> or even fully islanded so that the business end of the skin being transferred can have the pedicle buried.</li>\n</ul>\n<p>Other types of flaps include:</p>\n<ul>\n<li><strong>Random flaps:</strong>\u00a0Three sides of a rectangle are used, length to breadth ratio not more than 1.5:1.</li>\n<li><strong>Axial flap:</strong>\u00a0Much longer flaps can be used, based on known blood vessels.</li>\n<li><strong>Free flaps:</strong>\u00a0Blood supply has been isolated, disconnected and then reconnected using microsurgery at the new site.</li>\n<li><strong>Composite flap:</strong>\u00a0Various tissues are transferred together, often skin with bone or muscle (osseocutaneous or myocutaneous).</li>\n<li><strong>Perforator flaps:</strong> This description refers to a whole new subgroup of axial flaps in which tissues are isolated on small perforating vessels that run from more major blood vessels to supply the surface.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ac568d7655f74985996c56c70fde8771.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/ccff307a67d14525af844e2e69ad6766x770x499.PNG"
    ]
  },
  {
    "text": "A man is diagnosed with hepatocellular carcinoma. What is the tumour marker used in the detection and management of his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Beta human chorionic gonadotropin"
      },
      {
        "id": 2,
        "text": "Alkaline phosphatase"
      },
      {
        "id": 3,
        "text": "Alpha feto protein"
      },
      {
        "id": 4,
        "text": "Hypoxia inducing factor"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Alpha-fetoprotein <strong>(AFP)</strong> is used in the detection and management of hepatocellular carcinoma (<strong>HCC</strong>).</p>\n<p>It is an <strong>oncofetal glycoprotein</strong>. Levels are<strong> elevated in the fetus</strong>, fall to lower levels after birth, and are elevated during pregnancy. It is synthesised by <strong>hepatocytes</strong> and <strong>endodermal-derived gastrointestinal tissues</strong>.\u00a0The upper limit of normal for a healthy, nonpregnant adult is <strong>&lt; 25 ng/ mL</strong>.\u00a0</p>\n<p>Use of AFP in HCC:</p>\n<ul>\n<li><strong>Detection-</strong>\u00a0Levels<strong> &gt;</strong> 400 ng/mL<strong>\u00a0</strong>with typical radiological findings are suggestive of\u00a0HCC.\u00a0Alpha-fetoprotein (AFP) is\u00a0not elevated\u00a0in\u00a0fibrolamellar\u00a0HCC.</li>\n<li><strong>Screening-</strong>\u00a0the combination of AFP and ultrasound improves the efficacy of screening for HCC.</li>\n<li><strong>Prognosis-</strong> degree of AFP elevation corresponds to tumor size. A high rate of increase of AFP (AFP doubling time) is associated with a poor prognosis.</li>\n<li><strong>Monitoring-</strong> after complete resection, AFP levels should drop and remain less than 10 ng/ml. A postoperative rise in AFP is the best indicator of recurrent disease.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In Paget-Schroetter syndrome which of the following structure is affected?",
    "choices": [
      {
        "id": 1,
        "text": "Subclavian artery"
      },
      {
        "id": 2,
        "text": "Subclavian vein"
      },
      {
        "id": 3,
        "text": "Axillary artery"
      },
      {
        "id": 4,
        "text": "Brachiocephalic vein"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In Paget-Schroetter syndrome, the <strong>subclavian vein</strong> is affected.</p>\n<p>Compression of subclavian vein between anterior scalene, clavicle, and the first rib can produce <strong>axillary-subclavian vein thrombosis</strong>. It&nbsp;results in severe upper extremity pain and swelling, &nbsp;that is&nbsp;exaggerated by<strong> exercise.</strong></p>\n<p>Activities such as throwing, swimming, and weightlifting can cause microtrauma of the venous intima that initiates thrombus formation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "NOTES stands for________",
    "choices": [
      {
        "id": 1,
        "text": "Natural orifice transumbilical endoscopic surgery"
      },
      {
        "id": 2,
        "text": "Natural orifice transluminal elective surgery"
      },
      {
        "id": 3,
        "text": "Natural orifice transluminal endoscopic surgery"
      },
      {
        "id": 4,
        "text": "Natural orifice transluminal endoscopic scintigraphy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>NOTES refer to Natural orifice transluminal endoscopic surgery</strong></p>\n<ul>\n<li>NOTES is a technique where surgeons enter the peritoneal cavity via endoscopic puncture of a hollow viscus.</li>\n<li>Transvaginal NOTES cholecystectomies have been performed in humans successfully.</li>\n<li>The closure of the visceral puncture site is the issue that really has prevented widespread uptake of this technique,as transgastric and transcolonic closure of peritoneal entry sites</li>\n<li>NOTES was first done by Indians (Dr. G .V Rao and Dr. N Reddy). They did a transgastric appendicectomy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "According to the modified Johnson anatomic classification for gastric ulcer an NSAID induced ulcer would be what type?",
    "choices": [
      {
        "id": 1,
        "text": "Type 1"
      },
      {
        "id": 2,
        "text": "Type 2"
      },
      {
        "id": 3,
        "text": "Type 4"
      },
      {
        "id": 4,
        "text": "Type 5"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>NSAID induced ulcer refers to Type V of Modified Johnson anatomical classification of gastric ulcer.</p>\n<p><strong>Modified Johnson anatomical classification of gastric ulcer:</strong></p>\n<table style=\"width: 254px;\">\n<tbody>\n<tr>\n<td style=\"width: 27px;\">Type</td>\n<td style=\"width: 89px;\">Location</td>\n<td style=\"width: 120px;\">Acid level</td>\n</tr>\n<tr>\n<td style=\"width: 27px;\">I</td>\n<td style=\"width: 89px;\">Lesser curve at incisura</td>\n<td style=\"width: 120px;\">Low to normal</td>\n</tr>\n<tr>\n<td style=\"width: 27px;\">II</td>\n<td style=\"width: 89px;\">Gastric body with duodenal ulcer</td>\n<td style=\"width: 120px;\">Increased</td>\n</tr>\n<tr>\n<td style=\"width: 27px;\">III</td>\n<td style=\"width: 89px;\">Prepyloric</td>\n<td style=\"width: 120px;\">Increased</td>\n</tr>\n<tr>\n<td style=\"width: 27px;\">IV</td>\n<td style=\"width: 89px;\">High on lesser curve</td>\n<td style=\"width: 120px;\">Normal</td>\n</tr>\n<tr>\n<td style=\"width: 27px;\"><strong>V</strong></td>\n<td style=\"width: 89px;\"><strong>Anywhere</strong></td>\n<td style=\"width: 120px;\"><strong>Normal , NSAID induced</strong></td>\n</tr>\n</tbody>\n</table>\n<p><strong>Modified Johnson Anatomical Classification of Gastric Ulcer:</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/755eaede0c874ad38f660bc5778ae9fex752x791.PNG"
    ]
  },
  {
    "text": "What is the maximum safe cold storage time for kidney?",
    "choices": [
      {
        "id": 1,
        "text": "4 hours"
      },
      {
        "id": 2,
        "text": "6 hours"
      },
      {
        "id": 3,
        "text": "18 hours"
      },
      {
        "id": 4,
        "text": "36 hours"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>The maximum safe cold storage time for kidney transplant is about 36 hours.</strong></p>\n<p><strong>The optimal and maximum cold storage times for different organs (appproximate):</strong></p>\n<table style=\"width: 202px;\">\n<tbody>\n<tr>\n<td style=\"width: 53px;\">Organ</td>\n<td style=\"width: 35px;\">\n<p>Optimum</p>\n<p>(hours)</p>\n</td>\n<td style=\"width: 60px;\">\n<p>Safe maximum</p>\n<p>(hours)</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 53px;\"><strong>Kidney</strong></td>\n<td style=\"width: 35px;\">&lt;18</td>\n<td style=\"width: 60px;\"><strong>36</strong></td>\n</tr>\n<tr>\n<td style=\"width: 53px;\">Liver</td>\n<td style=\"width: 35px;\">&lt;12</td>\n<td style=\"width: 60px;\">18</td>\n</tr>\n<tr>\n<td style=\"width: 53px;\">Pancreas</td>\n<td style=\"width: 35px;\">&lt;10</td>\n<td style=\"width: 60px;\">18</td>\n</tr>\n<tr>\n<td style=\"width: 53px;\">Small intestine</td>\n<td style=\"width: 35px;\">&lt;4</td>\n<td style=\"width: 60px;\">6</td>\n</tr>\n<tr>\n<td style=\"width: 53px;\">Heart</td>\n<td style=\"width: 35px;\">&lt;3</td>\n<td style=\"width: 60px;\">6</td>\n</tr>\n<tr>\n<td style=\"width: 53px;\">Lung</td>\n<td style=\"width: 35px;\">&lt;3</td>\n<td style=\"width: 60px;\">8</td>\n</tr>\n</tbody>\n</table>\n<p><strong>&nbsp;</strong></p>\n<h1><strong>&nbsp;</strong></h1>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "On per rectal examination, which of the following findings will help you identify a malignant prostate lesion?",
    "choices": [
      {
        "id": 1,
        "text": "Smooth surface"
      },
      {
        "id": 2,
        "text": "Firm consistency"
      },
      {
        "id": 3,
        "text": "Rectal mucosa mobile over the prostate"
      },
      {
        "id": 4,
        "text": "Presence of nodules"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Palpable <strong>nodules</strong> over the prostate is highly suggestive of carcinoma.</p>\n<table style=\"height: 127px; width: 362px;\">\n<tbody>\n<tr>\n<td style=\"width: 155.625px;\"><strong>Features of carcinoma of the prostate</strong></td>\n<td style=\"width: 209.375px;\"><strong>Features of benign disease of the prostate</strong></td>\n</tr>\n<tr>\n<td style=\"width: 155.625px;\">\n<ul>\n<li><strong>Hard\u00a0</strong>consistency</li>\n<li><strong>Rectal mucosa immobile\u00a0</strong>over the prostate</li>\n<li><strong>Obliteration of the median groove</strong></li>\n<li>Nodular surface</li>\n</ul>\n</td>\n<td style=\"width: 209.375px;\">\n<ul>\n<li><strong>Firm</strong> consistency</li>\n<li><strong>Rectal mucosa mobile </strong>over the prostate</li>\n<li><strong>Residual urine may be felt</strong> as a fluctuating swelling above the prostate</li>\n<li>Smooth surface</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Abdominal wall mass that does not cross the midline and remains palpable when rectus is contracted is called_________",
    "choices": [
      {
        "id": 1,
        "text": "Danforth sign"
      },
      {
        "id": 2,
        "text": "Fothergill sign"
      },
      {
        "id": 3,
        "text": "Kehr sign"
      },
      {
        "id": 4,
        "text": "Murhpy sign"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Forthergill sign</strong> is seen in rectus muscle hematoma. It refers to an abdominal wall mass that does not cross the midline and remains palpable when rectus is contracted.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/502ab764c0fe4e6db7011002fd535426x505x607.JPEG"
    ]
  },
  {
    "text": "A BIRADS category score of 0 would mean?",
    "choices": [
      {
        "id": 1,
        "text": "Negative"
      },
      {
        "id": 2,
        "text": "Benign"
      },
      {
        "id": 3,
        "text": "Incomplete assessment"
      },
      {
        "id": 4,
        "text": "Known biopsy-proven malignancy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>BIRADS score of 0 refers to Incomplete assessment.</strong></p>\n<p>BIRADS stands for <strong>Breast Imaging Reporting And Data System.</strong></p>\n<p><strong>BIRADS final assessment category:</strong></p>\n<table style=\"height: 186px; width: 240px;\">\n<tbody>\n<tr>\n<td style=\"width: 47px;\">Category</td>\n<td style=\"width: 183px;\">Definition</td>\n</tr>\n<tr>\n<td style=\"width: 47px;\"><strong>0</strong></td>\n<td style=\"width: 183px;\">Incomplete assessment \u2013 need additional imaging evaluation or prior mammogram for comparison</td>\n</tr>\n<tr>\n<td style=\"width: 47px;\">1</td>\n<td style=\"width: 183px;\"><strong>Negative</strong>- nothing to comment on; usually recommend annual screening</td>\n</tr>\n<tr>\n<td style=\"width: 47px;\">2</td>\n<td style=\"width: 183px;\"><strong>Benign finding</strong>- usually recommend annual screening</td>\n</tr>\n<tr>\n<td style=\"width: 47px;\">3</td>\n<td style=\"width: 183px;\"><strong>Probably benign finding</strong> <strong>(&lt;2%mallignant)</strong>- initial short \u2013 interval follow up suggested</td>\n</tr>\n<tr>\n<td style=\"width: 47px;\">4</td>\n<td style=\"width: 183px;\"><strong>Suspicious abnormality (2%-95% malignant</strong>)- biopsy should be considered</td>\n</tr>\n<tr>\n<td style=\"width: 47px;\">5</td>\n<td style=\"width: 183px;\"><strong>Highly suggestive of malignancy (&gt;95%malignant)</strong>- appropriate action should be taken</td>\n</tr>\n<tr>\n<td style=\"width: 47px;\">6</td>\n<td style=\"width: 183px;\"><strong>Known biopsy-proven malignancy</strong></td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not included in the triad of ruptured abdominal aortic aneurysm?",
    "choices": [
      {
        "id": 1,
        "text": "Severe abdominal pain/back pain"
      },
      {
        "id": 2,
        "text": "Hypotension"
      },
      {
        "id": 3,
        "text": "Pulsatile abdominal mass"
      },
      {
        "id": 4,
        "text": "Hematuria"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Hematuria </strong>is not included in the triad of ruptured abdominal aortic aneurysms.</p>\n<p>A <strong>ruptured abdominal aortic aneurysm</strong> is a surgical <strong>emergency</strong>. The rupture can be anterior or posterior. In the <strong>anterior</strong> <strong>rupture</strong>, there may be bleeding into the peritoneal cavity whereas, in the <strong>posterior rupture</strong>, a retroperitoneal hematoma may be present.&nbsp;</p>\n<p>The features include severe abdominal or back pain, hypotension, and pulsatile abdominal mass.</p>\n<p>Management is as follows</p>\n<ul>\n<li>Oxygen, IV replacement, and central line</li>\n<li>Maintenance of systolic blood pressure but not beyond 100.</li>\n<li>Catheterization</li>\n<li>Cross-matching blood</li>\n<li>Shifting the patient rapidly to the operating room.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following form the classic triad of symptoms in achalasia cardia except:",
    "choices": [
      {
        "id": 1,
        "text": "Weight loss"
      },
      {
        "id": 2,
        "text": "Regurgitation"
      },
      {
        "id": 3,
        "text": "Dysphagia"
      },
      {
        "id": 4,
        "text": "Dyspepsia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Dyspepsia is not included in the triad of classical symptoms of achalasia cardia.</p>\n<p>The classic <strong>triad</strong> of presenting symptoms of <strong>achalasia</strong> cardia consists of:</p>\n<ol>\n<li><strong>Dysphagia</strong></li>\n<li><strong>Regurgitation</strong></li>\n<li><strong>Weight loss</strong></li>\n</ol>\n<p><strong>Manometry</strong> is the gold standard for the diagnosis of achalasia.</p>\n<p>There is a&nbsp;<strong>lack of peristaltic waves</strong> in the body and&nbsp;a<strong> failure</strong> of<strong> relaxation</strong> of the<strong> LES</strong>.</p>\n<p>Surgical management is usually with&nbsp;<strong>laparoscopic modified Heller&rsquo;s myotomy</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Facial flushing and dilatation of cervical veins upon raising the arms above the head- this sign is known as?",
    "choices": [
      {
        "id": 1,
        "text": "Pizzillo\u2019s method"
      },
      {
        "id": 2,
        "text": "Pemberton sign"
      },
      {
        "id": 3,
        "text": "Berry sign"
      },
      {
        "id": 4,
        "text": "Crile\u2019s method of examination"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Positive Pemberton&rsquo;s sign</strong>&mdash;facial flushing and dilatation of cervical veins upon raising the arms above the head.</li>\n<li>Retrosternal extension of a large goiter may result in impeded flow in the superior vena cava, leading to <strong>dilated veins over the chest wall</strong>.</li>\n<li>This may become more prominent when <strong>patients raise their arms above the head&mdash;Pemberton&rsquo;s sign</strong>.</li>\n</ul>\n<p><strong>Option A: </strong></p>\n<p><strong>Pizzillo&rsquo;s method</strong> is used <strong>in obese and short necked</strong> patients to examine goiter.</p>\n<p><strong>Option B: </strong></p>\n<p><strong>Pemberton sign</strong> is used to detect <strong>retrosternal goiter</strong>.</p>\n<p><strong>Option C:</strong></p>\n<p><strong>Berry sign</strong> is absence of carotid pulsations seen in carcinoma thyroid.</p>\n<p><strong>Option D:</strong></p>\n<p><strong>Crile&rsquo;s method</strong> is used to examine a small thyroid nodule using thumb.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are correct statements about carotid body tumor except",
    "choices": [
      {
        "id": 1,
        "text": "It is seen in people who live at high altitude"
      },
      {
        "id": 2,
        "text": "10% patients have a positive family history"
      },
      {
        "id": 3,
        "text": "It produces serotonin"
      },
      {
        "id": 4,
        "text": "Carotid angiogram shows splaying of the carotid bifurcation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Carotid body tumors/ chemodectoma are <strong>not hormonally active and the tumors are usually benign</strong>.</p>\n<p><strong>Carotid body tumour:</strong></p>\n<ul>\n<li>It occurs in people who live at high altitude</li>\n<li>Occur in the 5th decade,10% have family history</li>\n<li>Slowly growing tumour.</li>\n<li>Carotid angiogram shows Lyre sign (splaying of the carotid bifurcation)</li>\n<li><strong>MRI angiography shows splaying of internal and external carotid arteries (Lyre&rsquo;s sign)</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 21-year-old male patient presented to the hospital after a road traffic accident with a fracture of the pelvis. There was urinary retention and blood at the urethral meatus. On digital rectal examination, he had a high-riding prostate. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Rupture of the membranous urethra"
      },
      {
        "id": 2,
        "text": "Rupture of the bulbar urethra"
      },
      {
        "id": 3,
        "text": "Rupture of bladder"
      },
      {
        "id": 4,
        "text": "Rupture of prostatic urethra"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario with blood at the tip of the meatus and high-riding prostate on examination is suggestive of <strong>rupture of the membranous urethra.</strong></p>\n<table style=\"height: 137px; width: 579px;\">\n<tbody>\n<tr style=\"height: 27px;\">\n<td style=\"width: 10px; height: 27px;\">Rupture</td>\n<td style=\"width: 277.242px; height: 27px;\"><strong>Membranous urethra</strong></td>\n<td style=\"width: 283.758px; height: 27px;\"><strong>Bulbar urethra</strong></td>\n</tr>\n<tr style=\"height: 56px;\">\n<td style=\"width: 10px; height: 56px;\">Cause</td>\n<td style=\"width: 277.242px; height: 56px;\">Fracture of the pelvis</td>\n<td style=\"width: 283.758px; height: 56px;\">Blow to the perineum (fall-astride injury-straddle injury)</td>\n</tr>\n<tr style=\"height: 116px;\">\n<td style=\"width: 10px; height: 116px;\">Clinical features</td>\n<td style=\"width: 277.242px; height: 116px;\">\n<ul>\n<li>Urinary retention</li>\n<li>Blood at urethral meatus</li>\n<li>High-riding prostate on digital rectal examination (<strong>Vermooten sign</strong>)</li>\n</ul>\n</td>\n<td style=\"width: 283.758px; height: 116px;\">\n<ul>\n<li>Urinary retention</li>\n<li>Blood at urethral meatus</li>\n<li><strong>Perineal bruising and hematoma</strong></li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 38.9766px;\">\n<td style=\"width: 10px; height: 38.9766px;\">Investigation</td>\n<td style=\"width: 277.242px; height: 38.9766px;\">Retrograde urethrogram&nbsp;</td>\n<td style=\"width: 283.758px; height: 38.9766px;\">Retrograde urethrogram</td>\n</tr>\n</tbody>\n</table>\n<p>In both cases, the initial management should be the&nbsp;insertion of a&nbsp;suprapubic catheter. Passing a catheter <strong>blindly per urethra is not advised</strong>&nbsp;as this can convert a <strong>partial tear into a complete tear</strong>.&nbsp;</p>\n<p>However,&nbsp;<strong>delayed urethroplasty</strong> is the definitive management for complete urethral tear.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Whipple\u2019s triad is seen in _______",
    "choices": [
      {
        "id": 1,
        "text": "Gastrinoma"
      },
      {
        "id": 2,
        "text": "GIST stomach"
      },
      {
        "id": 3,
        "text": "Insulinoma"
      },
      {
        "id": 4,
        "text": "Somatostatinoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Whipple&rsquo;s triad</strong> is seen in <strong>insulinoma</strong>.</p>\n<p>It includes:</p>\n<ul>\n<li>Symptoms of hypoglycemia after fasting or exercise.</li>\n<li>Plasma glucose levels &lt;50 mg/ dl (&lt;2.8 mmol/L).</li>\n<li>Relief of symptoms on intravenous administration of glucose.</li>\n</ul>\n<p><strong>Whipple&rsquo;s operation:</strong> Pancreatico-duodenectomy; done in carcinoma head of the pancreas.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which day is morula 16 stage?",
    "choices": [
      {
        "id": 1,
        "text": "Day 1"
      },
      {
        "id": 2,
        "text": "Day 3"
      },
      {
        "id": 3,
        "text": "Day 5"
      },
      {
        "id": 4,
        "text": "Day 7"
      }
    ],
    "correct_choice_id": 2,
    "solution": "",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the type of brain herniation marked as 1.",
    "choices": [
      {
        "id": 1,
        "text": "Uncal herniation"
      },
      {
        "id": 2,
        "text": "Central herniation"
      },
      {
        "id": 3,
        "text": "Subfalcine herniation"
      },
      {
        "id": 4,
        "text": "Tonsillar herniation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The type of brain herniation marked as 1 in the above image is subfalcine herniation.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/78bd87258bcf42b7a6a9d8c509c82ebf.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/cde6ef3cd4a04f06b02c52a5062b0c36x619x612.PNG"
    ]
  },
  {
    "text": "Which of the following is not true about phyllodes tumor?",
    "choices": [
      {
        "id": 1,
        "text": "It most commonly occurs in women less than 40 yrs"
      },
      {
        "id": 2,
        "text": "They present as large, sometimes massive with bosselated surface"
      },
      {
        "id": 3,
        "text": "They remain mobile on the chest wall"
      },
      {
        "id": 4,
        "text": "They are mostly benign"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>Phyllodes tumor usually occur in <strong>women</strong> <strong>over the age of 40 years</strong>, but can appear in younger women.</li>\n<li>Phyllodes tumor is mostly benign even though it is also called as<strong> cystosarcoma phyllodes or as serocystic disease of Brodie</strong>.</li>\n<li>They are usually <strong>mobile over the chest wall</strong> Despite their large size.</li>\n<li><strong>Histologically, there is a wide variation</strong> with some of low malignant potential and others having a higher mitotic index.</li>\n<li>Treatment:\n<ul>\n<li>Benign type- Enucleation or wide local excision</li>\n<li>Massive tumours, recurrent tumours and malignant type- Mastectomy</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the most common functioning tumor in patients with adrenal incidentalomas?",
    "choices": [
      {
        "id": 1,
        "text": "Cushing\u2019s adenoma"
      },
      {
        "id": 2,
        "text": "Myelolipoma"
      },
      {
        "id": 3,
        "text": "Pheachromocytoma"
      },
      {
        "id": 4,
        "text": "Conn\u2019s adenoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Incidentaloma is an adrenal mass,detected incidentally by imaging studies conducted for other reasons.</p>\n<p><strong>The most common incidentaloma is a non-functioning adenoma.</strong></p>\n<p><strong>The most common functioning tumor is a Cushing\u2019s adenoma.</strong></p>\n<p>Prevalence of tumours in patients with Incidentaloma:</p>\n<table style=\"width: 197px;\">\n<tbody>\n<tr>\n<td style=\"width: 83px;\"><strong>Tumour </strong></td>\n<td style=\"width: 102px;\"><strong>Prevalence (%)</strong></td>\n</tr>\n<tr>\n<td style=\"width: 83px;\">Non-functioning adenoma\u00a0</td>\n<td style=\"width: 102px;\">78</td>\n</tr>\n<tr>\n<td style=\"width: 83px;\">Cushing\u2019s adenoma</td>\n<td style=\"width: 102px;\">7</td>\n</tr>\n<tr>\n<td style=\"width: 83px;\">Adrenocortical carcinoma\u00a0</td>\n<td style=\"width: 102px;\">4</td>\n</tr>\n<tr>\n<td style=\"width: 83px;\">Pheochromocytoma</td>\n<td style=\"width: 102px;\">4</td>\n</tr>\n<tr>\n<td style=\"width: 83px;\">Myelolipoma\u00a0</td>\n<td style=\"width: 102px;\">2</td>\n</tr>\n<tr>\n<td style=\"width: 83px;\">Cyst</td>\n<td style=\"width: 102px;\">2</td>\n</tr>\n<tr>\n<td style=\"width: 83px;\">Metastases</td>\n<td style=\"width: 102px;\">2</td>\n</tr>\n<tr>\n<td style=\"width: 83px;\">Conn\u2019s adenoma</td>\n<td style=\"width: 102px;\">1</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Large doses of iodide given to patient with hyperplastic goitre causing hyperthyroidism is called as_______",
    "choices": [
      {
        "id": 1,
        "text": "Wolff Chaikoff effect"
      },
      {
        "id": 2,
        "text": "Jod basedow effect"
      },
      {
        "id": 3,
        "text": "Secondary thyrotoxicosis"
      },
      {
        "id": 4,
        "text": "Thyrotoxicosis facticia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Jod\u2013Basedow thyrotoxicosis:</p>\n<p><strong>Large doses of iodide</strong> <strong>given</strong> to a patient with a hyperplastic endemic goitre that is iodine avid may <strong>produce temporary hyperthyroidism</strong> and very occasionally persistent hyperthyroidism.</p>\n<p>Other options</p>\n<p>Option A- Wolff chaikoff effect:</p>\n<ul>\n<li><strong>Hypothyroidism caused by ingestion of large amount of iodine\u00a0</strong>(thyroid constipation).</li>\n</ul>\n<p>Option C- Secondary thyrotoxicosis:</p>\n<ul>\n<li>The goitre is <strong>nodular</strong>. The onset is insidious and may present with cardiac failure or atrial \ufb01brillation. The<strong> hyperthyroidism is not severe</strong> and very infrequently is associated with eye signs.</li>\n</ul>\n<p>Option D- Thyrotoxicosis facticia:</p>\n<ul>\n<li><strong>Hyperthyroidism may be induced by taking thyroxine</strong>, but only if the dosage exceeds the normal requirements of 0.15\u20130.25 mg per day.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Surgery St 2';
        const quizFilename = 'surgery-st-2-4b364ba7.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>