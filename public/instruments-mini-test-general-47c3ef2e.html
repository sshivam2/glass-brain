<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instruments Mini Test - General - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2024-25
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Identify the following instrument.",
    "choices": [
      {
        "id": 1,
        "text": "Tilley\u2019s forceps"
      },
      {
        "id": 2,
        "text": "Asch\u2019s forceps"
      },
      {
        "id": 3,
        "text": "Walsham's forceps"
      },
      {
        "id": 4,
        "text": "Citelli\u2019s forceps"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above image shows <strong>Walsham's forceps</strong>.\u00a0Walsham forceps are mainly used to reduce<strong>\u00a0the nasal bone fracture.</strong></p>\n<p>Other options:</p>\n<ul>\n<li><strong>Tilley\u2019s forceps</strong> are used for nasal packing, ear dressing, removal of foreign bodies from the nose. It has a box joint.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d6e425d080b545148dfe9bfb6826d7a4.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9f6db62248c149df8f84a71498e7c25bx720x403.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/80dad816f1b54098861a03dc7c64328bx1280x664.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/73b2d4fe58e44d51819896448d234282x1280x1056.JPEG"
    ]
  },
  {
    "text": "During the ophthalmology postings of your internship, you notice the following instrument being used by one of the senior resident. This instrument could be used to",
    "choices": [
      {
        "id": 1,
        "text": "Test the color vision of patients"
      },
      {
        "id": 2,
        "text": "Refine the\u00a0power and axis of cylindrical lens"
      },
      {
        "id": 3,
        "text": "Measure the degree of heterotropia or heterophoria"
      },
      {
        "id": 4,
        "text": "To visualize the angle of anterior chamber"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows <strong>Jackson\u2019s cross cylinder (flip-cross technique),\u00a0</strong>which is used to refine the\u00a0<strong>power and axis of the cylindrical lens </strong>during refraction.</p>\n<p><strong>Other options:</strong></p>\n<p>Option A:<strong> Nagel\u2019s anomaloscope </strong>given below is used to<strong> tests color vision.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f638929a8cd141a2b003c3412f291d08.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/eef924355490460a8935762137632411x310x210.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2b49efb09e644acf8fbc80f860d08f16x600x695.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3bbd13c89b2840419b2fdda9b1aed131x720x505.PNG"
    ]
  },
  {
    "text": "Which of the following statements is false about Bohler Braun Splint?",
    "choices": [
      {
        "id": 1,
        "text": "The proximal pulley prevents foot drop."
      },
      {
        "id": 2,
        "text": "The fourth pulley applies traction in the line of the ipsilateral hip joint."
      },
      {
        "id": 3,
        "text": "The second pulley is to apply traction in the line of the femur."
      },
      {
        "id": 4,
        "text": "It can also be used for the fractured shaft of the tibia and fibula."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong> fourth pulley</strong> applies traction in the<strong> line of the legs.</strong></p>\n<p><strong>Bohler Braun splint</strong>: This refers to Bohler\u2019s modification of the Braun splint. It consists of a heavy metal frame with four pulleys. The respective functions of the pulleys are:</p>\n<ol>\n<li>The proximal pulley prevents foot drop.</li>\n<li>The second pulley is to apply traction in the line of the femur.</li>\n<li>The third pulley is to apply traction in the line of the supracondylar area of the femur.</li>\n<li>The fourth pulley applies traction in the line of the legs.</li>\n</ol>\n<p>\u00a0</p>\n<p>It is used for the treatment of fracture <strong>shaft femur and supracondylar fractures of the femur.</strong> It can also be used for the <strong>fractured shaft of the tibia</strong> and fibula.</p>\n<p>\u00a0</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1f97f56a87274e03a6d674be73244d8cx1280x1257.JPEG"
    ]
  },
  {
    "text": "Which of the following devices can be used in a patient with severe bilateral sensorineural hearing loss?",
    "choices": [
      {
        "id": 1,
        "text": "2"
      },
      {
        "id": 2,
        "text": "3"
      },
      {
        "id": 3,
        "text": "1"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Device 2</strong>\u00a0shown in the above image represents a\u00a0<strong>c</strong><strong>ochlear implant</strong>, which can be used in a patient with bilateral severe sensorineural hearing loss.</p>\n<p><strong>A cochlear implant\u00a0</strong>is a medical device that uses electricity to stimulate the spiral ganglion cells of the auditory nerve to restore sensorineural hearing loss. It converts sound to an electrical signal (transduction) and delivers this to the hearing nerve, which bypasses the damaged hearing apparatus. It cannot be used in patients with cochlear aplasia or without the VIII<sup>th\u00a0</sup>cranial\u00a0nerve.</p>\n<p><strong>Cochlear implant:</strong></p>\n<ul>\n<li>An electronic device for\u00a0<strong>severe to profound SNHL\u00a0</strong>and\u00a0who cannot benefit from a hearing aid.</li>\n<li>Principle- surgery to place the electrode array within the\u00a0<strong>scala tympani</strong>\u00a0of the cochlea.</li>\n<li>Indication-\u00a0<strong>bilateral severe to profound deafness</strong></li>\n<li>Prerequisites-<strong>\u00a0intact 8<sup>th</sup>\u00a0nerve</strong>\u00a0and higher auditory pathway</li>\n<li>Surgical approach- facial recess (<strong>posterior tympanotomy</strong>) approach</li>\n<li>The electrode of a cochlear implant is placed in the\u00a0<strong>scala tympani.</strong>\u00a0(Note: In the auditory brainstem implant, the\u00a0site of the implant is the lateral recess of the 4<sup>th</sup>\u00a0ventricle.)</li>\n</ul>\n<p><strong>The receiver-stimulator</strong>\u00a0implanted during surgery (under the skin) and the\u00a0<strong>electrode array\u00a0</strong>(implanted in the scala tympani of the cochlea) are part of the\u00a0<strong>internal</strong>\u00a0component of the cochlear implant. Microphone, speech processor, and transmitter are part of the external component of the cochlear implant, which remains outside the body.</p>\n<p>Cochlear implants replace the non-functional transducer system of hair cells of the cochlea and convert the sound signal to electrical impulses, which directly stimulate the fibers of cranial nerve VIII.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/58d96631e7bc45b9b1efb4d24d0c0051.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/51bb14a7b2b64e1b98d13107998e2b93x1280x1808.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/88dc5a32cf6e42e4a0300140c4c25c63x1280x4391.JPEG"
    ]
  },
  {
    "text": "A 32-year-old man presented with progressive blurred vision, photophobia, and pain in the right eye. On examination, there was conjunctival redness, a mid-dilated pupil, and a shallow anterior chamber in the right eye. A procedure incorporates the following device to aid drainage and treat this condition. Identify the device.",
    "choices": [
      {
        "id": 1,
        "text": "Ex-Press mini shunt"
      },
      {
        "id": 2,
        "text": "Ahmed glaucoma valve"
      },
      {
        "id": 3,
        "text": "Molteno implant"
      },
      {
        "id": 4,
        "text": "Baerveldt implant"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p class=\"p1\">The clinical vignette points to a diagnosis of glaucoma and the device used is an\u00a0<strong>Ex-Press glaucoma implant (mini shunt)</strong>.</p>\n<p class=\"p1\">It is a\u00a0<strong>minimally invasive glaucoma surgery (MIGS)</strong> to increase aqueous drainage.</p>\n<div class=\"page\" title=\"Page 359\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Ex-Press glaucoma implant (mini shunt), is a small\u00a0stainless steel device.\u00a0It is inserted under a scleral flap during a modified trabeculectomy. Mitomycin c might be used to prevent scarring. Complications such as hypotony are lower as compared to standard trabeculectomy.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/68cf1a78eb994453a05be111194bd8ec.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2f282462c5564aa6bf73bcf045600c07x1280x1518.3074753173485.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/241b4743c3b84c05ab5540b316620202x850x680.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c53478ed45f248d38e67e411a0f8a7eax1280x1215.JPEG"
    ]
  },
  {
    "text": "A 2-year-old child diagnosed with bronchial asthma requires bronchodilator therapy. Which of the following device will you prescribe for this child, to avoid oropharyngeal adverse effects?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: left;\">The device in image 3 is a\u00a0<strong>spacer device </strong>that can be prescribed to<strong>\u00a0</strong><strong>decrease\u00a0</strong>the incidence of propellant-mediated <strong>oropharyngeal adverse effects</strong>.</p>\n<p style=\"text-align: left;\">Spacers reduce the velocity and size of particles entering the upper airways.\u00a0This<strong>\u00a0</strong>reduces the amount of drug depositing in the oropharynx and increases the proportion of drugs inhaled into the lower airways. Thus, a less amount of the drug gets swallowed and absorbed from the GI tract and limits local side effects.\u00a0</p>\n<p style=\"text-align: left;\">Spacer devices are <strong>useful</strong> in delivering inhaled drugs to <strong>children</strong>\u00a0who are not able to use a pMDI alone but can also be used by <strong>adults</strong> for better drug delivery. The image below shows the use of a spacer device with a face mask which is preferred in children younger than 3 years of age.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9d49df501d8440d3bbffd6ee3c455cc4.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dcf1afee41f64b98a0129246c3cb0a72x720x404.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c79334e432384464a4db8f878ca4023bx720x540.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cf3ec9228e96415da2ec3c3932577099x596x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3fe2da00a2b7445d8a99ec027efeab5ax799x533.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2687fee5df024653908a0728befd85afx1024x683.JPEG"
    ]
  },
  {
    "text": "What is the use of the following instrument ?",
    "choices": [
      {
        "id": 1,
        "text": "Measuring corneal thickness"
      },
      {
        "id": 2,
        "text": "Corneal surface assessment"
      },
      {
        "id": 3,
        "text": "Finding refractive errors"
      },
      {
        "id": 4,
        "text": "Refinement of cylinder"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows a <strong>Placido</strong> or <strong>Keratoscopic disc&nbsp;</strong>which is used for <strong>corneal surface assessment</strong>.&nbsp;</p>\n<p>There are alternating black and white circles painted on it. The observer (the doctor) looks through a hole in the center at the corneal image reflected from a light behind the patient. Irregularities in the rings indicate irregularities on the corneal surface.</p>\n<p>Option A: A <strong>pachymeter</strong> is used to measure corneal thickness.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/55094bfe2b8e4ac7bcacf74319d4a8f3.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/824e51ff012b4e0a9390a2af59d90eb4x1280x957.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7147a079f2f84370bed3781ed8e4ab08x1280x960.JPEG"
    ]
  },
  {
    "text": "Identify the instrument shown below and the procedure it is used for.",
    "choices": [
      {
        "id": 1,
        "text": "Jamshidi needle, bone marrow biopsy"
      },
      {
        "id": 2,
        "text": "Vim silverman needle, lumbar puncture"
      },
      {
        "id": 3,
        "text": "Veress needle, pneumoperitoneum"
      },
      {
        "id": 4,
        "text": "Salah's needle, liver biopsy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given instrument shows the\u00a0<strong>Jamshidi</strong>\u00a0<strong>needle.</strong>\u00a0It is used for <strong>bone marrow biopsy</strong>.\u00a0</p>\n<p>Jamshidi needles have a t-bar at the end for easier maneuvering.\u00a0Jamshidi needle\u00a0has a\u00a0<strong>tapering end</strong>\u00a0to reduce the crush artifacts in the sample.</p>\n<div class=\"ng-star-inserted\">\n<div class=\"table-responsive font-weight-light answer-scroll answer-html ng-star-inserted\">\n<p>Indications of bone marrow biopsy:</p>\n<ul>\n<li>Evaluation of unexplained anemia, leukopenia, thrombocytopenia,\u00a0<strong>pancytopenia</strong>.</li>\n<li>Evaluation of polycythemia, thrombocytosis, leukocytosis.</li>\n<li>Diagnosis and staging of\u00a0<strong>lymphoma</strong>\u00a0or solid tumors.</li>\n<li>Diagnosis and evaluation of plasma cell disorders and leukemias.</li>\n<li>Evaluation of suspected\u00a0<strong>infiltrative\u00a0</strong>and storage diseases.</li>\n<li>Evaluation of fever of unknown origin suspected mycobacterial, fungal, or parasitic infections or\u00a0<strong>granulomatous diseases.</strong></li>\n</ul>\n<p>Contraindications of bone marrow biopsy:\u00a0</p>\n<ul>\n<li>Severe\u00a0<strong>hemophilia</strong>.</li>\n<li>Severe disseminated intravascular coagulopathy.</li>\n<li>Severe bleeding disorders.</li>\n</ul>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5e413f6750114fba88563f82037b79bb.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/98d460db7dc749c9be93ee0302395150x720x368.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e11c12fd974b4d4ea796acb0994e429bx1280x964.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e7c7957b56f844b5b958aa3a45a5cb9cx1279x735.JPEG"
    ]
  },
  {
    "text": "A 58-year-old post-menopausal lady comes to you with a DEXA report showing a T-score of -2.8 SD. Which of the following braces can be used to prevent pathological vertebral fractures in her?",
    "choices": [
      {
        "id": 1,
        "text": "Milwaukee brace"
      },
      {
        "id": 2,
        "text": "SOMI brace"
      },
      {
        "id": 3,
        "text": "Boston brace"
      },
      {
        "id": 4,
        "text": "Taylor brace"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given scenario with a T score of - 2.8SD is suggestive of <strong>Osteoporosis</strong>. 2 braces that can be used in the prophylactic bracing of the spine for the prevention of pathological vertebral fractures\u00a0are the Anterior spinal hyperextension braces (<strong>ASHE</strong>) <strong>brace</strong> and the\u00a0<strong>Taylor brace.</strong></p>\n<p><strong>Taylor</strong> brace - It is indicated for stabilization of the spine in <strong>dorsolumbar</strong> spinal injury. It is designed to control the upper and lower regions of the spinal column and support the spine while standing, sitting, and walking after spinal surgery.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/751208db903a43ce845d4784014fec41x1280x1262.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6cd4525aa5c94715924a980d0edf472fx1280x1865.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/06e2b0e96f0b4004a5daeb681e162418x720x720.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/808b73b33f3746f28aa381fabad403b9x330x339.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/50a8a6bd27294bb9bf0a2fbe2611a00ax1280x3139.JPEG"
    ]
  },
  {
    "text": "Identify the following instrument.",
    "choices": [
      {
        "id": 1,
        "text": "Negus knot tier"
      },
      {
        "id": 2,
        "text": "Tonsil dissector"
      },
      {
        "id": 3,
        "text": "Denis Browne forceps"
      },
      {
        "id": 4,
        "text": "Eves\u2019 tonsil snare"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The instrument given in the image is\u00a0<strong>Eves\u2019 tonsil snare.\u00a0</strong></p>\n<p>Eves\u2019 tonsil snare\u00a0is used for <strong>tonsillectomy</strong> and the wire used is <strong>number 25 SWG</strong>. After the tonsil has been dissected to its lower pole, the snare is passed around\u00a0the tonsil to <strong>engage</strong> the <strong>pedicle</strong> and then firmly closed. It <strong>crushes</strong> and <strong>cuts</strong> the pedicle thereby minimizing bleeding.</p>\n<p>Other options:</p>\n<div class=\"page\" title=\"Page 535\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Option A: Negus knot tier is also an instrument that is used in <strong>tonsillectomy. </strong>\u00a0It helps to carry the <strong>ligature knot</strong> till the <strong>tip of the artery</strong> <strong>forceps</strong> which holds the vessel and then tie it.</p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5a7497a9859f463aa281094b373a0a5b.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a1546087ab074729bf2a91a05103b514x213x836.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/74300c6bff4d462185bb4c1f1265f7cdx1280x2167.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0da3c0fbf1bb40dd92fc2798a4c5615cx1280x875.JPEG"
    ]
  },
  {
    "text": "Which of the following is not an indication for the surgery in which the following instrument is used?",
    "choices": [
      {
        "id": 1,
        "text": "Atelectatic ear"
      },
      {
        "id": 2,
        "text": "Recurrent acute otitis media"
      },
      {
        "id": 3,
        "text": "Intratympanic glomus tumor"
      },
      {
        "id": 4,
        "text": "Aero-otitis media"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above image shows a <strong>myringotome</strong>&nbsp;and <strong>myringotomy/tympanostomy</strong> is done by a sharp myringotome<strong>.</strong>&nbsp;An <strong>intratympanic&nbsp;glomus tumor</strong>&nbsp;is a contraindication for myringotomy.</p>\n<div class=\"page\" title=\"Page 492\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Myringotomy refers to the incision made on the tympanic membrane with the purpose to drain suppurative or nonsuppurative effusion of the middle ear or to provide aeration in case of a malfunctioning eustachian tube.</p>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 413\"><strong>Indications of myringotomy:</strong></div>\n<ul>\n<li>Acute suppurative otitis media and its complications</li>\n<li>Recurrent acute otitis media</li>\n<li>Serous otitis media.</li>\n<li>Aero-otitis media (to drain fluid and &ldquo;unlock&rdquo; the Eustachian tube)</li>\n<li>Atelectatic ear (treated along with grommet insertion)</li>\n</ul>\n<p><strong>Contraindication</strong> of myringotomy: It is contraindicated in suspected cases of intratympanic glomus tumor, as it can cause profuse bleeding in such patients.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7118ed385d614bc1b212bab8ad0aef1e.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the instrument shown in the image below:",
    "choices": [
      {
        "id": 1,
        "text": "Ryle's tube"
      },
      {
        "id": 2,
        "text": "Ewald\u2019s tube"
      },
      {
        "id": 3,
        "text": "Sengstaken-Blakemore tube"
      },
      {
        "id": 4,
        "text": "Kehr's T tube"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows <strong>Ewald\u2019s tube</strong> used in the <strong>gastric lavage.</strong></p>\n<p><strong>Gastric lavage\u00a0</strong>has been used to manage toxic ingestions for a long time. It is indicated in unprotected airway, seizures, and the need for urgent removal of toxic substances.\u00a0</p>\n<p>Contraindications for this procedure include insignificant ingestions, prolonged time since ingestion, and caustic poisoning. Activated charcoal is usually given after lavage.</p>\n<p>Complications include nasal trauma, esophageal perforation, tracheal intubation, aspiration, and hypothermia.\u00a0</p>\n<p>The following image shows <strong>Ewald's tube</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b2ab814095994f35ada07ddbda3ff815.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b5e2d36bfc014ffea924e9a4adceb8d8x450x461.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/83f8eaf2c7714fc88aff8de74833e051x720x540.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/04754bab7fe74cd990a28a811d4fbcf4x380x193.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/21226c5bf28043ba896a9d0d694523e2x720x586.JPEG"
    ]
  },
  {
    "text": "A 35-year-old male presents to the casualty following an RTA. X-Rays taken show the presence of a fracture of the femoral shaft.  Which of the following implants will the orthopedic surgeon use in this case?",
    "choices": [
      {
        "id": 1,
        "text": "3"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "4"
      },
      {
        "id": 4,
        "text": "1"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Among the given nails used as implants, image 3 shows a <strong>Kuntscher's cloverleaf intra-medullary nail (K nail),\u00a0</strong>which is used for the <strong>treatment of femoral fractures</strong>.</p>\n<p>It is based on the concept of\u00a0<strong>three-point fixation</strong>\u00a0i.e., at either end and at the isthmus. The\u00a0<strong>eye at the end</strong>\u00a0of the nail is useful while removing it. The\u00a0<strong>Cloverleaf shape</strong>\u00a0on the cross-section\u00a0<strong>provides good rotational stability.</strong></p>\n<p>Some common complications of K-nailing:</p>\n<ul>\n<li>Nail getting stuck</li>\n<li>Splintering of the cortex while hammering the nail</li>\n<li>Proximal migration of the nail, leading to bursitis over its protruding end</li>\n<li>Distal migration of the nail leading to stiffness of the knee</li>\n<li>Infection</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0d6fcd918fac4fe6860064f21021da8e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/315d44569b00435e8ee1cdf39cd870a9x1280x1955.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6a8e70ab78dc4eeca98b1f83227f249cx1280x1042.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0cb45896b48640f6a1288dbbc5b12e58x1280x1252.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4c6e4ac5a2f448db859e26a26325ab42x1280x1432.JPEG"
    ]
  },
  {
    "text": "The device shown below is the most widely used instrument for measuring  _______.",
    "choices": [
      {
        "id": 1,
        "text": "Humidity of air"
      },
      {
        "id": 2,
        "text": "Mean radiant temperature"
      },
      {
        "id": 3,
        "text": "Cooling power of air"
      },
      {
        "id": 4,
        "text": "Maximum temperature reached"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image is of a <strong>dry and wet bulb hygrometer</strong>. It is the most widely used instrument for measuring the <strong>humidity of air</strong>.\u00a0</p>\n<p>A\u00a0dry\u00a0and\u00a0wet bulb hygrometer\u00a0consists of\u00a0two identical thermometers\u2014a dry bulb thermometer and a wet-bulb thermometer\u2014mounted\u00a0side by side\u00a0on a stand.\u00a0</p>\n<p>After obtaining the readings of both thermometers, the corresponding relative humidity can be found in psychrometric charts and slides.\u00a0</p>\n<p><strong>Other instruments</strong> used to measure humidity:</p>\n<ul>\n<li>Sling psychrometer</li>\n<li>Assmann psychrometer</li>\n</ul>\n<p>Other options:</p>\n<p>Option B - The <strong>mean radiant temperature</strong> is measured using a <strong>globe thermometer</strong>.</p>\n<p>Option C - The <strong>cooling power of air</strong> was originally measured using a <strong>kata thermometer</strong>. Kata thermometer is now largely used for recording low air velocities.\u00a0</p>\n<p>Option D - The <strong>maximum temperature reached</strong> in a given time is measured by a <strong>maximum thermometer</strong>. The thermometer is set each time by swinging briskly.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e812f978305c4cd8b29876d1c4beebb1.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A young man falls on an outstretched hand and develops a fracture as shown in the X-ray below.  Which of the following screws is commonly used to treat this fracture?",
    "choices": [
      {
        "id": 1,
        "text": "Cannulated cancellous screw"
      },
      {
        "id": 2,
        "text": "Interference screw"
      },
      {
        "id": 3,
        "text": "Herbert screw"
      },
      {
        "id": 4,
        "text": "Polyaxial pedicle screw"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given X-ray and the history of falls on the outstretched hands suggest the diagnosis of <strong>scaphoid fracture.</strong>\u00a0<strong>Herbert screw</strong> is commonly used to treat this fracture.</p>\n<p>Herbert screw is a <strong>cannulated variable pitch</strong> screw, which is used to fix <strong>unstable or displaced</strong> fractures of small articular bones such as the scaphoid. This screw helps in quick healing by <strong>providing compression</strong> at the fracture site and early return to normal activities. The advantage of cannulated screws is that we <strong>can use </strong>a<strong> guidewire </strong>under videofluoroscopy to assist in the <strong>accurate placement</strong> of the screw during surgery.</p>\n<p>Scaphoid fractures occur most commonly after a <strong>fall</strong> on an <strong>outstretched hand.</strong> The <strong>waist</strong> of the scaphoid is the <strong>most common site</strong> of fracture. Initial x-rays are done in anteroposterior, lateral, and oblique views. Even if the x-rays appear normal, if there is clinical suspicion, a glass holding cast should be applied for 2 weeks followed by repeat imaging.</p>\n<p>Management depends upon the type of fracture. If the scaphoid <strong>tubercle</strong> is fractured, the patient is given a <strong>glass-holding cast</strong> for <strong>4-6 weeks</strong>. In case of <strong>undisplaced waist fractures</strong>, most people will recover with a <strong>cast</strong> in place for <strong>6-8 weeks</strong>. Percutaneous screw fixation with the <strong>Herbert screw</strong> can be offered to those with <strong>displaced or undisplaced</strong> fractures of the waist when the patient does not want to undergo prolonged cast immobilization, or if they wish to return to work/daily activities sooner. Reducing and fixing displaced fractures also <strong>reduces</strong> the <strong>risk </strong>of <strong>non-union</strong>.</p>\n<p>The most common complications include <strong>nonunion,</strong>\u00a0<strong>avascular necrosis (osteonecrosis) </strong>of the <strong>proximal </strong>fracture <strong>segment,\u00a0</strong>and <strong>osteoarthritis.\u00a0</strong></p>\n<p>Herbert screw is shown below:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/920cb29375cc46bab8e6bbdb9bcd993c.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f984677a257341a88825c039a7cd068ex1280x1223.JPEG"
    ]
  },
  {
    "text": "The equipment shown below is used for the sterilization of all of the following except:",
    "choices": [
      {
        "id": 1,
        "text": "Culture media"
      },
      {
        "id": 2,
        "text": "Endoscopes"
      },
      {
        "id": 3,
        "text": "Glassware"
      },
      {
        "id": 4,
        "text": "Surgical instruments"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows an <strong>autoclave</strong>.\u00a0 It is not used to sterilize endoscopes because most of them are heat-sensitive.\u00a0</p>\n<p>Autoclaving is a method of heat sterilization using <strong>steam under pressure</strong>. The temperature is kept between 108<sup>o</sup>C to 147<sup>o</sup>C. It is used to sterilize linen, instruments, laboratory ware, media, pharmaceutical products, aqueous solutions, surgical instruments, cardiac catheters, and implants.</p>\n<p>Endoscopes are cleaned using liquid chemical sterilizing agents such as <strong>orthophthaldehyde </strong>as it has bactericidal properties and is quick, safe and effective.`<br /><br />Other equipments used in sterilization include:<br /><br /><strong>Hot air oven</strong>- The objects undergo a holding period of 160<sup>o</sup>C for two hours to sterilize glassware, forceps, scissors, scalpels, swabs, and some pharmaceutical products such as liquid paraffin, dusting powder.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7b7fc1a5dfa6436b83daf267ff11aa9e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/770a1c62dc344e2aae93fe84c8cae528x1280x720.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a07ff6c7b2a947f490cff7d6d392dbe2x1280x853.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/65e456443ed447459281be4ea44c2b53x500x701.JPEG"
    ]
  },
  {
    "text": "Identify the instrument.",
    "choices": [
      {
        "id": 1,
        "text": "Evisceration spatula"
      },
      {
        "id": 2,
        "text": "Enucleation spoon"
      },
      {
        "id": 3,
        "text": "Chalazion clamp"
      },
      {
        "id": 4,
        "text": "Bone punch"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image is that of an <strong>enucleation spoon</strong>. This is identified by the <strong>central cleavage</strong> that engages the optic nerve in enucleation.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/000a61c4e91e45e7883c46f88bf906bc.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fe68252a67eb4119bd153087b976d528x1280x1227.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0bfc8291472b44eba0657118d2279130x1280x1439.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/550af3d01a1f4bc7b2c247183b8e0fd9x1280x1044.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0e3fc39ec5f5494bb00ff3648f522cd5x1280x1411.JPEG"
    ]
  },
  {
    "text": "Match the following splints and the conditions where they are used.",
    "choices": [
      {
        "id": 1,
        "text": "1-d, 2-c, 3-b, 4-a"
      },
      {
        "id": 2,
        "text": "1-d, 2-b, 3-c, 4-a"
      },
      {
        "id": 3,
        "text": "1-c, 2-d, 3-b, 4-a"
      },
      {
        "id": 4,
        "text": "1-c, 2-d, 3-a, 4-b"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The correct answer is\u00a01-d, 2-c, 3-b, 4-a.</p>\n<ol>\n<li>Knuckle bender splint - Ulnar nerve palsy</li>\n<li>Cock-up splint\u00a0 -\u00a0Radial nerve palsy</li>\n<li>Aeroplane splint -\u00a0Brachial plexus injury</li>\n<li>SOMI Brace - Cervical spine injury</li>\n</ol>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6e75b0489df246ba86ea62d2b4fb5ca6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1f82c568dd99481ebcf6f5dd959f5282x1280x1246.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dad153a18bc74b6da49da12ee4355bb9x1280x1246.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6c75d65d75024117bdccb1898700c05dx1280x1251.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/356aa963d1494c2fb53ca591f81dce99x1280x1254.JPEG"
    ]
  },
  {
    "text": "The apparatus shown below is used to estimate:",
    "choices": [
      {
        "id": 1,
        "text": "Free non-residual chlorine"
      },
      {
        "id": 2,
        "text": "Combined chlorine"
      },
      {
        "id": 3,
        "text": "Coliform count"
      },
      {
        "id": 4,
        "text": "Chlorine demand"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image is that of\u00a0<strong>Horrock\u2019s apparatus</strong>\u00a0which is used to determine the <strong>chlorine demand</strong> of water.</p>\n<p>It consists of:</p>\n<ul>\n<li>6 white cups\u00a0of 200 ml each</li>\n<li>1 black cup\u00a0with a circular mark inside</li>\n<li>2 metal spoons -each holds 2g of bleaching powder</li>\n<li>7 glass stirring rods and 1 special pipette</li>\n<li>Two droppers</li>\n<li>Starch-iodide indicator solution</li>\n</ul>\n<div class=\"page\" title=\"Page 796\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The dose of bleaching powder required for disinfection of water can be calculated using this apparatus.</p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/873615f744184a04ac3ccc68ea52db3d.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient presenting with cola-colored urine and abdominal pain was investigated to find out the cause. The following instrument was used in the definitive diagnosis of the patient's condition. Which disease this patient is most likely suffering from?",
    "choices": [
      {
        "id": 1,
        "text": "Essential thrombocythemia"
      },
      {
        "id": 2,
        "text": "Chronic granulocyte deficiency"
      },
      {
        "id": 3,
        "text": "Chediak-Higashi syndrome"
      },
      {
        "id": 4,
        "text": "Paroxysmal nocturnal hemoglobinuria"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><span data-preserver-spaces=\"true\">The given image shows a</span><strong><span data-preserver-spaces=\"true\">&nbsp;flow cytometry tube,</span></strong><span data-preserver-spaces=\"true\">&nbsp;which is used for diagnosing <strong>paroxysmal nocturnal hemoglobinuria</strong> (PNH).</span></p>\n<div class=\"page\" title=\"Page 652\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Paroxysmal nocturnal hemoglobinuria (PNH) is due to acquired mutations in the phosphatidylinositol glycan complementation group A gene (PIGA) leading to deficiency of GPI-linked proteins.PIGA is X-linked.</p>\n<p>PNH blood cells are deficient in three GPI-linked proteins that regulate complement activity. They are :&nbsp;</p>\n<ul>\n<li>Decay-accelerating factor, or <strong>CD55</strong></li>\n<li>Membrane inhibitor of reactive lysis, or <strong>CD59</strong></li>\n<li>C8-binding protein.</li>\n</ul>\n<div class=\"page\" title=\"Page 652\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Red cells deficient in GPI-linked factors are abnormally <strong>susceptible </strong>to<strong> lysis</strong> or <strong>injury</strong> by complement.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<p><strong><span data-preserver-spaces=\"true\">Clinical features of PNH:</span></strong></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Intravascular hemoglobinuria - cola-colored urine</span></li>\n<li><span data-preserver-spaces=\"true\">Pancytopenia + hypercellular bone marrow</span></li>\n<li><span data-preserver-spaces=\"true\">Thrombosis (if hepatic vein involved &rarr; Budd&ndash;Chiari syndrome)</span></li>\n</ul>\n<p><strong><span data-preserver-spaces=\"true\">Diagnosis:</span></strong></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">HAM&rsquo;S test (acidified serum lysis)</span></li>\n<li><span data-preserver-spaces=\"true\">Sucrose lysis test</span></li>\n<li><span data-preserver-spaces=\"true\">Flow cytometry:&nbsp;It is the&nbsp;<strong>gold standard</strong>&nbsp;for the diagnosis of PNH. It detects red cells that are deficient in GPI-linked proteins such as CD59 and CD55.</span></li>\n</ul>\n<p><strong><span data-preserver-spaces=\"true\">Eculizumab</span></strong><span data-preserver-spaces=\"true\">&nbsp;is used to alleviate the hemolysis associated with PNH and its sequelae. Eculizumab does not alter the underlying defect of the disease.</span></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/30762606471e4b7baf851d1ef9a6a42a.JPEG"
    ],
    "explanation_images": []
  }
];
        let quizName = 'Instruments Mini Test - General';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2024-25"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>