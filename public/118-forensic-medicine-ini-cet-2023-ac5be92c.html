<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>118 Forensic Medicine Ini-Cet 2023 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Forensic Medicine
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Identify the following image.",
    "choices": [
      {
        "id": 1,
        "text": "Blister due to barbiturate poisoning"
      },
      {
        "id": 2,
        "text": "Blister due to antemortem burns"
      },
      {
        "id": 3,
        "text": "Edema due to chemical burn"
      },
      {
        "id": 4,
        "text": "Pemphigus vulgaris"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Option D:&nbsp;<strong>Pemphigus vulgaris&nbsp;</strong>is an intraepidermal immunobullous disease. It&nbsp;occurs commonly between the&nbsp;<strong>4th to 6th decades.&nbsp;</strong>They present with&nbsp;<strong>flaccid blisters.</strong>&nbsp;<strong>Mucosal involvement</strong>&nbsp;will be seen in the form of buccal and palatal erosions.&nbsp;Firm pressure over the lesion separates the epidermis from the dermis.&nbsp;<strong>Nikolsky's sign</strong>&nbsp;is&nbsp;<strong>positive</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4d01fa12418e42fcaaf15b7009cdf246.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cff5a8116cc640dcb76c68a8d40d23e6x800x1066.JPEG"
    ]
  },
  {
    "text": "A 5-year-old boy went to the temple in a village with his grandmother. He was crying inconsolably on the way back. He was taken to the emergency department within 3 hours. He had altered sensorium, cold clammy extremities, increased salivation, and excessive sweating. On examination, he was pale and had priapism with the following vitals - BP - 140/78 mmHg, HR - 152/min, RR - 36/min sPO2 of 96%. Which of the following would you use in his management?",
    "choices": [
      {
        "id": 1,
        "text": "Anti-snake venom"
      },
      {
        "id": 2,
        "text": "Methylprednisolone"
      },
      {
        "id": 3,
        "text": "Prazosin"
      },
      {
        "id": 4,
        "text": "Adrenaline"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical stem points to a likely diagnosis of a <strong>scorpion bite</strong>, for which&nbsp;<strong>Prazosin</strong>&nbsp;can be used in the management. It acts as a physiological antidote counteracting the symptoms of the adrenergic surge.&nbsp;</p>\n<p>The venom is a potent&nbsp;<strong>autonomic stimulator</strong>&nbsp;that causes the release of massive amounts of&nbsp;<strong>catecholamines</strong>&nbsp;from the adrenals. It also has a direct effect on the myocardium.</p>\n<p>Scorpion sting usually presents with&nbsp;<strong>localized redness</strong>&nbsp;and&nbsp;<strong>burning pain</strong>&nbsp;which is unable to localize due to its radiation along the dermatomes involved,&nbsp;<strong>localized swelling</strong>, and&nbsp;<strong>punctate hemorrhagic spots</strong>. Other features include headache, profuse perspiration, chest discomfort, paraesthesias, hypersalivation, cold extremities, and sometimes, priapism.<strong>&nbsp;Hypertension</strong>&nbsp;usually develops early, while&nbsp;<strong>pulmonary edema</strong>&nbsp;and&nbsp;<strong>myocarditis</strong>&nbsp;may develop later.&nbsp;</p>\n<p>Treatment:</p>\n<ul>\n<li>Paracetamol, NSAIDs, or opioids for pain.&nbsp;</li>\n<li>Benzodiazepines for sedation for agitation, oculomotor abnormalities, uncoordinated neuromuscular activity, and muscle spasms.</li>\n<li>Hypertension and pulmonary edema-&nbsp;<strong>Prazosin</strong> counteracts the adrenergic surge that can lead to these effects.&nbsp;</li>\n<li>Cardiogenic shock- Antivenom, prazosin, nitroglycerin, dobutamine.</li>\n<li>Cholinergic effects- Atropine.</li>\n<li>Supportive care, wound care.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In an examination for drunkenness, a person smells of alcohol and his conjunctiva appears red. During the examination of motor coordination, it is noted that he can walk in a straight line and can talk normally. Which of the following statements is true?",
    "choices": [
      {
        "id": 1,
        "text": "He has consumed alcohol"
      },
      {
        "id": 2,
        "text": "He has consumed alcohol and is under the influence of alcohol"
      },
      {
        "id": 3,
        "text": "He has consumed alcohol but is not under its influence"
      },
      {
        "id": 4,
        "text": "He has not consumed alcohol"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario of a person who smells of alcohol but whose motor coordination is normal with no slurring of speech is suggestive that he has <strong>consumed alcohol</strong> but is<strong> not under its influence</strong>.</p>\n<table style=\"height: 122px; width: 369.992px;\">\n<tbody>\n<tr>\n<td style=\"width: 64px;\"><strong>Smell of alcohol&nbsp;</strong></td>\n<td style=\"width: 87px;\"><strong>Motor coordination</strong>&nbsp;</td>\n<td style=\"width: 179.992px;\"><strong>Inference&nbsp;</strong></td>\n</tr>\n<tr>\n<td style=\"width: 64px;\">Present</td>\n<td style=\"width: 87px;\">Normal&nbsp;</td>\n<td style=\"width: 179.992px;\">Consumed alcohol, not under the influence</td>\n</tr>\n<tr>\n<td style=\"width: 64px;\">Present</td>\n<td style=\"width: 87px;\">Abnormal&nbsp;</td>\n<td style=\"width: 179.992px;\">Consumed alcohol,&nbsp;under the influence</td>\n</tr>\n<tr>\n<td style=\"width: 64px;\">Absent</td>\n<td style=\"width: 87px;\">Normal</td>\n<td style=\"width: 179.992px;\">Not consumed alcohol</td>\n</tr>\n<tr>\n<td style=\"width: 64px;\">Absent</td>\n<td style=\"width: 87px;\">Abnormal&nbsp;</td>\n<td style=\"width: 179.992px;\">Cerebellar disorders&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p>The effects of alcohol intoxication at various blood alcohol concentrations are listed below.</p>\n<table>\n<tbody>\n<tr>\n<td>Blood alcohol concentration (mg/dL)</td>\n<td>Effects&nbsp;</td>\n</tr>\n<tr>\n<td>30-50</td>\n<td>Impairment of driving and similar skills</td>\n</tr>\n<tr>\n<td>50-100</td>\n<td>Reduced inhibitions, slurred speech, laughter</td>\n</tr>\n<tr>\n<td>100-150</td>\n<td>Incoordination,&nbsp;ataxia</td>\n</tr>\n<tr>\n<td>150-200</td>\n<td>Obvious drunkenness, nausea,&nbsp;staggering gait</td>\n</tr>\n<tr>\n<td>200-300</td>\n<td>Vomiting, stupor</td>\n</tr>\n<tr>\n<td>300-350</td>\n<td>Stupor, coma, risk of aspirating vomitus</td>\n</tr>\n<tr>\n<td>350-450 and above</td>\n<td>Danger of death from respiratory paralysis</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The Blackfoot disease is an endemic peripheral vascular disease seen in toxicity of which of the following metal?",
    "choices": [
      {
        "id": 1,
        "text": "Arsenic"
      },
      {
        "id": 2,
        "text": "Antimony"
      },
      {
        "id": 3,
        "text": "Barium"
      },
      {
        "id": 4,
        "text": "Cadmium"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Clinicopathological findings in acute and chronic arsenic poisoning:</strong></p>\n<table>\n<tbody>\n<tr>\n<td width=\"154\">\n<p><strong>System</strong></p>\n</td>\n<td width=\"154\">\n<p><strong>Acute</strong></p>\n</td>\n<td width=\"154\">\n<p><strong>Chronic</strong></p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>Skin</p>\n</td>\n<td width=\"154\">\n<p>Delayed hair loss (alopecia)</p>\n</td>\n<td width=\"154\">\n<p>Melanosis, Bowen\u2019s disease facial edema, hyperkeratosis, cutaneous cancer, hyperpigmentation.</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>Nails</p>\n</td>\n<td width=\"154\">\n<p>nil</p>\n</td>\n<td width=\"154\">\n<p>Mees\u2019s lines</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>Neurologic</p>\n</td>\n<td width=\"154\">\n<p>Hyperpyrexia, convulsions, tremors, coma</p>\n</td>\n<td width=\"154\">\n<p>Encephalopathy, polyneuropathy, tremors, axonal degeneration</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>GI tract</p>\n</td>\n<td width=\"154\">\n<p>Abdominal pain, dysphagia, vomiting, bloody or rice water diarrhea, mucosal erosions.</p>\n</td>\n<td width=\"154\">\n<p>Nausea, vomiting, diarrhea, anorexia, weight loss</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>Liver</p>\n</td>\n<td width=\"154\">\n<p>Fatty infiltration</p>\n</td>\n<td width=\"154\">\n<p>Hepatomegaly, jaundice, cirrhosis</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>Kidney</p>\n</td>\n<td width=\"154\">\n<p>Tubular and glomerular changes \u2013 oliguria and uremia</p>\n</td>\n<td width=\"154\">\n<p>Nephritic finding</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>Haematologic</p>\n</td>\n<td width=\"154\">\n<p>thrombocytopenia, impaired folate metabolism</p>\n</td>\n<td width=\"154\">\n<p>Bone marrow hypoplasia, anemia, leukopenia,\u00a0basophilic stippling, and karyorrhexis.</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>Cardiovascular</p>\n</td>\n<td width=\"154\">\n<p>The heart will show S-T wave abnormalities, prolonged QT interval, ventricular fibrillation, atypical ventricular tachycardia with humic acid in the Southwest coast of Taiwan</p>\n</td>\n<td width=\"154\">\n<p>Blackfoot disease due to platelet activation and Hypercoagulability of blood in peripheral arteries is observed in endemic areas of arsenicism.</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>Reproductive system</p>\n</td>\n<td width=\"154\">\n<p>Maternal ingestion of inorganic arsenic crosses the placental barrier and infant death shortly after birth.</p>\n</td>\n<td width=\"154\">\n<p>\u00a0-</p>\n<p>\u00a0</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Option B: The symptoms of\u00a0<strong>antimony</strong>\u00a0poisoning, both acute and chronic are\u00a0<strong>similar </strong>to that of<strong> arsenic.\u00a0</strong>Inhalation of fumes causes a flu-like illness called metal fume fever. In cases of\u00a0<strong>chronic poisoning</strong>\u00a0with heavy metals such as lead,\u00a0<strong>arsenic</strong>, mercury,\u00a0<strong>antimony</strong>, copper, etc.,\u00a0the shaft of a long bone, strands of scalp hair, fingernails or toenails, and a wedge of the quadriceps muscle should be taken for sampling.\u00a0</p>\n<p>Option C:<strong> Barium poisoning</strong> causes nausea, vomiting, and diarrhea. It causes cramps and stiffness of the muscles, dilation of the pupil, paralysis of the tongue and larynx, and vertigo. There is increased blood pressure with slow and irregular pulse.</p>\n<p>Option D: <strong>Cadmium poisoning</strong> causes proteinuria and painful bone lesions known as <strong>Ouch-Ouch disease</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 12-year-old girl is brought by a lady police sub-inspector with an alleged history of sexual violence 2 days back. She was accompanied by her mother. The registered medical practitioner should do which of the following as the next step?",
    "choices": [
      {
        "id": 1,
        "text": "Take a detailed history"
      },
      {
        "id": 2,
        "text": "Preserve clothing"
      },
      {
        "id": 3,
        "text": "Take consent for genital examination"
      },
      {
        "id": 4,
        "text": "Documentation of injuries and examination findings"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The registered medical practitioner should take a <strong>detailed history</strong> as the next step.&nbsp;</p>\n<p>The&nbsp;registered medical practitioner must take a <strong>detailed history</strong> <strong>and then</strong> take&nbsp;<strong>informed consent</strong> for examination. In case of refusal, an informed refusal is to be&nbsp;<strong>documented</strong>&nbsp;after explaining to them the consequences of choice. As part of the examination, they should collect<strong> specimens</strong>,&nbsp;<strong>preserve clothing,&nbsp;</strong>and<strong> document injuries </strong>and <strong>examination findings</strong>.&nbsp;<strong>Medical treatment</strong> and <strong>testing for pregnancy</strong> have to be done for all victims of sexual assault free of cost and <strong>police</strong> should be informed as per section&nbsp;<strong>357-C</strong>&nbsp;of CrPc.&nbsp;</p>\n<p>The&nbsp;<strong>Protection of Children from Sexual Offences (POCSO) Act, 2012</strong>&nbsp;considers all individuals (both male and female) below the age of 18 years as children and protects them from sexual abuse. It defines various forms of sexual offenses which include:</p>\n<ul>\n<li>Sexual harassment: A person is said to commit sexual harassment upon a child when such person with sexual intent,\n<ul>\n<li>Carries out any act with sexual connotations</li>\n<li><strong>makes a child exhibit his/her body</strong></li>\n<li>shows any object to a child in any form/media for pornographic purposes.</li>\n</ul>\n</li>\n<li>Sexual assault\n<ul>\n<li>Any act with sexual intent that involves physical contact&nbsp;<strong>without penetration.</strong></li>\n</ul>\n</li>\n<li>Aggravated sexual assault\n<ul>\n<li>Similar to&nbsp;<strong>sexual assault</strong>&nbsp;along with the criteria explained under the term \"<strong>aggravated</strong>\".</li>\n</ul>\n</li>\n<li>Penetrative sexual assault\n<ul>\n<li>An act with sexual intent that&nbsp;<strong>involves physical&nbsp;penetration.</strong></li>\n</ul>\n</li>\n<li>Aggravated penetrative sexual assault\n<ul>\n<li>Similar to&nbsp;<strong>penetrative sexual assault</strong>&nbsp;along with the criteria explained under the term \"<strong>aggravated</strong>\".</li>\n</ul>\n</li>\n<li>Pornography</li>\n</ul>\n<p>The term&nbsp;<strong>aggravated</strong>&nbsp;is used for those assaults done:&nbsp;</p>\n<ul>\n<li>by a person in a position of trust or authority such as police officer, security forces, relative, doctor.</li>\n<li>in the course of communal violence.</li>\n<li>on mentally &amp; physically disabled.</li>\n<li>gang sexual assault.</li>\n<li>using deadly weapons.</li>\n<li>causing grievous hurt</li>\n</ul>\n<p>The Act prescribes stringent punishment graded as per the gravity of the offense, with a maximum term of rigorous imprisonment for life and fine.&nbsp;<strong>Section 21</strong>(1) of the POCSO Act, 2012 requires mandatory reporting of cases of child sexual abuse to law enforcement authorities and applies to everyone including parents, doctors, and school personnel.&nbsp;<strong>Failure</strong>&nbsp;to&nbsp;<strong>report</strong>&nbsp;a suspicion of child abuse is an&nbsp;<strong>offense</strong>&nbsp;under the Act.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not true about postmortem changes?",
    "choices": [
      {
        "id": 1,
        "text": "In drowning, postmortem hypostasis is seen only in the lower limbs"
      },
      {
        "id": 2,
        "text": "Greenish discolouration in right iliac fossa is the earliest sign of decomposition"
      },
      {
        "id": 3,
        "text": "Adipocere is seen in bodies recovered from water source"
      },
      {
        "id": 4,
        "text": "Cadaveric spasm is seen only in specific group of muscles"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the case of drowning, if the <strong>water</strong> is <strong>still</strong>, the postmortem hypostasis affects the <strong>head, chest</strong> and the<strong> limbs</strong>. This is because the chest and abdomen float higher because of the lungs and the abdominal gases.&nbsp;Drowning in <strong>fast-flowing</strong> water results in <strong>absent postmortem staining</strong> as the position of the body keeps on changing.</p>\n<p><strong>Postmortem hypostasis/Postmortem staining/Postmortem lividity/Livor mortis/Suggilation</strong>&nbsp;refers to bluish-purple or reddish-purple discoloration&nbsp;of the superficial layers of the dermis.&nbsp;It is an&nbsp;<strong>early</strong>&nbsp;postmortem change that occurs due to<strong>&nbsp;</strong>the&nbsp;<strong>stagnation of blood&nbsp;</strong>in the&nbsp;vessels of the<strong>&nbsp;dependent parts</strong>&nbsp;due to the effect of gravity.</p>\n<p>Sites of postmortem hypostasis depending on the position of the body:</p>\n<table style=\"height: 334px; width: 370px;\">\n<tbody>\n<tr>\n<td style=\"width: 166.242px;\"><strong>Position of the body</strong></td>\n<td style=\"width: 187.758px;\"><strong>Sites of hypostasis</strong></td>\n</tr>\n<tr>\n<td style=\"width: 166.242px;\">Supine</td>\n<td style=\"width: 187.758px;\">Back except for shoulder blades, buttocks, and calves (<strong>contact pallor</strong>)</td>\n</tr>\n<tr>\n<td style=\"width: 166.242px;\">Vertical as in hanging</td>\n<td style=\"width: 187.758px;\">Legs, feet, forearm, and hands (<strong>glove and stocking hypostasis</strong>)</td>\n</tr>\n<tr>\n<td style=\"width: 166.242px;\">Drowning</td>\n<td style=\"width: 187.758px;\">Face, the upper part of chest, hands, lower arms</td>\n</tr>\n<tr>\n<td style=\"width: 166.242px;\">Inverted like in drunken persons</td>\n<td style=\"width: 187.758px;\">Head and neck</td>\n</tr>\n</tbody>\n</table>\n<p>Postmortem changes are classified on the basis of time:</p>\n<ul>\n<li><strong>Immediate</strong> signs of death (at the time of somatic or clinical death):\n<ol>\n<li>Insensibility and loss of voluntary power</li>\n<li>Cessation of respiration</li>\n<li>Cessation of circulation</li>\n</ol>\n</li>\n<li><strong>Early</strong> signs of death. It is seen in cellular death:\n<ol>\n<li>Pallor and loss of elasticity of the skin</li>\n<li>Eye changes</li>\n<li>Primary flaccidity of muscles</li>\n<li>Algor mortis/Postmortem cooling</li>\n<li>Postmortem lividity/<strong>Suggillation</strong></li>\n<li>Rigor mortis</li>\n</ol>\n</li>\n<li><strong>Late</strong> signs of death:\n<ol>\n<li><strong>Putrefaction</strong></li>\n<li><strong>Adipocere</strong></li>\n<li>Mummification</li>\n</ol>\n</li>\n</ul>\n<p>Other options-&nbsp;</p>\n<p>Option B: The&nbsp;<strong>first external sign</strong>&nbsp;of putrefaction in a body lying outside in the air is a&nbsp;<strong>greenish discoloration</strong>&nbsp;of the&nbsp;<strong>skin</strong>&nbsp;over the region of the <strong>right iliac fossa.&nbsp;</strong><strong>Sulphmethemoglobin&nbsp;</strong>is the agent imparting greenish color.</p>\n<p>Option C:<strong> Adipocere</strong>&nbsp;is a modification of putrefaction. The transformation is brought about by the&nbsp;<strong>gradual hydrolysis&nbsp;</strong>and&nbsp;<strong>hydrogenation</strong>&nbsp;of pre-existing fats, including olein, into higher fatty acids. It is characterized by the formation of a waxy, soft, moist, and whitish substance with a sweetish offensive or ammoniacal (early stages) odor. It is&nbsp;<strong>more commonly</strong>&nbsp;seen in bodies recovered from&nbsp;<strong>damp, warm environments</strong>&nbsp;or immersed in&nbsp;<strong>water</strong>.</p>\n<p>Option D:<strong> Cadaveric spasm&nbsp;</strong>- This is a&nbsp;<strong>vital sign</strong>&nbsp;of antemortem drowning.&nbsp;Cadaveric spasm is limited to&nbsp;<strong>select muscles</strong>&nbsp;i.e., the muscles that were in a state of contraction at the time of death. The mechanism of cadaveric spasm is thought to be due to neurogenic phenomena.&nbsp;Gravel, weed, soil, grass, etc. is firmly held in the&nbsp;<strong>clenched hands</strong>&nbsp;due to cadaveric spasm. The material also indicates the place of submersion.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A female was brought for autopsy with an alleged history of being found at a lake in the village. All of the following are suggestive of antemortem drowning except:",
    "choices": [
      {
        "id": 1,
        "text": "Water in stomach"
      },
      {
        "id": 2,
        "text": "Washerwoman's hands and feet"
      },
      {
        "id": 3,
        "text": "White leathery foam around mouth and nostrils"
      },
      {
        "id": 4,
        "text": "Positive diatom test"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Washerwoman's hands and feet\u00a0</strong>are a <strong>non-specific sign</strong> of <strong>submersion</strong>. They occur due to the <strong>imbibition of water</strong> into the outer skin layers. They can be <strong>seen in antemortem as well as postmortem</strong> drowning victims.\u00a0</p>\n<p>The presence of water in the stomach, white leathery foam around the mouth and nostrils, and a positive diatom test are suggestive of\u00a0antemortem drowning.\u00a0</p>\n<p>Given below are the features of antemortem drowning.</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Froth\u00a0</strong>- The presence of copious amounts of <strong>fine, shaving-lather-like froth</strong> at the mouth and the nostrils is the most characteristic finding of antemortem drowning. It is caused by the vigorous agitation of the tracheal and bronchial mucous secretions, edema fluid, and alveolar surfactant during respiratory efforts.\u00a0</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Cutis anserina\u00a0- The contraction of the erector pilorum muscles causes puckering and grainy appearance of the skin. This resembles <strong>goose skin</strong>;\u00a0hence, it is called cutis anserina.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Washerwoman\u2019s hand\u00a0</strong>- Maceration of the skin on the palms and soles gives a wrinkled, sodden, and bleached appearance due to submersion.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Cadaveric spasm<strong>\u00a0</strong>- Gravel, weed, soil, grass, etc. is firmly held in the clenched hands due to cadaveric spasm. This is a vital sign of antemortem drowning. The material also indicates the place of submersion.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Rigor mortis - This appears early in cases of a violent antemortem struggle.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Face - It is bloated and discolored, with cyanosis.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Eyes - Conjunctiva are suffused and pupils dilated.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Tongue - It may be swollen and protruded.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Antemortem injuries - These may be sustained by striking objects, such as rocks, during the fall into the water body. Examination for such injuries must be performed only after the body is dry.</li>\n</ul>\n<p>Internal findings:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Lungs - They appear voluminous and distended and show ballooning. The cut section will exude copious amounts of frothy, bloodstained fluid.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Larynx, trachea, and bronchioles - The presence of sand, silt, and aquatic vegetation in the trachea and lower respiratory tract are characteristic findings of antemortem drowning.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Heart and blood vessels- <strong>Gettler test</strong> can be done to estimate the chloride content in the right and left sides of the heart to differentiate between freshwater and saltwater drowning.\u00a0</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Diatom test</strong>- Diatoms are microscopic algae. Their presence in the organs, particularly in the bone marrow, is suggestive of antemortem drowning.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Stomach</strong> and small intestines- These organs may contain <strong>water</strong> in some cases. Water present in the small intestine is positive evidence of death by drowning.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Middle ear - The presence of water in the middle ear is highly suggestive of antemortem drowning.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Brain - It is congested, and edematous, with loss of gray-white junction.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In death due to firearm injury, the entry wound shows only an abrasion collar. The range of the firearm is:",
    "choices": [
      {
        "id": 1,
        "text": "Contact range"
      },
      {
        "id": 2,
        "text": "Close range"
      },
      {
        "id": 3,
        "text": "Near range"
      },
      {
        "id": 4,
        "text": "Distant range"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Note: A <strong>grease collar</strong> need <strong>not always be present</strong>.\u00a0<strong>Hard metal jacketed bullets</strong> are associated\u00a0<strong>less commonly </strong>with<strong> soiling</strong>. Often, the ring is not appreciable during gross inspection and may only be demonstrable on microscopic examination or other laboratory tests.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/88bc827734ec46f4aa76c43da4450633x927x432.PNG"
    ]
  },
  {
    "text": "In the 18th century, the British East India Company smuggled which of the following drugs to China?",
    "choices": [
      {
        "id": 1,
        "text": "Cocaine"
      },
      {
        "id": 2,
        "text": "Magic mushroom"
      },
      {
        "id": 3,
        "text": "Opium"
      },
      {
        "id": 4,
        "text": "Marijuana"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>British</strong> <strong>East</strong> <strong>India</strong> <strong>Company</strong> smuggled <strong>opium</strong> into China in <strong>exchange</strong> for <strong>tea</strong>, <strong>silk</strong> and <strong>porcelain</strong> pots.</p>\n<p><strong>Opium</strong> derived from the immature seedpods of the opium poppy (<strong><em>Papaver</em> <em>somniferum</em></strong>), was originally indigenous to the present-day territory of Turkey. The introduction of opium to China occurred during the late 6th or early 7th century CE, facilitated by Turkish and Arab traders.\u00a0</p>\n<p>During this time, tobacco smoking moved from North America to China, resulting in widespread opium smoking. Opium addiction and imports increased in the first century of the Qing era (1644\u20131911/12). To address the issue, the Yongzheng emperor (1722\u201335) banned opium trafficking and consumption in 1729. Despite hurdles, the trade continued, and in 1796, the Jiaqing emperor banned opium imports and cultivation. Opium sales survived despite these laws.</p>\n<p>In the early 18th century, the Portuguese made a lot of money importing opium from India and selling it in China. British traders became China's main suppliers in 1773. The British East India Company monopolized <strong>Bengali</strong> opium farming. The company developed an inexpensive and productive opium poppies cultivation method in this location. The US and other Western nations traded Turkish and Indian opium.</p>\n<p>The opium trade was pursued by Britain and other European nations as a means to address their persistent trade deficit with China. In Europe, there existed a substantial and notable demand for <strong>Chinese commodities such as tea, silks, and porcelain pots</strong>. Conversely, in China, there was a very limited market for Europe's manufactured goods and other trade items. As a result, Europeans were required to utilize gold or silver as payment for Chinese goods. The opium trade, which resulted in a consistent demand for opium among Chinese individuals addicted to the substance, effectively addressed the persistent trade imbalance by facilitating the importation of opium from Western countries.</p>\n<p>Opium was not carried by the East India Company. Due to the Chinese restriction, the corporation outsourced it to \u201c<strong>country</strong> <strong>traders</strong>\u201d\u2014private traders entitled to transport commodities from India to China. Smugglers on the Chinese shore bought opium from country traders. The traders gave the East India Company their sales of gold and silver. The corporation spent its gold and silver in China on profitable things to sell in England.</p>\n<p>Opium imports into China rose from 200 chests in 1729 to 1,000 in 1767 and 10,000 between 1820 and 1830. Although chest weight varied by origin, it averaged 140 pounds (63.5 kg). By 1838, China imported 40,000 chests annually. China lost the balance of payments to Britain for the first time. Opium distribution networks had evolved across China, frequently with corrupt officials' help. High opium addiction levels affected imperial troops and officials.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An industrial worker sustained burn injuries to the anterior region of his chest and abdomen, as well as burns to his right upper limb and a circumferential burn to his right thigh, as a result of a cylinder explosion. What is the percentage of total burns surface area?",
    "choices": [
      {
        "id": 1,
        "text": "27"
      },
      {
        "id": 2,
        "text": "36"
      },
      {
        "id": 3,
        "text": "45"
      },
      {
        "id": 4,
        "text": "53"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Lund and Browder's chart</strong> is an accurate method to measure burns if it is used correctly. In this, different proportions of body surface areas in <strong>children</strong> are taken into consideration. This chart compensates for the changes in the shape of the body with age and can accurately assess the <strong>burn</strong> <strong>area</strong> in <strong>children</strong>.</p>\n<p>The below image shows the Lund and Browder chart.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0af1227e0f8f477d8a7f22acdb5fdeb0x1280x1508.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5bc72ea065cb4e39bcd3452f1bc19f29x1280x2300.JPEG"
    ]
  },
  {
    "text": "In a Firearm injury, blackening surrounding the gunshot entry wound is due to?",
    "choices": [
      {
        "id": 1,
        "text": "Flame effect"
      },
      {
        "id": 2,
        "text": "Unburnt powder"
      },
      {
        "id": 3,
        "text": "Smoke deposition"
      },
      {
        "id": 4,
        "text": "Muzzle of the firearm"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Blackening</strong>\u00a0occurs due to the <strong>deposits</strong> of <strong>smoke </strong>over the<strong> epidermis </strong>which can be removed with a wet cloth. This can be seen up to around <strong>15 cm of firing</strong>.</p>\n<p>Other injuries related to firearms are:</p>\n<ul>\n<li><strong>Burn</strong> <strong>injuries</strong> - occur due to <strong>flame</strong> <strong>released</strong> during the <strong>firing</strong>. It is seen in contact shot wounds or distances up to <strong>5-8 cm</strong>. <strong>Singeing</strong> of hair is caused due to burns.</li>\n<li><strong>Tattooing</strong> - occurs due to the deposition of <strong>unburnt</strong> <strong>powder</strong> <strong>particles</strong>. These are <strong>difficult</strong> <strong>to</strong> <strong>remove</strong>. They are also called stippling or peppering. This is seen up to <strong>50</strong> <strong>cm</strong> of firing</li>\n<li><strong>Greasing</strong> and <strong>collaring</strong> - occur due to the <strong>deposition</strong> <strong>of</strong> the <strong>lubricant</strong> of the bullet in the tissues, during its penetration. It can be found in contact, near-shot, or distant shot wounds.\u00a0</li>\n</ul>\n<p>In a <strong>firm contact</strong> shot, the <strong>imprint</strong> of the <strong>muzzle</strong> of the gun is seen on the skin around the wound. The victim is within the range of flame, hence singeing of the hair will be present. <strong>Tattooing</strong> begins only when the muzzle-to-target distance is<strong> &gt;1cm</strong>, like in a loose contact shot.</p>\n<p>When the distance between the victim and the firing is <strong>5-8cm</strong>, it is called a <strong>close</strong> <strong>shot</strong>. The victim is within the range of the flame, hence, features related to flame, <strong>smoke</strong>, and <strong>powder</strong> deposition will be seen. Singeing, burning, <strong>blackening</strong> and tattooing will be present.</p>\n<p>When the distance between the victim and the firing is <strong>&gt;50 cm</strong>, it is a <strong>distant</strong> <strong>shot</strong>. The victim lies outside the range of flame and powder deposition. Hence, features related to flame, smoke, and powder deposition are absent. Burning, blackening, and tattooing are absent.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following poisons to their site of action:",
    "choices": [
      {
        "id": 1,
        "text": "A-3, B-1, C-4, D-2"
      },
      {
        "id": 2,
        "text": "A-2, B-3, C-1, D-4"
      },
      {
        "id": 3,
        "text": "A-4, B-2,C-1, D-3"
      },
      {
        "id": 4,
        "text": "A-4, B-2,C-3, D-1"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Nitric</strong> <strong>acid</strong> is a corrosive <strong>inorganic</strong> <strong>acid</strong>. Due to the xanthoproteic reaction, the nitric acid combines with aromatic amino acids like tyrosine to form picric acid which is responsible for the yellowish discolouration of the skin.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b0761ddf728149f7bb28671b66b0437dx1280x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/df900aef7943418cbce2c3329c8e2aeex1019x432.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d22c1da6a20a4ac3a17e70d76f578b59x720x512.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/429d234c8a944a6a80dc9a3b9d5644b9x720x540.JPEG"
    ]
  },
  {
    "text": "A 13-year-old female was brought by her mother to the emergency with abdominal pain for a few days. On clinical examination by the RMP, they found that she is 8 weeks pregnant. What should be your immediate next step?",
    "choices": [
      {
        "id": 1,
        "text": "File an MLC and Inform Police"
      },
      {
        "id": 2,
        "text": "Obtain consent form her mother for genital examination."
      },
      {
        "id": 3,
        "text": "Preserve the clothing"
      },
      {
        "id": 4,
        "text": "Plan/perform MTP"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The registered medical practitioner should take register a <strong>medico-legal</strong> case and immediately <strong>inform</strong> the <strong>police</strong> in this case. All three other options are steps to be taken eventually in this case but registering an MLC takes priority.</p>\n<p>The\u00a0<strong>Protection of Children from Sexual Offences (POCSO) Act, 2012</strong>\u00a0considers all individuals (both male and female) below the age of 18 years as children and protects them from sexual abuse. It defines various forms of sexual offenses which include:</p>\n<ul>\n<li>Sexual harassment: A person is said to commit sexual harassment upon a child when such person with sexual intent,\n<ul>\n<li>Carries out any act with sexual connotations</li>\n<li><strong>makes a child exhibit his/her body</strong></li>\n<li>shows any object to a child in any form/media for pornographic purposes.</li>\n</ul>\n</li>\n<li>Sexual assault\n<ul>\n<li>Any act with sexual intent that involves physical contact\u00a0<strong>without penetration.</strong></li>\n</ul>\n</li>\n<li>Aggravated sexual assault\n<ul>\n<li>Similar to\u00a0<strong>sexual assault</strong>\u00a0along with the criteria explained under the term \"<strong>aggravated</strong>\".</li>\n</ul>\n</li>\n<li>Penetrative sexual assault\n<ul>\n<li>An act with sexual intent that\u00a0<strong>involves physical\u00a0penetration.</strong></li>\n</ul>\n</li>\n<li>Aggravated penetrative sexual assault\n<ul>\n<li>Similar to\u00a0<strong>penetrative sexual assault</strong>\u00a0along with the criteria explained under the term \"<strong>aggravated</strong>\".</li>\n</ul>\n</li>\n<li>Pornography</li>\n</ul>\n<p>The term\u00a0<strong>aggravated</strong>\u00a0is used for those assaults done:\u00a0</p>\n<ul>\n<li>by a person in a position of trust or authority such as police officer, security forces, relative, doctor.</li>\n<li>in the course of communal violence.</li>\n<li>on mentally &amp; physically disabled.</li>\n<li>gang sexual assault.</li>\n<li>using deadly weapons.</li>\n<li>causing grievous hurt</li>\n</ul>\n<p>The Act prescribes stringent punishment graded as per the gravity of the offense, with a maximum term of rigorous imprisonment for life and fine.\u00a0<strong>Section 21</strong>(1) of the POCSO Act, 2012 requires mandatory reporting of cases of child sexual abuse to law enforcement authorities and applies to everyone including parents, doctors, and school personnel.\u00a0<strong>Failure</strong>\u00a0to\u00a0<strong>report</strong>\u00a0a suspicion of child abuse is an\u00a0<strong>offense</strong>\u00a0under the Act.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young man is brought to the casualty with pinpoint pupils. Which of the following is the most likely substance he would have consumed?",
    "choices": [
      {
        "id": 1,
        "text": "Datura"
      },
      {
        "id": 2,
        "text": "Opium"
      },
      {
        "id": 3,
        "text": "Alcohol"
      },
      {
        "id": 4,
        "text": "Cocaine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Pinpoint pupils </strong>can be observed in the overdose of <strong>opium.</strong></p>\n<table style=\"border-collapse: collapse; width: 58.167%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 50.0454%; text-align: center;\">Causes of <strong>Miosis</strong></td>\n<td style=\"width: 50.0454%; text-align: center;\">Causes of <strong>Mydriasis</strong></td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\">Carbolic acid poisoning</td>\n<td style=\"width: 50.0454%;\"><strong>Datura</strong> poisoning</td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\"><strong>Morphine</strong> <strong>poisoning</strong></td>\n<td style=\"width: 50.0454%;\">Cyanides</td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\">Organophosphorous poisoning</td>\n<td style=\"width: 50.0454%;\"><strong>Cocaine</strong></td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\">Pontine haemorrhage</td>\n<td style=\"width: 50.0454%;\">Ether</td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\">Barbiturate poisoning</td>\n<td style=\"width: 50.0454%;\">Pethidine</td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\">\u00a0</td>\n<td style=\"width: 50.0454%;\">Nux vomica</td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\">\u00a0</td>\n<td style=\"width: 50.0454%;\">Viper venom</td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\">\u00a0</td>\n<td style=\"width: 50.0454%;\"><strong>Amphetamine</strong></td>\n</tr>\n</tbody>\n</table>\n<p><strong>Opioid</strong> <strong>overdose</strong> symptoms:</p>\n<ul>\n<li>Triad of coma, respiratory depression, and pinpoint pupils (miosis)</li>\n<li>Hypotension, bradycardia</li>\n<li>Shallow breathing</li>\n<li>Hypothermia</li>\n</ul>\n<p><strong>Naloxone</strong> is also used for <strong>reversing</strong> <strong>neonatal</strong> <strong>asphyxia</strong> due to opioid usage in labour. <strong>Naloxone</strong> is a <strong>pure</strong> <strong>opioid</strong> <strong>antagonist</strong> which reverses all effects except sedation.</p>\n<p>Note: <strong>Naloxone</strong> is <strong>contraindicated</strong> in <strong>infants</strong> <strong>born</strong> <strong>to</strong> <strong>mothers</strong> <strong>with</strong> <strong>opiate</strong> <strong>addiction</strong> as it may precipitate acute neonatal <strong>withdrawal</strong> with seizures.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25 year old man was brought to the casualty in a semiconscious state following a road traffic accident. Which type of injury is unlikely to be seen in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Graze abrasions"
      },
      {
        "id": 2,
        "text": "Laceration Wound"
      },
      {
        "id": 3,
        "text": "Multiple Contusions"
      },
      {
        "id": 4,
        "text": "Chop Wound"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Injuries inflicted on <strong>motorcyclists</strong> following collision with other vehicles include patterned abrasions and various head, chest and spine injuries. A distinct injury can arise from the practice of \"tail-gating\" in which a motorcycle manoeuvres beneath the rear of a vehicle, resulting in significant cranial trauma or, in extreme cases, <strong>decapitation</strong>. The implementation of protective bars positioned at the sides and rear of trucks has effectively mitigated the occurrence of injuries resulting from bikes and vehicles passing beneath the vehicle.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0289af220a34411393b9b396eae8ba5ax1280x1525.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/084e48d4f16242228bda70365ff9c4fdx1280x2559.JPEG"
    ]
  },
  {
    "text": "An autopsy was performed on a person with a history of drowning; however, the report revealed that there was no water in his lungs, hence the case was labeled as dry drowning. What is the most likely cause of his death?",
    "choices": [
      {
        "id": 1,
        "text": "Vagal inhibition"
      },
      {
        "id": 2,
        "text": "Laryngospasm"
      },
      {
        "id": 3,
        "text": "Pulmonary edema"
      },
      {
        "id": 4,
        "text": "Electrolyte imbalace"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In <strong>dry drowning</strong> death is due to sustained <strong>laryngeal</strong> <strong>spasm</strong> and subsequent <strong>airway</strong> <strong>closure</strong>. This occurs when there is sudden entry of water into the nasopharynx or larynx.</p>\n<table style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; width: 63.0672%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 50%;\"><strong>Type of drowning</strong></td>\n<td style=\"width: 50%;\">\u00a0<strong>Cause of death</strong></td>\n</tr>\n<tr>\n<td style=\"width: 50%;\">\n<p>Freshwater drowning</p>\n<p>Seawater drowning</p>\n</td>\n<td style=\"width: 50%;\">Disruption of surfactant\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 50%;\">Dry drowning</td>\n<td style=\"width: 50%;\">Laryngeal spasm</td>\n</tr>\n<tr>\n<td style=\"width: 50%;\"><strong>Immersion syndrome</strong></td>\n<td style=\"width: 50%;\"><strong>Vagal</strong> <strong>inhibition</strong></td>\n</tr>\n<tr>\n<td style=\"width: 50%;\"><strong>Post immersion</strong> <strong>Syndrome</strong> / Secondary drowning</td>\n<td style=\"width: 50%;\">\n<p>Cerebral anoxia<br />Pneumonia<br /><strong>Pulmonary edema</strong><br />Chemical pneumonitis<br />Metabolic acidosis</p>\n<p><strong>Electrolyte</strong> <strong>imbalance</strong></p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Dry</strong> <strong>drowning</strong>:</p>\n<p>In this type of drowning, water <strong>does</strong> <strong>not</strong> <strong>enter</strong> the <strong>lungs</strong>, but death results from immediate sustained <strong>laryngeal</strong> <strong>spasm</strong> due to an <strong>inrush</strong> <strong>of</strong> <strong>water</strong> into the <strong>nasopharyngeal</strong> or <strong>larynx</strong>. Thick mucus, foam and froth may develop, producing a plug.</p>\n<p><strong>Immersion syndrome</strong> (Hydrocution/Submersion inhibition):</p>\n<p>Death results from cardiac arrest due to <strong>vagal</strong> <strong>inhibition</strong> as a result of</p>\n<ul>\n<li>Cold water stimulates the nerve endings of the surface of the body.</li>\n<li>Water striking the epigastrium.</li>\n<li>Cold water enters ear drums, nasal passages, pharynx and the larynx which cause stimulation of the nerve endings of the mucosa.</li>\n</ul>\n<p><strong>Secondary drowning/Post immersion-syndrome/Near drowning</strong>:</p>\n<p>It refers to a submersion victim who is resuscitated and survives for 24 hours. The patient may or may not be conscious. These patients may develop <strong>hypoxemia</strong> resulting in <strong>brain</strong> <strong>damage</strong>, <strong>electrolyte disturbances,</strong> pulmonary edema, sepsis, myocardial anoxia, etc., Death may occur from half to several hours after resuscitation in about 10-20% of people. Those <strong>who</strong> <strong>survive</strong> suffer from <strong>serious</strong> <strong>neurological</strong> <strong>damage</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Cadaveric spasm is not seen in?",
    "choices": [
      {
        "id": 1,
        "text": "Drowning"
      },
      {
        "id": 2,
        "text": "Traumatic asphyxia"
      },
      {
        "id": 3,
        "text": "Firearm suicidal wounds"
      },
      {
        "id": 4,
        "text": "Electrocution"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Cadaveric spasm</strong> cannot be observed in traumatic asphyxia as the occurrence of <strong>traumatic</strong> <strong>asphyxia</strong> is <strong>sudden</strong> and hence <strong>does not </strong>give the patient or victim time to <strong>contract</strong> <strong>his</strong> <strong>muscles</strong> during the time of death.\u00a0</p>\n<p><strong>Cadaveric spasm </strong>has been observed in the following situations<strong>:</strong></p>\n<ul>\n<li>Drowning death</li>\n<li>Brain Injury</li>\n<li>Fear or Excitement</li>\n<li>Electrocution</li>\n</ul>\n<p><strong>Perte's</strong> <strong>syndrome</strong>, also known as <strong>traumatic</strong> <strong>asphyxia</strong>, is a clinical syndrome characterized by craniocervical <strong>cyanosis</strong>, <strong>subconjunctival</strong> <strong>haemorrhage</strong>, numerous <strong>petechiae</strong>, and accompanying <strong>neurological</strong> symptoms. This syndrome manifests due to the <strong>abrupt</strong> or <strong>intense</strong> compression of the <strong>thorax</strong> or <strong>upper</strong> <strong>abdomen</strong>, or both. Frequently observed injuries encompass <strong>pulmonary</strong> <strong>contusion</strong>, <strong>hemothorax</strong>, and <strong>pneumothorax</strong>. Effective management of the related injuries is crucial for optimal treatment outcomes. The expeditious initiation of treatment with a focus on restoring adequate oxygenation and perfusion has the potential to yield a favourable prognosis. The recoveries of the patients were shown to be correlated with the severity of their injuries as well as the presence of concomitant injuries.</p>\n<p><strong>Cadaveric spasm </strong>is an <strong>antemortem</strong> change that indicates the <strong>cause</strong> and <strong>manner</strong> of death. This phenomenon is alternatively referred to as <strong>instantaneous</strong> <strong>rigor</strong> or <strong>cataleptic</strong> <strong>rigidity</strong></p>\n<p>The victims <strong>do not undergo postmortem flaccidity</strong> (unlike rigor mortis), thereby directly entering a state of <strong>instantaneous</strong> <strong>rigor</strong>. This results in <strong>muscle</strong> <strong>stiffening</strong> which indicates the victim's attitude at the time of death. Cadaveric spasm is limited to <strong>select</strong> <strong>muscles</strong> i.e., the muscles that <strong>were in a state of contraction</strong> at the time of death. The mechanism of cadaveric spasm is thought to be due to <strong>neurogenic</strong> <strong>phenomena</strong>.\u00a0</p>\n<p><strong>Predisposing factors</strong> for this postmortem change include excitement, fear, fatigue, <strong>electrocution</strong>, nervous system injury, and convulsant poisons such as strychnine. It\u00a0is a unique phenomenon that <strong>cannot</strong> <strong>be</strong> <strong>replicated</strong> by any other situation, and it is <strong>not</strong> <strong>possible</strong> to <strong>induce</strong> it through any means <strong>following</strong> the <strong>cessation</strong> <strong>of</strong> <strong>life</strong>. A <strong>significant</strong> amount of <strong>force</strong> is necessary to <strong>overcome</strong> <strong>stiffness</strong>. The phenomenon seamlessly transitions into typical rigor mortis and ceases to exist after rigor mortis subsides.The process of protein coagulation can be observed under microscopic analysis in burns, but not in cases of cadaveric spasm.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not considered a grievous hurt?",
    "choices": [
      {
        "id": 1,
        "text": "Unilateral permanent hearing loss"
      },
      {
        "id": 2,
        "text": "Emasculation"
      },
      {
        "id": 3,
        "text": "Fracture of limb"
      },
      {
        "id": 4,
        "text": "7 days admission in yellow zone of hospital"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Among the options provided, a <strong>seven</strong>-<strong>day</strong> admission in the <strong>yellow</strong> zone of the hospital is <strong>not</strong> an example of <strong>grievous</strong> <strong>hurt, </strong>but any hurt which<strong> causes the sufferer </strong>to be in severe body pain for <strong>15 days</strong> is considered to be an example of<strong> grievous hurt.</strong></p>\n<p><strong>Grievous</strong> <strong>hurt (Sec 116 BNS)</strong> is inflicted voluntarily on another person and comprises any of the eight kinds (clauses) enumerated below:</p>\n<p>Clause 1 \u2014 <strong>Emasculation</strong>.<br />Clause 2 \u2014 Permanent privation of the sight of either eye.\u00a0<br />Clause 3 \u2014 <strong>Permanent privation of the hearing of either ear.</strong><br />Clause 4 \u2014 <strong>Privation of any member or joint.</strong><br />Clause 5 \u2014 Destruction or permanent impairment of powers of any member or joint.<br />Clause 6 \u2014 Permanent disfigurement of head or face.<br />Clause 7 \u2014 Fracture or dislocation of bone or tooth.<br />Clause 8 \u2014 Any hurt that endangers life or causes the sufferer to be in severe <strong>bodily</strong> <strong>pain</strong> or unable to follow his or her ordinary pursuits<strong> for 15 days.</strong></p>\n<p><strong>Punishment for grievous hurt </strong>:</p>\n<p><strong>BNS Section 117(2)</strong> - previously, IPC 325: Punishment for voluntarily causing grievous hurt \u2013imprisonment up to seven years and fine.<br /><strong>BNS Section 118(2</strong>) - previously, IPC 326: Punishment for voluntarily causing grievous hurt by dangerous weapons or means\u2014life imprisonment or imprisonment of a minimum of one year, extendable up to ten years, and fine.</p>\n<p>Related IPC's:</p>\n<p><strong>BNS Section 115(1)</strong> - previously, IPC 321: Voluntarily causing hurt.<br /><strong>BNS Section 117(1) </strong>- previously, IPC 322: Voluntarily causing grievous hurt.<br /><strong>BNS Section 115(2)</strong> - previously, IPC 323: Punishment for voluntarily causing hurt: Imprisonment up to one year, or with a fine up to one thousand rupees or both.<br /><strong>BNS Section 118(1)</strong> - previously, IPC 324: Voluntarily causing hurt by dangerous weapons or means (3 years imprisonment) or with fine or both.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following can be used for the identification of a dead body, except?",
    "choices": [
      {
        "id": 1,
        "text": "Blood"
      },
      {
        "id": 2,
        "text": "Nail"
      },
      {
        "id": 3,
        "text": "Muscle"
      },
      {
        "id": 4,
        "text": "Teeth"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Among the options, <strong>nail</strong> is the <strong>least</strong> preferred in the identification of a <strong>dead</strong> <strong>body</strong>.\u00a0</p>\n<p><strong>Nails</strong> have been used in the identification of dead bodies, however, their use has been <strong>deemed</strong> <strong>uncommon</strong>. Skeletal <strong>muscles</strong> are resistant to degradation and are therefore more likely to <strong>persist</strong> <strong>during</strong> <strong>decomposition</strong>, thus making them <strong>useful</strong> <strong>for</strong> the <strong>identification</strong> of <strong>corpses</strong>. It is also important to note that few studies show the amount of identical loci <strong>decreases</strong> with time.</p>\n<p>Suitable samples for DNA analysis encompass several types of <strong>nucleated</strong> <strong>biological</strong> <strong>material</strong>, including but <strong>not limited </strong>to <strong>white</strong> <strong>blood</strong> <strong>cells</strong>, <strong>hair</strong> root bulb cells, and <strong>spermatozoa</strong>. In the past, a substantial quantity of samples was necessary for doing this analysis. However, the advent of the polymerase chain reaction (<strong>PCR</strong>), a technique capable of amplifying minute quantities of DNA, has enabled the <strong>identification</strong> <strong>of</strong> <strong>DNA</strong> from even the most <strong>limited</strong> <strong>samples</strong>.</p>\n<p>When obtaining samples, whether from a deceased individual, a living victim, or the accused, the <strong>size</strong> <strong>of the sample</strong> that can be collected is typically <strong>not</strong> a significant <strong>concern</strong>. The collection of samples from various locations of staining inside the scene, the deceased, the surviving victim, or the accused can provide distinct challenges. These areas may consist of <strong>minute</strong> traces of <strong>blood</strong>, <strong>semen</strong> staining, and similar substances, necessitating meticulous collection procedures to mitigate the risk of contamination.</p>\n<p><strong>Blood</strong> and <strong>hair</strong> with intact follicles are <strong>utilized</strong> in both <strong>live</strong> <strong>and</strong> <strong>deceased</strong> individuals, while samples of the spleen can be obtained during post-mortem examinations. Additionally, <strong>buccal</strong> <strong>smears</strong> can be collected from living individuals. In situations where <strong>sexual</strong> <strong>assault</strong> is a potential occurrence, or in instances of suspicious deaths, it is advisable to collect <strong>vaginal</strong>, <strong>anal</strong>, and <strong>penile</strong> swabs. In the event of a potential delay in transporting samples to the laboratory, it is recommended that the samples be subjected to <strong>freezing</strong> <strong>conditions</strong> at a temperature of -20\u00b0C or as specifically directed by the laboratory.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which chelating agent is not used in heavy metal poisoning?",
    "choices": [
      {
        "id": 1,
        "text": "British anti-Lewisite"
      },
      {
        "id": 2,
        "text": "Ethylenediaminetetraacetic acid"
      },
      {
        "id": 3,
        "text": "Pralidoxime"
      },
      {
        "id": 4,
        "text": "Penicillamine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Pralidoxime</strong> is used in <strong>organophosphate poisoning</strong> and <strong>not as a chelator</strong> in <strong>heavy metal poisoning</strong>.<br /><br />In <strong>organophosphate poisoning</strong>, <strong>oximes</strong> like <strong>pralidoxime (2-PAM)</strong> <strong>regenerates active acetylcholinesterase</strong> restoring neuromuscular transmission and relieves skeletal muscle end-plate block. It is usually used as an<strong> adjuvant to atropine</strong> which act as <strong>competitive inhibitors</strong> to counter the <strong>nicotinic and muscarinic</strong> effects of organophosphates.&nbsp;<br /><br />Pralidoxime <strong>should not be administered without concurrent atropine</strong>, in order to prevent worsening of symptoms due to <strong>transient oxime-induced acetylcholinesterase inhibition</strong>.<br /><br /><strong>Pralidoxime</strong> attaches to the <strong>anionic site</strong> of the <strong>cholinesterase</strong> enzyme, which remains unoccupied in the presence of organophosphates. It binds and forms <strong>oxime-phosphonate</strong> which <strong>diffuses away</strong>, leaving the <strong>reactivated cholinesterase</strong>.&nbsp;Pralidoxime is <strong>not an effective anti&shy;dote</strong> to <strong>carbamates</strong> like <strong>carbaryl</strong> and may <strong>potentiate its toxicity</strong>, as the&nbsp;<strong>anionic</strong>&nbsp;<strong>site</strong>&nbsp;required for attachment of oximes is<strong>&nbsp;occupied.<br /><br /></strong>Other options :&nbsp;<strong><br /><br />Option A : British anti-Lewisite (BAL) </strong>also known as<strong> Dimercaprol&nbsp;</strong>is used as an antidote for <strong>gold,&nbsp;arsenic&nbsp;(except arsine), </strong>or<strong> acute&nbsp;mercury&nbsp;poisoning (except non-alkyl mercury).</strong>&nbsp;It is also an<strong> adjunct to edetate calcium disodium </strong>in<strong> acute&nbsp;lead&nbsp;poisoning.&nbsp;&nbsp;<br /><br />Option B :&nbsp;Ethylenediaminetetraacetic acid (EDTA) is used for acute lead poisoning.&nbsp;</strong>It is&nbsp;<strong>not suitable</strong>&nbsp;for the management of&nbsp;<strong>chronic lead poisoning.&nbsp;</strong>The calcium salt of EDTA can be used in the management of heavy metal poisonings where the metal in question has a higher affinity for EDTA than calcium in vivo. Because of their&nbsp;<strong>lower affinity to EDTA, mercury and arsenic</strong>&nbsp;cannot be effectively chelated.&nbsp;</p>\n<p><strong>Option D : Penicillamine&nbsp;</strong>is used as a <strong>chelator</strong> in the treatment of <strong>mild cases</strong> of <strong>lead poisoning</strong>.&nbsp;<strong>D-penicillamine</strong>&nbsp;(Cuprimine) can also be used to treat <strong>scleroderma</strong>,&nbsp;<strong>Wilson's disease</strong>, and <strong>rheumatoid</strong> <strong>arthritis</strong>. Side effects include <strong>nephrotoxicity</strong>, <strong>hematologic</strong> <strong>derangements</strong>, and a characteristic <strong>rash</strong> that involves the neck and axillae&mdash;<strong>elastosis perforans serpiginosa</strong>.&nbsp;It is associated with <strong>membranous glomerulonephritis</strong>, <strong>drug-induced lupus</strong>, and&nbsp;<strong>myasthenia gravis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '118 Forensic Medicine Ini-Cet 2023';
        let hierarchy = ["Marrow", "PYQs", "Forensic Medicine"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>