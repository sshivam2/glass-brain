<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tremors And Involuntary Movements Mini Test - -Tmt - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2024-25
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 60-year-old man presented with gait instability and a premonition of falling while standing that faded while he walked, sat, or lay down. He doesn't have tremors elsewhere in the body. There is no history of mental illness or psychotropic drug usage. On examination, fine ripples are noted over the area of the quadriceps muscle while standing. Based on the above clinical findings, what is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Orthostatic tremor"
      },
      {
        "id": 2,
        "text": "Parkinsonism"
      },
      {
        "id": 3,
        "text": "Postural hypotension"
      },
      {
        "id": 4,
        "text": "Physiological tremor"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This<strong>\u00a0</strong>patient's history of tremors that increase on standing with relief on walking as well as <strong>ripples</strong> in the <strong>quadriceps muscles</strong> on standing makes a diagnosis of <strong>orthostatic</strong> tremor likely.</p>\n<p><strong>Orthostatic tremor </strong>is characterized by a tremor that mostly affects the lower extremities, exhibiting high frequency and low amplitude. Frequently, individuals experience symptoms of shakiness or unsteadiness <strong>while assuming an upright position </strong>and<strong> </strong>commonly express relief after transitioning to a seated or ambulatory state. Falls are often observed occurrences.</p>\n<p>The tremor can typically be detected by palpating the lower extremities while assuming an upright posture. Some authors consider this entity as a <strong>variant of essential tremor. </strong>Multiple studies have demonstrated the efficacy<strong> </strong>of<strong> Levodopa, Gabapentin </strong>and<strong> Clonazepam </strong>in the <strong>treatment</strong> of <strong>Orthostatic tremors.</strong></p>\n<p>Other options:</p>\n<p>Option B:\u00a0Degeneration of substantia nigra is seen in <strong>Parkinson's disease</strong>, also known as paralysis agitans. It shows an accumulation of synucleins. <strong>Bradykinesia</strong>, rigidity, resting tremors, and postural instability are classic features of Parkinson's disease. Lack of tremors in other regions of the body as well as the absence of bradykinesia make this diagnosis unlikely. Also, improvement of symptoms after walking (no postural instability) further helps rule out this diagnosis.</p>\n<p>Option C: <strong>Postural hypotension</strong> is unlikely as this patient does not complain of dizziness or loss of consciousness immediately after standing and not tremors that appear on standing and disappear during ambulation.</p>\n<p>Option D:<strong> Physiological tremor</strong> is typically detectable through auxiliary testing due to its <strong>minimal amplitude</strong> which is caused due to the <strong>inherent</strong> <strong>frequency</strong> of<strong> muscle stretch responses</strong>. Several metabolic conditions, such as hypoglycemia, hyperthyroidism, and ethanol withdrawal syndrome, have the potential to exacerbate physiological tremor to the extent that it becomes visibly apparent. This patient's history of tremor and increases on standing which <strong>relieves on walking</strong> is characteristic of orthostatic tremor.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not an example of a low amplitude tremor?",
    "choices": [
      {
        "id": 1,
        "text": "Physiological tremor"
      },
      {
        "id": 2,
        "text": "Essential tremor"
      },
      {
        "id": 3,
        "text": "Orthostatic tremor"
      },
      {
        "id": 4,
        "text": "Parkinsonian tremor"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Among the given options, <strong>Parkinsonian tremor</strong> is <strong>not</strong> a <strong>low amplitude</strong> tremor but a tremor with <strong>high amplitude</strong>.</p>\n<table style=\"border-collapse: collapse; width: 38.8385%; height: 156.789px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 24.2754%; height: 22.3984px;\">Low frequency</td>\n<td style=\"width: 21.9853%; height: 22.3984px;\">High frequency</td>\n<td style=\"width: 24.7334%; height: 22.3984px;\"><strong>Low Amplitude\u00a0</strong></td>\n<td style=\"width: 29.0847%; height: 22.3984px;\">High Amplitude</td>\n</tr>\n<tr style=\"height: 44.7969px;\">\n<td style=\"height: 89.5937px; width: 24.2754%;\" rowspan=\"5\">-Intentional tremor\u00a0<br />-Parkinsonian tremor</td>\n<td style=\"height: 89.5937px; width: 21.9853%;\" rowspan=\"5\">-Orthostatic tremor<br />- Essential tremor<br />- Enhanced physiologic tremor\u00a0</td>\n<td style=\"height: 44.7969px; width: 24.7334%;\" rowspan=\"5\">-Physiological tremor<br />-Orthostatic tremor<br />-Essential tremor</td>\n<td style=\"height: 44.7969px; width: 29.0847%;\" rowspan=\"5\">-Cerebellar tremor (increases when trying to reach an object)<br /><strong>-Parkinsonian tremor</strong><br />-Holmes tremor<br />-Drug-induced tremor<br />-Tremor polyneuropathy</td>\n</tr>\n<tr style=\"height: 22.3984px;\"></tr>\n<tr style=\"height: 22.3984px;\"></tr>\n<tr style=\"height: 22.3984px;\"></tr>\n<tr style=\"height: 22.3984px;\"></tr>\n</tbody>\n</table>\n<p><strong><br />Dystonic</strong>, <strong>psychogenic</strong> and <strong>cerebellar</strong> tremors have <strong>variable</strong> <strong>frequency</strong> and <strong>amplitude</strong>. <strong>Holmes's tremor</strong>\u00a0is attributed to <strong>midbrain</strong> <strong>impairment</strong> and encompasses both rest and postural tremors, characterized by a relatively <strong>low frequency</strong>.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 65-year-old man presents with a tremor in both hands that worsens while trying to eat or write something. It gets worse when he is stressed and reduces when he drinks wine. His father also had similar symptoms. He is currently being treated with low-dose hydroxychloroquine for porphyria cutanea tarda. On examination, there are no resting tremors. Which of the following drugs can be used to control this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Primidone"
      },
      {
        "id": 2,
        "text": "Levetiracetam"
      },
      {
        "id": 3,
        "text": "Propranolol"
      },
      {
        "id": 4,
        "text": "Carbamazepine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario is suggestive of<strong> essential tremors</strong>, and the most appropriate drug for this patient's condition is <strong>propranolol</strong> as he is a known case of <strong>porphyria cutanea tarda</strong> in whom <strong>primidone</strong> is <strong>contraindicated</strong>.</p>\n<p><strong>Essential tremor</strong> (ET) is the most prevalent movement disorder. Although it can appear in children, its prevalence increases in people aged over 70 years. It is characterized by high-frequency tremors (6\u201310 Hz), most commonly involving the upper extremities. These tremors are usually symmetrical and bilateral. These tremors manifest when the person is trying to do some activity and are typically made worse by stress and improved by alcohol. Approximately half the patients with ET have a positive family history.</p>\n<p>Severe ET <strong>may present as intention tremor</strong> characterized by overshoot and slow movements, indicating the <strong>cerebellar</strong> <strong>origin</strong> of this disorder.\u00a0</p>\n<p>The <strong>drugs</strong> used to treat essential tremors are as follows:</p>\n<ul>\n<li><strong>Primidone</strong> and <strong>beta blockers</strong> - standard therapy; as beta-blockers (e.g. propranolol) are contraindicated in asthma and bradycardia</li>\n<li><strong>Gabapentin</strong> and <strong>topiramate</strong>- use has not been widespread</li>\n<li><strong>Botulinum toxin</strong> injections for limb or vocal tremors - may result in muscle weakening</li>\n<li>Surgical treatments targetting the <strong>ventral-intermediate</strong> (VIM) nucleus of the thalamus - For severe and drug-resistant instances</li>\n</ul>\n<p>Note: Essential tremor can be differentiated from Parkinson's disease by the following features: This patient has bilateral tremors on trying to do voluntary activities and his handwriting has become larger. In contrast, in Parkinson's disease, tremors typically begin in one hand, would stop at the onset of voluntary action, and patients usually develop micrographia (small handwriting).</p>\n<p>The drugs used to treat essential tremors are:</p>\n<ul>\n<li>Beta-blockers:\u00a0propranolol, atenolol</li>\n<li>Anticonvulsants:\n<ul>\n<li>Primidone</li>\n<li>Gabapentine</li>\n<li>Topiramate</li>\n</ul>\n</li>\n</ul>\n<p>In severe and drug-resistant cases, surgical treatment involves targeting the <strong>ventral intermediate (VIM)\u00a0nucleus of the thalamus</strong>.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following characteristics of the Parkinsonian tremor is true?",
    "choices": [
      {
        "id": 1,
        "text": "Tremor increases during periods of REM sleep"
      },
      {
        "id": 2,
        "text": "Tremor is almost always asymmetric"
      },
      {
        "id": 3,
        "text": "Tremor improves when the patient walks"
      },
      {
        "id": 4,
        "text": "Tremor of tongue is commonly seen"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Tremor </strong>associated with <strong>Parkinson's disease (PD) </strong>is almost always <strong>asymmetric </strong>and is very important to help<strong> distinguish </strong>it f<strong>rom other kinds of tremors.</strong></p>\n<p>Parkinsonian tremors have the following characteristics:</p>\n<ul>\n<li>It is almost always <strong>asymmetric</strong></li>\n<li>Tremor has a <strong>frequency of 3-5 Hz</strong></li>\n<li>Tremor<strong> </strong>is almost always <strong>seen</strong> in the <strong>hand and forearms </strong>with<strong> rare </strong>occurrences in the<strong> feet, jaw, lips </strong>and<strong> tongue.</strong></li>\n<li>At the time of presentation is more commonly unilateral</li>\n<li>Lack of relation between the intensity of tremor and rigidity or bradykinesia.</li>\n<li>Tremor <strong>worsens</strong> as the <strong>patient walks</strong> (unlike in essential tremor)</li>\n<li>Tremor <strong>reduces during REM sleep</strong></li>\n<li>Interestingly tremors in patients with parkinsonism rarely spill any coffee contained in a cup while drinking a cup of coffee. (According to Adam and Victor's Principles of Neurology)</li>\n<li>Tremors can be associated with tremors of high frequency such as essential tremors.</li>\n</ul>\n<p>PD is characterized by the following <strong>four cardinal motor features</strong>. Note that Parkinsonism is a broad term that is used when bradykinesia, rigidity and/or tremor are present together.\u00a0</p>\n<ol>\n<li><strong>Resting</strong> <strong>tremor</strong>\u00a0</li>\n<li><strong>Asymmetrical</strong> <strong>rigidity</strong>\u00a0</li>\n<li><strong>Bradykinesia</strong></li>\n<li>Dysfunction of the gait and <strong>postural instability</strong></li>\n</ol>\n<p>Although <strong>atypical parkinsonism syndromes</strong> (such as multiple system atrophy, progressive supranuclear palsy, and corticobasal degeneration) also present with <strong>features of parkinsonism</strong>, they <strong>differ from PD</strong> in that they have a<strong> more aggressive course</strong>, the <strong>motor symptoms symmetrically involve</strong> both halves of the body, and <strong>tremors</strong> are usually <strong>absent</strong>.</p>\n<p>The <strong>non-motor manifestations</strong> of <strong>PD</strong> include:</p>\n<ul>\n<li><strong>Anosmia</strong></li>\n<li><strong>Sensory symptoms</strong> such as <strong>pain</strong></li>\n<li>Mood disorders such as <strong>depression</strong></li>\n<li>Sleep disturbances</li>\n<li>Autonomic issues: orthostatic hypotension,<strong> GI disturbances</strong>, sexual dysfunction</li>\n<li><strong>Dementia</strong></li>\n</ul>\n<p>In a patient with <strong>parkinsonian features</strong>, the presence of <strong>visual hallucinations</strong>\u00a0points to a diagnosis of <strong>dementia with Lewy bodies</strong> (DLB). DLB is characterized by the emergence of <strong>neuropsychiatric manifestations</strong> <strong>before</strong> <strong>or</strong> <strong>at the same time</strong> as motor manifestations. However, in Parkinson's disease dementia, the cognitive decline occurs many years after the motor symptoms have appeared.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 10 year old boy is brought by his mother with complaints of involuntary chin movements that increase before writing his exams which cannot be initiated or voluntarily suppressed. All other neurological findings were normal. No simultaneous involuntary jaw, facial, head, or other body movements were observed. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Motor tic"
      },
      {
        "id": 2,
        "text": "Facial myokimia"
      },
      {
        "id": 3,
        "text": "Geniospasm"
      },
      {
        "id": 4,
        "text": "Jaw tremor"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This patient with <strong>involuntary</strong> movement of the chin that is precipitated during moments of stress and cannot be voluntarily suppressed is most likely as diagnosis of <strong>geniospasm</strong>.</p>\n<p><strong>Geniospasm</strong> is an <strong>autosomal dominant</strong> disorder<strong>.</strong> It is a benign genetic condition that manifests only with <strong>chin tremors</strong> and is known by other names such as <strong>hereditary quivering of the chin</strong> and <strong>hereditary essential chin myoclonus</strong>. The presence of chin tremor can be observed in individuals diagnosed with hereditary chin tremor (HCT) during childhood, with its intensity reaching a maximum during the <strong>early stages of adulthood and </strong>tapering intensity with age.</p>\n<p>One of the primary characteristics of essential tremor (ET) is its <strong>intermittent manifestation,</strong> which is typically induced by emotional stress or worry and lasts for a duration ranging from a few seconds to several hours. The frequency range of HCT exhibits variability, spanning from <strong>2 to 11 Hz</strong>. This condition often has a <strong>non-progressive</strong> nature and lacks any enduring complications. Local injections of <strong>botulinum toxin </strong>are an<strong> effective treatment</strong> for this condition.\u00a0</p>\n<p>Other options</p>\n<p>Option A: <strong>Tics</strong> are semi-voluntary neuropsychiatric events characterized by brief rapid motor movements or vocalizations. These are typically performed in <strong>response to irresistible premonitory urges</strong>. It usually <strong>occurs following an impulse</strong> unlike in this patient where the tremors have a lack of control both during initiation and cessation.</p>\n<p>Option B:<strong> Facial myokymia</strong> has similar electromyographic patterns but is <strong>more common </strong>in patients with <strong>brain stem tumours or multiple sclerosis</strong>. Also, patients with facial myokymia have <strong>usually one side of their face affected.</strong></p>\n<p>Option D: <strong>Jaw tremor </strong>involves<strong> </strong>the<strong> masseter muscle </strong>and<strong> not the chin</strong> as in this patient<strong>. </strong>Also<strong>, </strong>this<strong> tremor is associated </strong>with<strong> other postural tremors </strong>such as <strong>tremors </strong>of the <strong>limbs </strong>and<strong> head.\u00a0</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not an example of a high frequency tremor?",
    "choices": [
      {
        "id": 1,
        "text": "Enhanced physiologic tremor"
      },
      {
        "id": 2,
        "text": "Essential tremor of the hands"
      },
      {
        "id": 3,
        "text": "Orthostatic tremor"
      },
      {
        "id": 4,
        "text": "Intentional tremor"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Among the given options, an <strong>intentional tremor </strong>is <strong>not</strong> a high-frequency\u00a0tremor but a tremor with <strong>low</strong> frequency. Essential tremors of the hands are of higher frequency but those of the <strong>lower limbs</strong> exhibit a frequency of around<strong> 3Hz.\u00a0</strong></p>\n<table style=\"border-collapse: collapse; width: 32.8494%; height: 391.07px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 0.5px;\">\n<td style=\"height: 148.688px; width: 50.1385%;\" rowspan=\"2\"><strong>Low frequency</strong>\u00a0<br /><br />-Intentional tremor\u00a0<br />-Parkinsonian tremor<strong><br /></strong></td>\n<td style=\"height: 148.688px; width: 49.8615%;\" rowspan=\"2\"><strong>High frequency</strong><br /><br />-Orthostatic tremor<br />-Essential tremor<br />-Enhanced physiologic tremor</td>\n</tr>\n<tr style=\"height: 148.188px;\"></tr>\n<tr style=\"height: 27px;\">\n<td style=\"height: 242.383px; width: 50.1385%;\" rowspan=\"2\"><strong>Low Amplitude\u00a0</strong><br /><br />-Physiological tremor<br />-Orthostatic tremor<br />-Essential tremor</td>\n<td style=\"height: 242.383px; width: 49.8615%;\" rowspan=\"2\">\u00a0<strong>High Amplitude</strong><br /><br />-Cerebellar tremor (increases when trying to reach an object)<br />-Parkinsonian tremor<br />-Holmes tremor<br />-Drug-induced tremor<br />-Tremor polyneuropathy</td>\n</tr>\n<tr style=\"height: 215.383px;\"></tr>\n</tbody>\n</table>\n<p><strong><br />Dystonic</strong>, <strong>psychogenic,</strong> and <strong>cerebellar</strong> tremors have <strong>variable</strong> <strong>frequency</strong> and <strong>amplitude</strong>.</p>\n<p><strong>Holmes's tremor</strong>\u00a0is attributed to <strong>midbrain</strong> <strong>impairment</strong> and encompasses both rest and postural tremors, characterized by a relatively <strong>low frequency</strong>. Typically, it manifests many months after the first acute incident. The condition typically exhibits a <strong>significant magnitude of amplitude </strong>and renders the affected limb(s) effectively nonfunctional. Due to its rarity, the current therapeutic approach for managing Holmes tremor involves the administration of <strong>high-dose levodopa</strong>, with dosages reaching up to<strong> 750 mg </strong>per day.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 7-month-old male child is brought to you by his mother with increasing tremors over the head, neck, and upper limbs with reduced feeding and relative inactivity. There is no history of loss of consciousness or seizures. Hyperpigmented knees and hypopigmented scalp hair were observed. Development age was 2 months in all domains. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Infantile tremor syndrome"
      },
      {
        "id": 2,
        "text": "Huntington's chorea"
      },
      {
        "id": 3,
        "text": "Glutaric aciduria"
      },
      {
        "id": 4,
        "text": "Lennox Gestaut syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This<strong> </strong>patient<strong> </strong>with<strong> increasing tremors</strong> in the<strong> </strong>head, neck and upper limb<strong> </strong>along with <strong>hyperpigmented knees </strong>and<strong> hypopigmented scalp hair </strong>suggests a<strong> </strong>diagnosis<strong> </strong>of<strong> infantile tremor syndrome.</strong></p>\n<p><strong>Infantile</strong> <strong>tremor</strong> <strong>syndrome</strong> is seen in a specific group of Indian newborns who are <strong>exclusively</strong> <strong>breastfed</strong>. These infants often exhibited symptoms between the ages of 8 and 18 months, including listlessness, developmental delay and regression, pallor, depigmented scanty hair, and hyperpigmented knuckles. Following the initial manifestation, further symptoms encompass the gradual onset of limb tremors, vocalizations resembling the sound of a bleating cry, and the adoption of a bodily posture reminiscent of a bird poised for flight. The aforementioned ailment is associated with a cobalamin deficiency and exhibits a positive response to treatment involving the administration of cobalamin and propranolol.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young man presented with symmetric weakness in both the lower limbs for 3 months. The patient also has bilateral upper limb tremors. On examination, reduced power in the proximal muscles of the lower limbs along with loss of deep tendon reflexes was noted. Suppression of tremor was elicited when loaded with a weight. Antibody testing was positive for anti\u2010neurofascin\u2010155 (NF155) antibodies.  What is the most likely cause of this patient's tremor?",
    "choices": [
      {
        "id": 1,
        "text": "Tremor polyneuropathy"
      },
      {
        "id": 2,
        "text": "Athetosis"
      },
      {
        "id": 3,
        "text": "Essential tremor"
      },
      {
        "id": 4,
        "text": "Cerebellar tremor"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is suggestive of<strong>\u00a0chronic inflammatory demyelinating polyneuropathy\u00a0</strong>(CIDP) with this patient's tremor characteristic to that of an entity known as <strong>tremor polyneuropathy.</strong></p>\n<p>Patients with polyneuropathy very commonly develop tremors which very closely simulate coarse essential or ataxic tremors. They are caused due to IgM antibodies developing against the myelin associated glycoprotein and are found among patients with CIDP and paraproteinemias. Unlike other causes of organic tremors, the tremor associated with polyneuropathy sees a reduction following the <strong>loading test</strong>. Also, antibodies <strong>positive for neurofascin-155</strong> are very <strong>closely related </strong>to tremor polyneuropathy associated with <strong>CIDP</strong>, thus making this diagnosis very likely. The tremor is characterised by a low frequency, and high amplitude with both positional and intentional components.</p>\n<p>CIDP is an <strong>autoimmune</strong> condition. It has a <strong>chronic</strong> course with an <strong>onset </strong>of <strong>&gt;9 weeks</strong> when compared with Guillain Barre syndrome (GBS) which has an acute onset. However, both CIDP and GBS have similar presenting features.</p>\n<p>The <strong>clinical features</strong> include <strong>symmetric proximal weakness.</strong>\u00a0If there is involvement of the cranial nerves,\u00a0<strong>external ophthalmoplegia</strong> may be\u00a0seen. Some patients may also present with isolated motor or sensory involvement. If sensory involvement is present it can be seen as chronic inflammatory sensory polyradiculopathy (CISP) \u00a0or distal acquired demyelinating symmetric (DADS) variants.\u00a0</p>\n<p><strong>CSF </strong>is usually <strong>acellular</strong> and shows\u00a0<strong>elevated protein </strong>levels. Presence of <strong>conduction blocks</strong> is a <strong>certain sign</strong> of an acquired demyelinating process.\u00a0Other features that may or may not be seen in <strong>nerve conduction studies</strong> are:</p>\n<ul>\n<li>conduction slowing (option B)</li>\n<li>prolonged distal latencies (option C),</li>\n<li>distal and temporal dispersion of compound muscle action potential (CMAP).</li>\n<li>axonal loss (option D) can be seen secondary to demyelination.</li>\n</ul>\n<p>In mild cases, expectant management is suitable. Treatment is initially started with<strong> IV immunoglobulins</strong>. Other options include glucocorticoids, plasmapheresis, and immunosuppressants.\u00a0</p>\n<p>Other options:</p>\n<p>Option B: <strong>Athetosis</strong> is common among patients with <strong>hepatic</strong> <strong>encephalopathy</strong> and is characterized by distinct, writhing motions, particularly evident in the fingers and limbs.</p>\n<p>Option C:<strong> Essential tremor </strong>(ET) is the most prevalent movement disorder. Although it can appear in children, its prevalence increases in people aged over 70 years. It is characterized by high-frequency tremors (6\u201310 Hz), most commonly involving the upper extremities. These tremors are usually symmetrical and bilateral. These tremors manifest when the person is trying to do some activity and are typically made worse by stress and improved by alcohol. Approximately half the patients with ET have a positive family history.\u00a0</p>\n<p>Option D: <strong>Intentional</strong> tremors are seen in cerebellar diseases and are known to increase during goal-directed activity.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The occurrence of recurrent and regular contraction of a muscle that is subjected to a quick and sustained stretch,  accurately defines which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Athetosis"
      },
      {
        "id": 2,
        "text": "Tremor"
      },
      {
        "id": 3,
        "text": "Clonus"
      },
      {
        "id": 4,
        "text": "Asterixis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Clonus</strong> is defined as the occurrence of recurrent/repetitive and regular contraction of a muscle that is subjected to a quick and sustained stretch.</p>\n<p><strong>Clonus</strong> is seen in states with<strong> high gamma motor neuron</strong> <strong>activity</strong>. It is a rhythmic oscillatory series of muscle contractions that is induced by stretching the tendon. It can be elicited in many joints but is most commonly seen in the ankle joint by suddenly dorsiflexing the foot and maintaining light upward pressure. It is seen in <strong>UMN lesions </strong>and is associated with other signs of UMN lesions like spasticity. A sustained clonus of <strong>five or more beats </strong>is considered <strong>abnormal</strong>.</p>\n<p>The management of clonus frequently revolves around <strong>addressing</strong> its underlying <strong>aetiology</strong>. In certain cases, the implementation of <strong>physical therapy</strong> with <strong>stretching exercises </strong>has been observed to<strong> mitigate occurrences of clonus</strong>. Immunosuppressive agents such as <strong>azathioprine</strong> and corticosteroids, <strong>anticonvulsants</strong> including <strong>primidone</strong>, levetiracetam and <strong>clonazepam</strong>, have demonstrated efficacy in the therapeutic management of clonus. <strong>Botulinum toxin</strong> has been employed as a means to <strong>inhibit the release of acetylcholine</strong> in the muscle, hence <strong>impeding</strong> the <strong>occurrence</strong> of rhythmic muscular contractions commonly associated with clonus.</p>\n<p>Other options\u00a0</p>\n<p>Option A: <strong>Athetosis</strong> is characterised by writhing and sinuous movements, particularly noticeable in the digits and extremities and is seen in patients with<strong> hepatic encephalopathy.</strong></p>\n<p>Option B: <strong>Tremor</strong> can be defined as involuntary motions with <strong>no intent </strong>caused by <strong>alternating</strong> contractions of <strong>opposing/antagonistic</strong> muscle groups.\u00a0</p>\n<p>Option D: <strong>Asterixis</strong> is defined as an intermittency of maintained posture in patients with <strong>hepatic encephalopathy</strong>, gravity and the inherent elasticity of muscles produce the movement which the patient attempts to correct but then overshoots leading to this movement disorder.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old man presents with a tremor that has distorted his handwriting over the past 2 months. He is a known asthmatic on a salbutamol inhaler for the past 15 years. He also underwent liver transplantation 5 months ago and is on tacrolimus. On examination, a coarse tremor is noticeable. The rest of his CNS examination is normal. What should be done to manage his tremor?",
    "choices": [
      {
        "id": 1,
        "text": "Stop inhaled salbutamol"
      },
      {
        "id": 2,
        "text": "Prescribe L-DOPA"
      },
      {
        "id": 3,
        "text": "Tacrolimus dose reduction"
      },
      {
        "id": 4,
        "text": "Prescribe trihexyphenidyl"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This patient with coarse tremors a few months after liver transplantation and who is on <strong>tacrolimus</strong> is most likely suffering from tacrolimus-induced tremors that <strong>resolve</strong> with <strong>tacrolimus dose reduction</strong>.\u00a0</p>\n<p>Although <strong>salbutamol</strong> is also known to cause tremors but is commonly seen during the <strong>first few days to weeks </strong>following salbutamol inhaltion, which later meets <strong>reduction</strong> due to <strong>tolerance</strong>. It is also important to note that <strong>salbutamol</strong> induced tremors are <strong>finer</strong> <strong>than</strong> those caused by <strong>tacrolimus</strong>.</p>\n<p><strong>Tacrolimus</strong> and cyclosporine are calcineurin inhibitors and are the common agents used for immunosuppression following <strong>liver transplantation</strong>. They are metabolized by the CYP3A enzyme. <strong>Calcineurin</strong> is a <strong>calcium/calmodulin-dependent phosphatase</strong> required for the induction of T-cell lymphokine production and proliferation. <strong>Cyclosporine</strong> is an immunomodulatory drug that<strong> inhibits calcineurin </strong>activity by forming a complex with cyclophilin, a cytoplasmic-receptor protein present in target cells, to form a cyclosporine-cyclophilin complex.</p>\n<p>This drug-receptor complex specifically and competitively binds to and inhibits calcineurin, a calcium and calmodulin-dependent phosphatase. This in turn, inhibits the translocation of a family of transcription factors (NF-AT), leading to reduced transcriptional activation of cytokine genes for interleukin (IL)-2, tumour necrosis factor (TNF)-alpha, IL-3, IL-4, CD40L, granulocyte-macrophage colony-stimulating factor, and interferon-gamma. Ultimately, the proliferation of T lymphocytes is reduced, resulting in immunomodulation.</p>\n<p>Its <strong>uses</strong> are :</p>\n<ul>\n<li>In solid organ transplantation, to treat organ rejection in kidney, liver, and heart allogeneic transplants.</li>\n<li>In patients with rheumatoid arthritis, when the disease has not adequately responded to methotrexate.</li>\n<li>It is approved to treat amyotrophic lateral sclerosis (ALS or Lou Gehrig disease) and its variants.</li>\n<li>In nephrotic syndrome, to treat focal segmental glomerulosclerosis not responding to corticosteroids.</li>\n</ul>\n<p><strong>Adverse effects</strong> of cyclosporine include a decrease in glomerular filtration rate (GFR) and metabolic disturbances like hypomagnesemia, hyperkalemia, dyslipidemia, gynecomastia, hypertrichosis; neurotoxicity in the form of convulsions. There is an increased risk of developing skin and lymphoproliferative malignancies in cyclosporine-treated psoriasis patients.</p>\n<p>Other options</p>\n<p>Option A: Tremors due to <strong>\u03b2<sub>2</sub> agonists</strong> can be both due to<strong> direct action on muscle spindle</strong> and <strong>hypokalemia. </strong>Initially, it was thought to be due to beta receptor-mediated enhancement of discharge of muscle spindles. However, recently the tremors have also been closely correlated with hypokalemia. Hence, direct action and hypokalemia can explain the tremors associated with \u03b22 agonist use, although the exact mechanism is still unknown. The tremors associated with salbutamol are known to <strong>achieve tolerance or reduction after a few days </strong>to weeks of doses and are also known to <strong>be less coarse</strong> <strong>than</strong> that of a tremor induced by <strong>tacrolimus</strong>.</p>\n<p>Option B:<strong> L-DOPA </strong>can be prescribed in patients with Parkinson's disease(PD) in whom the tremor associated is almost always <strong>asymmetric</strong> and is very important to help distinguish it from other kinds of tremors. PD is characterized by four cardinal motor features ie, resting tremor, Asymmetrical, rigidity, bradykinesia and dysfunction of the gait with postural instability.</p>\n<p>Option D: <strong>Trihexyphenidyl</strong> is an <strong>anticholinergic</strong> drug which is also prescribed in patients with Parkinson's disease.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old female presents with fine tremors of her hands for the past 6 months with associated weight loss and palpitations. Examination reveals a staring gaze, warm extremities as well and a postural tremor involving both her hands. Her tremor can be appropriately termed as?",
    "choices": [
      {
        "id": 1,
        "text": "Task specific tremor"
      },
      {
        "id": 2,
        "text": "Enhanced physiologic tremor"
      },
      {
        "id": 3,
        "text": "Essential tremor"
      },
      {
        "id": 4,
        "text": "Physiological tremor"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Based on the above clinical history the patient has <strong>hyperthyroidism, </strong>and the tremor she has is known as an<strong> enhanced physiologic tremor.</strong></p>\n<p>Enhanced physiologic tremor can be noticed in persons with <strong>normal physiological</strong> functioning during periods of <strong>heightened muscle activity</strong>, such as during <strong>exercise</strong> or <strong>shortly following it.</strong> This phenomenon is likely associated with an<strong> increase in sympathetic activity</strong>. The aforementioned condition is classified as an action tremor, characterized by its subtle nature that may not be easily discernible without the aid of magnification due to its small range of motion and rapid oscillations at a frequency of<strong> 8-12 Hz</strong> (which may be slower in infants and the elderly). It manifests bilaterally and symmetrically, affecting both hands and all fingers.</p>\n<p>This type of tremor is frequently recognized as a <strong>postural tremor</strong> and is considered to be one of the most regularly encountered forms. Patients with<strong> reflex sympathetic dystrophy</strong> have been found to exhibit a <strong>unilateral</strong> <strong>postural</strong> <strong>tremor</strong> that resembles an increased physiologic tremor. In cases where the tremor is not readily discernible, it is possible to <strong>enhance its visibility</strong> by <strong>positioning</strong> a <strong>sheet of paper</strong> atop the <strong>extended</strong> <strong>hands</strong>.</p>\n<p>Factors such as intense <strong>physical</strong> <strong>activity</strong>, <strong>tiredness</strong>, feelings of unease, heightened <strong>stress</strong> levels, excessive intake of <strong>caffeine</strong>, alcohol, valproate, lithium and medical diseases related to an accelerated metabolic rate, such as <strong>hyperthyroidism</strong>, can contribute to the heightened visibility of the Enhanced physiologic tremor.</p>\n<p>Treatment includes managing the underlying condition, however, if necessary <strong>propranolol</strong> has also been proven effective.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Task-specific tremors</strong> are usually seen when people perform during certain tasks such as while playing music or writing but are absent in other forms of work. This patient's tremor is seen both at <strong>rest</strong> and while <strong>maintaining posture</strong> which along with signs of <strong>hyperthyroidism</strong> favours this tremor to be deemed as an <strong>Enhanced</strong> <strong>physiologic</strong> <strong>tremor</strong>.</p>\n<p>Option C: <strong>Essential tremor </strong>(ET) is the most prevalent movement disorder. Although it can appear in children, its prevalence increases in people aged over 70 years. It is characterized by high-frequency tremors (6\u201310 Hz), most commonly involving the upper extremities. These tremors are usually symmetrical and bilateral. These tremors manifest when the person is trying to do some activity and are typically made worse by stress and improved by alcohol. This patient's tremor is seen both at <strong>rest</strong> and <strong>while maintaining posture</strong> which along with signs of <strong>hyperthyroidism</strong> favours this tremor to be deemed as an <strong>Enhanced</strong> <strong>physiologic</strong> <strong>tremor</strong>.</p>\n<p>Option D: <strong>Physiological tremor </strong>is typically detectable through auxiliary testing due to its minimal amplitude which is caused due to the inherent frequency of muscle stretch responses. Several metabolic conditions, such as hypoglycemia, hyperthyroidism, and ethanol withdrawal syndrome, have the potential to exacerbate physiological tremor to the extent that it becomes visibly apparent. This patient's tremor is seen both at <strong>rest</strong> and while <strong>maintaining</strong> <strong>posture</strong> which along with signs of <strong>hyperthyroidism</strong> <strong>favours</strong> this tremor to be deemed as an <strong>Enhanced</strong> <strong>physiologic</strong> <strong>tremor</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 4-year-old child on salbutamol is brought to the hospital with complaints of tremors. Which of the following effects of the drug would explain this side effect?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, and 5"
      },
      {
        "id": 2,
        "text": "2 and 4"
      },
      {
        "id": 3,
        "text": "1 and 2"
      },
      {
        "id": 4,
        "text": "3 and 5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Tremors due to\u00a0\u03b2<sub>2</sub> agonists can be both due to<strong> direct action on muscle spindle</strong> and <strong>hypokalemia.</strong></p>\n<p style=\"text-align: left;\">Initially, it was thought to be due to beta receptor-mediated enhancement of discharge of muscle spindles.\u00a0However, recently the tremors have also been closely correlated with hypokalemia. Hence both direct action and hypokalemia can explain the tremors associated with\u00a0\u03b2<sub>2</sub> agonist use, although the exact mechanism is still not known.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old man comes to you with complaints of tremors in his right hand only while playing his guitar which has progressively increased over the past few months. There were no other neurologic symptoms. He can perform his other daily chores at home with no difficulty. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Enhanced physiologic tremor"
      },
      {
        "id": 2,
        "text": "Task specific tremor"
      },
      {
        "id": 3,
        "text": "Essential tremor"
      },
      {
        "id": 4,
        "text": "Physiological tremor"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This patient's tremor which is <strong>only</strong> seen <strong>while playing the guitar</strong> and his ability to <strong>perform his daily tasks without any limitation </strong>along with a <strong>normal</strong> <strong>neurological</strong> <strong>examination</strong>, helps us diagnose this patient with<strong> task-specific tremor.</strong></p>\n<p><strong>Task-specific tremors</strong> are usually seen when people perform certain tasks such as while playing music or writing but are absent in other forms of work.</p>\n<p><strong>Primary writing tremor (</strong>PWT) is the <strong>most common </strong>task-specific tremor. The condition is characterized by an involuntary shaking of the hand specifically during the act of writing or when attempting to write. The classification of PWT is based on the temporal occurrence of the tremor, distinguishing between type-A (tremor during the act of writing) and type-B (tremor while assuming the hand position often employed for writing). Therefore, it may be concluded that type-B PWT is characterized by a tremor that is particular to certain positions rather than being only task-specific.</p>\n<p>Numerous studies have posited a potential involvement of the <strong>cerebellum</strong> in the development of PWT. Numerous instances of task-specific tremors have been documented in the literature. These include task-specific tremors observed in <strong>musicians</strong>, oro-lingual tremors only during the act of <strong>drinking</strong>,\u00a0 <strong>chin</strong> tremors solely during <strong>tooth</strong> <strong>brushing </strong>and finger tremors observed in <strong>carrom</strong> <strong>players.\u00a0</strong>There are also reports indicating that a subset of these people subsequently manifests symptoms of <strong>Parkinson's disease.\u00a0</strong></p>\n<p><strong>Treatment</strong> of patients with task-specific tremors includes <strong>propranolol</strong>, trihexylphenydyl and primidone.</p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Other options:</span></p>\n<p>Option A: <strong>Enhanced physiologic</strong> tremor, an action tremor, occurs during or shortly after exercise due to increased sympathetic activity. It features subtle, rapid oscillations at 8-12 Hz (can be slower in infants and the elderly) and affects both hands and fingers symmetrically. Often recognized as a postural tremor, it is one of the most common tremor types.</p>\n<p>Option C: <strong>Essential tremor</strong> (ET) is the most common movement disorder, especially prevalent in those over 70. It involves high-frequency tremors (6\u201310 Hz) that typically affect the upper extremities symmetrically and bilaterally. These tremors occur during activity, worsen with stress, and often improve with alcohol. It can be familial.\u00a0</p>\n<p>Option D: <strong>Physiological tremor,</strong> usually detectable only through testing due to its minimal amplitude, arises from the inherent frequency of muscle stretch responses. It can become visibly apparent when exacerbated by metabolic conditions such as hypoglycemia, hyperthyroidism, or ethanol withdrawal syndrome.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old woman with fibromyalgia on amitriptyline presents to you with sudden onset tremors in her right arm which decrease the moment you ask her to lift her left arm. What kind of tremor is she experiencing?",
    "choices": [
      {
        "id": 1,
        "text": "Intentional tremor"
      },
      {
        "id": 2,
        "text": "Drug induced tremor"
      },
      {
        "id": 3,
        "text": "Physiologic tremor"
      },
      {
        "id": 4,
        "text": "Psychogenic tremor"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This patient with <strong>fibromyalgia</strong> is most likely having a <strong>psychogenic</strong> <strong>tremor</strong> which is known to reduce in frequency and amplitude upon <strong>distracting the patient.</strong></p>\n<p>Individuals diagnosed with <strong>psychogenic</strong>/<strong>functional</strong> tremors exhibit a higher likelihood of experiencing <strong>abrupt</strong> onset, spontaneous remissions, shorter duration of tremor, and a lower incidence of familial history of tremor. Moreover, it was observed that individuals diagnosed with functional tremors exhibited a higher degree of <strong>distractibility</strong> during tasks involving <strong>alternate finger tapping</strong> and mental attention.</p>\n<p>Additionally, they displayed increased amplitude when exposed to a tuning fork, and experienced a <strong>worsening of symptoms when engaging in hyperventilation</strong>. Functional tremors have the potential to impact several regions of the body, however, it is well observed that the hands are the most frequently affected area in cases of functional tremors. The presence of tremors in various body parts, exhibiting coherence in their frequencies, serves as an indication of functional tremor.</p>\n<p>A meticulous evaluation of these characteristics can aid in differentiating functional tremor from other prevalent conditions characterized by tremors, such as essential tremor (ET) and Parkinson's disease (PD). They are found to be common among patients with major depressive disorder, fibromyalgia, irritable bowel syndrome and other psychiatric conditions.</p>\n<p>Fibromyalgia is characterized by chronic widespread <strong>musculoskeletal</strong> <strong>pain</strong> and <strong>tenderness</strong> accompanied by other non-specific somatic symptoms like fatigue and sleep disturbance, for <strong>&gt;three months</strong>.\u00a0</p>\n<p>It is more common in\u00a0<strong>females</strong>. On examination, they have tenderness in multiple soft tissue anatomical locations. Laboratory findings are normal.\u00a0</p>\n<p>Patients with fibromyalgia may have an increased prevalence of other syndromes associated with pain and fatigue, like chronic headaches, chronic fatigue syndrome, irritable bowel syndrome, interstitial cystitis/ painful bladder syndrome, and pelvic pain syndromes.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Intentional tremors</strong> are seen in<strong> cerebellar diseases </strong>and are known to <strong>increase</strong> during <strong>goal</strong>-<strong>directed</strong> <strong>activity</strong>. These tremors are not known to reduce once the patient is distracted.\u00a0</p>\n<p>Option B: <strong>Drug-induced tremors</strong> are common following consumption of drugs that belong to classes such as <strong>tricyclic antidepressants</strong>, aminophyllines, beta-2 agonists, and selective serotonin reuptake inhibitors(to name a few). These tremors are not known to reduce once the patient is distracted.\u00a0</p>\n<p>Option C:<strong> Physiological tremor</strong> is typically detectable through auxiliary testing due to its minimal amplitude which is caused due to the inherent frequency of muscle stretch responses. Several metabolic conditions, such as hypoglycemia, hyperthyroidism, and ethanol withdrawal syndrome, have the potential to exacerbate physiological tremor to the extent that it becomes visibly apparent. These tremors are <strong>not</strong> <strong>known</strong> to reduce once the patient is distracted.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old woman comes to you with tremors in her right upper limb and cervical region. During these episodes of tremors, it was noticed that she turned her head towards the right with concomitant mild generalised stiffness. Her cranial nerve examination reported no abnormal findings. However, on attempting to turn the head to the left, her tremor and stiffness improved.  What is the type of tremor she is most likely experiencing?",
    "choices": [
      {
        "id": 1,
        "text": "Intentional tremor"
      },
      {
        "id": 2,
        "text": "Psychogenic tremor"
      },
      {
        "id": 3,
        "text": "Physiologic tremor"
      },
      {
        "id": 4,
        "text": "Dystonic tremor"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The presence of tremor in a patient, accompanied by <strong>concurrent</strong> <strong>dystonia</strong> in the same limb, which <strong>persists</strong> <strong>during tremor </strong>episodes and <strong>improves</strong> when attempting to push the head to the left, is indicative of <strong>dystonic tremor</strong>.\u00a0</p>\n<p><strong>Dystonic tremor</strong> (DT) is characterized by the <strong>presence</strong> <strong>of</strong> <strong>dystonia</strong> as the primary neurological manifestation, <strong>with</strong> <strong>tremor</strong> occurring in the specific body region <strong>affected</strong> <strong>by</strong> <strong>dystonia</strong>. When a patient diagnosed with <strong>dystonia</strong> experiences a <strong>tremor</strong> in a body region that is <strong>not</strong> <strong>affected</strong> <strong>by</strong> <strong>dystonia</strong>, it is referred to as a \"tremor associated with dystonia\" (<strong>TAWD</strong>). On certain occasions, patients can experience delirium tremens (DT) in addition to withdrawal from alcohol dependence (TAWD). Although dystonia can manifest in various body parts, it is commonly observed in individuals with cervical dystonia, often presenting as head tremors.</p>\n<p>Dystonia (DT) can be <strong>mitigated</strong> or <strong>eradicated</strong> through the performance of a manoeuvre, also known as \"<strong>sensory</strong> <strong>trick</strong>\" or \"geste antagoniste.\" Additionally, when the affected body part is positioned in the direction of dystonia and the movement, tremor, or abnormal posture ceases, this is commonly referred to as the \"<strong>null point</strong>.\" On the other hand, the intensity of dystonic tremor (DT) <strong>escalates</strong> when the <strong>affected</strong> <strong>body</strong> part is <strong>deliberately</strong> <strong>positioned</strong> in opposition to the <strong>primary</strong> <strong>direction</strong> <strong>of</strong> <strong>dystonia</strong>-<strong>induced</strong> <strong>contraction</strong>. For instance, a patient experiencing right torticollis may experience an exacerbation of DT when rotating the head towards the left or attempting to sustain the primary posture of the head.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Intentional tremors</strong> are seen in<strong> cerebellar diseases </strong>and are known to <strong>increase</strong> during <strong>goal</strong>-<strong>directed</strong> <strong>activity</strong>. These tremors are<strong> not known </strong>to be <strong>associated</strong> with <strong>concomitant</strong> <strong>dystonia</strong>.</p>\n<p>Option B: Individuals diagnosed with <strong>psychogenic</strong>/functional tremors exhibit a higher likelihood of experiencing abrupt onset, spontaneous remissions, shorter duration of tremor, and a lower incidence of familial history of tremor. Moreover, it was observed that individuals diagnosed with functional tremors exhibited a higher degree of distractibility during tasks involving alternate finger tapping and mental attention. Additionally, they displayed increased amplitude when exposed to a tuning fork, and experienced a worsening of symptoms when engaging in hyperventilation.\u00a0These tremors are<strong> not known</strong> to be <strong>associated</strong> with <strong>concomitant dystonia</strong>.</p>\n<p>Option C:<strong> Physiological tremor</strong> is typically detectable through auxiliary testing due to its minimal amplitude which is caused due to the inherent frequency of muscle stretch responses. Several metabolic conditions, such as hypoglycemia, hyperthyroidism, and ethanol withdrawal syndrome, have the potential to exacerbate physiological tremor to the extent that it becomes visibly apparent.\u00a0These tremors are <strong>not</strong> <strong>known</strong> to be <strong>associated</strong> with concomitant <strong>dystonia</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The observance of increasing spillage of water while a man takes a mug of water from one bucket and pours it into another can be categorized as which type of tremor?",
    "choices": [
      {
        "id": 1,
        "text": "Resting tremor"
      },
      {
        "id": 2,
        "text": "Postural tremor"
      },
      {
        "id": 3,
        "text": "Terminal tremor"
      },
      {
        "id": 4,
        "text": "Kinetic tremor"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Increasing <strong>spillage</strong> <strong>of</strong> <strong>water</strong> while moving from one point to another is characteristic of <strong>kinetic</strong> <strong>tremor</strong>.</p>\n<p>Patients with <strong>kinetic</strong> tremors have increasing tremors throughout a <strong>goal-directed activity</strong>.\u00a0</p>\n<table style=\"border-collapse: collapse; width: 28.4029%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 33.2518%; text-align: center;\">Resting tremor</td>\n<td style=\"width: 33.2518%; text-align: center;\">Postural tremor</td>\n<td style=\"width: 33.2518%; text-align: center;\">Intention tremors</td>\n</tr>\n<tr>\n<td style=\"width: 33.2518%;\">Parkinson's disease</td>\n<td style=\"width: 33.2518%;\">Physiological\u00a0</td>\n<td style=\"width: 33.2518%;\">Trauma</td>\n</tr>\n<tr>\n<td style=\"width: 33.2518%;\">Holmes tremor</td>\n<td style=\"width: 33.2518%;\">Exaggerated physiological tremor</td>\n<td style=\"width: 33.2518%;\">Drugs or toxins</td>\n</tr>\n<tr>\n<td style=\"width: 33.2518%;\">Wilson's disease</td>\n<td style=\"width: 33.2518%;\">Orthostatic</td>\n<td style=\"width: 33.2518%;\">Diseases of cerebellar outflow (dentate nucleus or interpositus nuclei)</td>\n</tr>\n<tr>\n<td style=\"width: 33.2518%;\">Essential tremor</td>\n<td style=\"width: 33.2518%;\">Associated with peripheral neuropathy (Charcot Marie Tooth)</td>\n<td style=\"width: 33.2518%;\">\u00a0</td>\n</tr>\n</tbody>\n</table>\n<p><br />Other options:</p>\n<p>Option A: <strong>Resting</strong> <strong>tremors</strong> are tremors that occur at rest and reduce in intensity during movement. Hence, reduced spillage of water during movement of water from point A to point B.</p>\n<p>Option B: <strong>Postural</strong> <strong>tremors</strong> occur during a fixed posture against gravity. Hence, increased spillage of water while staying still and holding a glass of water.</p>\n<p>Option C: <strong>Terminal</strong> tremor occurs during the end of an activity. Hence, increased spillage of water as he or she attempts to place water on the table.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The observance of increased spillage of water as a man holds a glass of water given to him indicates which type of tremor?",
    "choices": [
      {
        "id": 1,
        "text": "Resting tremor"
      },
      {
        "id": 2,
        "text": "Kinetic tremor"
      },
      {
        "id": 3,
        "text": "Terminal tremor"
      },
      {
        "id": 4,
        "text": "Postural tremor"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Increasing spillage of water as a man holds a glass of water in his hands can be seen in <strong>postural</strong> <strong>tremors</strong>.\u00a0</p>\n<p><strong>Postural</strong> <strong>tremors</strong> occur during a fixed posture against gravity. Hence, increased spillage of water while staying still and holding a glass of water.</p>\n<table style=\"border-collapse: collapse; width: 33.9383%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 33.2574%; text-align: center;\">Resting tremor</td>\n<td style=\"width: 33.2574%; text-align: center;\">Postural tremor</td>\n<td style=\"width: 33.2574%; text-align: center;\">Intention tremors</td>\n</tr>\n<tr>\n<td style=\"width: 33.2574%;\">Parkinson's disease</td>\n<td style=\"width: 33.2574%;\">Physiological\u00a0</td>\n<td style=\"width: 33.2574%;\">Trauma</td>\n</tr>\n<tr>\n<td style=\"width: 33.2574%;\">Holmes tremor</td>\n<td style=\"width: 33.2574%;\">Exaggerated physiological tremor</td>\n<td style=\"width: 33.2574%;\">Drugs or toxins</td>\n</tr>\n<tr>\n<td style=\"width: 33.2574%;\">Wilson's disease</td>\n<td style=\"width: 33.2574%;\">Orthostatic</td>\n<td style=\"width: 33.2574%;\">Diseases of cerebellar outflow (dentate nucleus or interpositus nuclei)</td>\n</tr>\n<tr>\n<td style=\"width: 33.2574%;\">Essential tremor</td>\n<td style=\"width: 33.2574%;\">Associated with peripheral neuropathy (Charcot Marie Tooth)</td>\n<td style=\"width: 33.2574%;\">\u00a0</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Action</strong> <strong>tremors</strong> manifest during the execution of certain tasks. Action tremors can be classified into various subtypes, namely postural, kinetic, task-specific, and isometric. Action tremors are only observed at rest when they are severe.</p>\n<p><strong>Postural</strong> <strong>tremors</strong> manifest when the limbs are held in an antigravity posture, such as when the arms are extended outward. The prevalent forms of postural tremor include increased physiologic tremor and essential tremor (ET).</p>\n<p><strong>Kinetic</strong> <strong>tremor</strong> manifests during the execution of a deliberate motor action and can manifest at many stages of the movement, including its initiation, progression, or termination. One prevalent illustration is an intentional (terminal) tremor.</p>\n<p><strong>Intention</strong> <strong>tremor</strong> is a type of action tremor that is predominantly observed in individuals with <strong>cerebellar</strong> disease. The tremor manifests when a high level of precision is necessary to successfully make contact with a specific target, such as in the finger-nose-finger or toe-to-finger examination.</p>\n<p>Other options\u00a0</p>\n<p>Option A: <strong>Resting</strong> <strong>tremors</strong> are tremors that <strong>occur at rest</strong> and reduce in intensity during movement. Hence, reduced spillage of water during the movement of water from point A to point B or even holding the glass (as he is still opposing gravity).</p>\n<p>Option B: Patients with <strong>kinetic</strong> <strong>tremors</strong> have increasing tremors throughout a goal-directed activity. Increasing spillage of water while moving from one point to another is characteristic of kinetic tremor.\u00a0</p>\n<p>Option C: <strong>Terminal</strong> <strong>tremors </strong>occur during the <strong>end of an activity</strong>. Hence, increased spillage of water as he or she attempts to place water on the table.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following",
    "choices": [
      {
        "id": 1,
        "text": "A-2, B-4, C-1, D-3"
      },
      {
        "id": 2,
        "text": "A-1, B-3, C-2, D-4"
      },
      {
        "id": 3,
        "text": "A-2, B-3, C-4, D-1"
      },
      {
        "id": 4,
        "text": "A-1, B-3, C-4, D-2"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<table style=\"border-collapse: collapse; width: 32.7586%; height: 89.5936px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50.1335%; height: 22.3984px;\">Wing beating tremor</td>\n<td style=\"width: 49.9582%; height: 22.3984px;\">Wilson's disease</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50.1335%; height: 22.3984px;\">Rosenbach's sign</td>\n<td style=\"width: 49.9582%; height: 22.3984px;\">Hyperthyroidism</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50.1335%; height: 22.3984px;\">Holme's tremor</td>\n<td style=\"width: 49.9582%; height: 22.3984px;\">Midbrain damage</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50.1335%; height: 22.3984px;\">Danbury tremor</td>\n<td style=\"width: 49.9582%; height: 22.3984px;\">Mercury poisoning</td>\n</tr>\n</tbody>\n</table>\n<p>Late <strong>coarse</strong> <strong>tremors</strong> have been described as <strong>wing</strong>-<strong>beating</strong> tremors in <strong>Wilson's</strong> <strong>disease</strong></p>\n<p><strong>Rosenbach's</strong> <strong>sign</strong> is <strong>fine</strong> <strong>tremors</strong> on attempted closure of the eyelids.</p>\n<p><strong>Holmes's tremor</strong> is attributed to <strong>midbrain</strong> <strong>impairment</strong> and encompasses both rest and postural tremors, characterized by a relatively low frequency.</p>\n<p><strong>Danbury</strong> <strong>tremors</strong> are <strong>coarse</strong>, <strong>intentional</strong> tremors. The advanced condition is called Hatter's shakes/Glass blower's shakes and are seen in patients with <strong>mercuric</strong> <strong>poisoning</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 56-year-old woman presents with abnormal movements of the limbs. A lesion of the globus pallidus is suspected. Which of the following did she most likely present with?",
    "choices": [
      {
        "id": 1,
        "text": "Chorea"
      },
      {
        "id": 2,
        "text": "Athetosis"
      },
      {
        "id": 3,
        "text": "Hemiballismus"
      },
      {
        "id": 4,
        "text": "Parkinsoinism"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This woman with a<strong> lesion </strong>at the<strong> globus pallidus\u00a0</strong>most likely presented with <strong>athetosis</strong>: Slow, writhing movements of a hand/arm/the face.\u00a0</p>\n<table style=\"height: 157px;\" width=\"305\">\n<tbody>\n<tr>\n<td style=\"width: 94.34375px;\">Condition</td>\n<td style=\"width: 94.34375px;\">Site of lesion</td>\n<td style=\"width: 94.34375px;\">Description\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 94.34375px;\">Chorea</td>\n<td style=\"width: 94.34375px;\">Striatum</td>\n<td style=\"width: 94.34375px;\">\n<div class=\"page\" title=\"Page 699\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Flicking movements in the hands, face, and other parts of the body</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr>\n<td style=\"width: 94.34375px;\">Athetosis</td>\n<td style=\"width: 94.34375px;\">Globus pallidus</td>\n<td style=\"width: 94.34375px;\">\n<div class=\"page\" title=\"Page 699\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Spontaneous, continuous writhing movements of a hand, an arm, the neck, or the face</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr>\n<td style=\"width: 94.34375px;\">Hemiballusmus</td>\n<td style=\"width: 94.34375px;\">Subthalamic nucleus</td>\n<td style=\"width: 94.34375px;\">\n<div class=\"page\" title=\"Page 699\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Sudden flailing movements of an entire limb</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr>\n<td style=\"width: 94.34375px;\">Parkinsonism</td>\n<td style=\"width: 94.34375px;\">Substantia nigra</td>\n<td style=\"width: 94.34375px;\">\n<div class=\"page\" title=\"Page 699\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 699\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Severe rigidity, akinesia, and tremors</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0716efe5c2044b38b048718e1b3d387ex1280x999.JPEG"
    ]
  },
  {
    "text": "An 8-year-old girl exhibits rapid, semi-purposeful, graceful, dance-like, involuntary movements. What is this finding?",
    "choices": [
      {
        "id": 1,
        "text": "Hemiballismus"
      },
      {
        "id": 2,
        "text": "Myoclonus"
      },
      {
        "id": 3,
        "text": "Chorea"
      },
      {
        "id": 4,
        "text": "Athetosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Rapid, semi-purposeful, graceful, dance-like, involuntary movements are seen in\u00a0<strong>chorea</strong>.</p>\n<table style=\"width: 33.6661%;\">\n<tbody>\n<tr>\n<td style=\"width: 100%;\" colspan=\"2\" width=\"102\">\n<p><strong>Hyperkinetic movement disorders:</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 17.0111%;\" width=\"102\">\n<p>Tremor</p>\n</td>\n<td style=\"width: 82.9889%;\" width=\"499\">\n<p>Rhythmic oscillation of a body part due to intermittent muscle contractions</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 17.0111%;\" width=\"102\">\n<p>Dystonia</p>\n</td>\n<td style=\"width: 82.9889%;\" width=\"499\">\n<p>Involuntary, sustained or repeated muscle contractions often associated with twisting movements and abnormal posture</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 17.0111%;\" width=\"102\">\n<p>Athetosis</p>\n</td>\n<td style=\"width: 82.9889%;\" width=\"499\">\n<p>Slow, distal, writhing, involuntary movements with a propensity to affect arms and hands</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 17.0111%;\" width=\"102\">\n<p>Chorea</p>\n</td>\n<td style=\"width: 82.9889%;\" width=\"499\">\n<p>Rapid, semi-purposeful, graceful, dance-like, non patterned, involuntary movements involving distal or proximal muscle groups</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 17.0111%;\" width=\"102\">\n<p>Myoclonus</p>\n</td>\n<td style=\"width: 82.9889%;\" width=\"499\">\n<p>Sudden, brief (&lt;100ms), jerk-like arrhythmic muscle twitches</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 17.0111%;\" width=\"102\">\n<p>Tics</p>\n</td>\n<td style=\"width: 82.9889%;\" width=\"499\">\n<p>Brief, repeated, stereotyped muscle contractions that can often be suppressed for a short time</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Sydenham's chorea (also called St. Vitus's dance) is a type of chorea that is typically seen in childhood (5-15 years)\u00a0with prior exposure to group A streptococcal infection and is thought to be autoimmune in nature. It is characterized by the acute onset of choreiform movements and behavioral disturbances and is self-limiting.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Tremors And Involuntary Movements Mini Test - -Tmt';
        const quizFilename = 'tremors-and-involuntary-movements-mini-test-tmt-4269c823.html';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2024-25"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>