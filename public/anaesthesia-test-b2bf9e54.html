<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anaesthesia Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2023 - 24
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "In which of the following patients would you prefer to use an LMA for securing the airway?",
    "choices": [
      {
        "id": 1,
        "text": "A term G2P1L1 woman previously diagnosed with pre-eclampsia planned for elective Cesarean section"
      },
      {
        "id": 2,
        "text": "A 30-year-old patient to be taken up for repair of hiatus hernia"
      },
      {
        "id": 3,
        "text": "A middle-aged man with a history of diabetes diagnosed with pharyngeal abscess"
      },
      {
        "id": 4,
        "text": "A 40-year-old woman planned for laparoscopic cholecystectomy, having Mallampatti class III airway"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Laryngeal mask airway</strong> (LMA) is <strong>indicated</strong> in cases with <strong>difficult</strong> <strong>airway</strong> where endotracheal intubation is not possible or not available. It can be used as an alternative to an endotracheal tube for ventilating and oxygenating the patient.&nbsp;</p>\n<p>LMA is relatively <strong>contraindicated</strong> in conditions that are associated with increased risk of aspiration (e.g.: <strong>Hiatal</strong> <strong>hernia</strong>, <strong>pregnancy</strong>, inadequate NPO).&nbsp;LMA may protect the larynx from pharyngeal secretions but not from gastric secretions.&nbsp;The presence of a <strong>pharyngeal</strong> <strong>pathology</strong> such as an abscess or tumor, or a pharyngeal obstruction is also a relative contraindication of LMA insertion.</p>\n<p><strong>The normal anatomic position of the LMA.</strong></p>\n<p>The proximal portion of the LMA rests upon the epiglottis, whereas the distal end or, the <strong>tip</strong> extends into the pharynx at the upper end of the <strong>esophagus</strong>. The opening on the laryngeal mask overlies the laryngeal inlet.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/194b9ae9f30941af84bccaeaf3207e28x1280x1428.JPEG"
    ]
  },
  {
    "text": "You administer epidural anesthesia to a patient before surgery. Which of the following methods can you use to test the adequacy of motor block in him?",
    "choices": [
      {
        "id": 1,
        "text": "1, 3"
      },
      {
        "id": 2,
        "text": "1, 2, 3, 4"
      },
      {
        "id": 3,
        "text": "Only 3"
      },
      {
        "id": 4,
        "text": "1, 3, 5"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p style=\"text-align: justify;\"><strong>Electromyography, Modified Bromage scale,</strong> and <strong>spirometry</strong> can all be used to test the adequacy of the motor block after neuraxial anesthesia.</p>\n<p style=\"text-align: justify;\">The Modified Bromage Scale is most commonly used, but the disadvantage is that this represents only lumbosacral motor fibers.</p>\n<p style=\"text-align: justify;\"><strong class=\"ng-binding\">Modified Bromage scale</strong></p>\n<p style=\"text-align: justify;\">0: No motor block</p>\n<p style=\"text-align: justify;\">1: Inability to raise extended leg; Able to move knees and feet</p>\n<p style=\"text-align: justify;\">2: Inability to raise extended leg and move knee; Able to move feet</p>\n<p style=\"text-align: justify;\">3: Complete block of motor limb</p>\n<p style=\"text-align: justify;\"><strong>Electromyography</strong> and pulmonary function tests (<strong>spirometry</strong>) have been used to measure abdominal and thoracic motor function, but these are neither practical nor specific.</p>\n<p style=\"text-align: justify;\"><strong>Train of four ratio</strong> and <strong>bispectral index</strong> are used in monitoring a patient under <strong>general anesthesia</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 8-year-old girl child is scheduled for a tonsillectomy. Prior to endotracheal intubation, she is given IV propofol, followed by an agent, labeled \"A\" as shown below. The procedure is completed as planned and the anesthetist now administered a new drug (a gamma-cyclodextrin), labeled \"B\" in the image to reverse its effect. Read the statements given below and choose the correct statements.",
    "choices": [
      {
        "id": 1,
        "text": "Only 6 is correct"
      },
      {
        "id": 2,
        "text": "1 and.2 are correct"
      },
      {
        "id": 3,
        "text": "1,2, 4 and 6 are correct"
      },
      {
        "id": 4,
        "text": "1, 3 an 4 are correct"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given clinical scenario, <strong>a non-depolarizing agent</strong>, <strong>rocuronium</strong> (labeled <strong>\"A\"</strong> in the image) is used for induction prior to endotracheal intubation. Following the surgical procedure, a newer drug, gamma-cyclodextrin (\"<strong>B</strong>\" in the image), <strong>sugammadex</strong> is used to reverse its action.</p>\n<p>Sugammadex has the most affinity for rocuronium and has <strong>no effect</strong> on <strong>succinylcholine</strong> and\u00a0benzylisoquinoline NMBAs such as <strong>atracurium</strong>.\u00a0</p>\n<p>The graph shows the train-of-four monitoring to assess the neuromuscular block in an anesthetized patient. The fade in the graph indicates non-depolarizing neuromuscular blocking agent which is reversed by sugammadex.\u00a0</p>\n<p>Sugammadex is a novel reversal agent for <strong>rocuronium and vecuronium.</strong></p>\n<p>Sugammadex is a modified gamma-cyclodextrin that binds rocuronium and vecuronium tightly and decreases the concentration of free plasma levels.</p>\n<p><strong>A specific reversal agent for rocuronium, i.e.,\u00a0sugammadex can terminate the action of rocuronium.</strong></p>\n<p>Sugammadex is a\u00a0<strong>cyclodextrin.\u00a0</strong>It is the first selective relaxant binding agent. It exerts its reversal effect by forming tight complexes in a 1:1 ratio with\u00a0steroidal non-depolarizing agents\u00a0(<strong>rocuronium &gt; vecuronium &gt;&gt; pancuronium</strong>).Since rocuronium is a steroidal agent, it is specifically bound by sugammadex.</p>\n<p>Sugammadex is essentially <strong>eliminated unchanged</strong> via the kidneys.</p>\n<p><strong>Rocuronium </strong>at a dose of 0.6 mg/ kg intravenously is commonly used\u00a0to provide muscle relaxation during routine intubation in pediatric patients because of its <strong>faster onset</strong> and it can be administered <strong>intramuscularly</strong>. For rapid sequence induction, a higher dose (0.9-1.2 mg/kg) can be used.</p>\n<p>A disadvantage with rocuronium is its <strong>long duration of action</strong>\u00a0and the possibility of hypersensitivity reaction.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/71d856a633694cc49c845b5c73a8ae94.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "During surgery, the anesthetist notices the soda lime is nearly exhausted. And hence asks for it to be replaced with an amsorb CO2 absorber from the nearby OT. Which one of the following options represents the contents present in this new CO2 absorber?",
    "choices": [
      {
        "id": 1,
        "text": "Ca(OH)2, CaCl2, CaSO4"
      },
      {
        "id": 2,
        "text": "Ca(OH)2, NaOH, KOH"
      },
      {
        "id": 3,
        "text": "Ca(OH)2, NaOH, Ba(OH)2"
      },
      {
        "id": 4,
        "text": "Ba(OH)2, CaCl2, CaSO4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p class=\"p1\"><strong>Amsorb</strong> is a CO<span class=\"s1\">2 </span>absorbent used in rebreathing system consisting of <strong>calcium hydroxide, calcium chloride (CaCl2), calcium sulfate (CaSO4)</strong>, and polyvinylpyrrolidone added to increase hardness.</p>\n<p class=\"p1\"><strong>Advantage</strong>: It is more inert than soda-lime and baralyme and so associated with lesser degradation of anesthetics and so <strong>less carbon monoxide production.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The type of laryngoscope blade shown in the given image is:",
    "choices": [
      {
        "id": 1,
        "text": "Miller laryngoscope blade"
      },
      {
        "id": 2,
        "text": "Magill laryngoscope blade"
      },
      {
        "id": 3,
        "text": "Macintosh laryngoscope blade"
      },
      {
        "id": 4,
        "text": "McCoy laryngoscope blade"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows a Miller laryngoscopic blade.\u00a0</p>\n<p>A laryngoscope is an instrument used for examination of the larynx and facilitation of tracheal intubation. It has three components: the handle, the blade, and the light source. The Macintosh and Miller blades are the most popularly used blades.</p>\n<p><strong>Miller's </strong>blade\u00a0is a\u00a0<strong>straight blade</strong>. Its curve begins 2 inches from the tip. It is inserted using the para-glossal technique. This technique avoids contact with the maxillary incisors and provides\u00a0maximal tongue control.</p>\n<p>It is used in:</p>\n<ul>\n<li>Neonates, infants, and young children</li>\n<li>Adults with short thyromental distance and long floppy epiglottis.</li>\n</ul>\n<div class=\"page\" title=\"Page 552\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Macintosh</strong> blade is a sharply <strong>curved</strong> blade with a large flange. It is inserted in the right side of the mouth, and the flange is used to sweep the tongue to the left. The blade is advanced and positioned in the vallecula. Advantages of a curved blade include:</p>\n</div>\n</div>\n</div>\n<ul>\n<li>Greater room available for the passage for an endotracheal tube</li>\n<li>Less damage to the teeth</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/536ce741692e4563a4ae137f13a08d0f.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/94f7e038c4754c97b5e546a52508b556x1024x700.jpeg"
    ]
  },
  {
    "text": "A woman underwent transvaginal cerclage under general anesthesia. Propofol was used for induction and succinylcholine was used for anesthesia maintenance. Even after 6 hours after the procedure, there were no signs of neuromuscular function recovery. Later, her dibucaine number was found to be 20. Identify the enzyme defect for the given condition.",
    "choices": [
      {
        "id": 1,
        "text": "Acetylcholinesterase"
      },
      {
        "id": 2,
        "text": "Monoamine oxidase"
      },
      {
        "id": 3,
        "text": "Catechol-O-methyltransferase"
      },
      {
        "id": 4,
        "text": "Butyrylcholinesterase"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In the given clinical scenario of <strong>delayed recovery</strong> from a neuromuscular blockade by succinylcholine with <strong>dibucaine number 20</strong>, the defect is in<strong>&nbsp;</strong>the<strong> butyrylcholinesterase </strong>(pseudocholinesterase)<strong>&nbsp;</strong>enzyme. Dibucaine number 20 is seen in people with <strong>homozygous atypical</strong> butyrylcholinesterase which prolongs the action of succinylcholine to 4-8 hours.&nbsp;</p>\n<p><strong>Dibucaine number</strong>&nbsp;refers to the<strong>&nbsp;percentage </strong>of inhibition of<strong> pseudocholinesterase</strong>&nbsp;activity.&nbsp;Dibucaine is a local anesthetic that inhibits <strong>normal</strong> pseudocholinesterase activity by<strong> 80%</strong> but inhibits <strong>heterozygous</strong> <strong>atypical</strong> enzyme activity by&nbsp;<strong>40-60%</strong> and <strong>homozygous</strong> <strong>atypical</strong> enzyme activity by only<strong> 20%.</strong>&nbsp;Accordingly, the patient with normal pseudocholinesterase has a dibucaine number of 80, and the patients with atypical pseudocholinesterase will have a lesser dibucaine number.</p>\n<p><strong>Succinylcholine </strong>and <strong>mivacurium </strong>are metabolized by the enzyme<strong> pseudocholinesterase.</strong> Some conditions like liver disease, pregnancy, advanced age, renal failure, major burns, and oral contraceptives might lead to the minimal prolongation of neuromuscular paralysis.</p>\n<p>People with atypical pseudocholinesterase enzyme will have reduced clearance of succinylcholine and mivacurium over time, thus <strong>prolonging </strong>the <strong>recovery time</strong>. Patients with one normal and one abnormal pseudocholinesterase gene (<strong>heterozygous</strong>) will have blockade for <strong>20-30 minutes&nbsp;</strong>whereas patients with two abnormal genes (<strong>homozygous</strong>) can have blockade for up to <strong>4-8 hours</strong>.&nbsp;It is treated with continued mechanical ventilation and sedation until the muscle function comes back to normal.</p>\n<p>Other options:</p>\n<p>Option A- <strong>Acetylcholinesterase</strong> metabolizes&nbsp;<strong>acetylcholine</strong> in the synaptic space.</p>\n<p>Options B and C- <strong>Monoamine oxidase</strong> and <strong>catechol-O-methyltransferases</strong> are the enzymes that metabolize <strong>norepinephrine.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following situations should nasal cannula be avoided?",
    "choices": [
      {
        "id": 1,
        "text": "Requiring inspiratory oxygen flow rate of 45 L/min"
      },
      {
        "id": 2,
        "text": "Minute ventilation of 8 L/min"
      },
      {
        "id": 3,
        "text": "Respiratory rate at 15 breaths/min"
      },
      {
        "id": 4,
        "text": "Tidal volume less than 0.8 L"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>A <strong>nasal cannula</strong> is a <strong>low flow variable</strong> performance oxygen delivery system. It is not suited for patients requiring high FiO2 or inspiratory oxygen flow rates greater than 40 L/min for which devices like venturi mask, anaesthetic bag, air-entraining nebulizers, or high flow air oxygen systems are preferred.</p>\n<p>Indications of a nasal cannula and other low-flow oxygen delivery systems include&nbsp;</p>\n<ul>\n<li>Minute ventilation &lt; 8&ndash;10 L/min</li>\n<li>Breathing frequencies &lt; 20 breaths/min</li>\n<li>Tidal volumes (V T ) &lt; 0.8 L</li>\n<li>Normal inspiratory flow (10&ndash;30 L/min).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the oxygen delivery rate of the device shown below?",
    "choices": [
      {
        "id": 1,
        "text": "1-4 liters per minute"
      },
      {
        "id": 2,
        "text": "40-50 liters per minute"
      },
      {
        "id": 3,
        "text": "20-25 liters per minute"
      },
      {
        "id": 4,
        "text": "10-15 liters per minute"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The equipment shown in the image is a <strong>non-rebreather mask</strong>. It can give up to<strong> 10-15 liters</strong> of oxygen per minute.</p>\n<p>The non-rebreather mask is a <strong>low-flow device</strong> that can be used to <strong>deliver oxygen</strong> at <strong>higher concentrations</strong> (FiO2 80-95%). It is used in patients who are severely hypoxic but are ventilating well. It uses a <strong>reservoir bag</strong> to let the oxygen get concentrated while a <strong>one-way valve</strong> doesn't allow it to breathe in expired air.</p>\n<p><strong>Other</strong> examples of<strong> low-flow</strong> devices are:</p>\n<ul>\n<li>Nasal cannula</li>\n<li>Face mask</li>\n<li>Face tent</li>\n<li>Non-rebreather mask.</li>\n</ul>\n<p><strong>High-flow</strong> devices include:</p>\n<ul>\n<li>Venturi mask</li>\n<li>High flow nasal cannula</li>\n<li>Mechanical ventilation</li>\n</ul>\n<table style=\"height: 134px; width: 587px;\">\n<tbody>\n<tr>\n<td style=\"width: 199px;\"><strong>Oxygen delivery devices</strong></td>\n<td style=\"width: 166px;\"><strong>Flow rate (liter/min)&nbsp;</strong></td>\n</tr>\n<tr>\n<td style=\"width: 199px;\">Nasal cannula&nbsp;</td>\n<td style=\"width: 166px;\">1-6&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 199px;\">Simple face mask&nbsp;</td>\n<td style=\"width: 166px;\">6-10</td>\n</tr>\n<tr>\n<td style=\"width: 199px;\">Non-rebreathing mask</td>\n<td style=\"width: 166px;\">10-15</td>\n</tr>\n<tr>\n<td style=\"width: 199px;\">Venturi mask&nbsp;</td>\n<td style=\"width: 166px;\">2-15&nbsp;</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f75d8e1758fb4a0b8cf646e1c945c3b6.JPG"
    ],
    "explanation_images": []
  },
  {
    "text": "You are doing your first-year residency in anesthesia. In which of the following patients would you administer a higher amount of inhalational anesthetic?",
    "choices": [
      {
        "id": 1,
        "text": "3 and 4 only"
      },
      {
        "id": 2,
        "text": "1, 3 and 5 only"
      },
      {
        "id": 3,
        "text": "1, 2 and 5 only"
      },
      {
        "id": 4,
        "text": "3, 4 and 5 only"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Minimum alveolar concentration (MAC)<strong>&nbsp;increases</strong>&nbsp;in <strong>neonates</strong>, <strong>hypernatremia</strong>&nbsp;(total serum sodium &gt;145 mmol/L), and <strong>hypocalcemia </strong>(total serum calcium &lt; 8.8 mg/dL). Thus,&nbsp;<strong>1, 2, and 5&nbsp;</strong>will require a higher amount of inhalational anesthetic agents.</p>\n<p>MAC is defined as the inhaled anesthetic atmospheric pressure required to prevent movement in response to a defined noxious stimulus in 50% of subjects. MAC is <strong>unique</strong> to each inhaled anesthetic.&nbsp;</p>\n<p>It is used to express the potency of anesthetic agents. Thus, the <strong>lower the MAC</strong>, the <strong>higher the potency</strong>.&nbsp;</p>\n<p><strong>Hypotensive patients</strong>&nbsp;(blood pressure &lt; 90/60 mmHg) and <strong>patients with anemia </strong>would require a lower amount of anesthetic agents.</p>\n<p>Effect of <strong>age </strong>on MAC: MAC is the highest at <strong>6 months</strong> of age, after which it declines. After the age of 40, MAC reduces by ~6% per decade.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the range of value of Bispectral index (BIS) for a patient who is under general anesthesia?",
    "choices": [
      {
        "id": 1,
        "text": "20-40"
      },
      {
        "id": 2,
        "text": "40-60"
      },
      {
        "id": 3,
        "text": "60-80"
      },
      {
        "id": 4,
        "text": "80-100"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The Bispectral index value range of <strong>40-60</strong> is seen in a patient under <strong>general anesthesia</strong>.\u00a0</p>\n<p>The bispectral index (BIS) is an empirically derived scale that helps to <strong>monitor </strong>the<strong> depth of anesthesia</strong> and <strong>prevent intraoperative awareness</strong>. It processes the EEG and provides an index value between <strong>0 </strong>to<strong> 100</strong> that indicates the patient\u2019s level of consciousness.</p>\n<p>Bispectral index value range:\u00a0</p>\n<ul>\n<li><strong>100</strong> - <strong>Awake </strong>and<strong> response</strong> to normal voice present</li>\n<li>80 - Light/moderate sedation (May respond to loud commands or mild prodding/shaking)</li>\n<li><strong>60</strong> - <strong>General anesthesia</strong> (Low probability of explicit recall, Unresponsive to verbal stimulus)</li>\n<li>40 - Deep hypnotic state</li>\n<li>20 - Burst suppression</li>\n<li><strong>0 </strong>- <strong>Flatline\u00a0</strong><strong>EEG</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are posted as a junior resident in the Emergency Medicine department, where you have to resuscitate an 11-month-old infant who is not breathing and you cannot get the pulse. According to the AHA 2020 guidelines for the pediatric basic and advanced life support, you would be correct to perform all of the following steps except:",
    "choices": [
      {
        "id": 1,
        "text": "Administer  at least 20-30 breaths/min"
      },
      {
        "id": 2,
        "text": "Use a cuffed endotracheal tube for intubating this child"
      },
      {
        "id": 3,
        "text": "Apply cricoid pressure  during endotracheal intubation"
      },
      {
        "id": 4,
        "text": "Administer the initial dose of epinephrine within 5 minutes from the start of chest compressions"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>According to the AHA 2020 guidelines, routine use of cricoid pressure is <strong>not</strong> recommended during the endotracheal intubation of pediatric patients.</p>\n<p>It is reasonable to choose <strong>cuffed ETT</strong>s over uncuffed ETTs for intubating infants and children. When a cuffed ETT is used, attention should be paid to tube size, position, and cuff inflation pressure (usually &lt;20-25 cm H2O).</p>\n<p>For infants and children with a pulse but an absent or inadequate respiratory effort, it is reasonable to give 1 breath every 2 to 3 seconds <strong>(20-30 breaths/min)</strong>. For pediatric patients in any setting, it is reasonable to administer the<strong> initial dose of epinephrine within 5 minutes</strong> from the start of chest compressions.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following devices is Murphy's eye seen?",
    "choices": [
      {
        "id": 1,
        "text": "Nasopharyngeal airway"
      },
      {
        "id": 2,
        "text": "Laryngoscope"
      },
      {
        "id": 3,
        "text": "Bronchoscope"
      },
      {
        "id": 4,
        "text": "Endotracheal tube"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Murphy's eye is seen in the <strong>endotracheal tube (ETT).</strong></p>\n<p><strong>Murphy's eye</strong> refers to the <strong>distal opening</strong> in the side wall of the ETT<strong>.</strong></p>\n<p>If the distal end of the lumen of the tube is blocked by secretions, Murphy's eye serves to provide <strong>an alternate route for ventilation.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3ca9b5f3a06f4027b9626096e9c988f7x1280x1026.JPEG"
    ]
  },
  {
    "text": "A young male patient was given regional block with 0.25% bupivacaine for a minor surgical procedure. Shortly after the injection, the patient suddenly became unresponsive and the pulse was not recordable. Which of the following would be the best course of management for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "CPR with 20% intralipid"
      },
      {
        "id": 2,
        "text": "CPR with sodium bicarbonate"
      },
      {
        "id": 3,
        "text": "CPR with dobutamine"
      },
      {
        "id": 4,
        "text": "CPR with calcium"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical picture of an unresponsive patient with an absent pulse following bupivacaine administration is most likely due to <strong>bupivacaine-induced cardiotoxicity</strong> resulting from&nbsp;accidental intravascular injection&nbsp;of&nbsp;local anesthetic.&nbsp;The best course of management in this scenario would be administering <strong>CPR (cardiopulmonary resuscitation)</strong>, along&nbsp;with a&nbsp;<strong>20% intralipid injection.</strong></p>\n<p>Bupivacaine is a long-acting local anesthetic that is the most <strong>cardiotoxic</strong> among the local anesthetics. It depresses the rapid phase of depolarization in Purkinje fibers and ventricular muscle&nbsp;due to a decreased availability of fast sodium channels in cardiac membranes. This reduced rate of depolarization <strong>depresses myocardial contractility.</strong> Hence, bupivacaine is a potent cardio depressant.</p>\n<p>Cardio-vascular effects of bupivacaine-induced toxicity are as follows:</p>\n<ul>\n<li>Left ventricular depression</li>\n<li>Atrioventricular heart block</li>\n<li>Ventricular arrhythmias and ventricular fibrillation</li>\n<li>Sinus bradycardia can lead to cardiac arrest</li>\n</ul>\n<p>Initial management includes immediate initiation of<strong> cardiopulmonary resuscitation</strong> (CPR) and <strong>defibrillation</strong> as per the <strong>advanced cardiac life support</strong> (ACLS) algorithm.</p>\n<p>Following CPR, <strong>intralipid therapy</strong> is initiated. Its mechanism is explained by the<strong> lipid sink theory</strong> which states lipophilic drugs (bupivacaine) are&nbsp;absorbed into the lipid emulsion of the plasma, hence, removed from tissues affected by toxicity.</p>\n<p>A rapid bolus of<strong> intralipid 20% IV</strong> (1.5 mL/kg) is administered without delay, followed by an infusion of 0.25 mL/kg/min. The infusion should be given continuously for at least 10 minutes after hemodynamic stability is achieved.&nbsp;</p>\n<p>Local anesthesia systemic toxicity (LAST) can also affect the central nervous system (CNS), which is&nbsp;more susceptible to local anesthetic action as compared to the cardiovascular system. Dizziness, tinnitus, and disorientation are the initial symptoms. Shivering, muscular twitching, and tremors follow. <strong>Tonic-clonic seizures</strong> occur. Finally, respiratory depression can lead to respiratory arrest.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the maneuver being performed in the given image?",
    "choices": [
      {
        "id": 1,
        "text": "Jaw thrust"
      },
      {
        "id": 2,
        "text": "Head-tilt chin-lift"
      },
      {
        "id": 3,
        "text": "Head extension"
      },
      {
        "id": 4,
        "text": "In-line manual stabilization"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The maneuver performed in the given image is\u00a0<strong>jaw-thrust</strong>.<strong> </strong>It is an<strong>\u00a0</strong>important technique in emergency <strong>airway management</strong> to open up the airway, particularly in patients with a <strong>cervical spine injury</strong>.</p>\n<p>The airway is usually obstructed by posterior displacement of the tongue or epiglottis. The <strong>Jaw-thrust</strong> maneuver <strong>moves</strong> the <strong>tongue</strong> <strong>anteriorly</strong> with the mandible, <strong>reducing the obstruction</strong> of the airway by the tongue. Both hands of the clinician are placed on either side of the patient\u2019s head and the <strong>angles of the jaw </strong>are <strong>grasped and lifted</strong>. It can be <strong>performed </strong>in a patient with <strong>cervical injury</strong> but caution must be followed <strong>to not hyperextend the neck</strong>.</p>\n<p>The sequence of BLS is\u00a0<strong>circulation</strong> (chest compression), <strong>airway</strong>, and then <strong>breathing</strong> as per the AHA 2020 guidelines.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/65fada7546554702bf0ccbe7504e2420.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7339e1fa13354a7aafc600098c9b06afx1024x768.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3ffe39d3208e4135ab914887307e7d76x720x709.GIF",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ffdcde8992564ca09569afacc3ec6b82x978x724.PNG"
    ]
  },
  {
    "text": "MAC value of an inhaled anesthetic is a measure of_____",
    "choices": [
      {
        "id": 1,
        "text": "Duration of action"
      },
      {
        "id": 2,
        "text": "Potency"
      },
      {
        "id": 3,
        "text": "Speed of onset"
      },
      {
        "id": 4,
        "text": "Speed of recovery"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>MAC (minimum alveolar concentration) value of an inhaled anesthetic is a measure of <strong>potency</strong> of the anesthetic agent.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/78a39ca94bcf4742ba7e9cb1afd9e298x508x81.PNG"
    ]
  },
  {
    "text": "N2O is not a suitable agent for use all of the following patients except:",
    "choices": [
      {
        "id": 1,
        "text": "A 42 year old RTA victim who is found to have pneumocephalus on CT scan"
      },
      {
        "id": 2,
        "text": "A 27 year old female with a low pain tolerance who is very anxious about the dental procedure she is set to undergo"
      },
      {
        "id": 3,
        "text": "A 31 year old female who is set to undergo a tympanoplasty"
      },
      {
        "id": 4,
        "text": "A 39 year old male with acute intestinal obstruction and bowel distension"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A 27-year-old female with a low pain tolerance who is very anxious about the dental procedure she is set to undergo would be a suitable candidate for use of N2O</p>\n<p><strong>Cases in which nitrous oxide is contraindicated:\u00a0</strong></p>\n<ul>\n<li>venous or arterial air embolism</li>\n<li>pneumothorax,</li>\n<li><strong>acute intestinal obstruction with bowel distention,</strong></li>\n<li>intracranial air (<strong>pneumocephalus</strong> following dural closure or pneumoencephalography),</li>\n<li>pulmonary air cysts,</li>\n<li>intraocular air bubbles,</li>\n<li><strong>tympanic membrane grafting</strong></li>\n</ul>\n<p>Nitrous oxide is an inhalational anaesthetic agent that is used predominantly as an adjuvant during inhalational induction of general anaesthesia.\u00a0</p>\n<p><strong>Typical clinical uses include:</strong></p>\n<p>Induction - It is used as an adjuvant because of the <strong>low solubility in blood</strong>. Due to this, the rate of rise of alveolar concentration (low blood:gas partition coefficient) occurs very rapidly which makes it suitable for this purpose. It has a <strong>low potency</strong> (MAC value of 104) which makes in unsuitable for use as a sole anaesthetic agent</p>\n<p>Maintenance - It can be used for maintenance of anaesthesia because it is cost-effective and the dose of other drugs used in combination can be lowered appropriately</p>\n<p>Sedation - It may be used for short procedures'</p>\n<p>\u00a0<strong>Advantages of N20:</strong></p>\n<ul>\n<li>It is a sweet-smelling gas that is not pungent and does not cause airway irritation</li>\n<li>Very low blood: gas partition coefficient</li>\n<li>Increased speed of anaesthetic onset and offset when used in combination with other agents which is called the second-gas effect</li>\n<li>Analgesic and anxiolytic properties makes it ideal for induction</li>\n<li>No major effects on haemodynamics</li>\n<li>Low cost\u00a0</li>\n</ul>\n<p><strong>Adverse effects and disadvantages:</strong></p>\n<ul>\n<li>Very low potency</li>\n<li>Ability to diffuse into air-filled cavities to displace nitrogen</li>\n<li>Transient diffusion hypoxia \u00a0at low inspired oxygen concentrations</li>\n<li>Myocardial depression, sympathetic nervous system stimulation and mildly increased pulmonary vascular resistance.</li>\n<li>Inactivation of Vitamin B12 which leads to inhibition of methionine synthetase activity</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Effective CPR includes:",
    "choices": [
      {
        "id": 1,
        "text": "A, B, C, and D"
      },
      {
        "id": 2,
        "text": "A, B, and D"
      },
      {
        "id": 3,
        "text": "B, C, and D"
      },
      {
        "id": 4,
        "text": "A and B only"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The ideal rescue breath rate for adults is 10 breaths/min, while in infants and children up to puberty it is 12-20 breaths/min. As the person's age group is not specified in the question, assuming an adult, statement A is incorrect, while B, C, and D are correct.</p>\n<p>Effective chest compression in <strong>adults</strong>:</p>\n<ul>\n<li>Provide <strong>100-120 compressions per minute</strong> (30 compressions for every 15-18 sec).</li>\n<li>Place your arms, one over the other in the midline, on the lower 1/3rd of the patient's sternum, and lock your arms.</li>\n<li>Use both arms to press the chest to a depth of<strong> 5-6 cm</strong>\u00a0(2 - 2.4 inches)or more.</li>\n<li>Press hard and fast</li>\n<li>Allow for <strong>full chest recoil</strong> after every compression.</li>\n</ul>\n<p>Effective chest compressions in a<strong> child older than 1 year and up to puberty:</strong></p>\n<ul>\n<li>The compression rate is 100 - 120/min\u00a0 (30 compressions for every 15-18 sec).</li>\n<li><strong>One or both palms</strong> are placed in the midline.</li>\n<li>Depth of compression is <strong>2 inches.</strong></li>\n<li>Press hard and fast</li>\n<li>Allow for full chest recoil after every compression.</li>\n</ul>\n<p>Effective chest compressions in<strong> infants (&lt;1 year):</strong></p>\n<ul>\n<li>100 to 120 compressions per minute (30 compressions for every 15-18 sec).</li>\n<li><strong>One provider: Place two fingers</strong>, one between the nipple line and the other 1 cm below.</li>\n<li><strong>Two providers:</strong> Encircle the infant's torso with both hands, with<strong> both thumbs pointing cephalic</strong>,\u00a0positioned 1cm below the nipples over the sternum.\u00a0</li>\n<li>Depth of compressions should be\u00a0at least <strong>1.5 inches or 1/3 the depth</strong> of the infant\u2019s chest.</li>\n<li>Press hard and fast</li>\n<li>Allow for full chest recoil after every compression.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old man was posted for bronchoscopy under procedural sedation. After administration of anesthetic drugs, he developed chest wall rigidity and ineffective spontaneous ventilation. Attempts at manual ventilation were unsuccessful due to the non-compliant chest wall. Opioid most commonly implicated with this condition is?",
    "choices": [
      {
        "id": 1,
        "text": "Morphine"
      },
      {
        "id": 2,
        "text": "Fentanyl"
      },
      {
        "id": 3,
        "text": "Pethidine"
      },
      {
        "id": 4,
        "text": "Tramadol"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Chest wall rigidity and ineffective ventilation is a classic presentation of '<strong>wooden chest syndrome</strong>'. This opioid-induced muscle rigidity is most commonly seen with the use of <strong>fentanyl</strong> and its congeners (alfentanil, sufentanil, and remifentanil).</p>\n<p>Risk factors for wooden chest syndrome:</p>\n<ul>\n<li>Rapid administration of a large dose of fentanyl</li>\n<li>Concomitant\u00a0use of nitrous oxide</li>\n<li>Old age</li>\n</ul>\n<p>The clinical presentation can vary from mild hoarseness to chest wall rigidity severe enough to prevent adequate bag-and-mask ventilation.</p>\n<p>Management of wooden chest syndrome:</p>\n<ul>\n<li>Use of short-acting neuromuscular blockade and ventilatory support</li>\n<li>Reversal of the effects of fentanyl with naloxone</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old male with a history of myocardial infarction two months back has been planned for elective cholecystectomy because of cholelithiasis. During his preoperative evaluation, he has an ejection fraction of 40%. The following image shows an assessment of his airway. He would be classified as_________",
    "choices": [
      {
        "id": 1,
        "text": "ASA PS 3, Grade 2 Mallampati"
      },
      {
        "id": 2,
        "text": "ASA PS 4, Grade 3 Mallamapati"
      },
      {
        "id": 3,
        "text": "ASA PS 2, Grade 2 Mallampati"
      },
      {
        "id": 4,
        "text": "ASA PS 5, Grade 3 Mallampati"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This patient, who is about to undergo an elective cholecystectomy can be classified as <strong>ASA PS 4</strong> with an airway assessment <strong>grade 3</strong> as per Mallampati classification.</p>\n<p>He has a <strong>recent history of MI</strong> <strong>two months back</strong> and <strong>severe reduction</strong> in <strong>ejection fraction (40%)</strong>, which together puts the patient under Physical Status 4 as per American Society of Anaesthesiologist classification of patients.</p>\n<p>In the given image of airway assessment, only the base of the uvula, soft palate, and the hard palate can be seen. Hence, grade 3 as per the modified Mallampati classification given by Samsoon and Young.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e7043d29a273452490437193fddb2028.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 26-year-old term primigravida is taken to the operation theatre for an emergency cesarean section due to sudden fetal distress. The anaesthetist wants to prevent chances of pulmonary aspiration and decides to intubate using rapid sequence intubation. Which of the following steps is not performed in this technique?",
    "choices": [
      {
        "id": 1,
        "text": "Preoxygenation"
      },
      {
        "id": 2,
        "text": "Cricoid pressure"
      },
      {
        "id": 3,
        "text": "Bag\u00a0and mask ventilation"
      },
      {
        "id": 4,
        "text": "Propofol infusion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Bag and mask ventilation is <strong>avoided</strong> in rapid sequence intubation because it leads to <strong>stomach</strong> <strong>inflation</strong> and increases the risk of<strong> aspiration</strong>.<br /><strong><br /></strong><strong>Indications of Rapid sequence intubation:</strong></p>\n<p>RSI is done when the patient is at increased risk of pulmonary aspiration&nbsp;as in:</p>\n<ul>\n<li aria-level=\"1\"><strong>pregnancy</strong></li>\n<li aria-level=\"1\">full stomach</li>\n<li aria-level=\"1\">intestinal obstruction</li>\n<li aria-level=\"1\">hiatus hernia</li>\n<li aria-level=\"1\">encephalopathy</li>\n<li aria-level=\"1\">morbid obesity</li>\n<li aria-level=\"1\">diabetic gastroparesis.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/431763442d4248af822e1dfbf43f4484x1280x2171.JPEG"
    ]
  },
  {
    "text": "A 60-year-old patient who is a  known case of diabetes mellitus with an HbA1c value of 8.8% has been posted for surgery after pre-anesthetic evaluation. Which of the following is used for the physical status classification of the patient during the pre-anesthetic evaluation?",
    "choices": [
      {
        "id": 1,
        "text": "Thyromental distance"
      },
      {
        "id": 2,
        "text": "Mallampati classification"
      },
      {
        "id": 3,
        "text": "ASA classification"
      },
      {
        "id": 4,
        "text": "Neck circumference"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>American Society of Anesthesiologists classification</strong> (ASA-PS) is used to classify physical status.</p>\n<p>An integral part of the pre-anesthetic evaluation is assessing a patient's risk for undergoing anesthesia and surgery. This helps the anesthetist make <strong>informed clinical decisions</strong> and helps the <strong>patient</strong> <strong>understand</strong> their <strong>risks</strong>.\u00a0</p>\n<p>After classifying patients based on this risk assessment, those who require <strong>more intensive postoperative monitoring</strong> can be identified. In addition, patients who are at <strong>high risk</strong> for <strong>complications</strong> can be <strong>identified</strong> and <strong>alternative interventions</strong> considered.\u00a0</p>\n<p>The ASA-PS is the most commonly used risk assessment. However, it is important to note that it describes only the <strong>patient's preoperative status</strong> and not the risks associated with the specific procedure that the patient will undergo.\u00a0</p>\n<p><strong>Thyromental distance</strong> (Option A), <strong>Mallampati classification</strong> (Option B), and <strong>neck circumference</strong> (Option D) are used to assess difficult airways.\u00a0</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An ICU patient who is dependant on oxygen support requires an MRI. What material is used to build the medical gas cylinder which can be used in this scenario?",
    "choices": [
      {
        "id": 1,
        "text": "Stainless steel"
      },
      {
        "id": 2,
        "text": "Molybdenum steel"
      },
      {
        "id": 3,
        "text": "Aluminium"
      },
      {
        "id": 4,
        "text": "Hard plastic"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>MRI compatible</strong> medical gas cylinders are made of <strong>aluminium,&nbsp;</strong>while<strong>&nbsp;</strong>most medical gas cylinders are constructed of molybdenum steel.</p>\n<p>The cylinders are produced in various sizes designated by a capital letter code.</p>\n<ul>\n<li>Size A is the smallest.</li>\n<li>Size H is the largest.</li>\n<li><strong>Size E</strong> is the cylinder <strong>most commonly used</strong> in anesthesia machines, for patient transport, and resuscitation, followed by Size D.&nbsp;</li>\n<li>Size J is commonly used for cylinder manifold systems for central supply.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old patient who is under the support of a mechanical ventilator in ICU is found to be improving and is planned to be weaned off from ventilatory support. As an anesthetist, you plan to give spontaneous breathing trials using a T-piece. All of the following is a pre-requisite for weaning off except",
    "choices": [
      {
        "id": 1,
        "text": "Ability to initiate spontaneous breaths"
      },
      {
        "id": 2,
        "text": "Rapid shallow breathing index of > 120"
      },
      {
        "id": 3,
        "text": "Vital capacity >10 ml/ kg body weight"
      },
      {
        "id": 4,
        "text": "Minute ventilation volume of 8-10 L/min"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span data-preserver-spaces=\"true\">Rapid shallow breathing index should be\u00a0<strong>&lt; 105 </strong>to\u00a0wean off a patient from a mechanical ventilator.</span></p>\n<p><span data-preserver-spaces=\"true\">Tidal volume is kept ideally at 4-6 ml/kg body weight. A value more than this will cause lung injury.</span></p>\n<p><span data-preserver-spaces=\"true\">A patient on mechanical ventilation should be tried to wean off when he can</span><strong><span data-preserver-spaces=\"true\">\u00a0breathe spontaneously</span></strong><span data-preserver-spaces=\"true\">\u00a0and is hemodynamically stable with adequate arterial oxygen saturation.</span></p>\n<p><span data-preserver-spaces=\"true\">Additional criteria include,</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Inspiratory pressure: -20-30cm H2O</span></li>\n<li><span data-preserver-spaces=\"true\">Tidal volume: 4-6ml/kg</span></li>\n<li><strong><span data-preserver-spaces=\"true\">Vital capacity: &gt;10 mL/kg</span></strong></li>\n<li><strong><span data-preserver-spaces=\"true\">Minute ventilation: &lt;10 L/min</span></strong></li>\n<li><strong><span data-preserver-spaces=\"true\">Rapid shallow breathing index(RSBI): &lt;105</span></strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 47-year-old woman was brought to the casualty in an unconscious state after having suddenly collapsed. As there was no pulse, cardiopulmonary resuscitation was started and the monitor showed the following rhythm. What is the next step?",
    "choices": [
      {
        "id": 1,
        "text": "Defibrillation"
      },
      {
        "id": 2,
        "text": "Synchronized cardioversion"
      },
      {
        "id": 3,
        "text": "1 mg epinephrine IV"
      },
      {
        "id": 4,
        "text": "0.5 mg atropine IV"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient has an organized, apparently<strong> normal ECG without a pulse&nbsp;</strong>- i.e the patient has <strong>pulseless electrical activity</strong> (PEA). A pulseless electrical activity involves a heterogeneous group of cardiac rhythms, all without a pulse.</p>\n<p>The immediate treatment for this is giving <strong>chest compressions </strong>and<strong> 1 mg epinephrine</strong> at the <strong>earliest</strong> until definitive therapy to the cause can be instituted.</p>\n<p>It is essential to rule out the reversible causes of cardiac arrest because the treatment for each of them is different and PEA is likely to persist until the cause is treated.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/afcb5b8322cc4db9b71de1dcc76b45ee.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is incorrect regarding Bain circuit?",
    "choices": [
      {
        "id": 1,
        "text": "Fresh gas enters the circuit near the patient end"
      },
      {
        "id": 2,
        "text": "Adjustable pressure limiting (APL) valve is located away from the patient"
      },
      {
        "id": 3,
        "text": "It does not have a reservoir bag"
      },
      {
        "id": 4,
        "text": "It has corrugated tubing"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Bain</strong> circuit <strong>has</strong> a <strong>reservoir bag</strong>. <strong>Ayre's T-piece lacks</strong> a reservoir bag.</p>\n<p><strong>Components of Mapleson's system are:</strong></p>\n<ul>\n<li>Breathing tube</li>\n<li>Fresh gas inlet</li>\n<li>Adjustable pressure limiting (APL) valve&nbsp;</li>\n<li>Reservoir bag</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fef826a4c5674bf8b3594b62e80b75eax1280x986.JPEG"
    ]
  },
  {
    "text": "A 48-year-old male was planned for an elective open inguinal hernia repair. The patient also had a history of heart surgery 8 months back with the placement of a drug-eluting stent and currently on dual antiplatelet therapy. When should this anti-platelets be stopped before the current elective surgery?",
    "choices": [
      {
        "id": 1,
        "text": "Stopped 2 weeks before surgery"
      },
      {
        "id": 2,
        "text": "Stopped 1 week before surgery"
      },
      {
        "id": 3,
        "text": "Stopped 1 day before surgery"
      },
      {
        "id": 4,
        "text": "Need not to be stopped"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The antiplatelets are not be stopped in patients with <strong>d</strong><strong>rug-eluting stents</strong> until they have completed <strong>12 months</strong> of dual antiplatelet therapy.</p>\n<p>Similarly, the antiplatelets are not discontinued in the patients with<strong> bare-metal stents</strong>\u00a0until they have completed <strong>1 month</strong> of dual antiplatelet therapy.</p>\n<p>Note:</p>\n<table>\n<tbody>\n<tr>\n<td><strong>Antiplatelets</strong></td>\n<td><strong>Waiting period</strong></td>\n</tr>\n<tr>\n<td>Ticlopidine</td>\n<td>14 days</td>\n</tr>\n<tr>\n<td>Clopidogrel</td>\n<td>7 days</td>\n</tr>\n<tr>\n<td>Abciximab</td>\n<td>48 hour</td>\n</tr>\n<tr>\n<td>Eptifibatide</td>\n<td>8 hour</td>\n</tr>\n</tbody>\n</table>\n<div class=\"layoutArea\">\u00a0</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a low potency local anesthetic?",
    "choices": [
      {
        "id": 1,
        "text": "Bupivacaine"
      },
      {
        "id": 2,
        "text": "Procaine"
      },
      {
        "id": 3,
        "text": "Tetracaine"
      },
      {
        "id": 4,
        "text": "Etidocaine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The potency of procaine is <strong>low.</strong></p>\n<p>Potency depends on hydrophobicity. Hydrophobicity can be increased by the addition of alkyl groups to the molecule.</p>\n<p>Tetracaine, bupivacaine, etidocaine are highly potent LA.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a child with difficult intravenous cannulation, an emergency intraosseous infusion is made through the tibia. What is the ideal site for inserting the needle in this tibial intraosseous infusion?",
    "choices": [
      {
        "id": 1,
        "text": "Below the tibial tuberosity at a 45\u00b0 angle towards the epiphyseal plate"
      },
      {
        "id": 2,
        "text": "Below the tibial tuberosity at a 45\u00b0 angle away from epiphyseal plate"
      },
      {
        "id": 3,
        "text": "Above the tibial tuberosity at a 45\u00b0 angle towards the epiphyseal plate"
      },
      {
        "id": 4,
        "text": "Above the tibial tuberosity at a 45\u00b0 angle away from epiphyseal plate"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In tibial intraosseous infusion, a needle is\u00a0inserted <strong>2\u20133 cm</strong> <strong>below</strong> the <strong>tibial tuberosity</strong> at a <strong>45\u00b0 angle away </strong>from the<strong> epiphyseal plate</strong>.</p>\n<p><strong>Intraosseous access</strong> involves placing a <strong>catheter</strong> into the <strong>marrow venous plexus</strong> and administering crystalloids, colloids, drugs and blood which leads to rapid and reliable absorption into the systemic circulation. It provides <strong>emergency access</strong> to the venous circulation in pediatric patients by way of the large medullary venous channels. The needle is directed <strong>away</strong> from the <strong>epiphyseal</strong> plate to minimize the risk of injury.</p>\n<p class=\"p1\">The disadvantage of this route is the risk of <strong>osteomyelitis, compartment syndrome,</strong> and bone marrow or fat <strong>embolism.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 43-year-old male patient is being evaluated for sweating, palpitations, and pallor that occur a few times a day. He was diagnosed with pheochromocytoma and planned for surgery. Choose the incorrect statement regarding anesthesia for this patient.",
    "choices": [
      {
        "id": 1,
        "text": "Ketamine may exacerbate the effects of his condition"
      },
      {
        "id": 2,
        "text": "Halothane can be used safely in this patient"
      },
      {
        "id": 3,
        "text": "Atracurium should be avoided"
      },
      {
        "id": 4,
        "text": "Vecuronium is safe to use in this patient"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Halothane</strong> should <strong>not be used</strong> in the patient as it&nbsp;<strong>sensitizes the heart</strong> to the <strong>arrhythmogenic effects</strong> <strong>of epinephrine</strong>.</p>\n<p>Pheochromocytoma is a condition where the chromaffin tissue, most commonly in the adrenal medulla, produces excessive norepinephrine and epinephrine.&nbsp;</p>\n<p>Other anaesthetic drugs to be avoided in a pheochromocytoma patient are:</p>\n<ul>\n<li>Succinylcholine - can cause fasciculations which lead to raised intraabdominal pressure and catecholamine release from the tumor</li>\n<li><strong>Ketamine</strong> - as it is <strong>sympathomimetic</strong> and might exacerbate the effects of adrenergic agonists</li>\n<li>Anticholinergics and Pancuronium &ndash; vagal blockade leading to tachycardia</li>\n<li><strong>Atracurium</strong>&nbsp;&ndash; due to <strong>histamine release</strong> which may provoke catecholamine release. The <strong>safest</strong> options for these patients would be <strong>vecuronium</strong> and rocuronium</li>\n</ul>\n<p>Other considerations in patients with pheochromocytoma:</p>\n<ul>\n<li><strong>Phenoxybenzamine</strong>, an alpha1-antagonist, which can be administered orally, is often given <strong>preoperatively</strong> to reverse the vasoconstriction. This results in a drop in arterial blood pressure and a drop in hematocrit</li>\n<li><strong>Phentolamine</strong> is used <strong>intraoperatively</strong> to control hypertensive episodes</li>\n<li>A major regional block such as spinal/epidural could block sensory and sympathetic discharge in the area of the surgical field. But catecholamines released from the pheochromocytoma could still bind to receptors all over the body.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is an incorrect statement regarding the mapleson circuit shown below?",
    "choices": [
      {
        "id": 1,
        "text": "It is the circuit of choice for controlled ventilation"
      },
      {
        "id": 2,
        "text": "It is also known as Magill circuit"
      },
      {
        "id": 3,
        "text": "Only mapleson circuit with fresh gas flow near the bag and away from the patient"
      },
      {
        "id": 4,
        "text": "Most efficient Mapleson circuit for spontaneous ventilation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The circuit shown above is <strong>Mapleson's A </strong>or<strong> Magill circuit.\u00a0</strong>It\u00a0is considered a <strong>poor choice for controlled ventilation.</strong></p>\n<p>Modified co-axial variety of Type A - <strong>Lack's circuit.</strong></p>\n<p><strong>SMAL - </strong>For<strong> S</strong>pontaneous<strong>, M</strong>agill's circuit<strong>, </strong>Mapleson's Type<strong> A, L</strong>ack's co-axial circuit.</p>\n<p>It is the only Mapleson circuit with fresh gas flow near the bag and away from the patient. It is the most efficient Mapleson circuit for spontaneous ventilation because a fresh gas flow equal to minute ventilation is sufficient to prevent rebreathing.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2ef1458f8889459690538bc0715686c5.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "All of the following are criteria for brain death, except:",
    "choices": [
      {
        "id": 1,
        "text": "Absent deep tendon reflexes"
      },
      {
        "id": 2,
        "text": "Isoelectric EEG"
      },
      {
        "id": 3,
        "text": "Absent brainstem reflexes"
      },
      {
        "id": 4,
        "text": "Absent ventilatory effort"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>All the options are criteria for brain death, except absent deep tendon reflexes.<strong> Deep tendon reflexes</strong>/ spinal cord reflexes may be <strong>present</strong> in <strong>brain</strong> <strong>death</strong> as the spinal cord function below C1 is intact.\u00a0</p>\n<p><strong>Clinical criteria </strong>for brain death:</p>\n<ul>\n<li><strong>Coma</strong>-<strong>\u00a0</strong>Deep, unresponsiveness to noxious stimuli</li>\n<li><strong>Absent motor activity</strong>- No decerebrate or decorticate posturing</li>\n<li><strong>Absence of brainstem reflexes</strong>-<strong>\u00a0</strong>Pupillary, oculocephalic, corneal, gag reflex, etc.</li>\n<li><strong>Apnea</strong>-<strong>\u00a0</strong>Absence of spontaneous respiration at \u00a0arterial pCO<sub>2</sub>\u00a0tension of at least 50\u201360 mmHg</li>\n</ul>\n<p><strong>Confirmatory test</strong> findings (not mandatory but may assist in diagnosis)</p>\n<ul>\n<li><strong>Isoelectric electroencephalogram</strong></li>\n<li>Absence of somatosensory evoked potentials and brainstem evoked potentials\u00a0</li>\n<li>Absence of cerebral perfusion, as documented by angiographic, transcranial Doppler, or radioisotopic studies</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old football player is brought to the emergency room after falling on the field during a match. His X-ray shows the findings below. Which of the following peripheral blocks is indicated to restore the normal anatomy?",
    "choices": [
      {
        "id": 1,
        "text": "Supraclavicular block"
      },
      {
        "id": 2,
        "text": "Interscalene block"
      },
      {
        "id": 3,
        "text": "Infraclavicular block"
      },
      {
        "id": 4,
        "text": "Axillary block"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical vignette describes a case of <strong>shoulder</strong> <strong>dislocation</strong> as seen on the X-ray. Interscalene block provides surgical anaesthesia for procedures of the <strong>shoulder</strong> and <strong>upper</strong> <strong>arm</strong>.</p>\n<p><strong>Interscalene nerve block\u00a0</strong>is performed between the anterior and middle scalene muscles in the inter-scalene<strong>\u00a0groove</strong> at the level of <strong>C6,</strong> where the brachial plexus emerges. It provides an adequate block of the superior and middle trunks of the brachial plexus. The <strong>ulnar nerve (C8, T1) </strong>from the inferior trunk<strong>\u00a0</strong>may be<strong>\u00a0missed.</strong> Hence, this block is not used for procedures of the forearm and hand.</p>\n<p>The most common complication of inter-scalene block seen in 100% of patients is <strong>diaphragmatic hemiparesis </strong>due to<strong> ipsilateral phrenic nerve blockade</strong>.\u00a0This can result in dyspnea, hypoxia, and hypercapnia, especially if the patient has compromised lung function or preexisting contralateral phrenic nerve paralysis.</p>\n<p><strong>Other complications </strong>of inter-scalene block are:</p>\n<ul>\n<li><strong>Horners</strong> syndrome \u2013 ptosis, myosis, anhydrosis. Due to the involvement of the sympathetic nerves in the cervicothoracic ganglion. (loss of ciliospinal reflex)</li>\n<li>Recurrent laryngeal nerve palsy</li>\n<li>Vagus nerve involvement</li>\n<li><strong>Pneumothorax</strong> (stratosphere sign on ultrasound of the chest)</li>\n<li>Bezold Jarisch reflex (hypotension, bradycardia and coronary vasodilation)</li>\n<li>Accidental vertebral artery injection (immediate seizure is seen)</li>\n<li>Accidental spinal or epidural injection</li>\n</ul>\n<table style=\"width: 78.5844%;\">\n<tbody>\n<tr>\n<td style=\"text-align: center; width: 15.168%;\"><strong>Brachial plexus block</strong></td>\n<td style=\"text-align: center; width: 14.5322%;\"><strong>Level</strong></td>\n<td style=\"text-align: center; width: 13.1698%;\"><strong>Indication</strong></td>\n<td style=\"width: 57.1299%; text-align: center;\"><strong>Limitation</strong></td>\n</tr>\n<tr>\n<td style=\"width: 15.168%;\"><strong>Interscalene</strong></td>\n<td style=\"width: 14.5322%;\">The superior and middle trunk</td>\n<td style=\"width: 13.1698%;\">Shoulder and\u00a0 upper arm</td>\n<td style=\"width: 57.1299%;\">Ulnar nerve sparing</td>\n</tr>\n<tr>\n<td style=\"width: 15.168%;\"><strong>Supraclavicular</strong></td>\n<td style=\"width: 14.5322%;\">Distal trunk and proximal division</td>\n<td style=\"width: 13.1698%;\">Elbow, forearm, and hand</td>\n<td style=\"width: 57.1299%;\">\n<p>Axillary and suprascapular nerve-sparing, pneumothorax, phrenic nerve palsy</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 15.168%;\"><strong>Infraclavicular</strong></td>\n<td style=\"width: 14.5322%;\">Cords</td>\n<td style=\"width: 13.1698%;\">Forearm and hand</td>\n<td style=\"width: 57.1299%;\">Intercostobrachial nerve sparing</td>\n</tr>\n<tr>\n<td style=\"width: 15.168%;\"><strong>Axillary</strong></td>\n<td style=\"width: 14.5322%;\">Terminal nerves</td>\n<td style=\"width: 13.1698%;\">Forearm and hand</td>\n<td style=\"width: 57.1299%;\">\n<p>Musculocutaneous, axillary, and medial cutaneous nerve branches sparing; Inadvertent intravascular injection</p>\n</td>\n</tr>\n</tbody>\n</table>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p>\u00a0</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3dd06783de2f43aabeaf28d11bf0590f.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "An anesthesia resident asks you to load the following neuromuscular blocker, as you were posted as an intern in the anesthesia department. You would expect to see the return of the first twitch of a train of four after ___________ from administering a normal dose of this agent",
    "choices": [
      {
        "id": 1,
        "text": "20-50 Minutes"
      },
      {
        "id": 2,
        "text": "<10 Minutes"
      },
      {
        "id": 3,
        "text": ">1 Hour"
      },
      {
        "id": 4,
        "text": "10-20 Minutes"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Vecuronium</strong> is an <strong>intermediate-acting</strong> non-depolarising neuromuscular blocker. So, one can expect to see\u00a0the return of first twitch of a train of four (signifying recovery) after 20-50 minutes from administering this agent</p>\n<p class=\"p1\">Note: Vecuronium is a pancuronium minus a quaternary methyl group. This minor structural change beneficially alters side effects without affecting its potency.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2fc67c5f362d41ef84b47722a524a1d9.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old man with a history of hypertension and diabetes is on dialysis for chronic renal failure. Which is the inhalational agent safe in him, if he is to undergo surgery?",
    "choices": [
      {
        "id": 1,
        "text": "Methoxyflurane"
      },
      {
        "id": 2,
        "text": "Desflurane"
      },
      {
        "id": 3,
        "text": "Enflurane"
      },
      {
        "id": 4,
        "text": "Sevoflurane"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The anesthetic agent safe in renal failure is <strong>d</strong><strong>esflurane.</strong></p>\n<p>Desflurane is minimally metabolized and eliminated rapidly unchanged.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As an intern posted in the OT, you see the Anesthesia Senior Resident holding the needle shown in the image. What is the likely procedure that he is about to perform?",
    "choices": [
      {
        "id": 1,
        "text": "Spinal anesthesia"
      },
      {
        "id": 2,
        "text": "Epidural anesthesia"
      },
      {
        "id": 3,
        "text": "Combined spinal epidural anesthesia"
      },
      {
        "id": 4,
        "text": "IV cannulation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shown is the 18 G&nbsp;<strong>Tuohy needle,</strong>&nbsp;which is used in<strong> epidural anesthesia</strong>.</p>\n<p><strong>Identification points:</strong></p>\n<ul>\n<li>It has a <strong>blunt, curved tip (Huber tip)</strong>&nbsp;that helps to <strong>prevent accidental dural puncture</strong></li>\n<li>The needle shaft is marked in 1-cm intervals so that the depth of insertion can be identified</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/61d90c1de9e242abbe580eeda0811ed9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7c453ca187034b57880a2e096cc43108x1280x960.JPEG"
    ]
  },
  {
    "text": "Which of the following investigations provides the most accurate prognostic information with respect to predicting risks of perioperative cardiac complications?",
    "choices": [
      {
        "id": 1,
        "text": "Exercise ECG testing"
      },
      {
        "id": 2,
        "text": "Dobutamine stress echocardiography"
      },
      {
        "id": 3,
        "text": "Myocardial perfusion scintigraphy"
      },
      {
        "id": 4,
        "text": "Coronary angiography"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<div class=\"page\" title=\"Page 1280\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Among the given investigations, <strong>dobutamine stress echocardiography</strong>&nbsp;provides the most accurate prognostic information with respect to predicting risks of perioperative cardiac complications.</p>\n<p>Preoperative cardiac stress testing can help identify the presence and severity of preexisting CAD. The prognostic performance of these tests is better assessed based on positive and negative likelihood ratios. Among all the given options, dobutamine stress echocardiography has the maximum positive likelihood ratio and hence provides the most accurate prognostic information.</p>\n<div class=\"page\" title=\"Page 545\">Even though coronary angiography is considered the gold standard, it may not absolutely risk-stratify patients because many perioperative cardiac events may be related to noncritical coronary lesions.</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As an anesthesia consultant, you're planning to insert a central venous line for a patient requiring inotropes and parenteral nutrition for a prolonged period. Which of the following veins will you choose so as to have reduced long-term complications?",
    "choices": [
      {
        "id": 1,
        "text": "Subclavian vein"
      },
      {
        "id": 2,
        "text": "Right internal jugular vein"
      },
      {
        "id": 3,
        "text": "External jugular vein"
      },
      {
        "id": 4,
        "text": "Femoral vein"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Among the given options <strong>subclavian</strong> is the <strong>best vein </strong>for long-term<strong> cannulation.</strong></p>\n<p>The usual complications\u00a0of prolonged cannulations include line infection, sepsis, air or thrombus embolism, arrhythmias, hematoma, hemothorax, and thrombosis.</p>\n<p>As compared to cannulation of other veins, <strong>subclavian vein</strong> cannulation has\u00a0a <strong>reduced risk of complications</strong> due to prolonged cannulations. It is, however, associated with a <strong>maximum risk </strong>of <strong>pneumothorax.</strong></p>\n<p>Other options:</p>\n<p>Option B- The <strong>internal jugular</strong> vein on the <strong>right side</strong> is better than the left side. <strong>Left-sided</strong> insertion has an increased risk of <strong>pleural effusion</strong> and<strong> chylothorax</strong>.</p>\n<p>Option C- The <strong>external jugular</strong> vein is <strong>less preferred</strong> because it enters at an acute angle into chest veins, hence there are decreased chances of easy access.</p>\n<p>Option D-<strong> Femoral</strong> veins are <strong>less preferred </strong>for<strong> long-term</strong> usage because they are associated with frequent <strong>line-related sepsis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old male patient was undergoing a craniotomy procedure for a posterior cranial fossa tumor in a sitting position. Intraoperatively, there was a sudden drastic drop in EtCO2 to 8 mmHg and blood pressure dropped to 80/50 mmHg. A venous air embolism was suspected. What is the immediate next step of management?",
    "choices": [
      {
        "id": 1,
        "text": "Compress jugular vein to limit air entry to chest circulation"
      },
      {
        "id": 2,
        "text": "Administer nitrous oxide to eliminate the emboli"
      },
      {
        "id": 3,
        "text": "Initiate steroid administration"
      },
      {
        "id": 4,
        "text": "Stop 100% oxygen administration to prevent further air embolism"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In this given scenario of <strong>venous air embolism </strong>(VAE), the immediate next step of management is to <strong>compress the jugular vein</strong> to limit air entry to chest circulation.</p>\n<p id=\"__p45\" class=\"p p-first\">The goal of treatment in VAE is to<strong> prevent further air entry</strong>, treat the intravascular air and hemodynamic support.</p>\n<ul>\n<li class=\"p p-first\">The first immediate step is to notify the surgeon to cover the surgical field with a <strong>saline-soaked dressing</strong> and tilt the table to prevent further air entry. In surgeries done in a\u00a0<strong>sitting position</strong>, the <strong>jugular venous compression</strong> can restrict air entry into chest circulation.</li>\n<li class=\"p p-first\">Improve patient oxygenation by administration of <strong>100% oxygen</strong>. It also reduces embolus volume by eliminating nitrogen.<strong> Nitrous oxide</strong> should be\u00a0<strong>discontinued</strong> even after minor embolic events to prevent the air from reaching left-sided circulation.</li>\n<li class=\"p p-first\">Air entry to the right side of the heart may be relieved\u00a0by a <strong>partial left lateral decubitus</strong> position.\u00a0Aspiration of air from the right atrium can be tried by the use of a <strong>Bunegin-Albin multi-orifice catheter.</strong></li>\n<li>Maintain optimum <strong>fluid status</strong> and stabilize the patient with<strong> inotropes</strong> or pressors if needed.</li>\n<li class=\"p p-first\">In case of massive VAE with cardiac decompensation, initiate rapid\u00a0cardiopulmonary resuscitation with <strong>chest compression.</strong></li>\n<li class=\"p p-first\">To decrease the severity of the disease, initiate anticoagulation therapy with heparin. The usage of <strong>steroids </strong>is <strong>controversial</strong> as steroids do not have any effect on cytotoxic brain edema resulting from air embolism.</li>\n</ul>\n<p>VAE refers to the entrapment of <strong>exogenously delivered gas</strong> or<strong> air</strong> into the venous vasculature resulting in systemic effects. It may occur during surgeries like <strong>sitting </strong>neurological procedures (<strong>posterior cranial fossa surgeries</strong>), obstetrics, and orthopedic surgeries. Other causes include mechanical insufflation during laparoscopic surgeries, iatrogenic air entry during venous catheterization and dysbarism.\u00a0</p>\n<p>VAE should be considered when <strong>unexplained hypotension</strong> or\u00a0a <strong>sudden fall</strong> in<strong> end-tidal CO<sub>2</sub></strong>\u00a0level occurs intraoperatively in high-risk cases.\u00a0Transesophageal echocardiography (<strong>TEE</strong>) is the most sensitive device for detecting intracardiac air embolus.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 55-year-old male patient with compensated cirrhosis is being posted for a liver transplantation. As an anesthetist on duty, which of the following induction agents will you use?",
    "choices": [
      {
        "id": 1,
        "text": "Methoxyflurane"
      },
      {
        "id": 2,
        "text": "Thiopentone"
      },
      {
        "id": 3,
        "text": "Sevoflurane"
      },
      {
        "id": 4,
        "text": "Ketamine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Sevoflurane</strong> and <strong>isoflurane</strong> are commonly used for induction&nbsp;in patients with <strong>liver disease.</strong></p>\n<p>Hepatic arterial blood flow is reduced in cirrhosis. <strong>Sevoflurane </strong>and<strong> isoflurane</strong> are known to <strong>maintain hepatic blood flow</strong> and improve oxygen delivery to the liver.</p>\n<p>Sevoflurane due to its&nbsp;<strong>nonpungency</strong>&nbsp;and&nbsp;<strong>rapid onset</strong>&nbsp;makes it an excellent choice for smooth and <strong>rapid inhalation inductions</strong> in pediatric and adult patients.</p>\n<p><strong>Compound A </strong>is the nephrotoxic end product formed by the interaction<strong> of sevoflurane </strong>with CO2-absorbent<strong>&nbsp;soda lime.&nbsp;</strong>Accumulation of this product occurs on long-duration anesthesia, high sevoflurane concentrations, and dry barium hydroxide absorbent.</p>\n<p>Other options-</p>\n<p>Option (A): <strong>Methoxyflurane&nbsp;</strong>is a <strong>hepatotoxic</strong> and <strong>highly nephrotoxic drug</strong>. Its <strong>use gradually declined</strong> after the 1970s.&nbsp;</p>\n<p>Option (B): <strong>Thiopentone,&nbsp;</strong>also known as thiopental, is a barbiturate that is <strong>excreted primarily</strong> via the <strong>liver</strong>. Hence, it would lead to toxicity is used in patients with liver disease.</p>\n<p>Option (D):<strong> Ketamine&nbsp;</strong>is a dissociative anesthetic agent that <strong>accumulates</strong> in the<strong> liver</strong> and undergoes <strong>rapid metabolism</strong>. It is also known to cause <strong>hepatotoxicity</strong> which presents as an <strong>elevation</strong> in <strong>liver enzymes</strong>. These two reasons make ketamine unsuitable for use in patients with liver disease.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true regarding the airway adjunct shown in the image given below?",
    "choices": [
      {
        "id": 1,
        "text": "It is used only in unconscious patients"
      },
      {
        "id": 2,
        "text": "Prevents falling back of tongue post-extubation"
      },
      {
        "id": 3,
        "text": "Prevents tongue bite during seizure activity"
      },
      {
        "id": 4,
        "text": "Can be used in patients with central facial fracture"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\"><span class=\"s2\">The image shows <strong>nasopharyngeal airway</strong> and&nbsp;its insertion. The true statement&nbsp;is that it is used to <strong>prevent falling back</strong> <strong>of</strong> <strong>tongue</strong> post-extubation especially in <strong>obese</strong> patients.</span></p>\n<p class=\"p1\"><span class=\"s2\">Nasopharyngeal airways are less stimulating than oropharyngeal airways as it bypasses the gag reflex. Thus, it can be <strong>used</strong> in <strong>conscious</strong> patients as well.</span></p>\n<p class=\"p1\"><span class=\"s2\">It does <strong>not</strong> <strong>prevent</strong> <strong>tongue</strong> <strong>bite</strong> unlike the oropharyngeal airway which has a bite block. It can prevent falling back of the tongue in patients with seizures.</span></p>\n<p class=\"p1\"><span class=\"s2\">It is <strong>contraindicated</strong> in</span></p>\n<ul class=\"ul1\">\n<li class=\"li1\"><span class=\"s2\">Basilar skull fractures, <strong>central facial fractures</strong>, CSF rhinorrhea - risk of meningitis</span></li>\n<li class=\"li1\"><span class=\"s2\">Patients on anticoagulants, coagulopathies, epistaxis - risk of bleeding</span></li>\n<li class=\"li1\"><span class=\"s2\">Relatively contraindicated in pregnancy (increased vascularity leading to bleeding), deformity of the nose.</span></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9c222d336a224714a0dc5c5e1bac3c58.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Match the following gas cylinders with their respective pin indices.",
    "choices": [
      {
        "id": 1,
        "text": "1-B, 2-D, 3-C, 4-A"
      },
      {
        "id": 2,
        "text": "1-A, 2-D, 3-C, 4-B"
      },
      {
        "id": 3,
        "text": "1-A, 2-E, 3-B, 4-C"
      },
      {
        "id": 4,
        "text": "1-D, 2-E, 3-B, 4-C"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The correct match is 1-A, 2-E, 3-B, 4-C.</p>\n<p><strong>Pin Index Safety System\u00a0</strong>(PISS) is a\u00a0unique configuration of holes and pins which match precisely to eliminate the connection of a wrong cylinder to equipment, thus preventing delivery of wrong gas to a patient. It incorporates two holes in specific positions on the cylinder valve below the outlet port. The cylinder can only be connected to a pressure regulator or yolk, with the corresponding matching pair of pins.</p>\n<p><strong>Oxygen </strong>cylinders are <strong>black cylinders with white shoulders</strong>. The pin index of the oxygen cylinder is <strong>2,5.</strong> The maximum pressure in the oxygen cylinder is around 2000 psi. The critical temperature of oxygen is -119 \u00baC, hence it is present in the gaseous form at room temperature.</p>\n<p><strong>Helium</strong>\u00a0is stored in <strong>brown-colored</strong> cylinders and has no pin index.\u00a0<strong>Helium-</strong><strong>oxygen</strong>\u00a0mixture,\u00a0together known as <strong>h</strong><strong>eliox,</strong>\u00a0is used to improve gaseous exchange in acute exacerbation of asthma and COPD. The <strong>helium-oxygen</strong> mixture in <strong>79%-21%</strong> ratio\u00a0is sometimes used in anesthetic practice to provide relief from upper airway obstructions due to subglottic <strong>edema,</strong> foreign bodies, and tracheal tumors. It is only a <strong>temporary measure</strong> that is used until definitive care is provided.\u00a0</p>\n<p>The cylinder with a <strong>blue body and white shoulder</strong> is the <strong>Entonox</strong> cylinder. Its <strong>PIN index is 7</strong>. Entonox is 50:50 mixture of nitrous oxide and oxygen, popularly used as labor analgesia in maternity suites.</p>\n<p><strong>Blue</strong> cylinders are used to store <strong>nitrous oxide</strong>. The pin index of these cylinders is <strong>3, 5.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fae475621386414b8fa701fd001996e9.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old man who underwent surgery for appendicitis was given a high dose of opioids postoperatively to relieve the pain. But within a few hours,  a fall in SpO2 and respiratory rate were noted. Which of the following drugs has been accepted as standard therapy in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Naloxone"
      },
      {
        "id": 2,
        "text": "Sevoflurane"
      },
      {
        "id": 3,
        "text": "Barbiturate"
      },
      {
        "id": 4,
        "text": "Diazepam"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is suggestive of&nbsp;<strong>opioid-induced respiratory depression&nbsp;</strong>and&nbsp;<strong>n</strong><strong>aloxone</strong> has been accepted as standard therapy in this patient.</p>\n<p>Opioid-induced respiratory depression is mediated by the action on <strong>&micro; receptors&nbsp;</strong>in the brainstem respiratory centers.&nbsp;Naloxone is an <strong>opioid antagonist,</strong> which can <strong>reverse</strong> the respiratory depression induced by opioids.</p>\n<p>Respiratory depression can be prolonged when opioids are taken with other CNS depressant substances like alcohol, barbiturates, benzodiazepines, inhalational anesthetics, and other sedative-hypnotics.</p>\n<p>However, <strong>droperidol, scopolamine,</strong> and<strong> clonidine</strong>&nbsp;do not increase the respiratory depressant effects of fentanyl&nbsp;or other opioids.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Preoperative fasting recommendation is _________",
    "choices": [
      {
        "id": 1,
        "text": "4 hours for solids in adults"
      },
      {
        "id": 2,
        "text": "2 hours for liquids in adults"
      },
      {
        "id": 3,
        "text": "2 hours for breast milk in infants"
      },
      {
        "id": 4,
        "text": "4 hours for solids in infants"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Preoperative fasting recommendation is <strong>2 hours for liquids in adults</strong>.</p>\n<p><strong>Recommended Preoperative Fasting period</strong>:</p>\n<ul>\n<li>For neonates and infants:\n<ul>\n<li>2 hours for clear fluids</li>\n<li>4 hours for breast milk</li>\n<li>6 hours for solids and infant formula</li>\n</ul>\n</li>\n<li>For all above 1 year of age:\n<ul>\n<li><strong>2 hours for clear fluids</strong></li>\n<li>6 hours for a light meal</li>\n<li>8 hours if the meal contains fried, fatty food</li>\n</ul>\n</li>\n</ul>\n<p>Preoperative fasting is intended to reduce the risk of pulmonary aspiration.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following opioids follow the marked graphical representation (A) in the given image?",
    "choices": [
      {
        "id": 1,
        "text": "Morphine"
      },
      {
        "id": 2,
        "text": "Butorphanol"
      },
      {
        "id": 3,
        "text": "Buprenorphine"
      },
      {
        "id": 4,
        "text": "Pentazocine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The graph is of the <strong>ceiling effect</strong> of <strong>opioids</strong> i.e. with some opioids when the <strong>ceiling</strong> is reached further <strong>increment</strong> in <strong>dose</strong> does not <strong>increase</strong> the <strong>effect.</strong> <strong>Morphine does not show the ceiling effect.\u00a0</strong></p>\n<p>The ceiling effect is particularly seen with respiratory depression i.e. <strong>higher doses</strong> do not produce further respiratory depression.<strong> Respiratory</strong> depression increases proportionally with <strong>dose.</strong></p>\n<p>The following opioids show a ceiling effect:</p>\n<ul>\n<li>Buprenorphine</li>\n<li>Butorphanol</li>\n<li>Nalbuphine</li>\n<li>Pentazocine</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2ec1709802db42a2b95968595d1672bd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a7cfbbdedb254049b86317fd45fcde6dx1280x840.JPEG"
    ]
  },
  {
    "text": "Gas from which of the following cylinders can be used in patients with acute exacerbation of bronchial asthma along with oxygen?",
    "choices": [
      {
        "id": 1,
        "text": "Violet"
      },
      {
        "id": 2,
        "text": "Blue"
      },
      {
        "id": 3,
        "text": "Brown"
      },
      {
        "id": 4,
        "text": "Orange"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The gas in the cylinder with a <strong>brown</strong> shoulder and body is <strong>helium</strong>. Helium along with oxygen, together known as <strong>heliox</strong>&nbsp;can be used in the treatment of acute exacerbation of bronchial asthma as they decrease the work of breathing. Heliox can be used to deliver inhaled \ud835\udec3<sub>2</sub> agonists in patients with severe critical asthma.</p>\n<p><strong>Principle</strong>:</p>\n<ul>\n<li>When the flow across the bronchus is <strong>laminar</strong>, the flow rate increases as the<strong> gas viscosity </strong>decreases<strong>.</strong></li>\n<li>In airway obstructing conditions, where there is turbulent flow, the flow rate decreases as the gas density increases. Hence helium, having low density is added with oxygen to increase the flow rate. It decreases the resistance in the airways and improves ventilation and gas exchange.</li>\n</ul>\n<p>The other options represent general anaesthetics and are not useful in treating bronchial asthma.</p>\n<ul>\n<li><strong>Violet</strong>: Ethylene</li>\n<li><strong>Blue</strong>: N<sub>2</sub>O</li>\n<li><strong>Orange</strong>: Cyclopropane</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The image shown below is the technique of insertion of?",
    "choices": [
      {
        "id": 1,
        "text": "Oropharyngeal airway"
      },
      {
        "id": 2,
        "text": "Nasopharyngeal airway"
      },
      {
        "id": 3,
        "text": "Laryngeal mask airway"
      },
      {
        "id": 4,
        "text": "Endotracheal tube"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shown above is the technique of insertion of laryngeal mask airway.</p>\n<p><strong>Laryngeal mask airway</strong> (LMA) is a supraglottic airway device that is positioned in the <strong>hypopharynx</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d09c5f8fbe804cc6961ac9ba69dd133d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f1a5205e27954a4bb7131cda0f1499fex1280x1146.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1f35153982f349149033f4199470e9efx1280x2807.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6fd399e88afa41d394ee2c1f61335399x510x511.GIF"
    ]
  },
  {
    "text": "A 50-year-old patient, who was diagnosed with severe ARDS  was shifted to the intensive care unit and was put on mechanical ventilation with high PEEP (positive end-expiratory pressure). This ventilatory setting results in all of the following nonpulmonary effects  except",
    "choices": [
      {
        "id": 1,
        "text": "Urinary output decreases"
      },
      {
        "id": 2,
        "text": "Angiotensin level increases"
      },
      {
        "id": 3,
        "text": "Level of Antidiuretic hormone decreases"
      },
      {
        "id": 4,
        "text": "Glomerular filteration decreases"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Mechanical ventilation with positive end-expiratory pressure (PEEP) setting results in all the above effects except decrease in\u00a0Antidiuretic hormone level.</p>\n<p class=\"p1\"><strong>Positive end-expiratory pressure(PEEP)</strong></p>\n<p class=\"p1\">PEEP is a mode of therapy used in conjunction with mechanical ventilation. Application of positive pressure during expiration as an adjunct to a mechanically ventilated breath is referred to as PEEP.</p>\n<p class=\"p1\">The principal mechanism of action appears to be the expansion of partially collapsed alveoli.</p>\n<p class=\"p1\"><strong>Pulmonary effects</strong>:\u00a0</p>\n<ul>\n<li class=\"p1\">In patients with decreased lung volume, appropriate levels of PEEP will <strong>increase FRC</strong> and tidal ventilation and thereby\u00a0<strong>improving lung compliance.</strong></li>\n<li class=\"p1\">It also helps in correcting ventilation/perfusion mismatch and aid in <strong>improving arterial oxygenation.</strong></li>\n</ul>\n<p><strong>Nonpulmonary effects:</strong></p>\n<ul>\n<li><strong>Urinary output decreases</strong></li>\n<li><strong>Glomerular filtration decreases.</strong></li>\n<li>Circulating levels of<strong> antidiuretic hormone and angiotensin </strong>are usually<strong> elevated.</strong></li>\n<li class=\"p1\">Central venous pressure increases</li>\n<li class=\"p1\">Progressive reductions in cardiac output</li>\n<li class=\"p1\">Decrease in both renal and hepatic blood flow.</li>\n<li class=\"p1\">Decreased free water clearance</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are a resident posted in the medicine ward. A patient who has been previously diagnosed with epilepsy has an episode of seizures and becomes unconscious. You immediately call a code. The patient is unresponsive and chest rise is not appreciable but you can feel a pulse. You suspect that this is due to falling back of the tongue and decide to secure the airway using the device shown. What landmarks would you use before selecting the appropriate size?",
    "choices": [
      {
        "id": 1,
        "text": "Incisor teeth and tragus of the ear"
      },
      {
        "id": 2,
        "text": "Corner of mouth and angle of mandible"
      },
      {
        "id": 3,
        "text": "Tip of nose and angle of mandible"
      },
      {
        "id": 4,
        "text": "Ala of nose and angle of mandible"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows&nbsp;<strong>oropharyngeal</strong> <strong>airway</strong> or <strong>Guedel</strong> <strong>airway </strong>of various sizes.&nbsp;The landmarks used for measuring the appropriate size of this device are the <strong>corner</strong> <strong>of the</strong> <strong>mouth</strong> and the <strong>angle of the</strong>&nbsp;<strong>mandible</strong> or tragus.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/137b21d6dbad440ba1a2787db2fe1dff.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e7064b3a23e94f4f977dbc55b518805dx1280x1427.JPEG"
    ]
  },
  {
    "text": "A characteristic cleft in phase 3 of the capnograph waveform of a patient being monitored is suggestive of which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Rebreathing"
      },
      {
        "id": 2,
        "text": "Attempts at spontaneous breathing"
      },
      {
        "id": 3,
        "text": "Pulmonary embolism"
      },
      {
        "id": 4,
        "text": "Malignant hyperthermia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image in the given question shows a capnograph with clefts during phase III&nbsp;which indicates <strong>spontaneous breathing</strong> efforts by the patient during controlled mechanical ventilation. It is also known as a&nbsp;<strong>curare notch or cleft.</strong></p>\n<p>Option A: Rebreathing shows an elevated inspiratory baseline</p>\n<p>Option C: Pulmonary embolism shows sudden fall in end-tidal CO<sub>2 </sub></p>\n<p>Option D: Malignant hyperthermia shows a persistent rise in CO<sub>2&nbsp;</sub></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/859509216c2e41f2bf0f4de426e54779.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/73be653ad9fe48618e40235782ecc67fx1280x904.JPEG"
    ]
  },
  {
    "text": "A 36-year-old housewife is scheduled for an excision biopsy of a breast lump under general anaesthesia. The procedure is planned on an outpatient basis. Which is the intravenous induction agent of choice for her?",
    "choices": [
      {
        "id": 1,
        "text": "Ketamine"
      },
      {
        "id": 2,
        "text": "Thiopentone"
      },
      {
        "id": 3,
        "text": "Propofol"
      },
      {
        "id": 4,
        "text": "Etomidate"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The intravenous induction agent of choice for <strong>ambulatory</strong><strong>&nbsp;</strong>anesthesia is <strong>propofol.</strong></p>\n<p>Propofol has<strong>&nbsp;</strong>a<strong> rapid onset </strong>of action and a<strong> faster recovery.</strong>&nbsp;This makes it an ideal induction agent for outpatient/ambulatory/day care anesthesia.</p>\n<p>Besides, propofol has <strong>antiemetic </strong>properties which help&nbsp;reduce post-operative nausea and vomiting.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Anaesthesia Test';
        const quizFilename = 'anaesthesia-test-b2bf9e54.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2023 - 24"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>