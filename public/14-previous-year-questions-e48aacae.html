<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>14 Previous Year Questions - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / PSM
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">16</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>You have gone to a village for screening where people have diabetes and hypertension. What type of screening is done for family members of these patients who show up in large numbers?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Multiphasic screening"
      },
      {
        "id": 2,
        "text": "Mass screening"
      },
      {
        "id": 3,
        "text": "High-risk screening"
      },
      {
        "id": 4,
        "text": "Anonymous screening"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n\t<li><strong>High-risk screening targets individuals at increased risk</strong> due to family history, occupation, or exposure.</li>\n\t<li>In this case, <strong>family members of <span class=\"customMeta\" data-dictid=\"a5603ff98316927771865d7ae41f16\">diabetic</span> and <span class=\"customMeta\" data-dictid=\"dd2daa0c6216927771893c9cab82d9\">hypertensive</span> patients</strong> are at a higher genetic and lifestyle risk of developing these conditions.</li>\n\t<li>This approach <strong>optimizes resources</strong> by <span class=\"customMeta\" data-dictid=\"fefa53d9f216927772037e31a651d7\">focusing</span> on a subgroup with a greater <span class=\"customMeta\" data-dictid=\"f52ac1410416927771969ba21fcb63\">probability</span> of disease, improving early <span class=\"customMeta\" data-dictid=\"723fdec66b1692777186e92f0c6fdf\">detection</span> and intervention.</li>\n</ul>\n\n<h3><strong>Types of Screening in Public Health</strong></h3>\n\n<p>Screening programs are classified based on <strong>population coverage and purpose</strong>.</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:624px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Type of Screening</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Description</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Example</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Mass screening</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Testing <strong>entire populations</strong>, regardless of risk.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Screening all adults in a village for hypertension.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>High-risk screening</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Targeting individuals with <strong>known risk factors</strong>.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Screening <strong>family members of diabetics</strong> for early detection.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Multiphasic screening</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Conducting <strong>multiple tests</strong> in one session to detect various diseases.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Screening for <strong>diabetes, hypertension, and cholesterol</strong> simultaneously.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Anonymous screening</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Testing where <strong>participants' identities remain unknown</strong>.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>HIV screening in high-risk populations without recording names.</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p><strong>Multiphasic screening (Option A):</strong> Incorrect because this involves testing <strong>multiple diseases in one go</strong>, rather than <span class=\"customMeta\" data-dictid=\"fefa53d9f216927772037e31a651d7\">focusing</span> on a high-risk group.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Mass screening (Option B):</strong> Incorrect because <span class=\"customMeta\" data-dictid=\"fa9dd42ba01692777192a925320fac\">mass screening</span> includes <strong>everyone</strong>, not just high-risk individuals.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Anonymous screening (Option D):</strong> Incorrect because identity is not concealed in this scenario; screening is based on family history.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Diabetic screening for the pregnant mother in India is done between:</p>",
    "choices": [
      {
        "id": 1,
        "text": "24-28W"
      },
      {
        "id": 2,
        "text": "32-36W"
      },
      {
        "id": 3,
        "text": "18-24W"
      },
      {
        "id": 4,
        "text": "14-18W"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Option A - 24-28 weeks: </strong></p>\n\n<ul>\n\t<li>Diabetic screening for pregnant mothers is typically done during the second trimester, specifically between 24 and 28 weeks of pregnancy. This screening is important to identify gestational <span class=\"customMeta\" data-dictid=\"b6a934c67b16927771868fca92baf9\">diabetes mellitus</span> (GDM), a type of diabetes that develops during pregnancy and can pose risks to both the mother and the baby. <span class=\"customMeta\" data-dictid=\"01dbcbb3f01692777188e4dea818c9\">GDM</span> is characterized by elevated <span class=\"customMeta\" data-dictid=\"88b48cf7241692777183e5f5b8adf1\">blood sugar</span> levels that occur during pregnancy and usually resolves after childbirth.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Option B - 32-36 weeks:\u00a0</strong>It<strong>\u00a0</strong>is not the typical timeframe for <span class=\"customMeta\" data-dictid=\"a5603ff98316927771865d7ae41f16\">diabetic</span> screening in pregnancy. By this time, if <span class=\"customMeta\" data-dictid=\"01dbcbb3f01692777188e4dea818c9\">GDM</span> has not been identified earlier, it might be too late to implement effective interventions.</p>\n\n<p><strong>Option C - 18-24 weeks:\u00a0</strong>It<strong>\u00a0</strong>is relatively early in the pregnancy and not the standard time for <span class=\"customMeta\" data-dictid=\"a5603ff98316927771865d7ae41f16\">diabetic</span> screening. <span class=\"customMeta\" data-dictid=\"01dbcbb3f01692777188e4dea818c9\">GDM</span> usually becomes more evident as pregnancy progresses.</p>\n\n<p><strong>Option D - 14-18 weeks:\u00a0</strong>It<strong>\u00a0</strong>is also relatively early in the pregnancy and not the standard time for <span class=\"customMeta\" data-dictid=\"a5603ff98316927771865d7ae41f16\">diabetic</span> screening. <span class=\"customMeta\" data-dictid=\"01dbcbb3f01692777188e4dea818c9\">GDM</span> typically develops later in pregnancy due to changes in hormone levels and <span class=\"customMeta\" data-dictid=\"b47c9c6144169277719010eaa1a0ee\">insulin</span> resistance.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>The current approach for the initial screening of women for cervical cancer at a primary health center is-</p>",
    "choices": [
      {
        "id": 1,
        "text": "Visual inspection after application of freshly prepared solution 5% acetic acid solution"
      },
      {
        "id": 2,
        "text": "Colposcopy"
      },
      {
        "id": 3,
        "text": "Cervical biopsy"
      },
      {
        "id": 4,
        "text": "High vaginal biopsy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer A - Visual inspection after application of freshly prepared solution 5% <span class=\"customMeta\" data-dictid=\"0dd11cf9621692777180830d7825b2\">acetic</span> acid solution:</strong></p>\n\n<ul>\n\t<li>Visual inspection after the application of a 5% <span class=\"customMeta\" data-dictid=\"0dd11cf9621692777180830d7825b2\">acetic</span> acid solution, also known as VIA (Visual Inspection with <span class=\"customMeta\" data-dictid=\"0dd11cf9621692777180830d7825b2\">Acetic</span> Acid)</li>\n\t<li>is a widely used and effective method for the initial screening of <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> cancer in resource-limited settings.</li>\n</ul>\n\n<p><strong>Visual inspection with <span class=\"customMeta\" data-dictid=\"0dd11cf9621692777180830d7825b2\">acetic</span> acid (VIA):</strong></p>\n\n<ul>\n\t<li>is a simple and cost-effective method that involves the application of 5% <span class=\"customMeta\" data-dictid=\"0dd11cf9621692777180830d7825b2\">acetic</span> acid to the cervix.</li>\n\t<li>The acid causes any <span class=\"customMeta\" data-dictid=\"458e050fdc16927771809854c9fd53\">abnormal</span> areas to turn white, which can be visually detected.</li>\n\t<li>VIA is a suitable screening method in primary health centers as it does not require sophisticated equipment or extensive training.</li>\n\t<li>If an <span class=\"customMeta\" data-dictid=\"458e050fdc16927771809854c9fd53\">abnormal</span> area is detected, further <span class=\"customMeta\" data-dictid=\"552e9ef8811692777186997018b858\">diagnostic</span> tests such as <span class=\"customMeta\" data-dictid=\"92be2e938c169277718444a50b703a\">colposcopy</span> and <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> <span class=\"customMeta\" data-dictid=\"754ab07a2e1692777183ed178c883d\">biopsy</span> may be recommended.</li>\n</ul>\n\n<p><strong>Colposcopy (Option B):</strong> Is not typically used as an initial screening method in primary health centers due to the need for specialized equipment and trained personnel.</p>\n\n<p><strong>Cervical <span class=\"customMeta\" data-dictid=\"754ab07a2e1692777183ed178c883d\">biopsy</span> (Option C):</strong> Is an <span class=\"customMeta\" data-dictid=\"1c5272ad3d1692777190e71409d07a\">invasive</span> procedure and is not typically performed as part of the initial screening process.</p>\n\n<p><strong>High <span class=\"customMeta\" data-dictid=\"9a1e50b8221692777201b95b66c9de\">vaginal</span> <span class=\"customMeta\" data-dictid=\"754ab07a2e1692777183ed178c883d\">biopsy</span> (Option D:</strong> Is not a specific screening method for <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> cancer and is not commonly used as an initial screening strategy.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>For assessing the viral load in a test sample, which test utilizes the provided graph?</p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"3703\" src=\"https://image.prepladder.com/content/FgXxiTFcvhOzXqZjC5OO1748163922.png\" width=\"4167\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Antigen test"
      },
      {
        "id": 2,
        "text": "Real-time RT PCR"
      },
      {
        "id": 3,
        "text": "CBNAAT"
      },
      {
        "id": 4,
        "text": "TruNat"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer B - <span class=\"customMeta\" data-dictid=\"9ddd195e9a1692777197bb3f135c2e\">Real-time</span> RT PCR</strong></p>\n\n<ul>\n\t<li>The above image shows the<strong> cycle threshold or Ct value</strong> of<strong> Real time RT PCR </strong>which is used to <strong>assess the <span class=\"customMeta\" data-dictid=\"5cc2d9fac616927772021889ee6d52\">viral</span> genetic load. </strong></li>\n\t<li>In the <span class=\"customMeta\" data-dictid=\"90b63cdcfe16927771885e9612aecb\">graph</span> above, the cycle number is on the x-axis and relative <span class=\"customMeta\" data-dictid=\"da0e2a00fa1692777202d6e2054b26\">fluorescence</span> is on the y-axis.</li>\n</ul>\n\n<p><strong>Real-Time RT PCR </strong></p>\n\n<ul>\n\t<li><strong>CT value (cyclical threshold) </strong>- Inversely Proportional to virus load.</li>\n\t<li>The CT or threshold cycle value is the cycle number at which the <span class=\"customMeta\" data-dictid=\"da0e2a00fa1692777202d6e2054b26\">fluorescence</span> generated within a reaction crosses the <span class=\"customMeta\" data-dictid=\"da0e2a00fa1692777202d6e2054b26\">fluorescence</span> threshold, a <span class=\"customMeta\" data-dictid=\"df068e6efc16927772029693b5023e\">fluorescent</span> signal significantly above the background fluorescence.</li>\n\t<li>At the threshold cycle, a detectable amount of amplicon product has been generated during the early <span class=\"customMeta\" data-dictid=\"464cb9ad2516927771875b537d3f7a\">exponential</span> phase of the reaction. The threshold cycle is inversely proportional to the original relative expression level of the gene of interest.</li>\n</ul>\n\n<p><strong>Antigen test (Option A): </strong>A rapid <span class=\"customMeta\" data-dictid=\"782b31281a1692777181708484c1d1\">antigen</span> test, is a rapid <span class=\"customMeta\" data-dictid=\"552e9ef8811692777186997018b858\">diagnostic</span> test suitable for point-of-care testing that directly detects the presence or absence of an antigen.</p>\n\n<p><strong>CBNAAT (Option C): </strong>The cartridge-based <span class=\"customMeta\" data-dictid=\"6483f3ef3116927771935d328a8ab2\">nucleic acid</span> <span class=\"customMeta\" data-dictid=\"13e14b31b21692777181520d7c651c\">amplification</span> test (CBNAAT) <span class=\"customMeta\" data-dictid=\"fc026ff6d81692777182835f6de6df\">assay</span> is a <span class=\"customMeta\" data-dictid=\"9ddd195e9a1692777197bb3f135c2e\">real-time</span> <span class=\"customMeta\" data-dictid=\"d419920a6616927771969805c3d65d\">polymerase</span> chain reaction (PCR) cartridge-based <span class=\"customMeta\" data-dictid=\"fc026ff6d81692777182835f6de6df\">assay</span> for the simultaneous <span class=\"customMeta\" data-dictid=\"723fdec66b1692777186e92f0c6fdf\">detection</span> of Mycobacterium <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">tuberculosis</span> complex and <span class=\"customMeta\" data-dictid=\"6cd890fc7416927771978562618db8\">rifampicin</span> resistance from biological <span class=\"customMeta\" data-dictid=\"c02ad9ae0f1692777198d76afc93c4\">specimen</span> samples within two hours.</p>\n\n<p><strong>TruNat (Option D): </strong>TrueNat is a comprehensive test for screening and confirming the COVID-19 virus in India.</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/FgXxiTFcvhOzXqZjC5OO1748163922.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the statements below is correct?</p>",
    "choices": [
      {
        "id": 1,
        "text": "In a population with low prevalence of the disease, positive result with a highly sensitive test means true positive"
      },
      {
        "id": 2,
        "text": "Sensitivity depends on prevalence of the disease"
      },
      {
        "id": 3,
        "text": "Positive predictive value depends on prevalence of disease"
      },
      {
        "id": 4,
        "text": "Specificity depends on prevalence of the disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Option: C) Positive <span class=\"customMeta\" data-dictid=\"758b4503bf1692777196b4872a0e36\">predictive value</span> depends on <span class=\"customMeta\" data-dictid=\"f86aae0bd61692777196f91458c9dd\">prevalence</span> of disease</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Positive <span class=\"customMeta\" data-dictid=\"758b4503bf1692777196b4872a0e36\">Predictive Value</span> (PPV):</strong></p>\n\n<ul>\n\t<li>It is the <span class=\"customMeta\" data-dictid=\"f52ac1410416927771969ba21fcb63\">probability</span> that individuals with a positive test result truly have the disease or condition of interest.</li>\n\t<li>It indicates how well a test result predicts the presence of the disease.</li>\n\t<li>Formula:</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"134\" src=\"https://image.prepladder.com/content/t9Y0UEkZACsMsSvKeeDg1745560395.png\" width=\"413\" /></p>\n\n<p><strong>Negative <span class=\"customMeta\" data-dictid=\"758b4503bf1692777196b4872a0e36\">Predictive Value</span> (NPV):</strong></p>\n\n<ul>\n\t<li>It is the <span class=\"customMeta\" data-dictid=\"f52ac1410416927771969ba21fcb63\">probability</span> that individuals with a negative test result do not have the disease,<strong> reflecting the <span class=\"customMeta\" data-dictid=\"552e9ef8811692777186997018b858\">diagnostic</span> power of a test to exclude disease correctly.</strong></li>\n\t<li>It indicates how well a negative test result predicts the absence of the disease.</li>\n\t<li>Formula:</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"146\" src=\"https://image.prepladder.com/content/TL3QFRpDF7NrmcLSPXEr1745560395.png\" width=\"430\" /></p>\n\n<p>\u00a0</p>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>In a population with low <span class=\"customMeta\" data-dictid=\"f86aae0bd61692777196f91458c9dd\">prevalence</span> of the disease, positive result with a highly sensitive test means true positive (Option A):</strong></p>\n\n<ul>\n\t<li>In low disease prevalence, a positive result with a highly sensitive test doesn't always mean a true positive.</li>\n</ul>\n\n<p><strong>Sensitivity depends on <span class=\"customMeta\" data-dictid=\"f86aae0bd61692777196f91458c9dd\">prevalence</span> of the disease (Option B):</strong></p>\n\n<ul>\n\t<li>Sensitivity isn't influenced by disease prevalence; it measures a test's ability to identify individuals with the disease.</li>\n</ul>\n\n<p><strong>Specificity depends on <span class=\"customMeta\" data-dictid=\"f86aae0bd61692777196f91458c9dd\">prevalence</span> of the disease (Option D):</strong></p>\n\n<ul>\n\t<li>Specificity isn't influenced by disease prevalence; it measures a test's ability to identify individuals without the disease.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/t9Y0UEkZACsMsSvKeeDg1745560395.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>What factor is the external validity of a screening test associated with?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Stability"
      },
      {
        "id": 2,
        "text": "Objectivity"
      },
      {
        "id": 3,
        "text": "Generalizability"
      },
      {
        "id": 4,
        "text": "Repeatability"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Option: C) Generalizability</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>External validity of a screening test is related to its generalizability, which determines if the test results can be applied to a broader population beyond the study sample.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Stability (Option A): </strong>Stability refers to <span class=\"customMeta\" data-dictid=\"bb67ce71481692777185f0e078535f\">consistency</span> over time.</p>\n\n<p><strong>Objectivity (Option B):</strong> Objectivity pertains to bias.</p>\n\n<p><strong>Repeatability (Option D): </strong>Repeatability concerns <span class=\"customMeta\" data-dictid=\"bb67ce71481692777185f0e078535f\">consistency</span> within individuals.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following is an example of prospective screening?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Cervical Pap smear in a 40-year-old patient"
      },
      {
        "id": 2,
        "text": "Neonatal screening of a new-born baby for hypothyroidism"
      },
      {
        "id": 3,
        "text": "Screening of immigrants for infectious diseases such as tuberculosis"
      },
      {
        "id": 4,
        "text": "Urine for sugar screening in a 40-year-old man"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Option: C) Screening of immigrants for <span class=\"customMeta\" data-dictid=\"aa279cf1f016927771903f195bb1b9\">infectious</span> diseases such as tuberculosis</strong></p>\n\n<ul>\n\t<li>Screening immigrants for diseases like <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">tuberculosis</span> ensures the health of both immigrant and host populations and is an example of <span class=\"customMeta\" data-dictid=\"22b453f7d01692777196953a3c9dd0\">prospective</span> screening.</li>\n</ul>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:624px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Prescriptive Screening</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Prospective Screening </strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Done for their own benefit.</li>\n\t\t\t\t<li>Secondary level of prevention.</li>\n\t\t\t\t<li>Early diagnosis.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Done for other's benefit.</li>\n\t\t\t\t<li>The primary level of prevention.</li>\n\t\t\t\t<li>Control/ prevention of disease.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>E.g.</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Screening neonates for <span class=\"customMeta\" data-dictid=\"77493a5b781692777193df12530299\">neonatal</span> <span class=\"customMeta\" data-dictid=\"8d4d1904791692777189941782330d\">hypothyroidism</span> <strong>(Option B ruled out)</strong></li>\n\t\t\t\t<li>Deafness in children</li>\n\t\t\t\t<li>Blood <span class=\"customMeta\" data-dictid=\"af3ae60c0c16927771889b84ca41c0\">glucose</span> testing for <span class=\"customMeta\" data-dictid=\"b6a934c67b16927771868fca92baf9\">diabetes mellitus</span> and gestational diabetes</li>\n\t\t\t\t<li>Mammography for breast cancer</li>\n\t\t\t\t<li>Pap <span class=\"customMeta\" data-dictid=\"6777533153169277719804fcbbf2d1\">smear</span> for <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> cancer <strong>(Option A ruled out)</strong></li>\n\t\t\t\t<li>Visual <span class=\"customMeta\" data-dictid=\"80d33aa6081692777180a22947db2c\">acuity</span> for <span class=\"customMeta\" data-dictid=\"cae831e44316927771973fa5e13fd7\">refractive</span> errors.</li>\n\t\t\t\t<li>Urine sugar screening for diabetes <strong>(Option D ruled out)</strong></li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>E.g.</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Screening of immigrants for diseases like TB and COVID <strong>(Option C)</strong></li>\n\t\t\t\t<li>HIV screening for blood donation</li>\n\t\t\t\t<li>HIV screening in ANC cases</li>\n\t\t\t\t<li>Health checkups for workers in the food industry.</li>\n\t\t\t</ul>\n\n\t\t\t<p>\u00a0</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A healthy person got in contact with an infected case, and they have to separate him as he is sick now. This is:</p>",
    "choices": [
      {
        "id": 1,
        "text": "Absolute quarantine"
      },
      {
        "id": 2,
        "text": "Isolation"
      },
      {
        "id": 3,
        "text": "Interruption of transmission"
      },
      {
        "id": 4,
        "text": "Serial interval"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: Option B- Isolation </strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>Isolation separates individuals who are already ill and potentially <span class=\"customMeta\" data-dictid=\"aa279cf1f016927771903f195bb1b9\">infectious</span> from others to prevent disease spread, occurring either in healthcare facilities or at home based on illness severity and resource availability.</li>\n</ul>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Isolation</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Quarantine</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>For people who are sick</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>For well people who may have been exposed to a <span class=\"customMeta\" data-dictid=\"6f6ef8bf7c1692777184dfdf8cf45d\">communicable</span> disease</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Separates people who are sick from those who are not sick</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Applies to people who may or may not become sick</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Restricts movement of people with an <span class=\"customMeta\" data-dictid=\"aa279cf1f016927771903f195bb1b9\">infectious</span> disease to stop the spread of the Illness</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Restricts the movement of healthy people who may develop a disease after possible exposure to an <span class=\"customMeta\" data-dictid=\"aa279cf1f016927771903f195bb1b9\">infectious</span> agent</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Allows for appropriate treatment in a hospital type/setting</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Requires people to stay in a designated location, e.g. their home. For a specified period of time</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Requires appropriate personal protective equipment (ppe) for those coming into contact with the person who is sick</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Requires active monitoring including taking temperature twice daily and checking for other symptoms</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Requires proper infection control, <span class=\"customMeta\" data-dictid=\"f39be0f0871692777199459d86e0a7\">sterilization</span> and waste management</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>PPE not required for contact with people who are not ill</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Absolute <span class=\"customMeta\" data-dictid=\"9a7e65b3e2169277719642f011fb46\">Quarantine</span> (Option A): </strong>It separates and restricts the movement of individuals exposed to a <span class=\"customMeta\" data-dictid=\"adc58f95b216927771853032f276b9\">contagious</span> disease but not yet <span class=\"customMeta\" data-dictid=\"509310d4411692777199f2ffdb7769\">symptomatic</span> to monitor for symptoms and prevent potential disease spread upon becoming infectious.</p>\n\n<p><strong>Interruption of transmission (Option C): </strong>Tactics to halt disease spread, including tracing, quarantine, and hygiene.</p>\n\n<p><strong>Serial interval (Option D): </strong>Time between primary and secondary case symptoms, revealing transmission patterns.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which factor has the greatest impact on positive predictive value?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Sensitivity"
      },
      {
        "id": 2,
        "text": "Prevalence"
      },
      {
        "id": 3,
        "text": "Specificity"
      },
      {
        "id": 4,
        "text": "Relative risk"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B) Prevalence</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The <span class=\"customMeta\" data-dictid=\"6ec8c6811e1692777196da36a72ad6\">positive predictive value</span> (PPV) of a test is <strong>directly proportional </strong>to the <span class=\"customMeta\" data-dictid=\"f86aae0bd61692777196f91458c9dd\">prevalence</span> of a disease it detects, i.e., PPV increases as the <span class=\"customMeta\" data-dictid=\"f86aae0bd61692777196f91458c9dd\">prevalence</span> increases provided the sensitivity and <span class=\"customMeta\" data-dictid=\"e70dd3ea9916927771988faba61d64\">specificity</span> of the test remains unchanged over the course of time (since <span class=\"customMeta\" data-dictid=\"f86aae0bd61692777196f91458c9dd\">prevalence</span> can be considered as the <strong>pre-test probability</strong> of a disease)</li>\n</ul>\n\n<p>Example:</p>\n\n<ul>\n\t<li>Total population of a town is 2000.</li>\n\t<li>Prevalence of a disease at three different time periods are 10,20 and 30% based on a <span class=\"customMeta\" data-dictid=\"32b854324a1692777185c6c79fdc99\">definitive</span> investigation.</li>\n\t<li>Sensitivity and <span class=\"customMeta\" data-dictid=\"e70dd3ea9916927771988faba61d64\">specificity</span> of a new test are 40% & 70% respectively</li>\n</ul>\n\n<p>Since the sensitivity & <span class=\"customMeta\" data-dictid=\"e70dd3ea9916927771988faba61d64\">specificity</span> are going to be considered as constants throughout, the number of<strong> true positives</strong> and hence the <strong>positive predictive values </strong>will increase proportionately to the given prevalences over these three different time periods.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Sensitivity (Option A):</strong> Sensitivity impacts the true positive rate, not PPV.</p>\n\n<p><strong>Specificity (Option C): </strong>Specificity affects the true negative rate, not PPV.</p>\n\n<p><strong>Relative Risk (Option D):</strong> Relative risk does not affect PPV.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>What is the term used to describe the time interval between points A and B in the flowchart depicting the natural progression of the disease?</p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"2593\" src=\"https://image.prepladder.com/content/EIKXQszEZhC0MejhWgkj1748156423.png\" width=\"6167\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Lead time"
      },
      {
        "id": 2,
        "text": "Screening time"
      },
      {
        "id": 3,
        "text": "Generation time"
      },
      {
        "id": 4,
        "text": "Lag time"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B) Screening time </strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>Screening time: Time from the earliest possible diagnosis point (A) to the critical diagnosis point (B).</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"745\" src=\"https://image.prepladder.com/content/QtJYGgRBNTUi1vz0I18K1748156463.png\" width=\"2481\" /></p>\n\n<p><strong>Lead time:</strong></p>\n\n<ul>\n\t<li>Time gained by early <span class=\"customMeta\" data-dictid=\"723fdec66b1692777186e92f0c6fdf\">detection</span> of disease or time difference between the earliest possible point of diagnosis and the usual time of diagnosis.<strong> (Option A ruled out)</strong></li>\n</ul>\n\n<p><strong>Generation time (Option C):</strong> It refers to the interval of time between receipt of infection by a host and <span class=\"customMeta\" data-dictid=\"c678bddb1d1692777192d2ee1ebd92\">maximal</span> <span class=\"customMeta\" data-dictid=\"4a221e3c0a1692777190dc3efa5207\">infectivity</span> of that host. This option is incorrect.</p>\n\n<p><strong>Lag Time (Option D): </strong>Not shown in the image; refers to symptom development to diagnosis. Hence, this is incorrect option.</p>",
    "question_images": [
      "https://image.prepladder.com/content/EIKXQszEZhC0MejhWgkj1748156423.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/QtJYGgRBNTUi1vz0I18K1748156463.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Secondary prevention is most useful in the early detection and treatment of which of the following cancers?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Pancreatic cancer"
      },
      {
        "id": 2,
        "text": "Ovarian cancer"
      },
      {
        "id": 3,
        "text": "Glioblastoma"
      },
      {
        "id": 4,
        "text": "Cervical cancer"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D. <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">Cervical</span> cancer</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>Secondary prevention involves early <span class=\"customMeta\" data-dictid=\"723fdec66b1692777186e92f0c6fdf\">detection</span> and prompt treatment to halt disease progression. It is most effective for cancers with a long <span class=\"customMeta\" data-dictid=\"294048dc041692777196ce2a336bb9\">preclinical</span> phase and a reliable screening test. <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">Cervical</span> cancer fits these criteria - it has a well-defined precancerous stage (CIN), and screening via Pap <span class=\"customMeta\" data-dictid=\"6777533153169277719804fcbbf2d1\">smear</span> or HPV testing can detect lesions early, allowing for effective intervention.</li>\n\t<li>Pancreatic, ovarian, and <span class=\"customMeta\" data-dictid=\"c9b2c1943e1692777188917d65bd7e\">glioblastoma</span> cancers typically lack effective population-based screening methods and have short <span class=\"customMeta\" data-dictid=\"d1a9a79f701692777182066af09044\">asymptomatic</span> phases, making secondary prevention less useful.</li>\n</ul>\n\n<p><strong>Screening methods:</strong></p>\n\n<ul>\n\t<li>Pap <span class=\"customMeta\" data-dictid=\"6777533153169277719804fcbbf2d1\">smear</span> \u2013 Cytological <span class=\"customMeta\" data-dictid=\"723fdec66b1692777186e92f0c6fdf\">detection</span> of <span class=\"customMeta\" data-dictid=\"458e050fdc16927771809854c9fd53\">abnormal</span> <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> cells.</li>\n\t<li>HPV DNA testing \u2013 Detects high-risk HPV strains.</li>\n\t<li>Visual Inspection with Acetic Acid (VIA) \u2013 Low-cost alternative in low-resource settings.</li>\n</ul>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"239\" src=\"https://image.prepladder.com/content/jfrGOSZgw5SsAKeBDjE91755855240.png\" width=\"500\" /></p>\n\n<ul>\n\t<li>WHO recommendation: Screen women aged <strong>30\u201349 years</strong> at least once, preferably <strong>every 3\u20135 years.</strong></li>\n\t<li>Early treatment of <span class=\"customMeta\" data-dictid=\"0d4e0410a5169277718498b6521933\">CIN</span> significantly reduces <span class=\"customMeta\" data-dictid=\"1c5272ad3d1692777190e71409d07a\">invasive</span> <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> cancer incidence.</li>\n</ul>\n\n<p><strong>Levels of Prevention in Cancer:</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Level</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Goal</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Example in <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">Cervical</span> Cancer</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Primary</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Prevent onset</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>HPV vaccination</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Secondary</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Early <span class=\"customMeta\" data-dictid=\"723fdec66b1692777186e92f0c6fdf\">detection</span> & prompt treatment</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Pap <span class=\"customMeta\" data-dictid=\"6777533153169277719804fcbbf2d1\">smear</span> screening</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Tertiary</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Reduce complications & recurrence</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Radiotherapy, <span class=\"customMeta\" data-dictid=\"8602c4b260169277718439bb122cb0\">chemotherapy</span> for <span class=\"customMeta\" data-dictid=\"1c5272ad3d1692777190e71409d07a\">invasive</span> CA</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Pancreatic cancer (Option A):</strong> Usually diagnosed late due to lack of early symptoms and reliable screening tests; secondary prevention is limited.</p>\n\n<p><strong>Ovarian cancer (Option B): </strong>No cost-effective, sensitive population-level screening; early <span class=\"customMeta\" data-dictid=\"723fdec66b1692777186e92f0c6fdf\">detection</span> remains challenging.</p>\n\n<p><strong>Glioblastoma (Option C):</strong> Highly aggressive, short <span class=\"customMeta\" data-dictid=\"294048dc041692777196ce2a336bb9\">preclinical</span> phase, and no screening method for <span class=\"customMeta\" data-dictid=\"d1a9a79f701692777182066af09044\">asymptomatic</span> individuals.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/jfrGOSZgw5SsAKeBDjE91755855240.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following is the best level of<span class=\"marker\"> prevention of breast cancer?</span></p>",
    "choices": [
      {
        "id": 1,
        "text": "Specific protection"
      },
      {
        "id": 2,
        "text": "Early diagnosis and treatment"
      },
      {
        "id": 3,
        "text": "Disability limitation"
      },
      {
        "id": 4,
        "text": "Rehabilitation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B - Early Diagnosis and Treatment:</strong></p>\n\n<ul>\n\t<li>Early diagnosis and treatment are key for breast cancer prevention. Detecting it early through methods like <span class=\"customMeta\" data-dictid=\"a1672bc5881692777191cad63bc4a8\">mammography</span> improves outcomes.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Option A - Specific Protection:</strong> Specific protection involves reducing risk factors, not early treatment.</p>\n\n<p><strong>Option C - Disability limitation: </strong>Disability limitation minimizes disease impact, not prevention.</p>\n\n<p><strong>Option D - Rehabilitation: </strong>Rehabilitation enhances life post-diagnosis, not prevention.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>If a patient tests positive for a disease, which of the following represents the<span class=\"marker\"> probability of her actually having the disease?</span></p>",
    "choices": [
      {
        "id": 1,
        "text": "Sensitivity"
      },
      {
        "id": 2,
        "text": "Specificity"
      },
      {
        "id": 3,
        "text": "Positive predictive value"
      },
      {
        "id": 4,
        "text": "Negative predictive value"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Option C - <span class=\"customMeta\" data-dictid=\"6ec8c6811e1692777196da36a72ad6\">Positive predictive value</span> (PPV):</strong></p>\n\n<ul>\n\t<li>PPV represents the <span class=\"customMeta\" data-dictid=\"f52ac1410416927771969ba21fcb63\">probability</span> that a person actually has the disease given a positive test result, considering sensitivity and disease prevalence.</li>\n\t<li>PPV = True Postives / (True Positives + False Positives)</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Option A - Sensitivity: </strong>Identifies true positives but doesn't assess the <span class=\"customMeta\" data-dictid=\"f52ac1410416927771969ba21fcb63\">probability</span> of having the disease.</p>\n\n<p><strong>Option B - Specificity: </strong>Identifies true negatives but doesn't assess the <span class=\"customMeta\" data-dictid=\"f52ac1410416927771969ba21fcb63\">probability</span> of having the disease.</p>\n\n<p><strong>Option D - Negative predictive value: </strong>Assesses the <span class=\"customMeta\" data-dictid=\"f52ac1410416927771969ba21fcb63\">probability</span> of not having the disease given a negative test result, not a positive one.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>In the following natural history of disease flowchart,<span class=\"marker\"> point A to C is called as?</span></p>\n\n<p><img src=\"https://image.prepladder.com/content/3U04zAuX9KKrwUn8leYo1691507959.png\" style=\"height:1697px; width:4167px\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Screening time"
      },
      {
        "id": 2,
        "text": "Lead time"
      },
      {
        "id": 3,
        "text": "Lag time"
      },
      {
        "id": 4,
        "text": "Generation time"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B - Lead time:</strong></p>\n\n<ul>\n\t<li>Lead time is the duration between the first possible point of diagnosis (A) and the final critical point of diagnosis (B). It allows for early intervention and treatment, potentially improving health outcomes.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Option A - Screening Time: </strong>Refers to the period of screening before symptoms appear, not related to points A and B in disease flow.</p>\n\n<p><strong>Option C - <span class=\"customMeta\" data-dictid=\"6ef2a80e2116927771915098fa1789\">Lag</span> Time: </strong>Refers to the time between exposure to a risk factor and symptom manifestation, not specific to points A and B.</p>\n\n<p><strong>Option D - Generation Time: </strong>Time for disease-causing agent reproduction, not relevant to points A and B in disease flow.</p>",
    "question_images": [
      "https://image.prepladder.com/content/3U04zAuX9KKrwUn8leYo1691507959.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>In a population of 1000 individuals, a screening test was conducted for DM (diabetes mellitus). It showed that 90 individuals tested positive for DM. Subsequently, a gold standard test for DM was conducted, and it showed that 100 individuals tested positive. Your task is to determine the sensitivity of the screening test.</p>",
    "choices": [
      {
        "id": 1,
        "text": "90/100"
      },
      {
        "id": 2,
        "text": "100/110"
      },
      {
        "id": 3,
        "text": "(90-10)/1000"
      },
      {
        "id": 4,
        "text": "90/1000"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Option A - 90/100:</strong></p>\n\n<ul>\n\t<li>Sensitivity measures how well a screening test identifies individuals with the disease (true positives).</li>\n</ul>\n\n<p><img src=\"https://image.prepladder.com/content/cHOewyNpii2QGyQy9Qn61713784334.png\" style=\"height:92px; width:510px\" /></p>\n\n<ul>\n\t<li>In this case, out of 100 individuals with diabetes, the screening test correctly identified 90 (true positives).</li>\n</ul>\n\n<p><img src=\"https://image.prepladder.com/content/N2LgektXdXSh0sVdeXj91713784328.png\" style=\"height:92px; width:450px\" /></p>\n\n<p>Therefore, the sensitivity of the screening test is 90/100</p>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<ul>\n\t<li><strong>Option B, C and D</strong> are incorrect.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/cHOewyNpii2QGyQy9Qn61713784334.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p><span class=\"marker\">A large number of tests were done in series. </span>Which of the following will be true?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Sensitivity and specificity will Increase"
      },
      {
        "id": 2,
        "text": "Sensitivity will decrease, and specificity will increase"
      },
      {
        "id": 3,
        "text": "Sensitivity and specificity will decrease"
      },
      {
        "id": 4,
        "text": "Sensitivity will increase, and specificity will decrease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B -\u00a0Sensitivity will decrease, and <span class=\"customMeta\" data-dictid=\"e70dd3ea9916927771988faba61d64\">specificity</span> will increase:</strong></p>\n\n<ul>\n\t<li>Sensitivity and <span class=\"customMeta\" data-dictid=\"e70dd3ea9916927771988faba61d64\">specificity</span> measure a test's performance.</li>\n\t<li>Sensitivity: Identifies individuals with the condition (true positives).</li>\n\t<li>Specificity: Identifies individuals without the condition (true negatives).</li>\n\t<li>Conducting multiple tests can reduce false positives, increasing specificity.</li>\n\t<li>Sensitivity may decrease while <span class=\"customMeta\" data-dictid=\"e70dd3ea9916927771988faba61d64\">specificity</span> increases with more tests in series.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Option A - Sensitivity and <span class=\"customMeta\" data-dictid=\"e70dd3ea9916927771988faba61d64\">specificity</span> will Increase:</strong></p>\n\n<ul>\n\t<li>Wrong, as test performance isn't directly tied to the number of tests.</li>\n</ul>\n\n<p><strong>Option C -\u00a0Sensitivity and <span class=\"customMeta\" data-dictid=\"e70dd3ea9916927771988faba61d64\">specificity</span> will decrease:</strong></p>\n\n<ul>\n\t<li>Incorrect, as multiple tests don't necessarily lower sensitivity and specificity.</li>\n</ul>\n\n<p><strong>Option D -\u00a0Sensitivity will increase, and <span class=\"customMeta\" data-dictid=\"e70dd3ea9916927771988faba61d64\">specificity</span> will decrease:</strong></p>\n\n<ul>\n\t<li>Inaccurate; sensitivity usually doesn't rise while <span class=\"customMeta\" data-dictid=\"e70dd3ea9916927771988faba61d64\">specificity</span> drops with more tests.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  }
];
        let quizName = '14 Previous Year Questions';
        const quizFilename = '14-previous-year-questions-e48aacae.html';
        let hierarchy = ["PrepLadder", "qBank", "PSM"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>