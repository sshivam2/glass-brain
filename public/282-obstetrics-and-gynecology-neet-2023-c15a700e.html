<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>282 Obstetrics And Gynecology Neet 2023 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Obstetrics & Gynecology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">18</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A partogram of a woman who is in labor is shown below. Oxytocin infusion is already given. How will you manage the condition?",
    "choices": [
      {
        "id": 1,
        "text": "Forceps-assisted delivery"
      },
      {
        "id": 2,
        "text": "Vacuum-assisted delivery"
      },
      {
        "id": 3,
        "text": "Oxytocin infusion"
      },
      {
        "id": 4,
        "text": "Cesarean section"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Based on the above partogram, there is a <strong>cephalopelvic disproportion, </strong>and the management, in this case, would be to do an&nbsp;emergency<strong> cesarian section.</strong></p>\n<p>The above partogram shows that the <strong>cervix is fully dilated</strong>, molding is 2+, the station is 3+, and oxytocin infusion is already given. The patient has <strong>adequate uterine contractions,</strong> as shown. The amniotic fluid is stained with <strong>meconium,</strong> and there is a <strong>fall</strong> in <strong>fetal heart rate,</strong> which indicates that the baby is in<strong> distress.&nbsp;</strong>This shows that there is an <strong>arrest of the fetal head</strong> with <strong>molding,</strong> which points to&nbsp;<strong>cephalopelvic disproportion.</strong></p>\n<p>In case of <strong>uterine inertia</strong> or <strong>fetal distress</strong>, the management is an <strong>emergency</strong>&nbsp;<strong>cesarean&nbsp;section,</strong> not instrumental delivery or elective cesarean section<strong>.</strong></p>\n<p>Cephalopelvic disproportion&nbsp;is a state where the <strong>normal proportion</strong> between the&nbsp;<strong>size of the fetal head</strong>&nbsp;to the&nbsp;size of the <strong>pelvis&nbsp;is disturbed</strong>. It can either occur due to an average size baby with a small pelvis or a relatively large baby with a normal pelvis.</p>\n<div class=\"page\" title=\"Page 432\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>CPD can occur at the inlet, mid-pelvis, or at pelvic outlet. It is diagnosed at these levels by the following measurements.</p>\n</div>\n</div>\n</div>\n</div>\n<p><strong>Inlet CPD</strong></p>\n<div class=\"page\" title=\"Page 432\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Obstetric conjugate &lt; 10 cm</li>\n<li>Diagonal conjugate &lt; 11 cm</li>\n<li>Transverse diameter &lt; 12 cm&nbsp;</li>\n</ul>\n<p><strong>Midpelvis CPD</strong></p>\n<ul>\n<li>Sum of the interspinous and posterior sagittal diameters of the mid pelvis &le;13 cm</li>\n<li>Interspinous diameter &lt; 8 cm</li>\n</ul>\n<p><strong>Outlet CPD</strong></p>\n<ul>\n<li>Interischial diameter&nbsp;&le; 8 cm.</li>\n</ul>\n<p>The following events may occur over the course of labor, depending on the&nbsp;degree of pelvic contraction.</p>\n<ul>\n<li><strong>Early rupture of the membranes.</strong></li>\n<li>Cord prolapse</li>\n<li><strong>Cervical dilatation is slowed.</strong></li>\n<li><strong>Obstructed labor</strong> with features of exhaustion, dehydration, ketoacidosis, and sepsis.</li>\n<li>Operative interference, shock, postpartum hemorrhage, and sepsis.</li>\n</ul>\n<div class=\"page\" title=\"Page 435\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The degree of disproportion must be assessed by clinical examination and supplemented by imaging pelvimetry. The moderate and the severe degrees can be managed by one of the following:</p>\n<div class=\"page\" title=\"Page 435\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 435\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Induction of labor</li>\n<li>Elective cesarean section at term</li>\n<li>Trial labor</li>\n</ul>\n<p>The <strong>elective cesarean</strong> section at term is commonly done in cases of a <strong>major degree</strong> of <strong>inlet </strong>contraction and in a <strong>moderate</strong> degree of <strong>inlet contraction</strong> associated with <strong>outlet contraction</strong> or complicating factors like elderly primigravida, malpresentation, post-cesarean pregnancy, etc. It is&nbsp;planned during the<strong> last week</strong> of pregnancy.</p>\n<div class=\"page\" title=\"Page 435\">&nbsp;</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<p>&nbsp;</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/97ad9e01220942de829a904f4479cd55.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A woman presents to you at 36 weeks of gestation with complaints of breathlessness and excessive abdominal distension. Fetal movements are normal. On examination, fetal parts are not easily felt and fetal heartbeat is heard but it is muffled. Her symphysis fundal height is 41 cm. Her abdomen is tense but not tender. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Abruptio placenta"
      },
      {
        "id": 2,
        "text": "Hydrocephalus of fetus"
      },
      {
        "id": 3,
        "text": "Polyhydramnios"
      },
      {
        "id": 4,
        "text": "Fetal-maternal ascites"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The diagnosis in this case in which <strong>symphysis fundal\u00a0height </strong>(SFH)<strong> is 41 cm</strong> at <strong>36 weeks of gestation</strong> and the woman presents with breathlessness and excessive abdominal distension is most likely <strong>polyhydramnios.</strong></p>\n<p><strong>Polyhydramnios</strong>\u00a0can be defined as the presence of excessive amniotic fluid, which exceeds 2,000 mL.</p>\n<p>The sonographic diagnosis of polyhydramnios can be given as</p>\n<ul>\n<li>AFI \u2265<strong>25 cm</strong></li>\n<li>Deepest vertical pocket (DVP) measuring\u00a0<strong>&gt;8 cm</strong></li>\n</ul>\n<p>Causes of polyhydramnios can be due to maternal and fetal conditions-</p>\n<ul>\n<li><strong>Maternal causes</strong> include chorioangioma\u00a0of the placenta, multiple pregnancies commonly in monozygotic twins, disorders of the cardiac or the renal system, and diabetes mellitus.</li>\n<li><strong>Fetal causes</strong> include anencephaly, spina bifida, atretic esophagus or duodenum, facial clefts, and neck masses that lead to abnormal swallowing or\u00a0hydrops fetalis.</li>\n</ul>\n<p>Patients may present with <strong>dyspnea</strong>, palpitations, and pedal edema.</p>\n<p>On examination, the following findings can be elicited:</p>\n<ul>\n<li>Markedly\u00a0<strong>enlarged abdomen</strong>\u00a0with flank fullness</li>\n<li>Tense, shiny skin with striae</li>\n<li><strong>Fundal height</strong>\u00a0<strong>more than</strong> the<strong> appropriate gestational age:</strong>\u00a0The SFH measured in cm after 24 weeks is equivalent to the number of weeks up to 36 weeks. A variance of 2 cm is regarded as typical. The SFH in 36 weeks of gestation should have been 36\u00b12 cms, which is less than in this patient.</li>\n<li><strong>Fetal parts</strong>\u00a0and the presentation\u00a0<strong>cannot</strong>\u00a0be<strong> well-defined</strong></li>\n<li><strong>Fluid thrill</strong>\u00a0will be present</li>\n</ul>\n<p>On\u00a0<strong>per vaginal</strong>\u00a0examination,\u00a0<strong>tensed bulging membranes</strong>\u00a0can be felt. Investigations to confirm the diagnosis include an\u00a0<strong>ultrasound</strong>\u00a0of the abdomen and pelvis and an evaluation of possible causes.</p>\n<p>Other options:</p>\n<p>Option A -\u00a0<strong>Placental abruption</strong> classically presents with <strong>sudden onset of abdominal pain</strong>, <strong>vaginal bleeding</strong>, and <strong>uterine tenderness</strong>. Frequent contractions and persistent hypertonus are the other findings.\u00a0When the placenta is completely detached from the uterine wall, except at the margin, blood may collect behind the placenta. This kind of presentation is known as<strong> concealed type</strong>. In another type, blood can escape via the cervix by dissecting downward between the membranes and the uterine wall. It is called the <strong>revealed type</strong>, which is the most common type.</p>\n<p>Option B - Hydrocephalus of the fetus: Hydrocephalus is a condition where there is an abnormal accumulation of cerebrospinal fluid within the brain, leading to increased head circumference in the fetus. Although it may lead to an increased symphysis fundal height, the clinical presentation of breathlessness and excessive abdominal distension in the mother is not typical of this condition.</p>\n<p>Option D - Fetal-maternal ascites can present as\u00a0<strong>Mirror syndrome. </strong>There is a connection between fetal hydrops and the onset of maternal edema, in which the mother exhibits the same symptoms as the fetus. Because the mother, the placenta, and the fetus all develop edema, the condition is also called <strong>triple edema</strong>. At least 20% of cases of hydrops have been observed to be complicated by mirror syndrome. Women most commonly present with <strong>edema</strong>. Other symptoms may include proteinuria, hypertension, the elevation of liver enzymes, and headache.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "For which of the following procedures in the given OT list, can you preferably do a hysteroscopy?",
    "choices": [
      {
        "id": 1,
        "text": "Tubal ligation"
      },
      {
        "id": 2,
        "text": "Asherman syndrome"
      },
      {
        "id": 3,
        "text": "Endocervical polyp"
      },
      {
        "id": 4,
        "text": "Subserosal fibroid"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Of the following procedures given in the OT list, <strong>Asherman syndrome</strong> is the condition for which hysteroscopy would be most preferable.\u00a0<strong>Hysteroscopy</strong> is used for the <strong>definitive</strong> <strong>diagnosis</strong> of Asherman syndrome.</p>\n<p>Asherman syndrome refers to the presence o<strong>f adhesion within </strong>the <strong>endometrial cavity</strong>. It is also called\u00a0<strong>uterine synechiae</strong> and\u00a0can be asymptomatic tiny bands or can completely or almost completely obliterate the endometrial cavity. It can occur as a result of trauma to the endometrium following <strong>vigorous</strong>\u00a0uterine\u00a0<strong>curettage</strong><strong>,</strong>\u00a0tuberculous endometritis, pelvic radiation, or endometrial ablation.</p>\n<p>Depending on the degree of scarring, patients may have\u00a0<strong>amenorrhea</strong>, <strong>hypomenorrhea,</strong>\u00a0or <strong>recurrent</strong> <strong>pregnancy</strong> <strong>loss</strong> because of inadequate placentation.\u00a0<strong>Hysterosalpingography</strong> is performed to assess the\u00a0uterine cavity and tubal patency. Intrauterine adhesions are characteristically seen as\u00a0<strong>irregular</strong>\u00a0<strong>angulated</strong> filling defects in the uterine cavity with a classic<strong> 'moth-eaten' appearance</strong>.\u00a0<strong>Definitive diagnosis </strong>(gold standard)<strong>\u00a0</strong>and\u00a0<strong>management</strong>\u00a0are done by\u00a0<strong>hysteroscopy. Hysteroscopic</strong><strong>\u00a0transection</strong>\u00a0is the surgical\u00a0<strong>treatment\u00a0</strong>of<strong> choice</strong>.</p>\n<p>Hysteroscopy has the advantage of being a minimally invasive procedure with lower risks and faster recovery times than traditional open surgery. It is often performed as an outpatient procedure, and patients can usually return to their normal activities within a day or two.</p>\n<p>Other options-</p>\n<p>Option A - <strong>Tubal ligation</strong> is done to attain <strong>permanent contraception</strong> in females, which is usually accomplished by occlusion or division of the fallopian tubes. It prevents ovum passage and fertilization. Procedures done at the time of delivery are termed puerperal sterilization.\u00a0For puerperal sterilization, <strong>suture ligation with tubal segment removal</strong> is more frequently employed. A tubal sterilization procedure done at a time unrelated to recent pregnancy is called non-puerperal tubal sterilization or interval sterilization. Currently, non-puerperal tubal sterilization is mainly accomplished via <strong>laparoscopy</strong>.</p>\n<p>Option C - <strong>Endocercival polyps</strong>\u00a0are mucinous columnar epithelium-covered benign endocervical stroma overgrowths. They often present as a single, elongated mass that is red, smooth, and projecting from the endocervical canal.<strong>\u00a0Ring forceps</strong> are used to grab endocervical polyps for excision if the stalk is thin. The stalk base of the polyp is repeatedly twisted. Surgical ligation and excision of a thick pedicle may be necessary if further severe bleeding is expected.\u00a0Although hysteroscopy can help visualize and assess these polyps, their removal is typically performed using forceps, either during a pelvic examination or during a colposcopy. Hysteroscopy is not the primary method for managing endocervical polyps.</p>\n<p>Option D -<strong> Subserosal fibroids</strong> carry higher risks for incomplete resection, difficult visualization, or uterine perforation with hysteroscopic myomectomy. Hence, a\u00a0number of parameters are taken into consideration while choosing a surgical strategy for subserosa or intramural myomas. Successful results and low recurrence rates are seen after<strong> laparoscopic leiomyoma excision.</strong></p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A primigravida presents to you with anemia early in her pregnancy. She is 7 weeks pregnant as seen on ultrasound. Her hemoglobin level is 9 g/dL. When should the iron supplements be started for her?",
    "choices": [
      {
        "id": 1,
        "text": "10 to 12 weeks"
      },
      {
        "id": 2,
        "text": "8 to 10 weeks"
      },
      {
        "id": 3,
        "text": "After 14 weeks"
      },
      {
        "id": 4,
        "text": "After 20 weeks"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The iron supplements for the 7-week pregnant mother presenting with<strong> anemia</strong>&nbsp;should be started at&nbsp;<strong>8 to 10 weeks.</strong></p>\n<div class=\"page\" title=\"Page 1063\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The Centers for Disease Control and Prevention defined anemia in pregnant women using a cut-off value. The pregnant mother is said to be anemic when the level of hemoglobin is <strong>less than 11 g/dL</strong> in the <strong>first</strong> and <strong>third trimesters</strong> and <strong>less than 10.5 g/dL</strong> in the <strong>second trimester.</strong></p>\n<p>Anemia in the first trimester is treated by <strong>oral iron therapy</strong>. According to the <strong>Anemia Mukt Bharat program</strong>,&nbsp;<strong>pregnant&nbsp;</strong>women with mild and moderate anemia are treated with <strong>two</strong>&nbsp;<strong>iron and folic acid</strong>&nbsp;tablets. Each tablet contains <strong>60 mg of elemental iron</strong> and <strong>500 mcg of folic acid</strong>. These tablets are taken daily and are supplied by the healthcare worker. Hence, in this mother iron supplementation should be started by 8-10 weeks.</p>\n<p>Drawbacks of oral therapy are <strong>intolerance</strong> presenting as epigastric pain, nausea, vomiting, constipation, or diarrhea, and <strong>unpredictable absorption rate.&nbsp;</strong>The improvement in hemoglobin levels is generally evident within <strong>3 weeks</strong> of oral iron therapy. The hemoglobin concentration is expected to rise at about <strong>0.7 gm/100 mL/week</strong>.</p>\n<p><strong>Contraindications</strong> to oral therapy are intolerance, and <strong>severe anemia</strong> in advanced pregnancy.&nbsp;The best time to start corrective iron therapy in pregnancy depends on the individual patient's needs and the presence of anemia. For most pregnant women without anemia, it is recommended to start iron supplementation between 12-16 weeks of gestation to meet the increased iron demands during pregnancy.</p>\n<p>If a pregnant woman is found to be anemic, the iron supplementation should be started as soon as the anemia is diagnosed, regardless of the gestational age. Early diagnosis and treatment of anemia are crucial to reduce the risk of complications for both the mother and the baby.</p>\n<p>In the case of severe anemia or intolerance to oral iron supplements, intravenous iron therapy may be considered, depending on the clinical situation and the patient's response to oral therapy.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old woman presents with foul-smelling bloody discharge per vagina mixed with mucous. On examination, a necrotizing growth is seen in the cervix with lateral parametrium involvement. What is the management for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Chemotherapy"
      },
      {
        "id": 2,
        "text": "Brachytherapy"
      },
      {
        "id": 3,
        "text": "Chemoradiation"
      },
      {
        "id": 4,
        "text": "Surgery"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<div class=\"page\" title=\"Page 900\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>This patient with a <strong>cervical tumor involving the parametrium</strong> has <strong>stage IIB cervical carcinoma,</strong> which is treated primarily with <strong>chemoradiation.&nbsp;</strong></p>\n<p>Stage IIB cervical cancer refers to cancer that has extended beyond the cervix and upper vagina to the parametrial tissue. It has not spread to the pelvic sidewall or the lower third of the vagina. The primary management for stage IIB cervical cancer is concurrent chemoradiation therapy. This involves the combination of external beam radiation therapy, brachytherapy, and chemotherapy (usually with cisplatin). This approach has been shown to improve overall survival and reduce the risk of local and distant recurrence compared to radiation therapy alone.</p>\n<p>Following chemoradiation, patients should be closely monitored for treatment response and potential side effects or complications. This includes regular physical examinations, Pap tests, and imaging studies as needed. The prognosis for stage IIB cervical cancer depends on various factors, such as the size of the tumor, lymph node involvement, and the patient's overall health. With appropriate treatment, the 5-year survival rate for stage IIB cervical cancer is around 58-63%.</p>\n<p>Other options:</p>\n<p>Option A: Chemotherapy alone: Chemotherapy alone is not the primary treatment for stage IIB cervical cancer. It may be used as an adjunct to other treatments, such as radiation therapy, but is not sufficient on its own.&nbsp;</p>\n<div>\n<p>Option B - Brachytherapy: Brachytherapy is a form of internal radiation therapy, in which a radioactive source is placed close to the tumor. While it is an important component of the treatment for cervical cancer, it is typically not used as a standalone treatment.</p>\n<p>Option D - Surgery: Surgery is not the primary treatment option for stage IIB cervical cancer. In some rare cases, pelvic exenteration may be performed, but this is typically reserved for patients with recurrent or persistent disease after chemoradiation.</p>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman is set to undergo a complete laparoscopic hysterectomy. She wants to know if there are any disadvantages to this procedure. What are the disadvantages of laparoscopic over open surgery?",
    "choices": [
      {
        "id": 1,
        "text": "Prolonged recovery time"
      },
      {
        "id": 2,
        "text": "Not knowing the extent of thermal burns"
      },
      {
        "id": 3,
        "text": "Increased bleeding"
      },
      {
        "id": 4,
        "text": "Increased pain"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The disadvantage of laparoscopic over open surgery is <strong>not knowing the extent of the thermal burns</strong>.</p>\n<p><strong>Diathermy burns</strong> are a particular hazard in laparoscopic surgery due to the following reasons:</p>\n<ul>\n<li>Relative <strong>lack of visibility</strong> of the entire instrument.</li>\n<li><strong>Faulty insulation</strong> of laparoscopic instruments</li>\n<li>Intraperitoneal <strong>contact of the diathermy</strong> with another metal instrument while activating the pedal.</li>\n<li><strong>Inadvertent activation</strong> of the pedal while the diathermy tip is out of the vision of the camera.</li>\n<li><strong>Retained heat</strong> in the diathermy tip touching susceptible structures, such as the bowel.</li>\n</ul>\n<p>The advantages of laparoscopic over open surgery are as follows:</p>\n<ul>\n<li><strong>Less postoperative pain</strong> (Option D)</li>\n<li><strong>Less blood loss</strong> (Option C)</li>\n<li>Cosmetically better</li>\n<li><strong>Earlier recovery</strong> and shorter postoperative stay at the hospital (Option A)</li>\n<li>Fewer intraoperative adhesions</li>\n<li>Better perception of anatomy intraoperatively</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A female presents to you with 6 weeks of amenorrhea complaining of bleeding per vagina and slight abdominal pain. The urine pregnancy test is positive and hCG level is 2800 IU/L. A mass is seen on the left adnexa measuring 3 \u00d7 2.5 cm. She is hemodynamically stable. How will you manage this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Oral methotrexate"
      },
      {
        "id": 2,
        "text": "Single-dose methotrexate injection"
      },
      {
        "id": 3,
        "text": "Serial methotrexate + leucovorin rescue"
      },
      {
        "id": 4,
        "text": "Salpingectomy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical scenario of a patient with<strong> 6 weeks of amenorrhea, </strong>abdominal pain, and vaginal bleeding with<strong> beta-hCG levels </strong>of <strong>2800 mIU/mL&nbsp;</strong>and a <strong>gestational sac in the left adnexa</strong> measuring<strong> 3 &times; 2.5 cm&nbsp;</strong>points to the diagnosis of<strong> unruptured ectopic pregnancy.&nbsp;</strong>The most appropriate management for this patient is a <strong>single dose&nbsp;of methotrexate injection</strong>.</p>\n<p>Symptoms and signs of <strong>ectopic pregnancy</strong> are often subtle or absent in unruptured ectopic pregnancy. The classic triad includes <strong>amenorrhea,</strong> which is followed by <strong>pain</strong> and <strong>vaginal bleeding</strong>. Lower abdominal and pelvic pain is usually seen with tubal rupture. The pain is severe and frequently described as sharp, stabbing, or tearing.&nbsp;</p>\n<p>Management of ectopic pregnancy:&nbsp;</p>\n<p><strong>1. Medical</strong> <strong>management</strong> is preferred in the following cases:</p>\n<div class=\"page\" title=\"Page 241\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li><strong>Low initial serum beta-hCG level</strong>&nbsp;(Less than 5,000 IU/L)</li>\n<li><strong>Small ectopic pregnancy size</strong> (Less than 3.5 cm)</li>\n<li>Absent fetal cardiac activity</li>\n<li><strong>Hemodynamically stable</strong></li>\n</ul>\n<p>The most popular method of treating ectopic pregnancies is<strong> intramuscular methotrexate</strong><strong>&nbsp;injection</strong>, which can be done in <strong>single-dose</strong> or <strong>multidose protocols</strong>. The dose for single-dose therapy is 50 mg/m<sup>2</sup> body surface area (BSA).</p>\n<p><strong>Single-dose therapy</strong>&nbsp;is preferred over the <strong>multidose protocol</strong> as the former offers <strong>simplicity, lower costs, </strong>and<strong> less involved post-therapy monitoring.&nbsp;</strong></p>\n</div>\n</div>\n</div>\n</div>\n<p><strong>2. Expectant</strong> <strong>management</strong>:&nbsp;A low initial serum hCG concentration, a considerable reduction in levels over 48 hours, and a sonographic inhomogeneous mass instead of a tubal halo or other gestational features are predictive variables for success.</p>\n<p><strong>3. Surgical management</strong> with <strong>salpingectomy</strong> or <strong>salpingostomy</strong> is done when:</p>\n<ul>\n<li>Criteria for expectant and medical management are not met</li>\n<li>Gestational sac <strong>&gt;3.5 cm</strong></li>\n<li>Fetal cardiac activity present</li>\n<li><strong>Beta-hCG &gt;5000 mIU/mL</strong></li>\n<li>Significant pain and hemoperitoneum&nbsp;</li>\n<li>Failure of expectant or medical management</li>\n<li>Clinical status of the patient warrants urgent intervention</li>\n<li>Doubtful compliance with medical management&nbsp;</li>\n</ul>\n<p>Other options:</p>\n<p>Option A: Oral methotrexate is not the preferred route for treating ectopic pregnancy, as it may lead to variable absorption and unreliable dosing. Intramuscular injection is the preferred route of administration for methotrexate in the management of ectopic pregnancy.</p>\n<p>Option C: Serial methotrexate with leucovorin rescue is a multidose protocol that can be used to treat ectopic pregnancy. However, the single-dose methotrexate injection is preferred in this case due to its simplicity, lower costs, and less involved post-therapy monitoring.</p>\n<p>Option D: Salpingectomy, the surgical removal of the affected fallopian tube, is reserved for patients who do not meet the criteria for medical management or expectant management, have significant pain and hemoperitoneum, or have failed medical management. This patient does not fulfill the criteria for surgical management.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman comes with complaints of pain and swelling in the perineal area. She also has complaints of difficulty in walking and sitting. She gives a history of multiple sexual partners. On examination, a tender swelling is seen with redness on the labia, as shown in the image given below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Chlamydial infection"
      },
      {
        "id": 2,
        "text": "Bartholin abscess"
      },
      {
        "id": 3,
        "text": "Genital Tuberculosis"
      },
      {
        "id": 4,
        "text": "Herpes infection"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Other options:</p>\n<p>Option A -<strong> Chlamydial infections</strong> typically present with <strong>vaginal discharge, dysuria, or cervicitis</strong> rather than localized pain and swelling in the perineal area. Though <em>Chlamydia</em> can cause infections in the Bartholin gland, the symptoms described in the question are more suggestive of a Bartholin abscess.</p>\n<p>Option C -<strong> Genital tuberculosis</strong> primarily <strong>affects the upper genital tract</strong>, leading to menstrual irregularities, infertility, and abdominal pain. While it can also involve the vulva and perineal area, the clinical presentation described in the question is not typical for genital tuberculosis.</p>\n<p>Option D - <strong>Genital herpes</strong> usually presents as <strong>painful ulcers or vesicles in the genital area</strong>, rather than a tender, erythematous swelling. The clinical presentation in the question is more consistent with a Bartholin abscess.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/584fe67c18cd48be989a4e38c1a4125e.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b1cdb7f0da40499e8a2a564ede7d396ax600x719.JPEG"
    ]
  },
  {
    "text": "A 23-year-old woman accompanied by her mother-in-law comes to the infertility clinic. She has been having regular intercourse for 6 months but is not able to conceive. What is the next best step?",
    "choices": [
      {
        "id": 1,
        "text": "Semen analysis for husband"
      },
      {
        "id": 2,
        "text": "Reassure and review the couple after 6 months"
      },
      {
        "id": 3,
        "text": "Hysterolaparoscopy"
      },
      {
        "id": 4,
        "text": "Diagnostic hysteroscopy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The next best step would be to<strong> reassure</strong> and review the couple after 6 months.</p>\n<p>The inability to conceive after <strong>1 year </strong>of<strong> unprotected intercourse</strong> of reasonable frequency is described as <strong>infertility.</strong></p>\n<p><strong> Infertility evaluation</strong> is offered to any couple that has <strong>failed to conceive after 1 year of regular unprotected intercourse</strong>. There is a decline in the conception rate and a rise in poor pregnancy outcomes in older women hence, the majority of experts concur that in <strong>women older than 35</strong>, evaluation may be considered after 6 months. Since the woman is 23 years old and has tried conceiving for only 6 months, it is advisable to review them in another 6 months if they fail to conceive.&nbsp;</p>\n<div class=\"page\" title=\"Page 461\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Infertility workup includes the following <strong>if required:</strong></p>\n<p>(1) Ovulation and evaluation for the diminished ovarian reserve-&nbsp;</p>\n<p>(2) Evaluation of Female reproductive tract abnormality-</p>\n<div class=\"page\" title=\"Page 465\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Hysterosalpingography</li>\n<li>Sonography</li>\n<li>Laparoscopy</li>\n<li>Hysteroscopy-&nbsp;The preferred way to diagnose intrauterine anomalies is an <strong>endoscopic assessment</strong> of the uterine cavity. Both an operating room and a doctor's office can be used for hysteroscopy. It has the ability to concurrently diagnose and treat the abnormalities.</li>\n</ul>\n</div>\n</div>\n</div>\n<p>(3) Semen analysis</p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old woman with a history of multiple sexual partners presents with lower abdominal pain for 1 month. She experiences minimal discharge and complaints of intermenstrual bleeding. What is the most likely cause?",
    "choices": [
      {
        "id": 1,
        "text": "Herpes simplex"
      },
      {
        "id": 2,
        "text": "Genital tuberculosis"
      },
      {
        "id": 3,
        "text": "Candida"
      },
      {
        "id": 4,
        "text": "Neisseria gonorrhoea"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This clinical scenario indicates infection with <strong><em>Neisseria gonorrhoeae,</em></strong> which has led to pelvic inflammatory disease.</p>\n<p><strong>Gonorrhea</strong> is a sexually transmitted disease caused by&nbsp;<em><strong>N. gonorrhoeae</strong></em>. It uses pili in adhesion to the urethra or other mucosal surfaces. The cocci penetrate the intracellular spaces to reach the subepithelial tissue by the third day of infection. The incubation period is 2-8 days.</p>\n<p>The major symptoms include <strong>vaginal&nbsp;discharge, dyspareunia,</strong>&nbsp;and&nbsp;<strong>dysuria</strong>, usually without urinary frequency or urgency. The specific symptoms seen in males and females are as follows:</p>\n<p>In females:</p>\n<p>About half the female patients remain asymptomatic. But, patients typically present with urethritis, cervical&nbsp;discharge, pruritus, dysuria, and intermenstrual bleeding.</p>\n<p>The&nbsp;<strong>ectocervix</strong>&nbsp;and&nbsp;<strong>vagina</strong>&nbsp;are&nbsp;not usually affected in&nbsp;<strong>adults</strong>&nbsp;as the&nbsp;<strong>stratified squamous epithelium is resistant</strong>&nbsp;to infection by the cocci. The&nbsp;<strong>acidic pH</strong>&nbsp;of vaginal secretions is also protective.&nbsp;The&nbsp;<strong>principal sites</strong>&nbsp;of invasion for&nbsp;<strong>gonococcal infection</strong>&nbsp;are the&nbsp;<strong>columnar</strong>&nbsp;and&nbsp;<strong>transitional epithelium</strong>.</p>\n<p>The initial infection involves the&nbsp;<strong>cervix&nbsp;uteri</strong>&nbsp;and&nbsp;<strong>urethra</strong>&nbsp;which&nbsp;may extend to&nbsp;<strong>Bartholin glands, skene glands</strong>, endometrium, and fallopian tubes. Unilateral pain and swelling over the labia may be caused by the inflammation of the&nbsp;Bartholin glands.</p>\n<p><strong>Pelvic inflammatory disease</strong>&nbsp;and&nbsp;<strong>salpingitis</strong>&nbsp;may lead to&nbsp;<strong>sterility.</strong>&nbsp;Other complications are <strong>tubo-ovarian abscesses</strong> and <strong>ectopic pregnancies</strong>. Rarely peritonitis may develop with perihepatic inflammation&nbsp;<strong>(Fitz-Hugh-Curtis syndrome).</strong>&nbsp;The patient presents with right upper quadrant pain and tenderness with abnormal liver function tests.</p>\n<p>In males:</p>\n<ul>\n<li><strong>Acute urethritis:</strong> This infection may extend along the urethra to involve the prostate, seminal vesicles, and epididymis.</li>\n<li><strong>Genital discharge:</strong> It is mucopurulent that can be described as that resembling the 'flow of seed' (semen).</li>\n<li><strong>Strictures:</strong> <strong>Chronic urethritis</strong>&nbsp;may lead to&nbsp;stricture&nbsp;formation.</li>\n<li><strong>Water-can perineum:</strong> The infection may spread to the periurethral tissues causing abscesses and multiple discharging sinuses.</li>\n</ul>\n<p>Other options:</p>\n<p>Option A: <strong>Herpes simplex</strong> presents as painful genital ulcers.</p>\n<p>Option B:&nbsp; While<strong> genital tuberculosis</strong> may present as menstrual irregularity, it is usually accompanied by systemic symptoms such as fever, malaise, and weight loss. Often with concurrent pulmonary disease. It may also present as infertility or may remain asymptomatic.</p>\n<p>Option C: <strong>Vaginal candidiasis</strong> presents as intense pruritus and copious cottage cheese vaginal discharge.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 27-year-old pregnant G3P2L2 woman presents to you at 36+6 weeks. Ultrasound is done and shows the fetus is in a transverse lie. The liquor is adequate, the placenta is normal, and she has no risk factors. Both her previous deliveries were normal vaginal deliveries. How will you manage this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Cesarean section"
      },
      {
        "id": 2,
        "text": "External cephalic version"
      },
      {
        "id": 3,
        "text": "Expectant management"
      },
      {
        "id": 4,
        "text": "Induction of labor"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A pregnant woman G3P2L2 presenting at <strong>36+6 weeks</strong> with <strong>a transverse lie </strong>without being in labor is managed with an&nbsp;<strong>external cephalic version&nbsp;</strong>(ECV), followed by vaginal delivery.</p>\n<p class=\"p1\">In a transverse lie, the fetus' long axis is perpendicular to the mother's. The shoulder is typically placed above the pelvic inlet when lying transversely. The head occupies one iliac fossa, and the other by the breech. This results in a <strong>shoulder presentation.</strong></p>\n<p class=\"p1\"><strong>Management</strong> of transverse lie:</p>\n<div class=\"page\" title=\"Page 457\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>1. Before labor/</strong><strong>early</strong> <strong>in labor - </strong>If the membranes are intact (like in this case), it is recommended that<strong> ECV</strong> should be offered and attempted whenever possible.</p>\n</div>\n</div>\n</div>\n</div>\n<p><strong>Prerequisites for ECV -&nbsp;</strong>Women who have reached 37<sup>0/7</sup> weeks of gestation. <strong>Multiparity</strong>, <strong>unengaged presenting part</strong>, nonanterior placenta, nonobese patient, and <strong>abundant amnionic fluid </strong>improves the chances of ECV.</p>\n<div class=\"page\" title=\"Page 543\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Absolute contraindications&nbsp;</strong>- When vaginal delivery is contraindicated, e.g. placenta previa</p>\n<p><strong>Relative contraindications&nbsp;</strong>- Early labor, oligohydramnios or ruptured membranes, known nuchal cord, structural uterine abnormalities, fetal growth restriction, multifetal gestation, and prior abruption of the placenta</p>\n<div class=\"page\" title=\"Page 543\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>2.</strong> <strong>Active labor&nbsp;</strong>- A <strong>cesarean delivery</strong> is frequently necessary for such a scenario (Option A). The lower uterine segment is not occupied by the fetal feet or head in a <strong>dorsoanterior</strong> or back down position. A vertical hysterotomy incision is usually necessary for such a position. In a <strong>dorsoposterior</strong> or backup position, one or both feet can be gripped through a small transverse incision and delivered by breech extraction.</p>\n<p><strong>Expectant management</strong> refers to allowing vaginal delivery to happen. It is chosen when the version fails or is contraindicated. Vaginal delivery may be considered in the case of small fetuses with congenital malformations or dead fetuses (Option C).</p>\n<p>Transverse lie (malpresentation) is a <strong>contraindication</strong>&nbsp;to <strong>induction of labor</strong> (Option D).</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 24-year-old woman who is being treated for infertility with human menopausal gonadotropin came with complaints of sudden abdominal pain, nausea, vomiting, and breathlessness. The finding of the ultrasound is shown below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Ovarian hyperstimulation syndrome"
      },
      {
        "id": 2,
        "text": "Polycystic ovarian syndrome"
      },
      {
        "id": 3,
        "text": "Theca lutein cysts"
      },
      {
        "id": 4,
        "text": "Granulosa cell tumor"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Option D -&nbsp;Most women are diagnosed with adult<strong> granulosa cell tumors</strong> <strong>after</strong> the<strong> age of 30 years</strong>, and the average age is roughly 55 years. <strong>Heavy, irregular menstrual bleeding</strong> and <strong>postmenopausal bleeding</strong> are frequent and are caused by the endometrium's extended exposure to estrogen. Breast soreness and enlargement are also seen in this condition. Instead of hormones, the mass of the ovary may be the cause of the symptoms. Abdominal pain and distension that is brought on by an expanding tumor that could potentially be hemorrhagic.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1a915ec676c74d429cd363902e1904df.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/604d6dd13cb3461687488d4e041b29a9x512x381.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/246ceb2a1d61486998bee2709d934de3x512x247.PNG"
    ]
  },
  {
    "text": "During a hysteroscopic removal of a submucosal fibroid, a fluid deficit of 2000 mL is estimated in a patient. What is the immediate complication of this?",
    "choices": [
      {
        "id": 1,
        "text": "Acute tubular necrosis"
      },
      {
        "id": 2,
        "text": "DIC"
      },
      {
        "id": 3,
        "text": "Pulmonary edema"
      },
      {
        "id": 4,
        "text": "Thromboembolism"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<table style=\"height: 87px; width: 442px;\">\n<tbody>\n<tr>\n<td style=\"width: 221px; text-align: center;\">Therapeutic indications of hysteroscopy</td>\n<td style=\"width: 205px; text-align: center;\">Diagnostic indications of hysteroscopy</td>\n</tr>\n<tr>\n<td style=\"width: 221px;\">\n<ul>\n<li>Uterine septum</li>\n<li><strong>Asherman syndrome</strong></li>\n<li>Retained IUCD</li>\n<li>Polypectomy</li>\n<li><strong>Submucous fibroid</strong></li>\n<li>Abnormal uterine bleeding</li>\n<li>Tubal sterilization using sclerosing agents</li>\n</ul>\n</td>\n<td style=\"width: 205px;\">\n<ul>\n<li>To study the endocervical mucosal lining</li>\n<li>Congenital malformations of the uterus</li>\n<li>Endometrial tuberculosis</li>\n<li><strong>Asherman syndrome</strong></li>\n<li>Misplaced IUCD</li>\n<li>Endometrial lesions</li>\n<li>Endometrial polyp</li>\n<li>Cornual tubal blockage</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Complications of hysteroscopy include :</p>\n<ul>\n<li>Early complications:\n<ol>\n<li>Anesthesia complications- air embolism can occur</li>\n<li>Uterine perforation</li>\n<li>Thermal injury with cautery and laser</li>\n<li>Sepsis</li>\n<li>Allergic reaction to dextran and glycine</li>\n<li><strong>Fluid overload</strong> occurs and can lead to <strong>pulmonary edema</strong> if the fluid deficit is <strong>more than 1000 mL</strong>. It can be managed by diuretics.</li>\n<li>Cerebral edema</li>\n<li>Cardiac failure</li>\n</ol>\n</li>\n<li>Late complications:\n<ol>\n<li>Hematometra following cervical stenosis</li>\n<li>Pelvic inflammatory disease</li>\n<li>Uterine rupture during pregnancy</li>\n<li>Dysmenorrhea</li>\n<li>Amenorrhea</li>\n</ol>\n</li>\n</ul>\n<p>Other options:</p>\n<p>Option A: Acute tubular necrosis (ATN) is a kidney disorder involving damage to the tubule cells of the kidneys, which can lead to acute kidney injury (AKI). While fluid overload can be a risk factor for AKI, it is not the immediate complication of a fluid deficit of 2000 mL in this clinical scenario.</p>\n<p>Option B: Disseminated intravascular coagulation (DIC) is a serious disorder where the proteins that control blood clotting become overactive. It is not directly related to a fluid deficit during a hysteroscopic procedure and is therefore not the immediate complication in this case.</p>\n<p>Option D: Thromboembolism refers to a blood clot that forms in a blood vessel and then breaks loose, traveling through the bloodstream and potentially causing a blockage in another part of the body. Although any surgical procedure carries a risk of thromboembolism, it is not the immediate complication related to a fluid deficit of 2000 mL in this scenario.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/56e8bad84a6e4253b74ca4bf3c8acdcfx512x469.PNG"
    ]
  },
  {
    "text": "A 54-year-old woman was diagnosed with advanced cervical cancer. She has a 14-year-old daughter. What advice would you give her daughter?",
    "choices": [
      {
        "id": 1,
        "text": "Advise HPV vaccine"
      },
      {
        "id": 2,
        "text": "Screen for BRCA mutation"
      },
      {
        "id": 3,
        "text": "Screen for PTEN mutation"
      },
      {
        "id": 4,
        "text": "Perform cervical biopsy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The patient's 14-year-old <strong>daughter</strong> should be<strong> advised to take the HPV vaccine</strong>.</p>\n<p>The patient's daughter is not at a higher risk for developing cervical cancer because it does not run in families. The etiology of cervical cancer is related to <strong>human papilloma virus (HPV) infection</strong>, and immunization against the virus is protective.&nbsp;</p>\n<p>There are three types of available HPV vaccines, Cervarix, Gardasil, and Gardasil-9.</p>\n<table style=\"height: 664px;\" border=\"1\" width=\"503\">\n<tbody>\n<tr>\n<td style=\"width: 119.344px;\">&nbsp;</td>\n<td style=\"width: 67.0625px;\"><strong>Cervarix</strong></td>\n<td style=\"width: 91.2969px;\"><strong>Gardasil</strong></td>\n<td style=\"width: 197.297px;\"><strong>Gardasil-9</strong></td>\n</tr>\n<tr>\n<td style=\"width: 119.344px;\">Characteristic and HPV subtypes</td>\n<td style=\"width: 67.0625px;\">Bivalent <strong>16</strong>,18</td>\n<td style=\"width: 91.2969px;\">Quadrivalent 6,11,<strong>16,</strong>18</td>\n<td style=\"width: 197.297px;\">Nonavalent 6,11,<strong>16,</strong>18,31,33,45,52,58</td>\n</tr>\n<tr>\n<td style=\"width: 119.344px;\">Protects against</td>\n<td style=\"width: 67.0625px;\">CIN, Ca cervix</td>\n<td style=\"width: 91.2969px;\"><strong>Anogenital warts</strong>, CIN, Ca cervix</td>\n<td style=\"width: 197.297px;\"><strong>Anogenital warts</strong>, CIN, CA cervix,&nbsp; Vulval intraepithelial neoplasia, Vaginal intraepithelial neoplasia</td>\n</tr>\n<tr>\n<td style=\"width: 119.344px;\">Dose</td>\n<td style=\"width: 67.0625px;\"><strong>0.5 mL&nbsp;</strong></td>\n<td style=\"width: 91.2969px;\"><strong>0.5 mL</strong></td>\n<td style=\"width: 197.297px;\"><strong>0.5 mL</strong></td>\n</tr>\n<tr>\n<td style=\"width: 119.344px;\">Administration</td>\n<td style=\"width: 67.0625px;\">0, 1, 7 months IM</td>\n<td style=\"width: 91.2969px;\">0, 2, 6 months IM</td>\n<td style=\"width: 197.297px;\">0, 2, 6 months IM</td>\n</tr>\n<tr>\n<td style=\"width: 119.344px;\">Administered gender</td>\n<td style=\"width: 67.0625px;\">Female and <strong>male</strong></td>\n<td style=\"width: 91.2969px;\">Female and<strong> male</strong></td>\n<td style=\"width: 197.297px;\">Female and <strong>male</strong></td>\n</tr>\n<tr>\n<td style=\"width: 119.344px;\">Ideal age range (Routine recommendation by CDC)</td>\n<td style=\"width: 67.0625px;\">11&ndash;12 years</td>\n<td style=\"width: 91.2969px;\">11&ndash;12 years</td>\n<td style=\"width: 197.297px;\">\n<p>11&ndash;12 years</p>\n<p>9&ndash;15 years - FDA approved</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 119.344px;\">ACIP age recommendation in previously unimmunized women</td>\n<td style=\"width: 67.0625px;\">13&ndash;26 years</td>\n<td style=\"width: 91.2969px;\">13&ndash;26 years</td>\n<td style=\"width: 197.297px;\">13&ndash;26 years&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p>Option 2: <strong><em>BRCA</em> mutation</strong> causes <strong>breast cancer</strong>, it is not related to cervical cancer.</p>\n<p>Option 3: <strong><em>PTEN</em> mutation</strong> on chromosome 10 causes <strong>Cowden syndrome</strong>.</p>\n<p>Option 4: Cervical biopsy is not indicated in this scenario.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 17-year-old girl is seen for primary amenorrhea. There is no development of breasts or hair in the pubic or axillary region. Her height is 155 cm and her weight is 48 kg. She has bilateral inguinal masses. On ultrasound examination, the uterus, fallopian tube, and ovary are absent. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Complete androgen insensitivity syndrome"
      },
      {
        "id": 2,
        "text": "Hypergonadotropic hypogonadism"
      },
      {
        "id": 3,
        "text": "Turner syndrome"
      },
      {
        "id": 4,
        "text": "Polycystic ovary syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Other options:</p>\n<p>Option A:&nbsp;Androgen insensitivity syndrome is an&nbsp;<strong>X-linked recessive</strong>&nbsp;disorder in which the&nbsp;<strong>androgen receptors</strong>&nbsp;are absent, scanty, or fail to respond to testosterone.&nbsp;In&nbsp;<strong>complete AIS,</strong>&nbsp;the individual is born as a&nbsp;<strong>phenotypically normal female</strong>&nbsp;but generally presents with&nbsp;<strong>primary amenorrhea.</strong>&nbsp;The&nbsp;<strong>external genitalia appears normal,</strong>&nbsp;with absent or&nbsp;<strong>scant pubic</strong>&nbsp;and&nbsp;<strong>axillary hair.</strong>&nbsp;The vagina is shortened and blind-ending with an&nbsp;<strong>absent uterus and ovaries.</strong>&nbsp;These patients may also present with a history of&nbsp;<strong>childhood inguinal hernias,</strong>&nbsp;due to the presence of undescended testis in the abdomen or in the inguinal canal. Due to the constant conversion of testosterone into estrogen, these individuals have&nbsp;<strong>normal breast development.</strong></p>\n<p>Option C: Turner's syndrome presents with a structural abnormality of the second X chromosome or has a mosaic karyotype, such as <strong>45X/46 XX.&nbsp;</strong>The clinical features of Turner&rsquo;s syndrome include&nbsp;short stature, short and wide neck, broad chest, widely spaced nipples, primary amenorrhea, congenital heart defects,&nbsp;and&nbsp;renal anomalies.&nbsp;Two X chromosomes are required for the development of ovaries. Losing one X Chromosome&nbsp;results in&nbsp;streak ovaries&nbsp;and&nbsp;<strong>inadequate estrogen production</strong>.</p>\n<p>Option D:&nbsp;<strong>Polycystic ovarian syndrome</strong>&nbsp;(PCOS) is the most common reproductive age group endocrine disorder. Patients with PCOS present with<strong>&nbsp;menstrual</strong>&nbsp;<strong>irregularities, hirsutism, acne</strong>, infertility, sleep apnea, and depression/anxiety. These are all short-term consequences of PCOS. The long-term consequences of PCOS include diabetes mellitus, endometrial cancer, and cardiovascular disease.</p>\n<p>According to<strong>&nbsp;</strong>American Society of Reproductive Medicine (<strong>ASRM</strong>) and&nbsp;European Society of Human Reproduction and Embryology (<strong>ESHRE</strong>), sonographic criteria for PCOS include</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<div class=\"page\" title=\"Page 1214\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>&gt;20 follicles and/or,</li>\n<li>Increased ovarian volume (&gt;10 mL), or both&nbsp;&nbsp;</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"ng-scope\">&nbsp;</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 16-year-old girl presents with cyclical pelvic pain every month. She has not achieved menarche yet. On examination, a suprapubic bulge can be seen in the lower abdomen. PR examination reveals a bulging swelling in the anterior aspect. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Transverse vaginal septum above the vagina"
      },
      {
        "id": 2,
        "text": "Vaginal atresia"
      },
      {
        "id": 3,
        "text": "Imperforate hymen"
      },
      {
        "id": 4,
        "text": "Cervical agenesis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given case scenario is suggestive of&nbsp;<strong>cryptomenorrhea&nbsp;</strong>due to an<strong> imperforate hymen.</strong></p>\n<p><strong>Cryptomenorrhea </strong>is a condition where menstruation occurs but is not visible due to an<strong>&nbsp;obstruction</strong>&nbsp;of the&nbsp;<strong>outflow tract</strong>.&nbsp;The menstrual fluid gets collected in the reproductive tract.&nbsp;</p>\n<p><strong>Imperforate hymen</strong> is a urogenital anomaly. Imperforate hymen results due to failure of<strong> canalization</strong> of the <strong>inferior end</strong> of the <strong>vaginal plate</strong>. This anomaly usually remains unrecognized until puberty. It can lead to mucocolpos in early infancy. Patients present with amenorrhea, cyclic abdominal pain, urinary symptoms, and a <strong>hypogastric lump</strong> on abdominal examination. A <strong>bluish bulging membrane at the vaginal opening</strong> is noted on genital examination and the Valsalva maneuver.</p>\n<p>Ultrasound of the pelvis reveals normal internal genitalia and hematocolpos. Laparoscopy should be performed along with hymenectomy to exclude endometriosis.</p>\n<div class=\"page\" title=\"Page 338\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Most common causes of cryptomenorrhea:</p>\n</div>\n</div>\n</div>\n<ul>\n<li><strong>Intact/imperforate&nbsp;hymen</strong> - a<strong> bluish convex bulge</strong> is seen</li>\n<li>Transverse vaginal septum -&nbsp;a pinkish concave covering is seen</li>\n</ul>\n<p>Ultrasound pelvis confirms the diagnosis.&nbsp;A simple <strong>cruciate incision </strong>of the <strong>hymen</strong> allows the <strong>free drainage</strong> of the collected <strong>menstrual blood&nbsp;</strong>and restores the reproductive capacity in most cases.</p>\n<p>Other options:</p>\n<p>Option A:&nbsp;<strong>Transverse vaginal septum</strong>&nbsp;occurs due to the&nbsp;<strong>failure of M&uuml;llerian duct fusion</strong>&nbsp;or&nbsp;<strong>failure of&nbsp;vaginal plate canalization</strong>. On examination,&nbsp;the&nbsp;<strong>vagina</strong>&nbsp;may appear&nbsp;<strong>shortened</strong>&nbsp;and the cervix may not be identifiable. Secondary sexual characteristics appear normal. The diagnosis can be confirmed with ultrasound or MRI.</p>\n<p>Option B:&nbsp;<strong>Vaginal atresia</strong>&nbsp;is characterized by the&nbsp;<strong>absence</strong>&nbsp;of the&nbsp;<strong>lower portion</strong>&nbsp;of the vagina with well-differentiated superior structures like the uterus. On examination, the hymenal ring is normal, proximal to which only a vaginal dimple or small pouch is found.</p>\n<p>Option D:&nbsp;<strong>Cervical agenesis</strong> is the congenital absence of the cervix typically with a <strong>normal</strong>&nbsp;<strong>uterus</strong>. These patients also lack the upper vagina in most cases. They present with <strong>primary amenorrhea</strong> and cyclic pelvic pain. If a functional endometrium is present, a patient may have a distended uterus, and endometriosis may develop. The absence of a cervix is seen on examination.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A pregnant woman comes to the clinic. She already has twins by normal delivery. Which of the following is the correct representation of her obstetric score?",
    "choices": [
      {
        "id": 1,
        "text": "G3P2"
      },
      {
        "id": 2,
        "text": "G3P1"
      },
      {
        "id": 3,
        "text": "G2P1"
      },
      {
        "id": 4,
        "text": "G2P2"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>A - Abortus or the number of pregnancies that were lost for any reason, including induced abortions or miscarriages.</li>\n<li>L - Living children</li>\n</ul>\n<p>Both Gravida and para are the<strong> numbers of pregnancies</strong> rather than babies.</p>\n<p><strong>Terminology</strong></p>\n<ul>\n<li><strong>Nulligravida:&nbsp;</strong>One who is not and has never been pregnant&nbsp;</li>\n<li><strong>Primigravida:&nbsp;</strong>One who is pregnant for the first time</li>\n<li><strong>Multigravida:&nbsp;</strong>One who has previously been pregnant</li>\n<li><strong>Nullipara:</strong>&nbsp;One who has never completed a pregnancy to the stage of viability</li>\n<li><strong>Primipara:&nbsp;</strong>One&nbsp;who has delivered only once (fetuses born alive or dead after becoming viable)</li>\n<li><strong>Multipara:&nbsp;</strong>One with 2 or more pregnancies to the stage of viability or more</li>\n<li><strong>Parturient:&nbsp;</strong>A woman in labor</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman presents to you at 36 weeks of gestation with complaints of feeling lightheadedness and dizziness when she lies on her back. She says she feels alright if she lies on her side or when walks. What is the most likely reason behind this?",
    "choices": [
      {
        "id": 1,
        "text": "Increased intracranial pressure"
      },
      {
        "id": 2,
        "text": "IVC compression"
      },
      {
        "id": 3,
        "text": "Heavy meals"
      },
      {
        "id": 4,
        "text": "Excessive venous pooling at the feet"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The most likely reason a woman at 36 weeks of gestation complains of feeling <strong>lightheadedness and dizziness</strong> when she <strong>lies on her back</strong> but <strong>feels alright</strong> if <strong>she lies on her side</strong> or walks is inferior vena cava (<strong>IVC</strong>)<strong> compression.</strong></p>\n<p>When the patient is supine during late pregnancy, the gravid uterus has a <strong>compressive effect</strong> on the<strong>&nbsp;IVC.</strong> This results in opening up collateral circulation through the means of <strong>paravertebral</strong> and<strong> azygos veins.</strong> However, in some cases, the <strong>collateral circulation</strong> is <strong>unable to open up</strong>, and the heart's venous return may get severely impaired. Syncope, tachycardia, and hypotension are produced as a result. The patient is rapidly turned to a <strong>lateral posture</strong> to return the blood pressure to normal. This phenomenon is called <strong>supine hypotension syndrome</strong> (postural hypotension).</p>\n<p>Other options-</p>\n<p>Option A- Individuals with <strong>elevated intracranial pressure</strong> may experience <strong>papilledema</strong> along with <strong>neck stiffness</strong> and <strong>visual problems</strong>. Several herniation syndromes can result from brain matter being forced through the fixed cranial apertures as the mass grows.</p>\n<p>Option C- Pregnant women are advised to <strong>avoid</strong> <strong>heavy meals</strong>&nbsp;and not to go to bed immediately after the meal. They can cause <strong>heartburn,</strong> which is common in pregnancy due to the relaxation of the esophageal sphincter.</p>\n<p>Option D-&nbsp;The <strong>pressure</strong> in the <strong>femoral vein</strong> is noticeably <strong>increased</strong>, especially in the later months.&nbsp;The gravid uterus puts pressure on the common iliac veins, particularly on the right side due to the dextrorotation of the uterus. In a lying down position during pregnancy, the femoral venous pressure increases from 8 to 10 cm of water to around 25 cm of water, and in a standing position, it increases to approximately 80 to 100 cm of water. This <strong>excessive pooling of blood</strong> in the<strong> lower limbs</strong> explains <strong>physiological edema during pregnancy</strong>. <strong>Edema, varicose veins, piles, </strong>and<strong> deep vein thrombosis</strong> are all caused by the extensibility of the veins and blood stasis in the venous system.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '282 Obstetrics And Gynecology Neet 2023';
        let hierarchy = ["Marrow", "PYQs", "Obstetrics & Gynecology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>