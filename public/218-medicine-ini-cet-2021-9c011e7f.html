<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>218 Medicine Ini-Cet 2021 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Medicine
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">28</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Identify the correct 'organism- drug to which it is intrinsically resistant' pair:",
    "choices": [
      {
        "id": 1,
        "text": "Aspergillus niger - Voriconazole"
      },
      {
        "id": 2,
        "text": "Aspergillus fumigatus - Micafungin"
      },
      {
        "id": 3,
        "text": "Candida albicans - Amphotericin B"
      },
      {
        "id": 4,
        "text": "Candida krusei - Fluconazole"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Among the given options, <strong>Candida krusei</strong> shows an<strong> intrinsic resistance </strong>to <strong>fluconazole.&nbsp;</strong>The <strong>primary</strong> or <strong>intrinsic</strong> resistance of C. krusei to azoles (<strong>fluconazole</strong> and <strong>itraconazole</strong>) is mediated through <strong>reduced</strong> <strong>susceptibility</strong> of the target <strong>enzyme&nbsp;</strong>(lanosterol 14&alpha;-demethylase)<strong>&nbsp;</strong>to inhibition by these drugs. However, improved <strong>susceptibility</strong> is seen with newer generation azoles such as <strong>voriconazole</strong>.</p>\n<p>Life-threatening systemic infections caused by <strong>Candida</strong> and <strong>Aspergillus</strong> species are usually seen in <strong>severely ill</strong> and <strong>immunocompromised</strong> patients such as HIV, chemotherapy-induced neutropenia, and transplant recipients on immunosuppressants. C. albicans and C. dubliniensis are most susceptible to currently available azoles, C. glabrata is less susceptible, whereas <strong>C. krusei is intrinsically resistant to fluconazole.&nbsp;</strong>Resistance occurs due to overexpression or point mutation in the gene encoding the target enzyme&nbsp;<strong>lanosterol 14&alpha;-demethylase. Voriconazole&nbsp;</strong>is the preferred therapy for multi-drug resistant infection with C. krusei.</p>\n<p><strong>C. albicans</strong>&nbsp;showing <strong>resistance</strong> to <strong>Amphotericin B</strong> has been increasingly reported over the past several years. But this is a <strong>secondary</strong> <strong>resistance</strong>&nbsp;due to alteration or a <strong>decrease</strong> <strong>in</strong> the amount of <strong>ergosterol</strong> in the cell membrane.</p>\n<p><strong>Aspergillus fumigatus, </strong>the&nbsp;most common species to cause Aspergillus infection worldwide, also shows an <strong>intrinsic resistance</strong> to <strong>fluconazole.&nbsp;</strong>It is <strong>susceptible</strong> to echinocandins like <strong>micafungin, </strong>which acts by<strong> inhibiting beta-(1,3)-D-glucan synthase, </strong>an enzyme necessary for the synthesis of the&nbsp;<strong>cell wall.</strong></p>\n<p><strong>A. niger&nbsp;</strong>is a common cause of <strong>otomycosis</strong> and is <strong>susceptible</strong> to azoles like <strong>voriconazole</strong>, amphotericin B, and echinocandins.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old male patient presented with a history of bilateral lower limb weakness which progressed to his upper limbs in a year. On examination, he had weakness in both lower limbs and wasting in the left upper limb. Babinski sign was positive and the deep tendon reflexes were absent. He has no sensory loss or any autonomic dysfunction. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "MS"
      },
      {
        "id": 2,
        "text": "ALS"
      },
      {
        "id": 3,
        "text": "GBS"
      },
      {
        "id": 4,
        "text": "Tropical spastic paraparesis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Multiple sclerosis (MS)</strong>&nbsp;is an autoimmune <strong>demyelinating</strong>&nbsp;and inflammatory disease of the CNS characterized by gliosis and neuronal loss. It is caused by an&nbsp;<strong>autoimmune response</strong>&nbsp;directed against components of the&nbsp;<strong>myelin </strong>sheath<strong>. </strong>Genetic predisposition with <strong>HLA-DRB1</strong>, cigarette smoking, vitamin D deficiency, and exposure to Epstein Barr virus (<strong>EBV</strong>) are known risk factors.&nbsp;Clinical features of MS include:</p>\n<div class=\"page\" title=\"Page 1271\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Visual impairment due to the involvement of the optic nerve&nbsp;<strong>(optic neuritis).</strong></li>\n<li>Involvement of the brainstem causes cranial nerve signs such as&nbsp;<strong>ataxia, nystagmus,</strong>&nbsp;and&nbsp;<strong>internuclear ophthalmoplegia (INO).</strong></li>\n<li><strong>Weakness</strong> of limb (usually <strong>UMN</strong> type), facial weakness, <strong>spasticity</strong>, <strong>hyperreflexia</strong>, Babinski signs,&nbsp;<strong>sensory impairment</strong>&nbsp;of the trunk and limbs,&nbsp;and&nbsp;<strong>loss of bladder control.</strong></li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<p><strong>Guillain-Barre syndrome </strong>(<strong>GBS</strong>)&nbsp;is an <strong>acute</strong> inflammatory demyelinating neuropathy causing&nbsp;<strong>rapidly</strong> evolving&nbsp;<strong>ascending&nbsp;paralysis</strong>.&nbsp; It is associated with&nbsp;<strong>diminished reflexes (areflexia)&nbsp;</strong>and autonomic involvement with or without sensory impairment.</p>\n<p><strong>Tropical spastic paraparesis </strong>also known as&nbsp;<strong>HTLV-1 associated myelopathy</strong><strong>&nbsp;</strong>is a <strong>slowly</strong> progressive <strong>spastic</strong> syndrome with <strong>variable sensory and bladder</strong> disturbance but <strong>no LMN</strong> involvement. Diagnosis is by demonstration of<strong> HTLV-1 specific antibody</strong> in serum by <strong>ELISA</strong> and confirmation is done using radioimmunoprecipitation or Western blot analysis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a PHC, which of the following initial screening tests are used to diagnose diabetes?",
    "choices": [
      {
        "id": 1,
        "text": "1 and 2"
      },
      {
        "id": 2,
        "text": "2 and 3"
      },
      {
        "id": 3,
        "text": "2 and 4"
      },
      {
        "id": 4,
        "text": "1, 2 and 3"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Fasting blood sugar<strong> &gt;126 mg/dL</strong> and 2-hour postprandial blood sugar<strong> &gt;200 mg/dl</strong> can be used as screening tests for diabetes in a primary health center (PHC).</p>\n<p><strong>HbA1c</strong> estimation is usually unavailable for screening at many PHCs due to low resources. In India, facilities for HbA1c estimation are usually available only at <strong>tertiary centers.</strong></p>\n<p>Random blood sugar <strong>&gt;200 mg/dL</strong> can be used for diagnosis only if the patient presents with symptoms of diabetes, hence it is <strong>not a useful screening test.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A newly diagnosed HIV patient presented with fever, cough, and hemoptysis. His sputum sample showed acid-fast bacilli. What is the appropriate management for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Start ART if CD4<200"
      },
      {
        "id": 2,
        "text": "Start ART and then ATT after 2 weeks"
      },
      {
        "id": 3,
        "text": "Start ATT and then ART after 2 weeks"
      },
      {
        "id": 4,
        "text": "Start ATT and ART simultaneously"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In an <strong>HIV</strong> patient with <strong>TB</strong>, start <strong>antitubercular therapy (ATT)</strong> first and then start <strong>antiretroviral therapy (ART)</strong> as soon as ATT is tolerated (between <strong>2 weeks and 2 months)</strong> by the patient. This is done to avoid<strong> immune reconstitution inflammatory syndrome (IRIS).</strong></p>\n<p>Among persons living with <strong>HIV with TB meningitis,</strong> ART should be delayed for at least <strong>4 weeks</strong> (and initiated within 8 weeks) after treatment for TB meningitis is initiated.</p>\n<p>Patients with<strong> HIV-related TB</strong> may experience a <strong>temporary paradoxical exacerbation</strong> of symptoms and radiographic manifestations of TB after starting<strong> ART (IRIS).</strong> This occurs as a result of <strong>immune</strong> <strong>reconstitution</strong> due to the simultaneous administration of ART and ATT.</p>\n<p>It is characterized by high fever, lymphadenopathy, expanding intra-thoracic lesions, and worsening of chest X-ray findings. Diagnosis should be made only after ruling out treatment failure and other infections. For severe cases, <strong>prednisone</strong> 1-2 mg/kg is used for 1-2 weeks and then gradually tapered.</p>\n<p>Note: <strong>CBNAAT</strong> is the <strong>preferred</strong> diagnostic technique for testing TB in PLHIV (people living with HIV). Smear microscopy has <strong>poor sensitivity</strong> in detecting TB in PLHIV due to fewer organisms in sputum, and hence is not preferred.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the pathology from the given flow-volume loop:",
    "choices": [
      {
        "id": 1,
        "text": "Fixed distal airway obstruction"
      },
      {
        "id": 2,
        "text": "Fixed central airway obstruction"
      },
      {
        "id": 3,
        "text": "Variable intrathoracic obstruction"
      },
      {
        "id": 4,
        "text": "Variable extrathoracic obstruction"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Option D:</strong> The image below shows airflow limitation and flattening in the <strong>inspiratory limb</strong> of the loop. It is seen in nonfixed variable extrathoracic obstruction.</p>\n<p>Examples: vocal cord paralysis, extrathoracic tracheomalacia, polychondritis, etc.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8e975e35ca394842a564002a6f641a73.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0080bcd3ba994b41814ab15ba2ea1347x1279x967.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0adba9b55d634cd08f5e15ab97dd37fbx1279x967.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9b7ff9aff2ef46e1b8363e4e90c5ac28x1279x967.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d654d63968a24c23abee8962cbd54874x978x662.PNG"
    ]
  },
  {
    "text": "An elderly woman presented with symptoms of confusion, thirst, and abdominal pain. On examination, she had pallor and thoracic spine tenderness. X-ray spine showed osteolytic lesions. Her lab investigations showed the following findings.  What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Metastatic breast cancer"
      },
      {
        "id": 2,
        "text": "Multiple myeloma"
      },
      {
        "id": 3,
        "text": "Primary hyperparathyroidism"
      },
      {
        "id": 4,
        "text": "Milk alkali syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario describes an <strong>elderly</strong> woman with<strong> confusion, thirst </strong>and<strong> abdominal pain</strong> along with elevated serum calcium levels (<strong>hypercalcemia</strong>), elevated creatinine suggestive of <strong>renal failure, anemia</strong> and <strong>osteolytic</strong> bone lesions<strong> (CRAB features);</strong> and <strong>hypoalbuminemia</strong> with <strong>elevated total proteins.</strong> The most likely diagnosis is<strong> multiple myeloma (MM).</strong></p>\n<p>MM is a <strong>malignant plasma cell dyscrasia</strong> with the proliferation of plasma cells derived from a single clone. It is associated with increased osteoclast activity with suppression of osteoblast activity, causing <strong>punched-out lytic</strong> lesions in the bone and hypercalcemia.</p>\n<p>Signs and symptoms include bone pain (most common), pathological fractures, recurrent bacterial infections, normocytic normochromic anemia, elevated ESR, and normal ALP.</p>\n<p>Electrophoresis shows <strong>monoclonal elevation</strong> of one immunoglobulin <strong>(M spike)</strong></p>\n<p>Urine analysis shows free kappa &amp; lambda light chains <strong>(Bence Jones proteins)</strong></p>\n<p>Peripheral smear shows <strong>rouleaux</strong> formation.</p>\n<p>The diagnosis of MM is made by using the<strong> Revised International Myeloma Working Group criteria.</strong></p>\n<p>Clonal bone marrow plasma cells<strong> &ge;10%</strong> (or) Biopsy-proven bony or extramedullary plasmacytoma and any one or more of the following myeloma-defining events is required to meet the criteria:</p>\n<p>Evidence of end-organ damage attributable to the underlying plasma cell proliferative disorder, specifically: <strong>(CRAB features)</strong></p>\n<ul>\n<li><strong>Hypercalcemia</strong>: Serum calcium level &gt;1 mg/dL higher than the upper limit of normal or &gt;11 mg/dL</li>\n<li><strong>Renal insufficiency:</strong> Creatinine clearance &lt;40 mL/min or serum creatinine &gt;2 mg/dL</li>\n<li><strong>Anemia:</strong> Hemoglobin level of &gt;20 g/L (2gm/dl) below the lowest limit of normal, or Hb &lt;10 g/dL</li>\n<li><strong>Bone lesions</strong>: One or more osteolytic lesions on skeletal radiography, computed tomography (CT), or positron emission tomography (PET-CT).</li>\n</ul>\n<p>Any <strong>one or more</strong> of the following biomarkers of malignancy:</p>\n<ul>\n<li>Clonal bone marrow plasma cells &ge;60%</li>\n<li>Serum involved/uninvolved free light-chain ratio of 100 or greater</li>\n<li>&gt;1 focal lesion on magnetic resonance imaging (MRI) that is at least 5 mm or greater in size.</li>\n</ul>\n<p><strong>Treatment</strong> includes a combination of <strong>lenalidomide/thalidomide</strong> (immunomodulatory agents), <strong>bortezomib</strong> (proteasome inhibitor), and <strong>dexamethasone</strong>.</p>\n<p><strong>International Staging System </strong>(ISS) is used for assessing <strong>prognosis</strong> in multiple myeloma patients.<strong> Serum &beta;2-microglobulin</strong> is the most important prognostic marker.</p>\n<p><strong>Other options:</strong></p>\n<p><strong>Option A:</strong> The bony metastasis in breast carcinoma is usually osteolytic. However, CRAB features, hypoalbuminemia, and elevated total protein suggest multiple myeloma.</p>\n<p><strong>Option C:</strong> Primary hyperparathyroidism is characterized by hypercalcemia and low phosphorus but is not associated with anemia and hypoalbuminemia.</p>\n<p><strong>Option D:</strong> Milk-alkali syndrome occurs after ingestion of large amounts of calcium and vitamin D supplementation. It results in hypercalcemia, alkalosis, nephrocalcinosis, and nephrolithiasis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with sinusitis, ulcerative lesions on the nasopharynx, nodular lesions with cavitations of the lung, and renal failure. Which of the following is the most useful investigation in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Test for ANCA"
      },
      {
        "id": 2,
        "text": "Biopsy to show granuloma"
      },
      {
        "id": 3,
        "text": "AFB staining of sputum"
      },
      {
        "id": 4,
        "text": "BAL"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given patient has the involvement of <strong>upper respiratory tract</strong> (chronic sinusitis, ulcerations on nasopharynx), <strong>lower respiratory tract</strong> (nodular lesions with lung cavitations), and <strong>kidneys</strong> (renal failure) which are suggestive of <strong>granulomatosis with polyangiitis</strong> (Wegener's granulomatosis) and testing for cytoplasmic ANCA (<strong>c-ANCA</strong>) would be the most helpful investigation in this condition.</p>\n<p>Granulomatosis with polyangiitis is a granulomatous and <strong>necrotizing</strong> <strong>vasculitis</strong> of the <strong>small</strong> arteries and veins that mainly affects:</p>\n<ul>\n<li><strong>Upper respiratory tract:</strong> chronic <strong>sinusitis</strong>, serous otitis media due to eustachian tube blockage, nasal septal perforation, and mucosal <strong>ulceration</strong> of the nasopharynx.</li>\n<li><strong>Lower respiratory tract:</strong> presenting with cough,<strong>&nbsp;</strong><strong>hemoptysis,</strong>&nbsp;dyspnea, and persistent pneumonitis.<strong>&nbsp;</strong>Lung involvement typically appears as multiple, bilateral <strong>nodular</strong>&nbsp;<strong>cavitary</strong> <strong>infiltrates</strong>.</li>\n<li><strong>Kidneys</strong>: focal or segmental&nbsp;<strong>glomerulonephritis</strong> presenting with proteinuria, hematuria, and hypertension. If left untreated it can lead to rapidly progressive glomerulonephritis.</li>\n</ul>\n<p>Apart from these organs, it can also affect the eyes and skin. Skin lesions present as <strong>palpable purpura</strong> or <strong>subcutaneous</strong> <strong>nodules</strong>.</p>\n<p>Lab investigations will show&nbsp;<strong>anemia,&nbsp;</strong>leucocytosis, elevated ESR, and <strong>high titers</strong> of cytoplasmic ANCA (<strong>c-ANCA</strong>) targetted against <strong>anti-proteinase-3</strong> (anti-PR-3)<strong>.</strong>&nbsp;The specificity of a positive PR-3 ANCA for Wegener's is very high, especially in the presence of active glomerulonephritis. Following treatment, PR-3 ANCA titers fall and subsequent rise in titers is predictive of <strong>relapse</strong>.<strong>&nbsp;</strong>Chest radiograph will show <strong>multiple, bilateral cavitating nodules </strong>and <strong>pulmonary infiltrates</strong>.</p>\n<p>The diagnosis is <strong>confirmed</strong> by the presence of <strong>necrotizing granulomatous vasculitis</strong> on <strong>biopsy</strong>. This finding is commonly seen in the tissues obtained from the <strong>lungs</strong>, upper airways, skin, and rarely in the kidneys.</p>\n<p>The radiograph below shows cavitating nodules in a patient with granulomatosis with polyangiitis (Wegener's).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b3e170e22ce1491fa9047ef06e13bc16x358x285.PNG"
    ]
  },
  {
    "text": "Identify the urinary crystal shown below:",
    "choices": [
      {
        "id": 1,
        "text": "Calcium oxalate"
      },
      {
        "id": 2,
        "text": "Calcium phosphate"
      },
      {
        "id": 3,
        "text": "Uric acid"
      },
      {
        "id": 4,
        "text": "Cysteine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given urinary crystal is the <strong>bipyramidal</strong> or<strong> envelope-shaped crystals</strong> of<strong> calcium oxalate dihydrate.</strong> Risk factors for calcium oxalate stones include <strong>higher urine calcium, urine oxalate, </strong>and<strong> lower urine citrate.</strong></p>\n<p><strong>Oxalate-rich</strong> <strong>foods</strong> like spinach, rhubarb, almonds, and potatoes should be avoided. Avoiding high-dose vitamin C supplements reduces endogenous oxalate production.</p>\n<p><strong>Chlorthalidone</strong> can lower urine calcium excretion and can reduce the recurrence of calcium oxalate stones. Consumption of fruits and vegetables or supplemental alkali is advised to increase urine citrate, which is a<strong> natural inhibitor</strong> of calcium oxalate and calcium phosphate stones.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2cdcf8ec7d5f4ec6b32232e7adf9ae52.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "During the discharge of a COVID patient who was treated with steroids and remdesivir, which of the following will you inform him about?",
    "choices": [
      {
        "id": 1,
        "text": "1, 3 and 4"
      },
      {
        "id": 2,
        "text": "2, 3 and 4"
      },
      {
        "id": 3,
        "text": "3, 4 and 5"
      },
      {
        "id": 4,
        "text": "1, 2, 3, 4 and 5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario describes a patient treated with <strong>steroids</strong> and <strong>remedesivir</strong> for<strong> COVID-19</strong> infection being discharged. This patient should be advised to monitor blood <strong>glucose</strong> levels as steroids can worsen glycemic status. He should be advised to watch for headache, nasal discharge, and sinusitis-like symptoms as there is a higher incidence of <strong>mucormycosis</strong> among COVID patients.</p>\n<p><strong>Other options:</strong></p>\n<p><strong>Option 1:</strong> Repeat RT-PCR after 7 days of discharge is not needed as per the updated discharge criteria.</p>\n<p><strong>Option 2:</strong> Anosmia may persist for weeks to months in those who recovered from COVID-19. Its persistence is not a dangerous sign.</p>\n<p><strong>Mucormycosis</strong> is most commonly caused by the fungus <strong>Rhizopus</strong> <strong>oryzae</strong> that is acquired through the inhalation of fungal spores from the air. It may occur during <strong>COVID</strong> infection or after a few weeks (usually around the 3rd week) of recovery from it.</p>\n<p><strong>Risk factors</strong> in COVID-19 patients include uncontrolled hyperglycemia, misuse and irrational use of steroids, leukopenia, and unhygienic humidifiers.</p>\n<p>Symptoms of rhino-orbital-cerebral mucormycosis include facial pain, facial numbness, brownish or blood-tinged nasal discharge, conjunctival suffusion and swelling, black eschar over the face, and hard palate.</p>\n<p>The presence of <strong>bilateral proptosis, chemosis, vision loss,</strong> and <strong>ophthalmoplegia</strong> suggests <strong>cavernous sinus thrombosis</strong> which is seen in advanced disease.</p>\n<p>Diagnosis is done by <strong>biopsy</strong> with the <strong>histopathological examination</strong> which shows the presence of <strong>ribbon-like aseptate hyphae</strong> (5-15 &micro; thick) <strong>branching</strong> at <strong>right</strong> <strong>angles</strong>.</p>\n<p>CT chest in pulmonary mucormycosis may show<strong> lobar consolidation, isolated masses, cavities, nodules, pleural effusion, </strong>or<strong> wedge-shaped infarct.</strong> MRI can be utilized to assess the degree of <strong>orbital </strong>and<strong> brain involvement.</strong></p>\n<p>Management includes <strong>strict glycemic control.</strong> <strong>Antifungal therapy</strong> started early on high clinical suspicion even prior to microbiological confirmation can reduce mortality.</p>\n<p><strong>Liposomal Amphotericin B</strong> (5-10 mg/kg) is the drug of choice and has to be continued for 3-6 weeks. It should be diluted in 5% dextrose and is incompatible with normal saline and Ringer lactate. Step-down therapy is to be done with <strong>oral</strong> <strong>posaconazole</strong> or <strong>isavuconazole</strong>. <strong>Renal function</strong> must be monitored during the entire treatment period.</p>\n<p><strong>Blood vessel thrombosis</strong> and <strong>tissue necrosis</strong> in mucormycosis can lead to limited penetration of antifungal drugs at the infection site. To address this, debridement of necrotic tissues is crucial in eradicating the disease.</p>\n<p><strong>Revised discharge policy</strong> for COVID-19:</p>\n<p>Mild cases discharged after at least 7 days have passed from testing positive and with no fever for 3 consecutive days. No testing is needed prior to discharge.</p>\n<p>For moderate cases, in patients whose signs and symptoms resolve and maintain saturation above 93% for 3 consecutive days, patient will be discharged as per the advice of the treating medical officer. No testing is needed prior to discharge.</p>\n<p>In severe cases including immunocompromised, discharge criteria will be based on clinical recovery at the discretion of the treating medical officer.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old man suddenly developed right-sided weakness and aphasia within 2 hours. His BP recorded was 160/110mmHg and NCCT was clear. What is the next step in  management?",
    "choices": [
      {
        "id": 1,
        "text": "CT angiography to look for large vessel occlusion"
      },
      {
        "id": 2,
        "text": "MRI to look for infarct"
      },
      {
        "id": 3,
        "text": "Tab labetalol 10 mg stat"
      },
      {
        "id": 4,
        "text": "Thrombolysis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The next step in management would be <strong>CT angiography.</strong>\u00a0<strong>NCCT and CT angiography</strong> must be <strong>done concurrently</strong>\u00a0during stroke evaluation. The given features of hemiparesis with aphasia and a clear NCCT are suggestive of an acute <strong>ischemic stroke</strong> with a <strong>proximal large vessel occlusion</strong>.\u00a0</p>\n<p>Though thrombolysis is the treatment of choice, occlusions in large vessels often fail to open up with thrombolysis alone. Hence, <strong>mechanical</strong> <strong>thrombectomy is also indicated</strong> and should be done ideally within <strong>6 hours</strong> and not beyond 24 hours of symptom onset.</p>\n<p><strong>CT angiography </strong>determines if there is an emergent large vessel occlusion (ELVO), and can be used to triage patients for management by intra-arterial mechanical thrombectomy using a retriever device.\u00a0</p>\n<p><strong>Other options:</strong></p>\n<p><strong>Option D:</strong> Thrombolysis with alteplase is the first-line therapy for acute ischemic stroke and should be initiated within 4.5 hours of symptom onset. However, <strong>mechanical thrombectomy</strong> is <strong>indicated</strong> as well for acute ischemic stroke due to a <strong>large artery occlusion</strong> in the anterior circulation. Thus, <strong>CT angiography </strong>to look for<strong> large vessel occlusion</strong> would be the next best step in the management.</p>\n<p><strong>Option B:</strong> MRI with diffusion-weighted imaging (DWI) is superior to NCCT for detecting an acute infarct. However, MRI is not preferred to NCCT because of longer scan completion time, limited availability in emergency settings, and higher cost.</p>\n<p><strong>Option C:</strong> Labetalol, nicardipine, and clevidipine are the first-line anti-hypertensive agents used in the acute phase of stroke. The blood pressure goals in ischemic stroke are:</p>\n<ul>\n<li>If the patient is to receive thrombolytic therapy, maintain BP \u2264185/110 mmHg.</li>\n<li>After thrombolytic therapy, maintain BP \u2264180/105 mmHg for at least the next 24 hours.</li>\n<li>If not treated with thrombolytic therapy, BP should not be treated acutely unless it is more than 220/120 mmHg. BP should be lowered cautiously by only 15 percent in the first 24 hours in order to preserve perfusion to the ischemic penumbra.</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In atrial fibrillation, choose the correct statements:",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3 and 4 correct"
      },
      {
        "id": 2,
        "text": "1, 2, and 3 correct"
      },
      {
        "id": 3,
        "text": "2 and 3 correct"
      },
      {
        "id": 4,
        "text": "1 and 4 correct"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Statements <strong>2 and 3</strong> are correct.</p>\n<p><strong>Novel Oral Anticoagulants (NOACs)</strong> also known as <strong>direct oral anticoagulants</strong>&nbsp;are a new class of anticoagulants that include oral thrombin inhibitor (dabigatran) and oral factor Xa inhibitors like rivaroxaban, apixaban, and edoxaban. They are easier to use, achieve reliable anticoagulation, and do not require dosage adjustment based on blood tests. They have a<strong> lower risk of intracranial hemorrhage</strong>&nbsp;compared to warfarin and are used as alternatives to warfarin for patients who have atrial fibrillation.</p>\n<p>Anticoagulation with <strong>warfarin</strong> or <strong>NOACs</strong> should be given in patients with <strong>ischemic stroke due to atrial fibrillation</strong>. In patients with small or moderate-sized infarcts and no intracranial bleeding, <strong>warfarin</strong> can be started soon <strong>(after 24 hours</strong>) after admission. The risks of transformation to hemorrhagic stroke are minimal. <strong>NOACs</strong> should be started <strong>after 48 hours</strong> as they have a more rapid anticoagulant effect.</p>\n<p>Statement 3: NOACs are <strong>contraindicated</strong> in patients with<strong> prosthetic mechanical heart valves</strong> due to a lack of sufficient evidence.</p>\n<p>Statement 1: NOACs are <strong>not used</strong> in the treatment of <strong>moderate to severe mitral stenosis</strong> (MS) due to limited clinical evidence supporting their efficacy and safety in MS.&nbsp;<strong>Warfarin</strong> is the recommended anticoagulant for patients with <strong>MS</strong> and <strong>mechanical prosthetic valves.</strong></p>\n<p>Statement 4: <strong>Beta-blockers</strong> and <strong>calcium channel blockers</strong> are the <strong>first line drugs</strong> used to acheive rate control in atrial fibrillation.&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a major diagnostic criterion of neuromyelitis optica?",
    "choices": [
      {
        "id": 1,
        "text": "Area postrema syndrome"
      },
      {
        "id": 2,
        "text": "Acute Myelitis"
      },
      {
        "id": 3,
        "text": "Focal epilepsy"
      },
      {
        "id": 4,
        "text": "Optic neuritis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Focal epilepsy is <strong>not</strong> considered a major diagnostic criterion of <strong>neuromyelitis optica (NMO).</strong></p>\n<p><strong>Neuromyelitis optica (Devic&rsquo;s disease)</strong> is an aggressive inflammatory <strong>demyelinating</strong> disorder characterized by <strong>recurrent</strong> attacks of <strong>optic neuritis and myelitis.</strong></p>\n<p>It is associated with a highly specific autoantibody directed against <strong>aquaporin-4(AQP-4).</strong> AQP-4 is localized to the <strong>foot</strong> <strong>processes</strong> of astrocytes in close proximity to endothelial surfaces.</p>\n<p>The core clinical characteristics include optic neuritis, acute myelitis, area postrema syndrome (unexplained hiccups/ nausea/ vomiting), acute brainstem syndrome, symptomatic narcolepsy or acute diencephalic clinical syndrome with <strong>Neuromyelitis Optica Spectrum Disorder (NMOSD)-</strong>typical diencephalic MRI lesions, and symptomatic cerebral syndrome with NMSOD-typical brain lesions.</p>\n<p>Attacks of optic neuritis are bilateral and severe in NMO, whereas in multiple sclerosis (MS) optic neuritis is usually unilateral. Progressive symptoms are not typical of NMO, unlike in MS. CSF findings in NMO show higher pleocytosis, with neutrophils and eosinophils in acute cases, and rare occurrence of oligoclonal bands, distinguishing it from MS.</p>\n<p>Acute attacks of NMO are treated with <strong>high-dose glucocorticoids.</strong> <strong>Plasma exchange</strong> can be used in acute attacks that do not respond to glucocorticoids.</p>\n<p>Drugs used for <strong>prophylaxis</strong> against relapses include <strong>mycophenolate mofetil, rituximab, glucocorticoids, </strong>and<strong> azathioprine.</strong> Three monoclonal antibodies approved for attack prevention include <strong>eculizumab</strong> (terminal complement inhibitor), <strong>inebilizumab</strong> (B-cell depleter), and <strong>satralizumab</strong> (IL-6 receptor blocker).</p>\n<p>NMO typically presents as a recurrent disease, with a monophasic course observed in less than 10% of patients. Untreated NMO can lead to disability, including respiratory failure, blindness, and limb paralysis. </p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Acid-base imbalance is suspected in a patient. Which of the following would you use to determine it?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2"
      },
      {
        "id": 2,
        "text": "1, 2, 3"
      },
      {
        "id": 3,
        "text": "1,  2, 4"
      },
      {
        "id": 4,
        "text": "1, 2, 3, 4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Arterial</strong> and <strong>Venous pH</strong> can be used to determine<strong> acid-base imbalance.</strong></p>\n<p><strong>Arterial blood gas</strong> (ABG) analysis is the <strong>gold standard</strong> method for the assessment of oxygen and acid-base status.</p>\n<p>Venous blood gas (VBG) analysis is increasingly being used as a substitute for ABG as the difference between the pH obtained from VBG and ABG is clinically insignificant (arterial pH typically 0.03 higher than venous pH), thus making venous pH values acceptable.</p>\n<p><strong>Other options:</strong></p>\n<p><strong>Option 3:</strong> The pO2 values also show a significant difference, with arterial pO2 (normal 95mmHg) values typically 55mmHg greater than the venous pO2 (normal 40mmHg), making venous pO2 values unacceptable.<br /> <br /><strong>Option 4:</strong> Venous pCO2 (normal range 41 to 51mmHg) values differ significantly from arterial pCO2 (normal range 35 to 45mmHg) by a range of 5 to 15mmHg which makes venous pCO2 values unacceptable.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following does not show both hyperkinetic and hypokinetic movements?",
    "choices": [
      {
        "id": 1,
        "text": "Parkinson's disease"
      },
      {
        "id": 2,
        "text": "Wilson's disease"
      },
      {
        "id": 3,
        "text": "Neurodegeneration with Brain Iron Accumulation"
      },
      {
        "id": 4,
        "text": "Huntington's chorea"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Huntington's disease </strong>(formerly known as Huntington&rsquo;s chorea) is a<strong> movement disorder</strong> that shows predominantly only <strong>hyperkinetic movements</strong> like chorea.</p>\n<p>Hyperkinetic movement disorders include tremor, dystonia, athetosis, chorea, myoclonus, and tics. Hypokinetic movements include rigidity, stiffness, and bradykinesia.</p>\n<p>Huntington's disease is a <strong>degenerative</strong> disease of the <strong>caudate</strong> <strong>nucleus</strong> and <strong>putamen</strong> (striate neurons) caused by a <strong>trinucleotide repeat (CAG)</strong> in the Huntingtin gene on <strong>chromosome 4.</strong> It is inherited in an<strong> autosomal dominant</strong> pattern and is characterized by chorea, dysarthria, gait disturbance, behavioral disturbance and cognitive impairment with dementia. The clinical manifestations increase in severity with each successive generation <strong>(anticipation).</strong> Treatment includes <strong>haloperidol, </strong>and<strong> tetrabenazine.</strong></p>\n<p>With advancing disease, a reduction in chorea may be seen along with the emergence of dystonia, rigidity, myoclonus, and bradykinesia. It can also have an akinetic, rigid, or Parkinsonian presentation in younger patients (~10% of cases) known as the Westphal variant. However, the typical presentation of Huntington's disease is characterized by hyperkinetic movements like <strong>chorea</strong>.</p>\n<p><strong>Other options:</strong></p>\n<p><strong>Option A:</strong> Parkinson's disease is characterized by both hyperkinetic (resting tremor) and hypokinetic (rigidity, stiffness, bradykinesia) movements.</p>\n<p><strong>Option B:</strong> The neurological manifestations in Wilson's disease occur due to damage of basal ganglia resulting in dystonia and tremor (hyperkinetic), parkinsonism with bradykinesia (hypokinetic), incoordination, dysarthria, and dysphagia. In advanced disease, the tremor progresses to a characteristic wing-beating flapping tremor.</p>\n<p><strong>Option C:</strong> Pantothenate kinase-associated neurodegeneration (PKAN) formerly known as Hallervorden-Spatz disease caused by PANK2 gene mutation is the most common form of Neurodegeneration with Brain Iron Accumulation (NBIA) and is manifested as a combination of dystonia (hyperkinetic), parkinsonism (hypokinetic), and spasticity. T2W-MRI shows the characteristic eye of the tiger sign due to iron accumulation in globus pallidus.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "For the diagnosis of resistant hypertension, the patient should have uncontrolled hypertension despite taking three antihypertensive drugs. This should include at least one:",
    "choices": [
      {
        "id": 1,
        "text": "Calcium channel blocker"
      },
      {
        "id": 2,
        "text": "Beta blocker"
      },
      {
        "id": 3,
        "text": "Alpha blocker"
      },
      {
        "id": 4,
        "text": "Diuretic"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>For the diagnosis of<strong> resistant hypertension,</strong> the patient should have <strong>uncontrolled hypertension</strong> despite taking <strong>three</strong> antihypertensive drugs, including at least one <strong>diuretic</strong>.</p>\n<p>While a <strong>calcium channel blocker, beta blocker, </strong>or<strong> alpha-blocker</strong> can be part of the antihypertensive regimen, the inclusion of a <strong>diuretic</strong> is necessary for the diagnosis of resistant hypertension. The diuretic helps in addressing<strong> fluid retention</strong> which is often a significant contributor to hypertension.</p>\n<p>Resistant hypertension is more common in patients aged <strong>&gt;60 years</strong> than in younger patients. It may be related to <strong>nonadherence</strong> to therapy, obesity, and excessive alcohol intake.</p>\n<p>In the absence of a specific identifiable cause, <strong>mineralocorticoid receptor antagonists</strong> like spironolactone have been found to be most effective add-on drugs for the treatment of resistant hypertension.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following conditions is associated with hypokalemic metabolic alkalosis with hypertension?",
    "choices": [
      {
        "id": 1,
        "text": "Bartter syndrome"
      },
      {
        "id": 2,
        "text": "Liddle syndrome"
      },
      {
        "id": 3,
        "text": "Gitelman syndrome"
      },
      {
        "id": 4,
        "text": "Gordon syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Liddle's syndrome&nbsp;</strong>is associated with <strong>hypokalemic</strong> metabolic <strong>alkalosis</strong> with <strong>hypertension.</strong></p>\n<p>It is an <strong>autosomal dominant</strong> condition due to a <strong>gain of function mutation</strong> in the <strong>ENaC gene,</strong> which codes for the <strong>epithelial sodium channels</strong> present in the kidney. </p>\n<p><strong>Hypertension</strong> is the result of increased sodium retention through <strong>ENaC channel</strong> and <strong>volume expansion.</strong> Volume expansion suppresses renin and aldosterone secretion, leading to<strong> hypokalemic metabolic alkalosis.</strong></p>\n<p class=\"p1\">Treatment is with diuretics that directly block the ENaC channels, like&nbsp;<strong>amiloride</strong>&nbsp;and <strong>triamterene. </strong>Spironolactone is not effective as it is an aldosterone-receptor antagonist.</p>\n<p class=\"p1\">Other options:</p>\n<p class=\"p1\">Option A: <strong>Bartter syndrome</strong> is an <strong>autosomal recessive</strong> disorder occurring due to defects in various genes involved in the regulated <strong>Na+, K+, and Cl&ndash;</strong> transport by the <strong>thick ascending loop of Henle.</strong> There is extracellular fluid volume depletion with low or normal blood pressure. It is characterized by metabolic alkalosis, hypokalemia, hypochloremia, and hypercalciuria.</p>\n<p class=\"p1\"><br />Option C: <strong>Gitelman syndrome</strong> is an<strong> autosomal recessive</strong> disorder due to a loss of function mutation in the thiazide-sensitive <strong>Na+-Cl&ndash; cotransporter</strong> of the distal convoluted tubule. It is characterized by hypokalemic metabolic alkalosis with hypomagnesemia and hypocalciuria with low blood pressure.</p>\n<p class=\"p1\">Option D- <strong>Gordon syndrome&nbsp;</strong>is a state of pseudohypoaldosteronism. It is characterized by hypertension, <strong>hyperkalemia</strong>, metabolic <strong>acidosis,</strong> and low-normal plasma renin activity and aldosterone concentrations.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not true about syndrome of inappropriate antidiuretic hormone secretion (SIADH)?",
    "choices": [
      {
        "id": 1,
        "text": "Urinary sodium <20 mEq/L"
      },
      {
        "id": 2,
        "text": "Serum sodium <135 mEq/L"
      },
      {
        "id": 3,
        "text": "Urine osmolality >100 mOsm/kg"
      },
      {
        "id": 4,
        "text": "Patient can be clinically euvolemic to hypervolemic"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In <strong>SIADH</strong>, the kidneys retain water, leading to<strong> volume expansion</strong> and <strong>natriuresis</strong>. Therefore, urinary sodium levels are typically <strong>higher</strong> <strong>than 20 mEq/L.</strong></p>\n<p><strong>Other options:</strong></p>\n<p><strong>Option B:</strong> SIADH is a condition where there is an inappropriate release of antidiuretic hormone (ADH), leading to impaired water excretion and dilutional hyponatremia.</p>\n<p><strong>Option C:</strong> ADH promotes the reabsorption of water and not the solutes resulting in concentrated urine. This is depicted as high urine osmolality.</p>\n<p><strong>Option D:</strong> Patients can be hypervolemic due to water retention. However, persistently elevated ADH levels can induce vasopressin escape mechanism, resulting in the typical euvolemic status.</p>\n<p>Patients usually present with <strong>hyponatremia</strong> with a <strong>euvolemic</strong> status.</p>\n<p><strong>Acute hyponatremia</strong> may present with mild headache, confusion, anorexia, nausea, vomiting, coma, and convulsions.</p>\n<p><strong>Chronic hyponatremia</strong> allows cerebral adaptation, and the patients are asymptomatic despite the hyponatremia.</p>\n<p>Laboratory findings in <strong>SIADH</strong> include:</p>\n<ul>\n<li>Hyponatremia: serum Na+&lt;135 mEq/L</li>\n<li>Urinary Na+ &gt;25 mEq/L </li>\n<li>Urine osmolality &gt;100 mOsm/kg</li>\n<li>Blood urea nitrogen (BUN) levels are low, usually &lt;10 mg/dL</li>\n<li>Serum urate is low</li>\n<li>Serum K+ and serum bicarbonate are normal</li>\n</ul>\n<p><strong>Mild and symptomatic hyponatremia</strong> can be managed by <strong>restricting fluid intake.</strong></p>\n<p><strong>Severe, symptomatic</strong> hyponatremia can be corrected using <strong>hypertonic</strong> <strong>saline</strong> or <strong>vasopressin receptor-2 antagonists</strong> (tolvaptan and conivaptan).</p>\n<p>Other drugs which are useful in the management are demeclocycline and fludrocortisone.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient came with hypoxemia and a normal alveolar-arterial oxygen gradient. What can be the cause?",
    "choices": [
      {
        "id": 1,
        "text": "Right to left shunt"
      },
      {
        "id": 2,
        "text": "Ventilation/Perfusion mismatch"
      },
      {
        "id": 3,
        "text": "Hypoventilation"
      },
      {
        "id": 4,
        "text": "Alveolar membrane damage"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>All of the given options can cause <strong>hypoxemia</strong> out of which the <strong>alveolar-arterial oxygen gradient (A-a gradient)</strong> remains <strong>normal</strong> in <strong>hypoventilation</strong>.</p>\n<p>The A-a gradient or the alveolar-arterial oxygen gradient refers to the <strong>difference</strong> between the <strong>oxygen concentration in the alveoli (PAO<sub>2</sub>)</strong> and oxygen concentration in the <strong>arterial system (PaO<sub>2</sub>).</strong></p>\n<p>A-a gradient=&nbsp;PAO<sub>2 </sub>-&nbsp;PaO<sub>2</sub></p>\n<p>In <strong>hypoventilation</strong>, patients lack oxygen tension in the respiratory system as well as their arterial system. This results in a <strong>decrease in both PAO2 and PaO2</strong> and <strong>A-a gradient</strong> remains <strong>normal</strong>. Hypoventilation can be seen in<strong> CNS depression,</strong> neuromuscular diseases such as <strong>myasthenia gravis,</strong> <strong>kyphoscoliosis</strong>, vertebral fractures, etc.</p>\n<p><strong>Other options:&nbsp;</strong></p>\n<p>Option A- In a <strong>right-to-left shunt</strong>, a portion of the pulmonary blood flow gets shunted away from the alveoli. This results in ventilation without perfusion which causes a higher V/Q ratio. Here, diffusion between capillaries and alveoli is unaffected,&nbsp; but the <strong>arterial PaO<sub>2</sub></strong> is <strong>decreased</strong> due to the lack of oxygenation of the shunted blood. This results in hypoxemia and an <strong>increased A-a gradient. </strong>In the cases of the shunt, oxygenation does not improve hypoxemia.</p>\n<p>Option B- <strong>Ventilation/Perfusion (V/Q) mismatch</strong> is the most common cause of hypoxemia.</p>\n<p><strong>Low V/Q mismatch</strong> occurs in <strong>chronic obstructive pulmonary disorder</strong> (COPD), <strong>asthma, interstitial lung disease,</strong> etc. In these cases, the <strong>A-a oxygen gradient</strong> is <strong>increased</strong> due to a defect in diffusion resulting in hypoxemia. </p>\n<p>A <strong>high V/Q</strong> ratio is seen in<strong> pulmonary embolism</strong> (PE) where there is wasted ventilation. The alveolar oxygen is normal but there is decreased perfusion resulting in <strong>increased A-a gradient.</strong> </p>\n<p>Inspiratory hypoxia, seen at h<strong>igh altitudes,</strong> can cause a <strong>V/Q mismatch.</strong> The decreased atmospheric pressure causes a decreased PAO2. There is normal diffusion which suggests a <strong>normal A-a gradient</strong> while the arterial PaO2 decreases, leading to <strong>hypoxemia</strong>.</p>\n<p>Hypoventilation is the better answer as the cause of the V/Q mismatch is not specified.</p>\n<p>Option D: <strong>Alveolar membrane damage</strong> affects diffusion between the alveoli and capillaries. The oxygen levels in the arterial blood decrease even though alveoli are being ventilated. This leads to an <strong>increased A-a gradient.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Treatment of choice for an acute attack of cluster headache is :",
    "choices": [
      {
        "id": 1,
        "text": "Oral sumatriptan"
      },
      {
        "id": 2,
        "text": "Subcutaneous sumatriptan"
      },
      {
        "id": 3,
        "text": "100% oxygen at 6 L/minute"
      },
      {
        "id": 4,
        "text": "100% oxygen at 8 L/minute"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Among the given options, <strong>subcutaneous injection</strong> of <strong>sumatriptan</strong> <strong>(6 mg)</strong> is used in the treatment of an <strong>acute attack </strong>of<strong> cluster headache.</strong></p>\n<p>The <strong>treatment of choice</strong> for an acute attack of cluster headache is <strong>100 % oxygen</strong> at <strong>10-12 L /min.</strong> High flow and high oxygen content are important. 100 % oxygen at <strong>6 or 8 L/min (Options C and D)</strong> is <strong>insufficient</strong>.</p>\n<p><strong>Oral sumatriptan (Option A)</strong> is <strong>not</strong> effective for the treatment of acute attack of cluster headaches.</p>\n<p><strong>Sumatriptan (20 mg)</strong> and <strong>zolmitriptan (5 mg)</strong> <strong>nasal spray</strong> and noninvasive vagus nerve stimulation (nVNS) can also be used for the treatment of acute episodes of cluster headaches.</p>\n<p><strong>Cluster headache</strong> is a rare primary headache characterized by daily attacks of short-duration unilateral headaches lasting <strong>8-10 weeks</strong> a year. It presents as severe, brief (15-180 minutes) <strong>unilateral retro-orbital pain</strong> with autonomic features, such as unilateral <strong>lacrimation</strong>, <strong>nasal congestion</strong>, and <strong>conjunctival</strong> <strong>injection</strong>. Patients are usually perfectly well in between episodes.<br /><br /><strong>Verapamil</strong> is the <strong>drug of choice</strong> for <strong>prophylaxis</strong>. Other drugs used are prednisone, topiramate, lithium, gabapentin, melatonin, and greater occipital nerve injection with lidocaine and glucocorticoids.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All are true regarding heart failure except:",
    "choices": [
      {
        "id": 1,
        "text": "Regardless of ejection fraction and the type of heart failure, the 5 year mortality rate is around 50%"
      },
      {
        "id": 2,
        "text": "Non-cardiovascular death is more in HFrEF -30-40% as compared to HFpEF -15%"
      },
      {
        "id": 3,
        "text": "Angiotensin converting enzyme (ACE) inhibitors cause cough in 15% and angioedema in 1%"
      },
      {
        "id": 4,
        "text": "Atrial fibrillation is common in elderly and is the cause of stroke in quarter of the stroke cases"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Non-cardiovascular deaths</strong> are more in heart failure with <strong>preserved</strong> ejection fraction (HFpEF) as compared to heart failure with reduced ejection fraction (HFrEF).</p>\n<p><strong>Non-cardiac causes</strong> accounted for <strong>62%</strong> of deaths in HFpEF, <strong>54%</strong> in HFmrEF (heart failure with mildly reduced ejection fraction), and <strong>35%</strong> in HFrEF. Cancer was twice as frequent as a cause of death in HFpEF and HFmrEF versus HFrEF.</p>\n<p>Heart failure is divided according to the ejection fraction:</p>\n<div class=\"page\" title=\"Page 87\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Heart failure with <strong>preserved ejection fraction</strong> <strong>(HFpEF)</strong>: Left ventricular ejection fraction is <strong>&gt;40-50%</strong></li>\n<li>Heart failure with <strong>reduced ejection fraction (HFrPF):</strong>&nbsp;Left ventricular ejection fraction is <strong>&lt;40%</strong></li>\n</ul>\n<p>Patients with a left ventricular ejection fraction between 40% and 50% are considered to have borderline or mid-range EF.</p>\n</div>\n</div>\n</div>\n</div>\n<p><strong>Other options:</strong></p>\n<p>Option A: 'Regardless of the EF and the type of heart failure, the 5-year mortality rate is around 50%' is a true statement. The development of symptomatic heart failure has a poor prognosis. 30-40% of patients die within 1 year of diagnosis. <strong>More than 50%</strong> (60-70%) die within 5 years.</p>\n<p>Option C:&nbsp;Angiotensin-converting enzyme (ACE) inhibitors cause cough in <strong>15%</strong> and rashes and angioedema in<strong> 1%</strong>. ACE inhibitors inhibit the angiotensin-converting enzyme and inhibit the conversion of angiotensin I to angiotensin II. ACE also splits bradykinin, substance P, enkephalins, etc. The bradykinin and substance P which are not broken down lead to cough, urticaria, and rarely angioedema.</p>\n<div class=\"page\" title=\"Page 263\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Option D: The prevalence of atrial fibrillation increases with age, and &gt;95% of AF patients are <strong>&gt;60 years</strong> of age. Atrial fibrillation increases the risk of stroke by five-fold and is estimated to be the cause of <strong>25% of strokes</strong>.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old female patient with class II pulmonary hypertension presents with a negative vasoreactivity test. Which of the following is used in the next step of management?",
    "choices": [
      {
        "id": 1,
        "text": "Iloprost"
      },
      {
        "id": 2,
        "text": "Ambrisentan"
      },
      {
        "id": 3,
        "text": "Nifedipine"
      },
      {
        "id": 4,
        "text": "Epoprostenol"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Revised <strong>WHO classification</strong> of pulmonary hypertension:</p>\n<ul>\n<li>Group I: Pulmonary arterial hypertension (PAH)</li>\n<li>Group II: Pulmonary hypertension with left heart disease</li>\n<li>Group III: Pulmonary hypertension associated with lung diseases and/or hypoxemia</li>\n<li>Group IV: Pulmonary hypertension due to chronic thrombotic and/or embolic disease (CTEPH)</li>\n<li>Group V: Pulmonary hypertension due to miscellaneous causes</li>\n</ul>\n<p>The table below provides guidance on the prognosis of PAH.</p>\n<table style=\"height: 116px; width: 324px;\">\n<tbody>\n<tr>\n<td style=\"width: 124.84375px;\"><strong>Determinants</strong>&nbsp;</td>\n<td style=\"width: 80.953125px;\"><strong>Low risk&nbsp;</strong></td>\n<td style=\"width: 181.234375px;\"><strong>High risk</strong></td>\n</tr>\n<tr>\n<td style=\"width: 124.84375px;\">Clinical evidence of RV failure</td>\n<td style=\"width: 80.953125px;\">No</td>\n<td style=\"width: 181.234375px;\">Yes</td>\n</tr>\n<tr>\n<td style=\"width: 124.84375px;\">Progression of symptoms</td>\n<td style=\"width: 80.953125px;\">Gradual</td>\n<td style=\"width: 181.234375px;\">\n<p>Rapid</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 124.84375px;\">Echocardiography</td>\n<td style=\"width: 80.953125px;\">Minimal RV dysfunction</td>\n<td style=\"width: 181.234375px;\">Pericardial effusion, significant RV enlargement/dysfunction, right atrial enlargement</td>\n</tr>\n<tr>\n<td style=\"width: 124.84375px;\"><strong>WHO functional class&nbsp;</strong></td>\n<td style=\"width: 80.953125px;\"><strong>II, III</strong></td>\n<td style=\"width: 181.234375px;\"><strong>IV</strong></td>\n</tr>\n<tr>\n<td style=\"width: 124.84375px;\">6min walk distance</td>\n<td style=\"width: 80.953125px;\">Longer (&gt;400 m)</td>\n<td style=\"width: 181.234375px;\">Shorter (&lt;300 m)</td>\n</tr>\n<tr>\n<td style=\"width: 124.84375px;\">BNP</td>\n<td style=\"width: 80.953125px;\">Minimally elevated</td>\n<td style=\"width: 181.234375px;\">Significantly elevated</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e78da2196a8f48dc97e5db27603061c7x1280x1794.JPEG"
    ]
  },
  {
    "text": "A 30-year-old female patient came to the outpatient department with complaints of neck swelling. She gives a history of weight loss and palpitations. On examination, she has exophthalmos and a diffusely enlarged thyroid gland. What are the essential investigations that should be done for the patient?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3, 4, and 5"
      },
      {
        "id": 2,
        "text": "1, 3, 5 only"
      },
      {
        "id": 3,
        "text": "3, 4, 5 only"
      },
      {
        "id": 4,
        "text": "1, 3, 4 and 5 only"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario of a female patient presenting with <strong>weight loss,</strong> <strong>palpitations</strong>, <strong>exophthalmos</strong>, and diffusely <strong>enlarged thyroid</strong> gland is suggestive of <strong>Graves' disease</strong>.</p>\n<p>The essential investigations in this patient would be <strong>thyroid function tests,</strong> <strong>ultrasound</strong> of the neck, thyroid <strong>scan</strong>, and <strong>anti-thyroid antibody.</strong> FNAC is not an essential investigation in this condition. <strong>FNAC</strong> should be done on nodules that are not classified as fully benign on ultrasound.</p>\n<p>The hyperthyroidism of Graves&rsquo; disease is caused by <strong>thyroid-stimulating immunoglobulin</strong> (TSI) synthesized by lymphocytes in the thyroid gland as well as in bone marrow and lymph nodes. TSI antibodies cause stimulation of the thyroid gland causing features of hyperthyroidism.</p>\n<p>Symptoms include hyperactivity, heat intolerance, sweating, palpitations, weakness, weight loss, increased appetite, and diarrhea.</p>\n<p>Signs include tachycardia, goiter, tremor, muscle weakness, and atrial fibrillation in the elderly.</p>\n<p><strong>Thyroid ophthalmopathy</strong> seen in one-third of patients with Grave&rsquo;s disease.</p>\n<p><strong>NO SPECS scoring system</strong> as describe below can be used to evaluate ophthalmopathy.</p>\n<ul>\n<li><strong>N</strong>o signs or symptoms</li>\n<li><strong>O</strong>nly signs (lid retraction, or lag)</li>\n<li><strong>S</strong>oft tissue involvement (periorbital edema)</li>\n<li><strong>P</strong>roptosis</li>\n<li><strong>E</strong>xtraocular muscle involvement</li>\n<li><strong>C</strong>orneal involvement</li>\n<li><strong>S</strong>ight loss</li>\n</ul>\n<p><strong>Thyroid dermopathy</strong> usually occurs in the presence of moderate or severe ophthalmopathy. It primarily manifests as noninflamed, indurated plaques with a deep pink or purple color and an<strong> \"orange skin\" appearance,</strong> commonly found on the anterior and lateral aspects of the lower leg (known as <strong>pretibial myxedema).</strong></p>\n<p>Investigations done in a patient with Graves' disease include:</p>\n<ul>\n<li><strong>Thyroid function tests-</strong> TSH levels are decreased with or without elevated T3 and T4 levels.</li>\n<li><strong>Anti-thyroid antibodies-</strong> Elevated levels of TSH receptor antibodies are diagnostic of Graves' disease. Other antibodies like anti-Tg and anti-TPO are elevated in most of the patients.</li>\n<li><strong>Ultrasound</strong> of the neck is performed to evaluate vascularity, echogenicity, nodules, and clinical landmarks for surgical planning.</li>\n<li>A <strong>radioactive iodine uptake (RAIU) scan</strong> (thyroid scan) should be performed and a diffuse uptake confirms the diagnosis of Graves' disease. It is also useful to differentiate TSI-negative Graves disease from toxic nodular disease based on diffuse or nodular uptake patterns.</li>\n<li><strong>CT or MRI</strong> scans of the orbits are useful to evaluate Graves&rsquo; ophthalmopathy.</li>\n</ul>\n<p>Hyperthyroidism can be treated by <strong>antithyroid</strong> <strong>drugs</strong>, r<strong>adioiodine treatment (I131)</strong>, or <strong>thyroidectomy</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drugs is preferred in the management of primary progressive multiple sclerosis ?",
    "choices": [
      {
        "id": 1,
        "text": "Natalizumab"
      },
      {
        "id": 2,
        "text": "Ocrelizumab"
      },
      {
        "id": 3,
        "text": "Fingolimod"
      },
      {
        "id": 4,
        "text": "Alemtuzumab"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Ocrelizumab</strong> is preferred in the management of<strong> primary progressive multiple sclerosis (PPMS). Natalizumab</strong>, <strong>fingolimod</strong>, and <strong>alemtuzumab</strong> are used in the management of relapsing <strong>multiple sclerosis</strong> and not PPMS.</p>\n<p><strong>Ocrelizumab</strong> is a <strong>monoclonal antibody</strong> against <strong>CD20</strong> molecules present on <strong>B cells.</strong> It reduces the progression of the disease and improves other clinical parameters.</p>\n<p><strong>Multiple sclerosis</strong> (MS) is an <strong>autoimmune</strong> disease characterized by chronic inflammation, demyelination, gliosis (scarring), and neuronal loss.</p>\n<p>Based on <strong>clinical</strong> <strong>course</strong>, MS is <strong>classified</strong> as:</p>\n<ul>\n<li>Relapsing or bout onset MS (RMS)</li>\n<li>Secondary progressive MS (SPMS)</li>\n<li>Primary progressive MS (PPMS)</li>\n</ul>\n<p>The drugs used in the management of RMS are listed in the table below:</p>\n<table>\n<tbody>\n<tr>\n<td>Highly effective</td>\n<td>Moderately effective</td>\n<td>Modestly effective</td>\n</tr>\n<tr>\n<td>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Anti CD20 antibodies: Ocrelizumab, Ofatumumab, Rituximab</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Anti integrin antibody: Natalizumab</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Anti CD 52 antibody: Alemtuzumab</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Mitoxantrone</li>\n</ul>\n</td>\n<td>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Sphingosine-1-phosphate inhibitor: Fingolimod</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Dimethyl fumarate</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Cladribine</li>\n</ul>\n</td>\n<td>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Glatiramer acetate</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Interferon beta</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Teriflunomide</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;<strong>Siponimod</strong>, a selective <strong>S1P1 S1P5 modulator,</strong> reduces the risk of progression of SPMS. Ocrelizumab, cladribine and high dose interferon beta can also be used.</p>\n<p><strong>Ocrelizumab</strong> is the <strong>first</strong> drug to alter the progression of disability in <strong>PPMS.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The blood investigation of a patient is given below. What is the probabale diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Acute hepatitis B"
      },
      {
        "id": 2,
        "text": "Chronic hepatitis B"
      },
      {
        "id": 3,
        "text": "Remote infection with hepatitis B"
      },
      {
        "id": 4,
        "text": "Core window period"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><br />The most probable diagnosis is <strong>remote</strong> infection with <strong>hepatitis B virus (HBV).</strong></p>\n<p>A non-reactive HbsAg rules out active HBV infection<strong> (Options A and B).</strong></p>\n<p>Non-reactive IgM anti-HbcAg suggests that the patient is not in the window period <strong>(Option C).</strong></p>\n<p><strong>Reactive</strong> <strong>IgG</strong> HBcAg is seen in the l<strong>ate convalescence stage</strong> and remains <strong>lifelong</strong>.</p>\n<p><strong>Option A:</strong> In acute hepatitis B, HBsAg is reactive, HBeAg can be reactive in highly infectious individuals, and IgM Anti HBcAg is reactive. Anti-Hbs is reactive in recovery.</p>\n<p><strong>Option B:</strong> In chronic hepatitis B, HBsAg is reactive, and IgG Anti HBcAg is reactive. Anti-HBs is non-reactive.</p>\n<p><strong>Option D:</strong> Core window period is a phase where even though hepatitis infection is present, HBsAg is non-reactive. Diagnosis is based on the presence of IgM Anti HBcAg.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old male patient with critical mitral stenosis presented with atrial fibrillation. He has a history of multiple episodes of transient ischemic attacks. Which of the following are true regarding the prevention of stroke in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "1 only"
      },
      {
        "id": 2,
        "text": "2 and 3"
      },
      {
        "id": 3,
        "text": "2, 3 and 4"
      },
      {
        "id": 4,
        "text": "1, 2, 3 and 4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Statements<strong> 2 and 3</strong> are <strong>true</strong> regarding the prevention of stroke in this patient.</p>\n<p><strong>Statement 1:</strong> Clopidogrel combined with aspirin is better than aspirin alone for stroke prevention. <strong>Warfarin is superior</strong> to antiplatelets in stroke prevention.</p>\n<p><strong>Statement 2:</strong> Warfarin is the recommended anticoagulant for patients with <strong>mitral stenosis (MS)</strong> and<strong> mechanical prosthetic valves.</strong></p>\n<p><strong>Statement 3:</strong> Direct oral anticoagulants (DOACs) like dabigatran, rivaroxaban, apixaban, and edoxaban are not used in the treatment of moderate to severe MS and in patients with prosthetic heart valves due to limited clinical evidence.</p>\n<p><strong>DOACs</strong> have a <strong>lower</strong> <strong>risk</strong> of intracranial hemorrhage compared to warfarin and are as effective as warfarin for stroke prevention in valvular heart disease (except moderate to severe mitral stenosis or a mechanical heart valve), ischemic stroke or TIA, and AF.</p>\n<p><strong>Statement 4:</strong> Mitral valvotomy is not recommended for the prevention of stroke in this patient. It is indicated in <strong>symptomatic</strong> (New York Heart Association Functional Class II-IV) patients with <strong>isolated severe mitral stenosis,</strong> whose effective orifice<strong> (valve area) is &lt; 1.5 cm2</strong> in normal-sized adults. It is <strong>contraindicated</strong> in cases of<strong> left atrial thrombus.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "True about electroencephalogram (EEG) is all except:",
    "choices": [
      {
        "id": 1,
        "text": "1-5% of the population can have epileptiform discharges"
      },
      {
        "id": 2,
        "text": "Scalp EEG may be helpful in localizing frontal lobe epilepsy"
      },
      {
        "id": 3,
        "text": "Doing EEG is mandatory for diagnosis of seizures"
      },
      {
        "id": 4,
        "text": "Progressive multifocal leukoencephalopathy shows triphasic and slow waves on EEG"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Doing <strong>EEG</strong> is <strong>not</strong> mandatory for the diagnosis of <strong>seizures</strong>. The diagnosis of a seizure in most cases is based only on <strong>clinical</strong> grounds when examination and laboratory studies are often normal.</p>\n<p>All patients who are suspected to have a seizure disorder should be evaluated with an EEG. EEG may provide support to the clinical diagnosis, prognosis, and classification of the seizure disorder.</p>\n<p><strong>Other options:</strong></p>\n<p><strong>Option A:</strong> Approximately 1&ndash;5% of the population will have epileptiform discharges on EEG. The presence of epileptiform activity on EEG is not specific to epilepsy. Even in known cases of epilepsy, the routine inter-ictal EEG can be normal in 60% of cases. Thus, the EEG cannot establish the diagnosis of epilepsy in many cases.</p>\n<p><strong>Option B:</strong> Scalp EEG recording is sometimes helpful in the localization of frontal lobe epilepsy but is usually normal or misleading. When focal seizures arise from regions distant from the scalp such as the inferior frontal lobe or medial temporal lobe, the EEG recorded during the seizure may be non-localizing.</p>\n<p><strong>Option D:</strong> Progressive multifocal leukoencephalopathy is a demyelinating disease of the central nervous system due to infection by the John Cunningham virus (JC) virus. Electroencephalography (EEG) is characterized by a slow background activity with triphasic waves and slow waves predominantly in the frontal regions.</p>\n<p>Characteristic <strong>EEG findings</strong> in different conditions:</p>\n<ul>\n<li>Typical <strong>absence</strong> seizures:<strong> 3-Hz spike-and-slow-wave discharges</strong></li>\n<li><strong>Lennox-Gastaut syndrome:</strong> Slow (&lt;3 Hz) spike-and-wave discharges</li>\n<li><strong>Generalized tonic clonic seizure (GTCS) -</strong> in tonic phase, increasing generalized low-voltage fast activity, followed by high-amplitude, polyspike discharges &amp; in clonic phase a spike-and-slow-wave pattern is seen</li>\n<li><strong>Creutzfeldt-Jakob disease:</strong> generalized periodic sharp waves</li>\n<li><strong>Hepatic encephalopathy:</strong> triphasic waves</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 62-year-old male patient with heart failure is scheduled for a heart transplant. His renal function test is deranged and hemoglobin is 6 gm%. The physician ordered 2 units of whole blood. Four hours after transfusion, he developed severe respiratory distress. On examination, he is hypoxemic,  has tachycardia and his mean arterial pressure is elevated. Which of the following are the best investigations for the above scenario?",
    "choices": [
      {
        "id": 1,
        "text": "4 and 5"
      },
      {
        "id": 2,
        "text": "3 and 5"
      },
      {
        "id": 3,
        "text": "1 and 2"
      },
      {
        "id": 4,
        "text": "2 only"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical scenario describes an <strong>elderly</strong> patient with<strong> heart failure</strong> who develops <strong>severe respiratory distress</strong> associated with hypoxia, tachycardia, and elevated mean arterial pressure following a <strong>blood transfusion.</strong> The most likely diagnosis is <strong>transfusion-associated circulatory overload (TACO).</strong> The recommended investigations for suspected TACO include <strong>chest X-ray</strong> and <strong>BNP</strong> levels.</p>\n<p><strong>Chest X-ray</strong> in TACO may show <strong>bilateral</strong> and <strong>predominant alveolar infiltrates.</strong> <strong>BNP</strong> levels are usually <strong>elevated</strong> in TACO secondary to volume overload.</p>\n<p><strong>Anti-leukocyte antibodies</strong> are present in <strong>transfusion-related acute lung injury (TRALI),</strong> not in TACO patients.</p>\n<p>TACO is usually a clinical diagnosis suspected in any patient who has acute respiratory distress and/or hypertension during transfusion or within 6 hours of completion.</p>\n<p><strong>Risk factors</strong> include older age, pre-existing fluid overload, cardiac dysfunction, renal dysfunction, and transfusion of large volumes of blood components.<br />Management of TACO involves discontinuing the transfusion and providing oxygen and diuretics.</p>\n<p>Identification of at-risk patients, a <strong>slow transfusion rate</strong> (1 PRBC over 3-4 hours), close monitoring, and the use of <strong>diuretics</strong> in hemodynamically stable patients with a history of TACO can prevent TACO.</p>\n<p>&nbsp;</p>\n<table>\n<tbody>\n<tr>\n<td>Features&nbsp;</td>\n<td>TRALI</td>\n<td>TACO</td>\n</tr>\n<tr>\n<td>Body temperature</td>\n<td>Fever +</td>\n<td>Fever +/-</td>\n</tr>\n<tr>\n<td>Blood pressure</td>\n<td>Hypotension</td>\n<td>Hypertension</td>\n</tr>\n<tr>\n<td>Respiratory symptoms</td>\n<td>Acute dyspnea</td>\n<td>Acute dyspnea</td>\n</tr>\n<tr>\n<td>Neck veins</td>\n<td>Unchanged</td>\n<td>Distended</td>\n</tr>\n<tr>\n<td>Chest radiograph</td>\n<td>Diffuse bilateral infiltrates</td>\n<td>Diffuse bilateral infiltrates</td>\n</tr>\n<tr>\n<td>Ejection fraction</td>\n<td>Normal</td>\n<td>Decreased</td>\n</tr>\n<tr>\n<td>Pulmonary edema fluid</td>\n<td>Exudate</td>\n<td>Transudate</td>\n</tr>\n<tr>\n<td>Fluid balance</td>\n<td>Neutral or negative</td>\n<td>Positive</td>\n</tr>\n<tr>\n<td>Response to diuretics</td>\n<td>Inconsistent</td>\n<td>Significant improvement</td>\n</tr>\n<tr>\n<td>White cell count</td>\n<td>Transient leukopenia may be present</td>\n<td>Unchanged</td>\n</tr>\n<tr>\n<td>BNP</td>\n<td>Maybe elevated in critically ill patients with TRALI</td>\n<td>Elevated</td>\n</tr>\n</tbody>\n</table>\n<div class=\"layoutArea\">&nbsp;</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A chronic smoker presented with shortness of breath, bilateral pitting pedal edema, and abdominal distension. On examination, jugular venous pulse was found to be elevated and liver was palpable 8 cm below the costal margin. An abnormality in which of the following structures is responsible for the patient's symptoms?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario of a patient with dyspnea, bilateral pitting pedal edema, abdominal distension, elevated jugular venous pulse (JVP) and a palpable liver are suggestive of <strong>right ventricular (RV) failure.</strong> The history of<strong> chronic smoking</strong> points towards <strong>chronic obstructive pulmonary disease</strong> (COPD) as the etiology for RV failure <strong>(cor pulmonale).</strong> The label 2 points to the right ventricle (RV), which is affected in this patient.</p>\n<p><strong>Cor pulmonale</strong> is defined as altered RV structure/function secondary to pulmonary hypertension in the context of chronic lung diseases.</p>\n<p>The main pathophysiology behind cor pulmonale is <strong>pulmonary hypertension</strong> and <strong>increased right ventricular (RV) afterload</strong> which is sufficient to cause <strong>RV dilation</strong> with or without <strong>hypertrophy</strong>. Sustained pressure overload leads to RV <strong>dysfunction and failure.</strong></p>\n<p><strong>Dyspnea</strong> is the <strong>most common</strong> symptom. Signs include elevated JVP with prominent v waves, hepatomegaly, pulsatile liver, ascites, pedal edema, S3 gallop and murmur of tricuspid regurgitation.</p>\n<p>The ECG in severe pulmonary hypertension shows <strong>p-pulmonale, right axis deviation,</strong> and <strong>RV hypertrophy.</strong> Echo can be used to measure RV wall thickness and chamber dimensions, while doppler can be used to assess pulmonary artery pressures.&nbsp;</p>\n<p>A specimen of the heart with the various parts labeled is given below:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2f76f0e1f4c54dd0acdfdbe17fe53558.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/20f8fcfb42a241858420a39210256d38x1280x1083.JPEG"
    ]
  }
];
        let quizName = '218 Medicine Ini-Cet 2021';
        let hierarchy = ["Marrow", "PYQs", "Medicine"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>