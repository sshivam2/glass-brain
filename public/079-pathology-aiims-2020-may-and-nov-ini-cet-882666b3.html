<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>079 Pathology Aiims 2020 (May And Nov Ini-Cet) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Pathology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">34</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following is true about celiac disease?",
    "choices": [
      {
        "id": 1,
        "text": "Most common cause of malnutrition in developing countries"
      },
      {
        "id": 2,
        "text": "Can be diagnosed with CECT"
      },
      {
        "id": 3,
        "text": "Improves with food rich in carbohydrates"
      },
      {
        "id": 4,
        "text": "Increased risk of GI lymphoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Individuals with celiac disease have an <strong>increased risk of GI lymphoma</strong>.</p>\n<p>Celiac disease is a common cause of diarrhea in developed countries. It is due to permanent sensitivity to gluten in susceptible individuals. It results in partial or total villous atrophy that can be seen on histopathological examination of biopsy samples. CECT is not a modality of diagnosis. The treatment is lifelong gluten free diet.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Cells lining the isthmus of the gastric pits",
    "choices": [
      {
        "id": 1,
        "text": "Chief cells"
      },
      {
        "id": 2,
        "text": "Stem cells"
      },
      {
        "id": 3,
        "text": "Parietal cells"
      },
      {
        "id": 4,
        "text": "Mucous cells"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Stem cells</strong> are the cells lining the isthmus of the gastric pits.\u00a0</p>\n<p><strong>Isthmus</strong> is the narrow, upper-third segment of the gastric gland. This region has <strong>stem cells</strong> and <strong>mucous neck cells</strong>. Most <strong>stem cells</strong> constantly regenerate and primarily <strong>mature</strong> to form <strong>mucous neck cells</strong> that <strong>migrate upwards</strong> and form <strong>mucosa</strong>. Some stem cells differentiate into mature cells (unknown) and move to the base of the gastric gland.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d646d82d0b334f0cb9cba80af2867dbcx1280x1555.JPEG"
    ]
  },
  {
    "text": "Which of the following is not true about stem cells?",
    "choices": [
      {
        "id": 1,
        "text": "They can differentiate"
      },
      {
        "id": 2,
        "text": "They can replicate"
      },
      {
        "id": 3,
        "text": "They can divide without any regulatory stimulus"
      },
      {
        "id": 4,
        "text": "They can regenerate damaged tissues"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Stem cells do not divide without any regulatory stimulus.</p>\n<p>Stem cells give rise to all the various differentiated tissues. In adults, stem cells replace damaged cells and maintain tissue populations.</p>\n<p>The properties of stem cells are:</p>\n<ul>\n<li>Self-renewal</li>\n<li>Asymmetric division - In which one daughter cell enters a differentiation pathway and gives rise to mature cells, while the other remains undifferentiated and retains its self-renewal capacity.</li>\n</ul>\n<p>The types of stem cells are:</p>\n<ul>\n<li><strong>Embryonic</strong> stem cells which are totipotent</li>\n<li><strong>Adult</strong> stem cells present in stem cell niches</li>\n</ul>\n<p>The pluripotency of stem cells is due to factors like:</p>\n<ul>\n<li><strong>Oct3/4</strong></li>\n<li>Klf 4</li>\n<li>Sox 2</li>\n<li>cMyc</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true regarding liquid-based cytology?",
    "choices": [
      {
        "id": 1,
        "text": "Urine specimen is used"
      },
      {
        "id": 2,
        "text": "Sanger sequencing is used"
      },
      {
        "id": 3,
        "text": "Study of fluid in tumour microenvironment"
      },
      {
        "id": 4,
        "text": "DNA is collected in microvessels"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Liquid-based cytology can also be done using a <strong>urine specimen</strong>. It is commonly used in cervical cancer screening in place of a pap smear.</p>\n<p>The advantages of liquid-based cytology are:</p>\n<ul>\n<li>The process reduces obscuring inflammatory cells and&nbsp;mucous,&nbsp;blood, and&nbsp;debris</li>\n<li>The&nbsp;cells&nbsp;are&nbsp;deposited&nbsp;on&nbsp;the&nbsp;slide&nbsp;in&nbsp;a&nbsp;<strong>monolayer.</strong></li>\n<li><strong>Test sensitivity is improved&nbsp;</strong>compared with conventional&nbsp;pap&nbsp;tests.</li>\n</ul>\n<p>Liquid-based cytology has found broad acceptance in non&shy;-gynecologic&nbsp;cytopreparation such as:&nbsp;</p>\n<ul>\n<li>Thyroid&nbsp;cyst fluid&nbsp;examination.</li>\n<li>Oral pathology: diagnostic for various types of oral lesions.</li>\n<li>This technique is also used to body fluids (e.g. <strong>urine, pleural effusions</strong>), brushing samples (e.g. gastrointestinal tract, lung), and fine&shy; needle&nbsp;aspiration.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true regarding glucose-6-phosphate dehydrogenase deficiency?",
    "choices": [
      {
        "id": 1,
        "text": "Spectrin defect"
      },
      {
        "id": 2,
        "text": "Cells are spherical"
      },
      {
        "id": 3,
        "text": "Cells don't lyse in hypotonic solution"
      },
      {
        "id": 4,
        "text": "Cells lyse in hypertonic solution"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>G6PD deficiency has <strong>spherical red cells</strong> (Spherocytes).</p>\n<p>Glucose-6-phosphate dehydrogenase (G6PD) is an enzyme that helps in the synthesis of NADPH. NADPH helps in keeping glutathione in a reduced state (GSH). This reduced glutathione acts as a defense against oxidative damage. In G6PD deficiency, RBCs are exposed to oxidants. These cross-linking of the reactive sulphydryl groups in the globin chain of hemoglobin. These are then deposited as inclusions in RBC membranes as Heinz bodies. When these RBCs pass-through spleen, macrophages pluck out these membrane inclusions. The remaining cells are seen as bite cells. Less severely damaged cells lose a part of their membrane, forming spherocytes.</p>\n<p>Spectrin is a part of the RBC membrane skeleton. It is commonly defective in hereditary spherocytosis.&nbsp;</p>\n<p>Normal biconcave RBCs have a bit of an 'extra space'. They can accommodate a little fluid when exposed to a hypotonic solution. But spherocytes have already lost a part of its membrane, so are relatively full. Hence if they are placed in a hypotonic solution, they absorb more fluid and result in lysis of RBCs. This forms the basis of testing spherocytes in Hereditary spherocytosis or G6PD and is known as osmotic fragility testing.</p>\n<p>On the other hand, placing RBCs in a hypertonic solution may cause them to lose water and shrink in size. But hardly any hemolysis takes place.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman who had undergone total knee replacement surgery comes with complaints of knee pain with the loosening of implants. The following histopathological slide was obtained which showed foreign body giant cells along with the appearance highlighted in the image below. What is your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Ochronisis"
      },
      {
        "id": 2,
        "text": "Metallosis"
      },
      {
        "id": 3,
        "text": "Malignant melanoma"
      },
      {
        "id": 4,
        "text": "Rosai dorffman disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario and image with the said foreign body giant cell point towards a diagnosis of metallosis.</p>\n<p><strong>Metallosis</strong>&nbsp;is an uncommon complication following total joint replacements of high wear joints like hip and knees. The metal from the prosthesis infiltrates the bone and soft tissue surrounding it. It presents with pain or squeaking on weight bearing or loosening of implant. Sometimes it may be asymptomatic with imaging findings (cloud sign or bubble sign). Aspiration reveals dark fluid consisting of metallic debris.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/36187418fbd04d17bac1a470ed296bcd.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 24-year-old man met with an RTA and was brought to the casualty after 6 hours. His B.P. was 90/60 mm Hg, heart rate was 110/min, and SpO2 was 92%. A blood transfusion was done. After a few hours, the patient is febrile, tachypneic, and starts bleeding from the IV and NG tube sites. His SpO2 levels started falling. What could be the cause?",
    "choices": [
      {
        "id": 1,
        "text": "Transfusion reaction"
      },
      {
        "id": 2,
        "text": "Acute adrenal crisis"
      },
      {
        "id": 3,
        "text": "Fat embolism"
      },
      {
        "id": 4,
        "text": "Hemorrhagic shock"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Other options:</p>\n<p>Option b- <strong>Acute adrenal crisis </strong>usually presents as an unexplained shock that is refractory to fluids and vasopressors.</p>\n<p>Option c- <strong>Fat embolism</strong> is associated with fractures of the long bones. It develops within 2-3 days of fracture/trauma. Moreover, a history of&nbsp;<strong>petechial rash</strong> is characteristic of fat embolism.</p>\n<p>Option d-&nbsp;<strong>Hemorrhagic shock</strong> presents as tachypnea, tachycardia,&nbsp;narrow pulse pressure,&nbsp;and oliguria. Cold extremities and <strong>delayed capillary refill&nbsp;</strong>time are other features. In this case, hemorrhagic shock might occur as a consequence of bleeding due to DIC, but the cause of this presentation is transfusion reaction.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a component of Papanicolaou stain?",
    "choices": [
      {
        "id": 1,
        "text": "Light green SF"
      },
      {
        "id": 2,
        "text": "Orange G"
      },
      {
        "id": 3,
        "text": "Eosin B"
      },
      {
        "id": 4,
        "text": "Hematoxylin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Eosin B&nbsp;is not a component of Papanicolaou stain.</p>\n<p>Papanicolaou stain is the most popular stain used in the practice of histopathology. It is a polychrome stain containing multiple dyes to stain the various components of cells differentially. Papanicolaou stain includes both acidic and basic dyes:</p>\n<ul>\n<li><strong>Hematoxylin</strong> is a basic dye and it stains the nucleus.</li>\n<li><strong>Orange G</strong> is an acidic counterstain and it stains matured and keratinized cells.</li>\n<li><strong>Eosin A</strong> is the second counterstain and it is a polychrome mixture of <strong>Eosin Y</strong> and<strong> Light green SF.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The vacutainer tube shown in the given image contains:",
    "choices": [
      {
        "id": 1,
        "text": "Na-EDTA"
      },
      {
        "id": 2,
        "text": "Trisodium citrate"
      },
      {
        "id": 3,
        "text": "NAF-heparin"
      },
      {
        "id": 4,
        "text": "Clot activator"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Some important plastic tubes and their additives:</p>\n<table style=\"height: 168px; width: 327px;\">\n<tbody>\n<tr>\n<td style=\"width: 130px;\"><strong>Cap colour</strong></td>\n<td style=\"width: 181px;\"><strong>Additive present</strong></td>\n</tr>\n<tr>\n<td style=\"width: 130px;\">Light blue top</td>\n<td style=\"width: 181px;\">Sodium citrate</td>\n</tr>\n<tr>\n<td style=\"width: 130px;\">Dark green top</td>\n<td style=\"width: 181px;\">Heparin</td>\n</tr>\n<tr>\n<td style=\"width: 130px;\">Purple top</td>\n<td style=\"width: 181px;\">EDTA</td>\n</tr>\n<tr>\n<td style=\"width: 130px;\">Pale yellow top</td>\n<td style=\"width: 181px;\">Acid citrate dextrose</td>\n</tr>\n<tr>\n<td style=\"width: 130px;\">Light grey top</td>\n<td style=\"width: 181px;\">Sodium fluoride and potassium oxalate</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c1b7aafe86d343afb74cd33d0c3f010c.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "All of the following are crosslinking fixatives except?",
    "choices": [
      {
        "id": 1,
        "text": "Glutaraldehyde"
      },
      {
        "id": 2,
        "text": "Formaldehyde"
      },
      {
        "id": 3,
        "text": "Methanol"
      },
      {
        "id": 4,
        "text": "Osmium tetraoxide"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Methanol is not a&nbsp;crosslinking fixative. It is a&nbsp;<strong>d</strong><strong>ehydrant coagulant fixative.</strong></p>\n<p>Fixation of tissues can be done by physical or chemical methods.</p>\n<p><strong>Physical methods</strong> include&nbsp;heating, microwaving, and freeze-drying.</p>\n<p><strong>Chemical methods</strong>: These methods are commonly used in the processing&nbsp;of tissue for various histopathological diagnoses. It includes the use of:</p>\n<ul>\n<li><strong>Cross-linking fixatives</strong>: These fixatives add covalent reactive&nbsp;groups which may induce cross-links between&nbsp;proteins, individual protein moieties within nucleic&nbsp;acids, and between nucleic acids and proteins. Eg:<strong> Formaldehyde and Glutaraldehyde.</strong></li>\n<li><strong>Dehydrant coagulant fixatives: </strong>These fixatives&nbsp;remove free water from tissues and precipitate or&nbsp;coagulate the proteins. Eg:&nbsp;ethanol, <strong>methanol,</strong> and acetone.</li>\n<li><strong>Compound fixatives: </strong>Fixatives, which are the mixtures of reagents are&nbsp;referred to as compound fixatives. Eg:&nbsp;<strong>alcoholic&nbsp;formalin</strong> fixes tissues in two ways i.e firstly, by adding&nbsp;covalent hydroxymethyl groups and crosslinking&nbsp;proteins and secondly, by coagulation and&nbsp;dehydration.</li>\n</ul>\n<p>Note:&nbsp;<strong>Osmium tetraoxide</strong> causes additive&nbsp;<strong>cross-links</strong> and&nbsp;is used for ultrastructural&nbsp;visualization of&nbsp;membranes as an additive for post-fixation after&nbsp;glutaraldehyde.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following conditions are related to the same core pathology except",
    "choices": [
      {
        "id": 1,
        "text": "Parkinson's disease"
      },
      {
        "id": 2,
        "text": "Alzheimers disease"
      },
      {
        "id": 3,
        "text": "Lewy body dementia"
      },
      {
        "id": 4,
        "text": "Multisystem atrophy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Alzheimer's disease</strong>, unlike the rest, is not an alpha-synucleinopathy. It is a <strong>&beta;-amyloidopathy</strong> characterized by the accumulation of&nbsp;A&beta; amyloid protein.</p>\n<p><strong>Alpha-synucleinopathies</strong>: These are a group of neurodegenerative disorders, that are characterized by aggregation of&nbsp;<strong>&alpha;-Synuclein&nbsp;</strong>in neurons, nerve fibers, or glial cells<strong>&nbsp;</strong>to form inclusion bodies.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Isotype switching is seen in ____________",
    "choices": [
      {
        "id": 1,
        "text": "Helper T cells"
      },
      {
        "id": 2,
        "text": "Activated B cells"
      },
      {
        "id": 3,
        "text": "Cytotoxic t cells"
      },
      {
        "id": 4,
        "text": "B cells"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Isotype switching is seen in&nbsp;<strong>a</strong><strong>ctivated B cells.</strong></p>\n<p class=\"p1\"><strong>Isotype switching</strong>: Conversion of one antibody class (isotype) to another resulting from the genetic rearrangement of heavy-chain constant-region genes in activated B cells.</p>\n<p class=\"p1\">Isotype switching is dependent on the presence of both antigens and cytokines secreted by T-cells.</p>\n<p class=\"p1\">Note: <strong>Defect in isotype switching</strong> can cause immunodeficiencies known as <strong>Hyper IgM syndrome.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following caspase binds to Cyt c and APAF-1 complex?",
    "choices": [
      {
        "id": 1,
        "text": "Caspase 1"
      },
      {
        "id": 2,
        "text": "Caspase 8"
      },
      {
        "id": 3,
        "text": "Caspase  9"
      },
      {
        "id": 4,
        "text": "Caspase 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Caspase 9 </strong>binds to&nbsp;<strong>Cyt c and APAF-1 complex.</strong></p>\n<p class=\"p1\">Apoptotic stimuli cause the release of cytochrome c into the cytosol. Cytochrome-C in turn binds to a protein called APAF-1 (apoptosis-activating factor-1) to form the <strong>apoptosome</strong>.</p>\n<p class=\"p1\">This complex is able to bind caspase-9, the critical initiator caspase of the mitochondrial pathway, and this step is responsible for the activation of other caspases.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "During rounds, you come across the urinalysis report of the 30-year-old male diagnosed with Fabry's disease. What type of urinary casts would you expect to see in the report?",
    "choices": [
      {
        "id": 1,
        "text": "Waxy cast"
      },
      {
        "id": 2,
        "text": "RBC cast"
      },
      {
        "id": 3,
        "text": "WBC cast"
      },
      {
        "id": 4,
        "text": "Maltese cross cast"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>&nbsp;</p>\n<p>Maltese cross appearance elsewhere:</p>\n<ul>\n<li>Short-range shotgun wound</li>\n<li>Peripheral smear of babesiosis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/10843df880964f67a36d1736cf04b74ax1280x1242.JPEG"
    ]
  },
  {
    "text": "JAK2 mutation is most commonly associated with _____",
    "choices": [
      {
        "id": 1,
        "text": "Polycythemia vera"
      },
      {
        "id": 2,
        "text": "Essential thrombocytosis"
      },
      {
        "id": 3,
        "text": "CML"
      },
      {
        "id": 4,
        "text": "PMF"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Polycythemia vera </strong>is strongly associated with activating point <strong>mutations</strong> in the tyrosine kinase<strong> JAK2</strong>.</p>\n<p>A mutation in JAK2, a key member of the cytokine intracellular signaling pathway, can be found in <strong>90&ndash;95%</strong> of patients with polycythemia vera.</p>\n<p>It is characterized by :</p>\n<ul>\n<li>Increased marrow production of red cells, granulocytes, and platelets&nbsp;<strong>(panmyelosis)</strong></li>\n<li><strong>Low&nbsp;</strong><strong>erythropoietin levels and elevated hematocrit</strong></li>\n<li>Blood viscosity and sludging lead to both thrombosis and bleeding.</li>\n<li>Headache, dizziness, hypertension, dizziness, venous thrombosis (Budd Chiari syndrome due to hepatic vein thrombosis), bowel infarction, and stroke.</li>\n<li><strong>Intense pruritus especially aquagenic pruritus</strong>&nbsp;</li>\n<li>Peptic ulceration, hyperuricemia</li>\n<li>15% to 20% of patients after an average period of 10 years -&gt;Myelofibrosis and extensive extramedullary hematopoiesis,</li>\n<li>PCV transforms into AML in 2% of patients.</li>\n</ul>\n<p><strong>Primary myelofibrosis</strong></p>\n<ul>\n<li>Marrow fibrosis associated with extramedullary hemopoiesis in the spleen.</li>\n<li><strong>Activating mutation in JAK2&nbsp;</strong><strong>(more commonly) or&nbsp;<em>MPL</em>.</strong></li>\n<li>Presence of neoplastic megakaryocytes, which are responsible for the release of fibrogenic factors like PDGF (platelet-derived growth factor) and TGF-&beta;.</li>\n<li>Bone&nbsp;<strong>marrow aspiration&nbsp;</strong><strong>yields dry tap&nbsp;</strong>due to fibrosis of the bone marrow.</li>\n<li>So,&nbsp;<strong>bone marrow biopsy is the investigation of choice</strong>, which shows the presence of hypocellularity with increased deposition of reticulin inside the marrow, abnormal megakaryocytes and the characteristic finding of dilated marrow sinusoids.</li>\n<li>Blood shows mild leukocytosis, decreased Hb and hematocrit levels, and elevated LAP scores.</li>\n<li>Acute myeloid leukemia (AML) occurs in 5% to 20% of cases.</li>\n</ul>\n<p><strong>Essential thrombocytosis (ET)</strong> may also be associated with&nbsp;<em>JAK2</em>,&nbsp;<em>MPL</em>, or&nbsp;<em>CALR</em>&nbsp;mutations.</p>\n<ul>\n<li>Essential thrombocytosis (ET) is often associated with activating point mutations in&nbsp;<strong><em>JAK2</em>&nbsp;(50% of cases) or&nbsp;<em>MPL</em>&nbsp;(5% to 10% of cases)</strong>, a receptor tyrosine kinase that is normally activated by thrombopoietin.</li>\n<li>In addition, recent DNA sequencing studies have revealed that most of the remaining cases have mutations in&nbsp;<strong>calreticulin (CALR)</strong>, a protein with several functions in the endoplasmic reticulum and the cytoplasm. Since&nbsp;<em>JAK2</em>&nbsp;and calreticulin mutations are mutually exclusive, it is hypothesized that the calreticulin mutations also increase JAK-STAT signaling through mechanisms that are currently unknown.</li>\n</ul>\n<p>CML is the consequence of the balanced translocation between chromosomes 9 and 22 (t[9;22]).</p>\n<p>PV, PMF, and ET are characterized by driver mutations that directly or indirectly constitutively activate JAK2, a tyrosine kinase essential for the function of the erythropoietin andthrombopoietin receptors and also utilized by granulocyte colony stimulating factor receptor.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old female with easy fatiguability and pallor presented to the OPD. The image of her hand is as given below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Aplastic anemia"
      },
      {
        "id": 2,
        "text": "Vitamin B12 deficiency"
      },
      {
        "id": 3,
        "text": "Iron deficiency anemia"
      },
      {
        "id": 4,
        "text": "Hypoalbuminemia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Bone marrow</strong> findings:</p>\n<ul>\n<li>Markedly&nbsp;<strong>hypercellular</strong>&nbsp;as a result of increased hematopoietic precursors.</li>\n<li><strong>Sieve-like </strong>pattern of<strong> chromatin</strong>&nbsp;of immature precursors (Megaloblasts)</li>\n<li>Granulocytic precursors also display dysmaturation in the form of&nbsp;<strong>giant metamyelocytes </strong>and<strong> band forms</strong></li>\n<li>Megakaryocytes can be abnormally large and have bizarre, multilobate nuclei</li>\n<li>The derangement in DNA synthesis causes most precursors to undergo apoptosis in the marrow (<strong>ineffective hematopoiesis</strong>) and leads to<strong> pancytopenia</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dfb22fde341440828db549eb512bd63c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/52d81454a5e545f199775a54498ecf53x960x690.JPEG"
    ]
  },
  {
    "text": "Rees and Ecker diluting fluid is used in ______",
    "choices": [
      {
        "id": 1,
        "text": "Wintrobe tube"
      },
      {
        "id": 2,
        "text": "WBC Pipette"
      },
      {
        "id": 3,
        "text": "RBC Pipette"
      },
      {
        "id": 4,
        "text": "Hemoglobin pipette"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Rees and Ecker's solution</strong> is used as a diluting fluid in the&nbsp;<strong>RBC pipette</strong> for performing <strong>platelet counts</strong>. Its composition is:</p>\n<table style=\"height: 119px;\" width=\"240\">\n<tbody>\n<tr>\n<td style=\"width: 171.302px;\"><strong>Components</strong></td>\n<td style=\"width: 54.7396px;\"><strong>Value</strong></td>\n</tr>\n<tr>\n<td style=\"width: 171.302px;\">Sodium citrate</td>\n<td style=\"width: 54.7396px;\">3.8 g</td>\n</tr>\n<tr>\n<td style=\"width: 171.302px;\">Formaldehyde (40 %)</td>\n<td style=\"width: 54.7396px;\">0.2 ml</td>\n</tr>\n<tr>\n<td style=\"width: 171.302px;\">Brilliant cresyl blue</td>\n<td style=\"width: 54.7396px;\">0.1 g</td>\n</tr>\n<tr>\n<td style=\"width: 171.302px;\">Distilled water</td>\n<td style=\"width: 54.7396px;\">100 ml</td>\n</tr>\n</tbody>\n</table>\n<p>The <strong>steps</strong> involved in <strong>platelet</strong> <strong>count</strong> are:</p>\n<p>I - Filling the pipette</p>\n<ul>\n<li>Diluting fluid is drawn to mark 1 of the RBC pipette and expelled</li>\n<li>Blood is aspirated to 0.5 mark of the RBCs diluting pipette</li>\n<li>Diluting fluid is aspirated to 101 mark</li>\n<li>Blood and diluting fluid are mixed mechanically for 5 min</li>\n</ul>\n<p>II - Filling the counting chamber</p>\n<ul>\n<li>Allow the counting chamber to stand for 20-30 minutes to allow the platelets to settle.</li>\n<li>To prevent drying out of the preparation, it should be kept in a moist atmosphere, this is most easily arranged by placing the filled counting chamber in the bottom of a clean Petri dish, alongside which arrange a small piece of cotton wool which has been soaked in water and squeezed out. Petri dish lid is additionally put over the dish.</li>\n<li>After 20-30minutes, the counting chamber can be removed and carefully transferred to the microscope stage.</li>\n</ul>\n<p>III - Counting the number of platelets</p>\n<ul style=\"font-weight: 400;\">\n<li>Focus on the surface of the hemocytometer chamber with a high power dry objective. Dim the light to make the thrombocytes visible, and count all of the thrombocytes in the entire center 1 mm&sup2; (erythrocyte counting area) of both sides of the hemocytometer. This gives the number of thrombocytes in 0.2 l of 1: 200 dilution of blood.</li>\n<li>The number of thrombocytes counted X 1000 = number of thrombocytes/l of undiluted blood.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following conditions will have the least chances of a dry tap on bone marrow aspiration?",
    "choices": [
      {
        "id": 1,
        "text": "Hairy cell leukemia"
      },
      {
        "id": 2,
        "text": "Follicular lymphoma"
      },
      {
        "id": 3,
        "text": "AML M7"
      },
      {
        "id": 4,
        "text": "Myelodysplastic syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Follicular lymphoma</strong>\u00a0is the least likely cause of a dry tap on bone marrow aspiration.</p>\n<p>Causes of\u00a0<strong>dry tap</strong>\u00a0are:</p>\n<ul>\n<li>Metastatic carcinoma infiltration\u00a0</li>\n<li>Chronic myeloid leukemia\u00a0</li>\n<li><strong>Myelofibrosis</strong>\u00a0</li>\n<li><strong>Hairy cell leukemia</strong>\u00a0</li>\n<li>Acute leukemia\u00a0</li>\n<li>Hodgkin's lymphoma</li>\n<li><strong>AML- M7</strong></li>\n</ul>\n<p>Causes of\u00a0<strong>pancytopenia with cellular marrow</strong>\u00a0are:</p>\n<p>Primary disease of marrow-</p>\n<ul>\n<li>Myelodysplastic syndrome</li>\n<li>Paroxysmal nocturnal\u00a0hemoglobinuria (PNH)</li>\n<li>Myelofibrosis</li>\n<li>Aleukemic leukemia</li>\n<li>Myelophthisis</li>\n<li>Bone marrow lymphoma</li>\n<li>Hairy cell leukemia</li>\n</ul>\n<p>Secondary to systemic disease-</p>\n<ul>\n<li>SLE, sarcoidosis</li>\n<li>B12, folate deficiency</li>\n<li>Copper deficiency</li>\n<li>Hypersplenism</li>\n<li>Alcohol</li>\n<li>HIV infection, TB</li>\n<li>Brucellosis, leishmaniasis\u00a0</li>\n</ul>\n<p>\u00a0</p>\n<p>Note: Although marrow is hypercellular in CML, MDS etc., extensive marrow fibrosis (rare) has been proposed to account for a dry tap on bone marrow biopsy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common lung finding in COVID 19 infection is?",
    "choices": [
      {
        "id": 1,
        "text": "Pulmonary infarction"
      },
      {
        "id": 2,
        "text": "Diffuse alveolar damage"
      },
      {
        "id": 3,
        "text": "Endothelial injury"
      },
      {
        "id": 4,
        "text": "Fibrin clots"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\"><strong>Diffuse alveolar damage</strong> may be seen in patients suffering from COVID-19.</p>\n<p class=\"p1\">COVID-19 related <strong>histopathological changes</strong> in the lungs include:\u00a0</p>\n<ol class=\"ul1\">\n<li class=\"li1\"><strong>Diffuse alveolar damage</strong></li>\n<li class=\"li1\">Hyaline membrane formation</li>\n<li class=\"li1\">Desquamation of pneumocytes</li>\n<li class=\"li1\">Fibrin deposits in lungs</li>\n<li class=\"li1\">Inflammation with mononuclear cells</li>\n</ol>\n<p class=\"p1\"><strong>Note:</strong>\u00a0Diffuse alveolar damage is<strong>\u00a0not specific to COVID-19.</strong>\u00a0It may be seen in all cases of acute respiratory distress syndrome (ARDS) including pneumonia, burns, near drowning, etc.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented to the OPD with long hands and feet, and a protruding lower jaw. Which of the following genes is most likely implicated in this scenario?",
    "choices": [
      {
        "id": 1,
        "text": "GATA1"
      },
      {
        "id": 2,
        "text": "PIT1"
      },
      {
        "id": 3,
        "text": "TPIT"
      },
      {
        "id": 4,
        "text": "SF1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Mutations of the <strong>pituitary-specific gene PIT-1</strong> can lead to the development of a somatroph adenoma which produces&nbsp;elevated levels of GH Growth hormone (and IGF-1) which can lead to acromegaly as given in the clinical scenario above.</p>\n<p>Somatotrophs, mammosomatotrophs, and lactotrophs are derived from stem cells that express the pituitary transcription factor, PIT-1.</p>\n<p>If the increased levels of GH are present <strong>after closure of the epiphyses</strong>, acromegaly develops. In this condition, growth is most conspicuously seen in</p>\n<ul>\n<li>Skin and soft tissues, viscera (thyroid, heart, liver, and adrenals).</li>\n<li>The bones of the face, hands, and feet are thickened and enlarged.</li>\n<li>Bone density may increase (hyperostosis) in both the spine and the hips.</li>\n<li>Enlargement and protusion of the jaw is seen (<strong>prognathism</strong>), and broadening of the lower face.</li>\n<li>The feet and hands are enlarged, and the fingers become thickened and sausage-like.</li>\n</ul>\n<p>GH excess can also be associated with a variety of other manifestatiions, like gonadal dysfunction, diabetes mellitus, generalized muscle weakness, hypertension, arthritis, congestive heart failure, and an increased risk of gastrointestinal cancers.</p>\n<p>Other options:</p>\n<p>Steroidogenic factor -1 (SF-1) and GATA-2 are factors that are required for gonadotroph differentiation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is your diagnosis with respect to the findings shown in the peripheral smear given below?",
    "choices": [
      {
        "id": 1,
        "text": "Iron deficiency anemia"
      },
      {
        "id": 2,
        "text": "B12 deficiency"
      },
      {
        "id": 3,
        "text": "Hereditary spherocytosis"
      },
      {
        "id": 4,
        "text": "Acute myeloid leukemia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The peripheral smear showing<strong> macro-ovalocytes </strong>and<strong>&nbsp;</strong>a<strong> hypersegmented neutrophil</strong>&nbsp;are suggestive of <strong>megaloblastic anaemia.&nbsp;</strong>Vitamin<strong> B12 deficiency</strong>&nbsp;is a cause of&nbsp;megaloblastic anaemia.&nbsp;</p>\n<p><strong>Peripheral smear</strong>&nbsp;findings in megaloblastic anaemia:</p>\n<ul>\n<li><strong>Macro-ovalocytes</strong></li>\n<li>Most macrocytes lack the central pallor of normal red cells and even appear hyperchromic, but the MCHC is not elevated.</li>\n<li><strong>Reticulocyte </strong>count is<strong> low</strong></li>\n<li>Nucleated red cell progenitors occasionally appear in the circulating blood when anaemia is severe</li>\n<li>Neutrophils are also larger than normal (macro polymorphonuclear) and show&nbsp;<strong>nuclear hypersegmentation</strong>, having five or more nuclear lobules</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1fe25230669543b2a3a0ec56464a8385.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not true about nodular lymphocyte-predominant Hodgkin lymphoma?",
    "choices": [
      {
        "id": 1,
        "text": "EBV Negative"
      },
      {
        "id": 2,
        "text": "CD 30 Negative"
      },
      {
        "id": 3,
        "text": "CD 20 positive"
      },
      {
        "id": 4,
        "text": "Poor prognosis compared to classical HL"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p class=\"ng-binding\">Nodular lymphocyte-predominant Hodgkin's lymphoma<strong> (NLPHL) </strong>has an<strong> excellent prognosis.</strong></p>\n<p class=\"ng-binding\">Nodular lymphocyte-predominant Hodgkin's lymphoma (NLPHL) is seen in young males &lt;35 years. They present with cervical and axillary lymphadenopathy.\u00a0The involved nodes have a nodular infiltrate of mainly small lymphocytes and macrophages, eosinophils, and plasma cells are scanty. It is\u00a0not associated with EBV.\u00a0</p>\n<p class=\"ng-binding\"><strong>L&amp;H variant</strong> of Reed-Sternberg (RS) cell that has multilobed nucleus resembling a popcorn kernel (<strong>popcorn cell</strong>) is seen. Immunophenotyping shows\u00a0<strong>CD20 +</strong>, BCL6 +, CD15 -, <strong>CD30 -. </strong>It has\u00a0an\u00a0<strong>excellent prognosis.\u00a0</strong></p>\n<p>The image shows the L&amp;H variant of RS cell (popcorn cell) which is seen in NLPHL type of Hodgkin\u2019s lymphoma.</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8b068b7440c944b794fbccada7d030a8x1280x1256.JPEG"
    ]
  },
  {
    "text": "Which fixation technique is used for fat in the histopathological examination?",
    "choices": [
      {
        "id": 1,
        "text": "IHC"
      },
      {
        "id": 2,
        "text": "Frozen section"
      },
      {
        "id": 3,
        "text": "Liquid paraffin"
      },
      {
        "id": 4,
        "text": "Formalin fixed"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A <strong>frozen section</strong>&nbsp;is done for the&nbsp;<strong>fixation of fats.</strong> This ensures that the tissue need not go through routine processing, which can remove lipids.</p>\n<p class=\"\">When the tissue sample goes through <strong>rapid freezing</strong>, it becomes firmer. The <strong>ice</strong> acts as an <strong>embedding media</strong> allowing the tissue to be sectioned.&nbsp;</p>\n<p class=\"\">The temperature range in the cryostat machine usually ranges from 0\u2070C to -35\u2070C. The majority of the tissue can be appropriately sectioned between <strong>-15\u2070C to -25\u2070C</strong>. Tissue samples that contain water can be sectioned at a higher temperature. The <strong>tissues</strong> that contain <strong>more fat </strong>will need to be <strong>cut</strong> at a <strong>lower temperature</strong>.</p>\n<p>The stain used for fat is the&nbsp;<strong>oil red O</strong>&nbsp;stain. It can&nbsp;identify <strong>neutral lipids</strong> and <strong>fatty acids</strong>&nbsp;in smears and tissues. It is used in the following conditions:</p>\n<ul>\n<li><strong>Fat emboli</strong> in lung tissue</li>\n<li>Renal cell carcinoma</li>\n<li>Sebaceous gland tumors of the skin</li>\n<li>Lipid-rich carcinomas</li>\n</ul>\n<p><strong>Fixatives</strong> containing alcohols, or <strong>routine</strong>&nbsp;<strong>processing</strong> with clearing, will <strong>remove lipids</strong>. Fixation can be achieved by the following methods:</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<ul>\n<li>Physical methods - heating, microwaving, cryopreservation</li>\n<li>Chemical methods -&nbsp;immersion of specimen in fixative, perfusing vascular system with a fixative</li>\n</ul>\n</div>\n</div>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p class=\"ng-binding\">&nbsp;Given below are a few fixatives with their uses:</p>\n<table style=\"height: 303px;\" width=\"406\">\n<tbody>\n<tr>\n<td style=\"width: 198.021px;\"><strong>Technique/Tissue</strong></td>\n<td style=\"width: 193.576px;\"><strong>Fixative</strong></td>\n</tr>\n<tr>\n<td style=\"width: 198.021px;\">Electron microscopy</td>\n<td style=\"width: 193.576px;\">Glutaraldehyde</td>\n</tr>\n<tr>\n<td style=\"width: 198.021px;\">Trephine biopsy-bone marrow</td>\n<td style=\"width: 193.576px;\">Zenker's fluid (AZF fixative)</td>\n</tr>\n<tr>\n<td style=\"width: 198.021px;\">GI biopsies</td>\n<td style=\"width: 193.576px;\">Bouin's fixative</td>\n</tr>\n<tr>\n<td style=\"width: 198.021px;\">Brain</td>\n<td style=\"width: 193.576px;\">Formalin ammonium chloride</td>\n</tr>\n<tr>\n<td style=\"width: 198.021px;\">Adrenal biopsy</td>\n<td style=\"width: 193.576px;\">Orth's fluid</td>\n</tr>\n<tr>\n<td style=\"width: 198.021px;\">Pap smear</td>\n<td style=\"width: 193.576px;\">Ethanol</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;The <strong>most commonly</strong> used fixative is <strong>10%</strong> <strong>neutral buffered formalin</strong>.</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the cells marked in the given image.",
    "choices": [
      {
        "id": 1,
        "text": "Lymphocyte- 1, Monocyte-4, Eosinophil-2, Basophil-3"
      },
      {
        "id": 2,
        "text": "Lymphocyte- 2, Monocyte-4, Eosinophil-1, Basophil-3"
      },
      {
        "id": 3,
        "text": "Lymphocyte- 1, Monocyte-2,  Eosinophil-3, Basophil-4"
      },
      {
        "id": 4,
        "text": "Lymphocyte- 2, Monocyte-1,  Eosinophil-3, Basophil-4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A peripheral blood smear shows RBCs, WBCs (granulocytes and agranulocytes), and platelets.</p>\n<p><strong>Granulocytes:</strong></p>\n<ul>\n<li><strong>Neutrophil</strong> - <strong>3 to 5</strong> lobed <strong>nucleus</strong> with <strong>small, bluish granules</strong> in the cytoplasm</li>\n<li><strong>Eosinophil - Binucleate/spectacle</strong> shaped nuclei with <strong>brick-red granules</strong> in the cytoplasm<strong>. (1)</strong></li>\n<li><strong>Basophil- Large bluish granules</strong> in the cytoplasm which <strong>obscure the nucleus. (3)</strong></li>\n</ul>\n<p><strong>Agranulocytes:</strong></p>\n<ul>\n<li><strong>Lymphocytes</strong>- size just larger than an RBC. <strong>No granules</strong>, no nucleoli present.&nbsp;<strong>(2)</strong></li>\n<li><strong>Monocytes&nbsp;</strong>- <strong>largest cells</strong>&nbsp;with a <strong>kidney-shaped nucleus</strong>.&nbsp;<strong>(4)</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c58d278f7c06491cb5ec96aa832d6301.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following clotting factor deficiency will not affect clotting in vivo?",
    "choices": [
      {
        "id": 1,
        "text": "Factor VII"
      },
      {
        "id": 2,
        "text": "Factor V"
      },
      {
        "id": 3,
        "text": "Factor XII"
      },
      {
        "id": 4,
        "text": "Factor  IX"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Factor XII&nbsp;deficiency will not affect the clotting in vivo.</p>\n<p>Unlike the clotting cascade in the lab (<strong>in vitro</strong>), the cascade in the body (<strong>in</strong> <strong>vivo</strong>) differs slightly - as <strong>tissue factor</strong> (TF) is the major <strong>initiator</strong> of the cascade. The <strong>TF/VIIa complex</strong> is the most important activator of <strong>factor IX</strong> and <strong>factor IXa/factor VIIIa complex</strong> is the most important activator of <strong>factor X</strong>. Factor V is involved in both the pathways as shown in the image below.</p>\n<p>The coagulation cascade in the <strong>laboratory</strong>:</p>\n<ul>\n<li><strong>Extrinsic </strong>pathway sequence (in a test tube):&nbsp; Tissue factor &rarr; Factor VII &rarr; Factor X.</li>\n<li><strong>Intrinsic </strong>pathway sequence (in a test tube):&nbsp;Factor XII &rarr;&nbsp; Factor XI&nbsp;&rarr; Factor IX&nbsp;&rarr; Factor&nbsp;X&nbsp;</li>\n</ul>\n<p>Laboratory&nbsp;methods to<strong> initiate </strong>clotting include:</p>\n<ul>\n<li>Intrinsic pathway - adding phospholipids, calcium, and either a negatively charged substance such as glass beads</li>\n<li>Extrinsic pathway - a source of tissue factor&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/57039f8bba4a42d9aad91000bdc34855x600x578.JPEG"
    ]
  },
  {
    "text": "A child was brought to the emergency department with a big lesion on his forearm. As a surgery resident you decide to excise the lesion in the emergency operation theatre. Which of the following investigations will test the entire coagulation pathway?",
    "choices": [
      {
        "id": 1,
        "text": "Activated partial thromboplastin time"
      },
      {
        "id": 2,
        "text": "Prothrombin time"
      },
      {
        "id": 3,
        "text": "Thromboelastography"
      },
      {
        "id": 4,
        "text": "Bleeding time"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Thromboelastography</strong> (TEG)&nbsp;tests the <strong>entire coagulation pathway</strong>. It measures coagulation cascade, platelet function, and fibrinolysis.</p>\n<p>It&nbsp;is a<strong>&nbsp;</strong>test that <strong>quantitatively</strong> measures the ability of whole blood to form a clot. The advantages are:</p>\n<ul>\n<li class=\"half_rhythm\">\n<div>Global assessment of blood coagulability, including coagulation cascade, platelet function, and fibrinolysis</div>\n</li>\n<li class=\"half_rhythm\">\n<div>Rapid real-time bedside test with a simple methodology (point-of-care testing)</div>\n</li>\n<li class=\"half_rhythm\">\n<div>Diagnosis of coagulopathic bleeding</div>\n</li>\n<li class=\"half_rhythm\">\n<div>Guide transfusion therapy and decrease the use of blood products</div>\n</li>\n<li class=\"half_rhythm\">\n<div>Detect dynamic changes in blood coagulation during resuscitation</div>\n</li>\n<li class=\"half_rhythm\">\n<div>Predict the clinical efficacy of therapeutic agents affecting blood coagulability</div>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The absence of the structure marked as A will present with all except:",
    "choices": [
      {
        "id": 1,
        "text": "Pernicious anemia"
      },
      {
        "id": 2,
        "text": "Carcinoid syndrome"
      },
      {
        "id": 3,
        "text": "Vit B12 Deficiency"
      },
      {
        "id": 4,
        "text": "Zollinger ellison syndrome"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Other options:</p>\n<p><strong>Option A and C</strong>:&nbsp;<strong>Pernicious anemia</strong>&nbsp;is an autoimmune disease characterized by the presence of&nbsp;<strong>autoantibodies</strong>&nbsp;that impairs the production or activity of the&nbsp;<strong>intrinsic</strong>&nbsp;<strong>factor (IF) </strong>that is released from the <strong>parietal cells</strong>, which is required for the&nbsp;<strong>uptake </strong>of<strong> vitamin B12</strong>. There are three types of autoantibodies namely, type I, II, and III. The action of each of these include:</p>\n<ul>\n<li>Autoantibody type I prevents the binding of vitamin B12 to the intrinsic factor (IF).</li>\n<li>Autoantibody type II prevents the binding of vitamin B12-IF complex to the ileal receptors.</li>\n<li>Autoantibody type III acts against the &alpha; and &beta; subunits of the gastric proton pump, which impairs the production of intrinsic factor.</li>\n</ul>\n<p>These patients also develop&nbsp;<strong>chronic</strong>&nbsp;<strong>atrophic gastritis,</strong>&nbsp;characterized by loss of parietal cells, infiltration of lymphocytes and plasma cells, and megaloblastic changes in mucosal cells.</p>\n<p><strong>Option B</strong>: Gastric <strong>carcinoid tumors</strong> originate from&nbsp;<strong>gastric enterochromaffin-like (ECL) cells</strong>. They are referred to as well-differentiated neuroendocrine tumors. The peak incidence of carcinoid tumors is in the <strong>6th&nbsp;decade</strong>. These tumors occur throughout the GI tract,&nbsp;<strong>most commonly </strong>in the <strong>appendix</strong>, ileum, and rectum, in decreasing order of frequency.</p>\n<p>Gastric carcinoid tumors may be associated with endocrine cell hyperplasia, <strong>autoimmune chronic atrophic gastritis,</strong> MEN-I, and Zollinger&ndash;Ellison syndrome.&nbsp;<strong>Ileal carcinoid</strong>&nbsp;may cause&nbsp;<strong>carcinoid syndrome&nbsp;</strong>which is characterized by cutaneous flushing, sweating, bronchospasm, colicky abdominal pain, diarrhea, and right-sided cardiac valvular fibrosis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0608048fbb6a4d569e91dc03998477fb.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/70a114da261044dfad7b5f7e00083c8fx1280x1103.JPEG"
    ]
  },
  {
    "text": "The most appropriate biopsy specimen in case of a thyroid biopsy is?",
    "choices": [
      {
        "id": 1,
        "text": "15 follicular cell clusters contain 10-12 cells"
      },
      {
        "id": 2,
        "text": "10 follicular cell clusters contain 6-8 cells"
      },
      {
        "id": 3,
        "text": "3 follicular cell clusters contain 10-15 cells"
      },
      {
        "id": 4,
        "text": "6 follicular cell clusters contain 10-15 cells"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The following cytologic findings have been used to define specimen adequacy:&nbsp;</p>\n<ul>\n<li>a minimum of five or six groups of well-preserved cells, with each group containing approximately 10&ndash;15 cells</li>\n<li>&nbsp;six clusters of benign cells on at least two slides prepared from separate FNA biopsy samples</li>\n<li>10 clusters of follicular cells, with each cluster containing at least 20 cells .</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the correct statement regarding immune surveillance.",
    "choices": [
      {
        "id": 1,
        "text": "Anti CTLA 4 Ab is a new modality in the treatment of advanced cancers"
      },
      {
        "id": 2,
        "text": "Mutation of tumor supressor genes decreases antigen toxicity"
      },
      {
        "id": 3,
        "text": "PD1/ PDL1 activation leading to tumor supression"
      },
      {
        "id": 4,
        "text": "Binding of CD28 leads to immune tolerance"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><span style=\"font-size: 10pt;\"><strong>Anti-CTLA-4 antibody ipilimumab</strong> was the <strong>first drug</strong> to achieve a significant <strong>improvement</strong> in<strong> survival</strong> of<strong> advanced-stage melanoma</strong>.\u00a0Cytotoxic T lymphocyte antigen 4 (CTLA-4) plays an important inhibitory role in the control of T-cell activation.</span></p>\n<p><span style=\"font-size: 10pt;\">Ipilimumab is a fully-humanized <strong>IgG1 monoclonal antibody</strong> that inhibits cytotoxic T lymphocyte antigen-4 (CTLA-4).</span></p>\n<p><span style=\"font-size: 10pt;\">It has been postulated that anti-CTLA-4 antibodies act by blocking inhibitory signals from effector T-cells, allowing costimulatory signaling and generation of antitumor T-cell responses. In vitro studies demonstrated also that the antitumor activity of CTLA-4 blockade is mediated by Fc gamma receptor-expressing macrophage and hypothesized a possible role of regulatory T-cell depletion in the tumor microenvironment.</span></p>\n<p><span style=\"font-size: 10pt;\">Option B - Mutation of tumor supressor genes is associated with increased risk of cancer. Antigen toxicity is when the immune response to an antigen is excessive or misdirected, causing damage to tissues or organs.</span></p>\n<p><span style=\"font-size: 10pt;\">Option C - <strong>PD1/PDL1</strong> is an immune checkpoint whose <strong>activation inhibits T-cell function</strong> and helps with <strong>immune tolerance</strong>. Blocking PD-1/PD-L1 interaction using immune checkpoint inhibitors reactivates T cells and enhances immune responses against tumors.</span></p>\n<p><span style=\"font-size: 10pt;\">Option D - <strong>CD28</strong> is primarily involved in providing the <strong>second signal</strong> required for <strong>T cell activation</strong>. The first signal comes from the interaction between the T cell receptor (TCR) and the antigen presented by the major histocompatibility complex (MHC) on antigen-presenting cells (APCs). <strong>Without</strong> CD28-mediated costimulation, T cells that only receive the TCR signal (without the second signal) can become<strong> anergic</strong>.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Membranoproliferative glomerulonephritis is seen in:",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3"
      },
      {
        "id": 2,
        "text": "1, 2, 3, 4"
      },
      {
        "id": 3,
        "text": "2, 3, 4"
      },
      {
        "id": 4,
        "text": "1, 2"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Membranoproliferative glomerulonephritis&nbsp;<strong>(MPGN)</strong> is seen in <strong>HIV</strong>, <strong>SLE</strong>, <strong>CLL,</strong> and <strong>Hepatitis B</strong>.</p>\n<p>MPGN is caused due to <strong>immune-mediated</strong> injury. It often presents with a&nbsp;<strong>nephritic-nephrotic picture.</strong></p>\n<p>The causes of MPGN are as follows:</p>\n<ul>\n<li>Primary MPGN (Idiopathic)</li>\n<li>Secondary MPGN\n<ul style=\"list-style-type: circle;\">\n<li>System lupus erythematosus <strong>(SLE)</strong></li>\n<li>&alpha;1-antitrypsin deficiency</li>\n<li>Infections -&nbsp;&nbsp;<strong>hepatitis B</strong>, hepatitis C, <strong>HIV</strong>, schistosomiasis, endocarditis, infected ventriculoatrial shunts, chronic visceral abscesses</li>\n<li>Malignancies - chronic lymphocytic leukemia (<strong>CLL</strong>)</li>\n</ul>\n</li>\n</ul>\n<p>MPGN is characterized by the proliferation of cells predominantly in the mesangium and the capillary loops. Hence it is also called&nbsp;<strong>mesangiocapillary glomerulonephritis</strong>. There are 2 types of MPGN:</p>\n<ul>\n<li><strong>Type</strong>&nbsp;<strong>I&nbsp;</strong>-&nbsp;It&nbsp;is<strong>&nbsp;</strong>characterized by the deposition of immune complexes and mesangiocapillary proliferation.</li>\n<li><strong>Type II </strong>- It is<strong>&nbsp;</strong>now known as&nbsp;<strong>dense-deposit disease. </strong>It&nbsp;belongs to a group of disorders called <strong>C3 glomerulopathies</strong>.</li>\n</ul>\n<p>Light microscopy findings of MPGN are as follows:</p>\n<ul>\n<li><strong>Lobular glomeruli </strong>with proliferating mesangial cells, capillary endothelium, and infiltrating leukocytes <strong>(endocapillary proliferation)</strong></li>\n<li>Duplication of the basement membrane gives a <strong>double contour&nbsp;</strong>or<strong>&nbsp;tram-track </strong>appearance<strong>. </strong>It is&nbsp;especially evident in<strong> silver</strong> or<strong> PAS stains</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7f039af743ee4067a0c727cb7b482b29x1280x1391.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1954f94cdc314e7da9931a38553e4f1bx1280x1390.JPEG"
    ]
  },
  {
    "text": "Match the following:",
    "choices": [
      {
        "id": 1,
        "text": "1-b, 2-d, 3-a, 4-c"
      },
      {
        "id": 2,
        "text": "1-d, 2-b, 3-c, 4-a"
      },
      {
        "id": 3,
        "text": "1-a, 2-b, 3-c, 4-d"
      },
      {
        "id": 4,
        "text": "1-a, 2-b, 3-d, 4-c"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correctly matched associations of the following conditions are:</p>\n<ul>\n<li>Silicosis: Crazy paving pattern</li>\n<li>Mesothelioma:&nbsp;Malignant pleural effusion without mediastinal shift&nbsp;</li>\n<li>Caplan syndrome:&nbsp;Initially demonstrated in coal workers</li>\n<li>Asbestosis:&nbsp;Basal lobes are involved</li>\n</ul>\n<table style=\"height: 177px; width: 699px;\">\n<tbody>\n<tr style=\"height: 26px;\">\n<td style=\"width: 216.3125px; height: 26px;\">&nbsp;</td>\n<td style=\"width: 235.6875px; height: 26px;\">Silicosis</td>\n<td style=\"width: 226px; height: 26px;\">Asbestosis</td>\n<td style=\"width: 226px; height: 26px;\">Malignant mesothelioma</td>\n</tr>\n<tr style=\"height: 71px;\">\n<td style=\"width: 216.3125px; height: 71px;\">Exposure</td>\n<td style=\"width: 235.6875px; height: 71px;\">Crystalline <strong>silica</strong></td>\n<td style=\"width: 226px; height: 71px;\"><strong>Asbestos</strong>&nbsp;</td>\n<td style=\"width: 226px; height: 71px;\">Most specific neoplasm associated with <strong>asbestos</strong> exposure</td>\n</tr>\n<tr style=\"height: 71px;\">\n<td style=\"width: 216.3125px; height: 71px;\">\n<p>Radiologic/ Gross findings</p>\n</td>\n<td style=\"width: 235.6875px; height: 71px;\">\n<p>Simple silicosis - small rounded <strong>opacities</strong> in upper lobes</p>\n<p>Complicated silicosis - Larger opacities &gt; 1cm and <strong>eggshell calcification</strong>&nbsp;of hilar lymph nodes</p>\n<p>Acute silicosis - ground-glass opacities on X-ray and&nbsp;<strong>crazy paving pattern</strong>&nbsp;on HRCT (interlobular septal thickening with background of ground-glass opacity)</p>\n</td>\n<td style=\"width: 226px; height: 71px;\">\n<p>&nbsp;</p>\n<p>X-ray shows peripheral <strong>reticular opacities</strong> predominantly in the <strong>basal lobes</strong></p>\n<p>HRCT shows subpleural fibrotic lines, irregular opacities, <strong>traction</strong> <strong>bronchiectasis</strong>, and <strong>honeycombing</strong>&nbsp;</p>\n</td>\n<td style=\"width: 226px; height: 71px;\">Diffuse&nbsp;gelatinous, <strong>greyish-pink&nbsp;lesion</strong> arising either from the visceral or parietal pleura.&nbsp;</td>\n</tr>\n<tr style=\"height: 71px;\">\n<td style=\"width: 216.3125px; height: 71px;\">Clinical manifestations</td>\n<td style=\"width: 235.6875px; height: 71px;\">Increased risk of developing TB and bronchogenic carcinoma&nbsp;</td>\n<td style=\"width: 226px; height: 71px;\">\n<p>It mainly affects the lower lobes &nbsp;</p>\n<p>PFT shows a&nbsp;<strong data-stringify-type=\"bold\">restrictive pattern</strong>&nbsp;with a decrease in lung volumes and diffusing capacity</p>\n</td>\n<td style=\"width: 226px; height: 71px;\">\n<p>Strong male predilection 3:1</p>\n<p>Can cause <strong>malignant pleural effusion</strong></p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Caplan's syndrome</strong> also called rheumatoid pneumoconiosis, is a&nbsp;combination of&nbsp;<strong>rheumatoid</strong>&nbsp;<strong>arthritis</strong><strong>&nbsp;and pneumoconiosis.&nbsp;</strong>It manifests as&nbsp;pneumoconiotic nodules&nbsp;along with features of seropositive<strong>&nbsp;</strong>rheumatoid arthritis.&nbsp;Caplan syndrome was first described in <strong>coal miners</strong> and later in patients with silicosis too.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Blood examination shows pancytopenia, which can be correct?",
    "choices": [
      {
        "id": 1,
        "text": "B, D"
      },
      {
        "id": 2,
        "text": "A, B, C"
      },
      {
        "id": 3,
        "text": "B, C,  D"
      },
      {
        "id": 4,
        "text": "A, B, D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Megaloblastic anemia</strong> (hypocellular phase), <strong>hairy cell leukemia,</strong> and <strong>hypocellular MDS</strong>&nbsp;can show <strong>pancytopenia</strong>. Acute promyelocytic leukemia is not associated with pancytopenia.&nbsp;&nbsp;</p>\n<p>Causes of <strong>pancytopenia</strong> with <strong>hypocellular bone marrow:</strong></p>\n<ul>\n<li>Acquired aplastic anemia</li>\n<li>Hypocellular myelodysplastic syndrome</li>\n<li>Rare aleukemic leukemia</li>\n<li>Some acute lymphoid leukemia</li>\n<li>Rare lymphomas of bone marrow</li>\n<li>Copper deficiency</li>\n</ul>\n<p>Causes of <strong>pancytopenia</strong> with <strong>cellular&nbsp;bone&nbsp;marrow:</strong></p>\n<ul>\n<li class=\"p2\">Myelodysplastic syndromes</li>\n<li class=\"p2\">Systemic lupus erythematosus</li>\n<li class=\"p2\">Paroxysmal nocturnal hemoglobinuria (PNH)</li>\n<li class=\"p2\">Hypersplenism</li>\n<li class=\"p2\">B<span class=\"s1\">12</span>, folate deficiency, Copper deficiency</li>\n<li class=\"p2\">Myelofibrosis</li>\n<li class=\"p2\">Aleukemic leukemia</li>\n<li class=\"p2\">HIV,&nbsp;Brucellosis,&nbsp;Leishmaniasis,&nbsp;Tuberculosis Sepsis</li>\n<li class=\"p2\">Myelophthisis&nbsp;</li>\n<li class=\"p2\">Bone marrow lymphoma</li>\n<li class=\"p2\">Sarcoidosis</li>\n<li class=\"p2\">Hairy cell leukemia</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is correct regarding Peutz Jeghers syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "2, 4, and 5"
      },
      {
        "id": 2,
        "text": "1, 2, and 3"
      },
      {
        "id": 3,
        "text": "1, 3, and 4"
      },
      {
        "id": 4,
        "text": "2, 3, and 5"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Note:</strong> Congenital hypertrophy of retinal pigment epithelium is seen in Familial adenomatous polyposis (FAP), not&nbsp;<strong>Peutz-Jeghers syndrome</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d998dd091f184c19bb6dfc1541734616x581x697.PNG"
    ]
  },
  {
    "text": "A patient with cervical lymphadenopathy has t(11;14) positive. Which of the following markers should be done to confirm the diagnosis?\nA. CD10\nB. CD 200\nC. Sox11\nD. Cyclin D1",
    "choices": [
      {
        "id": 1,
        "text": "A,B"
      },
      {
        "id": 2,
        "text": "B,D"
      },
      {
        "id": 3,
        "text": "A,C"
      },
      {
        "id": 4,
        "text": "C,D"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Mantle cell&nbsp;lymphoma</strong>&nbsp;has its origin&nbsp;<strong>from na&iuml;ve B cell</strong>&nbsp;which&nbsp;<strong>is characterized by a lack of somatic hypermutation</strong>&nbsp;<strong>of the IgH gene&nbsp;</strong>(Due to the tumor arising from Naive B Cells).</p>\n<p><strong>Mantle cell lymphoma :</strong></p>\n<ul>\n<li>Tumor cells resemble the normal mantle zone B- cells which surround the germinal center</li>\n<li>Seen in fifth and sixth decades of life</li>\n<li>Has male predominance</li>\n<li><strong>Has (11;14) translocation</strong></li>\n<li>IgH locus on &ndash; chromosome 14</li>\n<li><strong>Cyclin D1 locus on &ndash; chromosome 11</strong></li>\n<li><strong>Overexpression of Cyclin D1 is seen</strong></li>\n<li>a more indolent<strong>, SOX11 variant </strong>that often presents with circulating disease with splenomegaly but without significant lymphadenopathy and with a low Ki67 (&lt;10%).</li>\n</ul>\n<p><strong>Features:</strong></p>\n<ul>\n<li><strong>Painless lymphadenopathy</strong></li>\n<li><strong>Splenomegaly</strong></li>\n<li>Multifocal mucosal involvement of small bowel and colon &ndash;<strong>&nbsp;lymphomatoid polyposis</strong></li>\n</ul>\n<p><strong>Histology :</strong></p>\n<ul>\n<li>Nodal tumor cells may surround reactive germinal centers to produce a nodular appearance at low power, or diffusely efface the node.</li>\n<li>Typically, the proliferation consists of a<strong>&nbsp;homogeneous population of small lymphocytes with irregular to occasionally deeply clefted (cleaved) nuclear contours</strong></li>\n<li>Large cells resembling&nbsp;<strong>centroblasts and proliferation centers are absent</strong>, distinguishing mantle cell lymphoma from follicular lymphoma and CLL/SLL, respectively</li>\n</ul>\n<p><strong>Immunophenotyping :</strong></p>\n<ul>\n<li><strong>CD 5+</strong></li>\n<li><strong>CD 23 negative</strong></li>\n<li><strong>CD19 and&nbsp; CD20 positive</strong></li>\n<li>Moderately <strong>high levels of surface Ig</strong> (usually IgM and IgD with &kappa; or &lambda; light chain)</li>\n<li>The IgH genes lack somatic hypermutation, supporting an origin from a naive B cell</li>\n</ul>\n<p>&nbsp;</p>\n<table style=\"height: 407px;\" width=\"352\">\n<tbody>\n<tr style=\"height: 15.6px;\">\n<td style=\"height: 15.6px; width: 76.9097px;\"><strong>Type of neoplasm</strong></td>\n<td style=\"height: 15.6px; width: 141.354px;\"><strong>Cytogenetics</strong></td>\n<td style=\"height: 15.6px; width: 165.799px;\"><strong>Immunophenotyping</strong></td>\n</tr>\n<tr style=\"height: 20px;\">\n<td style=\"height: 20px; width: 76.9097px;\">Follicular lymphoma</td>\n<td style=\"height: 20px; width: 141.354px;\"><strong>t(14;18)</strong>&nbsp;Increased expression of&nbsp;<strong>bcl-2</strong></td>\n<td style=\"height: 20px; width: 165.799px;\">Bcl-2 protein, surface Ig, CD19<sup>+</sup>, CD20<sup>+</sup>, CD 10<sup>+</sup>(CALLA), CD 5<sup>-</sup></td>\n</tr>\n<tr style=\"height: 20px;\">\n<td style=\"height: 20px; width: 76.9097px;\">Mantle cell lymphoma</td>\n<td style=\"height: 20px; width: 141.354px;\"><strong>t(11;14)</strong>&nbsp;Increased expression of&nbsp;<strong>cyclin D1</strong></td>\n<td style=\"height: 20px; width: 165.799px;\">Cyclin d1. Surface Ig, CD 5<span style=\"font-size: 11.666666030883789px;\">+</span>, CD 23<sup>-</sup></td>\n</tr>\n<tr style=\"height: 20px;\">\n<td style=\"height: 20px; width: 76.9097px;\">Burkitt's lymphoma</td>\n<td style=\"height: 20px; width: 141.354px;\"><strong>t(8;14)</strong>&nbsp;increased expression of&nbsp;<strong>c-myc</strong></td>\n<td style=\"height: 20px; width: 165.799px;\">BCL-6 protein, surface Ig, CD19<sup>+</sup>, CD20<sup>+</sup>, CD 10<sup>+</sup>(CALLA)</td>\n</tr>\n<tr style=\"height: 20px;\">\n<td style=\"height: 20px; width: 76.9097px;\">Marginal zone lymphoma</td>\n<td style=\"height: 20px; width: 141.354px;\"><strong>t(11;18)</strong></td>\n<td style=\"height: 20px; width: 165.799px;\">CD20<sup>+</sup>, CD 10<sup>-</sup>, CD 5<sup>-</sup></td>\n</tr>\n<tr style=\"height: 20px;\">\n<td style=\"height: 20px; width: 76.9097px;\">Hairy cell leukemia</td>\n<td style=\"height: 20px; width: 141.354px;\">?TNF alpha</td>\n<td style=\"height: 20px; width: 165.799px;\">Surface Ig, CD19<sup>+</sup>, CD20<sup>+</sup>, CD 25+, CD 103+, CD 11c+; TRAP positive</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '079 Pathology Aiims 2020 (May And Nov Ini-Cet)';
        let hierarchy = ["Marrow", "PYQs", "Pathology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>