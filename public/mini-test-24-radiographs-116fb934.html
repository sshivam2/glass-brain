<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Test- 24 (Radiographs) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 5-year-old boy is brought to the emergency department with complaints of dysphagia, fever, stridor, drooling, and muffled voice. The following image is seen on a lateral x-ray of the neck. What is the finding seen in the given radiograph?",
    "choices": [
      {
        "id": 1,
        "text": "Steeple sign"
      },
      {
        "id": 2,
        "text": "Thumb sign"
      },
      {
        "id": 3,
        "text": "Adenoid hypertrophy"
      },
      {
        "id": 4,
        "text": "Omega shaped epiglottis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Thumb sign</strong> is seen on the given lateral view radiograph.</p>\n<p>The above clinical features of a&nbsp;toxic&nbsp;looking child with high-grade fever, tachypnea,&nbsp;stridor, dysphagia with salivary drooling are suggestive of&nbsp;<strong>acute epiglottitis</strong>.&nbsp;<strong>Thumb sign&nbsp;</strong>on lateral X-ray of neck is pathognomonic for <strong>acute epiglottitis</strong>.&nbsp;</p>\n<p><strong>Acute epiglottitis</strong> is an acute rapidly progressive confined to supraglottic structures i.e., epiglottis, aryepiglottic fold and arytenoids. It usually affects children of age <strong>2-7 years</strong>. It has a potentially fulminating course of fever, sore throat, dyspnea, and rapidly progressing respiratory obstruction.</p>\n<p>Management:</p>\n<p>Indirect laryngoscopy shows edema and congestion of supraglottic structures. A lateral X-ray of the neck shows swollen epiglottis giving an appearance called the thumb sign.</p>\n<p>Acute epiglottitis is a<strong>&nbsp;medical emergency</strong>&nbsp;due to sudden and unpredictable airway obstruction. The treatment includes the following:</p>\n<ul>\n<li>Admission to ICU</li>\n<li>Airway management - endotracheal intubation, tracheostomy for respiratory obstruction</li>\n<li>Antibiotics - <strong>Ampicillin </strong>or<strong> third-generation cephalosporin</strong>&nbsp;is indicated in the treatment of acute epiglottitis&nbsp;along with airway management.</li>\n<li>Dexamethasone may be given to reduce pharyngeal edema</li>\n</ul>\n<p>Other options:</p>\n<p>Option A: <strong>Steeple sign</strong> is seen in <strong>laryngotracheobronchitis</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/305339cc7e1340b5aeffe0ab4b0c7aef.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8bc406afa34b45d29d8c64094b9a593cx1024x1024.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ed09b84243614f119ad9f3b956924fdax512x546.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b740e9204085422b8493441a102cf9fbx366x366.JPEG"
    ]
  },
  {
    "text": "A patient presents with diffuse abdominal pain, and on examination, there is generalised tenderness along with board-like abdominal rigidity. An X-ray of the abdomen is provided. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Acute pancreatitis"
      },
      {
        "id": 2,
        "text": "Perforation peritonitis"
      },
      {
        "id": 3,
        "text": "Peptic ulcer"
      },
      {
        "id": 4,
        "text": "Hiatal hernia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario and the chest radiograph showing <strong>air under the diaphragm</strong> are suggestive of a\u00a0<strong>hollow viscus perforation resulting in perforation peritonitis.</strong></p>\n<p><strong>Perforation of a viscus</strong> is a life-threatening condition that occurs following the rupture of the alimentary tract. This leads to the leakage of the enteric contents, thereby leading to acute bacterial peritonitis.\u00a0<strong>Peritonitis</strong> is the generalized or localized <strong>inflammation of the peritoneum either due to the free spillage of fluids</strong> into the peritoneal cavity or secondary bacterial infection.</p>\n<p><strong>Clinical features of hollow viscous perforation</strong> occur due to the developed peritonitis and the features include <strong>abdominal pain</strong> and <strong>distension</strong>, nausea, vomiting, tachycardia, <strong>tenderness,</strong>\u00a0rebound tenderness,\u00a0decreased or <strong>absent bowel sounds,</strong> and guarding on palpation. Fever may be present. Sometimes, features of septic shock can be seen at later stages.</p>\n<p>Investigations include estimating the white blood cell count, urea, serum electrolytes, and an\u00a0erect abdominal radiograph showing <strong>free gas under </strong>the<strong> diaphragm</strong>. A\u00a0supine radiograph may show <strong>dilated gas-filled loops of the bowel,\u00a0</strong>suggestive of paralytic ileus. The below image shows a hollow viscus perforation.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a39bf4389e7141d7bb94c73deec790f3.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/49e13902d4034734a9ab8acc297bc7e4x1279x1410.JPEG"
    ]
  },
  {
    "text": "A post-menopausal woman presents with a history of pain in the forearm after falling down the stairs. X-ray is done and is shown below. What is your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Smith\u2019s fracture"
      },
      {
        "id": 2,
        "text": "Colles\u2019 fracture"
      },
      {
        "id": 3,
        "text": "Galeazzi fracture"
      },
      {
        "id": 4,
        "text": "Monteggia fracture"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario and&nbsp;X-ray are most suggestive of <strong>Colles&rsquo; fracture</strong>.</p>\n<p>The radiograph shows a transverse fracture of the radius just above the wrist. The fracture appears extra-articular. In the AP-view, the distal fracture fragment is dorsally angulated. This is characteristic of Colles' fracture.&nbsp;&nbsp;</p>\n<p><strong>Displacements that may be seen in Colles' fracture:</strong></p>\n<ul>\n<li>Dorsal tilt</li>\n<li>Dorsal shift</li>\n<li>Lateral tilt (Radial tilt)</li>\n<li>Lateral shift (Radial shift)</li>\n<li>Supination</li>\n<li>Impaction of fragments</li>\n</ul>\n<p>The clinical feature includes&nbsp;<strong>dinner fork deformity</strong>&nbsp;with prominence on the back of the wrist and depression in the front. It&nbsp;is treated by a <strong>Colles&rsquo; cast,</strong> which immobilizes the wrist in palmar flexion, pronation, and ulnar deviation.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f9f7348772e74bf995cb3a586c1b940c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9894802843f146d0889e9c7642dfae63x1063x883.JPEG"
    ]
  },
  {
    "text": "A patient after a motor vehicle accident develops breathing difficulty. On examination, there are decreased breath sounds on the right side, and the trachea is shifted to the left. Heart sounds are normal. There is a dull note on percussion. The chest X-ray is shown below. What will be the next step of management?",
    "choices": [
      {
        "id": 1,
        "text": "Needle thoracostomy"
      },
      {
        "id": 2,
        "text": "ICD placement"
      },
      {
        "id": 3,
        "text": "Open thoracotomy"
      },
      {
        "id": 4,
        "text": "Pericardiocentesis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Decreased breath</strong> sounds, <strong>tracheal deviation</strong> to the opposite side, <strong>dull note</strong> on percussion, and the chest X-ray showing blunting of the costophrenic angle and <strong>opacification</strong> is suggestive of <strong>massive</strong> <strong>hemothorax</strong>. The next step of management that can be done for this patient is\u00a0<strong>intercostal drainage tube</strong>(ICD) <strong>placement</strong>.</p>\n<p><strong>Massive hemothorax</strong> occurs when <strong>more than 1500 mL of blood</strong>, equivalent to one-third or more of the patient's blood volume, rapidly accumulates in the chest cavity. This condition is typically caused by a <strong>penetrating injury</strong> that damages major blood vessels, although it can also be the result of blunt trauma.</p>\n<p>In patients with massive hemothorax, the <strong>neck veins</strong> may appear <strong>flat</strong> due to severe hypovolemia, or they may be distended if there is a concurrent tension pneumothorax. If a patient is in shock and exhibits an <strong>absence of breath sounds</strong> or <strong>dullness upon percussion</strong> on one side of the chest, it suggests the presence of a massive hemothorax.</p>\n<p>The <strong>initial management</strong> of massive hemothorax involves simultaneous resuscitation to <strong>restore blood volume</strong> and <strong>decompression</strong> of the chest cavity. This is achieved by establishing large-diameter intravenous lines, administering crystalloid fluids, and initiating transfusion of blood at the earliest opportunity. A <strong>single chest tube</strong> with a diameter of 28-32 French is inserted, typically at the <strong>fifth intercostal space</strong>, just <strong>anterior</strong> to the <strong>midaxillary line</strong>. Volume restoration is rapidly continued while the chest cavity is decompressed.</p>\n<p>The <strong>immediate return</strong> of <strong>1500 mL</strong> or <strong>greater</strong> volume of blood typically signifies the urgent requirement for thoracotomy. Patients who initially show an output of less than 1500 mL of fluid but <strong>continue to bleed</strong> may also necessitate <strong>thoracotomy.</strong></p>\n<div class=\"page\" title=\"Page 121\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 121\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 122\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Needle thoracostomy</strong> and <strong>open thoracostomy</strong> are done in cases of <strong>tension pneumothorax</strong>. Here, the patients present with <strong>distended neck veins</strong>, <strong>decreased breath</strong> sounds, <strong>tracheal deviation</strong> to the opposite side, and <strong>hyper-resonant note</strong>\u00a0on percussion.\u00a0</p>\n<p><strong>Pericardiocentesis</strong> is done in cases of<strong> cardiac tamponade</strong>. Here, the patients present with <strong>distended neck</strong> <strong>veins</strong>, normal breath sounds, and <strong>muffled heart sounds</strong>. There is <strong>no mediastinal shift</strong> here.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ff101a6937f64dafb828e24fdc2f3dd5.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient visits your clinic for follow-up after a breast surgery. She undergoes an x-ray scan, the findings of which are given below. Which of the following complications, if present in this patient, would show the linguine sign on MRI?",
    "choices": [
      {
        "id": 1,
        "text": "Intra-capsular silicone rupture"
      },
      {
        "id": 2,
        "text": "Extra-capsular silicone rupture"
      },
      {
        "id": 3,
        "text": "Anaplastic large cell lymphoma"
      },
      {
        "id": 4,
        "text": "Contracture and calcifications"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given x-ray shows silicone breast implants in a patient.&nbsp;<strong>MRI</strong> showing the<strong>&nbsp;linguine sign</strong> in post-silicone breast implant patients indicates&nbsp;<strong>intra-capsular silicone rupture.</strong></p>\n<p>After implantation of a silicone or saline&nbsp;breast implant, a fibrous capsule (scar) forms around the implant shell. In an intracapsular rupture, the contents of the implant are contained by the fibrous scar, while the shell appears as a group of&nbsp;<strong>wavy lines</strong>. This has been termed the linguine sign. It is seen in&nbsp;<strong>intra-capsular rupture&nbsp;of a breast implant.</strong></p>\n<p>Multiple hyperintense foci on T2-weighted images are sometimes found within the implant lumen. These findings are referred to as the &ldquo;<strong>salad oil sign</strong>&rdquo; or &ldquo;<strong>droplet sign</strong>&rdquo;.</p>\n<p>Intracapsular rupture on MRI.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4d0f56e96fd0423da84f304576ad331d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c3069560a21549b2989fddabb668024ax394x208.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/48ca32f90f554e34b5a91b894ebbf3afx1004x753.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4fecf4172b61403aa29857a951113efex1125x900.JPEG"
    ]
  },
  {
    "text": "Which of the following investigations is shown in the radiograph?",
    "choices": [
      {
        "id": 1,
        "text": "Barium swallow"
      },
      {
        "id": 2,
        "text": "Barium meal"
      },
      {
        "id": 3,
        "text": "Barium meal follow through"
      },
      {
        "id": 4,
        "text": "Barium enema"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image is a double contrast radiograph of <strong>barium meal</strong>.&nbsp;It is used to examine the lower half of the esophagus, stomach, and entire duodenum.</p>\n<table style=\"height: 209px;\" width=\"630\">\n<tbody>\n<tr style=\"height: 43.5312px;\">\n<td style=\"width: 202.672px; height: 43.5312px;\"><strong>GI Imaging</strong></td>\n<td style=\"width: 202.672px; height: 43.5312px;\"><strong>Preparations of barium</strong></td>\n<td style=\"width: 202.672px; height: 43.5312px;\"><strong>Structures best visualized</strong></td>\n</tr>\n<tr style=\"height: 29px;\">\n<td style=\"width: 202.672px; height: 29px;\">Barium swallow</td>\n<td style=\"width: 202.672px; height: 29px;\">Barium paste</td>\n<td style=\"width: 202.672px; height: 29px;\">Esophagus</td>\n</tr>\n<tr style=\"height: 29px;\">\n<td style=\"width: 202.672px; height: 29px;\">Barium meal</td>\n<td style=\"width: 202.672px; height: 29px;\">95% BaSO4</td>\n<td style=\"width: 202.672px; height: 29px;\">Stomach and duodenum</td>\n</tr>\n<tr style=\"height: 29px;\">\n<td style=\"width: 202.672px; height: 29px;\">Barium meal follow-through</td>\n<td style=\"width: 202.672px; height: 29px;\">50% BaSO4</td>\n<td style=\"width: 202.672px; height: 29px;\">Small bowel</td>\n</tr>\n<tr style=\"height: 29px;\">\n<td style=\"width: 202.672px; height: 29px;\">Barium enema</td>\n<td style=\"width: 202.672px; height: 29px;\">25% BaSO4</td>\n<td style=\"width: 202.672px; height: 29px;\">Large bowel</td>\n</tr>\n</tbody>\n</table>\n<p>The below radiograph shows a <strong>barium follow-through</strong> study. It is useful in visualizing small bowel pathology and evaluating the function of the <strong>small</strong> <strong>bowel</strong>. It is inferior to enteroclysis enema where contrast is administered through a nasogastric tube.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/29fe11355042452db6502449f62d94f5.JPEG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/4090e0e1ce054423a94b8f2a696cd78ax355x420.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0f6e2f41aa2e4522bb3b8ed6ba5d3053x387x450.JPEG"
    ]
  },
  {
    "text": "A 3-day-old neonate presented with recurrent bilious vomiting. An X-ray erect abdomen is given below. What is the next best step in managing this condition?",
    "choices": [
      {
        "id": 1,
        "text": "CT abdomen"
      },
      {
        "id": 2,
        "text": "Gastrograffin follow-through"
      },
      {
        "id": 3,
        "text": "USG abdomen"
      },
      {
        "id": 4,
        "text": "Explorative laparotomy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical history along with the radiograph showing the\u00a0<strong>triple bubble sign</strong> implies a diagnosis of <strong>jejunal\u00a0atresia</strong>.\u00a0A <strong>contrast\u00a0study</strong> is the next best investigation to exclude other large bowel anomalies.</p>\n<p><strong>Small bowel atresias</strong> present with <strong>intestinal obstruction</strong> soon after birth.<strong>\u00a0</strong></p>\n<ul>\n<li><strong>Bilious vomiting</strong> is the dominant feature in <strong>jejunal atresia</strong></li>\n<li><strong>A</strong><strong>bdominal distension</strong> is more prominent with <strong>ileal atresia</strong>.</li>\n</ul>\n<p>A small amount of pale meconium may be passed despite the atresia.\u00a0</p>\n<p>Plain abdominal radiographs show a variable number of <strong>dilated loops</strong> of bowel and fluid levels according to the level of obstruction.\u00a0<span style=\"font-size: 14px;\">A <strong>contrast enema</strong> study can demonstrate a narrow calibre of colon and may also be useful to exclude multiple atresias, which may be present in 10% to 15% of cases.</span></p>\n<p>In most cases of jejunal/ileal atresia, the distal end of the <strong>dilated proximal small bowel</strong> is <strong>resected</strong> and a primary end-to-end <strong>anastomosis</strong> is done. If the proximal bowel is extremely dilated, it may need to be tapered to the distal bowel before anastomosis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2d798f701a204ccc862ea4a6117aaf10.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 70-year-old woman had her routine follow up and her USG of the liver is shown below. She is asymptomatic at present but has a history of mild right hypochondriac pain which is relieved by taking analgesics. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Gallstones"
      },
      {
        "id": 2,
        "text": "Amoebic liver abscess"
      },
      {
        "id": 3,
        "text": "Hydatid cyst"
      },
      {
        "id": 4,
        "text": "Acute cholecystitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The USG shows a\u00a0gallbladder wall that is thickened with no edema in the pericholecystic fat. The gallbladder contains biliary sludge and gallstones, shown as the acoustic shadowing. There are no signs of current cholecystitis and thus the diagnosis is <strong>gallstones</strong>.</p>\n<div class=\"page\" title=\"Page 1212\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 844\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Ultrasonography</strong> is the <strong>most accurate</strong> initial imaging modality of choice for the diagnosis of gallbladder stones. They appear as <strong>echogenic foci</strong> producing <strong>acoustic shadows</strong>. Size of the gallbladder, presence of stones or polyps, and the thickness of the wall are measured. Inflammation around the gallbladder, the size of the common bile duct, and stones in the extrahepatic biliary tree can also be determined. The sensitivity of UG is &gt; 95%. Small stones can be differentiated from small polyps by the presence of mobility or of an acoustic shadow.\u00a0</p>\n<p>The image below shows ultrasonography of the gall bladder:\u00a0\u00a0</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/583b2f844d42455088f73a41214d047e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c83aeca3c6154493b2cf04ec14981dadx1191x1198.JPEG",
      "https://cdn1.dailyrounds.org/uploads/f60ec97a9d5147a0b331649785186a3d.JPEG"
    ]
  },
  {
    "text": "CT done for a patient with abdominal pain and sterile pyuria is shown below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Renal stones"
      },
      {
        "id": 2,
        "text": "Renal cell carcinoma"
      },
      {
        "id": 3,
        "text": "Renal tuberculosis"
      },
      {
        "id": 4,
        "text": "Nephrocalcinosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario of <strong>sterile pyuria</strong> with CT showing right-sided <strong>putty kidney</strong> points\u00a0<strong>to</strong>\u00a0<strong>renal tuberculosis</strong>.<span class=\"Apple-converted-space\">\u00a0</span></p>\n<p>Putty kidney refers to the\u00a0<strong>amorphous dystrophic calcification</strong> seen over the entire kidney during the <strong>end stage</strong> of genitourinary TB.\u00a0</p>\n<p><strong>Genitourinary tuberculosis</strong> is caused by the dissemination of the organism through the bloodstream. It occurs either due to reinfection or reactivation of old TB.</p>\n<p><strong>CT</strong> is the most sensitive modality and is the preferred means of visualizing <strong>renal calcifications</strong>. <strong>CT urography</strong> is done to assess the <strong>various stages</strong> of renal TB.\u00a0</p>\n<p><strong>ATT</strong> is given to all patients with genitourinary TB.\u00a0<strong>Nephrectomy</strong> is the preferred treatment in patients with <strong>putty</strong>/ <strong>cement </strong>kidneys.</p>\n<p>Option D: <strong>Nephrocalcinosis</strong> refers to the deposition of calcium salts in the kidney parenchyma and tubules.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/71210cc868284c1ebc2d6dcc49174def.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/43717f766b854716840a198e10d37ae6x1280x1703.JPEG"
    ]
  },
  {
    "text": "A male patient is brought unresponsive to the emergency room following trauma to the head. CT head is shown below. What is the definitive management for his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Intubation + Ventilation"
      },
      {
        "id": 2,
        "text": "Intravenous mannitol"
      },
      {
        "id": 3,
        "text": "Craniotomy with evacuation"
      },
      {
        "id": 4,
        "text": "Anticoagulants"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above clinical scenario along with the image showing lens-shaped hemorrhage is consistent with acute <strong>epidural hematoma</strong>. <strong>Craniotomy</strong> with<strong> emergency evacuation</strong> of the<strong> hematoma&nbsp;</strong>is the definitive management of this condition.</p>\n<p>Extradural hematoma (EDH) is also known as an<strong>&nbsp;epidural</strong> hematoma. It is a collection of blood between the&nbsp;<strong>outer layer of the dura</strong> and the <strong>inner surface of the skull</strong> which is called the periosteal layer. The bleeding is most commonly due to torn <strong>middle meningeal artery</strong>.</p>\n<p>EDH is commonly associated with a history of<strong> trauma</strong> and<strong> associated skull fracture. </strong>&nbsp;It is associated with an underlying<strong> fracture</strong> of the<strong> squamous</strong> part of the<strong> temporal bone.</strong></p>\n<p>Epidural hematoma may present with a transient loss of consciousness immediately following the trauma followed by a <strong>lucid interval</strong>, where consciousness is recovered. The patient subsequently worsens his neurological status due to continued bleeding from the site as seen in this patient. It can cause a <strong>mass effect with herniation</strong></p>\n<p>EDH is diagnosed with&nbsp;<strong>CT</strong> and<strong> MRI</strong>.<strong>&nbsp;</strong>CT image shows the typical&nbsp;<strong>bi-convex hyperdense</strong> lesion <strong>not crossing cranial sutures,</strong> but can<strong> cross&nbsp;venous sinuses</strong>.</p>\n<p>The definitive management for any patient with <strong>GCS&lt;9</strong> and <strong>pupillary abnormalities</strong> such as anisocoria is <strong>craniotomy</strong> with emergency evacuation of the hematoma.&nbsp;Surgery is also recommended for patients with <strong>worsening neurological status</strong> and <strong>hematoma</strong> volume<strong> &gt;30ml</strong> regardless of neurological status</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1106b257933f4562b05ad03cf1e6f8a6.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The Money bag heart is seen in:",
    "choices": [
      {
        "id": 1,
        "text": "Pericardial effusion"
      },
      {
        "id": 2,
        "text": "TGA"
      },
      {
        "id": 3,
        "text": "TOF"
      },
      {
        "id": 4,
        "text": "Pulmonary hypertension"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The Money bag heart is seen in <strong>pericardial</strong> <strong>effusion.</strong></p>\n<p>Plain PA chest X-ray shows an enlarged cardiac silhouette. There is <strong>effacement of the normal cardiac borders</strong>, development of a <strong>&lsquo;flask&rsquo;</strong> or &lsquo;<strong>water bottle&rsquo;</strong> cardiac configuration and bilateral hilar overlay which are features of pericardial effusion. It is also known as <strong>Money bag</strong> or <strong>leather bottle</strong>-shaped heart.</p>\n<p>Investigation of choice: <strong>Echocardiography</strong>.</p>\n<p>Signs on plain radiograph include:</p>\n<ul>\n<li>Globular enlargement of the cardiac shadow giving a&nbsp;<strong>water bottle</strong> configuration.</li>\n<li>Lateral CXR may show a vertical opaque line (pericardial fluid)&nbsp;separating a vertical lucent line directly behind the sternum (paracardial fat) anteriorly from a similar lucent vertical lucent line (epicardial fat) posteriorly; this is known as the&nbsp;<strong>Oreo cookie sign.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c1b47d8d375f403694efdc8095b27f32.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c68fa0f4530d4a3cbf4a9615efd01e98x1024x1024.PNG"
    ]
  },
  {
    "text": "A 51-year-old man complains of abdominal pain and blood-stained stools. The barium study of his intestines shows the following finding. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Intussusception"
      },
      {
        "id": 2,
        "text": "Volvulus"
      },
      {
        "id": 3,
        "text": "Diverticulitis"
      },
      {
        "id": 4,
        "text": "Ulcerative colitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario and the radiological images are suggestive of <strong>intussusception</strong>.</p>\n<p>In intussusception, the occluding mass prolapsing into the lumen has been termed the <strong>coiled spring appearance</strong> (barium in the lumen of the intussusceptum and in the intraluminal space). In adults, it develops due to a tumor of the bowel.</p>\n<p>The intussusception appears as a <strong>sausage-shaped mass </strong>in a longitudinal plane&nbsp;or a <strong>target mass </strong>in the transverse plane<strong>&nbsp;</strong>on CT and USG.&nbsp;</p>\n<p>Ultrasound signs include:</p>\n<ul>\n<li>Target sign (also known as the doughnut sign)</li>\n<li>Pseudokidney sign- this is seen in the longitudinal section of the bowel\n<ul>\n<li>the edematous bowel resembles renal parenchyma and</li>\n<li>the mesentery which is dragged into the intussusception resembles renal hilum</li>\n</ul>\n</li>\n<li>Crescent in a doughnut sign.</li>\n</ul>\n<p>Option B: Volvulus presents with&nbsp;constipation, abdominal bloating, nausea, and/or vomiting. It shows <strong>coffee bean sign</strong></p>\n<p>Option C: Diverticulitis presents with pain in the left iliac fossa</p>\n<p>Option D: Ulcerative colitis causes <strong>backwash ileitis</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4ea2dcbee4b544e39f459bc9f281ba5f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old patient with a history of tuberculosis presents with dyspnea on exertion. On examination, it is noted that the JVP rises during inspiration. A chest radiograph of the patient is given below. Which of the following is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Restrictive cardiomyopathy"
      },
      {
        "id": 2,
        "text": "Pulmonary embolism"
      },
      {
        "id": 3,
        "text": "Constrictive pericarditis"
      },
      {
        "id": 4,
        "text": "Cardiac tamponade"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario of a patient with a <strong>history of tuberculosis</strong> now presenting with <strong>positive Kussmaul's sign</strong>, and <strong>pericardial calcification</strong> seen on chest radiograph suggest a diagnosis of <strong>constrictive pericarditis</strong>.\u00a0</p>\n<p><strong>Constrictive pericarditis</strong> is a <strong>chronic</strong> type of <strong>pericarditis</strong> that results when there is healing of acute fibrinous pericarditis or absorption of chronic pericardial effusion. While the most common cause in developing countries is <strong>tuberculosis</strong>, in developed countries, it occurs <strong>following viral pericarditis</strong>, cardiac surgery, <strong>mediastinal irradiation,</strong> or as a manifestation of <strong>rheumatoid arthritis</strong> and <strong>SLE</strong>. The main abnormality which occurs in constrictive pericarditis is the <strong>inability of the ventricles to fill</strong> because of the rigid and thickened pericardium. Unlike tamponade, this restriction is not uniform through the diastole. Ventricular <strong>filling</strong> is <strong>normal</strong> <strong>early</strong> in the diastole but <strong>stops suddenly</strong> when the elastic limit of the pericardium is reached. <strong>Y-descent</strong> on the JVP curve is <strong>prominent</strong> in constrictive pericarditis because it represents the rapid early filling of the ventricles. A <strong>sudden stop</strong> in ventricular filling and subsequent <strong>rising</strong> <strong>pressure</strong> is seen as a <strong>square root sign</strong> in the JVP curve.</p>\n<p>The patient presents with exertional dyspnea and orthopnea. There may be a <strong>paradoxical rise in venous pressure during inspiration (Kussmaul's sign)</strong>. Apart from constrictive pericarditis, <strong>Kussmaul's sign</strong> can be <strong>positive</strong> in <strong>tricuspid stenosis</strong>,\u00a0<strong>restrictive cardiomyopathy</strong>, right heart failure, and pulmonary embolism. The ECG often shows low-voltage QRS complexes and diffuse flattening of T-waves. A chest radiograph may show <strong>pericardial calcification</strong>, especially in\u00a0<strong>tuberculous pericarditis</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5a6025bf946344d1aac99ee63c4f5e48.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A neonate presented with mild intermittent upper abdominal pain. On examination, the infant has a scaphoid abdomen and breath sounds are decreased on both sides. X-ray is given below. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Bochdalek hernia"
      },
      {
        "id": 2,
        "text": "Pneumonia"
      },
      {
        "id": 3,
        "text": "Morgagni hernia"
      },
      {
        "id": 4,
        "text": "Eventration of diaphragm"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical picture of respiratory distress, intermittent abdominal pain, scaphoid abdomen, absent breath sounds in both sides of the chest, and an X-ray image showing bowel loops in the thoracic cavity is diagnostic of <strong>congenital diaphragmatic hernia</strong> (CDH), the most common variant being <strong>Bochdalek hernia</strong>.</p>\n<p>If the defect is posterolateral it is called&nbsp;<strong>Bochdalek hernia&nbsp;</strong>and if it's anteromedial it is called<strong>&nbsp;Morgagni hernia.&nbsp;</strong></p>\n<p>Clinical features :</p>\n<ul>\n<li><strong>Respiratory distress</strong>&nbsp;is a cardinal sign in infants with a congenital diaphragmatic hernia (CDH).</li>\n<li><strong>Early respiratory distress, within 6 hr after birth, is thought to be a poor prognostic sign</strong>.</li>\n<li>Children with CDH may also have a&nbsp;<strong>scaphoid abdomen and increased chest wall diameter.</strong></li>\n<li>Bowel sounds may also be heard in the chest, with a&nbsp;<strong>bilateral&nbsp;decrease in breath sounds.</strong></li>\n<li>The point of maximal cardiac impulse may be displaced away from the side of a hernia if a&nbsp;<strong>mediastinal shift</strong>&nbsp;has occurred.</li>\n<li><strong>Retroperitoneal fat, left kidney, spleen&nbsp;</strong>or only the omentum commonly herniates through the defect. If the defect is large, most abdominal contents including the stomach may herniate.</li>\n</ul>\n<p><strong>Diagnosis:</strong></p>\n<ul>\n<li>Chest radiography and passage of a nasal gastric tube confirm the diagnosis.</li>\n<li>CDH can be diagnosed on&nbsp;<strong>prenatal ultrasonography (between 16 and 24 weeks of gestation)</strong></li>\n<li>High-speed fetal magnetic resonance imaging (MRI) can further define the lesion.</li>\n</ul>\n<p><strong>Treatment:</strong></p>\n<p>Variable period of time (24-72 hours) to allow for stabilization before surgical repair. Immediate respiratory support should be provided, including<strong> rapid endotracheal intubation</strong> and sedation.&nbsp;</p>\n<p>Bag and Mask Ventilation&nbsp;is&nbsp;<strong>contraindicated&nbsp;</strong>in newborns with congenital diaphragmatic hernia because it&nbsp;causes&nbsp;<strong>distension of the stomach</strong>&nbsp;which in turn may limit the expansion of the already&nbsp;<strong>hypoplastic lung</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a39fb585526240acaeb6749d390c97b9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9d01b2e105de478fabb683ccb45bc149x1280x1660.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/448fd8ec71d248589903394fe7a95637x720x664.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/97213a6b824346bebf418955ba37f97fx512x402.PNG"
    ]
  },
  {
    "text": "A mother with polyhydramnios delivered a baby at term gestation. The baby chokes on the milk at every attempt, and on examination, the abdomen is distended and vesicular breath sounds are heard in bilateral lung fields. An attempt to pass a nasogastric tube fails. An X-ray is ordered and appears as shown. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Foreign body in the trachea"
      },
      {
        "id": 2,
        "text": "Gastric volvulus"
      },
      {
        "id": 3,
        "text": "Tracheo-esophageal fistula"
      },
      {
        "id": 4,
        "text": "Congenital diaphragmatic hernia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given symptoms of choking and abdominal distention with a failure to pass a nasogastric tube and an X-ray showing NG tube in proximal esophagus and stomach distended with gas suggests the presence of a <strong>tracheoesophageal fistula (TEF).</strong></p>\n<p>A tracheoesophageal fistula is an abnormal fistula communication between the esophagus and trachea. Among the different types, <strong>Type C</strong> is the <strong>most common</strong> type. It consists of\u00a0<strong>proximal esophageal atresia and distal TEF.</strong>\u00a0With each breath, the air enters the distal esophagus and the stomach causing gastric distention which presents as abdominal distention.\u00a0</p>\n<p>Inability to pass a nasogastric (NG) tube is a crucial pointer in the diagnosis of esophageal atresia.\u00a0</p>\n<p>Tracheoesophageal fistula is associated with <strong>VACTERL</strong> (vertebral, anorectal, cardiac, tracheal, esophageal, renal, and limb) anomalies.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/80b67a1d90ac405783cebbdc8fe31725.jpg"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/95bd74f95fb84cd58124c38bb727e041x1280x1964.JPEG"
    ]
  },
  {
    "text": "A 14-year-old boy presents with recurrent episodes of spontaneous nasal bleeding. There is no history of trauma or fall. He gives a history of unilateral nasal obstruction and denasal speech. Contrast-enhanced CT scan of the head is taken, which is shown below. What is this sign known as?",
    "choices": [
      {
        "id": 1,
        "text": "Aquino sign"
      },
      {
        "id": 2,
        "text": "Antral sign"
      },
      {
        "id": 3,
        "text": "Teardrop sign"
      },
      {
        "id": 4,
        "text": "Hanging drop sign"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given CT scan showing the <strong>anterior bowing</strong> of the posterior wall of the maxillary sinus is called the <strong>antral sign</strong> or <strong>Holman-Miller sign</strong>.</p>\n<p>The given clinical picture along with a CT scan showing the <strong>Holman-Miller sign</strong>\u00a0is suggestive of <strong>nasopharyngeal angiofibroma\u00a0</strong>commonly arising from the <strong>sphenopalatine foramen</strong>.\u00a0</p>\n<p>From here, the tumor grows into the</p>\n<ul>\n<li>Nasal cavity</li>\n<li>Nasopharynx</li>\n<li>Pterygopalatine fossa</li>\n<li>Pterygomaxillary fossa</li>\n<li>Infratemporal fossa</li>\n</ul>\n<p>Nasopharyngeal angiofibroma is a <strong>benign</strong> but<strong> locally invasive</strong> tumor predominant in adolescent males in the age group of <strong>10-20 years</strong>. It arises from the posterior part of the nasal cavity that is close to the superior margin of the <strong>sphenopalatine foramen</strong>. These patients have a hamartomatous nidus of vascular tissue in the nasopharynx that forms angiofibroma when testosterone appears. Therefore, it is thought to be <strong>testosterone-dependent.</strong></p>\n<p>Angiofibroma can extend into the nasal cavity causing obstruction, epistaxis, paranasal sinuses, pterygomaxillary fossa, infratemporal fossa, cheek, orbits causing proptosis, frog-face deformity, and cranial cavity. The clinical features include:</p>\n<ul>\n<li>Profuse, recurrent, spontaneous <strong>epistaxis</strong>- <strong>most common</strong></li>\n<li>Progressive nasal obstruction and denasal speech- due to mass in the postnasal space</li>\n<li>Conductive hearing loss and otitis media with effusion- due to obstruction of the eustachian tube</li>\n<li>Sessile, lobulated, or smooth mass in the nasopharynx</li>\n<li>Other clinical features include the broadening of the nasal bridge, proptosis, cheek swelling, involvement of IInd, IIIrd, IVth, and VIth cranial nerves</li>\n</ul>\n<p>Diagnosis is based on the clinical picture. <strong>Contrast-enhanced CT</strong> scan of the head is the<strong> investigation of choice</strong> that reveals anterior bowing of the posterior wall of the maxillary sinus (<strong>antral sign/Holman-Miller sign</strong>) which is pathognomonic of angiofibroma as shown below.</p>\n<p><strong>MRI</strong> can also be done that reveals soft tissue extensions. <strong>Carotid angiography</strong> is also done which shows the extent of the tumor with its vascularity. The feeding vessels mostly come from the external carotid artery. In large tumors with intracranial extension, vessels come from the internal carotid system also.\u00a0Biopsy of the mass is <strong>avoided</strong> due to the risk of bleeding.</p>\n<p>Given below is a CT image showing the anterior bowing of the posterior wall of the maxillary sinus -\u00a0<strong>antral sign or</strong>\u00a0<strong>Holman-Miller sign.</strong></p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ee36a866ba04440c8dd9dff6f71b66db.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/60b3695f168e4db489b2f585fd52d74ex1280x1304.JPEG"
    ]
  },
  {
    "text": "A woman with a history of infertility is on treatment with HMG. She presented with the following finding in the USG. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Ovarian hyperstimulation syndrome"
      },
      {
        "id": 2,
        "text": "Theca lutein cyst"
      },
      {
        "id": 3,
        "text": "PCOD"
      },
      {
        "id": 4,
        "text": "None"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario and the USG findings are suggestive of <strong>ovarian hyperstimulation syndrome.</strong></p>\n<p>Ovarian hyperstimulation syndrome&nbsp;is characterized by <strong>mul&shy;tiple ovarian follicular cysts</strong> accompanied by <strong>increased capillary permeability.</strong> It most often is a complication of ovulation&shy; induction therapy for infertility, although it may rarely develop in an otherwise normal pregnancy. It has also been reported with a <strong>partial molar pregnancy.</strong> Its etiopatho&shy;genesis is thought to involve the<strong>&nbsp;stimulation of</strong> vascular endo&shy;thelial growth factor (<strong>VEGF</strong>) expression in granulosa-lutein cells<strong> by</strong>&nbsp;<strong>hCG</strong>.</p>\n<div class=\"page\" title=\"Page 1214\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Human menopausal gonadotropin (HMG)</strong>&nbsp;is a medication that is composed of FSH and LH. It is used to <strong>stimulate</strong> the <strong>release</strong>&nbsp;of <strong>ova</strong> in women who do not ovulate spontaneously. It can lead to&nbsp;ovarian hyperstimulation syndrome.</p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ae390ddbb96843df9fc820f414265208.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Xray of a 2 year old child is given, what is the possible diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pneumatosis Intestinalis"
      },
      {
        "id": 2,
        "text": "Pneumoperitoneum"
      },
      {
        "id": 3,
        "text": "Subcutaneous Emphysema"
      },
      {
        "id": 4,
        "text": "Duodenal Atresia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The X-ray shows \"<strong>f</strong><strong>ootball sign\"&nbsp;</strong>which is seen in the&nbsp;<strong>pneumoperitoneum.</strong></p>\n<p>Football sign-the abdominal cavity is outlined by gas from a perforated viscus, seen in massive pneumoperitoneum.</p>\n<p>Causes of pneumoperitoneum include:</p>\n<ul>\n<li>Bowel perforation\n<ol>\n<li>Peptic ulcer</li>\n<li>Ischemic bowel</li>\n<li>Necrotizing enterocolitis</li>\n</ol>\n</li>\n<li>Small bowel perforation\n<ol>\n<li>Trauma</li>\n<li>Penetrating injuries</li>\n</ol>\n</li>\n<li>During surgery/laparoscopy</li>\n</ul>\n<p>Radiological signs in pneumoperitoneum include:</p>\n<ul>\n<li>Bowel related signs\n<ul>\n<li>Double-wall sign&nbsp;(also known as&nbsp;<strong>Rigler's sign</strong>): Both the outer and inner walls of the bowel are visible.</li>\n<li><strong>Telltale triangle sign&nbsp;</strong>(also known as triangle sign): A radiolucent triangle of gas between three loops of bowel or between two loops of bowel and the abdominal wall.</li>\n</ul>\n</li>\n<li>Peritoneal ligament related signs\n<ul>\n<li>Football sign -the abdominal cavity is outlined by gas from a perforated viscus, seen in massive pneumoperitoneum.</li>\n<li><strong>Falciform ligament sign - </strong>Falciform or medial umbilical ligaments may be seen due to free gas on either side of the ligaments.&nbsp;</li>\n<li>Lateral umbilical ligament sign&nbsp;(also known as&nbsp;inverted \"V\" sign) - Free gas routines the lateral umbilical ligament.</li>\n<li>Urachus sign</li>\n</ul>\n</li>\n<li>Right upper quadrant signs\n<ul>\n<li>Morison's pouch sign - a triangular area of gas in the right upper quadrant, usually bound by the 11th rib in the right upper quadrant in the area of Morrison's pouch.</li>\n<li><strong>Cupola</strong>&nbsp;sign - Gas under the right and left hemidiaphragm joining in the midline. Seen on chest X-ray.</li>\n<li>Fissure for ligamentum teres sign</li>\n<li>Hepatic edge sign</li>\n<li>Lucent liver sign</li>\n<li>Periportal free gas sign</li>\n</ul>\n</li>\n</ul>\n<p><strong>Rigler's sign-</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3de5b80d00cb4c698eca0da2ed407bd9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/05ce4be2c0ee4f078e9336a5c25d6dc9x720x717.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a502a71ce00a484682806ac8867148cdx720x962.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c48b896560af4901a57bd2cbb7305283x313x420.JPEG"
    ]
  },
  {
    "text": "A 13-year-old boy presents to you with limitation of abduction and internal rotation of the left hip. The X-ray appearance of his left hip joint is shown in the below image. What is the diagnosis of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Slipped capital femoral epiphysis"
      },
      {
        "id": 2,
        "text": "Perthes disease"
      },
      {
        "id": 3,
        "text": "Developmental Dysplasia of hip"
      },
      {
        "id": 4,
        "text": "Ankylosing spondylitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario and<strong> trethowan's sign</strong>&nbsp;seen in the x-ray are suggestive of&nbsp;<strong>slipped capital femoral epiphysis</strong> (SCFE).</p>\n<p>The <strong>Klein line</strong> is a line along the superior aspect of the femoral neck which normally intersects the epiphysis. In SCFE, Klein's line does not intersect the epiphysis and passes superior to it. This is known as <strong>Trethowan's sign</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3e4d701d94e644158f4b4e535eeea6ac.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/36d68f0d17ec4d609106778933139f66x1024x700.jpeg",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/22636c459bc543449bc93ef7c30abf54x720x513.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/13d85a2c20a74fec8221e2dd17722672x1024x1024.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c0e68d30b02a4962b2ae47e88c96def2x419x659.PNG"
    ]
  },
  {
    "text": "A 56-year-old\u200b female patient presented with progressive dysphagia for solids, loss of weight, and loss of appetite. A barium swallow done is given below. Which of the following statements is false regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Dysphagia is the most common earliest presenting symptom"
      },
      {
        "id": 2,
        "text": "The squamous cell variant usually affects the upper two-thirds and the adenocarcinoma variant usually affects the lower third"
      },
      {
        "id": 3,
        "text": "Common aetiological factors are tobacco and alcohol"
      },
      {
        "id": 4,
        "text": "The incidence of adenocarcinoma is increasing"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given barium study shows irregular narrowing, mucosal destruction, and shouldered margins which is suggestive of&nbsp;<strong>carcinoma esophagus.&nbsp;</strong>Dysphagia is the most common presenting symptom but is a <strong>late feature</strong> in&nbsp;carcinoma esophagus.</p>\n<p>Esophageal carcinoma is&nbsp;<strong>more commonly</strong>&nbsp;seen in&nbsp;<strong>men</strong>.&nbsp;<strong>Tobacco</strong>&nbsp;use and&nbsp;<strong>alcohol</strong>&nbsp;are&nbsp;<strong>strong risk factors</strong>.&nbsp;<strong>Adenocarcinoma</strong>&nbsp;and&nbsp;<strong>squamous cell carcinoma</strong>&nbsp;of the esophagus are the two&nbsp;<strong>most common</strong>&nbsp;types.&nbsp;The squamous cell variant usually affects the upper two-thirds and the adenocarcinoma variant usually affects the lower third.&nbsp;The incidence of adenocarcinoma is increasing.</p>\n<p><strong>Clinical features&nbsp;</strong>include:</p>\n<ul>\n<li>Dysphagia (most common)</li>\n<li>Regurgitation</li>\n<li>Vomiting</li>\n<li>Odynophagia</li>\n<li>Weight loss</li>\n</ul>\n<p>In the advanced stage, there can be hoarseness of voice due to recurrent laryngeal nerve palsy, horner&rsquo;s syndrome, chronic spinal pain, and diaphragmatic paralysis.</p>\n<p><strong>Flexible endoscopy with biopsy </strong>is preferred for<strong> confirmation </strong>of diagnosis<strong>.&nbsp;</strong>Other investigations include&nbsp;<strong>barium swallow</strong>,&nbsp;which shows a&nbsp;<strong>rat-tail appearance&nbsp;</strong>due to irregular narrowing or ulceration. Contrast-enhanced CT and PET can be used to assess distant metastasis.&nbsp;<strong>Endoscopic</strong>&nbsp;<strong>ultrasonography</strong>&nbsp;(<strong>EUS</strong>) is the investigation of choice to&nbsp;<strong>assess tumor invasion and lymph node metastasis.<br /></strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1123a97010154ee2844fbf84e00133e8.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A newborn is seen to have an abnormal lump in the lower back. Identify the condition from the MRI given below.",
    "choices": [
      {
        "id": 1,
        "text": "Meningocele"
      },
      {
        "id": 2,
        "text": "Myelomeningocele"
      },
      {
        "id": 3,
        "text": "Spina bifida occulta"
      },
      {
        "id": 4,
        "text": "Bone cyst"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The MRI given represents <strong>meningocele</strong>.&nbsp;</p>\n<p><strong>Meningocele&nbsp;</strong>involves the&nbsp;<strong>midline protrusion&nbsp;</strong>of the&nbsp;<strong>meninges.</strong>&nbsp;A fluctuant midline mass, that may transilluminate is present in the lower back along the vertebral column.&nbsp;<strong>Meningomyelocele&nbsp;</strong>involves the<strong>&nbsp;protrusion&nbsp;</strong>of the&nbsp;<strong>spinal cord with&nbsp;</strong>the<strong>&nbsp;meningeal covering.&nbsp;</strong>Neurological dysfunction is more common in these open defects.</p>\n<p><strong>Spina bifida occulta</strong>&nbsp;refers to fusion defects of the&nbsp;<strong>posterior part</strong>&nbsp;of the&nbsp;<strong>vertebral body</strong>. There is no associated protrusion of the spinal cord or<strong>&nbsp;</strong>meninges. These neonates are usually&nbsp;<strong>asymptomatic,</strong>&nbsp;without any neurological signs. They present only with a&nbsp;<strong>tuft of hair</strong>&nbsp;over the&nbsp;<strong>lower back</strong>.&nbsp;</p>\n<p>The image below shows (from left to right) spina bifida occulta, meningocele, and meningomyelocele-</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/acca0b5258434ce59383fe5eb8ca5574.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6d37b693df96409db258f055abd6a9aax500x254.JPEG"
    ]
  },
  {
    "text": "X-ray of a patient who had a history of RTA appears as below. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Right pneumothorax with right lung collapse and right tracheal shift"
      },
      {
        "id": 2,
        "text": "Right pneumothorax with right lung collapse and left tracheal shift"
      },
      {
        "id": 3,
        "text": "Right pneumothorax with left lung collapse and left tracheal shift"
      },
      {
        "id": 4,
        "text": "Right pneumothorax with left lung collapse  and right tracheal shift"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows a\u00a0<strong>right pneumothorax</strong>\u00a0with <strong>collapsed right lung</strong>\u00a0and <strong>tracheal deviation to the left</strong>.</p>\n<p><strong>Pneumothorax</strong>\u00a0refers to the presence of<strong>\u00a0gas\u00a0</strong>(air) in the<strong>\u00a0pleural space</strong>. When there is a progressive accumulation of intrapleural gas in the thoracic cavity (caused by a valve effect during inspiration and expiration) it is called a\u00a0<strong>tension pneumothorax.</strong>\u00a0It can result in the compression of mediastinal structures and compromise cardiopulmonary function. It is life-threatening and requires emergency intervention.</p>\n<p>It is\u00a0characterized by:</p>\n<ul>\n<li>Chest pain.</li>\n<li><strong>Tachypnoea</strong>, and\u00a0acute dyspnea.</li>\n<li>Sudden onset\u00a0<strong>hemodynamic compromise</strong>\u00a0(tachycardia,\u00a0hypotension, low O<sub>2</sub>\u00a0saturation,\u00a0loss of consciousness).</li>\n<li><strong>Neck vein distention.</strong></li>\n<li><strong>Tracheal deviation</strong>\u00a0<strong>away </strong>from the <strong>side </strong>of the<strong> injury.</strong></li>\n<li><strong>Decreased chest movements\u00a0</strong>on the affected side.</li>\n<li><strong>Hyper-resonance</strong>\u00a0on percussion\u00a0on the affected side.</li>\n<li><strong>Absence</strong>\u00a0or\u00a0<strong>decreased</strong>\u00a0<strong>breath sounds\u00a0</strong>on the affected side.</li>\n</ul>\n<p>Chest radiograph in spontaneous pneumothorax demonstrates:\u00a0\u00a0</p>\n<ul>\n<li><strong>Thin, sharp white line</strong>, demarcating the visceral pleural edge.</li>\n<li><strong>Absence of lung markings</strong>\u00a0seen peripheral to this line.</li>\n<li><strong>Peripheral space radiolucent</strong>\u00a0compared to the adjacent lung.\u00a0</li>\n<li><strong>Lung\u00a0collapse </strong>on the<strong> same side</strong> of the injury.\u00a0<strong>Subcutaneous emphysema</strong>\u00a0and\u00a0<strong>pneumomediastinum</strong> may be seen.</li>\n<li><strong>Deep sulcus sign</strong>\u00a0(on supine chest radiograph).</li>\n</ul>\n<p>Deep sulcus sign: On a\u00a0<strong>supine film</strong>\u00a0(common in the ICU), air collects anteriorly and basally, within the<strong>\u00a0nondependent portions</strong>\u00a0of the pleural space, as opposed to the apex when the patient is upright.\u00a0</p>\n<p>The costophrenic angle is abnormally deepened when the pleural air collects laterally, producing the<strong>\u00a0deep sulcus sign</strong>. It may be the\u00a0<strong>only indication</strong>\u00a0of a\u00a0<strong>pneumothorax</strong>\u00a0in such patients.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6f7fc05975694dd184a00ba5d02c3d52.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Match the following intracranial bleed:",
    "choices": [
      {
        "id": 1,
        "text": "A-i   B-ii    C-iii   D- iv"
      },
      {
        "id": 2,
        "text": "A -ii   B-iv   C-i    D-iii"
      },
      {
        "id": 3,
        "text": "A-iv   B-iii    C -ii    D-i"
      },
      {
        "id": 4,
        "text": "A -iv   B-ii   C-iii    D-i"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Epidural hematoma:</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d659a49557e947f1962b9413f401081e.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1f1690155c0e4d0c8dea154ff9b88729x181x181.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2c92c6114a0643f0ab0741d215bffdb6x172x121.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0cf55af2acdd4b3ca9c3eff50412a2b5x155x159.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6dd2003fbbde453b904c3c99eba4bd16x193x159.JPEG"
    ]
  },
  {
    "text": "A patient presents with elbow deformity and forearm shortening after a fall. An X-ray was done and given below.  What is the possible diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Elbow dislocation"
      },
      {
        "id": 2,
        "text": "Olecranon fracture"
      },
      {
        "id": 3,
        "text": "Pulled elbow"
      },
      {
        "id": 4,
        "text": "Tennis elbow"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical history and X-ray are suggestive of\u00a0<strong>elbow dislocation.\u00a0</strong>X-ray shows <strong>posterior dislocation</strong> of the elbow joint.\u00a0</p>\n<p><strong>Elbow dislocation</strong> is the <strong>most common dislocation</strong> in the <strong>pediatric</strong> age group and the<strong> second most common </strong>dislocation after the shoulder in <strong>adults.</strong></p>\n<p><strong>Posterior dislocation</strong> is the <strong>commonest</strong> type of elbow dislocation. It frequently occurs due to a fall on the outstretched hands with the elbow slightly flexed. Other dislocations are postero-medial, postero-lateral, and divergent.</p>\n<p><strong>Anterior dislocation</strong> occurs when the elbow is flexed and there is a direct blow on the posterior aspect of the elbow joint.</p>\n<p><strong>Clinical features:</strong></p>\n<ul>\n<li>The forearm appears shortened.</li>\n<li>Crepitus is absent.</li>\n<li>The three-point bony relationship is disrupted.</li>\n<li>Olecranon is above the intercondylar line</li>\n</ul>\n<p>Elbow dislocation is an <strong>emergency</strong> and has to be reduced immediately. Closed reduction under general anaesthesia(GA) is attempted first. An above elbow POP slab is applied with 90\u00ba elbow flexion and mid-pronation for a period of 3 weeks after closed reduction under GA.</p>\n<p>Stimson\u2019s 2 step principles for closed reduction</p>\n<ol>\n<li>Step 1 - traction along the long axis of the humerus to counteract the contraction of biceps, triceps and brachialis</li>\n<li>Step 2 - traction along the long axis of the forearm to bring radius and ulna back into position<br />2 techniques in closed reduction</li>\n</ol>\n<p><strong>Prone technique</strong> - Grab the wrist of the injured arm. Apply traction and slight supination to the forearm. Using the other hand, apply pressure to the posterior aspect of the olecranon while the arm is pronated.</p>\n<p><strong>Supine technique</strong> - a helper stabilizes the humerus against the stretcher with both hands. Grasp the wrist, and apply slow, steady, inline traction, keeping the elbow slightly flexed and the wrist supinated</p>\n<p><strong>Complications:</strong></p>\n<ul>\n<li><strong>Early</strong> complications include neurovascular injury. Vascular injuries are rare and involve the brachial artery in open fractures associated with elbow dislocation.</li>\n<li><strong>Late</strong> complications include myositis ossificans, recurrent dislocations, proximal radioulnar translocation, and ectopic calcifications</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cc71bbfb35634644ae630a310f6165d7.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 22-year-old male on evaluation for intermittent dysphagia shows the following characteristic appearance on barium swallow. The probable diagnosis is______.",
    "choices": [
      {
        "id": 1,
        "text": "Achalasia cardia"
      },
      {
        "id": 2,
        "text": "Schatzki\u2019s ring"
      },
      {
        "id": 3,
        "text": "Nutcracker esophagus"
      },
      {
        "id": 4,
        "text": "Carcinoma esophagus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The barium swallow shows a <strong>thin circumferential ring in the distal esophagus, </strong>which is suggestive of<strong> Schatzki&rsquo;s ring.</strong></p>\n<p><strong>Schatzki&rsquo;s ring:</strong></p>\n<ul>\n<li>Schatzki&rsquo;s ring is a circular ring in the&nbsp;<strong>distal esophagus&nbsp;</strong>(<strong>squamocolumnar junction) </strong>associated with gastroesophageal reflux disorder <strong>(GERD).</strong></li>\n<li><strong>C</strong><strong>oncentric, nonmalignant, fibrous thickening and narrowing of the gastroesophageal junction (GEJ), with squamous epithelium above and columnar cells below.</strong></li>\n<li>The core of the ring consists of variable amounts of fibrous tissue and cellular infiltrate.</li>\n<li><strong>The cause is unknown</strong>, and&nbsp;correlations to reflux disease and hiatal hernia are still debatable.&nbsp;</li>\n<li>It may cause <strong>dysphagia</strong>.</li>\n<li>Treatment is <strong>endoscopic dilation with antireflux therapy.</strong></li>\n</ul>\n<div class=\"page\" title=\"Page 1051\">&nbsp;</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ead984baaa80475ab30a6e0c191c5a98.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Match the following radiograph images with their views.",
    "choices": [
      {
        "id": 1,
        "text": "1-a, 2-b, 3-d, 4-c"
      },
      {
        "id": 2,
        "text": "1-c, 2-b, 3-d, 4-a"
      },
      {
        "id": 3,
        "text": "1-c, 2-d, 3-b, 4-a"
      },
      {
        "id": 4,
        "text": "1-c, 2-a, 3-d, 4-b"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correctly matched pair is\u00a0<strong>1-c, 2-b, 3-d, 4-a.</strong></p>\n<table style=\"border-collapse: collapse; width: 34.2359%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 3.30579%;\">1</td>\n<td style=\"width: 96.6942%;\">c. Water's view</td>\n</tr>\n<tr>\n<td style=\"width: 3.30579%;\">2</td>\n<td style=\"width: 96.6942%;\">b. Caldwell view</td>\n</tr>\n<tr>\n<td style=\"width: 3.30579%;\">3</td>\n<td style=\"width: 96.6942%;\">d. Towne's view</td>\n</tr>\n<tr>\n<td style=\"width: 3.30579%;\">4</td>\n<td style=\"width: 96.6942%;\">a. Submentovertical view</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Waters' view </strong>(also known as the <strong>Occipitomental</strong> view or <strong>nose-chin </strong>position) is a radiographic view, where an X-ray beam is angled at <strong>37\u00b0 </strong>to the <strong>orbitomeatal</strong> <strong>line</strong>. The rays are passed from behind the head and are perpendicular to the radiographic plate.</p>\n<ul>\n<li>It is commonly used to get a better view of the <strong>maxillary\u00a0</strong><strong>sinuses</strong>.</li>\n</ul>\n<p>Structures observed:</p>\n<ul>\n<li><strong>Maxillary sinuses</strong></li>\n<li>Frontal sinuses</li>\n<li>Sphenoid sinus (through open mouth)</li>\n<li>Zygoma</li>\n<li>Zygomatic arch</li>\n<li>Nasal bone</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/aa723fe009084145bccbb7022da1d3e7.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f0a0fe3247ff4875a188468a3c8240ffx600x729.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/999ee94dc56d4e8d8ae8d02d28abcd14x627x599.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8e425cf42dff444ca7227b0e65a0c499x1280x747.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/96fa8aaab59a4e4299655c6a3d8b21c1x259x269.JPEG"
    ]
  },
  {
    "text": "Identify the heart chamber marked in the given CT image.",
    "choices": [
      {
        "id": 1,
        "text": "Right atrium"
      },
      {
        "id": 2,
        "text": "Right ventricle"
      },
      {
        "id": 3,
        "text": "Left ventricle"
      },
      {
        "id": 4,
        "text": "Left atrium"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The structure marked in the above CT image is the\u00a0<strong>left atrium.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f438a4407974431e8a8d3c0bc1483403.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8788fd9822bb4f92895409f1586db11ax1280x1038.JPEG"
    ]
  },
  {
    "text": "A 40-year-old male patient presents with persistent fever and productive cough with purulent foul-smelling sputum for 6 weeks associated with night sweats and anemia. The following is his CXR. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "CA Lung"
      },
      {
        "id": 2,
        "text": "Tuberculosis"
      },
      {
        "id": 3,
        "text": "Emphysematous bullae"
      },
      {
        "id": 4,
        "text": "Lung abscess"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The clinical scenario described along with the&nbsp;<strong>chest X-ray image showing air&ndash;fluid level</strong> is suggestive of a<strong>&nbsp;lung abscess</strong>&nbsp;.</p>\n<p>The patients usually present with complaints of fever, cough with sputum production and chest pain. Patients with putrid lung abscesses may report <strong>foul-smelling</strong> sputum. Patients with chronic lung abscess usually have a history of <strong>night sweats, fatigue, and anemia.</strong></p>\n<p><strong>On physical examination</strong>, poor dentition/gingival disease, amphoric and/or cavernous breath sounds on lung auscultation, digital clubbing and the absence of a gag reflex are commonly seen.</p>\n<p><strong>CXR features of lung abscess:</strong></p>\n<ul>\n<li>A lung cavity with an air-fluid level</li>\n<li>The cavity wall is thick and irregular, and a surrounding pulmonary-infiltrate is often present.</li>\n</ul>\n<p>The two x-ray images given below show thick-walled cavities with air-fluid levels on lateral and PA views respectively.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/da062231a8a4456c99938de069af30ae.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f43b3bae31474f25a8d16af8e5e76e2ex624x1150.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/032da72a34064443be803fb65cb6905ax1280x960.PNG"
    ]
  },
  {
    "text": "A mother brings her 9-year-old child with complaints of polyuria. On examination, he has growth failure and bitemporal hemianopia. Laboratory evaluation reveals low urine osmolality and high plasma osmolality. Findings on the MRI brain are given below. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Germinoma of the pituitary stalk"
      },
      {
        "id": 2,
        "text": "Craniopharyngioma"
      },
      {
        "id": 3,
        "text": "Pituitary microadenoma"
      },
      {
        "id": 4,
        "text": "Langerhan's cell histiocytosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario along with the MRI showing intracranial mass with foci of <strong>calcification</strong> at <strong>sella turcica</strong> and the laboratory findings suggestive of <strong>diabetes</strong> <strong>insipidus</strong> point to a diagnosis of&nbsp;<strong>craniopharyngioma</strong>.</p>\n<p>Craniopharyngiomas are tumors that arise from the remnants of Rathke&rsquo;s pouch.&nbsp;It is an intracranial space-occupying lesion. It has <strong>bimodal</strong> age of presentation. Children usually present with frequent headaches, <strong>short stature,</strong> <strong>bitemporal hemianopsia </strong>(due to optic chiasm compression), and <strong>polyuria.</strong></p>\n<p>These tumors are usually large and heterogeneous, displaying&nbsp;both<strong> solid</strong> and <strong>cystic components</strong>, and occur within the&nbsp;<strong>suprasellar </strong>area<strong>.&nbsp;</strong>The<strong>&nbsp;</strong>cysts contain a cholesterol-rich, thick brownish-yellow fluid and are compared to <strong>machine oil</strong>. They also show radiologically demonstrable <strong>calcification.</strong></p>\n<p>Diabetes insipidus in these patients can be diagnosed with features such as polyuria, low urine osmolality, and high plasma osmolality. Treatment of central diabetes insipidus caused by craniopharyngioma includes supplementation with vasopressin analogs such as&nbsp;<strong>desmopressin</strong> (DDAVP) and resection of the tumor.</p>\n<p>Other options:</p>\n<p>Option B: <strong>Germinomas</strong> of the pituitary stalk also cause central diabetes insipidus. However, they are often missed in routine neuroimaging.&nbsp;</p>\n<p>Option C: <strong>Pituitary microadenomas</strong>&nbsp;usually present incidentally or with endocrine effects. They are<strong> &lt;10mm in size</strong> and the tumor is confined to the sella. Visual field deficits are usually caused by <strong>pituitary macroadenomas</strong>.&nbsp;</p>\n<p>Option D: <strong>Langerhans cell histiocytosis</strong> is a rare cause of central diabetes insipidus. Symptoms include dermatological manifestations such as red, scaly papules, pain, and swelling in the limbs, characteristic bony lesions, and disseminated lymph node enlargement.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a148ef25c158478d8d71ccce312cca82.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The following appearance in IVP is caused by:",
    "choices": [
      {
        "id": 1,
        "text": "Horse shoe kidney"
      },
      {
        "id": 2,
        "text": "Ureterocoele"
      },
      {
        "id": 3,
        "text": "Bladder tumour"
      },
      {
        "id": 4,
        "text": "Posterior urethral valve"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given IVP depicts the&nbsp;<strong>cobra head</strong>&nbsp;or<strong>&nbsp;adder head </strong>deformity or <strong>spring onion</strong> sign seen in <strong>bilateral</strong> <strong>ureterocele</strong>.&nbsp;It refers to dilatation of the distal ureter, surrounded by a thin lucent line seen in adult-type, uncomplicated&nbsp;ureterocoele.&nbsp;</p>\n<p>Ureterocele refers to the&nbsp;<strong>congenital dilatation</strong> of the distal-most portion of the&nbsp;ureter. The dilated portion of the ureter may herniate into the bladder secondary to an <strong>abnormal</strong> <strong>VUJ&nbsp;</strong>(vesicoureteric junction).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9f2fbc16ea2c416a801329e9f8988144.JPEG"
    ],
    "explanation_images": []
  }
];
        let quizName = 'Mini Test- 24 (Radiographs)';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>