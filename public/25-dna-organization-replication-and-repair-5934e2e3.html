<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>25 Dna Organization, Replication And Repair - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / qBank / Biochemistry
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">28</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following is true about DNA?",
    "choices": [
      {
        "id": 1,
        "text": "Each nucleotide pair includes two purines."
      },
      {
        "id": 2,
        "text": "The information from DNA is copied in the form of tRNA."
      },
      {
        "id": 3,
        "text": "The nucleotide of one strand binds with the nucleotide of opposite strand."
      },
      {
        "id": 4,
        "text": "Cytosine and uracil differ by one ribose sugar."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The true statement about DNA is that the nucleotide of one strand binds with the nucleotide of the opposite strand.\u00a0</p>\n<p><strong>DNA </strong>(deoxyribonucleic acid) is a polymeric molcule containing genetic information. It is a <strong>double-stranded</strong> molecule consisting of nucleotide pairs. Each nucleotide pair includes one<strong> purine</strong> and one <strong>pyrimidine. </strong>The nucleotide of one strand binds with the nucleotide of the opposite strand by <strong>hydrogen bonds</strong>.\u00a0</p>\n<p>Other options:</p>\n<p>Option B: The information from DNA is copied in the form of <strong>mRNA.<br /></strong>Option D: Cytosine and uracil differ by<strong> one amino group.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the marked bond:",
    "choices": [
      {
        "id": 1,
        "text": "Ionic bond"
      },
      {
        "id": 2,
        "text": "Covalent bond"
      },
      {
        "id": 3,
        "text": "Hydrogen bond"
      },
      {
        "id": 4,
        "text": "Phosphodiester Bond"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The marked bond represents a <strong>hydrogen bond</strong> between <strong>thymine</strong> and <strong>adenine</strong>.</p>\n<p>The <strong>complementary nitrogenous bases</strong> of the 2 strands of the DNA double helix are linked by <strong>hydrogen bonds</strong>. Adenine and thymine are linked by <strong>two</strong> hydrogen bonds\u00a0<strong>(A=T) </strong>whereas<strong>\u00a0three</strong> hydrogen bonds are present between cytidine and guanine <strong>(C</strong><strong>\u2261G). </strong><strong>Van der Waals </strong>and <strong>hydrophobic interactions </strong>are present between the stacked <strong>adjacent base pairs.</strong></p>\n<p>A <strong>\u03b2-N-glycosidic\u00a0</strong>bond is present between the <strong>nitrogenous base</strong> and<strong> deoxyribose sugar</strong>. C1 of deoxyribose/ribose sugar is joined covalently to <strong>N1 of pyrimidines</strong> and <strong>N9 of purines</strong> by \u03b2-N-glycosidic bond. An <strong>ester bond</strong> is present between the sugar and phosphate group of the same nucleotide. An <strong>acid anhydride</strong> bond is present between two phosphate groups.</p>\n<p>A polymer of <strong>nucleotides</strong> is joined by\u00a0<strong>3\u2019-5\u2019 phosphodiester bond.</strong> The bond is present between the sugar of one nucleotide\u00a0and the phosphate\u00a0group of another.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dc66b66b3b064d81bf38e8d71be06f83.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/411eab63632c4eeb92f023b9736d29c6x800x400.JPEG"
    ]
  },
  {
    "text": "What is the percentage of cytosine in DNA if the percentage of thymine residues is 28%?",
    "choices": [
      {
        "id": 1,
        "text": "22"
      },
      {
        "id": 2,
        "text": "28"
      },
      {
        "id": 3,
        "text": "36"
      },
      {
        "id": 4,
        "text": "44"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The percentage of <strong>cytosine</strong> in DNA will be\u00a0<strong>22%.</strong></p>\n<p>According to <strong>Chargaff's rule</strong> in cellular DNA, regardless of species, <br />A = T and <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">G = C<br /></span><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Purines = Pyrimidines i.e. <strong>A+G = C+T.</strong></span></p>\n<p>In the question it is given that thymine is 28%, therefore adenine is also 28%. So, adenine + thymine = 56% and guanine + cytosine = 44%. Since guanine = cytosine, the percentage of cytosine = 44/2 = 22%.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true about the types of DNA?",
    "choices": [
      {
        "id": 1,
        "text": "Z-DNA is a right handed double helix."
      },
      {
        "id": 2,
        "text": "B-DNA is found in conditions of high salt concentration and low humidity."
      },
      {
        "id": 3,
        "text": "A-DNA is found in high humidity and low salt concentration."
      },
      {
        "id": 4,
        "text": "B-DNA is the physiologically most common form"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The correct statement is that <strong>B-DNA</strong> is the <strong>physiologically most common</strong> form.</p>\n<p>There are 6 types of DNA- A, B, C, D, E and Z. All are right-handed <strong>except Z-DNA.</strong> Z-DNA is a <strong>left-handed </strong>double helix in 5' end of chromosome and has phosphodiester backbone in a zigzag form. <strong>A-DNA</strong> is found in conditions with <strong>low humidity </strong>and<strong> high salt concentration. </strong><strong>B-DNA </strong>is the <strong>physiologically most common form. </strong>It is found in conditions with<strong> high humidity </strong>and<strong> low salt concentration.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a feature of denatured DNA?",
    "choices": [
      {
        "id": 1,
        "text": "Breaking of phosphodiester bond"
      },
      {
        "id": 2,
        "text": "Alteration of primary structure"
      },
      {
        "id": 3,
        "text": "Increase in viscosity"
      },
      {
        "id": 4,
        "text": "Hyperchromicity at 260 nm"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong> Hyperchromicity</strong> at<strong> 260nm\u00a0</strong>is a feature of denatured DNA.</p>\n<p><strong>Denaturation </strong>or<strong> melting </strong>of<strong> DNA</strong> is a process that separates the two strands into component strands. During denaturation, the <strong>h</strong><strong>ydrogen bonds </strong>are broken. The phosphodiester\u00a0bond is <strong>not broken. </strong>DNA's <strong>secondary</strong> and <strong>teriary structures</strong> are also broken, butthe primary structure is not altered. As DNA gets denatured,<strong> </strong>its <strong>v</strong><strong>iscosity decreases. </strong>Denatured DNA also shows<strong> h</strong><strong>yperchromicity </strong>at <strong>260nm, </strong>which is the increase in absorbance of UV light showed by nitrogenous bases.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a histone found in nucleosome?",
    "choices": [
      {
        "id": 1,
        "text": "H1"
      },
      {
        "id": 2,
        "text": "H2A"
      },
      {
        "id": 3,
        "text": "H2B"
      },
      {
        "id": 4,
        "text": "H3"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>H1</strong> is <strong>not </strong>a histone found in <strong>nucleosomes</strong>.</p>\n<p><strong>Chromatin</strong> is formed by nucleosomes, which are composed of <strong>DNA </strong>wound around an <strong>octameric complex</strong> of histone molecules. They contain four major types of <strong>histones</strong>: H2A, H2B, H3, and H4. Histones are a small family of closely related basic protein composed of <strong>arginine</strong> and<strong> lysine.\u00a0</strong>H3 and H4 form a <strong>tetramer</strong> while H2A and H2B form<strong> dimers; </strong>these histone oligomers associate to form the<strong> histone octamer.\u00a0</strong>These four core histones are subject to at least six types of covalent modification or <strong>post-translational modifications\u00a0</strong>- acetylation, methylation, phosphorylation, ADP-ribosylation, monoubiquitylation and sumoylation.\u00a0</p>\n<p><strong>H1 histone</strong>\u00a0is seen in the<strong> linker region</strong> between nucleosomes<strong> </strong>and is bound<strong> loosely </strong>to the <strong>nucleosome.\u00a0</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cb7881426444458fba2052186dcadc28x440x460.PNG"
    ]
  },
  {
    "text": "What is the role of the (H3\u2013H4)2 tetramer in the nucleosome?",
    "choices": [
      {
        "id": 1,
        "text": "Central role in the formation of the nucleosome"
      },
      {
        "id": 2,
        "text": "Stabilizes the primary particle"
      },
      {
        "id": 3,
        "text": "Firmly binds two additional half-turns of DNA"
      },
      {
        "id": 4,
        "text": "Stabilize the 30-nm chromatin fiber"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>(H3\u2013H4)<sub>2</sub> tetramer </strong>has a central role in the <strong>formation</strong> of the <strong>nucleosome</strong>.</p>\n<table style=\"width: 59.2559%; height: 303.988px;\">\n<tbody>\n<tr style=\"height: 27.998px;\">\n<td style=\"width: 21.5054%; height: 27.998px;\" width=\"140\">Type</td>\n<td style=\"width: 73.2719%; height: 27.998px;\" width=\"477\">Function</td>\n</tr>\n<tr style=\"height: 43.998px;\">\n<td style=\"width: 21.5054%; height: 43.998px;\" width=\"140\">\n<p>H1 histones</p>\n</td>\n<td style=\"width: 73.2719%; height: 43.998px;\" width=\"477\">\n<p>Stabilize the 30-nm chromatin fiber</p>\n</td>\n</tr>\n<tr style=\"height: 95.9961px;\">\n<td style=\"width: 21.5054%; height: 95.9961px;\" width=\"140\">\n<p>H2 histones</p>\n</td>\n<td style=\"width: 73.2719%; height: 95.9961px;\" width=\"477\">\n<p>H2A\u2013H2B dimers stabilize the primary particle and firmly bind two additional half-turns of DNA</p>\n</td>\n</tr>\n<tr style=\"height: 67.998px;\">\n<td style=\"width: 21.5054%; height: 67.998px;\" width=\"140\">\n<p>H3 histones</p>\n</td>\n<td style=\"width: 73.2719%; height: 135.996px;\" rowspan=\"2\" width=\"477\">\n<p>(H3\u2013H4)<sub>2</sub> tetramer has a central role in the formation of the nucleosome. It confers nucleosome-like properties on DNA.</p>\n</td>\n</tr>\n<tr style=\"height: 67.998px;\">\n<td style=\"width: 21.5054%; height: 67.998px;\" width=\"140\">\n<p>H4 histones</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following statements is incorrect?",
    "choices": [
      {
        "id": 1,
        "text": "Acetylation of H3 and H4 is associated with the activation of gene transcription"
      },
      {
        "id": 2,
        "text": "Acetylation of core histones is associated with chromosomal assembly during DNA replication"
      },
      {
        "id": 3,
        "text": "ADP-ribosylation of histones is associated with DNA repair"
      },
      {
        "id": 4,
        "text": "De-phosphorylation of histone H1 is associated with chromosome condensation during replication"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Roles of modified histones:</p>\n<ul>\n<li><strong>Phosphorylation </strong>of <strong>histone H1</strong> is associated with the <strong>condensation </strong>of <strong>chromosomes</strong> during the replication cycle.</li>\n<li><strong>Acetylation</strong> of H3 and H4 is associated with the <strong>activation</strong>\u00a0or inactivation of<strong> gene transcription</strong>.</li>\n<li><strong>Acetylation </strong>of core histones is associated with <strong>chromosomal assembly </strong>during <strong>DNA replication</strong>.</li>\n<li><strong>Methylation</strong> of histones is correlated with activation and repression of gene transcription</li>\n<li><strong>ADP-ribosylation</strong> of histones is associated with<strong> DNA repair</strong>.</li>\n<li>Monoubiquitylation is associated with gene activation, repression, and heterochromatic gene silencing.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2a8d6f19172f4b2daf13bf1821f29f7dx993x932.JPEG"
    ]
  },
  {
    "text": "Which of the following statements is true regarding heterochromatin?",
    "choices": [
      {
        "id": 1,
        "text": "It is transcriptionally active"
      },
      {
        "id": 2,
        "text": "It is less densely packed"
      },
      {
        "id": 3,
        "text": "It stains densely"
      },
      {
        "id": 4,
        "text": "It is replicated earlier than euchromatin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The true statement is that<strong> heterochromatin</strong> <strong>stains densely</strong>.</p>\n<p>Differences between heterochromatin and euchromatin:</p>\n<table style=\"width: 422px; height: 293px;\">\n<tbody>\n<tr>\n<td style=\"width: 185.645px;\"><strong>Heterochromatin</strong></td>\n<td style=\"width: 200.645px;\"><strong>Euchromatin</strong></td>\n</tr>\n<tr>\n<td style=\"width: 185.645px;\"><strong>Transcriptionally inactive</strong></td>\n<td style=\"width: 200.645px;\">Transcriptionally active</td>\n</tr>\n<tr>\n<td style=\"width: 185.645px;\"><strong>Densely packed</strong></td>\n<td style=\"width: 200.645px;\">Less densely packed</td>\n</tr>\n<tr>\n<td style=\"width: 185.645px;\">Chromatin stains densely</td>\n<td style=\"width: 200.645px;\">Chromatin stains less densely</td>\n</tr>\n<tr>\n<td style=\"width: 185.645px;\">The chromatin in the region is high in meC content (methylation of deoxycytidine residues decreases gene transcription)\u00a0</td>\n<td style=\"width: 200.645px;\">Generally <strong>replicated earlier</strong> than heterochromatin</td>\n</tr>\n<tr>\n<td style=\"width: 185.645px;\">Histone deacetylation increases heterochromatin</td>\n<td style=\"width: 200.645px;\">Histone acetylation increases euchromatin</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true about DNA organization in chromosomes?",
    "choices": [
      {
        "id": 1,
        "text": "Centromere is an adenine-thymine (A\u2013T)-rich region containing repeated DNA sequences"
      },
      {
        "id": 2,
        "text": "Telomeres consist of short TTAGGG-rich repeats"
      },
      {
        "id": 3,
        "text": "Each sister chromatid contains one dsDNA molecule"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>All</strong> of the given statements are <strong>correct.</strong></p>\n<p><strong>Chomosomes </strong>can be visualised during <strong>metaphase</strong> of mitosis. At this point, they are duplicated with<strong> two-fold symmetry.</strong> The duplicated, identical <strong>sister chromatids</strong> are connected at the <strong>centromere</strong>. Each sister chromatid consists of a <strong>single dsDNA moleule</strong>.\u00a0The centromere is an <strong>adenine-thymine </strong>(A\u2013T) <strong>- rich region </strong>containing<strong> repeated DNA sequence. </strong>The ends of each chromosome contain structures called <strong>telomeres,\u00a0</strong>which have a variable number of<strong> repeats </strong>of the sequence<strong> 5'-TTAGGG-3'. Telomere shortening </strong>is associated with<strong> aging </strong>and<strong> malignant transformation.\u00a0</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3a3c056691704b2d9f9dd57d7879a2afx1280x1601.JPEG"
    ]
  },
  {
    "text": "What percentage of cellular DNA is in mitochondria?",
    "choices": [
      {
        "id": 1,
        "text": "1%"
      },
      {
        "id": 2,
        "text": "10%"
      },
      {
        "id": 3,
        "text": "0.1%"
      },
      {
        "id": 4,
        "text": "20%"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>1%</strong> of cellular DNA is in<strong> mitochondria.\u00a0</strong></p>\n<p><strong>Human mitochondria</strong> contains 2 to 10 copies of a small <strong>circular</strong> ~16 kbp (kilo base pair) dsDNA molecule that makes up approximately<strong> 1%</strong> of <strong>total cellular DNA. </strong>Out of 37 genes in human mitochondrial DNA (mtDNA), 22 genes codes for transfer RNAs, 2 for ribosomal RNAs, and 13 for proteins that play key roles in the respiratory chain. A feature unique to human mitochondrial mtDNA is <strong>maternal non-mendelian inheritance</strong>\u00a0because all mitochondria are contributed by the ovum during zygote formation. Thus, mothers transmit mtDNA to all their offspring.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/19f2ecb756d54bf8a0548c1880e4540cx1280x1035.PNG"
    ]
  },
  {
    "text": "True regarding mitochondrial DNA is:",
    "choices": [
      {
        "id": 1,
        "text": "One set from each parents"
      },
      {
        "id": 2,
        "text": "It has a higher mutation rate than nuclear DNA"
      },
      {
        "id": 3,
        "text": "It codes for more than 25% of oxidative phosphorylation proteins"
      },
      {
        "id": 4,
        "text": "It has 3 X 10^9 base pairs"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The true statement is that <strong>mitochondrial DNA </strong>has a <strong>high mutation rate.</strong></p>\n<p>Mitochondrial DNA is circular and double-stranded. It has <strong>16,569 bp</strong> (that makes up approximately 1% of total cellular DNA) while nuclear DNA has 3.3 billion bp.\u00a0It has 37 genes that encode <strong>13 protein subunits </strong>of the <strong>respiratory chain </strong>(out of a total of 67 proteins) i.e. about <strong>20%</strong>. It mutates at a rate <strong>5-10 times </strong>that of <strong>nuclear DNA. </strong>Mitochondrial DNA is transmitted by <strong>maternal non-mendelian inheritance.</strong>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1d5a85ea75074782ada747316830eeb2x1280x1035.PNG"
    ]
  },
  {
    "text": "Klenow fragment lacks the activity of",
    "choices": [
      {
        "id": 1,
        "text": "3'\u21925' Exonuclease"
      },
      {
        "id": 2,
        "text": "5'\u21923' Exonuclease"
      },
      {
        "id": 3,
        "text": "5'\u21923' DNA polymerase"
      },
      {
        "id": 4,
        "text": "3'\u21925' DNA polymerase"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Klenow fragment lacks<strong>\u00a05\u2019 \u2192 3\u2019 exonuclease</strong> activity.</p>\n<p><strong>DNA polymerase I</strong> is an enzyme involved in DNA replication. It has polymerase activity along with <strong>both 3' \u2192 5' </strong>and <strong>5' \u2192 3' exonuclease activity</strong>. When the 5' \u2192 3' exonuclease domain is <strong>removed</strong>, the remaining fragment is called <strong>Klenow fragment</strong>. It retains the polymerization and proofreading activities of DNA polymerase I.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "DNA synthesis occurs in which phase?",
    "choices": [
      {
        "id": 1,
        "text": "G1 Phase"
      },
      {
        "id": 2,
        "text": "G2 Phase"
      },
      {
        "id": 3,
        "text": "S Phase"
      },
      {
        "id": 4,
        "text": "G0 Phase"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>DNA synthesis\u00a0</strong>occurs in the <strong>S phase.\u00a0</strong></p>\n<p>In the <strong>cell cycle</strong>, <strong>replication </strong>of the <strong>DNA genome</strong> occurs only at a specified time during the\u00a0<strong>synthetic </strong>or<strong> S</strong> <strong>phase</strong>. During the S phase, mammalian cells contain greater quantities of DNA polymerase than during the nonsynthetic phases of the cell cycle.</p>\n<p><strong>Gap 1</strong> (G1) phase consists of cell growth and preparation for DNA synthesis. It occurs before the <strong>S phase</strong>. <strong>Gap 2</strong> (G2) phase occurs after S phase, during which preparation for <strong>mitosis</strong> (M phase) occurs. <strong>Cyclins</strong> tightly regulate the transition between phases of the cell cycle.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/02423ce3c16240c9bb3a8efb1045260dx1280x726.PNG"
    ]
  },
  {
    "text": "Which of the following is not a feature of DNA replication?",
    "choices": [
      {
        "id": 1,
        "text": "Semi-discontinous"
      },
      {
        "id": 2,
        "text": "Template independent"
      },
      {
        "id": 3,
        "text": "Bidirectional"
      },
      {
        "id": 4,
        "text": "RNA primer is required."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>DNA replication is <strong>not template independent.</strong></p>\n<p>DNA replication occurs in <strong>S-phase\u00a0</strong>of cell cycle. It is <strong>semi-conservative</strong>, <strong>semi-discontinuous</strong> and\u00a0<strong>bidirectional</strong>. <strong>DNA strands separate</strong> and each acts as a <strong>template strand</strong> on which new complementary strand is synthesized. <strong>RNA primer</strong> is required. The new strand is synthesized always in <strong>5'-3' direction </strong>and thus, the synthesis of DNA in both strands is<strong> not the same.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/39e1c13b813042aeaf7bcb1cb2df4d2bx800x494.JPEG"
    ]
  },
  {
    "text": "Which of the following is true about DNA replication?",
    "choices": [
      {
        "id": 1,
        "text": "Replication can occur only from a single stranded DNA template"
      },
      {
        "id": 2,
        "text": "Replication can occur only from a double stranded DNA template"
      },
      {
        "id": 3,
        "text": "Deoxynucleotide polymerization is catalyzed by helicases"
      },
      {
        "id": 4,
        "text": "Only DNA polymerase functions at the replication fork"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In all cells, <strong>replication</strong> can occur <strong>only </strong>from a <strong>single-stranded DNA</strong> (ssDNA) <strong>template</strong>.</p>\n<p><strong>Steps of DNA replication:</strong></p>\n<ul>\n<li>Identification of the origins of replication</li>\n<li>ATP hydrolysis-driven unwinding of dsDNA to provide an <strong>ssDNA template</strong></li>\n<li>Formation of the replication fork; synthesis of RNA primer</li>\n<li>Initiation of DNA synthesis and elongation</li>\n<li>Formation of replication bubbles with ligation of the newly synthesized DNA segments</li>\n<li>Reconstitution of chromatin structure</li>\n</ul>\n<p>The <strong>replication fork</strong> is formed when<strong> DNA helicase </strong>unwinds a short segment of the parent dsDNA. <strong>Primase</strong> initiates the synthesis of an <strong>RNA primer</strong>. <strong>DNA polymerase </strong>then initiates <strong>DNA synthesis </strong>(deoxynucleotide polymerisation)<strong> </strong>in the 3' to 5' direction. Hence, helicase, primase and polymerases act at the replication fork.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/94deb28c77a54877a9c419067fc3b7bax730x600.JPEG"
    ]
  },
  {
    "text": "Which of the following initiates local denaturation and unwinding of DNA during replication?",
    "choices": [
      {
        "id": 1,
        "text": "Helicase"
      },
      {
        "id": 2,
        "text": "Topoisomerase"
      },
      {
        "id": 3,
        "text": "Single strand binding protein"
      },
      {
        "id": 4,
        "text": "Ori-binding protein"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Ori-binding protein</strong> initiates local denaturation and unwinding of DNA during replication.</p>\n<p>Splitting of the two DNA strands during replication is initiated when the <strong>ori-binding protein</strong> (eg: DnaA protein) binds to the <strong>origin</strong> of <strong>replication</strong> (ori). This leads to positive <strong>supercoiling</strong> of the ori. The adjacent <strong>A+T rich</strong> <strong>region</strong>, known as <strong>DNA unwinding element </strong>(DUE), undergoes <strong>local denaturation</strong> and <strong>separation</strong>. A short region of <strong>ssDNA</strong> is formed, to which <strong>helicases bind </strong>and further unwind DNA.\u00a0</p>\n<p><strong>SSB </strong>or <strong>replication protein-A </strong>prevents<strong> reannealing</strong> of the ssDNA strands generated by helicases.</p>\n<p><strong>Topoisomerase</strong> <strong>stabilizes</strong> the<strong> strain</strong> caused during unwinding.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the function of the replication protein-A during eukaryotic DNA replication?",
    "choices": [
      {
        "id": 1,
        "text": "Unwinds DNA template at replication fork"
      },
      {
        "id": 2,
        "text": "Create a single- or double-stranded break in the helix to add or remove supercoils"
      },
      {
        "id": 3,
        "text": "Prevent strands from reannealing"
      },
      {
        "id": 4,
        "text": "Catalyzes the formation of a phosphodiester bond within a strand of double-stranded DNA"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Replication protein-A</strong> prevents strands from<strong> reannealing</strong> during the process of DNA replication.</p>\n<p>Replication protein-A is a type of <strong>ssDNA-binding protein</strong> (SSB). During DNA replication, it binds to the ssDNA generated by helicases. It shifts the equilibrium between dsDNA and ssDNA in the direction of ssDNA and thus preve ts reannealing of strands. It also <strong>protects</strong> the ssDNA from <strong>degradation</strong> by <strong>nucleases</strong>.\u00a0</p>\n<p>Option A: <strong>Helicase</strong> unwinds the DNA template at the replication fork.</p>\n<p>Option B: <strong>DNA topoisomerases </strong>create a single- or double-stranded break in the helix to add or remove supercoils.</p>\n<p>Option D: <strong>DNA ligase</strong> catalyzes the formation of a phosphodiester bond within a strand of double-stranded DNA.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is synthesized by DNA primase during replication?",
    "choices": [
      {
        "id": 1,
        "text": "DNA primer"
      },
      {
        "id": 2,
        "text": "RNA primer"
      },
      {
        "id": 3,
        "text": "Okazaki fragments"
      },
      {
        "id": 4,
        "text": "Leading strand"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>DNA primase</strong> synthesizes\u00a0<strong>RNA primers</strong> during replication of DNA.</p>\n<p>During DNA replication, DNA is synthesized using an ssDNA template. This is done by <strong>DNA polymerases</strong> in the 5' to 3' direction. However, DNA polymerases require an <strong>RNA primer</strong>, which is a short (10 - 200bp) double stranded region consisting of RNA paired to the DNA templete. Thus, RNA primers serve as <strong>scaffolds</strong> to which deoxyribonucleotides are added. The RNA in the primers is later replaced by DNA.</p>\n<p>Other options:</p>\n<p>Option C: <strong>Okazaki fragments </strong>are lagging strands built on RNA primers by <strong>DNA polymerase \u03b4</strong>.</p>\n<p>Option D: <strong>Leading strands</strong> are synthesized by <strong>DNA polymerase \u03b5.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true about DNA polymerase I?",
    "choices": [
      {
        "id": 1,
        "text": "It is involved in the creation of okazaki fragments."
      },
      {
        "id": 2,
        "text": "It is found in prokaryotes."
      },
      {
        "id": 3,
        "text": "It synthesises RNA primers."
      },
      {
        "id": 4,
        "text": "It is the primary enzyme of DNA synthesis."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The true statement is that <strong>DNA polymerase I </strong>(pol I) is found in <strong>prokaryotes.</strong></p>\n<p>The prokaryotic polymerases are DNA polymerases I, II, and III. <strong>DNA polymerase I</strong> recognize a \u201cnick\u201d or break in the phosphate backbone, and then <strong>removes each RNA primer</strong> and <strong>fills the gaps</strong> with DNA. It does this through its 5'\u21923' exonuclease activity. It has <strong>DNA repair activity </strong>through 3'\u21925' exonuclease activity. <strong>DNA polymerase II</strong> carries out DNA proofreading and repair.\u00a0<strong>DNA polymerase III </strong>is the primary enzyme for the<strong> synthesis </strong>of the <strong>leading strand of DNA.\u00a0</strong></p>\n<p>Option A:<strong> </strong><strong>DNA polymerase \u03b4</strong> (eukaryotic polymerase)<strong> </strong>synthesizes <strong>Okazaki fragments</strong> which are short, newly synthesized DNA fragments that are formed on the lagging template strand during DNA replication. They are complementary to the lagging template strand. <br />Option C: <strong>Primase</strong> synthesizes RNA primers to start the replication.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0dd7712fc8044ec7bc26714fdf3d1057x730x600.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a function of the DNA polymerase complex?",
    "choices": [
      {
        "id": 1,
        "text": "Chain elongation"
      },
      {
        "id": 2,
        "text": "Processing"
      },
      {
        "id": 3,
        "text": "Proofreading"
      },
      {
        "id": 4,
        "text": "Unwinding of DNA"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Unwinding</strong> of <strong>DNA</strong> is <strong>not</strong> a function of the <strong>DNA polymerase</strong> complex.</p>\n<p>A number of different <strong>DNA polymerase</strong> molecules engage in DNA replication that share three important properties:\u00a0<strong>Chain elongation, processivity</strong>, and <strong>proofreading. </strong>Unwinding of DNA is done by enzyme <strong>helicase.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ace397c15bfd4ec69a9cdc3a03a044fbx800x494.JPEG"
    ]
  },
  {
    "text": "Which of the following is two-base alteration DNA damage?",
    "choices": [
      {
        "id": 1,
        "text": "Oxidative free-radical formation"
      },
      {
        "id": 2,
        "text": "Alkylation of base"
      },
      {
        "id": 3,
        "text": "Base-analog incorporation"
      },
      {
        "id": 4,
        "text": "Bifunctional alkylating agent cross-linkage"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Bifunctional alkylating agent cross-linkage</strong> is a type of <strong>two-base</strong> <strong>alteration</strong> DNA damage.</p>\n<p>Bifunctional alkylating agents, like <strong>cyclophosphamide</strong> and <strong>chlorambucil</strong>, are commonly used anti-cancer drugs. They contain two reactive sites and thus, can cause<strong> intrastrand</strong> and <strong>interstrand cross-links </strong>between two nucleotides.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient who has been diagnosed with multiple gastrointestinal polyps and carcinoma, with a positive family history/history of hereditary non-polyposis colon carcinoma has a defect in which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Mismatch repair"
      },
      {
        "id": 2,
        "text": "Nucleotide excision repair"
      },
      {
        "id": 3,
        "text": "Base excision repair"
      },
      {
        "id": 4,
        "text": "Point mutation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Mismatch repair</strong> will be defective in a patient with multiple gastrointestinal polyps and carcinoma, with a positive family history/history of <strong>hereditary non-polyposis colon carcinoma </strong>(HNPCC)</p>\n<p><strong>Mismatch repair </strong>is a DNA repair mechanism that corrects single-nucleotide mismatches, insertions, and deletions introduced by the DNA polymerase during DNA replication.</p>\n<p>HNPCC or <strong>Lynch syndrome</strong> is an <strong>autosomal dominant</strong> genetic condition. It occurs due to <strong>defects</strong> in DNA mismatch repair genes like <strong>MLH1</strong> and <strong>MSH2</strong>. The genomes of these patients show <strong>microsatellite instability</strong>. HNPCC is associated with a high risk of <strong>colon cancer.\u00a0</strong>It may also be associated with a risk of developing carcinomas of the endometrium,\u00a0stomach, small bowel, ovary, pancreas, and\u00a0transitional cell carcinoma of the ureter and renal pelvis.</p>\n<p>The diagnostic criteria for HNPCC are referred to as the <strong>Amsterdam criteria</strong> or the <strong>3-2-1-0 rule. </strong>It includes:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Three </strong>or<strong> more relatives</strong> with HNPCC-associated cancer (colorectal cancer, endometrial cancer, cancer of the small bowel, ureter, or renal pelvis), one of whom is a <strong>first-degree relative</strong> of the other two.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">At least <strong>two</strong> successive generations affected</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">At least <strong>one</strong> case diagnosed before age 50 years</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Familial adenomatous polyposis <strong>excluded</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Tumors verified by pathologic examination.</li>\n</ul>\n<p>Other options:</p>\n<p>Option B: Patients with<strong> xeroderma pigmentosum</strong> have a defect in the <strong>nucleotide excision repair</strong> pathway.</p>\n<p>Option C: Defect in <strong>base excision repair</strong> pathway is seen in patients with <strong>MUTYH-associated polyposis.</strong></p>\n<p>Option D:\u00a0<strong> Sickle cell disease</strong> and <strong>beta-thalassemia</strong> are examples of diseases seen in patients with <strong>point mutations.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 10-year-old girl is brought to the dermatologist by her parents. She has many freckles on her face and limbs as shown below. She is also unusually sensitive to sunlight. Early changes of squamous cell carcinomas are also noted on her face. Which of the following processes is most like to be defective in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Defective DNA nucleotide excision repair"
      },
      {
        "id": 2,
        "text": "Defective DNA base excision repair"
      },
      {
        "id": 3,
        "text": "Defective DNA mismatch repair"
      },
      {
        "id": 4,
        "text": "Defective homologous repair"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Photosensitivity, freckling and skin cancer on the face in a child aare suggestive of <strong>xeroderma pigmentosum</strong>. It is an example of <strong>defective DNA nucleotide excision repair.\u00a0</strong></p>\n<p>In xeroderma pigmentosum, there is an inability<span class=\"fontstyle0\">\u00a0to <strong>repair DNA pyrimidine dimers</strong> caused by UV exposure. </span><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">It is an autosomal recessive disease characterized by </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">exaggerated sunburns</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> and pigmentary changes on exposure to UV radiations. There is </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">increased risk</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> of developing non-melanoma and melanoma </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">skin cancers</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">, and </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">neurodegeneration</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">. They are also more prone to developing smoking-induced lung cancers.\u00a0 </span></p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Diagnosis is mainly clinical and it can be confirmed definitively by </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">cellular tests</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> for defective DNA repair. </span><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Management includes </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">sun avoidance</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> and regular follow-up to assess and treat any skin cancers. There is </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">no cure</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> for xeroderma pigmentosum.</span></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b27b5ac0ca26405dbd418d075890cdce.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "What is the defective DNA repair mechanism in a patient with SCID?",
    "choices": [
      {
        "id": 1,
        "text": "Mismatch repair"
      },
      {
        "id": 2,
        "text": "Nucleotide excision repair"
      },
      {
        "id": 3,
        "text": "Non-homologous end joining repair"
      },
      {
        "id": 4,
        "text": "Homologous recombination"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>SCID is associated with a\u00a0<strong>defective non-homologous end-joining </strong>(NHEJ).\u00a0</p>\n<p>NHEJ is a predominant pathway for <strong>DNA double-stranded break repair.</strong> NHEJ also functions in class switch recombination, enhancing T and B cell diversity. Thus, NHEJ deficiency leads to combined immunodeficiency due to a failure to carry out recombination efficiently.\u00a0</p>\n<p><strong>Severe combined immunodeficiency (SCID) </strong>is characterised by defects in\u00a0<strong>both humoral</strong>\u00a0and\u00a0<strong>cell-mediated</strong> immune responses. Genes involved are JAK3, RAG1, and IL-7R. Persons with SCID are extremely susceptible to <strong>recurrent, severe infections</strong> by a wide range of pathogens, including <em>Candida albicans,\u00a0Pneumocystis jirovecii,\u00a0Pseudomonas</em>\u00a0species, cytomegalovirus, varicella, and a host of other bacteria.\u00a0</p>\n<p><strong>X-linked SCID</strong> is the <strong>most common form,</strong>\u00a0accounting for 50% to 60% of cases, is X-linked, and hence, SCID is more<strong>\u00a0common</strong> in <strong>boys</strong>. The genetic defect is a <strong>mutation</strong> in the<strong> common \u03b3-chain </strong>(\u03b3c) <strong>subunit </strong>of <strong>cytokine receptors</strong>. In these patients, the thymus contains\u00a0lobules of<strong> undifferentiated epithelial cells, </strong>resembling fetal thymus.</p>\n<p><strong>Autosomal recessive SCID</strong> is commonly caused by\u00a0a<strong>\u00a0deficiency</strong> of <strong>adenosine deaminase </strong>(ADA) enzyme. In these patients, the thymus contains remnants of <strong>Hassall\u2019s corpuscles.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "By which mechanism does gene repair occur when mediated by CRISPR-Cas9?",
    "choices": [
      {
        "id": 1,
        "text": "Base excision"
      },
      {
        "id": 2,
        "text": "Non-homologous end joining"
      },
      {
        "id": 3,
        "text": "Homologous end joining"
      },
      {
        "id": 4,
        "text": "Mismatch repair"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Non-homologous end joining </strong>(NHEJ) is the major mechanism used by CRISPR-Cas9 for gene repair.</p>\n<div class=\"page\" title=\"Page 467\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The <strong>CRISPR </strong>(<strong>C</strong>lustered <strong>R</strong>egularly<strong> I</strong>nterspaced <strong>S</strong>hort<strong> P</strong>alindromic <strong>R</strong>epeats) are <strong>clustered palindromic sequences</strong> found in many bacteria. It is a form of acquired immunity to infection by bacteriophages which complements the system of<strong> restriction endonucleases</strong> and methylases. CRISPR uses <strong>RNA-based targeting</strong> to bring the <strong>Cas9 endonuclease </strong>to foreign (or any complementary) DNA.<strong> </strong>Within bacteria this <strong>CRISPR-RNA-Cas9 complex </strong>then<strong> degrades</strong> and<strong> inactivates</strong> the targeted DNA.</p>\n<p>The CRISPR system has been adapted for use in eukaryotic cells for <strong>gene deletion, gene editing</strong> and even <strong>modulation of gene transcription</strong>.\u00a0</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d3bf122638db40b29075f1af8c9ac945x1280x3718.JPEG"
    ]
  },
  {
    "text": "Chimeric DNA is associated with:",
    "choices": [
      {
        "id": 1,
        "text": "Paternity test"
      },
      {
        "id": 2,
        "text": "Maternity test"
      },
      {
        "id": 3,
        "text": "Personal identification"
      },
      {
        "id": 4,
        "text": "Organ transplantation"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>Chimeric DNA</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"> is associated with <strong>organ transplantation,\u00a0</strong>especially bone-marrow transplantation.\u00a0</span></p>\n<p>In organ transplantation, chimeric DNA refers to the<strong> mixture</strong> of <strong>donor</strong> and <strong>recipient genetic material </strong>that occurs when donor cells begin functioning within the recipient's body. It is used for <strong>long-term monitoring</strong> of bone marrow transplant recipients. Detecting changes in the levels of donor-derived cells can provide early warning signs of graft failure, rejection, or relapse of underlying disease.\u00a0</p>\n<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>Note:</strong> The practical </span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>applications\u00a0</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">of\u00a0</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>recombinant DNA technolog</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>y</strong> include:</span></p>\n<ul>\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>Gene mapping</strong> using techniques such as fluorescence in situ hybridization\u00a0</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z h-lparen\">(FISH).</span></li>\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Producing proteins such as:</span>\n<ul>\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Interferons, <strong>tPA\u00a0</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z h-lparen\">(tissue\u00a0</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">plasminogen activator)</span></li>\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>Insulin</strong>, growth hormone</span></li>\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Hepatitis B vaccine</span></li>\n</ul>\n</li>\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>Molecular analysis</strong> of disease, to detect gene variations and mutations.</span></li>\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Restriction Fragment Length polymorphism (RFLP) and single nucleotide polymorphism (SNP)</span></li>\n<li><strong><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Microsatellite DNA polymorphisms</span></strong></li>\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>Gene therapy</strong> and <strong>bone</strong> <strong>marrow</strong> transplantation</span></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a true statement regarding telomerase?",
    "choices": [
      {
        "id": 1,
        "text": "Has reverse transcriptase activity"
      },
      {
        "id": 2,
        "text": "Present only in eukaryotes"
      },
      {
        "id": 3,
        "text": "Maintain the chromosome length"
      },
      {
        "id": 4,
        "text": "Involved in DNA repair"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>false</strong> statement is that<strong> telomerase</strong> is involved in<strong> DNA repair.</strong></p>\n<p>Telomeres are the end of chromosomal DNA. Since prokaryotic DNA is circular, it does not have free ends and hence no telomeres. Thus, telomeres are <strong>present </strong>only in<strong> eukaryotes</strong>\u00a0 Telomeres have <strong>TG- rich repeats</strong> and usually do not code for any proteins. With every DNA replication during cell division,<strong> telomere shortening</strong> occurs. Once telomeres are almost negligible or non-existent in length, the DNA is unable to replicate and the cell dies. Hence, there is a limit to the number of times a cell can divide.</p>\n<p><strong>In stem cells </strong>and<strong> cancer cells</strong>, an enzyme <strong>telomerase </strong>having <strong>reverse transcriptase activity</strong> (RNA dependent DNA polymerase) adds telomeres to the chromosome ends, thereby <strong>preserving</strong> chromosomal length. It allows the stem cells and cancer cells to multiply a lot more number of times than a normal adult cell.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '25 Dna Organization, Replication And Repair';
        let hierarchy = ["Marrow", "qBank", "Biochemistry"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>