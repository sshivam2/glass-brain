<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pediatrics St 1 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A child is able to make a tower of 6 blocks. His probable age is",
    "choices": [
      {
        "id": 1,
        "text": "1 year"
      },
      {
        "id": 2,
        "text": "2 years"
      },
      {
        "id": 3,
        "text": "3 years"
      },
      {
        "id": 4,
        "text": "4 years"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A<strong> 2 year old</strong> child can make a tower of<strong> 6 blocks</strong></p>\n<p>A child makes a tower of:</p>\n<ul>\n<li>2 blocks by 15 months,</li>\n<li>3 blocks by 18 months</li>\n<li><strong>6 blocks by 2 years</strong></li>\n<li>9 blocks by 3 years</li>\n</ul>\n<p>A child makes:</p>\n<ul>\n<li>A train by 2 years</li>\n<li>A bridge by 3 years</li>\n<li>A gate by 4 years</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 3 hour old preterm baby develops respiratory grunting. The X ray taken is seen below. Diagnosis is:",
    "choices": [
      {
        "id": 1,
        "text": "Hyaline membrane disease"
      },
      {
        "id": 2,
        "text": "Transient tachypnea of newborn"
      },
      {
        "id": 3,
        "text": "Meconium aspiration syndrome"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Respiratory distress syndrome/Hyaline membrane disease <strong>occurs primarily in premature infants (</strong>as the baby in this case) due to surfactant deficiency in the alveoli.</p>\n<p>The Chest X ray shows (as seen above)</p>\n<ul>\n<li>Fine reticulogranular pattern</li>\n<li>Bilateral <strong>diffuse ground glass opacities</strong></li>\n<li>Air bronchograms</li>\n</ul>\n<p>White out lung may be seen in severe disease</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2b8394a3824b4fcbb300b6b1c33fc756.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Dysphagia lusoria is caused by extrinsic compression produced by",
    "choices": [
      {
        "id": 1,
        "text": "Aberrant left subclavian artery"
      },
      {
        "id": 2,
        "text": "Aberrant right subclavian artery"
      },
      {
        "id": 3,
        "text": "Lymph nodes"
      },
      {
        "id": 4,
        "text": "Mediastinal tumors"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Dysphagia lusoria</strong> - is dysphagia produced due to <strong>extrinsic compression</strong> of the esophagus by a developmental <strong>vascular anomaly</strong>, often an <strong>aberrant right subclavian artery,</strong> or right-sided or double aortic arch.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/10a5542d30234499912ac1c41c13fbf3x1280x1241.JPEG"
    ]
  },
  {
    "text": "Not true regarding hereditary retinoblastoma",
    "choices": [
      {
        "id": 1,
        "text": "Bilateral"
      },
      {
        "id": 2,
        "text": "Multifocal"
      },
      {
        "id": 3,
        "text": "Diagnosed in older children"
      },
      {
        "id": 4,
        "text": "Risk of secondary malignancies"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Hereditary Retinoblastoma are usually diagnosed at a younger age (NOT in older children).</li>\n<li>Retinoblastoma may be either hereditary or sporadic. Hereditary form arises due to a germ-line loss of function mutation of RB1 gene (tumor suppressor gene) on chromosome 13q14.</li>\n<li>Differences between hereditary and sporadic Retinoblastoma</li>\n</ul>\n<table style=\"width: 375.455px;\">\n<tbody>\n<tr>\n<td style=\"width: 163px;\"><strong>Hereditary Retinoblastoma</strong></td>\n<td style=\"width: 204.455px;\"><strong>Sporadic Retinoblastoma</strong></td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">\n<ul>\n<li>Bilateral</li>\n<li>Multifocal</li>\n<li>Diagnosed at&nbsp;<strong>younger children</strong></li>\n<li>High risk for second malignancies</li>\n</ul>\n</td>\n<td style=\"width: 204.455px;\">\n<ul>\n<li>Unilateral</li>\n<li>Unifocal</li>\n<li>Diagnosed in&nbsp;<strong>older children</strong></li>\n<li>Not at high risk for second malignancies</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 4-year old child presented with low-grade fever, headache, and mild upper respiratory tract infection. He also developed an erythematous rash on the cheek which progressed to the extremities the following day as shown below. The most likely diagnosis is:",
    "choices": [
      {
        "id": 1,
        "text": "Scarlet fever"
      },
      {
        "id": 2,
        "text": "Systemic lupus erythematosus"
      },
      {
        "id": 3,
        "text": "Kawasaki disease"
      },
      {
        "id": 4,
        "text": "Erythema infectiosum"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The most common manifestation of parvovirus B19 infection is <strong>erythema infectiosum</strong>, also known as the <strong>fifth disease</strong>, which is a <strong>benign, self-limited exanthematous illness </strong>of childhood. Affected children are afebrile or have a mild fever and <strong>do not appear ill</strong>. ( as in this child)</p>\n<ul>\n<li>The hallmark of erythema infectiosum is the <strong>characteristic rash</strong>, which occurs in <strong>3 stages</strong>\n<ul>\n<li>The initial stage is <strong>erythematous facial flushing</strong>, often described as a <strong>&ldquo;slapped cheek&rdquo; appearance</strong></li>\n<li>The rash spreads rapidly or concurrently to the <strong>trunk and proximal extremities as diffuse macular erythema</strong> in the 2nd stage</li>\n<li><strong>Central clearing of macular lesions</strong> occurs promptly, giving the rash a <strong>lacy, reticulated appearance </strong></li>\n</ul>\n</li>\n<li>The rash tends to be <strong>more prominent on extensor surfaces</strong>, <strong>sparing the palms and soles.</strong></li>\n</ul>\n<p>&nbsp;</p>\n<p>B19 and HBoV (human bocavirus) are the only 2 parvoviruses known to be pathogenic in humans.</p>\n<p>&nbsp;</p>\n<p>Other options:</p>\n<p>Fever is characteristically high with Scarlet fever and Kawasaki disease (unlike in this patient)</p>\n<p>The malar rash which is pathognomonic of SLE involves the cheek, bridge of nose and lower eyelids; Discoid lesions are rare in childhood; photosensitivity rash may be present</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2a442a71fb624e90b4f02e163f043afa.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "In phenylketonuria, the following phenylketones are excreted in urine:",
    "choices": [
      {
        "id": 1,
        "text": "Phenylalanine"
      },
      {
        "id": 2,
        "text": "Phenylpyruvate"
      },
      {
        "id": 3,
        "text": "Acetoacetate"
      },
      {
        "id": 4,
        "text": "Both b and c"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>In phenylketonuria (PKU), excess phenylalanine is metabolized to <strong>phenylketones</strong> &ndash; <strong>phenylpyruvate and phenylacetate</strong>; that are excreted in urine, giving rise to the term phenylketonuria (PKU).</li>\n<li>Acetoacetate and beta hydroxybutyrate are keto acids but are not phenylketones.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Dose of Human Rabies Immunoglobulin is:",
    "choices": [
      {
        "id": 1,
        "text": "10IU/kg"
      },
      {
        "id": 2,
        "text": "20IU/kg"
      },
      {
        "id": 3,
        "text": "30IU/kg"
      },
      {
        "id": 4,
        "text": "40IU/kg"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>At the time of initial post exposure prophylaxis, previously unvaccinated persons should receive rabies immunoglobulin (<strong>RIG, 20 IU/kg</strong>), with as much of the dose as possible infiltrated around the wound site.</li>\n<li>Previously vaccinated persons should not receive RIG.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify this syndrome which carries an increased risk of Wilm's tumor",
    "choices": [
      {
        "id": 1,
        "text": "WAGR syndrome"
      },
      {
        "id": 2,
        "text": "Sturge weber syndrome"
      },
      {
        "id": 3,
        "text": "Deny's \u2013Drash syndrome"
      },
      {
        "id": 4,
        "text": "Beckwith-Wiedemann syndrome"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>The baby in the picture has features of<strong> Beckwith-Wiedemann syndrome</strong>, an overgrowth syndrome which is characterized by<strong> macrosomia</strong>, macroglossia, <strong>hemihypertrophy (</strong>left side of body in this picture)<strong> ,</strong> <strong>omphalocele</strong>, and renal anomalies.</li>\n</ul>\n<p>&nbsp;USG : Coronal view of the fetal kidneys (a) shows bilateral nephromegaly (arrows). Coronal view of the fetal face (b) shows macroglossia (arrowhead)</p>\n<ul>\n<li>It is associated with an increased risk of:\n<ul>\n<li><strong>Wilms tumor</strong></li>\n<li>Hepatoblastoma</li>\n<li>Rhabdomyosarcoma</li>\n<li>Neuroblastoma, and</li>\n<li>Adrenal cortical carcinoma</li>\n</ul>\n</li>\n</ul>\n<p>Children with WAGR, Denys-Drash syndrome and Beckwith-Wiedeman syndrome are predisposed to developing Wilm's tumor:</p>\n<ul>\n<li>WAGR is acronymic contiguous gene syndrome consists of Wilms tumor, aniridia, genitourinary malformations, and retardation.</li>\n<li>Denys-Drash syndrome presents with early-onset nephrotic syndrome, progressive renal insufficiency, ambiguous genitalia, and Wilms tumors</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f1a99be74967409ebed8fd810e8bf304.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Not a complication of post maturity",
    "choices": [
      {
        "id": 1,
        "text": "Abruptio"
      },
      {
        "id": 2,
        "text": "Polycythemia"
      },
      {
        "id": 3,
        "text": "Meconium aspiration"
      },
      {
        "id": 4,
        "text": "Persistent pulmonary hypertension"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Post maturity is associated with oligohydramnios rather than polyhydramnios. Therefore, abruptio which is seen more in cases with polyhydramnios, is not a complication of post maturity.</p>\n<p>Complications of post maturity include:</p>\n<ul>\n<li>Perinatal depression</li>\n<li><strong>Meconium aspiration</strong></li>\n<li><strong>Persistent pulmonary hypertension</strong></li>\n<li>Hypoglycaemia</li>\n<li>Hypocalcemia</li>\n<li><strong>Polycythemia</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which one of the following is an inherited conjugated hyperbilirubinemia :",
    "choices": [
      {
        "id": 1,
        "text": "Gilbert syndrome"
      },
      {
        "id": 2,
        "text": "Crigler Najjar type 1"
      },
      {
        "id": 3,
        "text": "Crigler Najjar type 2"
      },
      {
        "id": 4,
        "text": "Rotor syndrome"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Inherited <strong>conjugated</strong> hyperbilirubinemia</p>\n<ul>\n<li>Dubin Johnson syndrome</li>\n<li><strong>Rotor syndrome</strong></li>\n</ul>\n<p>Inherited unconjugated hyperbilirubinemia:</p>\n<ul>\n<li>Gilbert syndrome</li>\n<li>Crigler Najjar type 1</li>\n<li>Crigler Najjar type 2</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An infant comes to a paediatrician and on examination there is a coarse systolic murmur in the mitral area with mild exercise intolerance. On echocardiogram there is a small muscular VSD. What is the appropriate management?",
    "choices": [
      {
        "id": 1,
        "text": "Immediate surgical closure"
      },
      {
        "id": 2,
        "text": "Wait and watch till 2 years then operate"
      },
      {
        "id": 3,
        "text": "Restrict physical activity and operate when weight is more than 15 kgs"
      },
      {
        "id": 4,
        "text": "Reassure about the benign nature of the disease and advice about dental hygiene"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Reassure the parents about the benign nature of the disease and the dental hygiene to be carefully maintained as they are at high risk for infective endocarditis.</p>\n<ul>\n<li>In patients with small VSDs\n<ul>\n<li>Parents should be reassured of the <strong>benign nature</strong> of the lesion</li>\n<li>They should be encouraged to live a normal life</li>\n<li><strong>No restrictions on physical activity</strong></li>\n<li><strong>Surgical repair is not recommended</strong></li>\n</ul>\n</li>\n<li>Small muscular VSDs are more likely to close (up to 80%) than membranous VSDs (up to 35%)</li>\n<li>They only have a <strong>long-term risk for infective endocarditis</strong> so as a protection against infective endocarditis, <strong>the integrity of primary and permanent teeth should be carefully maintained.</strong></li>\n<li>The latest revision of the American Heart Association guidelines states:&nbsp;\n<ul>\n<li>Antibiotic prophylaxis is no longer recommended for dental visits or surgical procedures.</li>\n<li>Patients can be monitored by a combination of clinical examination and non-invasive laboratory tests until the VSD has closed spontaneously.</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Indication for growth hormone therapy is:",
    "choices": [
      {
        "id": 1,
        "text": "Marfan syndrome"
      },
      {
        "id": 2,
        "text": "Congenital hypothyroidism"
      },
      {
        "id": 3,
        "text": "Chronic renal failure"
      },
      {
        "id": 4,
        "text": "Klinefelter syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<table>\n<tbody>\n<tr>\n<td><strong>8 FDA approved indications for GH treatment</strong></td>\n</tr>\n<tr>\n<td>GH deficiency</td>\n</tr>\n<tr>\n<td>Turner&rsquo;s syndrome</td>\n</tr>\n<tr>\n<td><strong>Chronic renal failure before transplantation</strong></td>\n</tr>\n<tr>\n<td>Idiopathic short stature</td>\n</tr>\n<tr>\n<td>Small for gestational age short stature</td>\n</tr>\n<tr>\n<td>Prader Willi syndrome</td>\n</tr>\n<tr>\n<td>SHOX gene abnormality</td>\n</tr>\n<tr>\n<td>Noonan syndrome</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Refrigerated breast milk should be used within",
    "choices": [
      {
        "id": 1,
        "text": "48 hours"
      },
      {
        "id": 2,
        "text": "24 hours"
      },
      {
        "id": 3,
        "text": "12 hours"
      },
      {
        "id": 4,
        "text": "6 hours"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Refrigerated breast milk</strong> should be used within <strong>24</strong>&nbsp;hours.</p>\n<ul>\n<li>Expressed breast milk can be frozen and stored for up to 3 months.</li>\n<li>Breast milk should be thawed rapidly by holding under running tepid water and used completely <strong>within</strong> <strong>24 hr after thawing</strong>.</li>\n<li>Breast milk should never be microwaved.</li>\n</ul>\n<p><strong>Note</strong>: This is a&nbsp;<strong>controversial question</strong>. A difference of opinion among authors is noted regarding refrigeration of expressed breast milk.&nbsp;<strong>Nelson's</strong>&nbsp;(20th ed) mentions that breast milk can be&nbsp;<strong>refrigerated and used within 48 hours</strong>&nbsp;and&nbsp;<strong>frozen for up to 6 months and used within 24 hours of thawing</strong>. However,&nbsp;<strong>Ghai</strong>(9th ed) mentions that breast milk can be&nbsp;<strong>refrigerated up to 24 hours</strong>&nbsp;and<strong>&nbsp;frozen</strong>&nbsp;at -20 degree C&nbsp;<strong>for about 3 months</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In what type of glomerular disease are the following findings seen?\nLight microscopy: enlarged, pale glomeruli\nElectron microscopy: epithelial humps",
    "choices": [
      {
        "id": 1,
        "text": "Post-streptococcal glomerulonephritis"
      },
      {
        "id": 2,
        "text": "Rapidly progressive glomerulonephritis"
      },
      {
        "id": 3,
        "text": "Focal segmental glomerulonephritis"
      },
      {
        "id": 4,
        "text": "Minimal change disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The findings mentioned are characteristic of post streptococcal glomerulonephritis (PSGN).</p>\n<p>Findings in PSGN:</p>\n<ul>\n<li>Light microscopy: <strong>enlarged, pale glomeruli</strong> with diffuse mesangial proliferation and increase in mesangial matrix.<strong> PMN infiltration</strong> in early stages.</li>\n<li>Immunofluorescence: <strong>&ldquo;lumpy-bumpy&rdquo; deposits</strong> of immunoglobulin and complement on the GBM and in the mesangium.</li>\n<li>Electron microscopy: <strong>&nbsp;</strong>electron-dense deposits, or <strong>&ldquo;humps,&rdquo; are observed on the epithelial side</strong> of the glomerular basement membrane.</li>\n</ul>\n<p>Other options:</p>\n<p>Idiopathic rapidly progressive glomerulonephritis:</p>\n<ul>\n<li>Light microscopy -Crescents develop in several forms of glomerulonephritis (are a characteristic response to deposition of fibrin in Bowman&rsquo;s space)</li>\n<li>Electron microscopy &ndash; no deposits</li>\n</ul>\n<p>Focal segmental glomerulonephritis:</p>\n<ul>\n<li>Light microscopy - Focal sclerotic lesions</li>\n<li>Electron microscopy - Foot process fusion</li>\n</ul>\n<p>Minimal change disease:</p>\n<ul>\n<li>Light microscopy &ndash; normal</li>\n<li>Electron microscopy - Foot process fusion</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are features of prematurity in a neonate except",
    "choices": [
      {
        "id": 1,
        "text": "No creases on sole"
      },
      {
        "id": 2,
        "text": "Abundant lanugo"
      },
      {
        "id": 3,
        "text": "Thick ear cartilage"
      },
      {
        "id": 4,
        "text": "Empty scrotum"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Thick cartilage with stiff ear in a newborn is a sign of maturity ( NOT prematurity )</p>\n<table style=\"width: 475.273px;\">\n<tbody>\n<tr style=\"height: 64.0909px;\">\n<td style=\"height: 64.0909px; width: 57px;\"><strong>Sign</strong></td>\n<td style=\"height: 64.0909px; width: 419px;\" colspan=\"6\"><strong>Physical Maturity</strong></td>\n</tr>\n<tr style=\"height: 12px;\">\n<td style=\"height: 12px; width: 57px;\"><strong>&nbsp;</strong></td>\n<td style=\"height: 12px; width: 59px;\"><strong>-1</strong></td>\n<td style=\"height: 12px; width: 66px;\"><strong>0</strong></td>\n<td style=\"height: 12px; width: 97px;\"><strong>1</strong></td>\n<td style=\"height: 12px; width: 110px;\"><strong>2</strong></td>\n<td style=\"height: 12px; width: 77px;\"><strong>3</strong></td>\n<td style=\"height: 12px; width: 10px;\"><strong>4</strong></td>\n</tr>\n<tr style=\"height: 38px;\">\n<td style=\"height: 38px; width: 57px;\"><strong>Eye / Ear</strong></td>\n<td style=\"height: 38px; width: 59px;\">lids fused<br /> loosely: -1<br />tightly: -2</td>\n<td style=\"height: 38px; width: 66px;\">lids open<br /> pinna flat<br />stays folded</td>\n<td style=\"height: 38px; width: 97px;\">sl. curved pinna; <br />soft; slow recoil</td>\n<td style=\"height: 38px; width: 110px;\">well-curved pinna; <br />soft but ready recoil</td>\n<td style=\"height: 38px; width: 77px;\">formed &amp; firm<br />instant recoil</td>\n<td style=\"height: 38px; width: 10px;\"><strong>thick cartilage</strong><br /> <strong>ear stiff</strong></td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n<p>Other options: No creases on the sole, Abundant lanugo and empty scrotum are all physical signs of prematurity in a newborn.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Maternal intake of statins causes ______ in fetus:",
    "choices": [
      {
        "id": 1,
        "text": "Cutis Laxa syndrome"
      },
      {
        "id": 2,
        "text": "Ebstein anomaly"
      },
      {
        "id": 3,
        "text": "Facial ear anomalies"
      },
      {
        "id": 4,
        "text": "VACTERAL defect"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>Maternal intake of <strong>Statins</strong> can adversely affect the fetus by causing\n<ul>\n<li>IUGR</li>\n<li>Limb deficiencies</li>\n<li><strong>VACTERAL </strong>(vertebral, anal, cardiac, tracheoesophageal fistula, renal, arterial, limb) defect.</li>\n</ul>\n</li>\n<li>Other options:</li>\n</ul>\n<p>Maternal drug intake &ndash; adverse effect on fetus:</p>\n<ul>\n<li>Penicillamine&nbsp; - Cutis laxa syndrome</li>\n<li>Lithium - Ebstein anomaly, macrosomia</li>\n<li>Accutane (isotretinoin) -&nbsp; Facial-ear anomalies, heart disease, CNS anomalies</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common brain lesion causing central precocious puberty is:",
    "choices": [
      {
        "id": 1,
        "text": "Tuberculous meningitis"
      },
      {
        "id": 2,
        "text": "Tuberous sclerosis"
      },
      {
        "id": 3,
        "text": "Astrocytoma"
      },
      {
        "id": 4,
        "text": "Hypothalamic hamartoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Most common lesion causing central precocious puberty is <strong>Hypothalamic hamartoma.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7057b71034d147629267d141a8fb86c4x619x512.JPEG"
    ]
  },
  {
    "text": "Which one of the following is the main factor for the ductal closure postnatally?",
    "choices": [
      {
        "id": 1,
        "text": "Increase in paO2"
      },
      {
        "id": 2,
        "text": "Functional"
      },
      {
        "id": 3,
        "text": "Reflex constriction"
      },
      {
        "id": 4,
        "text": "Decrease in pulmonary venous resistance"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Oxygen is the most important factor controlling ductal closure</p>\n<p>After birth:</p>\n<ul>\n<li>The pulmonary vascular resistance decreases</li>\n<li>The aortic pressure increases due to increased venous return from the lungs.</li>\n<li>The blood flow through the ductus reverses</li>\n<li>Highly oxygenated blood flows from the aorta through the ductus which creates a stimulus for the muscular spasm and subsequent closure.</li>\n<li>Thus, in a full-term neonate, <strong>oxygen is the most important factor controlling ductal closure.</strong></li>\n<li>When the Po2 of the blood passing through the ductus reaches about 50 mm Hg, the ductal wall begins to constrict.</li>\n<li>The <strong>effects of oxygen on ductal smooth muscle </strong>may be direct or mediated by its effects on prostaglandin synthesis.</li>\n<li>Gestational age also appears to play an important role; the <strong>ductus of a premature infant is less responsive to oxygen</strong>, even though its musculature is developed.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The autoantibody implicated in type 1 autoimmune hepatitis",
    "choices": [
      {
        "id": 1,
        "text": "ANA"
      },
      {
        "id": 2,
        "text": "Anti-LKM 1"
      },
      {
        "id": 3,
        "text": "Anti-LKM 3"
      },
      {
        "id": 4,
        "text": "ALC-1"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<table>\n<tbody>\n<tr>\n<td><strong>Type 1 autoimmune hepatitis</strong></td>\n<td><strong>Type 2 autoimmune hepatitis</strong></td>\n</tr>\n<tr>\n<td>\n<p><strong>Antinuclear antibody (ANA)</strong></p>\n<p><strong>Anti-smooth muscle antibody (ASMA)</strong></p>\n<p><strong>Atypical pANCA</strong></p>\n</td>\n<td>\n<p>Anti liver-kidney-microsome-1 antibody (anti-LKM 1)</p>\n<p>Anti liver cytosol antibody-1 (ALC-1)</p>\n<p>Anti liver-kidney-microsome-3 antibody (anti-LKM 3)</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Gower's manoeuvre is classically seen in:",
    "choices": [
      {
        "id": 1,
        "text": "Cerebral palsy"
      },
      {
        "id": 2,
        "text": "Freidreich's ataxia"
      },
      {
        "id": 3,
        "text": "Duchenne muscular dystrophy"
      },
      {
        "id": 4,
        "text": "Parkinsonism"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<div class=\"ng-scope\">\n<ul>\n<li><strong>Waddling gait, Gower sign, and calf muscle pseudo hypertrophy</strong> are classical signs seen around 3-4 years of age in children with <strong>Duchenne muscular dystrophy.</strong></li>\n<li>When getting up from the floor, the patients turn to face the floor and use their hands to push up from the floor and then the thighs to achieve a standing position (Gowers sign) due to <strong>proximal muscle weakness.</strong></li>\n</ul>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A male infant with a weak urinary stream has the VCUG picture as shown below. All statements about this condition is true EXCEPT:",
    "choices": [
      {
        "id": 1,
        "text": "There is a palpably distended bladder and the urinary stream is weak"
      },
      {
        "id": 2,
        "text": "A Foley (balloon) catheter should not be used"
      },
      {
        "id": 3,
        "text": "Favorable prognostic factor is a serum creatinine level >1.0 mg/dL after bladder decompression"
      },
      {
        "id": 4,
        "text": "15% of boys have VURD syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>The Voiding cystourethrogram in this infant shows <strong>posterior urethral valves</strong>. Note the dilation of the prostatic urethra and the transverse linear filling defect corresponding to the valves.</li>\n<li>A serum creatinine level &gt;1.0 mg/dL after bladder decompression in posterior urethral valves is an unfavorable prognostic factor ( NOT favorable factor).</li>\n<li><strong>A serum creatinine</strong> level <strong>&lt;0.8-1.0 mg/dL</strong> after bladder decompression is considered <strong>favorable.</strong></li>\n</ul>\n<p>Other options: are all true</p>\n<ul>\n<li>In the male neonate, posterior urethral valves are suspected when there is a <strong>palpably distended bladder and the urinary stream is weak.</strong></li>\n<li><strong>A Foley (balloon) catheter should not be used</strong>, because the balloon can cause severe bladder spasm, which can produce severe ureteral obstruction.</li>\n<li>15% of boys with posterior urethral valves have unilateral reflux into a nonfunctioning dysplastic kidney, termed the <strong>VURD syndrome (valves, unilateral reflux, dysplasia)</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/32771d01362845a0b0e42982f2085597.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "All of the following are components of Jones criteria for the diagnosis of acute rheumatic fever, except ______.",
    "choices": [
      {
        "id": 1,
        "text": "Erythema marginatum"
      },
      {
        "id": 2,
        "text": "Shortened PR interval"
      },
      {
        "id": 3,
        "text": "Arthralgia"
      },
      {
        "id": 4,
        "text": "Chorea"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Prolonged PR interval</strong> is a component of Jones criteria, not shortened PR interval</p>\n<p>Jones criteria for the diagnosis of acute rheumatic fever includes:</p>\n<table style=\"width: 557px; height: 259px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 170.414px;\"><strong>Major criteria</strong></td>\n<td style=\"width: 204.586px;\"><strong>Minor criteria</strong></td>\n<td style=\"width: 156px;\"><strong>Supporting evidence of antecedent GAS&nbsp;</strong>(Group A Streptococci)<strong> infection</strong></td>\n</tr>\n<tr>\n<td style=\"width: 170.414px;\">\n<ul>\n<li>Carditis</li>\n<li>Polyarthritis</li>\n<li><strong>Erythema marginatum</strong></li>\n<li>Subcutaneous nodules</li>\n<li><strong>Chorea</strong></li>\n</ul>\n</td>\n<td style=\"width: 204.586px;\">\n<p>Clinical</p>\n<ul>\n<li><strong>Arthralgia</strong></li>\n<li>Fever</li>\n</ul>\n<p>Laboratory:</p>\n<ul>\n<li>Elevated acute phase reactants</li>\n<li>ESR</li>\n<li>C reactive protein</li>\n<li><strong>Prolonged PR interval</strong></li>\n</ul>\n</td>\n<td style=\"width: 156px;\">\n<ul>\n<li>Positive throat culture or rapid streptococcal antigen test</li>\n<li>Elevated or increasing streptococcal antibody titer</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Trans fats should account for ____ % of total daily energy in children",
    "choices": [
      {
        "id": 1,
        "text": "2"
      },
      {
        "id": 2,
        "text": "< 10"
      },
      {
        "id": 3,
        "text": "< 5"
      },
      {
        "id": 4,
        "text": "0"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The current dietary guidelines for children and adolescents recommend that:</p>\n<ul>\n<li>Total fat should account for &lt;30% of total daily energy</li>\n<li>Saturated fat less than 10% of total daily energy</li>\n<li>Dietary cholesterol &lt;300 mg/day</li>\n<li>No trans-fat</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Understanding that objects continue to exist even when not seen is called",
    "choices": [
      {
        "id": 1,
        "text": "Symbolic transformation"
      },
      {
        "id": 2,
        "text": "Transitional object"
      },
      {
        "id": 3,
        "text": "Object permanence"
      },
      {
        "id": 4,
        "text": "Separation anxiety"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>Object permanence</strong> is a major developmental milestone, <strong>attained at the age of 8-9 months.</strong> It is the understanding that objects continue to exist even when not seen.</li>\n<li>Object permanence is <strong>firmly established by 18 months of age</strong>; toddlers anticipate where an object will end up, even though the object was not visible while it was being moved.</li>\n</ul>\n<p>&nbsp;Other options:</p>\n<ul>\n<li><strong>Separation anxiety</strong> &ndash; the child becomes clingy and cries anxiously at bedtime or when separated from the parents. Separation anxiety begins about 10 mo of age and tapers off by 18 mo.</li>\n<li><strong>Transitional object</strong> &ndash; it may be a blanket or a stuffed toy which functions as a symbol of the absent parent.</li>\n<li>Egocentric symbolic play seen at 12 months - Make-believe (symbolic) play centers on the child&rsquo;s own body (pretending to drink from an empty cup) ; <strong>Symbolic transformations</strong> in play are no longer tied to the toddler&rsquo;s own body by 18 months, so that a doll can be &ldquo;fed&rdquo; from an empty plate.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Fanconi anemia can lead to:",
    "choices": [
      {
        "id": 1,
        "text": "B12 deficiency"
      },
      {
        "id": 2,
        "text": "Folate deficiency"
      },
      {
        "id": 3,
        "text": "Iron deficiency"
      },
      {
        "id": 4,
        "text": "Aplastic anemia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>Fanconi anemia (FA) is primarily inherited as an autosomal recessive disorder</li>\n<li>In FA marrow failure usually ensues in the 1st decade of life.</li>\n<li>Thrombocytopenia and red blood cell macrocytosis often appears initially, with subsequent onset of granulocytopenia and then anemia.</li>\n<li><strong>Severe aplasia develops in most cases</strong></li>\n<li>Hematopoietic stem cell transplantation is the only curative therapy for the hematologic abnormalities.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The major limiting factor for survival in congenital diaphragmatic hernia is :",
    "choices": [
      {
        "id": 1,
        "text": "Septicemia"
      },
      {
        "id": 2,
        "text": "Hemorrhage"
      },
      {
        "id": 3,
        "text": "Pulmonary hypoplasia"
      },
      {
        "id": 4,
        "text": "Intestinal obstruction"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Poor prognostic indicators in CDH :</strong></p>\n<ul>\n<li>The presence of <strong>liver in the thoracic cavity,</strong> is a poor prognostic feature</li>\n<li><strong>Pulmonary hypoplasia</strong>, pulmonary hypertension</li>\n<li><strong>Early respiratory distress</strong>, within 6 hr after birth</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 2 week old baby suspected to have congenital adrenal hyperplasia; the investigation of choice to confirm the diagnosis is:",
    "choices": [
      {
        "id": 1,
        "text": "21 hydroxylase"
      },
      {
        "id": 2,
        "text": "17-hydroxyprogesterone"
      },
      {
        "id": 3,
        "text": "17\u03b1-Hydroxylase"
      },
      {
        "id": 4,
        "text": "11\u03b2-Hydroxylase"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Diagnosis of congenital adrenal hyperplasia (21-hydroxylase deficiency) is most reliably established by measuring <strong>17-hydroxyprogesterone.</strong></li>\n<li>Measurements are taken before and 30 or 60 min after an intravenous bolus of 0.125-0.25 mg of cosyntropin (ACTH 1-24).</li>\n<li>Nomograms exist that readily distinguish normal and patients with non-classic and classic 21-hydroxylase deficiency.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Not a component of Hutchinson\u2019s triad in congenital syphilis",
    "choices": [
      {
        "id": 1,
        "text": "Hutchinson teeth"
      },
      {
        "id": 2,
        "text": "Interstitial keratitis"
      },
      {
        "id": 3,
        "text": "Sensorineural deafness"
      },
      {
        "id": 4,
        "text": "Conductive deafness"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Hutchinson&rsquo;s triad </strong>is a triad of stigmata seen characteristically in <strong>congenital syphilis</strong>.</p>\n<p>Components are:</p>\n<ul>\n<li>Hutchinson teeth</li>\n<li>Interstitial keratitis</li>\n<li><strong>Sensorineural deafness</strong> (NOT conductive deafness)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Lisch nodules is seen in:",
    "choices": [
      {
        "id": 1,
        "text": "Tuberous sclerosis"
      },
      {
        "id": 2,
        "text": "Sturge weber syndrome"
      },
      {
        "id": 3,
        "text": "Neurofibromatosis"
      },
      {
        "id": 4,
        "text": "Wilson disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Lisch nodules</strong>, are commonly seen in patients with <strong>neurofibromatosis (NF 1)</strong>. Lisch nodules represent melanocytic hamartomas of the iris.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2bda2551588f4b3c90df78738f49f106x800x533.JPEG"
    ]
  },
  {
    "text": "All are seen in Tetralogy of Fallots except:",
    "choices": [
      {
        "id": 1,
        "text": "VSD"
      },
      {
        "id": 2,
        "text": "RVH"
      },
      {
        "id": 3,
        "text": "ASD"
      },
      {
        "id": 4,
        "text": "PS"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>ASD is not seen in TOF</p>\n<ul>\n<li>TOF is the <strong>most common cyanotic congenital heart disease</strong></li>\n<li>The primary defect is an <strong>anterior deviation of the infundibular septum</strong> (the muscular septum that separates the aortic and pulmonary outflows).</li>\n<li>The primary defect gives rise to the 4 anatomical components of TOF which are:</li>\n<li><strong>Ventricular septal defect (VSD) ( NOT ASD)</strong></li>\n<li>Obstruction to right ventricular outflow - <strong>Pulmonic stenosis (PS)</strong></li>\n<li><strong>Right ventricular hypertrophy (RVH)</strong></li>\n<li><strong>Overriding (or dextroposition) of the aorta</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5f6d85a8332144b79a7c8793a7541328x475x322.JPEG"
    ]
  },
  {
    "text": "A male is said to have delayed puberty if it is not attained by:",
    "choices": [
      {
        "id": 1,
        "text": "12 years"
      },
      {
        "id": 2,
        "text": "14 years"
      },
      {
        "id": 3,
        "text": "16 years"
      },
      {
        "id": 4,
        "text": "18 years"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Lack of pubertal changes in boys by the <strong>age of 14 years</strong> is suggestive of delayed puberty.</li>\n<li>Delayed puberty is more common in boys than girls</li>\n<li><strong>Constitutional delay in growth and puberty is the commonest cause of delayed puberty in boys</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Parachute reflex disappear at:",
    "choices": [
      {
        "id": 1,
        "text": "3 months"
      },
      {
        "id": 2,
        "text": "6 months"
      },
      {
        "id": 3,
        "text": "9 months"
      },
      {
        "id": 4,
        "text": "Never"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>The&nbsp;Parachute reflex is a<strong> primitive reflex that occurs at 7-8 months of age </strong>and it is fully developed by 10-11 months of the postnatal period<strong>.</strong></li>\n<li>It can be evoked by holding the infant&rsquo;s trunk and then suddenly lowering the infant as if he or she were falling. The arms will spontaneously extend to break the infant&rsquo;s fall.</li>\n<li>This reflex is a<strong> prerequisite to walking.</strong></li>\n</ul>\n<p>Timing of selected primitive reflexes:</p>\n<table>\n<tbody>\n<tr>\n<td><strong>REFLEX </strong></td>\n<td><strong>ONSET </strong></td>\n<td><strong>FULLY DEVELOPED </strong></td>\n<td><strong>DURATION </strong></td>\n</tr>\n<tr>\n<td><strong>Palmar grasp </strong></td>\n<td>28 wk gestation</td>\n<td>32 wk gestation</td>\n<td>2-3 mo postnatal</td>\n</tr>\n<tr>\n<td><strong>Rooting </strong></td>\n<td>32 wk gestation</td>\n<td>36 wk gestation</td>\n<td>Less prominent after 1 mo postnatal</td>\n</tr>\n<tr>\n<td><strong>Moro </strong></td>\n<td>28-32 wk gestation</td>\n<td>37 wk gestation</td>\n<td>5-6 mo postnatal</td>\n</tr>\n<tr>\n<td><strong>Tonic neck </strong></td>\n<td>35 wk gestation</td>\n<td>1 mo postnatal</td>\n<td>6-7 mo postnatal</td>\n</tr>\n<tr>\n<td><strong>Parachute </strong></td>\n<td>7-8 mo postnatal</td>\n<td>10-11 mo postnatal</td>\n<td>Remains throughout life</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which stage of HIE are seizures common?",
    "choices": [
      {
        "id": 1,
        "text": "Stage 1"
      },
      {
        "id": 2,
        "text": "Stage 2"
      },
      {
        "id": 3,
        "text": "Stage 3"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Seizures</strong> are common in <strong>stage 2</strong> of hypoxic ischaemic encephalopathy:</p>\n<table>\n<tbody>\n<tr>\n<td><strong>&nbsp;</strong></td>\n<td><strong>Stage 1</strong></td>\n<td><strong>Stage 2</strong></td>\n<td><strong>Stage 3</strong></td>\n</tr>\n<tr>\n<td><strong>Seizures </strong></td>\n<td>None</td>\n<td>Common</td>\n<td>Decerebration</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Oculocutaneous tyrosinemia is caused by deficiency of",
    "choices": [
      {
        "id": 1,
        "text": "Tyrosine hydroxylase"
      },
      {
        "id": 2,
        "text": "Tyrosine aminotransferase"
      },
      {
        "id": 3,
        "text": "4-HPPD"
      },
      {
        "id": 4,
        "text": "Fumarylacetoacetate hydrolase"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Oculocutaneous tyrosinemia (Tyrosinemia type 2</strong>) is caused by deficiency of<strong> tyrosine aminotransferase.</strong></p>\n<table>\n<tbody>\n<tr>\n<td><strong>Disease</strong></td>\n<td><strong>Enzyme deficient</strong></td>\n</tr>\n<tr>\n<td>Tyrosinemia type 1 (Hepatorenal, hereditary tyrosinemia, Tyrosinosis)</td>\n<td>Fumarylacetoacetate hydrolase (FAAH)</td>\n</tr>\n<tr>\n<td><strong>Tyrosinemia type 2 (Oculocutaneous)</strong></td>\n<td><strong>Tyrosine aminotransferase</strong></td>\n</tr>\n<tr>\n<td>Tyrosinemia type 3</td>\n<td>4-Hydroxyphenylpyruvate dioxygenase [4-HPPD]</td>\n</tr>\n<tr>\n<td>Hawkinsinuria</td>\n<td>Missense mutations in the gene for 4-HPPD</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The deformity shown is seen in which one of the following conditions:",
    "choices": [
      {
        "id": 1,
        "text": "Scurvy"
      },
      {
        "id": 2,
        "text": "Rickets"
      },
      {
        "id": 3,
        "text": "Osteoporosis"
      },
      {
        "id": 4,
        "text": "Achondroplasia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>The condition shown above is <strong>Windswept deformity </strong>(combination of valgus deformity of 1 leg with Varus deformity of the other leg) which is seen in<strong> Rickets.</strong></li>\n<li>Rickets is a disease of growing bone that is caused by unmineralized matrix at the growth plates and occurs in children only before fusion of the epiphyses.</li>\n<li>Rickets is principally caused by vitamin D deficiency.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/aeea0087c5284de3b14c039eb78134c2.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which one of the following is the main factor for the ductal closure postnatally?",
    "choices": [
      {
        "id": 1,
        "text": "Increase in paO2"
      },
      {
        "id": 2,
        "text": "Functional"
      },
      {
        "id": 3,
        "text": "Reflex constriction"
      },
      {
        "id": 4,
        "text": "Decrease in pulmonary venous resistance"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Oxygen is the most important factor controlling ductal closure.</p>\n<p>After birth:</p>\n<ul>\n<li>The pulmonary vascular resistance decreases</li>\n<li>The aortic pressure increases due to increased venous return from the lungs.</li>\n<li>The blood flow through the ductus reverses</li>\n<li>Thus, in a full-term neonate, <strong>oxygen is the most important factor controlling ductal closure</strong>.</li>\n<li>When the Po2 of the blood passing through the ductus reaches about 50 mm Hg, the ductal wall begins to constrict.</li>\n<li>The <strong>effects of oxygen on ductal smooth muscle </strong>may be direct or mediated by its effects on prostaglandin synthesis.</li>\n<li>Gestational age also appears to play an important role; the <strong>ductus of a premature infant is less responsive to oxygen</strong>, even though its musculature is developed.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common cause of permanent congenital hypothyroidism is",
    "choices": [
      {
        "id": 1,
        "text": "Thyroiditis"
      },
      {
        "id": 2,
        "text": "Thyroid dysgenesis"
      },
      {
        "id": 3,
        "text": "Iodine deficiency"
      },
      {
        "id": 4,
        "text": "Maternal intake of anti-thyroid drugs"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Thyroid dysgenesis (<strong>aplasia, hypoplasia or an ectopic gland</strong>) is the most common cause of permanent congenital hypothyroidism, accounting for 80-85% of cases.</li>\n<li>Most common form of thyroid dysgenesis is an <strong>ectopic gland </strong>( 66% of cases )</li>\n<li>It has a 2:1: female: male ratio</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5 day old infant seen with this transient rash. These papular lesions on an erythematous base on microscopic examination will reveal:",
    "choices": [
      {
        "id": 1,
        "text": "Eosinophils"
      },
      {
        "id": 2,
        "text": "Neutrophils"
      },
      {
        "id": 3,
        "text": "Both a and b"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The picture shown above is that of <strong>Erythema toxicum</strong> which are <strong>eosinophil laden sterile lesions.</strong></p>\n<ul>\n<li>They are papular lesions on an erythematous base seen in many babies</li>\n<li>They are distributed over the trunk and face predominantly</li>\n<li>Seen 1-3 days after birth and may persist for 1 week</li>\n<li>They resolve spontaneously and do not require any treatment</li>\n</ul>\n<p>Neutrophils are seen in lesions of Pustular Melanosis which is another benign transient skin finding in newborns.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fd2a25972bb04a9b8b57350d69866ff1.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A child with CAH having cortisol deficiency is treated with glucocorticoids. How should the dose of glucocorticoids be altered during an inter-current infection?",
    "choices": [
      {
        "id": 1,
        "text": "Dose should remain unchanged"
      },
      {
        "id": 2,
        "text": "Dose should be tapered and stopped"
      },
      {
        "id": 3,
        "text": "Dose should be doubled or tripled"
      },
      {
        "id": 4,
        "text": "Glucocorticoids should be withdrawn until the infection resolves"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Cortisol deficiency in CAH is treated with <strong>glucocorticoids</strong>.</p>\n<p><strong>Double or triple doses are indicated during periods of stress</strong>, such as an infection or surgery. This is because, during periods of stress, the requirement for cortisol is higher.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true for Lennox-Gastaut syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Constitutes of a single seizure type"
      },
      {
        "id": 2,
        "text": "Good prognosis and adequate controlled epilepsy"
      },
      {
        "id": 3,
        "text": "No impaired cognitive function"
      },
      {
        "id": 4,
        "text": "EEG showing slow (<3Hz) spike and wave discharge"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Lennox\u2013Gastaut syndrome</strong>\u00a0is associated with 1-2 Hz spike and slow-wave discharges.</p>\n<ul>\n<li>Typically starts between the ages of 2 and 10 years</li>\n<li>Consists of a <strong>triad</strong> of developmental delay, multiple seizure types (that as a rule includes\u00a0<strong>atypical absence seizures,</strong> myoclonic, astatic, and tonic seizures) and specific EEG abnormalities.</li>\n<li>Most are left with <strong>long-term cognitive impairment</strong>\u00a0and intractable seizures despite multiple therapies.</li>\n<li>Lennox\u2013Gastaut syndrome has a\u00a0<strong>poor prognosis</strong></li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young boy presented with a history of a genetic disorder. On further enquiry, his father and grandmother had the same disease as well. Prior to his birth, the doctor had counseled the father that there is a 50% chance of passing the deleterious gene to his offspring irrespective of sex.  Which of the following diseases is an example of this inheritance pattern?",
    "choices": [
      {
        "id": 1,
        "text": "Albinism"
      },
      {
        "id": 2,
        "text": "Sickle cell anemia"
      },
      {
        "id": 3,
        "text": "Thalassemia"
      },
      {
        "id": 4,
        "text": "Tuberous sclerosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Autosomal dominance </strong>is the inheritance pattern seen in his question due to three-generation of affected family members with a 50% chance of passing the deleterious gene to the next generation irrespective of sex.&nbsp;<strong>Tuberous sclerosis</strong> is an example of an&nbsp;<strong>autosomal dominant</strong> (AD) disorder.</p>\n<p>Note:</p>\n<ul>\n<li>All Ehlers&ndash;Danlos syndrome types are autosomal dominant, except types V, VI, and VII.</li>\n<li>All types of osteogenesis imperfecta are autosomal dominant, except types II, III, and VII.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5-year-old boy presented with an abdominal mass. On examination, the mass is firm, smooth, non-tender, and does not cross the mid-line. The boy is also found to have moderate hypertension. Urinalysis reveals microscopic haematuria. Wilms tumor is suspected. This condition can be associated with all of the following except  ___________.",
    "choices": [
      {
        "id": 1,
        "text": "Aniridia"
      },
      {
        "id": 2,
        "text": "Beckwith syndrome"
      },
      {
        "id": 3,
        "text": "Polycystic kidney"
      },
      {
        "id": 4,
        "text": "Hemi-hypertrophy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Polycystic kidneys</strong> are not associated with <strong>Wilm's tumor.</strong></p>\n<p>Wilms tumor (WT), also known as <strong>nephroblastoma,</strong> is the most common <strong>primary malignant renal tumor</strong> of childhood.<strong>&nbsp;</strong></p>\n<p><strong>Polycystic kidney disease</strong> can also present with an abdominal <strong>mass, hypertension,</strong> and <strong>hematuria.</strong> However, there will be <strong>multiple irregular cysts</strong> on ultrasound and is not associated with Wilms tumor.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young girl was referred to the paediatrician with stage IV breast development and growth acceleration seen at the age of 5 years. Her estradiol concentrations were elevated. The sagittal MRI of the brain is as shown below. What is the treatment of choice for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Cyproterone"
      },
      {
        "id": 2,
        "text": "Danazol"
      },
      {
        "id": 3,
        "text": "Medroxyprogesterone"
      },
      {
        "id": 4,
        "text": "GnRH agonists"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p style=\"text-align: justify;\">A <strong>pedunculated mass in the floor of the 3rd ventricle</strong>&nbsp;as shown in the MRI, with elevated levels of estrogen is suggestive of a <strong>Hypothalamic Hamartoma,&nbsp;</strong>which is the most common brain lesion causing central precocious puberty and is treated with GnRH agonists.&nbsp;</p>\n<p style=\"text-align: justify;\">Treatment of Hypothalamic Hamartoma-</p>\n<ul style=\"text-align: justify;\">\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>GnRH agonists</strong> (depot-forms or implant) are the treatment of choice of tumour-induced Central precocious puberty&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">In patients with hypothalamic hamartoma and associated intractable <strong>gelastic or psychomotor seizures</strong>, stereotactic radiation therapy (<strong>Gamma Knife surgery</strong>) is more effective and has fewer risks than neurosurgical intervention.</li>\n</ul>\n<p style=\"text-align: justify;\"><br />Long-acting formulations of gonadotropin-releasing hormone (GnRH) agonists are the preparations of choice for the treatment of central precocious puberty as they maintain fairly constant serum concentrations of the drug for weeks or months.</p>\n<p style=\"text-align: justify;\">&nbsp;</p>\n<p style=\"text-align: justify;\">&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bf50df1b66e748b1823245b824f80ac7.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Blueberry muffin rash is seen in _____",
    "choices": [
      {
        "id": 1,
        "text": "Rubella"
      },
      {
        "id": 2,
        "text": "Measles"
      },
      {
        "id": 3,
        "text": "Mumps"
      },
      {
        "id": 4,
        "text": "Varicella"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Blueberry muffin rash</strong>&nbsp;refers to purple papulonodular lesions which represent <strong>dermal erythropoiesis</strong>. It is seen in the following:-</p>\n<ul>\n<li>Viral infections such as <strong>Rubella</strong>, CMV and parvovirus</li>\n<li>Neoplasms such as neuroblastoma and AML</li>\n<li>Rh haemolytic disease</li>\n<li>Langerhans cell histiocytosis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A girl is born at term after an uneventful pregnancy and delivery. On examination, she is noted to be hypotonic, has a protruding tongue, low set ears, an upward slant to the eyes with epicanthal folds, and a single palmar crease. On cardiac evaluation, what is the most common lesion expected in this syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Ventricular septal defect"
      },
      {
        "id": 2,
        "text": "Endocardial cushion defect"
      },
      {
        "id": 3,
        "text": "Tetralogy of Fallot"
      },
      {
        "id": 4,
        "text": "Coarctation of aorta"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The girl is suffering from\u00a0<strong>Down\u2019s syndrome</strong>\u00a0and the most common cardiovascular lesion is an\u00a0<strong>endocardial cushion defect</strong>.</p>\n<p>Other associated defects are atrial septum defects (ASD), ventricular septum defect (VSD), patent ductus arteriosus (PDA), aberrant subclavian artery, and pulmonary hypertension.</p>\n<p>\u00a0Clinical features: (Mnemonic:\u00a0<strong>I C A PROBLEM S</strong>omewhere)</p>\n<ul>\n<li><strong>I</strong>ntellectual disability/<strong>Incurved or short fifth finger with clinodactyly</strong></li>\n<li><strong>C</strong>ongenital heart disease</li>\n<li><strong>Acute megakaryoblastic leukaemia</strong>/<strong>Alzheimer's disease</strong>/Atlantoaxial instability/Atresia of the duodenum</li>\n<li><strong>P</strong>rotruding tongue</li>\n<li><strong>R</strong>ound face</li>\n<li><strong>O</strong>cciput flat/Open wide fontanelle/Open mouth</li>\n<li><strong>Brachycephalic/Brushfield's spots</strong></li>\n<li><strong>L</strong>ow (depressed) nasal bridge</li>\n<li><strong>Epicanthal fold/Ears low set and dysplastic</strong></li>\n<li><strong>M</strong>ongoloid slant (oblique palpebral fissure)</li>\n<li><strong>S</strong>imian palmar crease and <strong>wider gap between first and second toes</strong></li>\n</ul>\n<p><strong>Note</strong>:</p>\n<ul>\n<li>The most common cause of <strong>intestinal obstruction</strong> in Down syndrome is <strong>duodenal atresia\u00a0</strong>(double-bubble sign).</li>\n<li>Children with Down's syndrome have an increased risk of developing leukaemias, including acute lymphoblastic leukaemia (ALL) and acute myeloid leukaemia (AML).<sup>\u00a0</sup></li>\n<li><strong>AML</strong> is more common during the<strong> first 3 years of life.</strong></li>\n<li><strong>The most common AML</strong> associated with Down Syndrome is <strong>acute megakaryoblastic leukemia.</strong><strong><br /></strong></li>\n<li>The most common haematological manifestation in Downs syndrome is<strong>\u00a0transient abnormal myelopoiesis\u00a0(TAM)</strong>.</li>\n<li><strong>Brushfield's spots </strong>are whitish speckling on iris seen in light-skinned people.</li>\n</ul>\n<p><strong>Image</strong>: A child having features of Down\u2019s syndrome</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6bf6d5afd6df4bdb911a7b32257291bcx1280x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fa7d3a4f2d96443e857180a583ea9529x446x255.JPEG"
    ]
  },
  {
    "text": "An 18-month-old child presents to the pediatric OPD with complaints of fever and rashes for the past 1 week after extensive workup gets diagnosed as Juvenile chronic myeloid leukemia. Which of the following findings is not consistent with this baby\u2019s diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "The genetic study may reveal NF-1 mutation"
      },
      {
        "id": 2,
        "text": "The presence of Philadelphia chromosome on FISH"
      },
      {
        "id": 3,
        "text": "The bone marrow shows a myelodysplastic pattern with <20% blasts."
      },
      {
        "id": 4,
        "text": "The peripheral smear reveals nucleated RBCs"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Patients with juvenile myelomonocytic leukemia do not have the Philadelphia chromosome.</p>\n<p>Formerly termed <strong>juvenile chronic myeloid leukemia (CML)</strong>, it is a clonal proliferation of hematopoietic stem cells that typically affects <strong>children younger than 2 years </strong>of age. Patients with JMML present with rashes, lymphadenopathy, splenomegaly, and hemorrhagic manifestations.</p>\n<p>Patients with this disease <strong>do not have the Philadelphia chromosome</strong> (the Philadelphia chromosome is characteristic of CML). The peripheral blood smear shows an elevated leukocyte count with increased monocytes, thrombocytopenia, and anemia with the <strong>presence of erythroblasts</strong>. Bone marrow shows a myelodysplastic pattern, with blasts accounting for &lt;20% of cells. Patients with <strong>neurofibromatosis type 1 </strong>and <strong>Noonan syndrome</strong> have a predilection for this type of leukemia.</p>\n<p>JMML in the <strong>setting of Noonan syndrome</strong> is unique, with most patients having a <strong>spontaneous resolution.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Marked accumulation of cholesterol and lipids in the adrenal cortex and gonads associated with severe impairment of all steroidogenesis is seen in",
    "choices": [
      {
        "id": 1,
        "text": "21-hydroxylase deficiency"
      },
      {
        "id": 2,
        "text": "Mutations in gene for StAR"
      },
      {
        "id": 3,
        "text": "Glucocorticoid-suppressible hyperaldosteronism"
      },
      {
        "id": 4,
        "text": "11\u03b2-Hydroxylase deficiency"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Lipoid adrenal hyperplasia</strong> is usually caused by mutations in the gene for steroidogenic acute regulatory protein (<strong>StAR)</strong>, a mitochondrial protein.</li>\n<li>Patients with this disorder exhibit marked accumulation of cholesterol and lipids in the adrenal cortex and gonads, associated with <strong>severe impairment of ALL steroidogenesis.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "During a telemedicine consultation, you come across a case of a 9-year-old child with a previously diagnosed autosomal dominant neurocutaneous syndrome known as tuberous sclerosis. Which one of the following is not seen in it?",
    "choices": [
      {
        "id": 1,
        "text": "Astrocytoma"
      },
      {
        "id": 2,
        "text": "Ependymoma"
      },
      {
        "id": 3,
        "text": "White matter lesions"
      },
      {
        "id": 4,
        "text": "Renal angiomyolipoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Ependymomas</strong> are not seen in tuberous sclerosis.&nbsp;<strong>Neurocutaneous syndromes </strong>like tuberous sclerosis&nbsp;are a group of disorders with abnormalities in both the integumentary system and the CNS (defect of primitive ectoderm). They include the following:</p>\n<ul>\n<li>Neurofibromatosis</li>\n<li>Tuberous sclerosis</li>\n<li>Sturge&ndash;Weber syndrome</li>\n<li>von Hippel&ndash;Lindau disease</li>\n<li>Ataxia telangiectasia</li>\n</ul>\n<p>Tuberous sclerosis is caused due to mutation of genes coding for <strong>hamartin (chromosome 9)</strong> and <strong>tuberin (chromosome 16)</strong>, which leads to the formation of hamartomas.</p>\n<p><strong>Clinical features:</strong></p>\n<ul>\n<li>CNS\n<ul>\n<li>CNS involvement is the hallmark of tuberous sclerosis.</li>\n<li>Glioneuronal hamartomas (cortical tubers).</li>\n<li><strong>Subependymal nodules</strong>&nbsp;are lesions found along the wall of the lateral ventricles, where they undergo calcification.</li>\n<li><strong>Subependymal giant cell astrocytomas</strong> (<strong>SEGA</strong>s) are the characteristic brain tumours. These benign, slow-growing tumours arise in the periventricular area.</li>\n<li><strong>White matter lesions</strong>&nbsp;are common and include nodules, cysts, and areas of gliosis and hypomyelination.</li>\n</ul>\n</li>\n<li>Skin\n<ul>\n<li>Facial angiofibroma (adenoma sebaceum)</li>\n<li><strong>Periungual fibroma</strong></li>\n<li>Shagreen patch</li>\n<li>Confetti skin lesions</li>\n</ul>\n</li>\n<li>Others\n<ul>\n<li><strong>Renal angiomyolipoma</strong></li>\n<li>Cardiac rhabdomyoma</li>\n</ul>\n</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 16-year-old boy presented with dark coloured urine. Urinalysis was notable for macroscopic hematuria and heavy proteinuria. His father is a known case of Alport syndrome. What defect is responsible for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Fibrillin"
      },
      {
        "id": 2,
        "text": "Type IV collagen"
      },
      {
        "id": 3,
        "text": "Amyloid"
      },
      {
        "id": 4,
        "text": "Tau"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A <strong>defect in type IV collagen</strong>, a major component of the basement membrane, is responsible for <strong>Alport syndrome.</strong></p>\n<p>Alport syndrome&nbsp;is a genetically heterogeneous disease, <strong>85% is X-linked</strong> and the rest may be autosomal recessive or autosomal dominant.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A preterm, extremely low birth weight baby, delivered by emergency caesarian section was admitted to the NICU and treated for respiratory distress syndrome. She responded to treatment and was discharged. At 6 months of age, she is still having recurrent respiratory distress and requires supplemental oxygen at home. The baby was diagnosed with bronchopulmonary dysplasia. Which of the following does not cause this clinical complication?",
    "choices": [
      {
        "id": 1,
        "text": "Oxygen therapy in the NICU"
      },
      {
        "id": 2,
        "text": "Mechanical trauma to the lungs"
      },
      {
        "id": 3,
        "text": "Inhalation of nitrous oxide"
      },
      {
        "id": 4,
        "text": "Patent Ductus Arteriosus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Inhalation of nitrous oxide (N2O)&nbsp;</strong>is <strong>not associated</strong> with bronchopulmonary dysplasia (BPD). Inhaled NO is a pulmonary vasodilator approved for the treatment of hypoxic respiratory failure in term and near-term infants with pulmonary hypertension. It may have a role in preventing BPD.</p>\n<p>BPD is a pathologic process leading to clinical features of chronic lung disease that originates in the neonatal period and is defined by an oxygen requirement for 28 days postnatally. Inflammatory injury to the developing lungs due to&nbsp;<strong>barotrauma</strong> and <strong>oxygen toxicity </strong>resulting&nbsp;from<strong> prolonged mechanical ventilation </strong>is the key factor driving the pathogenesis of BPD. Together with other antenatal and postnatal factors, it results in aberrant tissue repair, dysregulated vascular and arrested alveolar development, which is the basis of the pathology seen in BPD.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e9363aa9487641e1a00373c13bfe65a3x1280x1784.5980253878702.JPEG"
    ]
  }
];
        let quizName = 'Pediatrics St 1';
        const quizFilename = 'pediatrics-st-1-802f5c14.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>