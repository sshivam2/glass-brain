<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>064 Microbiology Aiims 2020 (May And Nov Ini-Cet) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Microbiology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">37</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A resident had a needle stick injury while dealing with a Hepatitis B positive patient. Serology was done and  HBsAg was negative and the Anti-HBs was >105 mIU/ml. What is the next step of management?",
    "choices": [
      {
        "id": 1,
        "text": "Booster dose of vaccine"
      },
      {
        "id": 2,
        "text": "Immunoglobulin with full vaccination"
      },
      {
        "id": 3,
        "text": "Repeat full course of vaccine"
      },
      {
        "id": 4,
        "text": "No treatment required  as he already has Hep B antibody titres from vaccination"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario of needle-stick injury shows that HBsAg is negative and the anti-HBs is &gt;105 mIU/ml. This suggests that the resident has had routine vaccination for Hep B infection. Since the antibody titers are <strong>more than 10 mIU/ml</strong>, no treatment is required.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The life cycle of an organism is given below. Identify the vector involved.",
    "choices": [
      {
        "id": 1,
        "text": "Hard tick"
      },
      {
        "id": 2,
        "text": "Soft tick"
      },
      {
        "id": 3,
        "text": "Trombiculid mite"
      },
      {
        "id": 4,
        "text": "Louse"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given life cycle is of trombiculid mite which acts as a vector for scrub typhus.&nbsp;Humans are seen to be infected when they are bitten by the mite larvae (chiggers).&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/61ac0c154e914348823174a08e684029.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f93002cb68d049b69cd27402f33161ddx1280x2163.JPEG"
    ]
  },
  {
    "text": "What is the causative organism for the condition shown in the image below?",
    "choices": [
      {
        "id": 1,
        "text": "Echinococcus granulosus"
      },
      {
        "id": 2,
        "text": "Schistoma japonicum"
      },
      {
        "id": 3,
        "text": "Trypanosoma cruzi"
      },
      {
        "id": 4,
        "text": "Schistosoma mansoni"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows a <strong>hydatid cyst</strong> in the liver. It is caused by <strong>Echinococcus granulosus</strong>.</p>\n<p>Echinococcus granulosus is the most common causative agent in hydatid cysts, while&nbsp;Echinococcus multilocularis and Echinococcus ligartus account for a small number of cases.</p>\n<p><strong>Dogs</strong> are the <strong>definitive hosts</strong> of E. granulosus.&nbsp;<strong>Sheep</strong> are the usual <strong>intermediate hosts</strong>, but <strong>humans are accidental intermediate hosts</strong>. Humans are end-stage hosts of the parasite since there is no human to human transmission.</p>\n<p>Approximately 75% of hydatid cysts are located in the right lobe of the liver and are solitary. The clinical presentation of a hydatid cyst is largely asymptomatic until complications occur. The most common presenting symp&shy;toms are abdominal pain, dyspepsia, and vomiting. The most frequent sign is hepatomegaly.</p>\n<p>The life cycle of Echinococcus is depicted in the image below:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/26261b14c17946af8698abbf4be94fbc.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e2bc2112285e4302b4f40aa4c83269b9x512x400.PNG"
    ]
  },
  {
    "text": "The presence of antibodies against SARS CoV 2 in the blood likely indicates",
    "choices": [
      {
        "id": 1,
        "text": "Previous infection even if patient has been asymptomatic"
      },
      {
        "id": 2,
        "text": "Presence of acute viral load"
      },
      {
        "id": 3,
        "text": "A high risk of reinfection"
      },
      {
        "id": 4,
        "text": "That the patient is in window period"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The presence of antibodies against SARS CoV 2 in the blood likely indicates a previous infection even if the patient has been asymptomatic.</p>\n<p>Antibodies most commonly become detectable 1&ndash;3 weeks after symptom onset, at which time evidence suggests that infectiousness likely is greatly decreased and that some degree of immunity from future infection has developed. But it is imperative to note that the information on SARS CoV 2 is still emerging.&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the enzyme conjugate in the given ELISA technique?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The enzyme conjugate in the given ELISA technique is '<strong>B</strong>'.&nbsp;</p>\n<p>Other options:</p>\n<p>A- Substrate - it will be cleaved by the enzyme present on the conjugate antibody.</p>\n<p>B - Conjugate - it is an antibody that binds to the detection antibody. It is labeled with an enzyme that cleaves the substrate to form a color product/dye.</p>\n<p>C - Detection antibody-binds the antigen. We direct our conjugate against this.</p>\n<p>D - Capture Antibody-forms the base, on which antigen (say rotavirus from feces) from the patient sample binds.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d66d0147c39d4167bd2f1bd64e7a939e.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient who underwent a renal transplant 3 months ago comes with complaints of diarrhea for the last 9 days. The stool sample was subject to Kinyoun stain revealing 4-6\u00b5m  structures shown below. Which of the following is true about the organism?",
    "choices": [
      {
        "id": 1,
        "text": "Pathogen does not shows autoinfection"
      },
      {
        "id": 2,
        "text": "Cryptosporidium parvum is the most common organism implicated worldwide"
      },
      {
        "id": 3,
        "text": "Oocysts are immediately infective after being excreted in stool"
      },
      {
        "id": 4,
        "text": "It is an obligate intracellular organism"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Oocysts are <strong>immediately infective after being excreted</strong> in the stool.&nbsp;</p>\n<p>Cryptosporidium is a coccidian parasite and implicated in causing<strong> traveler's diarrhea in immunocompromised patients</strong>. The two cryptosporidium species responsible are <strong>C.hominis and C.parvum</strong>. As the patient has undergone a renal transplant, he/she would most likely be on immunosuppressive medications, making the infection likely.&nbsp;<strong>Cryptosporidium hominis is the most common organism implicated worldwide</strong></p>\n<p>The <strong>infective form is oocysts,</strong> excreted in the affected patient's feces, acquired through drinking or recreational water. The oocysts are immediately infectious (unlike Isospora oocysts, which require maturation), and may cause autoinfection or implicated in person to person transmission. Because of its small size (4-5micron), it is difficult to see in routine staining, hence is subjected to acid-fast/kinyoun's stain.&nbsp;</p>\n<p>Once ingested, the 4 sporozoites come out of the cyst and attach to the small intestinal mucosa. It causes crampy abdominal pain and non-inflammatory watery diarrhea.</p>\n<p>Treatment is mainly supportive, though nitazoxanide has been FDA approved for use in cryptosporidium.</p>\n<p>Comparative features of coccidian parasites:</p>\n<table style=\"height: 562px;\" border=\"1\" width=\"236\">\n<tbody>\n<tr>\n<td style=\"width: 81px;\">Property</td>\n<td style=\"width: 122px;\">&nbsp;Cryptosporidium</td>\n<td style=\"width: 94px;\">Cyclospora</td>\n<td style=\"width: 98px;\">Cystoisospora</td>\n</tr>\n<tr>\n<td style=\"width: 81px;\">Sporulated oocyst</td>\n<td style=\"width: 122px;\">4-6 &mu;m,&nbsp;round,&nbsp; contains four sporozoites</td>\n<td style=\"width: 94px;\">8-12 &mu;m,&nbsp;round, contains 2 sporocysts each having two sporozoites</td>\n<td style=\"width: 98px;\">23-36 &mu;m, oval, contain two sporocysts, each having four sporozoites.</td>\n</tr>\n<tr>\n<td style=\"width: 81px;\">Acid-fast detection&nbsp;</td>\n<td style=\"width: 122px;\">Uniformly acid-fast</td>\n<td style=\"width: 94px;\">Variable acid-fast</td>\n<td style=\"width: 98px;\">Uniformly acid-fast</td>\n</tr>\n<tr>\n<td style=\"width: 81px;\">Sporulation of the oocyst</td>\n<td style=\"width: 122px;\">Occurs inside the host cell</td>\n<td style=\"width: 94px;\">Occurs in soil</td>\n<td style=\"width: 98px;\">Occurs in soil</td>\n</tr>\n<tr>\n<td style=\"width: 81px;\">Diagnostic form</td>\n<td style=\"width: 122px;\">Sporulated cyst</td>\n<td style=\"width: 94px;\">Unsporulated cyst</td>\n<td style=\"width: 98px;\">Unsporulated oocyst</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/19651666499a4479b893e5dd1fd30e57.JPG"
    ],
    "explanation_images": []
  },
  {
    "text": "GeneXpert detects mutations in which of the following genes?",
    "choices": [
      {
        "id": 1,
        "text": "inhA"
      },
      {
        "id": 2,
        "text": "rpoB"
      },
      {
        "id": 3,
        "text": "KatG"
      },
      {
        "id": 4,
        "text": "pncA"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Gene Xpert</strong>&nbsp;identifies mutations in the&nbsp;<strong>rpoB</strong> gene to <strong>detect rifampicin resistance&nbsp;</strong>(RR).</p>\n<p>Other options:</p>\n<p>inhA and KatG- involved in resistance against isoniazid</p>\n<p>pncA-&nbsp;involved in resistance against pyrazinamide</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A stool sample is collected. The specimen is processed for examination and is labeled at different levels as A, B, C, and D. Identify the level at which parasitic ova will be seen when viewed under a microscope.",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The parasitic ova will be seen in a specimen taken from <strong>level D.</strong></p>\n<p>The image shows a <strong>formol-ether sedimentation technique&nbsp;</strong>to concentrate the ova in the bottom (D) part of the tube. It is used for samples in which the concentration of parasitic ova is scanty. It is useful for all helminth ova/eggs and parasitic cysts. The ether adsorbs the fecal debris and floats. Formalin fixes and preserves the specimen.</p>\n<p>This&nbsp;method is useful for all helminth eggs and protozoan cysts.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/30e9e03c2026400fb8bdba9cdaf54eb6.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/25e07a845e4f478cbc40f6dca7bce8bdx1280x1753.PNG"
    ]
  },
  {
    "text": "Type IV hypersensitivity is due to?",
    "choices": [
      {
        "id": 1,
        "text": "Cell mediated response"
      },
      {
        "id": 2,
        "text": "Cell mediated and antibody mediated response"
      },
      {
        "id": 3,
        "text": "Antibody mediated response"
      },
      {
        "id": 4,
        "text": "Innate response"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Type IV hypersensitivity</strong>&nbsp;is due to the&nbsp;<strong>c</strong><strong>ell-mediated response.</strong></p>\n<p><strong>Type IV or cell-mediated hypersensitivity reaction</strong>: These reactions are induced by sensitized T cells which on contact with the specific antigen releases cytokines that produce biological effects on leucocytes, macrophages, and tissue cells.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child was brought to the OPD with a swollen, red knee joint that is tender to touch. 2 weeks prior, he had an episode of fever with bloody diarrhea.  Which of the following could be the possible organism?",
    "choices": [
      {
        "id": 1,
        "text": "E. coli"
      },
      {
        "id": 2,
        "text": "Shigella"
      },
      {
        "id": 3,
        "text": "Giardia"
      },
      {
        "id": 4,
        "text": "Rotavirus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario points towards a diagnosis of <strong>reactive arthritis </strong>after<strong> shigella infection</strong>.</p>\n<p>Shigellosis is a spectrum of symptoms caused by shigella consisting of 4 phases:</p>\n<table style=\"width: 169px; height: 461px;\">\n<tbody>\n<tr style=\"height: 33px;\">\n<td style=\"width: 89px; height: 33px;\">Incubation period</td>\n<td style=\"width: 98px; height: 33px;\">1-4 days (up to 8 days)</td>\n</tr>\n<tr style=\"height: 35px;\">\n<td style=\"width: 89px; height: 35px;\">Watery diarrhea</td>\n<td style=\"width: 98px; height: 35px;\">Fever, watery diarrhea, anorexia</td>\n</tr>\n<tr style=\"height: 32px;\">\n<td style=\"width: 89px; height: 32px;\">Dysentry</td>\n<td style=\"width: 98px; height: 32px;\">Bloody mucopurulent stools&nbsp;</td>\n</tr>\n<tr style=\"height: 102px;\">\n<td style=\"width: 89px; height: 102px;\">Post-infectious complication</td>\n<td style=\"width: 98px; height: 102px;\">\n<ul>\n<li>Hemolytic-uremic syndrome</li>\n<li>Reactive arthritis</li>\n<li>Toxic megacolon</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Other options:</p>\n<p>E.coli - it may cause diarrhea associated with fever or blood in stools, but reactive arthritis is not typically seen.</p>\n<p>Giardia - it may cause persistent watery diarrhea with waxing and waning course. Fever, blood in stools should prompt alternate diagnosis. Also, reactive arthritis is not seen.</p>\n<p>Rotavirus - it is a well known viral cause of fever with diarrhea in children. But not known to have reactive arthritis as a sequela.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Specimen handling for molecular testing of SARS CoV 2 would require",
    "choices": [
      {
        "id": 1,
        "text": "BSL1"
      },
      {
        "id": 2,
        "text": "BSL2"
      },
      {
        "id": 3,
        "text": "BSL3"
      },
      {
        "id": 4,
        "text": "BSL4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Specimen handling for <strong>molecular testing of SARS CoV 2</strong> would require <strong>BSL-2</strong> or equivalent facilities. Attempts to <strong>culture</strong> the virus requires minimum&nbsp;<strong>BSL-3</strong> facilities.</p>\n<p>SARS CoV 2&nbsp;virus can cause coronavirus disease 2019 (COVID-19)</p>\n<p>Microbiology and pathology laboratories performing diagnostic tests on a stool or respiratory specimen should handle potential SARS-CoV specimens using standard biosafety level (BSL)-2.</p>\n<p><strong>Note: Biosafety levels&nbsp;</strong>include a&nbsp;specific combination of work practices, safety equipment, and facilities that are designed to minimize the exposure of workers and the environment to infectious agents. There are <strong>four biosafety</strong> levels.</p>\n<p>&nbsp;</p>\n<p><strong>BSL-1</strong>: Work can be done on an open bench or table and PPE needed. Eg: <strong>Non-pathogenic E.coli</strong>.</p>\n<p><strong>BSL-2:</strong> Work to be done in the biosafety cabinet with PPE. Eg: <strong>Staphylococcus aureus</strong>.</p>\n<p><strong>BSL-3</strong> laboratory has appropriate <strong>PPE and respirators</strong> might be required. All work performed within <strong>BSC(biosafety cabinet</strong>). Entrance is through 2 sets of <strong>self-closing and locking doors</strong>. Eg: when dealing with <strong>Mycobacterium tuberculosis.</strong></p>\n<p><strong>BSL-4:</strong> This is the highest level of biological safety, where containment of microbes is done, which are fatal without treatment and vaccines. Eg: <strong>Ebola and Marburg viruses.</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following method is employed to measure the viral load?",
    "choices": [
      {
        "id": 1,
        "text": "ELISA"
      },
      {
        "id": 2,
        "text": "Western blot"
      },
      {
        "id": 3,
        "text": "Real time PCR"
      },
      {
        "id": 4,
        "text": "Immunoelectrophoresis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Viral load can be measured by the&nbsp;<strong>r</strong><strong>eal time-PCR</strong> technique.</p>\n<p>Real time-PCR&nbsp;assays are commonly used for viral load quantification of HIV, hepatitis C virus, hepatitis B virus, and CMV.</p>\n<p>Other options:</p>\n<ul>\n<li><strong>Western</strong>&nbsp;<strong>blotting</strong>&nbsp;is used for the detection of protein.</li>\n<li><strong>ELISA</strong> is an immunosorbent assay used&nbsp;to detect antigens of infectious agents present in clinical specimens.</li>\n<li class=\"p1\"><strong>Immuno electrophoresis</strong> includes electrophoretic separation of antigens followed by an antigen-antibody reaction.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following is true regarding scrub typhus except:",
    "choices": [
      {
        "id": 1,
        "text": "Transmitted by chiggers"
      },
      {
        "id": 2,
        "text": "Lymphadenopathy is a feature"
      },
      {
        "id": 3,
        "text": "Produces NLF producing colonies in MacConkey agar"
      },
      {
        "id": 4,
        "text": "Man is an accidental host"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The organism causing <strong>scrub typhus</strong> i.e<strong> Orientia\u00a0tsutsugamushi\u00a0</strong>is non-cultivable on cell-free media like MacConkey agar.</p>\n<p><strong>Scrub Typhus </strong>is also known as chigger borne typhus. The vector is trombiculid mite. Humans are infected when\u00a0they are bitten\u00a0by the mite larvae known as\u00a0<strong>chiggers.</strong></p>\n<p>The incubation period is 1- 3 weeks. The patient typically\u00a0develops a characteristic eschar at the site of the\u00a0mite bite, with <strong>regional lymphadenopathy</strong> and maculopapular\u00a0rash.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "False about the Ebola virus is:",
    "choices": [
      {
        "id": 1,
        "text": "It is a filovirus"
      },
      {
        "id": 2,
        "text": "Transmitted by mosquito"
      },
      {
        "id": 3,
        "text": "Bats acts as reservoir"
      },
      {
        "id": 4,
        "text": "Nosocomial transmission seen"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Ebola virus</strong> is <strong>not transmitted by mosquito.</strong></p>\n<p><strong>Ebola virus&nbsp;</strong>is the cause of an emerging disease called Ebola virus disease and is widespread in Africa. It belongs to the&nbsp;<strong>Filoviridae</strong>&nbsp;family.</p>\n<p>Fruit bats&nbsp;act as reservoir hosts of the virus and it is transmitted to humans only accidentally.&nbsp;<strong>Human to human transmission</strong>&nbsp;is through direct contact with blood or body fluids of an infected symptomatic person.</p>\n<p>The incubation period of the disease is&nbsp;<strong>2 to 21</strong>&nbsp;days. Symptoms include&nbsp;<strong>fever, intense weakness, vomiting, diarrhea, rashes,</strong>&nbsp;and, in extreme cases, internal and external&nbsp;<strong>bleeding</strong>. The current treatment&nbsp;is mainly supportive.&nbsp;Nosocomial transmission seen.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the condenser _____",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "C"
      },
      {
        "id": 3,
        "text": "B"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Condensor lens of microscope is marked as B in the image. The purpose of the condenser lens is to focus the light onto the specimen.</p>\n<p>A is coarse focusing knob.</p>\n<p>C is objective lens. There are usually 3 or 4 objective lenses on a microscope. They almost always consist of 4X, 10X, 40X and 100X powers.</p>\n<p>D is Illuminator. It is a steady light source used in place of a mirror.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/eeabe8ee999e49a987073b8a5a0c06f6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4ddb6c1f4a5f411cbfce1c134c5babb6x274x235.JPEG"
    ]
  },
  {
    "text": "A young male presents to the STD clinic with painful lesions as shown in the image. What is the most likely microscopic finding of the lesion?",
    "choices": [
      {
        "id": 1,
        "text": "Tzank cells"
      },
      {
        "id": 2,
        "text": "Pund cells"
      },
      {
        "id": 3,
        "text": "Henderson-Patterson bodies"
      },
      {
        "id": 4,
        "text": "Guarnieri bodies"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Clusters</strong> of <strong>vesicles</strong> are seen on an <strong>erythematous base</strong> in the image, suggesting a diagnosis of <strong>genital herpes.\u00a0</strong><strong>Tzanck cells</strong> or multinucleated giant cells are present on microscopy.</p>\n<p>The Tzanck smear is a rapid, sensitive, and inexpensive diagnostic method for herpes simplex infections. Smears are prepared from the lesions, from the <strong>base</strong> of vesicles and stained with a 1% aqueous solution of<strong>\u00a0O-toluidine blue </strong>for 15 seconds. <strong>Multinucleated giant cells</strong> with <strong>faceted nuclei</strong> and homogeneously stained<strong> ground glass chromatin</strong> (Tzanck cells) are seen.</p>\n<p>Mucocutaneous herpetic lesions are <strong>thin-walled, umbilicated vesicles</strong>, the roof of which breaks down, leaving tiny superficial <strong>ulcers </strong>which heal <strong>without scarring. </strong>\u00a0Painful and pruritic lymphadenopathy may be seen. The most common site of cutaneous lesions is the face - on the cheeks, chin, around the mouth, or on the forehead - and is caused by <strong>herpes simplex virus-1</strong>. Genital infections are more commonly caused by <strong>herpes simplex virus-2</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/49a4c88ed515471590b7045acf046d9b.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/98e87950f6db446582d5731227815c88x510x460.GIF"
    ]
  },
  {
    "text": "A patient has complains of fever with chills. A throat examination reveals swollen glands and a thick, whitish membrane over his tonsils. Albert staining is to be done. What are the constituents of Albert's stain?",
    "choices": [
      {
        "id": 1,
        "text": "Toluidine blue 'O' and malachite green"
      },
      {
        "id": 2,
        "text": "Carbol fuschin and methylene blue"
      },
      {
        "id": 3,
        "text": "Carbol fuschin and malachite green"
      },
      {
        "id": 4,
        "text": "Toluidine and methylene blue"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Albert's stain contains<strong> toluidine blue 'O' and malachite green</strong> which have an affinity for acidic cytoplasm, both being basic dyes.</p>\n<p><strong>Albert&rsquo;s stain, Neisser&rsquo;s and Ponder&rsquo;s stain</strong>&nbsp;are used to demonstrate the metachromatic granules (Volutin / Babes Ernst Granules) of&nbsp;<strong>Corynebacterium diphtheria.</strong></p>\n<p><strong>&nbsp;Procedure for Albert's staining:</strong></p>\n<ul>\n<li>A heavy smear of bacterial isolate was prepared on glass slide and allowed to dry without fixing.</li>\n<li>Albert&rsquo;s stain was applied for (3-4) minutes then it was washed with water and Albert&rsquo;s iodine was applied for one minute.</li>\n<li>Wash with water and let dry with blotting paper.</li>\n<li>Examine the slide under oil immersion, it was examined under microsope showed bacili with numerous metachromatic granules.</li>\n</ul>\n<p><strong>Results:</strong></p>\n<p>Metachromatic granules: <strong>Bluish- black</strong></p>\n<p>Bacillary body or protoplasm:<strong> Green</strong></p>\n<p><strong> Uses:</strong>&nbsp;</p>\n<ul>\n<li>Albert staining is useful in the demonstration of metachromatic granules.</li>\n<li>Presence of metachromatic granules helps to distinguish C.diphtheriae from diphtheriods which lack them.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Pneumonia due to a gram-negative pleomorphic bacillus growing on chocolate agar which is catalase and oxidase-positive is:",
    "choices": [
      {
        "id": 1,
        "text": "E.coli"
      },
      {
        "id": 2,
        "text": "Pseudomonas"
      },
      {
        "id": 3,
        "text": "Haemophilus influenzae"
      },
      {
        "id": 4,
        "text": "Actinomyces"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Pneumonia due to a <strong>gram-negative pleomorphic bacillus</strong> growing on <strong>chocolate agar</strong> which is <strong>catalase </strong>and<strong> oxidase-positive</strong> is most likely&nbsp;<em><strong>Haemophilus influenza.</strong></em></p>\n<p>Haemophilus pneumonia typically <strong>occurs in infants</strong> and is accompanied by <strong>empyema</strong> and sometimes <strong>meningitis</strong> as well. In older children and adults, the picture is of <strong>lobar pneumonia</strong>.&nbsp;Sputum is collected for the detection and isolation of Hemophilus. As the bacillus is very sensitive to low temperatures, specimens should never be refrigerated before inoculation. <em>H.infiuenzae</em> is a Gram-negative, <strong>non-motile, non-sporing</strong> bacillus, exhibiting considerable pleomorphism. In sputum, it usually occurs as clusters of coccobacillary forms.</p>\n<p>The bacillus has<strong> fastidious</strong> <strong>growth requirements</strong>. The accessory growth factors, named<strong> X and V</strong>, present in the blood are essential for growth.&nbsp;Catalase and<br />oxidase reactions are positive. Nitrates are reduced to nitrites.<strong> Biotyping</strong> has been done on the basis of <strong>indole production</strong>.</p>\n<p><strong>Cultures</strong> may be preserved for about a month on <strong>chocolate agar</strong> slopes. Chocolate agar is made by heating blood agar to 80-90&deg;C for 15-20 minutes. This causes the <strong>release of V factor</strong> from within the erythrocytes.</p>\n<p>Treatment- <strong>Amoxycillin-clavulanate </strong>or<strong> clarithromycin</strong> is more effective in <strong>treating</strong> respiratory infections by <strong><em>Haemophilus influenzae</em>.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old male presented to the OPD with painful genital ulcers. Which of the following can cause a painful ulcer on the glans penis?",
    "choices": [
      {
        "id": 1,
        "text": "Syphilis"
      },
      {
        "id": 2,
        "text": "Chlamydia"
      },
      {
        "id": 3,
        "text": "Chancroid"
      },
      {
        "id": 4,
        "text": "Lymphogranuloma venereum"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Painful genital ulcers</strong>&nbsp;are caused by&nbsp;<em><strong>Haemophilus ducreyi,&nbsp;</strong></em>and are known as <strong>chancroid.</strong></p>\n<p>The regional lymph nodes are enlarged and painful. Microscopic appearance seen in <em>H. ducreyi</em> is called the<strong> school of fish appearance</strong> or<strong> railroad appearance. </strong>Chocolate agar with isovitaleX is a suitable culture medium for&nbsp;<em>Haemophilus ducreyi.</em></p>\n<p>The given image shows the microscopic appearance of <em>H. ducreyi</em>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ff3f9c5ab3b844eca341bdbc09fd4bc8x720x705.JPEG"
    ]
  },
  {
    "text": "Which protein is present in the HPV vaccine?",
    "choices": [
      {
        "id": 1,
        "text": "E6, E7"
      },
      {
        "id": 2,
        "text": "L1"
      },
      {
        "id": 3,
        "text": "E1, E2"
      },
      {
        "id": 4,
        "text": "L2"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;Gardasil 9 recently received expanded indication which now includes the prevention of oropharyngeal and other head and neck cancers caused by HPV types 16,18,31,33,45,52,58.&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:33555261,&quot;3&quot;:{&quot;1&quot;:0},&quot;5&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;6&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;7&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;8&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;11&quot;:4,&quot;12&quot;:0,&quot;28&quot;:1}\">Recent update: <strong>Gardasil 9</strong> has received expanded indication which now includes the <strong>prevention of oropharyngeal</strong> and other <strong>head and neck cancers</strong> caused by HPV types 16,18,31,33,45,52,58.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with meningitis with a history of fever for 4 days and erythematous rashes on the chest. There was no history of travel and tick bite. His CSF findings showed increased protein, normal glucose, mild lymphocytosis and few RBCs. Which of the following is the most likely organism to cause this clinical picture?",
    "choices": [
      {
        "id": 1,
        "text": "West nile virus"
      },
      {
        "id": 2,
        "text": "Meningococci"
      },
      {
        "id": 3,
        "text": "Strep pneumoniae"
      },
      {
        "id": 4,
        "text": "Entero virus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<table style=\"height: 553px; width: 385px;\">\n<tbody>\n<tr>\n<td style=\"width: 78.0208px;\">&nbsp;</td>\n<td style=\"width: 143.576px;\">Normal</td>\n<td style=\"width: 71.3542px;\">Bacterial Meningitis</td>\n<td style=\"width: 101.354px;\">Viral Meningitis</td>\n<td style=\"width: 93.5764px;\">Fungal Meningitis</td>\n<td style=\"width: 82.4653px;\">Parasitic Meningitis</td>\n<td style=\"width: 101.354px;\">Tuberculo Meningitis</td>\n</tr>\n<tr>\n<td style=\"width: 78.0208px;\">WBC Count (per&nbsp;&mu;L)</td>\n<td style=\"width: 143.576px;\">&lt;5</td>\n<td style=\"width: 71.3542px;\">&gt;1000</td>\n<td style=\"width: 101.354px;\">25-500</td>\n<td style=\"width: 93.5764px;\">40-600</td>\n<td style=\"width: 82.4653px;\">150-2000</td>\n<td style=\"width: 101.354px;\">25-100</td>\n</tr>\n<tr>\n<td style=\"width: 78.0208px;\">Differential of WBC</td>\n<td style=\"width: 143.576px;\">60-70% lymphocytes,&nbsp;&le;30% monocytes/ macrophages</td>\n<td style=\"width: 71.3542px;\">&uarr;&uarr;PMNs (&ge;80%)</td>\n<td style=\"width: 101.354px;\">Predominantly lymphocytes</td>\n<td style=\"width: 93.5764px;\">Lymphocytes or PMNs, depending on the specific organism</td>\n<td style=\"width: 82.4653px;\">&uarr;&uarr; Eosinophils (&ge;50%)&nbsp;</td>\n<td style=\"width: 101.354px;\">Predominantly lymphocytes&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 78.0208px;\">Gram,s stain</td>\n<td style=\"width: 143.576px;\">Negative</td>\n<td style=\"width: 71.3542px;\">Positive (in&nbsp;&gt;60% of cases)</td>\n<td style=\"width: 101.354px;\">Negative</td>\n<td style=\"width: 93.5764px;\">Rarely positive</td>\n<td style=\"width: 82.4653px;\">Negative</td>\n<td style=\"width: 101.354px;\">Occasionally positive</td>\n</tr>\n<tr>\n<td style=\"width: 78.0208px;\">Glucose (mg/dL)</td>\n<td style=\"width: 143.576px;\">40-85</td>\n<td style=\"width: 71.3542px;\">&lt;40</td>\n<td style=\"width: 101.354px;\">Normal</td>\n<td style=\"width: 93.5764px;\">&darr; to normal</td>\n<td style=\"width: 82.4653px;\">Normal</td>\n<td style=\"width: 101.354px;\">&lt;50 in 75% of cases</td>\n</tr>\n<tr>\n<td style=\"width: 78.0208px;\">Protein (mg/dL)</td>\n<td style=\"width: 143.576px;\">15-45</td>\n<td style=\"width: 71.3542px;\">&gt;100</td>\n<td style=\"width: 101.354px;\">20-80</td>\n<td style=\"width: 93.5764px;\">150-300</td>\n<td style=\"width: 82.4653px;\">50-200</td>\n<td style=\"width: 101.354px;\">100-200</td>\n</tr>\n<tr>\n<td style=\"width: 78.0208px;\">Opening pressure (mmH2O)</td>\n<td style=\"width: 143.576px;\">50-180</td>\n<td style=\"width: 71.3542px;\">&gt;300</td>\n<td style=\"width: 101.354px;\">100-350</td>\n<td style=\"width: 93.5764px;\">160-340</td>\n<td style=\"width: 82.4653px;\">Normal</td>\n<td style=\"width: 101.354px;\">&nbsp;150-280</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with seizures. His CT head reveals multiple parenchymal cysts. Which of the following is correct regarding management in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Steroids followed by antiparasitic drugs"
      },
      {
        "id": 2,
        "text": "Antiparasitic drugs followed by steroids"
      },
      {
        "id": 3,
        "text": "Steroids before antiepileptics"
      },
      {
        "id": 4,
        "text": "Continue antiepileptics"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is suggestive of <strong>neurocysticercosis</strong> caused by larvae of&nbsp;<em>T. solium</em> <strong>(cysticercosis cellulosae).&nbsp;&nbsp;Glucocorticoid </strong>therapy is usually begun<strong> before </strong>initiating<strong> albendazole </strong>(antiparasitic drug). This is continued for several days after the institution of therapy to<strong> reduce</strong> the incidence of <strong>side effects from inflammatory reactions</strong> to dead and dying cysticerci of&nbsp;<em>Taenia solium.</em></p>\n<p><strong>Albendazole</strong>&nbsp;is the&nbsp;<strong>drug of choice</strong>&nbsp;for neurocysticercosis.</p>\n<div class=\"page\" title=\"Page 1690\">There are various types of cysticercosis based on the site affected such as:</div>\n<ul>\n<li>Subcutaneous nodules (asymptomatic)</li>\n<li>Neurocysticercosis</li>\n<li>Muscular cysticercosis</li>\n<li>Ocular cysticercosis.</li>\n</ul>\n<p>Neurocysticercosis is considered the second most common cause of intracranial space-occupying lesion (ICSOL)&nbsp;in India following tuberculosis. Its clinical features include:</p>\n<ul>\n<li>Epilepsy</li>\n<li>Raised intracranial tension</li>\n<li>Hydrocephalus</li>\n<li>Psychiatric disturbances</li>\n<li>Meningoencephalitis</li>\n<li>Transient paresis</li>\n<li>Behavioral disorders</li>\n<li>Aphasia</li>\n<li>Visual disturbances.</li>\n</ul>\n<p>The below MRI of the brain shows multiple cysts containing scolices in a patient with neurocysticercosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/eef83360be9448318ec488874710dbf2x468x455.JPEG"
    ]
  },
  {
    "text": "The transplacental transmission of the organism given in the image which causes microcephaly is-",
    "choices": [
      {
        "id": 1,
        "text": "Nipah"
      },
      {
        "id": 2,
        "text": "Zika virus"
      },
      {
        "id": 3,
        "text": "CMV"
      },
      {
        "id": 4,
        "text": "Rubella"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows transplacental transmission of a virus, leading to microcephaly, with the<em> Aedes</em> mosquito as its vector. Among the given options, <strong>Zika virus\u00a0</strong>has the above features.\u00a0</p>\n<p>Zika virus is a mosquito-borne <strong>Flavivirus</strong> mainly transmitted through <strong><em>Aedes aegypti</em>.\u00a0</strong>Zika virus infection presents with <strong>mild </strong>symptoms of fever, rash, conjunctivitis, malaise, headache and muscle and joint pain. These symptoms usually last for <strong>2-7 days.</strong> Maternal infection during <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">pregnancy leads to congenital<strong> Zika syndrome</strong> or <strong>microcephaly</strong>.</span></p>\n<p>The <strong>complications</strong> of Zika virus infection include <strong>Guillain-Barr\u00e9</strong> syndrome, neuropathy, and myelitis.</p>\n<p>Note: NCDC Delhi and the National Institute of Virology Pune are the only institutes that have the capacity to provide the diagnosis in an acute febrile stage. <strong>RT-PCR</strong> is the standard test available for the diagnosis of Zika virus infection.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/76bf9b4258d7493fae3c909f56c77459.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The disruption of which of the following is responsible for watery diarrhea in cholera caused by Vibrio?",
    "choices": [
      {
        "id": 1,
        "text": "Intercalated discs"
      },
      {
        "id": 2,
        "text": "Macula densa"
      },
      {
        "id": 3,
        "text": "Zonula occludens"
      },
      {
        "id": 4,
        "text": "Hemidesmosomes"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The<strong> disruption of zonula occludens</strong> is responsible for watery diarrhea in cholera caused by <strong><em>Vibrio cholerae</em></strong>.</p>\n<p><strong>Zonula occludens toxin</strong> (Zot) is an enterotoxin elaborated by <em>Vibrio cholerae</em> that increases intestinal permeability by interacting with a mammalian cell receptor with subsequent activation of intracellular signaling leading to the <strong>disassembly of the intercellular tight junctions</strong>.</p>\n<p>Mechanism of action of cholera toxin:</p>\n<div class=\"page\" title=\"Page 323\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>The cholera toxin molecule&nbsp;consists of 1 A and 5 B subunits. The <strong>B (binding) units</strong>&nbsp;attach to the <strong>GM1 ganglioside receptors</strong> on the surface&nbsp;of jejunal epithelial cells. The A (active) subunit, on&nbsp;being transported into the enterocyte, dissociates into A1 and A2. A2 fragment only links biologically active A<span class=\"s5\">1 </span>to the B subunit.</li>\n<li>A1&nbsp;causes prolonged <strong>activation of cellular adenylate cyclase</strong> and accumulation of <strong>cAMP</strong>, leading to outpouring into the small intestinal lumen, of large quantities of water and electrolytes. This leads to&nbsp;<strong>watery diarrhea</strong>&nbsp;which is&nbsp;isotonic with plasma but contains much more potassium and bicarbonate.</li>\n<li>The toxin also <strong>inhibits the intestinal absorption</strong> of sodium and chloride.</li>\n<li>All clinical manifestations and complications in cholera result from the <strong>massive water</strong> <strong>and electrolyte depletion</strong> thus caused.</li>\n</ul>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6ea04de118f64753a4f1880a6ca9b4ecx1280x1516.JPEG"
    ]
  },
  {
    "text": "Affinity maturation is due to:",
    "choices": [
      {
        "id": 1,
        "text": "Isotype switching"
      },
      {
        "id": 2,
        "text": "Somatic hypermutation"
      },
      {
        "id": 3,
        "text": "mRNA splicing"
      },
      {
        "id": 4,
        "text": "VDJ rearrangement"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Affinity maturation is due to\u00a0<strong>s</strong><strong>omatic hypermutation</strong>.</p>\n<p><strong>Affinity maturation</strong>\u00a0is the process by which <strong>antibodies gain increased</strong>\u00a0<strong>affinity</strong>, <strong>avidity,</strong> and<strong> anti-pathogen activity. </strong>It is a\u00a0result of somatic hypermutation (SHM) of immunoglobulin genes in B cells, coupled to selection for antigen binding.</p>\n<p>This process occurs in the <strong>germinal centers</strong>\u00a0and proceeds for weeks after acute infection or vaccination, or for many cycles during chronic infection. The resulting antibodies can be <strong>highly mutated</strong> from their germline-encoded counterparts, with increases of several orders of magnitude in affinity for antigen compared to the corresponding na\u00efve B cell receptors (BCRs).</p>\n<p>Other options:</p>\n<p>Option A: <strong>Isotype switching</strong>, also known as class switch recombination, is a process where the constant region of the antibody heavy chain is changed, leading to a switch in the antibody isotype (e.g., from IgM to IgG). This process is crucial for the functional properties of antibodies but is not directly involved in affinity maturation.</p>\n<p>Option C: <strong>mRNA splicing</strong> is a cellular process that involves the removal of introns and the joining of exons to generate mature mRNA. While this process is essential for the production of functional antibodies, it is not specifically associated with affinity maturation. Affinity maturation primarily occurs through somatic hypermutation.</p>\n<p>Option D: <strong>VDJ rearrangement</strong> is the process by which the variable regions of immunoglobulin genes are assembled from gene segments (V, D, and J segments). This process contributes to the diversity of antibodies but is distinct from affinity maturation. Affinity maturation occurs after VDJ rearrangement and is driven by somatic hypermutation in the variable regions.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A farmer presents with a swollen foot and multiple sinuses as shown in the below image. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Mycetoma"
      },
      {
        "id": 2,
        "text": "Squamous cell carcinoma"
      },
      {
        "id": 3,
        "text": "Nocardia"
      },
      {
        "id": 4,
        "text": "Sporotrichosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most likely diagnosis here is<strong> Mycetoma</strong> which is caused by <strong>Eumycetoma</strong>.</p>\n<p><strong>Mycetoma:-</strong></p>\n<ul>\n<li>Mycetoma is a chronic, granulomatous infection of the skin, subcutaneous tissues, fascia and bone, which most often affects the foot or the hand. It is, therefore, commonly known as Maduramycosis or Madura foot. Mycetoma occurs worldwide.</li>\n<li>Etiology:&nbsp; It can be divided into three types, eumycetomas, actinomycetomas and botryomycosis.</li>\n</ul>\n<p><strong>Pathogenesis:-</strong></p>\n<ul>\n<li>Triad of symptoms: Infection follows traumatic inoculation of the organism into the subcutaneous tissue from soil or vegetable sources, usually on thorns or splinters and results in tumefactions, deformities and draining sinuses discharging fungal colonies called grains or granules (triad of symptoms).&nbsp;</li>\n<li>Subcutaneous tissues of the feet, lower extremities, hands, and exposed areas are most often involved.</li>\n<li>Grains: Within host tissues the organisms develop to form compacted colonies (grains) 0.5&ndash;2 mm in diameter, the color of which depends on the organism responsible.</li>\n</ul>\n<p><strong>Laboratory Diagnosis </strong></p>\n<ul>\n<li>A. Direct Examination: The presence of grains in pus collected from draining sinuses or in biopsy material is diagnostic.</li>\n<li>B. Culture Samples should also be cultured, at both 25&ndash;30&deg;C and 37&deg;C, on brain-heart infusion agar or blood agar for actinomycetes and on Sabouraud agar (without cycloheximide) for fungi.</li>\n</ul>\n<p>Treatment:-</p>\n<p>The management of eumycetoma is difficult, involving surgical debridement or excision and chemotherapy. Actinomycetoma responds well to rifampicin in combination with sulfonamides or cotrimoxazole.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/36f140fcfeaa4fbf92883bbb078ce6b4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The given life cycle belongs to which of the following organisms?",
    "choices": [
      {
        "id": 1,
        "text": "Leptospira"
      },
      {
        "id": 2,
        "text": "Hanta virus"
      },
      {
        "id": 3,
        "text": "Yersinia pestis"
      },
      {
        "id": 4,
        "text": "Salmonella typhi"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The life cycle shown in the above image is suggestive of <strong>leptospirosis</strong>.&nbsp;</p>\n<p>It is caused by contact with the <strong>urine</strong> or <strong>blood</strong> of an infected organism. It is a <strong>zoonotic disease,&nbsp;</strong>with&nbsp;<strong>rats</strong>&nbsp;being the most well-known <strong>reservoirs.</strong>&nbsp;</p>\n<p>Illness is classically <strong>biphasic</strong> after an incubation period of up to 1 month. The stages are:&nbsp;</p>\n<ul>\n<li><strong>Acute leptospiremic</strong> phase- organism can be cultured from <strong>blood.</strong></li>\n<li><strong>Resolving immune</strong> phase- organism can be cultured from <strong>urine.</strong></li>\n</ul>\n<p>The stages may not be clinically distinguishable.</p>\n<p>Most cases are asymptomatic but a few may present with severe manifestations. Clinical features include:&nbsp;</p>\n<ul>\n<li>High-grade fever</li>\n<li>Hepatic dysfunction&nbsp;</li>\n<li>Renal impairment</li>\n<li>Hemorrhages- gastrointestinal, pulmonary (most common), petechiae and purpura</li>\n</ul>\n<p>The <strong>severe</strong> form is known as <strong>Weil's disease,</strong> with a triad of <strong>hemorrhage, jaundice,</strong> and <strong>acute kidney injury.</strong>&nbsp;</p>\n<p>Treatment of choice is<strong> IV penicillin or IV ceftriaxone.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5effee5a1b954fd48e234ec7db0e9ab6.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/770e739263774ee4973f8b37058ed52bx1279x1329.JPEG"
    ]
  },
  {
    "text": "Identify the organism shown in this image.",
    "choices": [
      {
        "id": 1,
        "text": "Strongyloides stercoralis"
      },
      {
        "id": 2,
        "text": "Enterobius vermicularis"
      },
      {
        "id": 3,
        "text": "Ancylostoma duodenale"
      },
      {
        "id": 4,
        "text": "Ascaris lumbricoides"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image shows large cylindrical worms with tapering ends, and thus represents <strong><em>Ascaris lumbricoides</em></strong><em>\u00a0</em>(roundworm).</p>\n<p><em>Ascaris lumbricoides</em>\u00a0is the <strong>most common</strong> of <strong>human helminths</strong> and is distributed worldwide. It is the <strong>largest nematode parasite</strong> in the human intestine. The adult worms are large<strong> cylindrical </strong>worms, with<strong> tapering ends. </strong>The anterior end is more pointed than the posterior. It appears white outside the body.\u00a0</p>\n<p>Its\u00a0<strong>natural host</strong> is humans. There is<strong> </strong>no intermediate host.<strong> </strong>Adult worms live in the small intestine - jejunum and ileum. Humans acquire infectionby consuming food or water contaminated with nightsoil or human feces containing <strong>eggs. </strong>The eggs contain the infective\u00a0<strong>rhabditiform larva</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2431e17c80784bedb4efdb735b2c6f59.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient presents with urethral discharge. A gram stain smear is made from the discharge sample and the following microscopic image is seen. What is the most likely causative organism?",
    "choices": [
      {
        "id": 1,
        "text": "Trichomonas"
      },
      {
        "id": 2,
        "text": "Chlamydia trachomatis"
      },
      {
        "id": 3,
        "text": "Neisseria gonorrheae"
      },
      {
        "id": 4,
        "text": "Gardenella"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: justify;\">The above image shows <strong>gram\u2010negative intracellular diplococci </strong>within phagocytes in a stained smear from the urethral discharge sample, which is seen in infection with&nbsp;<em><strong>Neisseria gonorrhoeae</strong></em>.</p>\n<p style=\"text-align: justify;\">According to CDC&nbsp;recommendations 2021, the first line of treatment in uncomplicated gonococcal infections is a single dose of <strong>ceftriaxone 500 mg IM</strong>.</p>\n<p style=\"text-align: justify;\">Note:&nbsp;BASHH (British Association for Sexual Health and HIV) in the United Kingdom also recommends higher doses of ceftriaxone&nbsp;of about 500 mg along with azithromycin because it would result in fewer failures.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/18d812e3f73748129e5bd6360116b53c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following disease has the highest mortality once clinically manifested?",
    "choices": [
      {
        "id": 1,
        "text": "Nipah"
      },
      {
        "id": 2,
        "text": "Rabies"
      },
      {
        "id": 3,
        "text": "Ebola"
      },
      {
        "id": 4,
        "text": "Zika"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Rabies\u00a0</strong>has the highest mortality once clinically presented.\u00a0</p>\n<p><strong>Rabies</strong> is a vaccine-preventable, zoonotic, viral disease of the central nervous system. Rabies virus is a bullet-shaped rhabdovirus containing ssRNA. It spreads to humans by bites or contact with the saliva of rabid animals (bats, dogs, cats). Once clinical symptoms appear, rabies is virtually <strong>100</strong>% <strong>fatal.\u00a0</strong>The disease can be divided into 3 phases:</p>\n<ol>\n<li><strong>Prodromal </strong>phase: It lasts 2-10 days. Patients present with malaise, headache, photophobia, vomiting, and fever.\u00a0 They may also have parasthesias, pain or pruritus near the site of exposure.\u00a0</li>\n<li><strong>Acute neurologic </strong>phase: It lasts 2-7 days. In the more common <strong>encephalitic</strong>\u00a0rabies, <strong>Hydrophobia </strong>(fear of water) or aerophobia (fear of breeze) can be seen. Swallowing liquids precipitates<strong> painful spasms </strong>of the <strong>throat muscles</strong>. Patients may also have nervousness, hallucinations, excessive lacrimation, salivation, perspiration and pupillary dilation. Convulsive seizures may occur</li>\n<li><strong>Coma </strong>and <strong>death </strong>(due to cardiorespiratory arrest)</li>\n</ol>\n<p>In about 20% of patients, <strong>paralytic rabies</strong> is seen. Flaccid muscle weakness is seen, which progresses to quadriparesis and facial palsy.\u00a0\u00a0</p>\n<p><strong>Note:</strong> In rabid animals, the virus depicts two modes of spread:</p>\n<ul>\n<li><strong>Centripetal</strong> spread: The virus enters the <strong>peripheral</strong> neurons. It moves via <strong>retrograde fast axonal transport</strong> towards the spinal cord or brainstem a.k.a the central nervous system <strong>(CNS)\u00a0</strong>at a speed of up to 250 mm/day. Once<strong> </strong>within the CNS, it spreads quickly to other regions in the CNS\u00a0through <strong>fast axonal transport</strong>. It infects neurons primarily, but may rarely infect astrocytes.</li>\n<li><strong>Centrifugal</strong> spread: After <strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">CNS</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> infection is established, it spreads along the\u00a0</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">sensory</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> and </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">autonomic nerves</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> to salivary glands, adrenal glands, skin\u00a0</span></li>\n</ul>\n<p>Rabies virus <strong>replicates</strong> in <strong>acinar cells</strong> of the <strong>salivary glands</strong> and is secreted in the saliva of rabid animals that serve as <strong>vectors.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with a mobile, warm to touch nodule in the neck. On the anaerobic culture of the biopsy material from this swelling, it showed colonies as shown in the image which had gram-positive branching rods on staining. Which of the following is the drug of choice in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Doxycycline"
      },
      {
        "id": 2,
        "text": "Cotrimoxazole"
      },
      {
        "id": 3,
        "text": "Penicillin"
      },
      {
        "id": 4,
        "text": "Surgical drainage"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image shows a patient with multiple cutaneous lesions caused by <em>Actinomyces</em>:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0a14d984b5d24a4f811f5ab034964c3d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8baebbe837aa478ab1eb3abf7a417457x401x599.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/71207f08b1304388b3c728137772ec09x700x460.JPEG"
    ]
  },
  {
    "text": "In which of the following situations will you use a sanitizer?",
    "choices": [
      {
        "id": 1,
        "text": "A, B & C only"
      },
      {
        "id": 2,
        "text": "A & B only"
      },
      {
        "id": 3,
        "text": "A, B C & D"
      },
      {
        "id": 4,
        "text": "C & D only"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Note: </strong>Disinfectants like chlorhexidine and alexidine have a biguanide functional group. They are mostly used as oral disinfectants and hand products. They are bactericidal but not sporicidal. Mycobacteria are also resistant to these compounds.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ed49ba92c81c422786618535b1224e46x1280x1901.JPEG"
    ]
  },
  {
    "text": "The following are true about chancroid:",
    "choices": [
      {
        "id": 1,
        "text": "C & D only"
      },
      {
        "id": 2,
        "text": "A, B,C & D"
      },
      {
        "id": 3,
        "text": "A  B & C"
      },
      {
        "id": 4,
        "text": "A & B only"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Note:<strong> Groove sign</strong>&nbsp;is a&nbsp;characteristic sign seen in <strong>lymphogranuloma venereum</strong>. It refers to the depression created by the inguinal ligament as it passes between the groups of inflamed inguinal lymph nodes.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a3b2416921a84acfb8e49ed7a157a098x720x705.JPEG"
    ]
  },
  {
    "text": "Match the following E.coli with their respective pathogenesis.",
    "choices": [
      {
        "id": 1,
        "text": "A-4,B-3,C-2,D-1"
      },
      {
        "id": 2,
        "text": "A-1,B-3,C-2,D-4"
      },
      {
        "id": 3,
        "text": "A-1,B-2,C-3,D-4"
      },
      {
        "id": 4,
        "text": "A-4,B-2,C-3.D-1"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The correctly matched pairs are as follows:</p>\n<table style=\"height: 145px; width: 502px;\">\n<tbody>\n<tr>\n<td style=\"width: 69.8203px;\"><em><strong>E. coli</strong></em></td>\n<td style=\"width: 416.18px;\"><strong>Mechanism of action</strong></td>\n</tr>\n<tr>\n<td style=\"width: 69.8203px;\">1. ETEC</td>\n<td style=\"width: 416.18px;\">A. Produce a heat-stable toxin and cause activation of guanylyl cyclase</td>\n</tr>\n<tr>\n<td style=\"width: 69.8203px;\">2. EIEC</td>\n<td style=\"width: 416.18px;\">B. Invades intestinal mucosal cells \u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 69.8203px;\">3. EHEC</td>\n<td style=\"width: 416.18px;\">C. Produces a toxin against vascular endothelium cells</td>\n</tr>\n<tr>\n<td style=\"width: 69.8203px;\">4. EPEC</td>\n<td style=\"width: 416.18px;\">D. Adhere to the mucosal surface and cause effacement of microvilli</td>\n</tr>\n</tbody>\n</table>\n<p>The various strains of <em>Escherichia coli</em> are:</p>\n<ul>\n<li><strong>Enterotoxigenic</strong> <em>E. </em><em>coli</em>\u00a0(ETEC) is the most common organism\u00a0<strong>that</strong> causes <strong>diarrhea</strong> in\u00a0<strong><strong>travelers</strong>.\u00a0</strong>It produces the following toxins:\n<ul>\n<li><strong>LT\u00a0</strong>(heat-labile toxin)- acts by<strong>\u00a0\u2191cAMP</strong></li>\n<li><strong>ST\u00a0</strong>(heat-stable toxin)- two types of ST are known, ST-A (ST-I) and ST-B (ST-II)\n<ul>\n<li><strong>ST-A</strong>\u00a0is soluble in methanol and acts by <strong>\u2191cGMP</strong>\u00a0in the intestine.\u00a0</li>\n<li><strong>ST-B\u00a0</strong>is insoluble in methanol, and the mode of <strong>action</strong> is <strong>not known</strong>.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<div class=\"column\">\n<ul>\n<li><strong>Enteroinvasive</strong><em> E. coli</em><strong>\u00a0</strong>(EIEC)<strong> invade interstitial epithelial cells</strong> in the intestine and cause a condition <strong>resembling shigellosis</strong>. This ability is determined by a <strong>plasmid, detection</strong> of which can also be a diagnostic test. <strong>Sereny's test</strong> was employed to diagnose EIEC but it is not in use anymore.</li>\n<li><strong>Enterohemorrhagic</strong>\u00a0<em>E.</em><em> coli</em><strong><em>\u00a0</em></strong>(EHEC)\u00a0produces <strong>verocytotoxin,</strong> which targets vascular endothelium. It causes\u00a0<strong>hemorrhagic colitis</strong> and <strong>hemolytic uremic syndrome.</strong></li>\n<li><strong>Enteropathogenic</strong> <em>E.</em><em> coli</em><em>\u00a0</em>(EPEC) causes <strong>infantile diarrhea</strong> in developing countries. It adheres to the mucosal surface of small intestine using EAF and LEE and causes <strong>effacement</strong> of <strong>microvilli</strong>. This leads to <strong>attachment</strong> and\u00a0<strong>effacement</strong>\u00a0lesions of intestinal cells.</li>\n<li><strong>Enteroaggregative</strong> <em>E.</em><em> coli</em><strong> </strong>(EAEC)<strong>\u00a0</strong>produces the <strong>stacked brick pattern</strong>\u00a0of adherence on hep-2 cells. EAEC\u00a0has been associated with\u00a0<strong>persistent diarrhea</strong>.\u00a0Intestinal colonization of EAEC is mediated by\u00a0AAF (aggregative adherence fimbriae). EAEC produces EAST-1\u00a0toxin (enteroaggregative heat-stable toxin) which is considered to be a major virulence factor.</li>\n</ul>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following:",
    "choices": [
      {
        "id": 1,
        "text": "A-2, B-1, C-3, D-4"
      },
      {
        "id": 2,
        "text": "A-3, B-2, C-1, D-4"
      },
      {
        "id": 3,
        "text": "A-4, B-1, C-2, D-3"
      },
      {
        "id": 4,
        "text": "A-1, B-2, C-4, D-3"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Images b-1 and b-3 showing the&nbsp;Trophozoite and Cystic form of Balamuthia mandrillaris in Salmonella Shigella (SS) Agar respectively.</p>\n<p><strong>Balamuthia Mandrillaris</strong></p>\n<p>B. mandrillaris is a free-living ameba, which is a newly identified species reported to cause granulomatous amebic encephalitis (GAE).</p>\n<p><strong>Morphology</strong><br />It exists in ameboid trophozoite stage. The flagellate stage is absent</p>\n<ul>\n<li>It is relatively large (12-60 &mu;m), irregular in shape and actively motile by broad pseudopodia.</li>\n<li>Cyst of B. mandrillaris are usually spherical (6-20 &mu;m), surrounded by a three-layered cyst wall: (1) outer irregular ectocyst, (2) a middle mesocyst and (3) an inner endocyst round wall. Under light microscopy, it appears to have two walls: (1) an outer irregular wall and (2) an inner smooth wall.</li>\n<li>Infection is transmitled through respiratory tract, skin lesions, or eyes.<br /><br /></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/92dc7510868d4bd795867f82173c1baax387x225.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3418f1e818f146e7b96001ab3a20a8c7x720x707.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/79666b72a10145cc95c39884814a880fx543x458.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4ecf902604494d7c8b6aae954bdb7e1dx330x279.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e35938379b6a4895b7e5af005794b060x846x721.PNG"
    ]
  },
  {
    "text": "Galactomannan in serum is seen in:",
    "choices": [
      {
        "id": 1,
        "text": "1 & 2 only"
      },
      {
        "id": 2,
        "text": "1 & 3 only"
      },
      {
        "id": 3,
        "text": "1 only"
      },
      {
        "id": 4,
        "text": "1, 2 & 3 only"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The\u00a0<strong>galactomannan assay</strong> is used for the diagnosis of <strong>invasive</strong> (deep-seated) <strong>mycoses\u00a0</strong>caused by <strong><em>Aspergillus</em></strong>\u00a0species.</p>\n<p>Galactomannan is a<strong> </strong>component of the <strong>cell wall</strong> of <em>Aspergillus</em>. It can be detected in <strong>serum</strong> or<strong> bronchoalveolar lavage </strong>by ELISA for the diagnosis of invasive aspergillosis in adults and children. This test is especially useful in <strong>hematopoietic stem cell transplant</strong> recipients or patients with <strong>hematologic malignancies.\u00a0</strong>Invasive aspergillosis affects the lungs and presents with fever, cough, dyspnea, and hemoptysis. The organism may spread to the eye, gastrointestinal tract, kidney, liver or brain, leading to abscesses and necrotic lesions.</p>\n<p>Other diagnostic features of invasive aspergillosis are:</p>\n<ul>\n<li><strong>Positive culture</strong>\u00a0from the affected organ</li>\n<li>Microscopy showing narrow, <strong>septate hyphae</strong>\u00a0with branching at\u00a0<strong>45<sup>o</sup></strong>\u00a0and conidiophores</li>\n<li><strong>Halo sign</strong>\u00a0on CT scan</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following parasites with their respective hosts:",
    "choices": [
      {
        "id": 1,
        "text": "A-3, B-2, C-4, D-1"
      },
      {
        "id": 2,
        "text": "A-2, B-1 ,C-4 ,D-3"
      },
      {
        "id": 3,
        "text": "A-1, B-2, C-3, D-4"
      },
      {
        "id": 4,
        "text": "A-4, B-3, C-1, D-2"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The correct answer is <strong>A-3, B-2, C-4, D-1.\u00a0</strong></p>\n<table style=\"border-collapse: collapse; width: 29.3734%; height: 139.941px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 27.9883px;\">\n<td style=\"width: 49.9597%; height: 27.9883px;\">A. Diphyllobothrium</td>\n<td style=\"width: 49.9597%; height: 27.9883px;\">3. Cyclops</td>\n</tr>\n<tr style=\"height: 27.9883px;\">\n<td style=\"width: 49.9597%; height: 27.9883px;\">B. Paragonimus</td>\n<td style=\"width: 49.9597%; height: 27.9883px;\">2. Crayfish</td>\n</tr>\n<tr style=\"height: 27.9883px;\">\n<td style=\"width: 49.9597%; height: 27.9883px;\">C. Brugia</td>\n<td style=\"width: 49.9597%; height: 27.9883px;\">4. Mansonia</td>\n</tr>\n<tr style=\"height: 27.9883px;\">\n<td style=\"width: 49.9597%; height: 27.9883px;\">D. Fasciola</td>\n<td style=\"width: 49.9597%; height: 27.9883px;\">1. Sheep</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>\n<p>The hosts of the above parasites are given below:\u00a0</p>\n<table style=\"height: 231px;\" width=\"558\">\n<tbody>\n<tr>\n<td style=\"width: 138.472px;\"><strong>Parasite</strong></td>\n<td style=\"width: 131.632px;\"><strong>Definitive host</strong></td>\n<td style=\"width: 131.632px;\"><strong>First intermediate host</strong></td>\n<td style=\"width: 131.667px;\"><strong>Second intermediate host</strong></td>\n</tr>\n<tr>\n<td style=\"width: 138.472px;\">Diphyllobothrium</td>\n<td style=\"width: 131.632px;\">Humans</td>\n<td style=\"width: 131.632px;\">Cyclops</td>\n<td style=\"width: 131.667px;\">Cyclops and fish</td>\n</tr>\n<tr>\n<td style=\"width: 138.472px;\">Paragonimus</td>\n<td style=\"width: 131.632px;\">Humans</td>\n<td style=\"width: 131.632px;\">Snail</td>\n<td style=\"width: 131.667px;\">Crayfish and crab</td>\n</tr>\n<tr>\n<td style=\"width: 138.472px;\">Fasciola</td>\n<td style=\"width: 131.632px;\">Sheep and humans</td>\n<td style=\"width: 131.632px;\">Snail</td>\n<td style=\"width: 131.667px;\">Aquatic vegetations</td>\n</tr>\n<tr>\n<td style=\"width: 138.472px;\">Brugia\u00a0</td>\n<td style=\"width: 131.632px;\">Humans</td>\n<td style=\"width: 131.632px;\">Mansonia mosquito</td>\n<td style=\"width: 131.667px; text-align: center;\">\u00a0-</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '064 Microbiology Aiims 2020 (May And Nov Ini-Cet)';
        let hierarchy = ["Marrow", "PYQs", "Microbiology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>