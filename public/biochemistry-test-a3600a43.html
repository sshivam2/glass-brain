<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biochemistry Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Test Series Subject / 2023
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following statements are true regarding the regulation of cholesterol synthesis?",
    "choices": [
      {
        "id": 1,
        "text": "1, 3, and 5"
      },
      {
        "id": 2,
        "text": "2, 3, and 4"
      },
      {
        "id": 3,
        "text": "1, 2, and 4"
      },
      {
        "id": 4,
        "text": "2, 3, and 5"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Statements <strong>2</strong>,<strong> 3</strong>, and<strong> 5</strong> are true regarding the regulation of cholesterol synthesis.</p>\n<p><strong>HMG CoA reductase</strong> is the principal enzyme involved in the <strong>regulation</strong> of <strong>cholesterol synthesis</strong>.&nbsp;Cholesterol is synthesized from <strong>acetyl-CoA</strong> mainly in the liver and intestine. This process occurs in the endoplasmic reticulum and cytosol.</p>\n<div class=\"page\" title=\"Page 261\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>HMG-CoA reductase reduces<strong> HMG-CoA</strong>&nbsp;to <strong>mevalonate</strong> by NADPH in the pathway of cholesterol synthesis.&nbsp;This principal regulatory step is targeted by <strong>statins</strong>, which are drugs that efficiently lower cholesterol by <strong>inhibiting HMG-CoA reductase</strong>.</p>\n<p>Activity of HMG-CoA reductase is influenced by the following factors:</p>\n<ul>\n<li>By-products of the cholesterol synthesis pathway:&nbsp;<strong>Mevalonate</strong>, the immediate product of the reaction, and&nbsp;<strong>cholesterol</strong>,&nbsp;the main product of the pathway, <strong>inhibit</strong> enzyme activity. These metabolites also repress transcription of HMG-CoA reductase mRNA by inhibiting sterol regulatory element-bidning protein (SREBP) transcription factor.</li>\n<li>Hormones:<strong> Insulin</strong>&nbsp;and <strong>thyroid hormones</strong> <strong>increase</strong>&nbsp;enzyme activity, whereas <strong>glucagon</strong> or <strong>glucocorticoids</strong> decrease it.</li>\n<li>Posttranslational modifications:&nbsp;Phosphorylation&ndash;dephosphorylation reactions affect enzyme activity.&nbsp;<strong>AMP-activated protein kinase (AMPK)</strong> phosphorylates and <strong>inactivates</strong> the enzyme.</li>\n<li>Diurnal variation</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/affadf70f6e14d269ed81f681a304e06x600x566.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7087eb4a999a413da1c7e7c4a3566407x510x692.PNG"
    ]
  },
  {
    "text": "A patient with a history of using well water for cooking and consumption presents with vomiting and abdominal pain. On examination, there is jaundice, hemoglobinuria, Mees lines on the nails, and features of hypovolemic shock. A toxicology screen is done, and the 24-hour urine sample is found to contain high amounts of a toxin.  Which enzyme of Kreb's cycle will be inhibited by this toxin?",
    "choices": [
      {
        "id": 1,
        "text": "Glyceraldehyde 3-phosphate dehydrogenase"
      },
      {
        "id": 2,
        "text": "Alpha-ketoglutarate deydrogenase"
      },
      {
        "id": 3,
        "text": "Aconitase"
      },
      {
        "id": 4,
        "text": "Succinate dehydrogenase"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of <strong>arsenic toxicity</strong>. <strong>Alpha-ketoglutarate dehydrogenase&nbsp;(AKG)</strong> of Kreb's cycle is inhibited by this toxin, <strong>arsenite</strong> (inorganic arsenic salt).</p>\n<p><strong>&alpha;-Ketoglutarate </strong>is a rate-determining intermediate in Kreb's cycle. It&nbsp;has a crucial role in cellular energy metabolism as it acts as a precursor of glutamate and glutamine and promotes protein synthesis.</p>\n<p><strong>Alpha-ketoglutarate</strong>&nbsp;undergoes oxidative decarboxylation to form&nbsp;<strong>succinyl-CoA</strong> and CO<sub>2</sub>&nbsp;with the help of the multienzyme complex, <strong>AKG dehydrogenase</strong>. This enzyme complex requires the cofactors, thiamin diphosphate, lipoate, NAD+, flavin&nbsp;adenine dinucleotide (FAD), and coenzyme A.</p>\n<p><strong>Arsenite</strong> inhibits this decarboxylation reaction and causes the substrate, &alpha;-ketoglutarate, to accumulate.&nbsp;</p>\n<div class=\"page\" title=\"Page 6797\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Arsenic toxicity </strong>is either due to inhalation of toxic arsenic gas or chronic consumption of foods cooked in contaminated well water. It&nbsp;presents with malaise, headache, nausea, vomiting, abdominal pain, jaundice, hemoglobinuria, and renal failure. There may be <strong>hemorrhagic gastroenteritis, hypovolemic shock, and cardiovascular manifestations</strong> such as QT prolongation, polymorphous ventricular tachycardia, and congestive cardiomyopathy. <strong>Mees lines</strong>&nbsp;is a common dermatologic manifestation characterized by transverse white striae on the nail.</p>\n<p>Arsenic toxicity is detected by measuring the 24-hour urine excretion of arsenic.</p>\n</div>\n</div>\n</div>\n</div>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/37a8b2f16ea247a4b1be3539c7dc55f9x1280x4900.JPEG"
    ]
  },
  {
    "text": "A 55-year-old lady presented with chronic pain in the lower back and knees. On physical examination, there were black pigmentary deposits on the sclera of both eyes and on the fingers and nailbeds. The urine turned black on exposure to Benedict's reagent and showed large amounts of a particular metabolite which is responsible. Identify the metabolite from the image below",
    "choices": [
      {
        "id": 1,
        "text": "2"
      },
      {
        "id": 2,
        "text": "1"
      },
      {
        "id": 3,
        "text": "4"
      },
      {
        "id": 4,
        "text": "3"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical vignette is suggestive of <strong>alkaptonuria,&nbsp;</strong>which is characterised by excretion of the metabolite&nbsp;<strong>homogentisate </strong>(marked as <strong>2&nbsp;</strong>in the flowchart)&nbsp;in urine.</p>\n<p>Alkaptonuria is an autosomal recessive disorder of <strong>tyrosine metabolism</strong>. It occurs due to a defect in <strong>homogentisate oxidase</strong>&nbsp;(which&nbsp;oxidizes homogentisate to maleylacetoacetate) leading to the <strong>accumulation of homogentisate</strong>. The&nbsp;excreted homogentisate in urine makes it appear black when it gets oxidized on exposure to air or an oxidizing agent.</p>\n<p>Accumulation of oxidized homogentisic acid pigment (benzoquinone acetate) in joints and connective tissues leads to arthritis and connective tissue pigmentation respectively. This is known as <strong>ochronosis</strong>.&nbsp;Pigmentation of heart valves, larynx, tympanic membranes, and skin, with occasional renal pigment calculi, can also be seen.</p>\n<p>Most patients are diagnosed early based on the<strong> darkening of urine</strong> with standing or the addition of alkali. Around the age of 30 years, gray-brown pigmentation of sclera and generalized darkening of the concha, anthelix and helix of the ear is seen.Some patients present in middle age with a <strong>degenerative joint disease</strong> (ochronotic arthritis) with pain, stiffness, and limitation of motion of the lower back, hips, knees, and shoulders. Small joints are usually spared.</p>\n<p>Treatment:</p>\n<div class=\"page\" title=\"Page 3065\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li><strong>Symptomatic</strong> treatment with pain medications, spinal surgery, and arthroplasty&nbsp;</li>\n<li>Ascorbic acid and protein restriction&nbsp;</li>\n<li><strong>Nitisinone</strong> - reduces urinary excretion of homogentisic acid and delays progression of the disease.</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cd74d0fa7ff04732a5f61cff999500c8.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0fe5b17563d94403887314b8c37e2099x1280x2566.3187588152327.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/69bb0d10ce66436eb0e4e36807c443aex408x267.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/114c954855d74f0cbc4ab61cf0d8073fx972x1198.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/94e733d3439e40659d77dd54cc40ce9dx512x358.PNG"
    ]
  },
  {
    "text": "An undernourished child is brought for consultation. You prescribe a mineral supplement that is absorbed by the mechanism shown in the image below. Identify the supplement.",
    "choices": [
      {
        "id": 1,
        "text": "Copper"
      },
      {
        "id": 2,
        "text": "Iron"
      },
      {
        "id": 3,
        "text": "Calcium"
      },
      {
        "id": 4,
        "text": "Zinc"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows <strong>iron absorption and transport</strong> from a duodenal enterocyte into the blood, hence the mineral supplement prescribed can be identified as an <strong>iron</strong> supplement.</p>\n<p>The following image shows in detail, the absorption of iron from a duodenal enterocyte.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d0f7a03d5e45407ba5514ff7eaadc941.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/434650ea843645ec80e4a24389d0209dx1280x1210.JPEG"
    ]
  },
  {
    "text": "A 22-year-old woman presented with a 2-week history of progressive severe headache and blurry vision. Clinical examination was significant for bilateral papilledema. A lumbar puncture revealed elevated opening pressure with normal CSF composition. An MRI showed no space-occupying lesions. On further questioning, she admits to taking high-dose multivitamin supplements. Which vitamin excess is likely to cause the above scenario?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin A"
      },
      {
        "id": 2,
        "text": "Vitamin D"
      },
      {
        "id": 3,
        "text": "Vitamin E"
      },
      {
        "id": 4,
        "text": "Vitamin K"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario of increased intracranial pressure in the absence of space-occupying lesion points towards the diagnosis of <strong>pseudotumor cerebri</strong>. <strong>Vitamin A excess</strong> is the likely cause.</p>\n<p><strong>Clinical features</strong> of hypervitaminosis A:</p>\n<ul>\n<li><strong>CNS:</strong>&nbsp;Symptoms of raised intracranial pressure (<strong>pseudotumor cerebri</strong>) such as headache, nausea, vomiting, blurring of vision, ataxia, anorexia</li>\n<li><strong>Liver</strong>: Hepatomegaly and hyperlipidemia</li>\n<li><strong>Musculoskeletal</strong>: Thickening of the long bones (<strong>bony exostosis</strong>), hypercalcemia, soft tissue calcification</li>\n<li><strong>Dermatological</strong>: Dryness, <strong>exfoliative dermatitis</strong>, alopecia</li>\n<li><strong>Teratogenesis</strong>: Pregnant women should not ingest excessive quantities as it can cause congenital malformations in the developing fetus.&nbsp;<strong>Isotretinoin</strong>(13-cis retinoic acid) is a drug that is<strong> teratogenic </strong>and absolutely <strong>contraindicated </strong>in<strong> pregnancy.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the correct sequence of events in Southern blotting?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3"
      },
      {
        "id": 2,
        "text": "2, 1, 3"
      },
      {
        "id": 3,
        "text": "3, 1, 2"
      },
      {
        "id": 4,
        "text": "2, 3, 1"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In Southern blotting<strong> DNA fragments </strong>are first separated by<strong> electrophoresis.</strong></p>\n<ul>\n<li>The DNA in the gel is then made single-stranded by exposure to dilute alkali, and transferred by capillary action to the nylon membrane, which is laid over it. The relative positions of the different DNA fragments are thus preserved on the membrane.</li>\n<li>The membrane is then soaked in buffer containing the labelled probe, which base pairs with the DNA fragment of interest.</li>\n<li>The position of that fragment is then determined by autoradiographic (exposure of the membrane to X-ray film), or fluorescent detection of the hybridized probe.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7a976265f58f462db822daefeb3bf6a9x800x494.JPEG"
    ]
  },
  {
    "text": "A 26-year-old female patient comes with a history of chronic weight loss, loss of appetite, and diarrhea along with pale bulky stools and is diagnosed with malabsorption syndrome. Steatorrhea is defined in this patient by stool fat exceeding:",
    "choices": [
      {
        "id": 1,
        "text": "7 g per day"
      },
      {
        "id": 2,
        "text": "14 g per day"
      },
      {
        "id": 3,
        "text": "28 g per day"
      },
      {
        "id": 4,
        "text": "32 g per day"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Steatorrhea is a symptom&nbsp;defined by stool fat exceeding <strong>7 g per day.</strong></p>\n<p>Steatorrhea is the passage of <strong>greasy, foul-smelling, difficult-to-flush</strong> stools.&nbsp;It is often associated with weight loss &amp; nutritional deficiencies due to concomitant malabsorption of amino acids &amp; fat-soluble vitamins. It is one of the clinical features of <strong>fat malabsorption</strong> and is noted in many conditions causing intraluminal maldigestion, mucosal malabsorption, or lymphatic obstruction.</p>\n<p>Causes of steatorrhea:</p>\n<ul>\n<li class=\"half_rhythm\">\n<div>Exocrine <strong>pancreatic insufficiency</strong>: Chronic pancreatitis, cystic fibrosis (CF), pancreatic tumors</div>\n</li>\n<li class=\"half_rhythm\">\n<div><strong>Bile acid deficiency</strong>: Primary biliary cholangitis&nbsp;(PBC), primary sclerosing cholangitis (PSC), ileal resection, Crohn disease, small&nbsp;intestinal bacterial overgrowth (SIBO)</div>\n</li>\n<li class=\"half_rhythm\">\n<div><strong>Enteropathy </strong>or<strong>&nbsp;</strong>Malabsorption syndrome: Celiac disease (most common), tropical sprue, giardiasis, Whipple disease, amyloidosis, SIBO, abetalipoproteinemia</div>\n</li>\n</ul>\n<p>Screening of steatorrhea is by the detection of fat&nbsp;by <strong>Sudan III staining. </strong>Stool fat can be quantified&nbsp;by calculating the coefficient of fat absorption <strong>(CFA), </strong>which is an essential step in the diagnosis.</p>\n<p>The following are the general tests for malabsorption:</p>\n<table>\n<tbody>\n<tr>\n<td><strong>Disorder</strong></td>\n<td><strong>Investigation</strong></td>\n</tr>\n<tr>\n<td>Fat malabsorption</td>\n<td>\n<p>Quantitative: 24h fecal fat &gt;7g</p>\n<p>Qualitative: Sudan III staining</p>\n<p>C<sup>14</sup>&nbsp;Triolein breath test</p>\n<p>Fecal steatocrit</p>\n</td>\n</tr>\n<tr>\n<td>Carbohydrate malabsorption</td>\n<td>\n<p>D-xylose test</p>\n<p>Lactose hydrogen breath test</p>\n</td>\n</tr>\n<tr>\n<td>Protein malabsorption</td>\n<td>C<sup>13</sup>&nbsp;egg-white breath test</td>\n</tr>\n</tbody>\n</table>\n<p>The following are the specific tests for malabsorption:</p>\n<table>\n<tbody>\n<tr>\n<td><strong>Disorder</strong></td>\n<td><strong>Investigation</strong></td>\n</tr>\n<tr>\n<td>Celiac disease</td>\n<td>\n<p>Anti-tissue transglutaminase (anti-tTG)</p>\n<p>Anti-endomysial antibodies</p>\n<p>Mucosal biopsy showing villous atrophy, crypt hyperplasia, lamina propria infiltrates, and normal mucosal thickness.</p>\n</td>\n</tr>\n<tr>\n<td>Whipple's disease</td>\n<td>Mucosal biopsy showing PAS +ve macrophages in lamina propria</td>\n</tr>\n<tr>\n<td>Pancreatic insufficiency</td>\n<td>\n<p>Fecal elastase</p>\n<p>Fecal chymotrypsin</p>\n</td>\n</tr>\n<tr>\n<td>Small intestinal bacterial overgrowth (SIBO)</td>\n<td>\n<p>Due to Enterobacter or Pseudomonas - jejunal aspirate&nbsp;&gt;10<sup>3</sup>&nbsp;CFU</p>\n<p>Due to other organisms - jejunal aspirate&nbsp;&gt;10<sup>5</sup>&nbsp;CFU</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are evaluating the metabolic changes in patients with various conditions. Increased basal metabolic rate will be seen in patients with which of the following condition?",
    "choices": [
      {
        "id": 1,
        "text": "Acromegaly"
      },
      {
        "id": 2,
        "text": "Starvation"
      },
      {
        "id": 3,
        "text": "Protein energy malnutrition"
      },
      {
        "id": 4,
        "text": "Addison disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Increased basal metabolic rate (BMR)</strong> is seen in patients with <strong>acromegaly</strong>.</p>\n<p><strong>High energy-requiring states</strong> such as fever, pregnancy, pheochromocytoma, adrenergic agonist drugs, cancer, congestive heart failure, <strong>acromegaly</strong>, polycythemia, and Paget&rsquo;s disease of the bone are associated with high BMR. Obesity, <strong>starvation</strong> or anorexia, hypogonadism, <strong>Addison's</strong> syndrome, and immobilization are associated with <strong>low BMR.</strong></p>\n<p><strong>BMR</strong> is the energy required by an awake individual during rest. It is the minimum energy required to carry out vital functions of the body such as respiration, circulation, etc.&nbsp;</p>\n<p>It is calculated using oxygen consumption, calorific value (energy produced by 1 liter of oxygen), and surface area.</p>\n<p><strong>BMR</strong> is dependent on various factors:</p>\n<ul>\n<li><strong>Men</strong> have <strong>more BMR</strong> than women of the same body weight and age because women&rsquo;s bodies contain proportionally more adipose tissue and fewer muscles.&nbsp;</li>\n<li><strong>Elderly people</strong> have <strong>less BMR</strong>&nbsp;as the muscle tissue gets infiltrated with fat as age advances.</li>\n<li>Low environmental temperature is associated with high BMI.</li>\n<li>Exercise increases BMR.</li>\n<li>The thyroid hormone has a direct role in increasing BMR.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following urine tests with respective substances they detect.",
    "choices": [
      {
        "id": 1,
        "text": "1-D, 2-A, 3-B, 4-C"
      },
      {
        "id": 2,
        "text": "1-D, 2-C, 3-B, 4-A"
      },
      {
        "id": 3,
        "text": "1-D, 2-C, 3-A, 4-B"
      },
      {
        "id": 4,
        "text": "1-A, 2-C, 3-B, 4-D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correctly matched option is&nbsp;<strong>1-D, 2-C, 3-B,</strong><strong>&nbsp;4-A.</strong></p>\n<p><strong>Rothera&rsquo;s test</strong>&nbsp;by&nbsp;<strong>nitroprusside reagent</strong>&nbsp;is a specific test used to detect whether&nbsp;<strong>acetone</strong>&nbsp;or&nbsp;<strong>acetoacetate</strong>&nbsp;is present in the given sample of urine. A&nbsp;<strong>purple ring</strong>&nbsp;at the junction of two liquids indicates a positive test. Rothera's test does&nbsp;<strong>not detect</strong>&nbsp;&beta;-hydroxybutyrate.&nbsp;&nbsp;</p>\n<p>The other test used for the purpose of detecting <strong>acetoacetate</strong> <strong>only</strong> is the <strong>ferric chloride test</strong>. It shows a burgundy red color that is graded from +1 to +4. False-positive results occur with drugs like salicylates and phenols.&nbsp;</p>\n<p>The image below shows the purple ring formed by a positive Rothera test.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/049db47cd2da4b4a8c7d42d7e9ae4d46x720x540.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/95a57e39e46642aa9585b57c2b99553ax720x404.JPEG"
    ]
  },
  {
    "text": "A 60-year-old patient presented to the casualty in an unconscious state. His blood sugars were high, the ABG(Arterial blood gas) analysis showed metabolic acidosis, and urine tests were positive for ketone bodies. The ketone bodies were not utilized in the liver because it lacks the enzyme:",
    "choices": [
      {
        "id": 1,
        "text": "\u03b2 hydroxybutyrate dehydrogenase"
      },
      {
        "id": 2,
        "text": "Thiophorase"
      },
      {
        "id": 3,
        "text": "Thiolase"
      },
      {
        "id": 4,
        "text": "Ketoacyl reductase"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Ketone bodies are not utilized in the <strong>liver</strong> because it <strong>lacks</strong> the enzyme<strong> thiophorase.</strong></p>\n<p>The above clinical scenario points to the diagnosis of <strong>diabetic ketoacidosis</strong> characterized by excess production of ketone bodies. The liver cannot utilize the ketone bodies (acetoacetate, &beta;-hydroxybutyrate, and acetone) because it lacks the enzyme thiophorase (also called succinyl CoA acetoacetyl CoA transferase).</p>\n<p>Ketone bodies are synthesized in the liver mitochondria (by <strong>ketogenesis</strong>) and transported in the blood to the <strong>peripheral tissues. </strong>Here they are <strong>utilized</strong> by the following steps:</p>\n<ol>\n<li>&beta;-hydroxybutyrate (the most predominant ketone body) is oxidized to acetoacetate by <strong>&beta;-hydroxybutyrate dehydrogenase</strong> producing NADH.</li>\n<li>Acetoacetate is then activated to acetoacetyl CoA by transferring a CoA molecule from succinyl CoA by <strong>succinyl CoA-acetoacetyl CoA transferase (thiophorase).</strong></li>\n<li>Acetoacetyl CoA is cleaved into two acetyl CoA molecules by <strong>thiolase</strong> and oxidized into CO<sub>2</sub> by the TCA cycle.</li>\n</ol>\n<div class=\"page\" title=\"Page 226\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>When higher than normal ketone bodies are present in the blood or urine, it is called <strong>ketonemia</strong> or <strong>ketonuria</strong>, respectively. The overall condition is called <strong>ketosis</strong>. The metabolism of free fatty acids to produce ketone bodies is exaggerated in pathologic states such as <strong>starvation</strong> and <strong>diabetes</strong> <strong>mellitus</strong>, thus causing ketosis. The continued buffering and excretion of ketone bodies deplete the alkali reserve, causing <strong>ketoacidosis</strong>.</p>\n<p>&nbsp;</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 4-year-old child has a history of biting his lips and fingers. On evaluation, you notice lip lacerations, missing portions of fingers of his hands, and developmental delay. On inquiry, the parents say that two male cousins on the mother's side with similar complaints have been diagnosed with a genetic disorder. Lab reports reveal hyperuricemia. Which enzyme is most likely deficient in this child?",
    "choices": [
      {
        "id": 1,
        "text": "Purine nucleoside phosphorylase"
      },
      {
        "id": 2,
        "text": "Hypoxanthine-guanine phosphoribosyltransferase"
      },
      {
        "id": 3,
        "text": "Adenine phosphoribosyltransferase"
      },
      {
        "id": 4,
        "text": "Adenosine deaminase"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario of <strong>self-mutilating behavior,</strong> <strong>delayed developmental milestones, positive family history and hyperuricemia</strong> is highly suggestive of <strong>Lesch-Nyhan syndrome</strong>. It occurs due to the <strong>complete\u00a0deficiency</strong> of<strong>\u00a0</strong>the enzyme<strong> hypoxanthine-guanine phosphoribosyltransferase (HGPRT)\u00a0</strong>involved in the salvage pathway.</p>\n<p><strong>Purines</strong> produced in the body or introduced through diet can be converted to <strong>nucleoside triphosphates</strong> to be reused by the body. This pathway is called the <strong>salvage pathway</strong> for purines and is shown below</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d295845ea4924b19ab07ca33a23f65bex1280x1203.JPEG"
    ]
  },
  {
    "text": "An exclusively breastfed newborn was brought with vomiting and diarrhea that developed since birth. On examination, the baby is jaundiced and has hepatomegaly. Blood glucose level was low and erythrocyte galactose-1-phosphate level was elevated. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Fructosuria"
      },
      {
        "id": 2,
        "text": "von Gierke's disease"
      },
      {
        "id": 3,
        "text": "Classical galactosemia"
      },
      {
        "id": 4,
        "text": "Hereditary fructose intolerance"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical scenario of an exclusively breastfed infant with vomiting, diarrhea, jaundice, hypotonia, and hepatomegaly with elevated erythrocyte galactose-1-phosphate level is suggestive of <strong>classical galactosemia.</strong></p>\n<p><strong>Classical galactosemia&nbsp;</strong>is an&nbsp;autosomal recessive disorder.<strong>&nbsp;</strong>The enzyme deficient here is&nbsp;<strong>galactose-1-phosphate uridyl transferase </strong>(GALT).<strong>&nbsp;</strong>Normally, newborns receive up to 40% of their calorie intake as lactose (glucose + galactose). Without GALT, the infant cannot metabolize <strong>galactose 1-phosphate,&nbsp;</strong>which&nbsp;accumulates and causes injury to the kidney, liver, and brain.</p>\n<p>Clinical features include <strong>vomiting, hypoglycemia,</strong> hepatomegaly, jaundice, congenital cataracts, aminoaciduria, and&nbsp;<strong>failure to thrive</strong>. There is an increased incidence of&nbsp;<em>Escherichia coli</em> neonatal <strong>sepsis</strong>. Long-term <strong>complications</strong> include speech delays, learning impairment, motor dysfunction, and hypogonadotropic hypogonadism (in females).</p>\n<div class=\"page\" title=\"Page 136\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The presence of galactose in urine (positive Benedict's test), elevated blood galactose level, and elevated&nbsp;erythrocyte galactose-1-phosphate level help in confirming the diagnosis.</p>\n</div>\n</div>\n</div>\n<p>Treatment is a <strong>galactose-free diet</strong>. Supportive therapy and the prevention of complications are important.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/273ae933e27941edbdbe9e4f99d5dbe6x1280x1129.JPEG"
    ]
  },
  {
    "text": "A 15-month-old child is brought because of developmental delay and clouded appearance of the cornea in both eyes. The other examination findings of the child are shown in the image below. The elder sibling of the child also has similar findings. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Mucopolysaccharidoses"
      },
      {
        "id": 2,
        "text": "Von Gierke\u2019s disease"
      },
      {
        "id": 3,
        "text": "Down\u2019s syndrome"
      },
      {
        "id": 4,
        "text": "Refsum disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows coarse facial features, umbilical hernia, claw hand, and thoracolumbar gibbus. These features along with corneal opacity and developmental delay are highly suggestive of <strong>mucopolysaccharidoses (MPS)</strong>.</p>\n<p>The features mentioned in the above question are suggestive of <strong>MPS type 1</strong>. It is caused by the deficiency of <strong>&alpha;-l-iduronidase</strong>, leading to the storage of dermatan and heparan sulfate. The classical form of MPS 1 is known as <strong>Hurler syndrome</strong>, the intermediate form as <strong>Hurler&ndash;Scheie</strong>, and the most attenuated form is known as <strong>Scheie syndrome</strong>.</p>\n<p>Mucopolysaccharidoses <strong>(MPS)</strong> are a group of genetic disorders (inborn errors of metabolism) affecting <strong>glycosaminoglycans</strong> (GAGs). They are inherited in an<strong> autosomal recessive </strong>manner and involve mutations of genes encoding <strong>lysosomal hydroxylases</strong>.&nbsp;Diagnosis is by demonstration of GAGs in urine or tissue biopsy samples, assays of suspected defective enzymes in white blood cells, fibroblasts, or serum, and testing for specific genes.</p>\n<p>The given image shows cloudy cornea in mucopolysaccharidosis:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8daac3edfe034dd4a3b878b6640c5e67.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d08c76ac37d3434aaadbe26cc4fb9755x300x254.PNG"
    ]
  },
  {
    "text": "Which of the following phospholipids is found only in the mitochondria and helps in the mitochondrial function ?",
    "choices": [
      {
        "id": 1,
        "text": "Cephalin"
      },
      {
        "id": 2,
        "text": "Cardiolipin"
      },
      {
        "id": 3,
        "text": "Lecithin"
      },
      {
        "id": 4,
        "text": "Plasmalogen"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Cardiolipin</strong>\u00a0is the\u00a0phospholipid found <strong>only</strong> in the <strong>mitochondria.\u00a0</strong></p>\n<p>It is an important component of the\u00a0<strong>inner mitochondrial membrane</strong>, where it is essential for the following:</p>\n<ul>\n<li><strong>Optimal function</strong> of numerous mitochondrial enzymes that are involved in mitochondrial <strong>energy metabolism</strong>.</li>\n<li><strong>Maintenance of the structure</strong> of the mitochondrial membrane.</li>\n</ul>\n<p>Clinical correlate:</p>\n<p><strong>Decreased cardiolipin</strong> or alteration in its metabolism results in<strong>\u00a0</strong>mitochondrial dysfunction<strong>\u00a0</strong>seen in<strong> Barth syndrome (cardioskeletal\u00a0myopathy)</strong> which is <span class=\"ILfuVd\"><span class=\"hgKElc\">characterized by an enlarged and weakened heart (<strong>dilated cardiomyopathy</strong> ), weakness in muscles used for movement (<strong>skeletal myopathy</strong>), recurrent infections due to small numbers of white blood cells (<strong>neutropenia</strong>), and <strong>short stature</strong>.</span></span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old man is found to have right-sided colon cancer. His father had similar colon cancer and died at the age of 40. His paternal aunt suffers from endometrial cancer and his paternal uncle also suffers from urothelial cancer. There is no history of familial adenomatous polyposis. Abnormality in which of the following DNA repair mechanisms is responsible for this patient's condition?",
    "choices": [
      {
        "id": 1,
        "text": "Nucleotide excision repair"
      },
      {
        "id": 2,
        "text": "Homologous recombination"
      },
      {
        "id": 3,
        "text": "Base excision repair"
      },
      {
        "id": 4,
        "text": "Mismatch repair"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario is suggestive of <strong>Lynch syndrome </strong>or<strong>\u00a0hereditary nonpolyposis colorectal cancer</strong> (HNPCC) and <strong>mismatch repair </strong>is\u00a0the defective DNA repair mechanism here.\u00a0</p>\n<p><strong>HNPCC</strong> is an <strong>autosomal dominant</strong> genetic condition that is associated with a high risk of <strong>colon cancer</strong><sup id=\"cite_ref-1\" class=\"reference\"></sup>\u00a0as well as other cancers including endometrial cancer (second most common), cancers of the stomach, ovary, ureters, etc. It is the most common cause of the syndromic form of colon cancer. Colon cancers are seen at <strong>younger</strong> ages and usually on the <strong>right</strong> side.</p>\n<p>DNA mismatch repair proteins<strong>\u00a0function as spell checkers</strong>\u00a0during DNA replication by correcting the\u00a0<strong>incorrect pairing.</strong>\u00a0In HNPCC, the proofreading function of the mismatch repair systems (majorly\u00a0<strong><em>MLH1\u00a0</em></strong><em>and</em><strong>\u00a0<em>MSH2</em></strong><em>)</em>\u00a0is lost leading to the accumulation of errors throughout the genome.\u00a0The genomes of these patients show <strong>microsatellite instability</strong>,\u00a0which is characterized by changes in the length of short repeats.</p>\n<table width=\"622\">\n<tbody>\n<tr>\n<td><strong>Damaging agents</strong></td>\n<td><strong>Damage caused</strong></td>\n<td><strong>Repair mechanisms</strong></td>\n</tr>\n<tr>\n<td>\n<p>Ionizing radiation</p>\n<p>X-rays</p>\n<p>Anti-tumor drugs</p>\n</td>\n<td>\n<p>Double-strand breaks</p>\n<p>Single-strand breaks</p>\n<p>Intrastrand crosslinks</p>\n<p>Interstrand crosslinks</p>\n</td>\n<td>Non-homologous end joining (NHEJ)</td>\n</tr>\n<tr>\n<td>\n<p>UV light</p>\n<p>Chemicals</p>\n</td>\n<td>\n<p>Bulky adducts</p>\n<p>Pyrimidine dimers</p>\n</td>\n<td>Nucleotide excision repair (NER)</td>\n</tr>\n<tr>\n<td>\n<p>Oxygen radicals</p>\n<p>Hydrolysis\u00a0</p>\n<p>Alkylating agents</p>\n</td>\n<td>\n<p>Abasic sites single-strand breaks</p>\n<p>8-oxoguanine lesions</p>\n</td>\n<td>Base excision repair (BER)</td>\n</tr>\n<tr>\n<td>Replication errors</td>\n<td>\n<p>Bases mismatch</p>\n<p>Insertions</p>\n<p>Deletions</p>\n</td>\n<td>Mismatch repair (MMR)</td>\n</tr>\n</tbody>\n</table>\n<p>Other options:</p>\n<p>Option A: Defects in the\u00a0<strong>nucleotide excision repair</strong>\u00a0pathway are seen in patients with\u00a0<strong>xeroderma pigmentosum.</strong></p>\n<p>Option B: Defects in\u00a0<strong>non-homologous end-joining</strong> are seen in patients with subacute combined immunodeficiency syndrome\u00a0<strong>(SCID).</strong></p>\n<p>Option C: Defects in <strong>DNA base excision repair</strong> are seen in patients with MUTYH-associated polyposis (MAP) syndromes.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 9-year-old boy was brought with complaints of a fishy smell in his hands, feet, saliva, and urine. A urinalysis revealed the substance responsible for the odor, and a diagnosis of Fish odor syndrome was made. Which is the substance responsible for this characteristic body odor?",
    "choices": [
      {
        "id": 1,
        "text": "Trimethylamine-N-oxide"
      },
      {
        "id": 2,
        "text": "Trimethylamine"
      },
      {
        "id": 3,
        "text": "Flavin monooxygenase"
      },
      {
        "id": 4,
        "text": "Choline"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In the given clinical scenario of <strong>fish odor syndrome</strong>, the characteristic odor is due to&nbsp;<strong>trimethylamine (TMA)</strong>, which is released in sweat, urine, and breath.</p>\n<p><strong>Fish odour syndrome</strong>&nbsp;<strong>(trimethylaminuria)</strong> is an autosomal recessive disease. It is due to a deficiency of&nbsp;<strong>flavin-containing monooxygenase 3 (FMO3)</strong> which converts the amino acid, TMA (trimethylamine) to TMA-N-oxide (which is&nbsp;non-odorous) in the liver. <strong>TMA</strong> thus builds up in the body and is released in sweat, urine, and breath, giving off a strong <strong>odor</strong> of <strong>rotting</strong> <strong>fish</strong> from the body.</p>\n<p>Patients present in <strong>childhood</strong> or early adulthood with <strong>halitosis</strong> or <strong>body odor </strong>(distinctive fishy odor). Patients suffer from <strong>psychosocial problems</strong> such as shame, anxiety, depression, etc. Diagnosis is based on high levels of excreted trimethylamine (TMA) in the patient's urine.&nbsp;</p>\n<p>Treatment involves <strong>avoiding foods</strong> containing choline such as egg, liver, peas, and soy products. A <strong>short course of antibiotics</strong> such as neomycin, and metronidazole can be given which reduce the production of trimethylamine by the gut bacteria.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient died due to poisoning with a substance that inhibits the complex of the electron transport chain that is marked in the image below. Which of the following is likely to be the substance?",
    "choices": [
      {
        "id": 1,
        "text": "Rotenone"
      },
      {
        "id": 2,
        "text": "Oligomycin"
      },
      {
        "id": 3,
        "text": "Carbon monoxide"
      },
      {
        "id": 4,
        "text": "Antimycin A"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given image, the complex of the electron transport chain shown is<strong> complex IV</strong>\u00a0and<strong> carbon monoxide</strong> <strong>inhibits complex IV</strong>.</p>\n<div class=\"page\" title=\"Page 74\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Molecules like glucose undergo a series of oxidation reactions to produce CO<sub>2</sub> and water. The metabolic intermediates of these reactions donate electrons to NAD and FAD to form NADH and FADH2. They, in turn, donate a pair of electrons to a specialized set of electron carriers called the electron transport chain.\u00a0</p>\n<p>The electron chain is present in the inner mitochondrial membrane. It has are 4 protein complexes, named complex-I, II, III, and IV. These complexes are connected by two carriers- co-enzyme Q and cytochrome C. The complexes and their inhibitors are summarized below.</p>\n</div>\n</div>\n</div>\n<table style=\"height: 215px;\" width=\"599\">\n<tbody>\n<tr>\n<td style=\"width: 291.5px; text-align: left;\"><strong>Complexes of ETC</strong></td>\n<td style=\"width: 291.5px; text-align: left;\">\u00a0 <strong>Inhibitors</strong></td>\n</tr>\n<tr>\n<td style=\"width: 291.5px; text-align: left;\"><strong>Complex I</strong>: NADH-Q oxidoreductase</td>\n<td style=\"width: 291.5px; text-align: left;\">Piericidin, amobarbital, <strong>rotenone</strong></td>\n</tr>\n<tr>\n<td style=\"width: 291.5px; text-align: left;\">Complex II: Succinate-Q reductase</td>\n<td style=\"width: 291.5px; text-align: left;\">Carboxin, malonate</td>\n</tr>\n<tr>\n<td style=\"width: 291.5px; text-align: left;\"><strong>Complex III</strong>: Q- cyt c oxidoreductase</td>\n<td style=\"width: 291.5px; text-align: left;\">BAL(British anti-lewisite), <strong>antimycin A</strong></td>\n</tr>\n<tr>\n<td style=\"width: 291.5px; text-align: left;\"><strong>Complex IV</strong>:\u00a0 cytochrome c oxidase</td>\n<td style=\"width: 291.5px; text-align: left;\">Hydrogen sulfide, <strong>carbon monoxide,</strong> <strong>cyanide</strong></td>\n</tr>\n<tr>\n<td style=\"width: 291.5px; text-align: left;\">\u00a0ATP synthase</td>\n<td style=\"width: 291.5px; text-align: left;\">Oligomycin</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>\n<p>The following image shows different compounds inhibiting the different components in an electron transport chain.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f9d75a861ecc4acdaf34d5c944fe4f30.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1e6d472e821e46bd8c023a35fa29cba8x1279x969.JPEG"
    ]
  },
  {
    "text": "You are studying the visual pigment cycle in the physiology lab. Identify the substance that converts cis-retinal to trans-retinal.",
    "choices": [
      {
        "id": 1,
        "text": "Rhodopsin"
      },
      {
        "id": 2,
        "text": "Scotopsin"
      },
      {
        "id": 3,
        "text": "Metarhodopsin II"
      },
      {
        "id": 4,
        "text": "Lumirhodopsin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The substance that converts&nbsp;<strong>cis-retinal to trans-retinal</strong> is<strong> rhodopsin. </strong></p>\n<p>Rhodopsin&nbsp;is the visual pigment in the outer segment of&nbsp;rods responsible for scotopic vision (night/ dark vision). It is a light-sensitive pigment and consists of opsin and 11-cis retinal.</p>\n<div class=\"page\" title=\"Page 607\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>When <strong>light</strong> is absorbed by <strong>rhodopsin</strong>, it decomposes very quickly. This leads to an instantaneous change of the <strong>cis form of retinal</strong> <strong>into an all-trans form.&nbsp;</strong>This all-trans-retinal separates from scotopsin to produce bathorhodopsin. Bathorhodopsin is very unstable and decays to form lumirhodopsin, which then decays and forms metarhodopsin I, metarhodopsin II, and finally, into the completely split products scotopsin and all-trans-retinal.&nbsp;</p>\n<div class=\"page\" title=\"Page 608\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 608\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Metarhodopsin II</strong> is also called <strong>activated rhodopsin, </strong>and&nbsp;it produces excitatory changes in the rods, which transmits optic nerve action potentials. to the central nervous system.</p>\n<div class=\"page\" title=\"Page 608\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Re-formation of rhodopsin involves the conversion of the all-trans-retinal back into 11-cis retinal. This requires metabolic energy and is catalyzed by retinal isomerase. 11-cis retinal then recombines with scotopsin to form rhodopsin. Rhodopsin now remains stable until it is triggered by light energy to start decomposing again.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2e43ca34c9164192b171fa70fed6dc9dx1280x1623.JPEG"
    ]
  },
  {
    "text": "A 5-year-old female child with polyneuropathy, sensorineural deafness, and cerebellar ataxia has the following finding on fundus examination. Lab reveals increased blood levels of phytanic acid. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Refsum's disease"
      },
      {
        "id": 2,
        "text": "Usher syndrome"
      },
      {
        "id": 3,
        "text": "Zellweger syndrome"
      },
      {
        "id": 4,
        "text": "Adrenoleukodystrophy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows fundoscopy findings of <strong>retinitis pigmentosa</strong>. This along with the given clinical scenario is suggestive of <strong>Refsum&rsquo;s disease.&nbsp;</strong></p>\n<p>Refsum's disease is a rare autosomal recessive disorder that results from the <strong>defect</strong> in <strong>alpha oxidation</strong> of fatty acids such as phytanic acid in the <strong>peroxisome</strong> leading to <strong>elevated levels</strong> of<strong> phytanic acid</strong> in the blood.&nbsp;</p>\n<p>In this condition, the enzyme <strong>phytanoyl CoA hydroxylase</strong> is defective and causes the accumulation of phytanic acid. Clinically, patients present with dysmorphic facies and&nbsp;<strong>severe neurological symptoms </strong>such as&nbsp;polyneuropathy, retinitis pigmentosa, nerve deafness, ichthyosis, and cerebellar ataxia. Regression of symptoms is observed with <strong>restricted dietary intake</strong> of phytanic acid. Therefore, management includes avoiding sources of phytanic acid such as dairy products, meat, nuts, and green leafy vegetables.</p>\n<p>Note: The <strong>Zellwager spectrum</strong> is a continuum of diseases of persoxisome defects with Zellweger syndrome (most severe) at one end, neonatal adrenoleukodystrophy in the middle (intermediate severity) and infantile Refsum's disease (least severe) at the other end.</p>\n<p>Option B-&nbsp;<strong>Usher syndrome</strong>&nbsp;is characterized by <strong>sensorineural deafness </strong>and<strong> retinitis pigmentosa</strong> (but symptoms are not affected by restricting phytanic acid)</p>\n<p>Option C-&nbsp;<strong>Zellweger Syndrome</strong> is also known as <strong>cerebrohepatorenal syndrome.</strong> It is caused by mutations in the&nbsp;PEX/Peroxin<strong>&nbsp;</strong>family of genes involved in peroxisome biogenesis /peroxisomal enzymes.&nbsp;There is severe neurologic symptoms and patients usually die in the 1st year of life.</p>\n<p>Option D-&nbsp;<strong>Adrenoleukodystrophy</strong>&nbsp;is a&nbsp;<strong>disorder</strong> of <strong>&beta;-oxidation</strong> of fatty acids. There is a very large chain fatty acids buildup in the <strong>adrenal glands</strong>, the <strong>white matter</strong> of the brain, and <strong>testes</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f3fafd1946e742bf8e8de730b78c51ba.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "While conducting a health camp, you host an awareness campaign on healthy dietary practices. Which of the following substances would you say has the highest respiratory quotient immediately after consumption?",
    "choices": [
      {
        "id": 1,
        "text": "Mixed diet"
      },
      {
        "id": 2,
        "text": "Ghee"
      },
      {
        "id": 3,
        "text": "Wine"
      },
      {
        "id": 4,
        "text": "Meat"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The food item with the <strong>highest respiratory quotient (RQ)</strong> immediately after consumption&nbsp;is a&nbsp;<strong>mixed diet.&nbsp;</strong></p>\n<div class=\"page\" title=\"Page 833\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>This is because, <strong>immediately</strong> after a <strong>mixed meal</strong> (containing carbohydrates, protein, and fat), carbohydrates is the most commonly metabolized component, so the<strong> RQ reaches 1</strong>. But, a few hours after, the body would have used up the readily available carbohydrates, and the RQ reaches 0.70, due to fat metabolism.</p>\n</div>\n</div>\n</div>\n</div>\n<p>The respiratory quotient is the&nbsp;<strong>ratio&nbsp;</strong>of<strong>&nbsp;carbon dioxide produced</strong>/<strong>oxygen consumed.&nbsp;</strong>The<strong>&nbsp;respiratory quotient&nbsp;</strong>for various substances:</p>\n<table style=\"width: 223px; height: 143px;\">\n<tbody>\n<tr>\n<td style=\"width: 149.352px;\"><strong>Substance</strong></td>\n<td style=\"width: 56.6484px;\"><strong>RQ</strong></td>\n</tr>\n<tr>\n<td style=\"width: 149.352px;\">Carbohydrate</td>\n<td style=\"width: 56.6484px;\">1.00&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 149.352px;\">Protein (option D)</td>\n<td style=\"width: 56.6484px;\">0.81&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 149.352px;\">Fat (option B)</td>\n<td style=\"width: 56.6484px;\">0.71&nbsp;&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 149.352px;\">Alcohol (option C)</td>\n<td style=\"width: 56.6484px;\">0.66&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p>In diabetes, the rate of utilization of carbohydrates reduces in relation to fats, hence RQ falls (approximately 0.7). The RQ is lowest when ketosis is very active.</p>\n<p>Note: For all metabolic fuels, the <strong>energy</strong> produced is the same (<strong>20 kJ/L of oxygen</strong>).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An infant was brought with failure to thrive. On examination, the infant appears floppy with an enlarged tongue, hypotonia, skeletal muscle weakness, and hepatomegaly. The chest X-ray is shown below. Laboratory investigations reveal elevated levels of serum creatine kinase (CK), aspartate transaminase (AST), alanine transaminase (ALT), lactate dehydrogenase (LDH), and urine glucose tetrasaccharide. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Von Gierke disease"
      },
      {
        "id": 2,
        "text": "Pompe disease"
      },
      {
        "id": 3,
        "text": "Mc Ardle disease"
      },
      {
        "id": 4,
        "text": "Tarui disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>From the above-given clinical scenario and the radiograph showing\u00a0<strong>cardiomegaly,\u00a0</strong><strong>Pompe's disease</strong>\u00a0is the most likely diagnosis.</p>\n<p><strong>Pompe's disease </strong>(Type 2 glycogen storage disease) is an autosomal recessive disorder that occurs due to <strong>\u03b1-1,4-glucosidase (acid maltase)</strong> deficiencyleading to lysosomal glycogen accumulation in cardiac, skeletal, and smooth muscle cells. It can appear within <strong>weeks or months</strong> after birth (infantile Pompe disease) or may appear late in juvenile, childhood, or adulthood disease (late-onset Pompe disease).</p>\n<p>The clinical symptoms of Pompe disease are <strong>hypotonia </strong>(floppy infant),<strong>\u00a0skeletal muscle weakness, hepatomegaly, hypertrophic cardiomyopathy,</strong>\u00a0macroglossia, and chest X-ray image shows<strong> cardiomegaly</strong>.\u00a0</p>\n<p>Laboratory findings will show elevated levels of serum creatine kinase (CK), aspartate transaminase (AST), alanine transaminase (ALT), and lactate dehydrogenase (LDH). <strong>Urine glucose tetrasaccharide,</strong> a glycogen breakdown metabolite, is a reliable biomarker for disease severity and treatment response.</p>\n<p>Muscle biopsy shows the presence of vacuoles that stain positively for <strong>glycogen.\u00a0</strong>It is diagnosed by detecting the decreased activity of the enzyme,\u00a0<strong>\u03b1-1,4-glucosidase</strong> in the\u00a0dried blood spots, leukocytes, blood mononuclear cells, muscle, or cultured skin fibroblasts.</p>\n<p>Other options:</p>\n<div class=\"page\" title=\"Page 3442\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Option A: <strong>Von Gierke disease\u00a0</strong>occurs due to a deficiency of <strong>glucose-6-phosphatase.</strong>\u00a0Patients\u00a0present commonly in 3-4 months of age with\u00a0<strong>hypoglycemia, lactic acidosis,</strong> hepatomegaly, growth retardation, hyperuricemia, and hyperlipidemia.</p>\n<p>Option C: <strong>McArdle disease</strong> occurs due to <strong>myophosphorylase</strong> deficiency leading to reduced ATP generation.\u00a0The typical manifestations are myoglobinuria (secondary to rhabdomyolysis), muscle pain and cramps after heavy exercise. This pain may reduce after a brief period of rest and the patient may be able to perform an exercise. This is called the\u00a0<strong>second wind phenomenon</strong>. Cardiomyopathy is not seen in this condition.</p>\n<p>Option D: <strong>Tarui disease</strong>\u00a0(Type VII glycogen storage disorder)<strong>\u00a0</strong>occurs due to the deficiency of muscle <strong>phosphofructokinase.</strong> The main clinical features are exercise intolerance, cramps, <strong>hemolytic anemia,</strong> and myoglobinuria. There is no hypertrophic cardiomyopathy.</p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c1266082194e4afea9fa5e2630bf0a43.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A man presented with slurred speech and festinating shuffling gait. He tells that a course of levodopa was advised by his previous doctor but didn't show any effect. Which of the following mineral toxicity/ deficiency causes such features?",
    "choices": [
      {
        "id": 1,
        "text": "Selenium"
      },
      {
        "id": 2,
        "text": "Zinc"
      },
      {
        "id": 3,
        "text": "Manganese"
      },
      {
        "id": 4,
        "text": "Magnesium"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Manganese</strong> toxicity can cause&nbsp;<strong>secondary parkinsonism&nbsp;</strong>with features similar to atypical parkinsonism.</p>\n<div class=\"page\" title=\"Page 3430\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Secondary parkinsonism</strong> is characterized by Parkinson-like disease caused by agents/factors that cause <strong>basal ganglia dysfunction</strong>. These factors include drugs (tetrabenazine, metoclopramide, neuroleptics, flunarizine), stroke, tumor, infection, or toxins.&nbsp;Clinical features will be based on the region of the basal ganglia that has been damaged.</p>\n<p>Toxins such as carbon monoxide or manganese produce<strong>&nbsp;damage to the globus pallidus</strong>, and hence present with features resembling<strong>&nbsp;atypical parkinsonism&nbsp;</strong>such as:</p>\n</div>\n</div>\n</div>\n<ul>\n<li>Early speech and gait impairment</li>\n<li>Repeated early falls</li>\n<li><strong>Absence of rest tremor</strong></li>\n<li><strong>No motor asymmetry</strong></li>\n<li><strong>Poor or no response to levodopa</strong></li>\n<li>Aggressive clinical course</li>\n<li>Symptoms of severe early autonomic involvement</li>\n</ul>\n<div class=\"page\" title=\"Page 3430\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Manganese</strong>&nbsp;deficiency on the other hand can result in poor growth,&nbsp;bone demineralization, ataxia, convulsions, and abnormalities in carbohydrate and lipid metabolism.</p>\n<p>Other options</p>\n</div>\n</div>\n</div>\n<p>Option A:<strong> Selenium deficiency</strong> causes <strong>Keshan disease</strong> (cardiomyopathy in endemic regions of China); Excess selenium intake leads to <strong>selenosis&nbsp;</strong>(with hair loss, brittle nails, garlic breath odor, myopathy, and neurologic symptoms).</p>\n<p>Option B: <strong>Zinc toxicity</strong> leads to nausea, vomiting, headache, fever, and hypersalivation. <strong>Zinc deficiency</strong> causes dwarfism, hypogonadism, hypopigmented hair, hypogeusia, and impaired immunity.</p>\n<p>Option D: <strong>Hypomagnesemia</strong> is characterized by neurologic symptoms like tremors, muscle weakness, ataxia, delirium, and psychosis. <strong>Hypermagnesemia</strong> causes lethargy, weakness, hypotonia, weak tendon reflexes, and coma.</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old bodybuilder presented with fatigue on moderate exercise. He had recently started eating raw eggs for protein. Which of the following enzymes is likely deficient in him?",
    "choices": [
      {
        "id": 1,
        "text": "Glucose-6-phosphatase"
      },
      {
        "id": 2,
        "text": "Glycogen phosphorylase"
      },
      {
        "id": 3,
        "text": "Pyruvate carboxylase"
      },
      {
        "id": 4,
        "text": "Phosphoenolpyruvate carboxykinase"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient developed <strong>pyruvate carboxylase</strong> enzyme <strong>deficiency.</strong></p>\n<p>Individuals who eat an excess of <strong>uncooked</strong> <strong>egg-white,</strong> develop <strong>biotin deficiency</strong> and as a result deficiency of the carboxylase enzymes. This is because a protein called, <strong>avidin</strong> present in the egg-white <strong>binds to biotin</strong> in the diet, and makes biotin unavailable for intestinal absorption.</p>\n<p>Biotin deficiency can cause:</p>\n<ul>\n<li>Dermatitis</li>\n<li>Mental status changes (depression, hallucinations)</li>\n<li>Paraesthesia</li>\n<li>Alopecia</li>\n</ul>\n<p>Biotin serves as a co-enzyme for the synthesis of several carboxylase enzymes such as:</p>\n<ul>\n<li style=\"font-weight: 400;\">Acetyl-CoA carboxylase</li>\n<li style=\"font-weight: 400;\">Pyruvate carboxylase</li>\n<li style=\"font-weight: 400;\">Propionyl CoA carboxylase</li>\n<li style=\"font-weight: 400;\">Methylcrotonyl-CoA carboxylase</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the type of collagen with its associated disease entity.",
    "choices": [
      {
        "id": 1,
        "text": "1-D, 2-A, 3-B, 4-C"
      },
      {
        "id": 2,
        "text": "1-D, 2-A, 3-C, 4-B"
      },
      {
        "id": 3,
        "text": "1-C, 2-B, 3-A, 4-D"
      },
      {
        "id": 4,
        "text": "1-C, 2-B, 3-D, 4-A"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correctly matched&nbsp;type of collagen with its associated disease entity is&nbsp;<strong>1-D, 2-A, 3-C, 4-B</strong>.&nbsp;</p>\n<div class=\"page\" title=\"Page 620\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Collagen</strong> is the most abundant protein and approximately 28 types have been isolated. The structure of collagen is a <strong>triple helix</strong> composed of 3 polypeptide chains having <strong>glycine</strong> residues at every third position.</p>\n<p><span style=\"font-size: 14px;\">Genetic defects in the various types of collagen found predominantly at specific sites lead to various diseases summarized in the table below.</span></p>\n</div>\n</div>\n</div>\n</div>\n<table style=\"height: 439px; width: 348px;\">\n<tbody>\n<tr>\n<td style=\"width: 166px;\">Type of Collagen</td>\n<td style=\"width: 209.87771606445312px;\">Distribution</td>\n<td style=\"width: 126.12228393554688px;\">Defect</td>\n</tr>\n<tr>\n<td style=\"width: 166px;\">Type I</td>\n<td style=\"width: 209.87771606445312px;\">\n<div class=\"page\" title=\"Page 604\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Noncartilaginous connective tissues, including bone, tendon, skin</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 126.12228393554688px;\">Osteogenesis imperfecta</td>\n</tr>\n<tr>\n<td style=\"width: 166px;\">Type II</td>\n<td style=\"width: 209.87771606445312px;\">\n<div class=\"page\" title=\"Page 604\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Cartilage, vitreous humor</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 126.12228393554688px;\">Stickler syndrome</td>\n</tr>\n<tr>\n<td style=\"width: 166px;\">Type III</td>\n<td style=\"width: 209.87771606445312px;\">\n<div class=\"page\" title=\"Page 604\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Extensible connective tissues, including skin, lung, and vascular system</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 126.12228393554688px;\">\n<p>Ehler Danos syndrome (Vascular sub-type)</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 166px;\">Type IV</td>\n<td style=\"width: 209.87771606445312px;\">&nbsp;\n<div class=\"page\" title=\"Page 604\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Basement membranes</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 126.12228393554688px;\">Alport syndrome</td>\n</tr>\n<tr>\n<td style=\"width: 166px;\">Type VII</td>\n<td style=\"width: 209.87771606445312px;\">&nbsp;\n<div class=\"page\" title=\"Page 604\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Dermal-epidermal junction</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 126.12228393554688px;\">Epidermolysis bullosa aquisita</td>\n</tr>\n</tbody>\n</table>\n<div class=\"page\" title=\"Page 3016\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>&nbsp;</p>\n<p>In <strong>osteogenesis imperfecta</strong>, there is a severe decrease in bone mass that makes bones brittle, associated with blue sclerae, dental abnormalities, progressive hearing loss, and positive family history.</p>\n<p><strong>Stickler syndrome</strong> is characterized by skeletal changes, orofacial abnormalities, and auditory abnormalities.</p>\n<p>In <strong>Ehler Danlos syndrome</strong> ( vascular subtype ) there are features of classic EDS ( skin and joint involvement ) as well as severe muscular hypotonia after birth, progressive kyphoscoliosis, osteopenia, occasional rupture of the eye globe, and great arteries.</p>\n<div class=\"page\" title=\"Page 3019\"><strong>Alport syndrome</strong> is characterized by the presence of a genetically abnormal basement membrane giving rise to proteinuria and hematuria.</div>\n</div>\n</div>\n</div>\n</div>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old female patient presents with the following finding as shown in the image below. On further investigation, she is found to have reduced levels of the enzyme UDP-glucuronosyltransferase. Which of the following disorders is she most likely suffering from?",
    "choices": [
      {
        "id": 1,
        "text": "Type I Crigler-Najjar syndrome"
      },
      {
        "id": 2,
        "text": "Gilbert syndrome"
      },
      {
        "id": 3,
        "text": "Dubin Johnson syndrome"
      },
      {
        "id": 4,
        "text": "Rotor syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>With the given clinical scenario and with reduced levels of enzyme UDP-glucuronosyltransferase, the patient is most likely suffering from <strong>Gilbert syndrome</strong>.\u00a0<br /><br /><strong>Gilbert syndrome</strong> is an autosomal recessive condition characterized by <strong>decreased activity</strong> of the <strong>enzyme\u00a0UDP-glucuronosyltransferase</strong>, which is responsible for the conjugation of bilirubin. This leads to <strong>unconjugated hyperbilirubinemia</strong>, that presents as yellowish discolouration of the sclera (icterus/jaundice) as seen in the given image.</p>\n<p>Individuals with Gilbert syndrome are usually <strong>asymptomatic</strong> except for <strong>intermittent episodes of jaundice</strong>, which usually occurs for the first time during <strong>adolescence</strong>, due to changes in the concentration of sex hormones.\u00a0Some patients may have complaints like malaise, fatigue, nausea, anxiety, loss of appetite, and abdominal discomfort. Symptoms are usually precipitated by <strong>triggers</strong> such as fasting, intercurrent illness, menstruation, and dehydration.</p>\n<div class=\"page\" title=\"Page 2601\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Administration of <strong>phenobarbital</strong> shows normalisation of the serum bilirubin concentration and hepatic bilirubin clearance.</p>\n<p>Gilbert syndrome usually doesn't require any treatment.</p>\n</div>\n</div>\n</div>\n</div>\n<p>Other options:<br /><br />Option A: <strong>Type I Crigler-Najjar syndrome</strong> is characterized by a complete deficiency of the enzyme\u00a0UDP-glucuronosyltransferase. It usually presents as severe congenital jaundice (serum bilirubin levels over 20 mg/dL) and accompanying brain damage.<br /><br />Options C and D: <strong>Dubin Johnson</strong> and <strong>Rotor syndrome</strong>\u00a0both have\u00a0elevated conjugated bilirubin in the blood, and are due to defective secretion of conjugated bilirubin into the bile.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/239cf30b48884c9598691ba84680bb40.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 7-year-old child is brought with a history of impaired vision and severe photophobia. On examination, he has light hair, light skin color, and pale blue eyes. A disorder due to deficiency in the enzyme tyrosinase is suspected. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Albinism"
      },
      {
        "id": 2,
        "text": "Tyrosinemia type 1"
      },
      {
        "id": 3,
        "text": "Tyrosinemia type 2"
      },
      {
        "id": 4,
        "text": "Homocystinuria"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><span data-preserver-spaces=\"true\">The clinical scenario along with the deficiency of the&nbsp;</span><span data-preserver-spaces=\"true\">enzyme&nbsp;</span><strong><span data-preserver-spaces=\"true\">tyrosinase&nbsp;</span></strong><span data-preserver-spaces=\"true\">point to the diagnosis of <strong>albinism</strong>.&nbsp;</span></p>\n<p><strong><span data-preserver-spaces=\"true\">Oculocutaneous albinism</span></strong><span data-preserver-spaces=\"true\">&nbsp;<strong>(OCA)</strong> is a group of inherited disorders characterized by a reduction or complete lack of <strong>melanin</strong> pigment in the <strong>skin, hair,</strong> and<strong> eyes</strong> leading to hypopigmentation.&nbsp;It is either due to defective melanosomes or defective protein involved in the formation and transfer of melanin. </span></p>\n<p><span data-preserver-spaces=\"true\">There are 7 types of&nbsp;nonsyndromic albinism (OCA1 to OCA7).<strong> OCA type 1</strong> is characterised by reduced or absent <strong>tyrosinase</strong> activity.&nbsp;</span><span data-preserver-spaces=\"true\">The<strong> first step</strong> in <strong>melanin synthesis</strong> involves the oxidation of L-tyrosine to DOPA by the enzyme tyrosinase.&nbsp;</span>Tyrosinase further acts on DOPA to form dopaquinone, which undergoes a series of reactions to form melanin.&nbsp;</p>\n<p><span data-preserver-spaces=\"true\">Clinical features include&nbsp;<strong>white hair,</strong>&nbsp;<strong>white skin, </strong>and&nbsp;<strong>iris</strong> appearing&nbsp;<strong>blue-grey</strong> in oblique light. Ocular manifestations include&nbsp;<strong>photophobia,</strong> nystagmus, and&nbsp;<strong>decreased visual acuity.&nbsp;</strong></span></p>\n<p><span data-preserver-spaces=\"true\">Other options-</span></p>\n<p>Option B- <strong>Tyrosinemia type 1</strong> is caused due to the deficiency of the enzyme <strong>fumarylacetoacetate hydrolase</strong>. Clinical findings include&nbsp;cirrhosis, liver failure, rickets, failure to thrive, peripheral neuropathy, and boiled cabbage odour.&nbsp;</p>\n<p>Option C- <strong>Tyrosinemia type 2</strong> is caused due to the deficiency of the enzyme <strong>tyrosine transaminase.</strong> Clinical findings include palmoplantar keratosis, painful corneal erosions with photophobia, and <strong>learning disability.&nbsp;</strong></p>\n<p>Option D- <strong>Homocystinuria</strong> is caused due to <strong>cystathionine beta-synthase</strong> deficiency. Clinical findings include lens dislocation, thrombotic vascular disease, <strong>intellectual</strong> <strong>disability</strong>, and osteoporosis.</p>\n<p>Given below is an image of a young child with OCA showing white hair, skin, and pale iris:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/36fbf01e9a85437596b312b2a4c032cex794x527.JPEG"
    ]
  },
  {
    "text": "A middle-aged man who is a chronic alcoholic presented to the casualty with confusion, ataxia, and diplopia. What is the protocol to treat this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin B1 injection followed by glucose infusion"
      },
      {
        "id": 2,
        "text": "Glucose infusion followed thiamine injection"
      },
      {
        "id": 3,
        "text": "Glucose infusion alone"
      },
      {
        "id": 4,
        "text": "Thiamine infusion alone"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above clinical history is suggestive of <strong>Wernicke's&nbsp;encephalopathy.&nbsp;</strong>The current standard of treatment for patients with symptoms of Wernicke's encephalopathy is to give<strong>&nbsp;thiamine 100 mg intravenously before</strong> administering<strong> glucose-containing</strong>&nbsp;IV<strong> fluids.</strong></p>\n<p>Thiamine deficiency&nbsp;leads to the following:</p>\n<ol>\n<li><strong>Wernicke&rsquo;s encephalopathy:&nbsp;</strong>It is more commonly seen in alcoholics with chronic thiamine deficiency. It is characterized by:\n<ul>\n<li>Global confusion</li>\n<li>Truncal ataxia</li>\n<li>Ophthalmoplegia</li>\n<li>Horizontal nystagmus&nbsp;</li>\n</ul>\n</li>\n<li><strong>Korsakoff psychosis:</strong>&nbsp;symptoms in addition to those of Wernicke's encephalopathy include:\n<ul>\n<li>Memory loss</li>\n<li><strong>Confabulation</strong></li>\n</ul>\n</li>\n<li><strong>Beriberi:&nbsp;</strong>It can present with:\n<ul>\n<li><strong>Dry</strong> beriberi: sensorimotor peripheral neuropathy, muscle weakness</li>\n<li><strong>Wet</strong> beriberi: tachycardia, cardiomegaly, high-output cardiac failure</li>\n</ul>\n</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young man with chronic bacterial prostatitis was treated with cotrimoxazole. During treatment, he developed malaise, jaundice, abdominal pain, and dark urine. His blood picture is given below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hemolytic uremic syndrome"
      },
      {
        "id": 2,
        "text": "Autoimmune hemolytic anemia"
      },
      {
        "id": 3,
        "text": "Paroxysmal nocturnal hemoglobinuria"
      },
      {
        "id": 4,
        "text": "Glucose-6 phosphate dehydrogenase deficiency"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The most likely diagnosis in the above case scenario is glucose-6-phosphate dehydrogenase <strong>(G6PD) deficiency.</strong></p>\n<p>The clinical features are suggestive of an <strong>acute hemolytic reaction</strong> following the administration of <strong>cotrimoxazole</strong>.\u00a0A hemolytic attack starts with abrupt onset of malaise, weakness, and abdominal or lumbar pain. After an interval of several hours to 2\u20133 days, the patient develops jaundice and often dark urine, due to hemoglobinuria.\u00a0</p>\n<p>The peripheral smear shows characteristic <strong>\"bite cells\"</strong> or <strong>degmacytes</strong> or <strong>blister cells</strong>. In G6PD deficiency\u00a0uncontrolled oxidative stress causes hemoglobin to denature and form Heinz bodies. Bite cells result from\u00a0the <strong>removal of Heinz bodies</strong> by macrophages in the spleen.</p>\n<p>Cotrimoxazole contains <strong>sulfamethoxazole</strong> which triggers a <strong>hemolytic reaction</strong> in people with <strong>G6PD deficiency</strong>.</p>\n<p>Drugs that carry a risk of clinical hemolysis in persons with G6PD Deficiency:</p>\n<table style=\"border-collapse: collapse; width: 21.822%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 41.1525%;\">Antimalarials</td>\n<td style=\"width: 58.8797%;\">\n<p>Primaquine</p>\n<p><strong>Chloroquine</strong></p>\n<p>Dapsone/chlorproguanil</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 41.1525%;\">\n<p>Sulphonamides/</p>\n<p>sulphones</p>\n</td>\n<td style=\"width: 58.8797%;\">\n<p><strong>Sulfamethoxazole</strong></p>\n<p>Sulfasalazine</p>\n<p>Sulfisoxazole</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 41.1525%;\">\n<p>Antibacterial/</p>\n<p>antibiotics</p>\n</td>\n<td style=\"width: 58.8797%;\">\n<p><strong>Cotrimoxazole</strong></p>\n<p>Ciprofloxacin</p>\n<p>Chloramphenicol</p>\n<p>Nalidixic acid</p>\n<p>Norfloxacin</p>\n<p><strong>Nitrofurantoin</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 41.1525%;\">Others</td>\n<td style=\"width: 58.8797%;\">\n<p>Naphthalene</p>\n<p><strong>Methylene blue</strong></p>\n<p>Rasburicase\u00a0</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/12a46f3301884114b2bdc91ab2005c81.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following modifications occur posttranscriptionally to produce a mature eukaryotic mRNA?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 4"
      },
      {
        "id": 2,
        "text": "1, 2, 5"
      },
      {
        "id": 3,
        "text": "3, 4, 6"
      },
      {
        "id": 4,
        "text": "3, 5, 6"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Capping</strong>,&nbsp;<strong>polyadenylation</strong>, and&nbsp;<strong>splicing&nbsp;</strong>are the modifications that occur <strong>posttranscriptionally</strong> to produce a mature eukaryotic mRNA.&nbsp;<strong>Phosphorylation</strong>,&nbsp;<strong>hydroxylation</strong>, and&nbsp;<strong>trimming&nbsp;</strong>are modifications that occur&nbsp;<strong>posttranslationally</strong>.</p>\n<p>A mature eukaryotic mRNA is formed after the pre-mRNA components of the heterogenous nuclear RNA (hnRNA) undergo the following posttranscriptional modifications in the nucleus:</p>\n<ol>\n<li><strong>Addition of a 5&prime; cap</strong>: A 7-methylguanosine is attached to the 5&prime; terminal end of the mRNA via a 5&prime;-to-5&prime; triphosphate linkage. This stabilizes the mRNA and allows initiation of translation.</li>\n<li><strong>Addition of a 3&prime;-poly-A tail</strong>: The poly-A tail is added by the nuclear enzyme, polyadenylate polymerase, after clevage of the polyadenylation signal sequence (AAUAAA) found near the 3&prime; end of the mRNA. This terminates eukaryotic transcription. Furthermore, it stabilizes the mRNA, allows it to exit from the nucleus, and helps in translation.</li>\n<li><strong>Splicing</strong>: This is the process of removing introns (intervening sequences that do not code for proteins) and joining exons (the coding or expressed sequences), carried out by the spliceosome. Alternative splicing occurs in different tissues to produce varied number of proteins from a limited set of genes.</li>\n</ol>\n<table>\n<tbody>\n<tr>\n<td width=\"308\">\n<p>Protein coding RNA</p>\n</td>\n<td width=\"308\">\n<p>Non Protein coding RNA</p>\n</td>\n</tr>\n<tr>\n<td width=\"308\">\n<p>mRNA</p>\n</td>\n<td width=\"308\">\n<p>Ribosomal RNAs (rRNA)</p>\n<p>Long noncoding RNAs (lncRNAs)</p>\n<p>Transfer RNAs (tRNA)</p>\n<p>Small nuclear RNAs (snRNAs)</p>\n<p>Micro and silencing RNAs (miRNAs and siRNAs)</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient comes to you with vitamin D deficiency. You advise the patient to take a walk under sufficient sunlight everyday. What is the correct sequence of products formed during vitamin D synthesis?",
    "choices": [
      {
        "id": 1,
        "text": "4-3-2-1"
      },
      {
        "id": 2,
        "text": "1-2-3-4"
      },
      {
        "id": 3,
        "text": "1-3-2-4"
      },
      {
        "id": 4,
        "text": "1-4-3-2"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correct sequence of products formed during vitamin D synthesis is <strong>1-2-3-4</strong>.</p>\n<p>Vitamin D is obtained by synthesis in the skin with adequate sunlight exposure or dietary supplementation. It helps in regulating calcium absorption and homeostasis. Deficiency results in rickets in children and osteomalacia in adults and is a common problem in areas with inadequate sunlight.</p>\n<p>The sequence of vitamin D synthesis is:</p>\n<ol>\n<li><strong>Skin</strong>:\u00a0<strong>7-dehydrocholesterol</strong>\u00a0is nonenzymatically converted to <strong>previtamin D</strong> on exposure to ultraviolet light. It is converted to\u00a0<strong>cholecalciferol</strong>, which then enters the bloodstream.</li>\n<li><strong>Liver</strong>:\u00a0Cholecalciferol is hydroxylated to form\u00a0<strong>25-hydroxyvitamin D\u00a0</strong>(calcidiol), which is bound to a vitamin D-binding globulin and released into the bloodstream. This is the <strong>main storage form</strong> of vitamin D.\u00a0</li>\n<li><strong>Kidney</strong>:<strong>\u00a0</strong><strong>25-hydroxyvitamin D\u00a0</strong>is further hydroxylated to form\u00a0<strong>1,25 dihydroxyvitamin D</strong> (calcitriol). This is the <strong>biologically active form</strong> of vitamin D. In some cases, it can also undergo 24-hydroxylation to form an inactive metabolite called 24,25-dihydroxyvitamin D.</li>\n</ol>\n<p>The steps of vitamin D synthesis are summarized below.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fde3485fa4914eaeae335f36ce978ac3x1280x1630.JPEG"
    ]
  }
];
        let quizName = 'Biochemistry Test';
        const quizFilename = 'biochemistry-test-a3600a43.html';
        let hierarchy = ["Marrow", "FMGE Test Series Subject", "2023"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>