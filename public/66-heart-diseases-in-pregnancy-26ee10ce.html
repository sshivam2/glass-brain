<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>66 Heart Diseases In Pregnancy - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Obstetrics & Gynecology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">14</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>All of the following physiological changes in the cardiovascular system during pregnancy increase except?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Heart rate"
      },
      {
        "id": 2,
        "text": "Blood pressure"
      },
      {
        "id": 3,
        "text": "Cardiac output"
      },
      {
        "id": 4,
        "text": "Stroke volume"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option: Option B </strong></p>\n\n<p><strong>Explanation</strong></p>\n\n<p>Blood pressure reduces because there is decrease in <span class=\"customMeta\" data-dictid=\"255674f3271692777195c172d86daf\">peripheral</span> <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> resistance due to the <span class=\"customMeta\" data-dictid=\"7aa9f8d34616927772018c11493bbc\">vasodilation</span> in pregnancy\u00a0</p>\n\n<p>Note - Ejection fraction in normal pregnancy remains unchanged.\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/PgYFKFO7LxcEkI6bFAEU1749227554.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/7duWIOJhBJgrBajQGpvB1749227614.mp3"
  },
  {
    "text": "<p>A 28 Y/o pregnant woman at 24 weeks gestation comes to the prenatal clinic for a routine check-up. She mentions she was diagnosed with congenital heart disease as a child but hasn't had any significant symptoms in recent years. Which of the following is the most common congenital heart disease seen in pregnant women?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Tetralogy of Fallot"
      },
      {
        "id": 2,
        "text": "Mitral stenosis"
      },
      {
        "id": 3,
        "text": "Atrial septal defect"
      },
      {
        "id": 4,
        "text": "MVP associated mitral stenosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Atrial septal defect:</strong></p>\n\n<ul>\n\t<li>ASD is the most common <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> heart disease seen in pregnant women.</li>\n\t<li>ASD is a true hole in atrial septum, and secundum type defects account for 70%.</li>\n\t<li>Most ASD are <span class=\"customMeta\" data-dictid=\"d1a9a79f701692777182066af09044\">asymptomatic</span> till the 3rd/4th decade of life.</li>\n\t<li>Pregnancy with an unrepaired ASD is well tolerated until and unless <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> <span class=\"customMeta\" data-dictid=\"45372f6c361692777189ff3209e642\">hypertension</span> develops.</li>\n\t<li>The risk of ASD-related stroke is higher in pregnant women than in nonpregnant women.</li>\n</ul>\n\n<p>Most common <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> valvular heart disease in pregnancy is <span class=\"customMeta\" data-dictid=\"d93de7238d16927771922b27cb6086\">mitral</span> <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> prolapse. Most common heart disease affecting pregnant women in India is rheumatic heart disease and that too <span class=\"customMeta\" data-dictid=\"d93de7238d16927771922b27cb6086\">mitral</span> stenosis. Most common heart disease responsible for <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> mortality in our country is <span class=\"customMeta\" data-dictid=\"d93de7238d16927771922b27cb6086\">mitral</span> stenosis</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>M/C <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> heart disease seen in pregnant women</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Atrial septal defect</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>M/C cyanotic heart disease seen in pregnancy</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Tetralogy of Fallot\u00a0<strong>(Option A) </strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>M/C <span class=\"customMeta\" data-dictid=\"0f0b2969921692777180de24f0b0c0\">acquired</span> valvular disease in pregnancy</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Mitral stenosis\u00a0<strong>(Option B)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>M/C <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> valvular disease in pregnancy</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Mitral <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> <span class=\"customMeta\" data-dictid=\"c49cc1bac4169277719692da7af2cc\">prolapse</span> associated <span class=\"customMeta\" data-dictid=\"d93de7238d16927771922b27cb6086\">mitral</span> stenosis.\u00a0<strong>(Option D)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/yFGWHskJXJbXU4v30SJS1749228082.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/6sOsJi3BLTgDMYW3GxiU1749228146.mp3"
  },
  {
    "text": "<p>A 32 Y/o female in her third trimester of pregnancy with known case of Mitral Stenosis, presents to the clinic with complaints of increasing shortness of breath, fatigue, and swelling in her legs. On examination, she has an increased heart rate, jugular venous distension, B/L crepts on chest auscultation and pitting edema in her lower extremities. Which of the following is the most appropriate initial management for the patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Beta-blocker and strict bed rest"
      },
      {
        "id": 2,
        "text": "Furosemide and monitor fluid balance"
      },
      {
        "id": 3,
        "text": "Ace inhibitor and restrict sodium intake"
      },
      {
        "id": 4,
        "text": "Immediate delivery of the fetus for relieving cardiac stress."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Based on the above scenario, the patient is most likely suffering from <span class=\"customMeta\" data-dictid=\"1a5e87d16716927771888f364bce89\">Heart failure</span> during pregnancy.\u00a0Diuretics (furosemide) and fluid restriction are the initial management in patients with <span class=\"customMeta\" data-dictid=\"1a5e87d16716927771888f364bce89\">heart failure</span> in pregnancy.</p>\n\n<p><strong>Beta-blockers (Option A)</strong>\u00a0such as <span class=\"customMeta\" data-dictid=\"af2d8018661692777183068d459f2e\">carvedilol</span> can be given to patients with <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> heart failure, but this is not the initial management, and complete <span class=\"customMeta\" data-dictid=\"63b27629261692777182cc4d582eca\">bed rest</span> increases the risk of <span class=\"customMeta\" data-dictid=\"237b2a1dfa1692777200a074fd1072\">thromboembolism</span> in pregnant women.</p>\n\n<p>\u00a0</p>\n\n<p><strong>ACE inhibitors (Option C)</strong>\u00a0are contraindicated in pregnant women because of their effect on <span class=\"customMeta\" data-dictid=\"f375a3584316927772020efa386e3e\">fetal</span> kidneys.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Immediate delivery of the <span class=\"customMeta\" data-dictid=\"421fecf0e21692777202704942ac48\">fetus</span> (Option D)\u00a0</strong>is not indicated unless there is <span class=\"customMeta\" data-dictid=\"f375a3584316927772020efa386e3e\">fetal</span> <span class=\"customMeta\" data-dictid=\"afafb9026e1692777186e3dd168fa8\">distress</span> or when medical management is not sufficient.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/DVNPcUHxZd5MnYpfufIq1749228645.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/kQXHYJijkCgRqoZ4skBQ1749228772.mp3"
  },
  {
    "text": "<p>A 30 Y/o woman with a known history of heart disease is planning to conceive. She visits her cardiologist to discuss the potential risks associated with pregnancy, given her cardiac condition. Which of the following heart conditions is a contraindication to pregnancy?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Eisenmenger syndrome"
      },
      {
        "id": 2,
        "text": "ASD"
      },
      {
        "id": 3,
        "text": "VSD"
      },
      {
        "id": 4,
        "text": "PDA"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Eisenmenger syndrome is a late <span class=\"customMeta\" data-dictid=\"f58fecace01692777198d9a8593ade\">sequel</span> of <span class=\"customMeta\" data-dictid=\"dcc1f29e6c1692777180277cf3a03e\">acyanotic</span> heart diseases such as ASD, VSD or PDA. It is a severe <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> arterial hypertension, and pregnancy is contraindicated in such patients.</p>\n\n<p>Eisenmenger syndrome is the <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> disease with the highest risk of <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> mortality.</p>\n\n<p><strong>Cardiovascular conditions contraindicated to pregnancy:</strong></p>\n\n<ul>\n\t<li>Pulmonary arterial hypertension</li>\n\t<li>Severe <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">ventricular</span> <span class=\"customMeta\" data-dictid=\"3662597407169277718640a12868f5\">dysfunction</span> (NYHA III-IV or LVEF <30%)</li>\n\t<li>Prior <span class=\"customMeta\" data-dictid=\"def1dae579169277719548a99ad18e\">peripartum</span> <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">cardiomyopathy</span> with <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> effects</li>\n\t<li>Severe <span class=\"customMeta\" data-dictid=\"9a065f288c1692777191f5b93fa49b\">left heart</span> obstruction</li>\n\t<li>Severe aortic dilation</li>\n\t<li>Severe coarctation</li>\n\t<li>Severe AS and MS</li>\n\t<li>Marfan syndrome</li>\n</ul>\n\n<p>For such conditions, pregnancy is contraindicated. If pregnancy is wanted, then monthly <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> consultations should be done at a <span class=\"customMeta\" data-dictid=\"22e8a6f65016927772003e97740ab2\">tertiary</span> care hospital.</p>\n\n<p>\u00a0</p>\n\n<p>ASD, VSD and PDA (<strong>Options B, C, & D)\u00a0</strong>themselves are not contraindications for pregnancy.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/xvAFAWS8JM1f0dN1u1pq1749228895.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/O2intvkRS8NAn84FcJIL1749228988.mp3"
  },
  {
    "text": "<p>A 32 Y/o pregnant woman at 28 weeks gestation presents with complaints of progressive shortness of breath, fatigue, palpitations, and swelling in B/L ankles. On physical examination, the physician observes persistent jugular venous distension, a systolic murmur, and bilateral pitting edema. Which of the following is most concerning for heart disease in this patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Progressive shortness of breath"
      },
      {
        "id": 2,
        "text": "Fatigue"
      },
      {
        "id": 3,
        "text": "Bilateral pitting edema"
      },
      {
        "id": 4,
        "text": "Jugular venous distension with systolic murmur"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Based on the above scenario, the patient is most likely suffering from <span class=\"customMeta\" data-dictid=\"1a5e87d16716927771888f364bce89\">Heart failure</span> in pregnancy.\u00a0Persistent <span class=\"customMeta\" data-dictid=\"af7ff6c5fd1692777190f88c20b21b\">jugular</span> <span class=\"customMeta\" data-dictid=\"96e7e3fecc16927772018cb9f8c8cd\">venous</span> <span class=\"customMeta\" data-dictid=\"d141b433d2169277718681e3ff6bc3\">dilation</span> along with <span class=\"customMeta\" data-dictid=\"cf69f5256416927771991c21f264ae\">systolic</span> <span class=\"customMeta\" data-dictid=\"882af9bf8116927771898d62bf73d6\">heart murmur</span> is classically seen in patients with heart failure<strong>.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Indicators of heart disease in pregnancy:</strong></p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"645\" src=\"https://image.prepladder.com/content/OqIPz21m6SJBdIhGbJ7s1726297883.jpeg\" width=\"682\" /></p>\n\n<ul>\n\t<li>Fatigue and <span class=\"customMeta\" data-dictid=\"625feb7e3a1692777183aa9d923cfd\">bilateral</span> <span class=\"customMeta\" data-dictid=\"a8c53e6875169277719588cd709854\">pitting</span> <span class=\"customMeta\" data-dictid=\"18b452e75916927771864c9ad533e1\">edema</span> can also be seen in a normal pregnant woman <strong>(Options B & C).</strong></li>\n\t<li>Dyspnea can be because of other reasons also<strong> (Option A)</strong></li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/OqIPz21m6SJBdIhGbJ7s1726297883.jpeg"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/jvkoz7n7hb1IKbhaLsjf1749227897.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/o7APkCKLvUvDbNDXotgw1749227999.mp3"
  },
  {
    "text": "<p>32 y/o woman at 12 weeks gestation with a history of mitral valve prolapse denies chest pain, shortness of breath, and syncope. What is her prognosis for this pregnancy?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Good prognosis with minimal risk of complications."
      },
      {
        "id": 2,
        "text": "Poor prognosis with a high risk of heart failure."
      },
      {
        "id": 3,
        "text": "Moderate prognosis with potential for arrhythmias."
      },
      {
        "id": 4,
        "text": "Uncertain prognosis requiring frequent monitoring."
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n\t<li>Pregnancy may improve the <span class=\"customMeta\" data-dictid=\"3c0c325f4216927771819e5d0eb581\">alignment</span> of the <span class=\"customMeta\" data-dictid=\"d93de7238d16927771922b27cb6086\">mitral</span> <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> due to increased blood volume, leading to fewer complications. Because the patient is <span class=\"customMeta\" data-dictid=\"d1a9a79f701692777182066af09044\">asymptomatic</span> (denying chest pain, shortness of breath, and syncope), she is likely to have a good prognosis.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:706px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Prognosis</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Heart Condition</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Good prognosis</strong> with minimal complications<br />\n\t\t\t<strong>(Option A)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Mitral <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> <span class=\"customMeta\" data-dictid=\"c49cc1bac4169277719692da7af2cc\">prolapse</span> without <span class=\"customMeta\" data-dictid=\"c0c247b89916927771948bc5e6d39c\">pathological</span> myxomatous degeneration.</li>\n\t\t\t\t<li>Small to moderate-sized <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">ventricular</span> septal defects (VSDs).</li>\n\t\t\t\t<li>Repaired <span class=\"customMeta\" data-dictid=\"ca580d88d51692777200a2792a4b06\">transposition</span> of the great vessels.</li>\n\t\t\t\t<li>Atrial septal <span class=\"customMeta\" data-dictid=\"359a8718a61692777185568ac80abb\">defect</span> (ASD) unless <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> <span class=\"customMeta\" data-dictid=\"45372f6c361692777189ff3209e642\">hypertension</span> has developed.</li>\n\t\t\t\t<li>Mild MS and AS.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Poor prognosis</strong> with high risk of heart failure.</p>\n\n\t\t\t<p><strong>(Option B)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Eisenmenger syndrome.</li>\n\t\t\t\t<li>Severe aortic stenosis.</li>\n\t\t\t\t<li>Severe <span class=\"customMeta\" data-dictid=\"46aee94b0a16927771845967ac94d1\">coarctation</span> of the aorta.</li>\n\t\t\t\t<li>Uncorrected Cyanotic Heart Disease.</li>\n\t\t\t\t<li>Idiopathic <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> arterial hypertension.</li>\n\t\t\t\t<li>Prior myocardial infarction, especially with diabetes-associated ischemic heart disease.</li>\n\t\t\t\t<li>Marfan Syndrome with Aortic Root Dilation</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Moderate prognosis</strong> with potential for arrhythmias.</p>\n\n\t\t\t<p><strong>(Option C)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Hypertrophic cardiomyopathy.</li>\n\t\t\t\t<li>Dilated Cardiomyopathy</li>\n\t\t\t\t<li>Mitral stenosis.</li>\n\t\t\t\t<li>Arrhythmogenic right <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">ventricular</span> dysplasia.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Uncertain <span class=\"customMeta\" data-dictid=\"e580b4033e169277719609af594c16\">prognosis</span> </strong>requiring frequent monitoring <strong>(Option D)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Peripartum cardiomyopathy.</li>\n\t\t\t\t<li>Mechanical heart valve.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/GCelZVAmbNSmT8uPZ8Bl1749229064.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/KP6zbooGAt5g9EqGTyxH1749229122.mp3"
  },
  {
    "text": "<p>A 30 y/o woman at 37 weeks gestation with a history of coarctation of the aorta presents for a prenatal visit. She is currently asymptomatic. Her echocardiogram shows good left ventricular function, but her aortic root diameter is measured at 4.7 cm. Which of the following is the most appropriate mode of delivery?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Proceed with an elective Cesarean section."
      },
      {
        "id": 2,
        "text": "Plan to induce labor at 39 weeks and attempt a vaginal delivery."
      },
      {
        "id": 3,
        "text": "Cesarean section only if there is cardiac decompensation."
      },
      {
        "id": 4,
        "text": "Allow for spontaneous labor and attempt a vaginal delivery."
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>\u00a0</p>\n\n<ul>\n\t<li>Women with an <span class=\"customMeta\" data-dictid=\"636585f1a11692777182602515d2d4\">aortic root</span> <span class=\"customMeta\" data-dictid=\"afb15e4a331692777186e495b370a1\">diameter</span> > 4.5 cm should undergo an <span class=\"customMeta\" data-dictid=\"37d3e89821169277718799ed0c2a19\">elective</span> Cesarean section.</li>\n\t<li>Because pregnancy increases the risk of <span class=\"customMeta\" data-dictid=\"b95d9432b316927771811d2040b80c\">aortic dissection</span> in women with <span class=\"customMeta\" data-dictid=\"46aee94b0a16927771845967ac94d1\">coarctation</span> of the aorta, and the risk is further elevated during labor and delivery.</li>\n\t<li>An <span class=\"customMeta\" data-dictid=\"636585f1a11692777182602515d2d4\">aortic root</span> <span class=\"customMeta\" data-dictid=\"afb15e4a331692777186e495b370a1\">diameter</span> > 4.5 cm poses a significant risk of <span class=\"customMeta\" data-dictid=\"e42da316b916927771860f0ba81c19\">dissection</span> and rupture, which is often fatal.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:692px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Cesarean Section in Heart Disease</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Indications</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Explanation</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Aortic root dilatation: > 4 cm</strong></p>\n\t\t\t</td>\n\t\t\t<td rowspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Increases the risk of aortic dissection.\u00a0</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Aortic Aneurysms</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Coarctation of the Aorta</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Severe Aortic Stenosis</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Have a fixed <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> output, making them vulnerable to <span class=\"customMeta\" data-dictid=\"cdf4a197dd16927771881a652c8328\">hemodynamic</span> changes during labor.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Recent MI</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Physiological stress of labor and delivery might be too much for a heart recently recovering from an MI, causing increased complications.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Congestive Heart Failure</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>With limited <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> reserve, the stress of labor could <span class=\"customMeta\" data-dictid=\"eba5ba77ec169277719688fab52fb0\">precipitate</span> a <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> <span class=\"customMeta\" data-dictid=\"d026e1f1d7169277718532fb9b4f5f\">decompensation</span> event. However, aggressive medical <span class=\"customMeta\" data-dictid=\"6694ddb1db1692777199c9a1e38bf0\">stabilization</span> of <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> <span class=\"customMeta\" data-dictid=\"18b452e75916927771864c9ad533e1\">edema</span> is preferred, followed by <span class=\"customMeta\" data-dictid=\"9a1e50b8221692777201b95b66c9de\">vaginal</span> delivery if feasible.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>NYHA Class III or IV</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Limitations on physical activity. Labor is strenuous and could lead to serious complications.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Warfarin use in last 2 weeks</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Due to the risk of <span class=\"customMeta\" data-dictid=\"f375a3584316927772020efa386e3e\">fetal</span> <span class=\"customMeta\" data-dictid=\"c7f167b8df1692777190bcd90fe428\">intracerebral</span> hemorrhage, as the <span class=\"customMeta\" data-dictid=\"f375a3584316927772020efa386e3e\">fetal</span> liver requires up to two weeks to metabolize warfarin.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Need for emergency <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> replacement immediately after delivery</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Due to the high risk of <span class=\"customMeta\" data-dictid=\"cdf4a197dd16927771881a652c8328\">hemodynamic</span> <span class=\"customMeta\" data-dictid=\"acb259200b16927771908888d1377c\">instability</span> and <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> <span class=\"customMeta\" data-dictid=\"d026e1f1d7169277718532fb9b4f5f\">decompensation</span> during labor in patients with severe <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> disease.</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/tNh21QpXwVwW1Yd6jyMv1749229405.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/E22GYVaRM4QqyWZdPl8o1749229530.mp3"
  },
  {
    "text": "<p>30 y/o woman with a history of rheumatic heart disease presents at 38 weeks gestation with mitral stenosis and new-onset dyspnea. She is currently in labor. Her mitral valve area is estimated to be 1.2 cm2. Which of the following interventions is most likely to be CONTRAINDICATED in her management?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Administration of oxygen"
      },
      {
        "id": 2,
        "text": "Pain management with epidural analgesia"
      },
      {
        "id": 3,
        "text": "Restrict iv fluids"
      },
      {
        "id": 4,
        "text": "IV methergine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>\u00a0</p>\n\n<p><strong>Avoid using <span class=\"customMeta\" data-dictid=\"bc09155adc169277719248f9543785\">methyl</span> ergometrine</strong>\u00a0(methergine) for <span class=\"customMeta\" data-dictid=\"3d885759d516927771966b84bfa470\">postpartum</span> <span class=\"customMeta\" data-dictid=\"4642acfc0c16927771880b34fa5174\">hemorrhage</span> prevention, as it can suddenly increase preload, potentially <strong>leading to heart failure.</strong></p>\n\n<p>IV <span class=\"customMeta\" data-dictid=\"fdcbf0e9f71692777192931a9e29d6\">methergine</span> will cause forceful <span class=\"customMeta\" data-dictid=\"7d69c71bfd1692777200b0716cc326\">tetanic</span> contractions. Extra blood will seep into the <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> <span class=\"customMeta\" data-dictid=\"337d16dac5169277718474b97f6e4a\">circulation</span> which increase the <span class=\"customMeta\" data-dictid=\"96e7e3fecc16927772018cb9f8c8cd\">venous</span> return and put extra load on the heart.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/ZR7RWy7ohXeIwLOC3LVz1749229627.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/0AeU1OY20CKuoBfhXrmI1749229724.mp3"
  },
  {
    "text": "<p>35 y/o woman with 6 weeks postpartum has a history of rheumatic heart disease, specifically mitral stenosis, and experienced an uncomplicated pregnancy and delivery. She is currently asymptomatic. Her echocardiogram shows mild improvement in her mitral valve area compared to her pre-pregnancy assessment. What is the most appropriate management strategy for this patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Continue routine cardiology follow-up for heart failure."
      },
      {
        "id": 2,
        "text": "Refer for repeat percutaneous balloon valvuloplasty."
      },
      {
        "id": 3,
        "text": "Start anticoagulation with warfarin to prevent thromboembolic events."
      },
      {
        "id": 4,
        "text": "Advise against future pregnancies due to risks of cardiac complications."
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>\u00a0</p>\n\n<ul>\n\t<li>Women with a history of rheumatic heart disease, especially <span class=\"customMeta\" data-dictid=\"d93de7238d16927771922b27cb6086\">mitral</span> stenosis, require close monitoring postpartum.</li>\n\t<li>Despite an uncomplicated pregnancy and mild improvement in her <span class=\"customMeta\" data-dictid=\"d93de7238d16927771922b27cb6086\">mitral</span> <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> area, she remains at risk for delayed complications like heart failure.</li>\n\t<li>Regular follow-up allows for early <span class=\"customMeta\" data-dictid=\"723fdec66b1692777186e92f0c6fdf\">detection</span> and management of any arising issues.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:759px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Delayed complications of heart disease in pregnancy </strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Complications</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Management</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Cardiac Rupture</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Planned non-invasive surgery like balloon <span class=\"customMeta\" data-dictid=\"d93de7238d16927771922b27cb6086\">mitral</span> <span class=\"customMeta\" data-dictid=\"54449830e61692777201ad0ab6e6bc\">valvotomy</span> for <span class=\"customMeta\" data-dictid=\"d93de7238d16927771922b27cb6086\">mitral</span> stenosis, preferably done in the second trimester, can help prevent heart failure.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Infective Endocarditis</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Avoid contact with people with <span class=\"customMeta\" data-dictid=\"cfad80a0f716927771979aae100f95\">respiratory</span> infections. Administer pneumococcal <span class=\"customMeta\" data-dictid=\"f23be6aa561692777201ca2e1aaa27\">vaccination</span> if not already administered, and yearly <span class=\"customMeta\" data-dictid=\"c3817918b816927771902d2176d0c8\">influenza</span> vaccination.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Thromboembolic Phenomenon</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Low <span class=\"customMeta\" data-dictid=\"b2df2436bf1692777193d90e9c0132\">molecular weight</span> <span class=\"customMeta\" data-dictid=\"050e27829716927771885eddb2620c\">heparin</span> <span class=\"customMeta\" data-dictid=\"9beeeb58f6169277718129acb7bd01\">anticoagulation</span> when the <span class=\"customMeta\" data-dictid=\"3b69bda4d21692777187109c85a27e\">ejection</span> fraction is 30-35% due to the increased risk of left <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">ventricular</span> thrombi.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Mitral <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">Valve</span> Prolapse</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Continuous routine monitoring and follow-up.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Arrhythmias</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Continue beta-blockers, preferably propranolol, throughout pregnancy and the <span class=\"customMeta\" data-dictid=\"3d885759d516927771966b84bfa470\">postpartum</span> period to lower the risk of torsades <span class=\"customMeta\" data-dictid=\"233d458dd316927771854358419c86\">de</span> pointes.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Postpartum <span class=\"customMeta\" data-dictid=\"1a5e87d16716927771888f364bce89\">Heart Failure</span> </strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Keep the patient in a high-risk <span class=\"customMeta\" data-dictid=\"39723e2b3616927772023f29ae0e0d\">ward</span> or <span class=\"customMeta\" data-dictid=\"dcf52bc6051692777189bc6d95b5e5\">ICU</span> for observation for the first 24 hours and administer <span class=\"customMeta\" data-dictid=\"b1527c07251692777203d317fb2eb0\">furosemide</span> immediately after delivery to decrease <span class=\"customMeta\" data-dictid=\"628ed9c26316927771964889249b3b\">preload</span> on the heart.</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p><strong>Percutaneous <span class=\"customMeta\" data-dictid=\"eaa9464e821692777182d5ea19be91\">balloon valvuloplasty</span> (Option B)</strong> is a <span class=\"customMeta\" data-dictid=\"915ca56f53169277720296a38e3e8e\">viable</span> option for <span class=\"customMeta\" data-dictid=\"509310d4411692777199f2ffdb7769\">symptomatic</span> <span class=\"customMeta\" data-dictid=\"d93de7238d16927771922b27cb6086\">mitral</span> <span class=\"customMeta\" data-dictid=\"0c9567c6cb16927771996c6bc2b21e\">stenosis</span> during pregnancy; it is not routinely performed <span class=\"customMeta\" data-dictid=\"3d885759d516927771966b84bfa470\">postpartum</span> in <span class=\"customMeta\" data-dictid=\"d1a9a79f701692777182066af09044\">asymptomatic</span> patients</p>\n\n<p><strong>Anticoagulation (Option C)</strong> is crucial for patients with mechanical valves and is not routinely indicated unless there is a history of <span class=\"customMeta\" data-dictid=\"e6a04221a41692777182825f0f08da\">atrial fibrillation</span> or prior thromboembolic events.</p>\n\n<p><br />\nA history of well-managed <span class=\"customMeta\" data-dictid=\"d93de7238d16927771922b27cb6086\">mitral</span> <span class=\"customMeta\" data-dictid=\"0c9567c6cb16927771996c6bc2b21e\">stenosis</span> alone does not contraindicate future pregnancies <strong>(Option D)</strong></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/rlwIWe3hoNKWXCf8TpnZ1749229898.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/xB5Y4w8c2HBsgVZajhA11749229999.mp3"
  },
  {
    "text": "<p>A 32 y/o woman with a history of mechanical mitral valve replacement, is seen at 6 weeks gestation and is currently on warfarin and aspirin. What is the most appropriate next step in management regarding her anticoagulation?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Continue warfarin throughout pregnancy."
      },
      {
        "id": 2,
        "text": "Switch to unfractionated heparin throughout pregnancy."
      },
      {
        "id": 3,
        "text": "Switch to a low-molecular-weight heparin (LMWH) throughout pregnancy."
      },
      {
        "id": 4,
        "text": "Switch to LMWH now and transition to warfarin in the second trimester."
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct answer: D)\u00a0Switch to LMWH now and transition to <span class=\"customMeta\" data-dictid=\"38d84b192c16927772023d96107e4c\">warfarin</span> in the second trimester.</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Recommendations for anticoagulants in pregnancy:</strong></p>\n\n<ul>\n\t<li>Pregnancy significantly increases the risk of thromboembolism, but <span class=\"customMeta\" data-dictid=\"9beeeb58f6169277718129acb7bd01\">anticoagulation</span> is vital for women with mechanical <span class=\"customMeta\" data-dictid=\"1a060c24961692777189bcbbf1d2cd\">heart valves</span> to prevent <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> thrombosis.</li>\n\t<li>Warfarin is teratogenic, potentially causing miscarriages, stillbirths, and a constellation of birth defects known as <strong>fetal <span class=\"customMeta\" data-dictid=\"38d84b192c16927772023d96107e4c\">warfarin</span> syndrome.</strong><strong> (Option A)</strong></li>\n\t<li>Heparin, in both unfractionated (UFH) and low-molecular-weight (LMWH) forms, is considered safer for the <span class=\"customMeta\" data-dictid=\"421fecf0e21692777202704942ac48\">fetus</span> during pregnancy as it does not cross the placenta.</li>\n\t<li>UFH, even at full <span class=\"customMeta\" data-dictid=\"9beeeb58f6169277718129acb7bd01\">anticoagulation</span> doses, is considered inadequate for preventing <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> <span class=\"customMeta\" data-dictid=\"3e745919391692777200fae21b7251\">thrombosis</span> in pregnant women with <span class=\"customMeta\" data-dictid=\"9f49b9e654169277719222150eda60\">mechanical heart</span> valves. <strong>(Option B)</strong></li>\n\t<li>LMWH is associated with a lower risk of <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> <span class=\"customMeta\" data-dictid=\"3e745919391692777200fae21b7251\">thrombosis</span> compared to UFH, making it a preferred choice for many pregnant women requiring anticoagulation.</li>\n\t<li>A common approach is to start LMWH during the first <span class=\"customMeta\" data-dictid=\"2c20f0f1dd169277720029d29458d5\">trimester</span> to minimize <span class=\"customMeta\" data-dictid=\"f375a3584316927772020efa386e3e\">fetal</span> risks, then switch to <span class=\"customMeta\" data-dictid=\"38d84b192c16927772023d96107e4c\">warfarin</span> after the first <span class=\"customMeta\" data-dictid=\"2c20f0f1dd169277720029d29458d5\">trimester</span> for better <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> <span class=\"customMeta\" data-dictid=\"3e745919391692777200fae21b7251\">thrombosis</span> protection. Near term, <span class=\"customMeta\" data-dictid=\"38d84b192c16927772023d96107e4c\">warfarin</span> is discontinued to reduce <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> risks during labor, then restarted shortly after delivery. <strong>(Option C) </strong><strong>(Option D)</strong></li>\n\t<li>Regular monitoring of <span class=\"customMeta\" data-dictid=\"9beeeb58f6169277718129acb7bd01\">anticoagulation</span> levels (INR for warfarin, anti-Xa levels for LMWH) is essential.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/20eajjbK2gHWalbgobiG1747293994.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/Azlwpu0ZiIRh8aeSQInw1747294124.mp3"
  },
  {
    "text": "<p>A 28-year-old woman with a history of repaired tetralogy of Fallot comes to your clinic seeking advice about pregnancy. She has no significant symptoms, and her latest echocardiogram shows good ventricular function with no residual defects. According to the World Health Organization (WHO) classification for maternal cardiovascular risk, which WHO Risk Class does this patient belong to?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "WHO Risk Class I"
      },
      {
        "id": 2,
        "text": "WHO Risk Class II"
      },
      {
        "id": 3,
        "text": "WHO Risk Class III"
      },
      {
        "id": 4,
        "text": "WHO Risk Class IV"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>WHO Risk Class II includes conditions such as repaired <span class=\"customMeta\" data-dictid=\"225bbf4bd416927772003bf64ffa1f\">tetralogy</span> of Fallot, which indicates a small increased risk of <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> mortality or moderate increase in morbidity.</p>\n\n<p><strong>WHO <span class=\"customMeta\" data-dictid=\"dda6ab11271692777184264b752d39\">Classification</span> for <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">Maternal</span> <span class=\"customMeta\" data-dictid=\"e2b5f013011692777183ea1b11ed9c\">Cardiovascular</span> Risk</strong></p>\n\n<p>The WHO <span class=\"customMeta\" data-dictid=\"dda6ab11271692777184264b752d39\">classification</span> evaluates the risk of complications during pregnancy for women with various <span class=\"customMeta\" data-dictid=\"e2b5f013011692777183ea1b11ed9c\">cardiovascular</span> conditions, divided into four classes based on severity and potential risk to the mother and fetus:</p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:785px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>WHO Risk Class</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Description</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Includes Conditions Such As</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>I</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>No detectable increased risk of <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> mortality and no or mild increase in morbidity.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Uncomplicated, small, or mild <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> heart defects (e.g., <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> stenosis, PDA, MVP)</li>\n\t\t\t\t<li>Successfully repaired simple lesions (ASD, VSD, PDA, <span class=\"customMeta\" data-dictid=\"11b0cdbdbd1692777181cffbe7aa1b\">anomalous</span> <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> <span class=\"customMeta\" data-dictid=\"96e7e3fecc16927772018cb9f8c8cd\">venous</span> drainage)</li>\n\t\t\t\t<li>Isolated atrial or <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">ventricular</span> <span class=\"customMeta\" data-dictid=\"0decefe0901692777186f7f3f89b2a\">ectopic</span> beats</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>II</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Small increased risk of <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> mortality or moderate increase in morbidity.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Unoperated atrial or <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">ventricular</span> septal defect</li>\n\t\t\t\t<li>Repaired TOF</li>\n\t\t\t\t<li>Most arrhythmias</li>\n\t\t\t\t<li>Mild left <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">ventricular</span> impairment</li>\n\t\t\t\t<li>Hypertrophic cardiomyopathy</li>\n\t\t\t\t<li>Native or tissue valvular heart disease not in WHO I or IV</li>\n\t\t\t\t<li>Marfan syndrome without aortic dilatation</li>\n\t\t\t\t<li>Aorta <45 mm in aortic disease associated with <span class=\"customMeta\" data-dictid=\"9461b5b89b16927771839fb979168f\">bicuspid</span> aortic valve</li>\n\t\t\t\t<li>Repaired Coarctation</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>III</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Significantly increased risk of <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> mortality or severe morbidity. Expert counseling required.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Mechanical valve</li>\n\t\t\t\t<li>Cyanotic heart disease (unrepaired)</li>\n\t\t\t\t<li>Other complex <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> heart disease</li>\n\t\t\t\t<li>Aortic <span class=\"customMeta\" data-dictid=\"29a08d8f9216927771869ed797367e\">dilatation</span> 4-4.5 cm in Marfan syndrome</li>\n\t\t\t\t<li>Aortic <span class=\"customMeta\" data-dictid=\"29a08d8f9216927771869ed797367e\">dilatation</span> 4.5-5 cm in aortic disease associated with <span class=\"customMeta\" data-dictid=\"9461b5b89b16927771839fb979168f\">bicuspid</span> <span class=\"customMeta\" data-dictid=\"59a120854e16927771820318aebd4a\">aortic valve</span> Repaired</li>\n\t\t\t\t<li>Coarctation with significant <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> impairment</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>IV</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Extremely high risk of <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> mortality or severe morbidity; pregnancy contraindicated.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Pulmonary arterial <span class=\"customMeta\" data-dictid=\"45372f6c361692777189ff3209e642\">hypertension</span> of any cause</li>\n\t\t\t\t<li>Severe <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">ventricular</span> <span class=\"customMeta\" data-dictid=\"3662597407169277718640a12868f5\">dysfunction</span> (LVEF <30%, NYHA III-IV)</li>\n\t\t\t\t<li>Previous <span class=\"customMeta\" data-dictid=\"def1dae579169277719548a99ad18e\">peripartum</span> <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">cardiomyopathy</span> with any <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> <span class=\"customMeta\" data-dictid=\"4885d5d0021692777189aac6dc80f7\">impairment</span> of left <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">ventricular</span> function</li>\n\t\t\t\t<li>Severe <span class=\"customMeta\" data-dictid=\"509310d4411692777199f2ffdb7769\">symptomatic</span> <span class=\"customMeta\" data-dictid=\"d93de7238d16927771922b27cb6086\">mitral</span> or aortic stenosis</li>\n\t\t\t\t<li>Marfan syndrome with <span class=\"customMeta\" data-dictid=\"ce68eab48a1692777181c719b4344e\">aorta</span> dilated >4.5 cm</li>\n\t\t\t\t<li>Aortic <span class=\"customMeta\" data-dictid=\"d141b433d2169277718681e3ff6bc3\">dilation</span> >5 cm in aortic disease associated with <span class=\"customMeta\" data-dictid=\"9461b5b89b16927771839fb979168f\">bicuspid</span> <span class=\"customMeta\" data-dictid=\"59a120854e16927771820318aebd4a\">aortic valve</span> Native</li>\n\t\t\t\t<li>Severe coarctation</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/fl0ycfVHECvCeQJ3DOMw1749230328.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/UK3Ql8B9LCKgHs34G7y21749230455.mp3"
  },
  {
    "text": "<p>A 32-year-old woman who recently delivered a healthy baby presents to the emergency department with symptoms of shortness of breath and fatigue. An echocardiogram reveals left ventricular systolic dysfunction with a dilated left ventricle. Her medical history is significant for twin gestation and preeclampsia during her recent pregnancy. What is the most likely diagnosis for this patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Hypertensive heart failure"
      },
      {
        "id": 2,
        "text": "Peripartum cardiomyopathy"
      },
      {
        "id": 3,
        "text": "Viral myocarditis"
      },
      {
        "id": 4,
        "text": "Idiopathic dilated cardiomyopathy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The patient's symptoms, recent pregnancy with twin gestation, and history of <span class=\"customMeta\" data-dictid=\"1fa06d396c1692777196050a5db718\">preeclampsia</span> are consistent with <span class=\"customMeta\" data-dictid=\"def1dae579169277719548a99ad18e\">peripartum</span> cardiomyopathy.</p>\n\n<p><strong>Peripartum <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">Cardiomyopathy</span> (PPCM)</strong></p>\n\n<p>PPCM is a <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of nonischemic dilated <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">cardiomyopathy</span> <span class=\"customMeta\" data-dictid=\"8d0fca798b1692777191b6cd41880f\">linked</span> to pregnancy, sharing a genetic <span class=\"customMeta\" data-dictid=\"6fc754288b1692777196b7664d3a9a\">predisposition</span> with <span class=\"customMeta\" data-dictid=\"5dda3cc2ab1692777202b3b3c65bea\">familial</span> and <span class=\"customMeta\" data-dictid=\"a325d0c14e16927771992fe8a96758\">sporadic</span> <span class=\"customMeta\" data-dictid=\"4acddc3cf5169277718996440e2e14\">idiopathic</span> dilated cardiomyopathy.</p>\n\n<p><strong>Diagnostic Criteria (Pearson, 2000)</strong></p>\n\n<ul>\n\t<li>Development of <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> failure in the last month of pregnancy or within 5 months postpartum.</li>\n\t<li>Absence of an identifiable cause for the <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> failure.</li>\n\t<li>No recognizable heart disease prior to the last month of pregnancy.</li>\n\t<li>Left <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">ventricular</span> <span class=\"customMeta\" data-dictid=\"cf69f5256416927771991c21f264ae\">systolic</span> <span class=\"customMeta\" data-dictid=\"3662597407169277718640a12868f5\">dysfunction</span> (depressed <span class=\"customMeta\" data-dictid=\"3b69bda4d21692777187109c85a27e\">ejection</span> fraction, <span class=\"customMeta\" data-dictid=\"7851f9a12616927772034703063277\">fractional</span> shortening, and dilated left ventricle).</li>\n</ul>\n\n<p><strong>Hypertensive heart failure\u00a0(Option A)\u00a0</strong>is typically associated with long-standing <span class=\"customMeta\" data-dictid=\"45372f6c361692777189ff3209e642\">hypertension</span> and not not present acutely like in this scenario.</p>\n\n<p><strong>Viral myocarditis\u00a0(Option C)</strong> is less commonly associated with recent <span class=\"customMeta\" data-dictid=\"51b378d6031692777184a20aa31718\">childbirth</span> and would not typically be related to the history of multiple <span class=\"customMeta\" data-dictid=\"55b88ac71d169277718832be1a82c7\">gestation</span> and preeclampsia</p>\n\n<p><strong>Idiopathic dilated cardiomyopathy\u00a0(Option D) \u00a0</strong>is a diagnosis of <span class=\"customMeta\" data-dictid=\"1cc6e4677116927771870a10c66fe7\">exclusion</span> and is not specifically associated with recent pregnancy</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/2cSiyxz7e8do1v1wWAEn1749230655.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/ULF2NWL1acM1xK8elOJl1749230785.mp3"
  },
  {
    "text": "<p>A 32-year-old pregnant woman at 28 weeks of gestation presents with shortness of breath, fatigue, and occasional palpitations. She has a history of rheumatic heart disease with mitral stenosis. On examination, she has a tachycardia and an elevated jugular venous pressure. An echocardiogram reveals a mitral valve area of 1.8 cm\u00b2, left atrial enlargement, and pulmonary hypertension. What is the most appropriate initial management for this patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Immediate balloon valvuloplasty"
      },
      {
        "id": 2,
        "text": "Limited physical activity, dietary sodium restriction, and \u03b2-blocker therapy"
      },
      {
        "id": 3,
        "text": "Intravenous furosemide and initiation of digoxin"
      },
      {
        "id": 4,
        "text": "Initiate anticoagulation therapy with warfarin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Limited physical activity: Reduces the <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> workload and helps manage symptoms.</p>\n\n<p>Dietary sodium restriction: Helps to prevent fluid <span class=\"customMeta\" data-dictid=\"b668aed705169277719744b6db8f8e\">retention</span> and <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> congestion.</p>\n\n<p>\u03b2-blocker therapy: Slows the heart rate, reducing the <span class=\"customMeta\" data-dictid=\"d93de7238d16927771922b27cb6086\">mitral</span> <span class=\"customMeta\" data-dictid=\"04136f692516927771888cf07d46a4\">gradient</span> and preventing tachycardia-induced <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> edema.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/QDshhnqjupJc05xCOIje1749231174.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/8PWHLRsENcmwmbinjKss1749231315.mp3"
  },
  {
    "text": "<p>A 35-year-old pregnant woman at 34 weeks gestation presents to the emergency department with severe chest pain radiating to her left arm. An ECG shows ST-segment elevation in the anterior leads, and her serum high-sensitivity troponin I levels are elevated. The patient is diagnosed with an ST-segment elevation myocardial infarction (STEMI). What is the most appropriate initial management for this patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Immediate induction of labor to reduce cardiac stress"
      },
      {
        "id": 2,
        "text": "Administration of aspirin, heparin, and initiation of percutaneous coronary intervention (PCI)"
      },
      {
        "id": 3,
        "text": "Conservative management with bed rest and observation"
      },
      {
        "id": 4,
        "text": "Administration of intravenous thrombolytics and immediate cesarean delivery"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n\t<li>The management of <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> MI in pregnant women is <strong>similar to that in nonpregnant patients.</strong></li>\n\t<li>The initial treatment should include <span class=\"customMeta\" data-dictid=\"deba671f4716927771828c95a320e5\">aspirin</span> and <span class=\"customMeta\" data-dictid=\"050e27829716927771885eddb2620c\">heparin</span> to manage the thrombosis, followed by <span class=\"customMeta\" data-dictid=\"b2fb1a3a5416927771953ea4fa15e1\">percutaneous</span> <span class=\"customMeta\" data-dictid=\"bc8bc758371692777185eff2ccabb7\">coronary</span> intervention (PCI) to revascularize the affected <span class=\"customMeta\" data-dictid=\"bc8bc758371692777185eff2ccabb7\">coronary</span> artery. PCI is the preferred method as it is effective and safe during pregnancy.</li>\n\t<li>Cesarean delivery is reserved for obstetrical indications after sufficient <span class=\"customMeta\" data-dictid=\"7d8fbc62391692777190399f2b0126\">infarct</span> healing. Epidural <span class=\"customMeta\" data-dictid=\"66ccee483016927771810c2c295d74\">analgesia</span> is preferred for labor pain management.\u00a0<strong>(Option D)</strong></li>\n\t<li>Immediate Induction of Labor is not the immediate priority for managing a STEMI.\u00a0<strong>(Option A) </strong></li>\n\t<li>Conservative Management with Bed Rest and Observation would not address the immediate need for myocardial <span class=\"customMeta\" data-dictid=\"910e53d9bf1692777197e57fd0c1b6\">reperfusion</span> and could lead to a worsening of the myocardial infarction.\u00a0<strong>(Option C) </strong></li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/jdbgpKUbPUVg6y4NVaN11749231509.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/BdLTZ0JE5BATRtebna9b1749231637.mp3"
  }
];
        let quizName = '66 Heart Diseases In Pregnancy';
        const quizFilename = '66-heart-diseases-in-pregnancy-26ee10ce.html';
        let hierarchy = ["PrepLadder", "qBank", "Obstetrics & Gynecology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>