<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>22 Previous Year Questions - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Radiology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">10</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>A patient presents with a neck mass and laboratory findings of increased T4 and decreased TSH. The patient has a history of I-131 ablation therapy. Which of the following is a likely side effect of the treatment?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Acute Thyroiditis"
      },
      {
        "id": 2,
        "text": "Hypothyroidism"
      },
      {
        "id": 3,
        "text": "Hyperthyroidism"
      },
      {
        "id": 4,
        "text": "Thyroid Storm"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Answer: B) Hypothyroidism</strong></p>\n\n<ul>\n\t<li><strong>I-131 <span class=\"customMeta\" data-dictid=\"eb788615bd16927771803d3841aa78\">ablation</span> therapy</strong> is commonly used for <strong>Graves' disease, toxic nodules, or <span class=\"customMeta\" data-dictid=\"799202e6fe16927772009a1501b0a8\">thyroid</span> cancer</strong>.</li>\n\t<li>It <strong>destroys <span class=\"customMeta\" data-dictid=\"799202e6fe16927772009a1501b0a8\">thyroid</span> tissue</strong>, leading to a <strong>progressive decline in <span class=\"customMeta\" data-dictid=\"799202e6fe16927772009a1501b0a8\">thyroid</span> hormone production</strong>, resulting in <strong>hypothyroidism</strong> over time.</li>\n\t<li>Patients often require <strong>lifelong <span class=\"customMeta\" data-dictid=\"799202e6fe16927772009a1501b0a8\">thyroid</span> hormone replacement therapy (levothyroxine)</strong>.</li>\n</ul>\n\n<p>.</p>\n\n<p><strong>Side Effects of I-131 Therapy</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:624px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Side Effect</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Mechanism</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Common in</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Hypothyroidism (Correct Answer)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Destruction of <span class=\"customMeta\" data-dictid=\"799202e6fe16927772009a1501b0a8\">thyroid</span> tissue \u2192 <strong>\u2193 T4, \u2191 TSH</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Most patients post-I-131 therapy</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Acute Thyroiditis</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Radiation-induced <span class=\"customMeta\" data-dictid=\"e747a47db616927771908bff4b8931\">inflammation</span> \u2192 temporary <strong>thyroid pain, swelling</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Early post-treatment phase</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Hyperthyroidism</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Thyrotoxic phase</strong> due to sudden hormone release from damaged cells</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Rare, transient</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Thyroid Storm</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Massive release of <span class=\"customMeta\" data-dictid=\"799202e6fe16927772009a1501b0a8\">thyroid</span> hormones <strong>(life-threatening)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Very rare, usually in untreated Graves'</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><br />\n\u00a0</p>\n\n<p><strong>Acute <span class=\"customMeta\" data-dictid=\"df0e1364a11692777200ed67550c12\">Thyroiditis</span> (Option A)</strong> is incorrect because although I-131 therapy can cause <strong>radiation thyroiditis</strong>, this is a <span class=\"customMeta\" data-dictid=\"a6cf2c3dc51692777200ef7fb22f69\">transient</span> <span class=\"customMeta\" data-dictid=\"9d21dd5d3116927771907405b181bc\">inflammatory</span> reaction rather than a long-term side effect.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Hyperthyroidism (Option C):</strong> While a <span class=\"customMeta\" data-dictid=\"a6cf2c3dc51692777200ef7fb22f69\">transient</span> \"flare\" of <span class=\"customMeta\" data-dictid=\"df46bcd43116927771892090901263\">hyperthyroidism</span> can occur shortly after I-131 treatment due to the release of pre-formed hormones from damaged cells, it is not the primary long-term side effect.</p>\n\n<p><br />\n<strong>Thyroid Storm (Option D)</strong> is incorrect because <span class=\"customMeta\" data-dictid=\"799202e6fe16927772009a1501b0a8\">thyroid</span> storm is a severe, life-threatening <span class=\"customMeta\" data-dictid=\"236b9106d7169277718961e983707b\">hyperthyroid</span> crisis typically seen in <strong>untreated or inadequately treated hyperthyroidism</strong>, not a direct consequence of I-131 therapy.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Radioisotope used in PET-CT scan?</p>",
    "choices": [
      {
        "id": 1,
        "text": "18F-FDG"
      },
      {
        "id": 2,
        "text": "lodine"
      },
      {
        "id": 3,
        "text": "Radium"
      },
      {
        "id": 4,
        "text": "Cesium-131"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) 18F-FDG </strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li>18F-FDG (Fluorodeoxyglucose) is the most commonly used <span class=\"customMeta\" data-dictid=\"c5a32dfd6e1692777197db92b6aea1\">radiotracer</span> in PET-CT scans.</li>\n\t<li>It is a <span class=\"customMeta\" data-dictid=\"af3ae60c0c16927771889b84ca41c0\">glucose</span> <span class=\"customMeta\" data-dictid=\"517ff2aa92169277718110c734526d\">analog</span> labeled with the <span class=\"customMeta\" data-dictid=\"f391426a781692777197a16039bb5e\">radioactive</span> <span class=\"customMeta\" data-dictid=\"7cb1c220051692777190be13e8c7cc\">isotope</span> Fluorine-18.</li>\n\t<li>It accumulates in tissues with high <span class=\"customMeta\" data-dictid=\"af3ae60c0c16927771889b84ca41c0\">glucose</span> metabolism, such as cancer cells, inflammation, or infection, making it highly useful for diagnosing and <span class=\"customMeta\" data-dictid=\"8ea2e3870f16927771990a138acbc1\">staging</span> cancers, monitoring treatment response, and detecting <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">recurrent</span> disease.</li>\n</ul>\n\n<p><strong>Fluorodeoxyglucose (FDG) positron-emission <span class=\"customMeta\" data-dictid=\"8d4f2a375b1692777200f41db641bc\">tomography</span> (PET-FDG)</strong></p>\n\n<ul>\n\t<li>Uptake of 18F-FDG (Analogue of <span class=\"customMeta\" data-dictid=\"2a7f0b780c1692777187fe83ec76b1\">endogenous</span> glucose) in large quantities by cancer cells as compared to normal cells</li>\n</ul>\n\n<p><strong>Application:</strong></p>\n\n<ul>\n\t<li>Quantification of tumor <span class=\"customMeta\" data-dictid=\"d92cbff33316927771927b4de10a5b\">metabolic</span> activity</li>\n\t<li>Diagnosis (lung cancer) and <span class=\"customMeta\" data-dictid=\"8ea2e3870f16927771990a138acbc1\">Staging</span> of cancer</li>\n\t<li>Assessing distant metastasis\n\t<ul>\n\t\t<li>More sensitive in primary lung and oesophageal cancer metastatic disease</li>\n\t</ul>\n\t</li>\n\t<li>Assessment of response to treatment\n\t<ul>\n\t\t<li>A decrease in FDG <span class=\"customMeta\" data-dictid=\"cc20d2d7111692777201fb0caeb3f2\">uptake</span> after <span class=\"customMeta\" data-dictid=\"8602c4b260169277718439bb122cb0\">chemotherapy</span> indicates that the tumor is responding to treatment</li>\n\t</ul>\n\t</li>\n\t<li>Routine surveillance following treatment- not commonly preferred.</li>\n</ul>\n\n<figure class=\"caption_element\"><img alt=\"\" data-author=\"Rakavi Rathinasamy, Nirmal Ghati, Neeraj Parakh, Sanjeev Kumar, Akshay Kumar Bisoi, Sudheer Arava, Rajiv Narang, Balram Bhargava\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/Fluorodeoxyglucose-positron-emission-tomography-FDG-PET-images-A-Whole-body-coronal_fig3_378072185\" data-tags=\"\" height=\"449\" src=\"https://image.prepladder.com/content/w81knXENAoUUijn4J4mu1747313278.png\" width=\"547\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n\n<p><strong>Not useful in the following situations:</strong></p>\n\n<ul>\n\t<li>High Glycolytic <span class=\"customMeta\" data-dictid=\"5b1a045f5f169277719210c0ac7a1e\">Metabolism</span> tissues: Central nervous system tumors.</li>\n\t<li>Inflammation vs. Cancer: Both conditions exhibit increased <span class=\"customMeta\" data-dictid=\"af3ae60c0c16927771889b84ca41c0\">glucose</span> metabolism.<strong> </strong></li>\n\t<li>Movement disorders</li>\n\t<li>Coronary blood flow</li>\n</ul>\n\n<p><strong>Warburg Effect </strong></p>\n\n<ul>\n\t<li>Cancer cells prefer <strong>glycolysis</strong> over <span class=\"customMeta\" data-dictid=\"60d563fe241692777194203742bf5b\">oxidative</span> phosphorylation, even in the presence of oxygen.</li>\n\t<li>This leads to <strong>increased <span class=\"customMeta\" data-dictid=\"af3ae60c0c16927771889b84ca41c0\">glucose</span> uptake</strong> and <strong>lactate production</strong>, common in many cancers.</li>\n\t<li><strong>18F-fluorodeoxyglucose (18F-FDG)</strong>, a <span class=\"customMeta\" data-dictid=\"af3ae60c0c16927771889b84ca41c0\">glucose</span> <span class=\"customMeta\" data-dictid=\"517ff2aa92169277718110c734526d\">analog</span> used in PET imaging, helps study this effect.</li>\n</ul>\n\n<p><strong>Mechanisms of 18F-FDG Accumulation</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:615px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Mechanism</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Description</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><strong>Aerobic Glycolysis</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Cancer cells rely heavily on glycolysis, increasing <span class=\"customMeta\" data-dictid=\"af3ae60c0c16927771889b84ca41c0\">glucose</span> and 18F-FDG uptake, even with oxygen.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><strong>Transport & Trapping</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>GLUT-1 transporters mediate <span class=\"customMeta\" data-dictid=\"af3ae60c0c16927771889b84ca41c0\">glucose</span> entry. 18F-FDG is phosphorylated and trapped inside cells.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><strong>Tumor Heterogeneity</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Differences in tumor subtype, size, and <span class=\"customMeta\" data-dictid=\"3728deb0881692777192af3b093774\">microvasculature</span> affect 18F-FDG uptake.</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Clinical Implications of 18F-FDG</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:615px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Implication</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Details</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><strong>Prognostic Indicator</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Higher 18F-FDG <span class=\"customMeta\" data-dictid=\"cc20d2d7111692777201fb0caeb3f2\">uptake</span> correlates with <strong>worse prognosis</strong> (e.g., shorter DFS in <span class=\"customMeta\" data-dictid=\"1c5272ad3d1692777190e71409d07a\">invasive</span> ductal carcinoma).</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><strong>Reverse Warburg Effect</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Cancer-associated fibroblasts (CAFs) increase <span class=\"customMeta\" data-dictid=\"185a500ee91692777188b3044db06d\">glycolysis</span> in tumor cells via <span class=\"customMeta\" data-dictid=\"d92cbff33316927771927b4de10a5b\">metabolic</span> coupling.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><strong>Treatment Monitoring</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>PET <span class=\"customMeta\" data-dictid=\"fe3220767716927771892419444041\">imaging</span> tracks changes in 18F-FDG uptake, reflecting <strong>therapy responses</strong> <span class=\"customMeta\" data-dictid=\"e4865847fa169277720044d7b530b0\">targeting</span> <span class=\"customMeta\" data-dictid=\"185a500ee91692777188b3044db06d\">glycolysis</span> or mitochondria.</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Iodine (Option B): </strong>Radioactive <span class=\"customMeta\" data-dictid=\"58c4fcb71116927771901e83ac026f\">iodine</span> (e.g., I-131 or I-123) is mainly used in <span class=\"customMeta\" data-dictid=\"799202e6fe16927772009a1501b0a8\">thyroid</span> <span class=\"customMeta\" data-dictid=\"fe3220767716927771892419444041\">imaging</span> and treatment of <span class=\"customMeta\" data-dictid=\"799202e6fe16927772009a1501b0a8\">thyroid</span> disorders</p>\n\n<p><strong>Radium (Option C):</strong> Radium-223 is used in the treatment of bone <span class=\"customMeta\" data-dictid=\"ee33485c641692777192b16b999489\">metastases</span> (e.g., in <span class=\"customMeta\" data-dictid=\"19c0231fc41692777196ffce23771d\">prostate</span> cancer)</p>\n\n<p><strong>Cesium-131 (Option D): </strong>Cesium-131 is used in <span class=\"customMeta\" data-dictid=\"61c2938b191692777183fbbe51a17c\">brachytherapy</span> for <span class=\"customMeta\" data-dictid=\"8fb8df140b1692777191702bbc9358\">localized</span> radiation delivery (e.g., in <span class=\"customMeta\" data-dictid=\"19c0231fc41692777196ffce23771d\">prostate</span> cancer)</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/w81knXENAoUUijn4J4mu1747313278.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Radioactive isotope used for teletherapy?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Iridium-192"
      },
      {
        "id": 2,
        "text": "lodine-125"
      },
      {
        "id": 3,
        "text": "Cobalt-60"
      },
      {
        "id": 4,
        "text": "lodine-131"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Cobalt-60</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li>Cobalt-60 is the most commonly used <span class=\"customMeta\" data-dictid=\"f391426a781692777197a16039bb5e\">radioactive</span> <span class=\"customMeta\" data-dictid=\"7cb1c220051692777190be13e8c7cc\">isotope</span> in teletherapy, a type of external beam radiotherapy. It emits high-energy <span class=\"customMeta\" data-dictid=\"49be0416121692777188dc8944b7bc\">gamma</span> rays, which are effective for treating deep-seated tumors.</li>\n</ul>\n\n<p><strong>Teletherapy (External beam radiation)</strong></p>\n\n<ul>\n\t<li>It is a <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of radiation therapy in which the radiation source is placed at a distance from the body, delivering high-energy radiation beams to treat tumors.</li>\n\t<li><strong>External beam sources are:</strong>\n\t<ul>\n\t\t<li>Betatron</li>\n\t\t<li>Cobalt</li>\n\t\t<li>Linear accelerator</li>\n\t\t<li>Neutron beam</li>\n\t\t<li>Photon beam</li>\n\t\t<li>Proton beam</li>\n\t\t<li>Spray radiation</li>\n\t\t<li>Stereotactic <span class=\"customMeta\" data-dictid=\"493af101611692777197c3ccd81d62\">radiosurgery</span> such as <span class=\"customMeta\" data-dictid=\"49be0416121692777188dc8944b7bc\">gamma</span> knife</li>\n\t\t<li>X-ray</li>\n\t</ul>\n\t</li>\n</ul>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:589px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Types of Beams</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><strong>Electrons</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Negatively charged particles</li>\n\t\t\t\t<li>Limited penetration</li>\n\t\t\t\t<li>Effective for tumors near the body surface (Skin tumors)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><strong>Photons </strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Can reach deep tumors</li>\n\t\t\t\t<li>Scatter radiation along the path</li>\n\t\t\t\t<li>Continue through normal tissue after reaching the tumor</li>\n\t\t\t\t<li>Made up of high energy:\n\t\t\t\t<ul>\n\t\t\t\t\t<li>X-rays (LINAC- Linear accelerators)</li>\n\t\t\t\t\t<li>Gamma rays</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><strong>Protons</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Positively charged particles</li>\n\t\t\t\t<li>No radiation scatter</li>\n\t\t\t\t<li>Stop precisely at the tumor location</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:590px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>cobalt 60 (Co<sub>60</sub>)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Linear accelerator</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>The <span class=\"customMeta\" data-dictid=\"e3555f448716927771844820d69cfa\">Cobalt</span> machine produces an artificial <span class=\"customMeta\" data-dictid=\"4dd949a23a1692777197a5627fa8d8\">radioisotope</span> (Co )</li>\n\t\t\t\t<li>Advantage: Relative <span class=\"customMeta\" data-dictid=\"a4d5e86b6416927771850468afd1ba\">constancy</span> of beam output</li>\n\t\t\t\t<li>Source replacement approximately every 4 to 5 years</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>LINAC- Linear accelerators do not need a radioisotope</li>\n\t\t\t\t<li>The fast-moving <span class=\"customMeta\" data-dictid=\"d416281a201692777187899c00aed8\">electron</span> beam generates radiation which is used in radiotherapy</li>\n\t\t\t\t<li>X-ray beams are produced</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>A<strong>dvantages of External Beam</strong></p>\n\n<ul>\n\t<li>Painless</li>\n\t<li>Do not require a hospital stay in most patients</li>\n\t<li>Most patients can continue with their normal daily activities</li>\n\t<li>Non-invasive</li>\n</ul>\n\n<p><strong>Iridium-192 (Option A):</strong> Used in brachytherapy, especially for treating cancers of the cervix, breast, and prostate.</p>\n\n<p><strong>Iodine-125 (Option B): </strong>Used in brachytherapy, particularly for <span class=\"customMeta\" data-dictid=\"19c0231fc41692777196ffce23771d\">prostate</span> cancer and eye plaques (e.g., <span class=\"customMeta\" data-dictid=\"cea77d01ce1692777184854450c378\">choroidal</span> melanoma).</p>\n\n<p><strong>Iodine-131 (Option D): </strong>Used in the treatment of <span class=\"customMeta\" data-dictid=\"799202e6fe16927772009a1501b0a8\">thyroid</span> cancer and <span class=\"customMeta\" data-dictid=\"df46bcd43116927771892090901263\">hyperthyroidism</span> but not in teletherapy.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>What is the name of the radiotherapy treatment given to a cancer patient that involves administering a dose of 1.8 to 2 Gy once daily for 5 days per week over a period of 6 to 8 weeks?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Regular Fractionated radiotherapy"
      },
      {
        "id": 2,
        "text": "Hyper fractionated radiotherapy"
      },
      {
        "id": 3,
        "text": "Accelerated fractionation radiotherapy"
      },
      {
        "id": 4,
        "text": "Brachytherapy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Regular Fractionated radiotherapy</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Regular Fractionated Radiotherapy</strong>:</p>\n\n<ul>\n\t<li>This is the standard treatment <span class=\"customMeta\" data-dictid=\"988bd8e7c71692777197b9f1d5d5ca\">regimen</span> in <span class=\"customMeta\" data-dictid=\"a75f060aa1169277719777dd69df3f\">radiotherapy</span> for many cancers.</li>\n\t<li>The patient receives a dose of <strong>1.8 to 2 Gy per day</strong>, typically administered <strong>once daily for 5 days a week</strong> (Monday to Friday), with <strong>a total treatment course lasting between 6 to 8 weeks</strong>.</li>\n\t<li>This approach allows for normal tissue recovery while delivering effective doses to the cancerous tissue.</li>\n</ul>\n\n<p><strong>Fractionated <span class=\"customMeta\" data-dictid=\"a75f060aa1169277719777dd69df3f\">Radiotherapy</span> </strong></p>\n\n<p><strong>Definition</strong>: Treatment in multiple smaller doses (fractions) to enhance tumor control and protect normal tissue.</p>\n\n<p><strong>Key Principles</strong></p>\n\n<ul>\n\t<li><strong>Therapeutic Window</strong>: Balances damage to tumor vs. normal tissue using the \"5 Rs of Radiobiology\":\n\n\t<ul>\n\t\t<li><strong>Radiosensitivity</strong>: Tumor cells are more sensitive to radiation.</li>\n\t\t<li><strong>Repair</strong>: Normal tissue repairs better between treatments.</li>\n\t\t<li><strong>Reoxygenation</strong>: Hypoxic tumor cells reoxygenate, increasing sensitivity.</li>\n\t\t<li><strong>Redistribution</strong>: Cells cycle through phases of varying sensitivity.</li>\n\t\t<li><strong>Repopulation</strong>: Normal tissue regeneration, affecting treatment outcomes.</li>\n\t</ul>\n\t</li>\n\t<li><strong>Fraction Size and Dose</strong>: Standard doses are 1.8-2 Gy per session, totaling 50-66 Gy over weeks.</li>\n</ul>\n\n<p><strong>Advances in Fractionation</strong></p>\n\n<table align=\"center\" cellspacing=\"0\" style=\"border-collapse:collapse\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Technique</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Key Features</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><strong>Spatially Fractionated Radiation Therapy (SFRT)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Delivers <span class=\"customMeta\" data-dictid=\"bbe1b94c491692777188fe4f85b1ce\">heterogeneous</span> doses to spare normal tissue, effective in bulky tumors.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><strong>Hyperfractionation</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>More frequent, smaller doses to enhance local control.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><strong>Accelerated Fractionation</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Shortens overall treatment time, maintaining or enhancing efficacy.</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p><strong>Challenges</strong></p>\n\n<ul>\n\t<li><strong>Radioresistance</strong>: Tumors may develop resistance, requiring careful dose planning.</li>\n\t<li><strong>Scheduling</strong>: Ideal <span class=\"customMeta\" data-dictid=\"afaed3f52216927772030926176598\">fractionation</span> depends on tumor type, size, and location; research is ongoing</li>\n</ul>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"537\" src=\"https://image.prepladder.com/content/wV44ebMhXTomUlYh8Kbi1746437048.png\" width=\"454\" /></p>\n\n<p>\u00a0</p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"393\" src=\"https://image.prepladder.com/content/g1k7BnuL9wyaNtF7nyrV1746437048.png\" width=\"393\" /></p>\n\n<p>\u00a0</p>\n\n<p><strong>Hyper fractionated <span class=\"customMeta\" data-dictid=\"a75f060aa1169277719777dd69df3f\">Radiotherapy</span> (option B)</strong>: Incorrect because in hyperfractionated radiotherapy, smaller doses of radiation (usually <strong>1.2 to 1.5 Gy</strong>) are given multiple times a day (typically twice), rather than once daily.</p>\n\n<p><strong>Accelerated <span class=\"customMeta\" data-dictid=\"afaed3f52216927772030926176598\">Fractionation</span> <span class=\"customMeta\" data-dictid=\"a75f060aa1169277719777dd69df3f\">Radiotherapy</span> (option C)</strong>: Incorrect because accelerated <span class=\"customMeta\" data-dictid=\"afaed3f52216927772030926176598\">fractionation</span> involves delivering radiation doses more frequently, often with a shorter overall treatment duration (e.g., increasing the <span class=\"customMeta\" data-dictid=\"dc3e5778011692777185cf23158fdd\">daily dose</span> or increasing the frequency of radiation delivery within a shorter period).</p>\n\n<p><strong>Brachytherapy (option D)</strong>: Incorrect because <span class=\"customMeta\" data-dictid=\"61c2938b191692777183fbbe51a17c\">brachytherapy</span> is a type of <span class=\"customMeta\" data-dictid=\"a75f060aa1169277719777dd69df3f\">radiotherapy</span> where a <span class=\"customMeta\" data-dictid=\"f391426a781692777197a16039bb5e\">radioactive</span> source is placed directly inside or very close to the tumor. It is typically used for specific cancers (e.g., prostate, cervical) rather than the fractionated external beam therapy described in the question.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/wV44ebMhXTomUlYh8Kbi1746437048.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Side effects of Pituitary irradiation?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Hypopituitarism"
      },
      {
        "id": 2,
        "text": "Increased risk of cerebrovascular accident"
      },
      {
        "id": 3,
        "text": "Optic nerve damage"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Pituitary irradiation</strong>, commonly used in the treatment of <span class=\"customMeta\" data-dictid=\"b775f0c475169277719593c573f6ff\">pituitary</span> adenomas or certain hormonal disorders, can lead to various side effects due to the proximity of critical structures in the brain.</p>\n\n<ol>\n\t<li><strong>Hypopituitarism:</strong>\n\n\t<ul>\n\t\t<li>This is the most common long-term side effect. Radiation can damage the normal <span class=\"customMeta\" data-dictid=\"b775f0c475169277719593c573f6ff\">pituitary</span> tissue, leading to deficiencies in <span class=\"customMeta\" data-dictid=\"b775f0c475169277719593c573f6ff\">pituitary</span> hormones (e.g., growth hormone, thyroid-stimulating hormone, or gonadotropins).</li>\n\t</ul>\n\t</li>\n\t<li><strong>Increased risk of <span class=\"customMeta\" data-dictid=\"75a3b02a801692777184b9cb7f0c0a\">cerebrovascular</span> accident (CVA):</strong>\n\t<ul>\n\t\t<li>Radiation exposure to nearby <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> structures, such as the <span class=\"customMeta\" data-dictid=\"8593e48e0416927771834eaedb0bfd\">carotid</span> arteries, can lead to <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> damage and increase the risk of strokes or <span class=\"customMeta\" data-dictid=\"a6cf2c3dc51692777200ef7fb22f69\">transient</span> ischemic attacks over time.</li>\n\t</ul>\n\t</li>\n\t<li><strong>Optic nerve damage:</strong>\n\t<ul>\n\t\t<li>Radiation can damage the <span class=\"customMeta\" data-dictid=\"1b9a354cdb1692777194802683234d\">optic</span> nerves or the <span class=\"customMeta\" data-dictid=\"1b9a354cdb1692777194802683234d\">optic</span> chiasm, leading to visual deficits such as <span class=\"customMeta\" data-dictid=\"d01e44abab16927772010db8725801\">visual field</span> loss or, in severe cases, blindness.</li>\n\t</ul>\n\t</li>\n</ol>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which phase of the cell cycle displays the highest resistance to radiation among the following options?</p>",
    "choices": [
      {
        "id": 1,
        "text": "S phase"
      },
      {
        "id": 2,
        "text": "M phase"
      },
      {
        "id": 3,
        "text": "G1 phase"
      },
      {
        "id": 4,
        "text": "G2 phase"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) S phase</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The <span class=\"customMeta\" data-dictid=\"fe4f1996791692777198b3f5161f1d\">S phase</span> of the <span class=\"customMeta\" data-dictid=\"5173f9c96716927771843cbe0c7611\">cell cycle</span> is the most radioresistant phase. During this phase, the DNA is actively being replicated, and mechanisms for DNA repair are highly active, providing protection against radiation-induced damage.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>M phase (option B):</strong> This is incorrect because the <span class=\"customMeta\" data-dictid=\"60965e14fb1692777192c080308cf4\">M phase</span> (mitosis) is the most <span class=\"customMeta\" data-dictid=\"3ff1a8ff3f16927771971636564c4a\">radiosensitive</span> phase due to the condensed state of chromosomes and limited time for DNA repair mechanisms to function.</p>\n\n<p><strong>G1 phase (option C):</strong> This is incorrect because cells in the G1 phase are moderately sensitive to radiation. However, their sensitivity depends on whether they are preparing for DNA synthesis.</p>\n\n<p><strong>G2 phase (option D):</strong> This is incorrect because the G2 phase is also a <span class=\"customMeta\" data-dictid=\"3ff1a8ff3f16927771971636564c4a\">radiosensitive</span> phase, as the cell prepares for <span class=\"customMeta\" data-dictid=\"ac20ea03da16927771927ed3648056\">mitosis</span> and DNA repair capacity is lower than in the S phase.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A child with acute lymphoblastic leukemia undergoes prophylactic irradiation prior autologous hematopoietic stem cell transplantation. Which of the following will be the least affected?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Spermatogonia"
      },
      {
        "id": 2,
        "text": "Intestinal epithelial cells"
      },
      {
        "id": 3,
        "text": "Neurons"
      },
      {
        "id": 4,
        "text": "Bone marrow/ erythroid precursor cells"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Neurons</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>Neurons are terminally differentiated, non-dividing cells. Their low mitotic activity makes them relatively resistant to radiation-induced damage.</p>\n\n<p><strong>According to the Law of Bergonie:</strong></p>\n\n<p>The more the cells are rapidly dividing, the more they are sensitive to radiation.</p>\n\n<ul>\n\t<li>M-phase (dividing phase) is the most <span class=\"customMeta\" data-dictid=\"3ff1a8ff3f16927771971636564c4a\">radiosensitive</span> phase</li>\n\t<li>S-phase (Synthesizing phase) is the most radioresistant phase</li>\n</ul>\n\n<p style=\"text-align: center;\"><img alt=\"Law of Bergonie\" data-author=\"\" data-hash=\"12001\" data-license=\"\" data-source=\"\" data-tags=\"May2025\" height=\"222\" src=\"https://image.prepladder.com/notes/P7mJJWUGf5HAkupbBxzT1746445894.png\" width=\"400\" /></p>\n\n<ul>\n\t<li>Most <span class=\"customMeta\" data-dictid=\"3ff1a8ff3f16927771971636564c4a\">radiosensitive</span> tissue in the body is <span class=\"customMeta\" data-dictid=\"5b9831f3aa169277718395d7361df6\">Bone marrow</span> (rapidly dividing).</li>\n\t<li>Most radioresistant tissue in the body is neurons (non-dividing).</li>\n\t<li>Most <span class=\"customMeta\" data-dictid=\"3ff1a8ff3f16927771971636564c4a\">radiosensitive</span> cells in the blood are lymphocytes.</li>\n\t<li>The most radioresistant cell in the blood is the platelet.</li>\n\t<li>The most radioresistant organ in the body is the vagina.</li>\n</ul>\n\n<p><strong>Spermatogonia (Option A): </strong>are highly <span class=\"customMeta\" data-dictid=\"3ff1a8ff3f16927771971636564c4a\">radiosensitive</span> because they are actively dividing cells. <span class=\"customMeta\" data-dictid=\"35bafad73816927771904e162f4a70\">Irradiation</span> can severely affect spermatogenesis.</p>\n\n<p><strong>Intestinal epithelial cells (Option B): </strong>are composed of rapidly dividing cells. It has one of the highest <span class=\"customMeta\" data-dictid=\"a13747deff16927772016cfbf6b284\">turnover</span> rates in the body, making it highly sensitive to radiation.</p>\n\n<p><strong>Bone marrow/erythroid <span class=\"customMeta\" data-dictid=\"ae13cdc5c3169277719683e9f6bda5\">precursor</span> cells (Option D):</strong> <span class=\"customMeta\" data-dictid=\"5b9831f3aa169277718395d7361df6\">Bone marrow</span> cells, including <span class=\"customMeta\" data-dictid=\"892718f3e916927771871389d2e1a3\">erythroid</span> precursors, are highly proliferative and sensitive to radiation. <span class=\"customMeta\" data-dictid=\"35bafad73816927771904e162f4a70\">Irradiation</span> often results in significant <span class=\"customMeta\" data-dictid=\"7b7c55fbdd16927771990b50bda606\">suppression</span> of hematopoiesis.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/P7mJJWUGf5HAkupbBxzT1746445894.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>What does a linear accelerator (LINAC) produce in radiation therapy?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Alpha and beta rays"
      },
      {
        "id": 2,
        "text": "X-rays and gamma rays"
      },
      {
        "id": 3,
        "text": "X-rays and electrons"
      },
      {
        "id": 4,
        "text": "Neutrons and positrons"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Option C -</strong><strong> X-rays and electrons:</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>A <span class=\"customMeta\" data-dictid=\"d02067c4b51692777191b8eec8b062\">linear</span> <span class=\"customMeta\" data-dictid=\"2180aada141692777180202a266deb\">accelerator</span> (LINAC) is the most commonly used device in external beam radiation therapy.</li>\n\t<li>It accelerates electrons to high energies using <span class=\"customMeta\" data-dictid=\"75980ed2e61692777192b8333ba517\">microwave</span> technology.</li>\n\t<li>These high-energy electrons can be used directly to treat <span class=\"customMeta\" data-dictid=\"ebb480187d1692777199e233e9e356\">superficial</span> tumors, or they can be directed onto a metal target to produce high-energy X-rays (photons) for treating deep-seated tumors.</li>\n\t<li>This allows precise <span class=\"customMeta\" data-dictid=\"e4865847fa169277720044d7b530b0\">targeting</span> of <span class=\"customMeta\" data-dictid=\"f8aaf091221692777191f73e810e94\">malignant</span> tissue while sparing surrounding normal structures.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"370\" src=\"https://image.prepladder.com/content/3zTNfWou9jkC0rGjGOob1755780577.png\" width=\"500\" /></p>\n\n<p><strong>LINAC Machine:</strong></p>\n\n<ul>\n\t<li>The overhead X-ray tube emits X-ray beams to the patient.<strong> </strong></li>\n\t<li>It also has a movable arm that can be mobilized around the patient.</li>\n\t<li>The treatment head contains significant shielding material to minimize leakage radiation.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"488\" src=\"https://image.prepladder.com/content/p16lJCPMAAjRPvEspUtY1755780578.png\" width=\"500\" /></p>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Alpha and <span class=\"customMeta\" data-dictid=\"806eb8418c16927771822855b56695\">beta</span> rays (Option A):</strong> Emitted from <span class=\"customMeta\" data-dictid=\"f391426a781692777197a16039bb5e\">radioactive</span> <span class=\"customMeta\" data-dictid=\"6a867651ba1692777185bb15ba2f9c\">decay</span> of certain isotopes, not generated by LINACs.</p>\n\n<p><strong>X-rays and <span class=\"customMeta\" data-dictid=\"49be0416121692777188dc8944b7bc\">gamma</span> rays (Option B):</strong> <span class=\"customMeta\" data-dictid=\"49be0416121692777188dc8944b7bc\">Gamma</span> rays are emitted from <span class=\"customMeta\" data-dictid=\"f391426a781692777197a16039bb5e\">radioactive</span> isotopes like cobalt-60, not produced by a LINAC.</p>\n\n<p><strong>Neutrons and positrons (Option D):</strong> Neutrons are used in specialized <span class=\"customMeta\" data-dictid=\"34142a12311692777193fb4f4cb9ba\">neutron</span> therapy, and positrons are emitted in PET imaging; neither is produced by a LINAC.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/3zTNfWou9jkC0rGjGOob1755780577.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which among the following radioactive isotopes is not employed in brachytherapy?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Iodine-125"
      },
      {
        "id": 2,
        "text": "Iodine-131"
      },
      {
        "id": 3,
        "text": "Cobalt-60"
      },
      {
        "id": 4,
        "text": "Iridium-192"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B:</strong></p>\n\n<ul>\n\t<li>Iodine-131 is used in <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">Systemic</span> <span class=\"customMeta\" data-dictid=\"a75f060aa1169277719777dd69df3f\">Radiotherapy</span> like <span class=\"customMeta\" data-dictid=\"62b9af909d1692777194cd004f10f4\">Papillary</span> <span class=\"customMeta\" data-dictid=\"799202e6fe16927772009a1501b0a8\">Thyroid</span> Carcinoma. I-131 is also used for the treatment of <span class=\"customMeta\" data-dictid=\"1bbae82f1f16927771824f797639fa\">benign</span> <span class=\"customMeta\" data-dictid=\"236b9106d7169277718961e983707b\">hyperthyroid</span> conditions. It is, however, not used in any <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of brachytherapy. Therefore, option b is the correct answer.</li>\n\t<li>In brachytherapy, a radiation source is placed inside the body of tumor tissue or on the body of tumor tissue. This minimizes radiation exposure to the persons handling it and also to the person who is receiving brachytherapy.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong>\u00a0</p>\n\n<p><strong>Option A - Iodine- 125: </strong>I-125, with a <span class=\"customMeta\" data-dictid=\"082d1526db1692777188311b6eef04\">half-life</span> of 60 days, is the most common <span class=\"customMeta\" data-dictid=\"f391426a781692777197a16039bb5e\">radioactive</span> <span class=\"customMeta\" data-dictid=\"7cb1c220051692777190be13e8c7cc\">isotope</span> used in permanent <span class=\"customMeta\" data-dictid=\"f46ba26d111692777190def3b1d80a\">interstitial</span> brachytherapy. Hence, it is an incorrect choice.</p>\n\n<p><strong>Option B - Cobalt- 60: </strong>These <span class=\"customMeta\" data-dictid=\"f391426a781692777197a16039bb5e\">radioactive</span> isotopes are produced by <span class=\"customMeta\" data-dictid=\"34142a12311692777193fb4f4cb9ba\">neutron</span> <span class=\"customMeta\" data-dictid=\"ba6b77f29316927771807350f86ce2\">activation</span> of stable cobalt-59. They have a <span class=\"customMeta\" data-dictid=\"082d1526db1692777188311b6eef04\">half-life</span> of 5.27 years. These have been used in <span class=\"customMeta\" data-dictid=\"b76af2d0cf1692777190dd95114fd2\">intracavitary</span> or HDR <span class=\"customMeta\" data-dictid=\"61c2938b191692777183fbbe51a17c\">brachytherapy</span> for a long. Therefore, it is an incorrect choice.</p>\n\n<p><strong>Option D - Iridium-192: </strong>Iridium-192 is produced by <span class=\"customMeta\" data-dictid=\"34142a12311692777193fb4f4cb9ba\">neutron</span> <span class=\"customMeta\" data-dictid=\"ba6b77f29316927771807350f86ce2\">activation</span> of stable Iridium-191. They have a <span class=\"customMeta\" data-dictid=\"082d1526db1692777188311b6eef04\">half-life</span> of 73.83 days. These <span class=\"customMeta\" data-dictid=\"f391426a781692777197a16039bb5e\">radioactive</span> isotopes are used in HDR brachytherapy. Therefore, they are incorrect choices.<br />\n\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>In which situation is the Bragg peak effect most prominent?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Xray"
      },
      {
        "id": 2,
        "text": "Proton"
      },
      {
        "id": 3,
        "text": "Neutron"
      },
      {
        "id": 4,
        "text": "Electron"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B:\u00a0Proton</strong></p>\n\n<ul>\n\t<li>\"Proton.\" Protons exhibit a pronounced <strong>Bragg peak effect, </strong>meaning they deposit most of their energy at a specific depth within tissue.</li>\n\t<li>This characteristic is advantageous in radiation therapy, as it allows for precise <span class=\"customMeta\" data-dictid=\"e4865847fa169277720044d7b530b0\">targeting</span> of tumors while minimizing damage to surrounding healthy tissue.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Option A: X-ray-</strong> <span class=\"customMeta\" data-dictid=\"6fda63a90c1692777202563d33a81b\">X-rays</span> are a <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of <span class=\"customMeta\" data-dictid=\"c67401aedd169277718703fb7bc5ed\">electromagnetic</span> radiation commonly used in medical imaging. <span class=\"customMeta\" data-dictid=\"6fda63a90c1692777202563d33a81b\">X-rays</span> have a relatively low mass and do not exhibit the <span class=\"customMeta\" data-dictid=\"35f6154f1a1692777183d43de67288\">Bragg peak</span> effect. Instead, their energy deposition decreases gradually as they pass through tissue.</p>\n\n<p><strong>Option C: Neutron-</strong> Neutrons are electrically neutral particles found in the atomic nucleus. Neutrons have a different interaction mechanism with tissue compared to protons. While they can cause <span class=\"customMeta\" data-dictid=\"68fa8b89ce16927771902f239235cb\">ionization</span> and biological damage, they do not exhibit a pronounced <span class=\"customMeta\" data-dictid=\"35f6154f1a1692777183d43de67288\">Bragg peak</span> effect like protons. Neutrons have a more gradual energy deposition profile as they penetrate through tissue.</p>\n\n<p><strong>Option D: Electron-</strong> Electrons are negatively charged particles that are commonly used in radiation therapy. Electrons have a different energy deposition pattern compared to protons. They typically deposit their energy in a continuous manner along their path, without a distinct <span class=\"customMeta\" data-dictid=\"35f6154f1a1692777183d43de67288\">Bragg peak</span> effect</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  }
];
        let quizName = '22 Previous Year Questions';
        let hierarchy = ["PrepLadder", "qBank", "Radiology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>