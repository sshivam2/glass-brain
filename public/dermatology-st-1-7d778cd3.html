<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dermatology St 1 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">40</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Histopathological examination would not reveal acantholysis in patients with:",
    "choices": [
      {
        "id": 1,
        "text": "Pemphigus"
      },
      {
        "id": 2,
        "text": "Darier's disease"
      },
      {
        "id": 3,
        "text": "Staphylococcal scalded skin syndrome"
      },
      {
        "id": 4,
        "text": "Bullous pemphigoid"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Acantholysis</strong>&nbsp;is <strong>not seen</strong> in <strong>bullous pemphigoid</strong>. It is seen in diseases like pemphigus, Darier's disease, and staphylococcal scalded skin syndrome.</p>\n<p>Acantholysis is the <strong>loss of</strong> intercellular connections, such as <strong>desmosomes</strong>, leading to the <strong>loss of cohesion</strong> <strong>between keratinocytes</strong>. This&nbsp;results in the formation of intraepidermal <strong>clefts, vesicle</strong>s, and<strong> bullae</strong>.</p>\n<p><strong>Acantholysis </strong>in<strong> pemphigus vulgaris</strong> affects the <strong>lower</strong> part of the epidermis while that in&nbsp;<strong>pemphigus foliaceus</strong> affects the <strong>upper</strong> part. In&nbsp;<strong>Hailey-Hailey disease, acantholysis&nbsp;</strong>affects the <strong>entire thickness</strong> of the epidermis.</p>\n<p>Acantholysis may be classified as:</p>\n<ul>\n<li><strong>Primary acantholysis: </strong>Due to direct injury<strong>&nbsp;</strong>to or defects seen in desmosomes,&nbsp;separation of keratinocytes occurs, resulting in circular <strong>acantholytic</strong> <strong>cells</strong>. Acantholuysis is the primary event causing intraepidermal cavities. It is seen in conditions such as:\n<ul>\n<li>Pemphigus and its variants</li>\n<li>Acantholytic dermatosis</li>\n<li>Darier's disease</li>\n<li>Hailey Hailey disease</li>\n<li>Warty dyskeratoma</li>\n</ul>\n</li>\n<li><strong>Secondary acantholysis: </strong>Due to the <strong>damage or alteration to the keratinocytes</strong>, leading to the dissolution of desmosomes. This results in acantholysis that is seen in:\n<ul>\n<li>Viral disorders like herpes simplex infections (HSV 1 and 2), varicella-zoster infections (chickenpox and shingles)</li>\n<li>Bullous impetigo</li>\n<li>Solar keratoses</li>\n<li>Squamous cell carcinoma - some forms</li>\n</ul>\n</li>\n</ul>\n<p>The image below shows acantholysis and dyskeratosis as seen in Darier's disease.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/97296413b05c48d48cfab434d2748ae8x512x384.PNG"
    ]
  },
  {
    "text": "Which of the following is a primary skin lesion?",
    "choices": [
      {
        "id": 1,
        "text": "Crust"
      },
      {
        "id": 2,
        "text": "Atrophy"
      },
      {
        "id": 3,
        "text": "Purpura"
      },
      {
        "id": 4,
        "text": "Induration"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Purpura</strong> is a <strong>primary</strong> skin lesion. Crust, atrophy, and induration are secondary lesions.</p>\n<p>It is a condition with&nbsp;<strong>red</strong>&nbsp;or <strong>purple&nbsp;</strong>discolored <strong>spots</strong> on the skin that <strong>do not blanch</strong> on applying pressure. The spots are caused by <strong>bleeding underneath</strong> the <strong>skin.</strong> It is seen:</p>\n<ul>\n<li>Vasculitis</li>\n<li>Thrombocytopenia</li>\n<li>Vitamin C&nbsp;deficiency</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cf24ed8054c444a18cdfa3b3a80e49b0x1280x1191.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c3a3d7bec719414489f0b278c515c461x1280x1381.JPEG"
    ]
  },
  {
    "text": "A 34-year-old lady who is on treatment for hypothyroidism presented with several depigmented patches on her arms and fingers. Wood lamp's examination showed a milky-white fluorescence. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pityriasis versicolor"
      },
      {
        "id": 2,
        "text": "Vitiligo"
      },
      {
        "id": 3,
        "text": "Tinea capitis"
      },
      {
        "id": 4,
        "text": "Erythrasma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Ivory/milky-white fluorescence</strong> on Wood's lamp examination is seen in <strong>vitiligo</strong>.&nbsp;Autoimmune diseases and&nbsp;<strong>vitiligo</strong>&nbsp;have a strong association, especially<strong>&nbsp;thyroid disease</strong>.</p>\n<p>The<strong>&nbsp;loss of pigment</strong> from the skin is the hallmark of vitiligo, which can usually be easily seen by the naked eye in dark-skinned people. It may, however, be very <strong>difficult to appreciate</strong> in <strong>fair-skinned people</strong> because the difference in the color of normal and abnormal skin is hardly any. The normal function of <strong>melanin</strong> is to block and absorb light. Since there is less or<strong> no epidermal melanin</strong> in the vitiligo-affected patches, it cannot block the light emitted from deeper layers of the skin. The <strong>vitiligo</strong>-affected skin appears like a window of <strong>blue-white/ivory white</strong> light with sharp margins. Wood's lamp is hence helpful in the diagnosis of vitiligo, especially in fair-skinned people.</p>\n<p>Vitiligo is classified as -</p>\n<ul>\n<li><strong>Segmental vitiligo</strong>- which appears as&nbsp;<strong>unilateral</strong>&nbsp;maculae in a segmented or band-shaped pattern</li>\n<li><strong>Non-segmental vitiligo</strong>- which appears as&nbsp;<strong>bilateral</strong>&nbsp;maculae distributed in an acrofacial pattern or scattered symmetrically over the entire body</li>\n</ul>\n<p>The lesions become apparent between 20-30 years of age.&nbsp;</p>\n<p>One of the theories for the etiology of vitiligo is based on the clinical association of vitiligo with a number of autoimmune disorders like -</p>\n<ul>\n<li>Thyroid disease (hyperthyroidism and hypothyroidism) - most common association</li>\n<li>Pernicious anemia</li>\n<li>Addison disease</li>\n<li>Diabetes Mellitus</li>\n<li>Hypoparathyroidism</li>\n<li>Alopecia areata</li>\n</ul>\n<p class=\"p1\">Hypopigmented macules in vitiligo are commonly found in the&nbsp;<strong>hips, dorsum of the hands/fingers</strong>,&nbsp;<strong>feet, elbows, knees, and ankle areas.</strong>&nbsp;These are the areas of repeated friction. Rarely there may be complete vitiligo (vitiligo universalis), or trichrome vitiligo where there are areas of depigmentation, hyperpigmentation, along with normal skin present. The&nbsp;<strong>k</strong><strong>oebner phenomenon</strong>&nbsp;is the development of&nbsp;<strong>lesions at the site of trauma</strong>&nbsp;on the uninvolved skin.</p>\n<p>Treatment involves <strong>cosmetic camouflage</strong> and the use of <strong>sunscreen.</strong> The topical application of&nbsp;<strong>corticosteroids</strong>&nbsp;is the&nbsp;<strong>first line of treatment</strong>. Topical calcineurin inhibitors like&nbsp;pimecrolimus and tacrolimus have also bee successful.&nbsp;<strong>Psoralen photochemotherapy,</strong>&nbsp;khellin and selective&nbsp;<strong>ultraviolet B therapy</strong>&nbsp;are used as&nbsp;<strong>second-line treatment</strong>. In patients who do not respond to this treatment, <strong>surgical grafting techniques</strong> can be used, where the melanocytes from a normal pigmented area are transferred to a non pigmented area. In patients with extensive vitiligo where only a few pigmented areas are left, depigmentation can be done.</p>\n<p><strong>Poor prognostic factors for vitiligo:</strong></p>\n<ul>\n<li>Positive family history&nbsp;</li>\n<li>Mucosal vitiligo&nbsp;</li>\n<li>Lesions over bony prominences</li>\n<li>Isomorphic Koebner's phenomenon&nbsp;</li>\n<li>Non-segmental vitiligo</li>\n</ul>\n<p>Leucotrichia, longer duration, and higher age at onset do not correlate significantly with progression.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following  is a correct statement regarding the given condition?",
    "choices": [
      {
        "id": 1,
        "text": "Ectopic sebaceous glands"
      },
      {
        "id": 2,
        "text": "Antibiotics are the first line treatment"
      },
      {
        "id": 3,
        "text": "It is asymptomatic"
      },
      {
        "id": 4,
        "text": "Occur commonly on upper lip"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shows<strong> pearly, penile papules.&nbsp;</strong>These are exclusively found in males. They consist of <strong>flesh-coloured, smooth papules</strong> most commonly on the <strong>coronal margin</strong> of the glans penis. They are <strong>benign</strong> and <strong>asymptomatic</strong> and treatment involves<strong> reassuring the patient.&nbsp;</strong></p>\n<p>*Note: Pearly, penile papules are commonly mistaken for Fordyce spots (Tyson's glands). Fordyce spots are commonly seen on the shaft of the penis and are ectopic sebaceous glands. Image below depicts Fordyce spots on the penile shaft:&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/52fcf076675a4d16afd45f4a87261fa6.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b9511ced3a204eeb9dd12285e8dc7780x674x447.JPEG"
    ]
  },
  {
    "text": "Identify the following condition.",
    "choices": [
      {
        "id": 1,
        "text": "Acne rosacea"
      },
      {
        "id": 2,
        "text": "Acne vulgaris"
      },
      {
        "id": 3,
        "text": "Rhinophyma"
      },
      {
        "id": 4,
        "text": "Sebaceous gland neoplasm"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Rhinophyma&nbsp;</strong>(also known as <strong>p</strong><strong>otato</strong> <strong>nose</strong>) is a slowly progressive condition due to&nbsp;<strong>hypertrophy</strong> and<strong> hyperplasia</strong> of the<strong> sebaceous glands</strong> of the tip of the nose.</p>\n<p>It is often seen in cases of <strong>long-standing</strong>&nbsp;rosacea called <strong>phymatous rosacea.</strong>&nbsp;It is not a neoplasm.</p>\n<p>It presents as a <strong>pink, lobulated mass</strong> over the nose with superficial vascular dilation.&nbsp;It mostly affects <strong>men past middle age</strong>.&nbsp;Patients seek advice because of the distorted appearance of the enlarged nose, or obstruction in breathing and vision.</p>\n<p>Rhinophyma may be diagnosed <strong>clinically</strong>, but a <strong>skin biopsy</strong> can confirm the diagnosis.&nbsp;On histology, rhinophyma shows sebaceous gland hypertrophy, hyperplasia and fibrosis.</p>\n<p>The most common indication for treatment is <strong>cosmetic</strong>.&nbsp;Ablation using <strong>CO<sub>2</sub> laser</strong> or <strong>surgical resection</strong> of excess tissue with remodelling of nose can be performed.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3fb530a4b95944688a4305513e747905.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is not true regarding piebaldism?",
    "choices": [
      {
        "id": 1,
        "text": "Autosomal dominant inheritance"
      },
      {
        "id": 2,
        "text": "Well-defined hypopigmented macules are seen"
      },
      {
        "id": 3,
        "text": "White forelock is rare"
      },
      {
        "id": 4,
        "text": "Small spots of hyperpigmentation can also be seen"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>White forelock</strong> is quite <strong>common\u00a0</strong>in <strong>piebaldism.</strong></p>\n<p>Piebaldism is an\u00a0<strong>autosomal dominant</strong> benign\u00a0condition. Mutations are in the c\u2010KIT gene.</p>\n<p>Well-defined irregular\u00a0<strong>hypopigmented macules</strong>\u00a0with an absence of melanocytes are seen. <strong>Leucotrichia</strong> is associated with the depigmented macules. Small spots of hyperpigmentation are also seen within hypopigmented patches or on normal skin.\u00a0It is often associated with a <strong>V-shaped leucoderma</strong> on the mid-forehead.\u00a0</p>\n<p><strong>Epidermal cell</strong> or <strong>skin grafting</strong> is the treatment.</p>\n<p>Piebaldism can be distinguished from vitiligo because of the<strong> neonatal presence of white patches.\u00a0</strong></p>\n<p>The images below show patients with piebaldism.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/64f6f8375a5844ebbed9f5ce8ccecb18x512x510.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d9349ee959354067b31b655993544b5fx512x310.PNG"
    ]
  },
  {
    "text": "Which of the following is the reason for the development of a simple lentigo?",
    "choices": [
      {
        "id": 1,
        "text": "Increased melanin"
      },
      {
        "id": 2,
        "text": "Increased melanocytes"
      },
      {
        "id": 3,
        "text": "Increased melanosomes"
      },
      {
        "id": 4,
        "text": "Decreased melanophages"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Simple lentigo</strong> occurs due to an <strong>increase in melanocytes</strong> at the&nbsp;<strong>dermal-epidermal junction.</strong></p>\n<p>Simple lentigo or <strong>lentigo simplex</strong> is a light to dark-brown or black <strong>macule</strong> that <strong>does not fade away</strong> once it appears. They usually <strong>appear during childhood</strong> and increase in number until the age of 40. It is more common in individuals with red hair and fair skin.</p>\n<p>The image shows lentigo simplex- hyperpigmentation is evident in the basal and squamous epidermal cells.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e82657c53e21481db426a43fb422413ax1280x1282.JPEG"
    ]
  },
  {
    "text": "Which of the following conditions causes bamboo hair as seen in the image below?",
    "choices": [
      {
        "id": 1,
        "text": "Trichorrhexis nodosa"
      },
      {
        "id": 2,
        "text": "Netherton syndrome"
      },
      {
        "id": 3,
        "text": "Kinky hair syndrome"
      },
      {
        "id": 4,
        "text": "Uncombable hair syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Bamboo hair</strong> is seen in<strong> Netherton</strong> syndrome.</p>\n<p>It presents with <strong>atopy</strong>, recurrent skin <strong>infection</strong>, and an increased risk of skin <strong>cancer</strong>. It has two characteristic features, namely:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Ichthyosis linearis circumflexa</strong>&nbsp;- a rare form of ichthyosis with scaling and plaques.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Trichorrhexis invaginata</strong>&nbsp;or bamboo hair - characterized by invagination of the distal hair shaft into the proximal portion. It is also called <strong>golf-tee</strong> or <strong>ball and socket</strong> appearance as seen below.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/87ff8b04cdb84136b9cf9352e89bfdd8.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0610858131b541dbbf67cb6727e6a75fx483x585.PNG",
      "https://cdn1.dailyrounds.org/uploads/aa4ddc46fbd44ad7ade374c874d3b784x444x483.JPEG",
      "https://cdn1.dailyrounds.org/uploads/e333e5b359f24e5694d90e82698802adx469x352.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/883165e3ecb24248958cff0d47ed7149x603x600.JPEG",
      "https://cdn1.dailyrounds.org/uploads/e2f2a5c2aa06471d8c81201ad50727f9x697x447.JPEG"
    ]
  },
  {
    "text": "A medical student is visiting her grandmother, who is recovering from heart surgery. She decides to cheer her up by painting her nails. She notices that her nails look odd as seen below. What is this finding called?",
    "choices": [
      {
        "id": 1,
        "text": "Beau\u2019s lines"
      },
      {
        "id": 2,
        "text": "Mees lines"
      },
      {
        "id": 3,
        "text": "Lindsay nail"
      },
      {
        "id": 4,
        "text": "Trachyonychia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This image shows <strong>Beau&rsquo;s lines</strong> which are <strong>generalized transverse grooves</strong> on the nail which may be full or partial thickness. They usually occur a few weeks after a precipitating <strong>systemic event</strong> like MI, measles, mumps, or pneumonia.&nbsp;</p>\n<p>Isolated transverse grooves in individual nails may occur due to trauma, inflammation, or neurological events.</p>\n<p>Option B: <strong>Mees</strong> or <strong>Aldrich&ndash;Mees</strong> lines or Leukonychia striata are white lines that occur as a 1&ndash;2 mm wide transverse band is in the arcuate form of the lunula. They are associated with <strong>arsenic</strong> and <strong>lithium</strong> poisoning as well as <strong>renal failure</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f3c48a1dc2854be18c805ca63300f9a7.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a316786f0ae746cca8d96451aefaf032x720x616.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/60974e4895c54004b68b97215279c69ex1280x1486.JPEG"
    ]
  },
  {
    "text": "The UK refinement of Hanifin and Rajka criteria is used in the diagnosis of ______",
    "choices": [
      {
        "id": 1,
        "text": "Atopic dermatitis"
      },
      {
        "id": 2,
        "text": "Nummular Eczema"
      },
      {
        "id": 3,
        "text": "Eczema Herpeticum"
      },
      {
        "id": 4,
        "text": "Contact dermatitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The<strong> UK refinement of Hanifin and Rajka criteria</strong> is used in the diagnosis of <strong>Atopic dermatitis.</strong></p>\n<p>The original <strong>Hanifin and Rajka criteria</strong> requires that patients have at least 3 of the 4 major criteria and 3 of the 23 minor criteria. Consequently, <strong>Williams et al.</strong> coordinated a <strong>UK working party</strong> to attempt to refine the criteria of Hanifin and Rajka into a repeatable and validated set of diagnostic criteria for atopic eczema.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Berloque dermatitis is caused due to _____",
    "choices": [
      {
        "id": 1,
        "text": "Metals"
      },
      {
        "id": 2,
        "text": "Food"
      },
      {
        "id": 3,
        "text": "Perfumes"
      },
      {
        "id": 4,
        "text": "Plants"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>Berloque dermatitis</strong> is a type of <strong>skin</strong> <strong>pigmentation</strong> due to an <strong>acute phototoxic reaction</strong> to <strong>perfumes </strong>applied to the skin.</li>\n<li><strong>Berloque dermatitis</strong> results from the potentiation of <strong>UV-stimulated melanogenesis</strong> by 5-methoxypsoralen<strong> (bergapten)</strong> in <strong>perfumes</strong> containing <strong>bergamot oil</strong>.</li>\n<li><strong>Deep-brown pigmentation</strong> follows the pattern formed by the trickle of the droplets of perfume over the skin from their points of application.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/7d9a6090387e4e529f86274c5ad315dbx735x1110.JPEG"
    ]
  },
  {
    "text": "While examining a patient in the dermatology OPD, the senior resident elicits the following finding. What condition does this patient likely have?",
    "choices": [
      {
        "id": 1,
        "text": "Urticaria pigmentosa"
      },
      {
        "id": 2,
        "text": "Chronic urticaria"
      },
      {
        "id": 3,
        "text": "Cholinergic urticaria"
      },
      {
        "id": 4,
        "text": "Urticarial vasculitis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This clinical scenario is suggestive of&nbsp;<strong>dermographism, </strong>which is commonly elicited in <strong>chronic urticaria</strong> patients.</p>\n<p>It is an urticarial reaction in response to <strong>pressure</strong> or <strong>trauma</strong> to the skin. It is the <strong>most common</strong> type of <strong>inducible</strong> urticaria.</p>\n<p><strong>Simple dermographism </strong>or<strong> factitious urticaria&nbsp;</strong>refers to the <strong>triple response</strong> of local<strong> erythema</strong>&nbsp;due to:&nbsp;</p>\n<ol>\n<li>Capillary vasodilatation</li>\n<li>Edema</li>\n<li>Surrounding flare&nbsp;</li>\n</ol>\n<p>The eliciting stimulus determines the shape of the wheals, but they are often linear from scratching or stroking.</p>\n<p>In &lt;5% of cases,&nbsp;<strong>symptomatic </strong>dermographism can occur. It is characterized by severe,&nbsp;<strong>disproportionate itching</strong> that is worse at <strong>night</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4bf3d00e6a664180b8b8757c5cfbbbdd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/df76f82777824e67a2aa07ad680f783cx1280x707.JPEG"
    ]
  },
  {
    "text": "In which of the following conditions would you expect to see Darier's sign?",
    "choices": [
      {
        "id": 1,
        "text": "Darier's disease"
      },
      {
        "id": 2,
        "text": "Urticaria pigmentosa"
      },
      {
        "id": 3,
        "text": "Hereditary angioedema"
      },
      {
        "id": 4,
        "text": "Atopic dermatitis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Darier's</strong> sign is seen in&nbsp;<strong>urticaria pigmentosa</strong>. It&nbsp;refers to the development of <strong>urticaria</strong> and <strong>erythema</strong> around the lesions after <strong>mild trauma</strong>, including scratching or rubbing of the lesion.</p>\n<p>Urticaria pigmentosa is the most common pattern of <strong>cutaneous mastocytosis</strong>, which occurs due to an increased number of mast cells in the skin.&nbsp;It presents with <strong>reddish-brown</strong> or pale <strong>maculopapules</strong>, plaques, nodules in <strong>symmetric</strong> distribution, sparing the palms and soles.</p>\n<p>Darier's sign is<strong> not specific</strong> for mastocytosis as it is also rarely seen in <strong>juvenile xanthogranuloma</strong> and <strong>acute</strong> <strong>lymphoblastic leukemia</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bfabb8387f314858949b8192868729e9x1280x2310.JPEG"
    ]
  },
  {
    "text": "All of the following statements are false regarding hereditary angioneurotic edema except ____",
    "choices": [
      {
        "id": 1,
        "text": "It is an autosomal recessive disease"
      },
      {
        "id": 2,
        "text": "Loss of function mutation of F-12 is seen in patients having type III HAE"
      },
      {
        "id": 3,
        "text": "Associated with mutations of SERPING1 gene"
      },
      {
        "id": 4,
        "text": "All types of HAE aggravated by nonsteroidal anti-inflammatory drugs"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>Hereditary angioneurotic edema (HAE) </strong>is associated with mutation in <strong>SERPING1 gene</strong>, which provides instructions for making a protein called <strong>C1 inhibitor</strong>.</li>\n<li><strong>Types I and II HAE</strong> are inherited as an <strong>autosomal dominant </strong>trait on <strong>chromosome 11q 12.1</strong>.</li>\n<li>Over 280 different mutations of the gene controlling C1INH (<strong>SERPING1</strong>) have been identified to be associated with HAE.</li>\n<li><strong>Gain\u2010of\u2010function mutations</strong> of F12 that have been described in about 20% of patients with type III HAE.</li>\n<li>All types of HAE are <strong>aggravated by oestrogen</strong> in contraceptive and hormone replacement therapies but <strong>not non\u2010steroidal anti\u2010infl ammatory drugs (NSAIDs)</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not seen in pityriasis rubra pilaris?",
    "choices": [
      {
        "id": 1,
        "text": "Salmon-Red colored dry scaly plaques"
      },
      {
        "id": 2,
        "text": "Islands of sparing"
      },
      {
        "id": 3,
        "text": "Herald patch"
      },
      {
        "id": 4,
        "text": "Nutmeg grater papules"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Herald patch</strong> is seen in<strong> pityriasis rosea.</strong></p>\n<p>The features of Pityriasis Rubra Pilaris are as follows:</p>\n<ul>\n<li><strong>Salmon-red</strong> or <strong>Orange-red</strong> coloured dry scaly plaques are seen characteristically, which coalesce together, leaving islands of normal skin typically known as\u00a0 \u201c<strong>Islands of sparing</strong>\u201d in between the lesions.</li>\n<li>On elbow and wrist, <strong>nutmeg grater papules</strong> are seen due to <strong>follicular hyperkeratosis</strong>.</li>\n<li>Palmoplantar keratoderma-Keratoderma on sole is very thick that it appears as sandal.(<strong>Keratotic</strong> <strong>sandal</strong>).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 11-year-old girl presented with marked pruritus in the vulval region. On examination, well-demarcated, symmetrical, erythematous, non-scaly plaques are seen on the labia majora. Which of the following conditions could have caused these lesions?",
    "choices": [
      {
        "id": 1,
        "text": "Lichen planus"
      },
      {
        "id": 2,
        "text": "Pityriasis rubra pilaris"
      },
      {
        "id": 3,
        "text": "Pityriasis rosea"
      },
      {
        "id": 4,
        "text": "Psoriasis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Well-demarcated</strong>, <strong>symmetrical</strong>, <strong>erythematous</strong>, <strong>non-scaly plaque</strong> affecting the<strong> labia majora</strong>&nbsp;is characteristically seen in <strong>genital psoriasis</strong> in <strong>children</strong>.</p>\n<p>Patients with vulval involvement usually complain of<strong> marked pruritus.&nbsp;</strong><strong>Psoriasis</strong> is one of the common causes of <strong>chronic</strong> <strong>vulvitis</strong> in <strong>children</strong>&nbsp;and adults. It is one of the causes of chronic erythematous vulvitis without vaginitis in adults.</p>\n<p><strong>Psoriasis</strong>&nbsp;is characterized by&nbsp;<strong>erythematous plaques</strong>&nbsp;covered with&nbsp;<strong>silver scales</strong>. It generally affects the&nbsp;<strong>extensor surfaces</strong>, scalp, and lumbosacral region.&nbsp;The peak of occurrence is between 16 to 22 years and between 57 to 62 years. They usually present with&nbsp;<strong>itching</strong>&nbsp;and a&nbsp;<strong>papulosquamous rash</strong></p>\n<p>It is linked to infiltration of the skin by&nbsp;<strong>activated T cells</strong>&nbsp;which cause the&nbsp;<strong>proliferation of keratinocytes</strong>. This leads to the formation of thick plaques, epidermal hyperplasia, and parakeratosis.&nbsp;</p>\n<p>It can occur in sites of&nbsp;<strong>cutaneous trauma</strong>&nbsp;and old scarring termed&nbsp;<strong>Koebner's phenomenon</strong>. It is suggested that&nbsp;<strong>trauma</strong>&nbsp;stimulates&nbsp;<strong>immune activation</strong>.&nbsp;Plaque psoriasis is the most common type of psoriasis and is seen in 80-90% of patients.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 4-year-old girl was brought by her parents with itchy blisters on her face and buttocks that developed quite suddenly. History revealed an episode of streptococcal pharyngitis 2 weeks ago that was treated with penicillin. Direct immunofluorescence microscopy revealed IgA deposition, as shown in the image below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hailey-Hailey disease"
      },
      {
        "id": 2,
        "text": "Chronic bullous disease of childhood"
      },
      {
        "id": 3,
        "text": "Epidermolysis bullosa dystrophicans"
      },
      {
        "id": 4,
        "text": "Epidermolysis bullosa simplex"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image showing&nbsp;linear deposition of IgA at the dermo-epidermal junction is diagnostic for&nbsp;<strong>linear IgA disease</strong>&nbsp;or <strong>chronic bullous disorder of childhood</strong> or IgA pemphigoid.</p>\n<p>It&nbsp;is the <strong>most common&nbsp;immunobullous</strong> disease in <strong>infants</strong> and <strong>children.</strong> It may occur <strong>&lt;</strong><strong>5 years</strong> or at&nbsp;<strong>60-65 years</strong> of age.&nbsp;It occurs in <strong>genetic</strong>ally susceptible individuals and can be triggered by <strong>drugs</strong> like vancomycin, penicillin, and NSAIDs.&nbsp;The main target antigen is <strong>BP180</strong> or <strong>BPAg2</strong>.&nbsp;</p>\n<p>The classic <strong>triad</strong> of clinical features is:</p>\n<ol>\n<li>Tense blisters</li>\n<li>Vesicles</li>\n<li>Annular erythema</li>\n</ol>\n<p>Onset is abrupt in children with involvement of the perioral and perianal regions. In adults, the extensor areas and trunk are affected.&nbsp;The blisters are arranged in an&nbsp;<strong>annular </strong>pattern. This is called the <strong>crown of jewels</strong> or <strong>string of pearls</strong> appearance, as shown below.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/16faf56b9efd4d8395284d55556246f0.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/0671f523c7034c6eab5e1ed19ed2e66ex800x501.JPEG"
    ]
  },
  {
    "text": "Which of the following genes when mutated leads to Darier\u2019s disease?",
    "choices": [
      {
        "id": 1,
        "text": "ATP 2C2"
      },
      {
        "id": 2,
        "text": "ATP 2A2"
      },
      {
        "id": 3,
        "text": "ATP 3A2"
      },
      {
        "id": 4,
        "text": "ATP 2C1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Darier\u2019s disease is an autosomal genodermatosis characterised by keratotic papules that show acantholysis and dyskeratosis.</li>\n<li><strong>ATP2A2</strong>, present in basal and supra basal epidermis, which encodes <strong>Ca<sup>2+</sup> ATPase</strong> <strong>type 2</strong> of <strong>sarcoplasmic reticulum(SERCA 2)</strong>\u00a0essential for desmosome function, is mutated in Darier disease.</li>\n<li>The loss of desmosome function leads to loss of keratinocyte adhesion to each other which causes <strong>keratinocyte separation (Acantholysis) </strong>and blistering in suprabasal epidermis.</li>\n<li>Similarly, in <strong>Hailey-Hailey disease</strong> which is another genodermatosis,\u00a0<strong>ATP2C1</strong> is mutated.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the duration of multibacillary leprosy treatment?",
    "choices": [
      {
        "id": 1,
        "text": "24 months"
      },
      {
        "id": 2,
        "text": "18 months"
      },
      {
        "id": 3,
        "text": "12 months"
      },
      {
        "id": 4,
        "text": "6 months"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>As per the <strong>WHO multidrug therapy regimen</strong> for treatment of leprosy, the duration of treatment for <strong>multibacillary leprosy</strong> is <strong>12 months</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following is not seen in leprosy?",
    "choices": [
      {
        "id": 1,
        "text": "Voluntary muscle wasting"
      },
      {
        "id": 2,
        "text": "Decreased response to tactile sensation"
      },
      {
        "id": 3,
        "text": "Increased response to tactile sensation"
      },
      {
        "id": 4,
        "text": "Decreased proprioception"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Proprioception </strong>and <strong>vibration sense</strong> is <strong>not</strong> <strong>impaired</strong> in <strong>leprosy</strong>.<br />Nerve involvement in leprosy causes <strong>motor</strong> <strong>palsy</strong> leading to an <strong>abnormal</strong> <strong>EMG</strong>.</p>\n<p>Other options:<strong><br />Voluntary</strong> <strong>muscle</strong> <strong>wasting</strong> is seen in leprosy.<br /><strong>Decreased</strong> <strong>sensations</strong> are classically seen in leprosy.<br />However, an&nbsp;<strong>increased</strong> <strong>tactile</strong> <strong>response</strong> is seen in <strong>Type I Lepra reaction</strong> with hyperesthesia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 67-year-old diabetic comes to you with a rash over the intertriginous areas, which is more pronounced over his groin.  Wood's lamp examination shows coral pink fluorescence. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pityriasis versicolor"
      },
      {
        "id": 2,
        "text": "Erythrasma"
      },
      {
        "id": 3,
        "text": "Tinea cruris"
      },
      {
        "id": 4,
        "text": "Candidal intertrigo"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Coral pink fluorescence</strong>&nbsp;on Wood's lamp examination is&nbsp;characteristic of&nbsp;<strong>erythrasma.</strong></p>\n<p>Erythrasma is a skin infection caused by <strong><em>Corynebacterium minutissimum</em></strong>. It is common in <strong>diabetics</strong> and <strong>immunodeficient</strong> patients and is associated with <strong>obesity</strong>, <strong>sweating</strong> and <strong>poor hygiene</strong>.</p>\n<p>Coral pink fluorescence&nbsp;is due to the production of <strong>coproporphyrin III</strong> by the bacterium.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Choose the incorrect statement regarding the condition shown in the image below.",
    "choices": [
      {
        "id": 1,
        "text": "Serine proteases degrade keratin in the horny layer"
      },
      {
        "id": 2,
        "text": "Often associated with malodour and maceration"
      },
      {
        "id": 3,
        "text": "Mainly caused by corynebacterial infection"
      },
      {
        "id": 4,
        "text": "Usually associated with anhidrosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above image shows numerous small, shallow, <strong>circular</strong> <strong>erosions</strong> with<strong> punched-out</strong> appearance over <strong>pressure bearing area</strong> of soles, characteristic of <strong>pitted keratolysis</strong>.</p>\n<p>It is usually associated with<strong> hyperhidrosis</strong> (not anhidrosis). Pitted keratolysis is caused most commonly due to infection by <strong>Corynebacterium</strong> and also by <em><strong>Kytococcus sedentarius</strong></em>. The pits are produced by <strong>serine proteases</strong> that can degrade keratin in the horny layer.</p>\n<p>Most patients are unaware of the condition due to <strong>minimal irritation</strong>. This condition is diagnosed by its clinical appearance. Cultures are not useful due to <strong>mixed infections</strong>.</p>\n<p>Treatment of hyperhidrosis slowly brings the condition under control including <strong>potassium permanganate soaks</strong>, aluminum chloride, and iontophoresis. Topical <strong>fucidin</strong> ointment may be used.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/089ae868ae1d4b2f974fae426f97cf9a.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old male presented with an erythematous nodule on the cheek with central crusting. Diascopy of the skin lesion revealed \u201capple jelly nodules\u201d. The likely diagnosis is:",
    "choices": [
      {
        "id": 1,
        "text": "Lupus erythematosus"
      },
      {
        "id": 2,
        "text": "Lupus vulgaris"
      },
      {
        "id": 3,
        "text": "Acne rosacea"
      },
      {
        "id": 4,
        "text": "Cutaneous leishmaniasis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario of an erythematous nodule with <strong>central crusting</strong> and <strong>apple jelly nodules</strong> on diascopy is suggestive of <strong>c</strong><strong>utaneous leishmaniasis</strong>.</p>\n<p>Apple jelly nodules on diascopy are seen in cutaneous leishmaniasis and lupus vulgaris, but the skin lesions in cutaneous <strong>leishmaniasis</strong> show <strong>central crusting</strong>, whereas in <strong>lupus vulgaris</strong> (option B) they show <strong>central</strong> <strong>scarring</strong>.</p>\n<p><strong>Leishmaniasis\u00a0</strong>is a slowly progressing disease transmitted by the bite of an infected female <strong>Phlebotomus</strong> sandfly. It is of two kinds, namely, old-world and new-world leishmaniasis. Causative organisms<strong> </strong>for <strong>Old World</strong> leishmaniasis are\u00a0<em><strong>L. donovani</strong>, L. major, </em>and<em>\u00a0<strong>L. tropica</strong>,\u00a0</em>and for <strong>New World</strong> leishmaniasis are <em>L. mexicana\u00a0</em>complex and<em>\u00a0<strong>L. braziliensis\u00a0</strong></em><strong>complex</strong>. In India, it is endemic to Bihar, West Bengal, Jharkhand, and Uttar Pradesh.</p>\n<p>The classical lesion in cutaneous leishmaniasis is characterized by an <strong>erythematous nodule</strong>/<strong> plaque</strong>, which then ulcerates and becomes crusted.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/94ba0e11beb740c4900600b39b80efb5x1280x2012.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b56f1dfb33a04fdcb746c29137d0272bx720x357.JPEG"
    ]
  },
  {
    "text": "A patient presented with the following cutaneous finding to the dermatology OPD. Which of the following organisms is least likely to cause this?",
    "choices": [
      {
        "id": 1,
        "text": "Ancylostoma braziliense"
      },
      {
        "id": 2,
        "text": "Ancylostoma duodenale"
      },
      {
        "id": 3,
        "text": "Ancylostoma caninum"
      },
      {
        "id": 4,
        "text": "Strongyloides stercoralis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The serpiginous/serpent-like skin lesions seen are <strong>cutaneous larva migrans</strong> or<strong> larva currens</strong>.&nbsp;<em>Ancylostoma duodenale</em> and <em>Necator americanus</em> are hookworms that cause human infection and are <strong>least likely</strong> to cause cutaneous larva migrans.</p>\n<p>Cutaneous larva migrans is caused by <strong>non-human hookworms</strong> like&nbsp;<em>Ancylostoma braziliense,&nbsp;Ancylostoma caninum&nbsp;</em>acquired from <strong>direct skin contact</strong> with soil <strong>contaminated</strong> by dog or cat <strong>feces</strong>.&nbsp;</p>\n<p><strong>Serpentine</strong> or <strong>linear</strong> <strong>single</strong>-<strong>track</strong> lines later mark the course of the larvae as they migrate through the <strong>epidermis</strong> of the trunk and lower extremities.&nbsp;Symptoms begin to appear within the first two weeks of the patient&rsquo;s return from a tropical or endemic country. The larval track progresses at approximately 1 cm/h with cutaneous lesions only progressing a few millimeters to a few centimeters daily.</p>\n<p><strong>Larva currens </strong>aka&nbsp;'running larva&rsquo; of<em> <strong>Strongyloidiasis stercoralis. </strong></em>It&nbsp;is known for its <strong>distinct rapidity, </strong>with the <strong>larval track</strong> progressing at approximately 0.2 cm/min, with cutaneous lesions progressing up to 10 cm/hour.&nbsp;</p>\n<p><strong>Ivermectin</strong> is the preferred treatment and is given at 0.15&ndash;0.2 mg/kg every day per oral for&nbsp;1 or 2 days.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bea7036e115844149e1087a881d82c17.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A homeless man presents with complaints of intense nocturnal itching for the past few days. He has the following finding on examination. Which of the following is the most severe form of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Norwegian"
      },
      {
        "id": 2,
        "text": "Nodular"
      },
      {
        "id": 3,
        "text": "Animal"
      },
      {
        "id": 4,
        "text": "Incognito"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows a characteristic<strong>&nbsp;scabietic&nbsp;burrow&nbsp;</strong>and is diagnostic of scabies.&nbsp;<strong>Norwegian/crusted scabies </strong>is the most severe form of this condition.</p>\n<p>Crusted scabies (Norwegian or hyperkeratotic scabies) is seen in individuals who are immunocompromised due to any underlying disease or therapy, patients with HIV infection, and in people who use topical steroids and pimecrolimus.&nbsp;</p>\n<p>Crusted scabies occurs in people with an <strong>inadequate immune response</strong> to the <strong>mite,</strong> allowing them to multiply.&nbsp;It is called 'Norwegian' because it was first described in lepers of Norway.</p>\n<p><strong>Large warty crusts</strong> form on the hands and feet. Palms and <strong>soles</strong> may be irregularly <strong>fissured and thickened</strong>. Horny debris get accumulates beneath the thickened and discolored nails. Erythema and scaling occur in the scalp face and seborrheic area. The itching will be absent often.</p>\n<p>Scrappings teeming with mites and eggs confirms the diagnosis.&nbsp;</p>\n<p>All patients should be hospitalized and isolated due to the risk of transmission due to physical contact.&nbsp;Treatment includes oral ivermectin, topical scabicide, and keratolytic agents for the crusting.</p>\n<p>The images given below show hands with Norwegian scabies.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/670ffc022215471c8a0481e5bdd77737.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/410d50b8520c404c8f410686532136f8x1280x960.JPEG"
    ]
  },
  {
    "text": "As a part of an outreach program, you see a patient with the following findings. An image of her shirt is also shown. Identify the incorrect statement regarding her condition.",
    "choices": [
      {
        "id": 1,
        "text": "She is suffering from vagabond's disease."
      },
      {
        "id": 2,
        "text": "The causative organism is a tick."
      },
      {
        "id": 3,
        "text": "The causative organism is a vector for Rickettsia prowazekii."
      },
      {
        "id": 4,
        "text": "Advice thorough washing of the body and application of malathion for 8-24h."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows <strong>scraping lesions</strong> on the upper back and <strong>numerous lice</strong> in the seams of her clothing which are suggestive of <strong>pediculosis corporis</strong> ('pediculosis vestimenti' or '<strong>vagabond's</strong> <strong>disease'</strong>) caused by <strong>body</strong> <strong>lice</strong> (specifically pediculus corporis).</p>\n<p>It is a disease of poor, homeless, and wandering people (vagabonds), hence, the name Vagabond&rsquo;s disease. Itching is due to the reaction to salivary antigens of the louse bites.</p>\n<p>Body lice are vectors of important diseases like <strong>relapsing fever&nbsp;</strong><em>(Borrelia recurrentis)</em><strong>, trench fever&nbsp;</strong><em>(Bartonella quintana)</em>, and <strong>epidemic typhus&nbsp;</strong>(<em>Rickettsia prowazekii</em>)</p>\n<p>Bed linens and clothes should be systematically <strong>decontaminated.</strong> Although this is usually enough in most cases, thorough <strong>washing</strong> of the body with <strong>soap</strong> followed by application of pyrethrins/pyrethroids or <strong>malathion</strong> for 8&ndash;24 h can also be recommended.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6a81faddd8784f6c8b86f3ed787e3bc4.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "What is the first-line treatment that you would advise for a patient with donovanosis?",
    "choices": [
      {
        "id": 1,
        "text": "Azithromycin 1g OD for 3 days"
      },
      {
        "id": 2,
        "text": "Azithromycin 1 g on the first day and 500 mg for 6 weeks"
      },
      {
        "id": 3,
        "text": "Ceftriaxone 500 mg IM BD for 1 week"
      },
      {
        "id": 4,
        "text": "Ceftriaxone 1g IM OD for 6 weeks"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Azithromycin 1 g on the first day and 500 mg for 6 weeks is considered first-line treatment</p>\n<p><strong>Prolonged treatment</strong> with antibiotics is generally advised for <strong>donovanosis</strong>, usually for a<strong> minimum period of 6 weeks.</strong></p>\n<p><strong>Treatment ladder for Donovanosis</strong></p>\n<ul>\n<li><strong> First-line</strong>\n<ul>\n<li><strong>Azithromycin</strong> 1 g orally on the first day followed by 500 mg daily</li>\n</ul>\n</li>\n<li><strong>Second line</strong>\n<ul>\n<li><strong>Doxycycline</strong> 100 mg orally on the first day followed by 100 mg twice daily <strong>(or)</strong>&nbsp;</li>\n<li><strong>Co</strong>\u2010<strong>trimoxazole</strong> 960 mg twice daily</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old nulliparous woman was referred to a higher center for infertility evaluation. Cervical motion tenderness and right upper quadrant tenderness were elicited on examination. An image from her diagnostic laparoscopy is shown below. Which of the following is not a possible cause of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Syphilis"
      },
      {
        "id": 2,
        "text": "Gonorrhea"
      },
      {
        "id": 3,
        "text": "Chlamydial infection"
      },
      {
        "id": 4,
        "text": "Genital tuberculosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This clinical scenario of <strong>infertility</strong> and the finding of<strong> perihepatic adhesions </strong>on laparoscopy is characteristic of<strong> Fitz-Hugh-Curtis syndrome. </strong>It is not associated with syphilis.</p>\n<p>It refers to perihepatitis that occurs as a <strong>complication</strong> of <strong>PID,</strong> due to:&nbsp;</p>\n<ul>\n<li>Gonorrhea</li>\n<li>Chlamydia</li>\n<li>Mixed infections</li>\n<li>Genital tuberculosis.</li>\n</ul>\n<p>It results in <strong>fever</strong>, <strong>right</strong> <strong>upper</strong> <strong>quadrant</strong> <strong>pain,&nbsp;</strong>and <strong>tenderness</strong> mimicking acute cholecystitis. Fibrinous<strong>&nbsp;violin string adhesions</strong>&nbsp;can be seen on laparoscopy. It is also associated with extensive tubal scarring and adhesions.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3ffb8623d60c4456a12a92ba188bea79.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3aeecfcafc024b3eac8a9325eeee7184x1280x1206.8829337094498.JPEG"
    ]
  },
  {
    "text": "All of the following cutaneous disorders are associated with defect in Nucleotide Excision Repair(NER) pathway  except ____",
    "choices": [
      {
        "id": 1,
        "text": "Xeroderma pigmentosum"
      },
      {
        "id": 2,
        "text": "Cockayne syndrome"
      },
      {
        "id": 3,
        "text": "Trichothiodystrophy"
      },
      {
        "id": 4,
        "text": "Muir\u2013Torre syndrome"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li><strong>Muir&ndash;Torre syndrome</strong> is a rare <strong>autosomal dominant</strong> disorder of DNA repair.</li>\n<li>M&ndash;Torre syndrome occurs due to <strong>mutation</strong> in one of the <strong>DNA mismatch repair genes</strong> (MSH\u20102, MLH\u20101, and more recently MSH\u20106).</li>\n<li>The disorder is characterized by <strong>sebaceous gland neoplasms</strong>, <strong>keratocanthomas</strong> associated with <strong>gastrointestinal</strong> and <strong>genito</strong><strong>urinary</strong> <strong>malignancies</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Fine reticular hyperpigmentation with pits near the angle of mouth is seen in _____",
    "choices": [
      {
        "id": 1,
        "text": "Rothmund Thomson syndrome"
      },
      {
        "id": 2,
        "text": "Cockayne syndrome"
      },
      {
        "id": 3,
        "text": "Dowling-Degos disease"
      },
      {
        "id": 4,
        "text": "Reticulate acropigmentation of Kitamura"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>Dowling-Degos disease</strong> is a skin condition characterized by a <strong>lacy or net-like (reticulate) pattern</strong> of hyperpigmentation, particularly in the flexural areas.</li>\n<li>It is associated with scattered comedo like lesions (<strong>dark dot follicles) </strong>and <strong>pitted aceniform scars </strong>near the angle of the mouth.</li>\n<li><strong>Reticulate acropigmentation of Kitamura </strong>presents with <strong>Hyperpigmented</strong> atrophic macules on the hand dorsa and <strong>&ldquo;pits&rdquo; on the palms and soles</strong> with abnormal dermatoglyphics.</li>\n<li><strong>Rothmund Thomson syndrome</strong> and <strong>Cockayne syndrome</strong> are <strong>genodermatoses</strong> associated with defective DNA repairng, and photosensitivity.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The ocular condition shown below is associated with:",
    "choices": [
      {
        "id": 1,
        "text": "Xeroderma pigmentosa"
      },
      {
        "id": 2,
        "text": "Incontinentia pigmenti"
      },
      {
        "id": 3,
        "text": "Neurofibromatosis"
      },
      {
        "id": 4,
        "text": "Louis-Bar syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shows <strong>Lisch&rsquo;s nodules</strong>,&nbsp;the most common ocular manifestation of&nbsp;<strong>neurofibromatosis type 1.&nbsp; </strong></p>\n<p>These are&nbsp;<strong>melanocytic hamartomas</strong>, which are usually <strong>brown</strong> or<strong> yellow</strong> in color. They are found&nbsp;as round elevations on the surface of the<strong> iris,&nbsp;</strong>often visible to the naked eye. However, optimal evaluation is done by<strong>&nbsp;slit-lamp examination</strong>.&nbsp;</p>\n<p>They do not produce visual impairment.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4e36df327d5f43c8892815ae4e580666.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Deficiency of which of the following nutrients will not cause the finding shown in the image given below?",
    "choices": [
      {
        "id": 1,
        "text": "Essential fatty acids"
      },
      {
        "id": 2,
        "text": "Vitamin A"
      },
      {
        "id": 3,
        "text": "Vitamin C"
      },
      {
        "id": 4,
        "text": "Vitamin D"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows <strong>phrynoderma. </strong>It is <strong>not</strong> associated with<strong> vitamin D deficiency</strong>.</p>\n<p>Phrynoderma (<strong>toad skin</strong>) is common in children in the 5-15 year age group. Earlier thought to be purely due to vitamin A deficiency, phrynoderma has now been associated with other nutritional deficiencies, including those of&nbsp;<strong>B complex</strong>, <strong>ribofla&shy;vin, vitamin C, vitamin E, </strong>and<strong> essential fatty acids&nbsp;</strong>and<strong> malnutrition.</strong></p>\n<p>It is a non-specific finding that can be associated with various conditions:&nbsp;</p>\n<div class=\"page\" title=\"Page 2188\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>&bull; Liver cirrhosis<br /> &bull; Malabsorption syndromes<br /> &bull; Anorexia nervosa<br /> &bull; Alcohol abuse<br /> &bull; Nutritional deficiency following bariatric surgery</p>\n</div>\n</div>\n</div>\n</div>\n<p>It manifests as <strong>groups of papules</strong>, each one around 3-4 mm in diameter, with a <strong>central keratotic plug</strong>.&nbsp;The papules have a <strong>follicular distribution</strong> and give the skin a rough texture.&nbsp;The <strong>elbows</strong> and<strong> knees</strong> are the<strong> most commonly</strong> affected areas, but the buttocks and extensor surfaces of the limbs may also be affected.</p>\n<p>All patients with phrynoderma should have their vitamin A levels measured.&nbsp;</p>\n<p>Treatment involves the correction of poor diet and administration of&nbsp;<strong>multivitamin</strong> preparations.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c766318622f84b2c9588319ddfa74bda.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the skin condition shown in this photograph of a newborn.",
    "choices": [
      {
        "id": 1,
        "text": "Icthyosis vulgaris"
      },
      {
        "id": 2,
        "text": "Bathing suit icthyosis"
      },
      {
        "id": 3,
        "text": "Harlequin ichthyosis"
      },
      {
        "id": 4,
        "text": "Lamellar ichthyosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The neonate is most likely suffering from<strong> Harlequin ichthyosis</strong>, as evidenced by the presence of <strong>armor-like skin</strong>.</p>\n<p>It<strong>\u00a0</strong>is the most devastating type of <strong>a</strong><strong>utosomal recessive congenital icthyosis</strong>. It is due to mutations of the <strong>ABCA12 gene</strong>. The gene plays a role in lamellar body formation in the stratum granulosum and desquamation of the stratum corneum.\u00a0</p>\n<p>It presents in the neonatal period with <strong>armor\u2010like skin</strong> (truncal plates with fissuring). It can impair body movement and breathing. <strong>Bilateral ectropion</strong> and <strong>eclabium</strong> are present. <strong>Respiratory problems</strong> are the major cause of death due to alveolar collapse in neonates. They are also prone to skin and lung infections.</p>\n<p><strong>Defective lamellar bodies</strong> in the <strong>stratum granulosum</strong> seen in <strong>electron microscopy</strong> are pathognomic of Harlequin ichthyosis. In early life, constant <strong>supportive care</strong> is required. Treatment includes <strong>moisturizing cream</strong>, <strong>antibiotics</strong>, <strong>etretinate</strong>, or <strong>retinoids</strong>.</p>\n<p>Other options -\u00a0</p>\n<p>Option A) <strong>Ichthyosis vulgaris</strong> - The <strong>most common</strong> type of ichthyosis, involving mutations in <strong>filaggrin protein</strong>. Filaggrin is an<strong> epidermal protein</strong> that\u00a0helps <strong>retain moisture</strong> in the <strong>stratum corneum</strong>. Ichthyosis is <strong>not present at birth</strong> but develops during the first months of life.\u00a0The<strong> scaling</strong> usually involves the <strong>extensor surfaces</strong> of the extremities with <strong>flexural sparing</strong>.\u00a0They are <strong>strongly correlated</strong> with<strong> atopic dermatitis</strong> and other forms of atopy such as allergic rhinitis, asthma, etc.</p>\n<p>Option B) <strong>Bathing suit ichthyosis </strong>is a type of congenital ichthyosis caused by mutations in the TGM1 gene. It presents as a <strong>collodion baby</strong> at birth where the neonate is encased in a <strong>shiny parchment\u2010like membrane. </strong>Shedding of the collodion membrane is followed by the development of <strong>large dark grey/brownish scales</strong> affecting the<strong> trunk </strong>and the <strong>scalp</strong>, but sparing the face and extremities resembling a <strong>bathing suit</strong>. The disease tends to become worse in the summer months and improves in winter.</p>\n<p>Option D) <strong>Lamellar ichthyosis</strong> is also a congenital ichthyosis, involving mutations in the <strong>TGM1 gene</strong>. It is characterized by large plate\u2010like <strong>dark\u2010brown hyperkeratoses</strong> covering the <strong>entire body</strong> with <strong>mild palmoplantar </strong>involvement. The extreme spectrum of lamellar ichthyosis is <strong>congenital ichthyosiform erythroderma (CIE)</strong> which is similar to erythroderma seen in psoriasis.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6b756e8781a7469584bd704e7695a65e.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 33-year-old patient presented with myalgia, dif\ufb01culty in climbing stairs, getting up from squatting position, and combing his hair for 3 months. An edematous purplish-red periorbital rash was seen. Investigations revealed elevated creatinine kinase levels. Muscle biopsy revealed perifascicular and perivascular lymphocytic infiltrates with muscle fiber degeneration. Which of the following is not true regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Dysphagia points to a worse prognosis"
      },
      {
        "id": 2,
        "text": "Muscle tenderness is common"
      },
      {
        "id": 3,
        "text": "20 to 40% of patients have an underlying malignancy"
      },
      {
        "id": 4,
        "text": "Dilated capillary loops in nail fold can be seen"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above clinical scenario is suggestive of <strong>dermatomyositis. </strong>Muscle tenderness is not common in this disorder.</p>\n<p>It<strong>&nbsp;</strong>is an autoimmune disorder affecting, predominantly, the <strong>skin</strong> and <strong>skeletal muscle </strong>and&nbsp;usually presents<strong> initially</strong> with a <strong>facial rash </strong>especially around eyelids which can be pruritic and sore.&nbsp;<strong>Myositis</strong> symptoms are usually <strong>weakness</strong> and <strong>fatigue</strong> especially while climbing stairs, raising arms, and standing from sitting due to proximal muscle weakness.</p>\n<p>The presence of&nbsp;<strong>dysphagia</strong>&nbsp;points to a <strong>poorer</strong> <strong>prognosis</strong>.</p>\n<p>The <strong>clinical signs</strong> seen in dermatomyositis are as follows:</p>\n<ul>\n<li>Heliotrope rash around eyelids with a lilac hue.</li>\n<li><strong>Gottron papules -&nbsp;</strong>flat-topped lichenoid eruption on the proximal and distal interphalangeal joint</li>\n<li><strong>Shawl sign or V sign</strong>&nbsp;- fixed erythematous macular erythema)</li>\n<li><strong>Nail fold changes</strong> with<strong> periungal erythema </strong>with visible dilated capillary loops in the proximal nail fold</li>\n<li><strong>Proximal myopathy</strong></li>\n<li>Poikiloderma atrophicans vasculare</li>\n<li>Calcinosis cutis</li>\n</ul>\n<p>Approximately 20 to 40% of patients have an underlying malignancy (eg, lung, ovarian, breast) and hence screening should be done at the time of diagnosis.</p>\n<p>The image below shows ragged cuticle and periungueal erythema in a patient with dermatomyositis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/42d5abac25a84f59a8480e1f6d87ef7ax1280x1182.5105782792666.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a feature of the condition shown below?",
    "choices": [
      {
        "id": 1,
        "text": "Muscle weakness"
      },
      {
        "id": 2,
        "text": "Gastroesophageal reflux disease"
      },
      {
        "id": 3,
        "text": "Loss of sweat glands in distal extremities"
      },
      {
        "id": 4,
        "text": "Female preponderance of 9:1"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows a young woman with <strong>mask-like facies</strong> with stretched, shiny skin, and loss of normal facial lines, <strong>microstomia,</strong> and <strong>pitted scarring</strong> on the right index <strong>finger</strong> which is suggestive of <strong>scleroderma</strong> or<strong> systemic sclerosis</strong>, an autoimmune rheumatic disease in which there is a <strong>4: 1 female predominance</strong>.</p>\n<p>Cutaneous features:</p>\n<ul>\n<li>Hands and feet - Raynaud's phenomenon, non-pitting edema, painful ulcerations which heal with<strong> pitted scars,</strong> sclerodactyly, contractures,<strong> loss of sweat glands</strong>, bone resorption.</li>\n<li>Face - periorbital edema, <strong>mask-like facies</strong>, telangiectasia, and <strong>diffuse hyperpigmentation</strong></li>\n<li>Trunk - firm, shiny, and thickened skin</li>\n</ul>\n<p>The&nbsp;<strong>extent of skin sclerosis</strong>&nbsp;in&nbsp;<strong>s</strong><strong>ystemic&nbsp;sclerosis</strong>&nbsp;can be measured, most commonly employing a&nbsp;<strong>modified Rodnan skin score</strong>&nbsp;(MRSS).</p>\n<p>Systemic features:</p>\n<ul>\n<li>GIT- dysphagia,<strong> GERD</strong>, diminished peristalsis, malabsorption</li>\n<li>Lungs- <strong>pulmonary fibrosis</strong> and alveolitis</li>\n<li>Heart- cardiac conduction defects, heart failure</li>\n<li>Kidney- uremia, malignant hypertension</li>\n<li>Musculoskeletal- weakness, <strong>carpal tunnel syndrome</strong></li>\n</ul>\n<p>The image below shows typical facial features: note the expressionless facies, mat\u2010like telangiectases, microstomia, perioral furrowing, and beak\u2010like nose.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8f83d459c8b44070b59f6a729b0d1b92.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/25a7fc636f6242d7b9556e59c971b1c6x720x1059.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/72bb07d925094354a4083b45c79558c0x576x384.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e58eaaa5f65d4cd19631189bab0fdea9x576x371.PNG"
    ]
  },
  {
    "text": "What is the site of origin for the tumor shown below?",
    "choices": [
      {
        "id": 1,
        "text": "Sebaceous ducts"
      },
      {
        "id": 2,
        "text": "Sweat ducts"
      },
      {
        "id": 3,
        "text": "Sweat glands"
      },
      {
        "id": 4,
        "text": "Hair follicles"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image shows multiple <strong>skin/tan-colored</strong>, flat-topped<strong> papules</strong> on the thighs suggestive of&nbsp;<strong>syringoma</strong>&nbsp;(also known as syringocystadenoma/syringocytoma) which is a benign tumor of <strong>sweat</strong>&nbsp;<strong>ducts.</strong>&nbsp;</p>\n<p>It consists of small dermal papules which may be <strong>translucent</strong> or even cystic sometimes. It mostly appears during <strong>adolescence</strong></p>\n<p>The main reason for treatment is <strong>cosmetic</strong>. Careful destruction with <strong>diathermy</strong> is a treatment option.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a9d6e1fc034a428c9e463dce3c85b016.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ccce64d817754beea3c70e269eab9ff3x1280x1182.5105782792666.JPEG"
    ]
  },
  {
    "text": "Which of the following is not true regarding Bowen\u2019s disease?",
    "choices": [
      {
        "id": 1,
        "text": "Intraepidermal squamous cell carcinoma"
      },
      {
        "id": 2,
        "text": "Red scaly plaque is present"
      },
      {
        "id": 3,
        "text": "High potential for invasive malignancy"
      },
      {
        "id": 4,
        "text": "Occasionally it may undergo spontaneous partial resolution"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Bowen's disease </strong>has&nbsp;a <strong>low potential </strong>for invasive<strong> malignancy.&nbsp;</strong></p>\n<p>It is an <strong>intraepidermal</strong> squamous cell carcinoma<strong>&nbsp;</strong>that<strong>&nbsp;</strong>is characterized by a&nbsp;persistent, non\u2010elevated, <strong>red</strong>, <strong>scaly</strong>, or crusted plaque with a <strong>small potential</strong> for invasive malignancy. Histologically, it is characterized by <strong>full-thickness epidermal dysplasia</strong>.</p>\n<p>It usually grows progressively but sometimes undergoes&nbsp;<strong>spontaneous</strong> <strong>partial</strong> <strong>resolution</strong>. It can occur anywhere, but it occurs more in the <strong>head and neck</strong> region.</p>\n<p><strong>Human papilloma virus&nbsp;</strong>infection is associated with it.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6b3ceae757274e5bbb82ee20a70840f8x1280x1216.8124118476728.JPEG"
    ]
  },
  {
    "text": "An elderly Australian man presented with a slowly progressing lesion on his scalp for 3 years. Which of the following is considered as a high-risk susceptibility gene for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "CDKN1A"
      },
      {
        "id": 2,
        "text": "CDKN2A"
      },
      {
        "id": 3,
        "text": "CDKN3A"
      },
      {
        "id": 4,
        "text": "CDKN4A"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image shows a&nbsp;<strong>flat</strong>, <strong>brownish</strong>, irregularly shaped lesion suggestive of&nbsp;<strong>melanoma</strong>. The cyclin\u2010dependent kinase (CDK) inhibitor 2A gene (<strong>CDKN2A</strong>), located on chromosome <strong>9p21</strong>, is the <strong>best established high\u2010risk locus</strong> for melanoma susceptibility.</p>\n<p>CDKN2A mutations are found in approximately <strong>40%</strong> of individuals with familial melanoma.</p>\n<p>In melanoma, tumor suppressors that play a protective role against melanoma are mutated. CDKN2A encodes via <strong>alternative splicing</strong> for two proteins involved in cell cycle regulation: <strong>p16/Ink4a and&nbsp;p14/Arf</strong>, both act as <strong>tumor suppressors</strong> through the Rb and p53 cancer pathways, respectively.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/25560502f01d43039d477a52a915afcd.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements about alopecia areata is true?",
    "choices": [
      {
        "id": 1,
        "text": "Spontaneous remission is seen in 20% of patients"
      },
      {
        "id": 2,
        "text": "Alopecia universalis denotes loss of all scalp hair"
      },
      {
        "id": 3,
        "text": "Ophiasis means loss of hair along the back of scalp"
      },
      {
        "id": 4,
        "text": "Alopecia totalis denotes loss of all body hair"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Hair loss over the back of the head is called <strong>ophiasis</strong> because it creeps like a <strong>snake</strong> towards both ears.</p>\n<p>Alopecia areata causes <strong>non-scarring</strong> hair loss in well-circumscribed patches. It peaks between 20-40 years but can occur at any age.</p>\n<p>In case of <strong>limited</strong> patchy hair loss present for &lt; 1 year, <strong>spontaneous remission</strong> is seen in <strong>80%</strong> of patients. Sometimes the patches can <strong>coalesce</strong> to cause complete loss of hair.</p>\n<p>Alopecia <strong>totalis</strong> means loss of all <strong>scalp</strong> hair and alopecia <strong>universalis</strong> means loss of all <strong>body</strong> hair.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is best suited for the treatment of a 14-year-old female patient with recalcitrant pustular acne?",
    "choices": [
      {
        "id": 1,
        "text": "Oral erythromycin"
      },
      {
        "id": 2,
        "text": "Topical steroids"
      },
      {
        "id": 3,
        "text": "Oral retinoids"
      },
      {
        "id": 4,
        "text": "Oral tetracyclines"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Recalcitrant</strong>&nbsp;<strong>acne</strong> refers to&nbsp;acne that does not respond <strong>to&nbsp;</strong>therapy with combined <strong>oral and topical antibiotics</strong>.&nbsp;<strong>Oral retinoids</strong>&nbsp;are indicated for the treatment of <strong>recalcitrant acne</strong>&nbsp;in children over 12 years of age.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Dermatology St 1';
        const quizFilename = 'dermatology-st-1-7d778cd3.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>