<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 004 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2022
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 46-year-old male presented with dysphagia and regurgitation. Barium swallow showed the following picture. Weakness of which of the following muscles predisposes to the given condition\u200b?",
    "choices": [
      {
        "id": 1,
        "text": "Superior constrictor"
      },
      {
        "id": 2,
        "text": "Inferior constrictor"
      },
      {
        "id": 3,
        "text": "Middle constrictor"
      },
      {
        "id": 4,
        "text": "Palatopharyngeus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario with a pulsion diverticulum on the barium swallow is suggestive of <strong>Zenker's diverticulum.\u00a0</strong>It originates through\u00a0<strong>Killian's dehiscence,</strong> which\u00a0is a site of weakness present in the <strong>inferior constrictor</strong> muscle.</p>\n<p>The inferior constrictor muscle is made up of 2 parts:</p>\n<ol>\n<li>Upper part -\u00a0<strong>th</strong><strong>yropharyngeus,</strong> made of <strong>oblique</strong> fibres.</li>\n<li>Lower part - <strong>c</strong><strong>ricopharyngeus,\u00a0</strong>made of <strong>transverse</strong> fibres.</li>\n</ol>\n<p>Between the two muscles, there is a potential gap which is\u00a0called the <strong>pharyngeal dimple</strong> or<strong> Killian's dehiscence.</strong></p>\n<p>Another site of weakness in the pharyngeal wall is the <strong>Laimer's triangle</strong>, which is present between the cricopharyngeus and the circular muscle of the oesophagus.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ed59f7d7e1a2468b91d973481cf4082e.GIF"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8cb0c66285664842989c193b0c2baeb0x1280x1340.JPEG"
    ]
  },
  {
    "text": "Which of the following will increase the GFR?",
    "choices": [
      {
        "id": 1,
        "text": "Efferent arteriole dilation"
      },
      {
        "id": 2,
        "text": "Afferent arteriole constriction"
      },
      {
        "id": 3,
        "text": "Decrease in bowman\u2019s capsule hydrostatic pressure"
      },
      {
        "id": 4,
        "text": "Increase in glomerular plasma flow"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A <strong>decrease in Bowman\u2019s capsule hydrostatic pressure</strong> causes an <strong>increase in glomerular filtration rate (GFR).</strong></p>\n<p>A <strong>decrease in Bowman's Capsule Hydrostatic Pressure increases GFR </strong>because it reduces the opposing force to filtration, thus enhancing the net filtration pressure and increasing the amount of filtrate formed.</p>\n<p>Factors that can<strong> increase the GFR </strong>are as follows:</p>\n<ul>\n<li><strong>Increase in glomerular capillary filtration coefficient Kf:</strong> This coefficient depends on the hydraulic conductivity and surface area of the glomerular capillaries.\u00a0</li>\n<li><strong>Decrease in Bowman's capsule hydrostatic pressure: </strong>Conditions with urinary tract obstruction can lead to an increase in this pressure and a fall in GFR.</li>\n<li><strong>Decrease in glomerular colloid osmotic pressure:</strong> Accumulation of plasma proteins that are not filtered from the blood contributes to this pressure, and an increase reduces further filtration and GFR. It is directly proportional to the following factors: Arterial plasma colloid osmotic pressure.</li>\n<li><strong>Filtration fraction : </strong>An <strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">increase in filtration fraction </strong><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">concentrates the plasma proteins </strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">and <strong>raises the glomerular colloid osmotic pressure</strong> which in turn <strong>decreases the GFR.</strong></span></li>\n</ul>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"><strong>Other options :\u00a0</strong></span></p>\n<p>Option A: <strong>Efferent Arteriole Dilation</strong> reduces the resistance to blood leaving the glomerulus. This leads to a <strong>decrease in glomerular capillary hydrostatic pressure. </strong>A reduction in hydrostatic pressure lowers the driving force for filtration, resulting in a decreased GFR.</p>\n<p>Option B: <strong>Afferent Arteriole Constriction</strong> decreases blood flow into the glomerulus. This <strong>lowers the glomerular capillary hydrostatic pressure.</strong> Lower pressure reduces the filtration rate across the glomerular capillary wall, leading to a decrease in GFR.</p>\n<p>Option C: <strong>Increase in Glomerular Plasma Flow: </strong>If glomerular plasma flow increases but the efferent arteriole doesn't constrict, the extra blood flow is quickly carried away. This prevents a significant rise in the pressure inside the glomerular capillaries. As a result, the glomerular filtration rate (GFR) doesn't significantly increase, because the necessary increase in filtration pressure doesn't occur.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 34-year-old male was on maize as a staple diet for a prolonged period. He presented with diarrhoea and lesion over his neck as shown in the image below. The condition occurs due to deficiency of:",
    "choices": [
      {
        "id": 1,
        "text": "Niacin"
      },
      {
        "id": 2,
        "text": "Zinc"
      },
      {
        "id": 3,
        "text": "Thiamine"
      },
      {
        "id": 4,
        "text": "Iron"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above history and clinical features suggest<strong>&nbsp;niacin/vitamin B3</strong> deficiency.</p>\n<p>Excessive consumption of maize-based diets can cause <strong>pellagra</strong>. Corn/Maize has low levels of niacin and tryptophan.&nbsp;Jowar has high leucine content which inhibits QPRTase, an enzyme in the synthesis of Niacin.</p>\n<p>Niacin deficiency leads to a disease called pellagra which is characterized by</p>\n<ul>\n<li>Diarrhea</li>\n<li>Dermatitis</li>\n<li>Dementia</li>\n</ul>\n<p>The lesion in the neck is characteristic&nbsp;<strong>Casal&rsquo;s necklace pattern</strong>, seen in pellagra. The Casal's collar or Casal's necklace is a clinical sign in which there is an erythematous pigmented skin rash in the distribution of a broad collar (dermatomes C3 and C4).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0bb5f4b18dcf4cc185b5351fc0d1e1ba.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8c0a9800de0f40f5b25c42b0b81bcecfx720x521.JPEG"
    ]
  },
  {
    "text": "Non-sense mutation is seen in _____________.",
    "choices": [
      {
        "id": 1,
        "text": "Beta-thalassemia"
      },
      {
        "id": 2,
        "text": "Alpha-thalassemia"
      },
      {
        "id": 3,
        "text": "Sickle-cell anemia"
      },
      {
        "id": 4,
        "text": "Hereditary spherocytosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Non-sense mutation</strong> is seen in <strong>&beta;<sup>0</sup>&nbsp;thalassemia.</strong></p>\n<p>A <strong>point mutation</strong> is a change in which a single base is substituted with a different base. The point mutations within the coding sequences of the DNA (i.e., the region of the DNA that&nbsp; codes for proteins) are of two types:</p>\n<ol>\n<li><strong>Missense mutations</strong></li>\n<li><strong>Non-sense mutations</strong></li>\n</ol>\n<p><strong>1. Missense mutations: </strong>These mutations may involve <strong>alteration of a single base in a triplet of bases</strong> and lead to the <strong>replacement of one amino acid by another in the gene product.</strong>&nbsp;Because these mutations alter the meaning of the sequence of the encoded protein, they are often referred to as missense mutations.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Based on the substituted amino acid coded, the missense mutations are again of two types:</p>\n<p>a)&nbsp;<strong>Conservative missense mutation: </strong>The substituted amino acid is biochemically similar to the original. It typically causes little change in the function of the protein.</p>\n<p>b)&nbsp;<strong>Non-conservative missense mutation: </strong>This type of mutation replaces the normal amino acid with a biochemically different one. An example of this type of mutation is <strong>sickle-cell anemia, </strong>which is characterized by point mutation affecting the <strong>&beta;-globin chain of the hemoglobin, </strong>where the nucleotide triplet <strong>CTC</strong> (or GAG in mRNA), which encodes glutamic acid, is changed to <strong>CAC</strong> (or GUG in mRNA), which <strong>encodes valine</strong>.</p>\n<p><strong>2. Nonsense mutations: </strong>It is a point mutation in a sequence of DNA that results in a premature stop codon. For example, a point mutation affecting the codon for glutamine (CAG) creates a <strong>stop codon (UAG)</strong> if U is substituted for C. This change leads to premature termination of &beta;-globin gene translation, and the short peptide that is produced is rapidly degraded. The resulting deficiency of &beta;-globin chains can give rise to a severe form of anemia called&nbsp;<strong>&beta;<sup>0</sup> t</strong><strong>halassemia.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a42b131ed0b94da48af9e2f5309f4eebx1280x917.JPEG"
    ]
  },
  {
    "text": "Which of the following helminthic infections that is commonly transmitted by soil, is characterized by\u200b the egg in stool as shown in the image below?",
    "choices": [
      {
        "id": 1,
        "text": "Trichuris trichiura"
      },
      {
        "id": 2,
        "text": "Ancyclostoma duodenale"
      },
      {
        "id": 3,
        "text": "Necator americanus"
      },
      {
        "id": 4,
        "text": "Ascaris lumbricoides"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows the egg of\u00a0<em><strong>Trichuris</strong> <strong>trichiura</strong></em>\u00a0(whipworm).</p>\n<p><em>Trichuris trichiura</em>\u00a0are <strong>barrel-shaped</strong>, thick-shelled, and have a pair of <strong>polar plugs</strong> at each end. They are commonly transmitted by <strong>soil</strong>. The eggs passed in the stool are unembryonated. Microscopic identification of the eggs in a stool specimen is diagnostic of <strong>whipworm infection</strong>.</p>\n<p>It\u00a0causes <strong>rectal prolapse in children</strong> (characteristic feature) because the rectum loses its internal support as the worms bury their thin heads into the intestinal lining, loosening the elastic epithelium, and weakening the surrounding muscles; also, there is rectal edema because of the infection. All these factors finally lead to rectal prolapse.<strong>Trichuriasis</strong> is caused by the T. trichura (whipworm), which inhabits the cecum and ascending colon.</p>\n<p><strong>Clinical features include c</strong>hronic dysentery, anemia, poor growth and developmental defects.</p>\n<p><strong>Diagnosis</strong>:</p>\n<p>Fecal smears showing barrel-shaped ovum of T. trichura. The eggs of Trichuris trichura does not have a terminal spine. They are <strong>barrel-shaped and have mucus plugs at both ends.\u00a0</strong></p>\n<p><strong>Treatment: A</strong><strong>lbendazole</strong> is the drug of choice (400 mg, orally, for 3 days; for all ages)</p>\n<p>The image of egg of trichuris trichura is given below:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/554c3c5e38114a929a0803396c8af059.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/02c4120fb3574f97bcc799a7be6a7d04x720x720.JPEG"
    ]
  },
  {
    "text": "Which of the following drugs can be used in the first trimester of pregnancy?",
    "choices": [
      {
        "id": 1,
        "text": "ACE inhibitors"
      },
      {
        "id": 2,
        "text": "Angiotensin receptor blockers"
      },
      {
        "id": 3,
        "text": "Propylthiouracil"
      },
      {
        "id": 4,
        "text": "Statins"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Propylthiouracil</strong>&nbsp;can be used in the <strong>first trimester</strong> of pregnancy. It is indicated in the management of<strong> hyperthyroidism.</strong></p>\n<p>Other options</p>\n<p><strong>ACE</strong> inhibitors and Angiotensin receptor blockers are fetopathic and can cause <strong>fetal growth retardation</strong> and hypoplasia of organs.&nbsp;</p>\n<div class=\"page\" title=\"Page 544\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Statins</strong> can cause Vertebral, anal, cardiac, tracheoesophageal fistula, renal, arterial, limb (<strong>VACTERAL</strong>) defects</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements about the hanging mark is false?",
    "choices": [
      {
        "id": 1,
        "text": "The most common position of the knot is under the chin"
      },
      {
        "id": 2,
        "text": "The gap in the hanging mark indicates the point of suspension"
      },
      {
        "id": 3,
        "text": "The hanging mark is situated above the thyroid cartilage"
      },
      {
        "id": 4,
        "text": "The mark dries to a parchment like consistency post-mortem"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>knot </strong>in a suicidal hanging is much <strong>less likely</strong> to be found under the chin than in other positions - behind the ear or at the occiput.</p>\n<p>Hanging mark</p>\n<ul>\n<li>The hanging mark almost never completely encircles the neck unless a slipknot is used.</li>\n<li>In most instances the point of suspension is indicated by a<strong> gap in the skin mark</strong>.</li>\n<li>This gap is usually seen at <strong>one or other side of the neck or at the centre of the back of the neck</strong>. Much less often it is under the chin.</li>\n<li>The hanging mark is <strong>situated higher on the neck than in strangulation</strong>, usually being directly under the chin anteriorly, passing round beneath the jawbones and rising at the sides or back of the neck to the usual gap under the knot.</li>\n<li>The mark may be abraded, brown and dried to a <strong>parchment-like consistency</strong> after death.</li>\n<li>There may be a narrow red zone either above or below (or both sides) the ligature mark. This is not an indicator of vital reaction but is due to the displacement of blood laterally from under the zone of maximum pressure.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following conditions is not an indication for functional endoscopic sinus surgery?",
    "choices": [
      {
        "id": 1,
        "text": "Chronic sinusitis"
      },
      {
        "id": 2,
        "text": "Epistaxis"
      },
      {
        "id": 3,
        "text": "Nasal polyp"
      },
      {
        "id": 4,
        "text": "Cavernous sinus thrombosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Cavernous sinus thrombosis</strong> is <strong>not</strong> an indication for functional endoscopic sinus surgery(<strong>FESS</strong>).</p>\n<p><strong class=\"ng-binding\">Indications of FESS:</strong></p>\n<ul>\n<li>Chronic bacterial sinusitis unresponsive to adequate medical treatment</li>\n<li>Recurrent acute bacterial sinusitis</li>\n<li>Fungal sinusitis with fungal ball</li>\n<li>Nasal polyps</li>\n<li>Mucocele&nbsp;</li>\n<li>Control of epistaxis&nbsp;</li>\n<li>Removal of foreign body from the nose or sinus</li>\n<li>Barotrauma sinusitis (pain in the face during descent in aircraft or descent whilst scuba diving)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with photophobia and blurring of vision. On examination, the eye appears as shown below.  What is the mainstay of treatment?",
    "choices": [
      {
        "id": 1,
        "text": "Antibiotics and cycloplegics"
      },
      {
        "id": 2,
        "text": "Steroids and cycloplegics"
      },
      {
        "id": 3,
        "text": "Antibiotics and steroids"
      },
      {
        "id": 4,
        "text": "Immunosuppressants"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical scenario of photophobia and blurring of vision along with red-eye and irregularly shaped pupil (image) suggest a diagnosis of <strong>uveitis.</strong>&nbsp;<strong>Steroids and cycloplegics</strong> are the mainstay of the treatment of uveitis.</p>\n<p>Steroids<strong>&nbsp;</strong>are the <strong>drug of choice</strong> in <strong>anterior</strong> uveitis. They reduce inflammation by their anti-inflammatory effect<strong>.&nbsp;</strong></p>\n<p>Cycloplegics<strong>&nbsp;</strong>like&nbsp;1% <strong>atropine, r</strong><strong>elieve spasm</strong> of the iris sphincter and ciliary muscles. They prevent the formation of synechiae and reduce exudation.</p>\n<p><strong>Systemic therapy</strong><strong>&nbsp;</strong>includes steroids, NSAIDs, and immunosuppressants.&nbsp;</p>\n<p>Immunosuppressants&nbsp;like voclosporin (calcineurin inhibitor),&nbsp;are used in severe cases. They are being studied under a program called LUMINATE.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7f2a34ffcc2c49f2970af4750979d8d0.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A study was conducted on a group of 500 patients having carcinoma lung and another group of 300 was chosen from the general population. Both these groups were questioned on their exposure to smoking. What kind of study is this?",
    "choices": [
      {
        "id": 1,
        "text": "Cohort study"
      },
      {
        "id": 2,
        "text": "Cross-sectional study"
      },
      {
        "id": 3,
        "text": "Ecological study"
      },
      {
        "id": 4,
        "text": "Case-control study"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This is a case&ndash;control study. In this scenario, <strong>500 patients</strong>&nbsp;constitute the <strong>cases</strong> and <strong>300 people</strong>&nbsp;constitute the <strong>controls,&nbsp;</strong>and the study is done from <strong>effect to cause as the disease has already occurred.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which stage of the demographic cycle does the demographic gap start increasing?",
    "choices": [
      {
        "id": 1,
        "text": "High stationary"
      },
      {
        "id": 2,
        "text": "Early expanding"
      },
      {
        "id": 3,
        "text": "Late expanding"
      },
      {
        "id": 4,
        "text": "Low stationary"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>demographic gap</strong> starts <strong>increasing</strong> and attains maximum level during the <strong>early expanding phase.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "From the following epidemic curve, identify the type of epidemic depicted.",
    "choices": [
      {
        "id": 1,
        "text": "Point-source epidemic"
      },
      {
        "id": 2,
        "text": "Continuous epidemic"
      },
      {
        "id": 3,
        "text": "Slow epidemic"
      },
      {
        "id": 4,
        "text": "Propagated epidemic"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Point-source epidemic</strong> is depicted in the given image.</p>\n<p>In the epidemic curve for a point-source epidemic, there is a <strong>sharp rise and fall</strong> of the curve with <strong>no secondary waves.&nbsp;</strong>It tends to be <strong>explosive</strong> as all the cases are <strong>clustered</strong> in a narrow period of time and they occur within one <strong>incubation period </strong>of the disease.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ef30827ead1444dea3ba1b34421f9553.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the following deformity seen in a patient complaining of pain and swelling of her hands.",
    "choices": [
      {
        "id": 1,
        "text": "Swan neck deformity"
      },
      {
        "id": 2,
        "text": "Boutonni\u00e8re deformity"
      },
      {
        "id": 3,
        "text": "Bouchard's nodes"
      },
      {
        "id": 4,
        "text": "Hitchhiker's deformity"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image is showing&nbsp;<strong>flexion of the PIP</strong> joint with <strong>hyperextension of the DIP</strong> joint is suggestive of&nbsp;<strong>Boutonni&egrave;re deformity </strong>seen in patients with <strong>rheumatoid arthritis.</strong></p>\n<p>Heberden&rsquo;s&nbsp;and&nbsp;Bouchard&rsquo;s<strong>&nbsp;</strong>nodes are nodules in osteoarthritis that are palpable in the distal interphalangeal joint and proximal interphalangeal joints respectively.&nbsp;</p>\n<p><strong>Hitchhiker thumb deformity</strong> is a musculoskeletal manifestation of rheumatoid arthritis. It is seen on the thumb. The deformity has flexion at the metacarpophalangeal (MCP) joint hyperextension at the interphalangeal (IP) joint</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/079206c14a08488aa5359d40de365ef9.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old man is brought to the emergency department following a road traffic accident. During the evaluation, the patient opens his eyes in response to voice and says inappropriate words. He is unable to move his right arm but extends his left arm to a painful stimulus on his right arm. What is the GCS score of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "7"
      },
      {
        "id": 2,
        "text": "8"
      },
      {
        "id": 3,
        "text": "9"
      },
      {
        "id": 4,
        "text": "10"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The GCS score of the patient described is <strong>8</strong> (E3 V3 M2).</p>\n<p>In the case elaborated above, the score allotted is :</p>\n<ul>\n<li>Eye-opening to speech&mdash;3</li>\n<li>Inappropriate words&mdash;3</li>\n<li>Extensor response to painful stimuli&mdash;2</li>\n</ul>\n<p>Patients scoring a <strong>GCS</strong> of<strong>&nbsp;3 or 4</strong>&nbsp;have an&nbsp;85% chance<strong>&nbsp;</strong>of<strong>&nbsp;dying</strong>&nbsp;or&nbsp;<strong>remaining vegetative.</strong></p>\n<p>However,&nbsp;<strong>scores &gt;11&nbsp;</strong>indicate only a 5&ndash;10% likelihood of death or vegetative state and an&nbsp;85%<strong>&nbsp;</strong>chance of<strong>&nbsp;moderate disability</strong>&nbsp;or&nbsp;<strong>good recovery</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old woman presented with persistent headaches over the last 1 month. Her father and paternal uncle suffered from kidney disease and both died in their 50's of a 'brain bleed'. Her blood pressure is 160/110 mm Hg and had also been elevated during a previous visit. Which of the following investigations should be avoided in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Ultrasonography of the abdomen"
      },
      {
        "id": 2,
        "text": "Contrast enhanced CT of the abdomen"
      },
      {
        "id": 3,
        "text": "Non-contrast CT scan of the abdomen"
      },
      {
        "id": 4,
        "text": "MR angiography of the cerebral vasculature"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This clinical scenario is suggestive of autosomal dominant polycystic kidney disease <strong>(ADPKD).</strong>&nbsp;These patients usually have impaired renal function. Hence, contrast-enhanced CT (<strong>CECT</strong>) would usually be <strong>avoided</strong> due to the risk of&nbsp;<strong>contrast&nbsp;nephrotoxicity.</strong></p>\n<p>The following investigations are done in patients with ADPKD:</p>\n<ul>\n<li><strong>USG abdomen - </strong>for&nbsp;screening and diagnosis</li>\n<li><strong>Non-contrast CT</strong>&nbsp;abdomen - more sensitive and picks up cysts of smaller size</li>\n<li><strong>MR-angiography</strong>&nbsp;of brain -&nbsp;pre-symptomatic <strong>screening&nbsp;</strong>for&nbsp;intracerebral<strong> aneurysms</strong>&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You observed the following finding in a patient in the OPD. Which among the following conditions is least likely to cause this finding?",
    "choices": [
      {
        "id": 1,
        "text": "Endocarditis"
      },
      {
        "id": 2,
        "text": "Bronchiectasis"
      },
      {
        "id": 3,
        "text": "Tricuspid atresia"
      },
      {
        "id": 4,
        "text": "Aortic dissection"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image shows&nbsp;<strong>digital clubbing.</strong> Among the given options, aortic dissection is least likely to cause digital clubbing.</p>\n<p><strong>Clubbing</strong> is a&nbsp;selective <strong>bulbous enlargement</strong> of the distal segments of the <strong>fingers</strong> and <strong>toes</strong> due to the proliferation of connective tissue, particularly on the dorsal surface.</p>\n<p>Causes of clubbing are:</p>\n<ul>\n<li aria-level=\"1\"><strong>Pulmonary</strong></li>\n<ul>\n<li aria-level=\"2\">Bronchogenic carcinoma</li>\n<li aria-level=\"2\">Lung abscess, empyema, bronchiectasis</li>\n<li aria-level=\"2\">Chronic interstitial pneumonitis</li>\n<li aria-level=\"2\">Cystic fibrosis</li>\n<li aria-level=\"2\">Sarcoidosis</li>\n<li aria-level=\"2\">Diffuse pulmonary disease - pulmonary fibrosis, asbestosis</li>\n</ul>\n<li aria-level=\"1\"><strong>GI</strong></li>\n<ul>\n<li aria-level=\"2\">Inflammatory bowel disease (Ulcerative colitis, Crohn's disease)</li>\n<li aria-level=\"2\">Sprue, celiac disease</li>\n<li aria-level=\"2\">Neoplasms - esophagus, liver, bowel</li>\n<li aria-level=\"2\">Cirrhosis - juvenile and biliary</li>\n<li aria-level=\"2\">Chronic active hepatitis</li>\n</ul>\n<li aria-level=\"1\"><strong>Cardiovascular</strong></li>\n<ul>\n<li aria-level=\"2\">Cyanotic congenital heart disease</li>\n<li aria-level=\"2\">Subacute bacterial endocarditis</li>\n<li aria-level=\"2\">Aortic aneurysm</li>\n<li aria-level=\"2\">Arteriovenous fistula</li>\n<li aria-level=\"2\">Patent Ductus arteriosus</li>\n<li aria-level=\"2\">Atrial myxoma</li>\n</ul>\n<li aria-level=\"1\"><strong>Endocrine</strong></li>\n<ul>\n<li aria-level=\"2\">Hyperthyroidism (Grave&rsquo;s disease)</li>\n<li aria-level=\"2\">Thyroid acropachy</li>\n</ul>\n<li aria-level=\"1\"><strong>CNS</strong></li>\n<ul>\n<li aria-level=\"2\">Hemiplegia (unilateral clubbing)</li>\n</ul>\n<li aria-level=\"2\"><strong>Skin disease</strong>\n<ul>\n<li aria-level=\"2\">Palmoplantar keratoderma</li>\n<li aria-level=\"2\">Fischer-Volavsek syndrome.</li>\n</ul>\n</li>\n<li aria-level=\"2\"><strong>Malignancies</strong>\n<ul>\n<li aria-level=\"2\">Thyroid cancer</li>\n<li aria-level=\"2\">Thymus cancer</li>\n<li aria-level=\"2\">Hodgkin disease</li>\n<li aria-level=\"2\">Disseminated chronic myeloid leukemia.</li>\n</ul>\n</li>\n</ul>\n<p>Note: Chronic obstructive pulmonary disease (COPD) does not cause clubbing. If clubbing is present in a patient with COPD, underlying lung cancer and bronchiectasis must be ruled out.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ad6e847f40d9439796c82fcd5b40ae3f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 14-year-old boy presents with acute onset of pain in his scrotum. He previously had similar pain that would subside spontaneously but the pain this time is unbearable.  Physical examination shows a swollen erythematous scrotum. Cremasteric reflex is absent. What is the next best step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Manual detorsion"
      },
      {
        "id": 2,
        "text": "Doppler ultrasound"
      },
      {
        "id": 3,
        "text": "Surgical exploration"
      },
      {
        "id": 4,
        "text": "Observation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><span data-preserver-spaces=\"true\">The given clinical vignette is suggestive of&nbsp;</span><strong><span data-preserver-spaces=\"true\">testicular torsion</span></strong><span data-preserver-spaces=\"true\">. In cases of <strong>high clinical suspicion</strong>, the next best step is to&nbsp;</span><strong><span data-preserver-spaces=\"true\">explore surgically</span></strong><span data-preserver-spaces=\"true\">.</span></p>\n<p><span data-preserver-spaces=\"true\">Clinical features of testicular torsion are <strong>painful</strong> <strong>scrotal swelling</strong>, erythema, nausea, and vomiting. Testis seems high in the scrotum and the twisted cord can sometimes be palpated.</span></p>\n<p><span data-preserver-spaces=\"true\">Signs seen on torsion of the testis are:</span></p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Deming&rsquo;s sign</strong>: Spasm of the cremaster muscle due to twisting of the spermatic cord causes the affected testis to be positioned higher than the normal testis.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Angell&rsquo;s sign</strong>: The testis on the normal side lies horizontally because of the mesorchium between the testis and epididymis.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Cremastic reflex</strong>: Absent on the side of the affected testis</li>\n</ul>\n<p><strong><span data-preserver-spaces=\"true\">Doppler ultrasound</span></strong><span data-preserver-spaces=\"true\">&nbsp;scanning can confirm the absence of the blood supply to the affected testis, but the false positives are high and hence it is not routinely recommended.&nbsp;The typical window of opportunity for surgical intervention and testicular <strong>salvage</strong> is <strong>6 hours</strong> from <strong>onset</strong> <strong>of</strong> <strong>pain.</strong></span></p>\n<p><span data-preserver-spaces=\"true\">Testicular torsion is a <strong>clinical diagnosis</strong> and an <strong>emergency</strong>, therefore no time is wasted in performing the other investigations.&nbsp;</span></p>\n<div class=\"page\" title=\"Page 1583\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>&nbsp;</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common tumor arising from an undescended testis?",
    "choices": [
      {
        "id": 1,
        "text": "Yolk sac tumor"
      },
      {
        "id": 2,
        "text": "Embryonal carcinoma"
      },
      {
        "id": 3,
        "text": "Seminoma"
      },
      {
        "id": 4,
        "text": "Teratoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most common malignancy that occurs in an undescended testis is a <strong>seminoma </strong>(risk is 5&ndash;10 times).</p>\n<p><strong>An early orchidopexy is the management&nbsp;of&nbsp;choice </strong>because it helps in the early detection of these tumors in the testis as the testis is in the scrotum after the orchidopexy</p>\n<p>The other complications that may develop as a result of the undescended testis can be remembered by the mnemonic <strong>TESTIS</strong>:</p>\n<p>T- Torsion</p>\n<p>E- Epididymorchitis</p>\n<p>S- Sterility</p>\n<p>T- Trauma (Increased risk)</p>\n<p>I- Increased risk of inguinal hernia (Most commonly occurring complication)</p>\n<p>S- Seminoma (Increased risk)</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An infant delivered at full-term by normal vaginal delivery, presented with respiratory distress immediately after birth. Chest X-ray showed the following picture. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hyaline membrane disease"
      },
      {
        "id": 2,
        "text": "Meconium aspiration syndrome"
      },
      {
        "id": 3,
        "text": "Congenital diaphragmatic hernia"
      },
      {
        "id": 4,
        "text": "Transient tachypnea of the newborn"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above X-ray chest shows <strong>intra-thoracic bowel shadows</strong> along with <strong>mediastinal shift</strong> suggestive of <strong>congenital diaphragmatic hernia</strong>.</p>\n<p>The common clinical presentation is as follows:</p>\n<ul>\n<li>Respiratory distress</li>\n<li>Dextrocardia</li>\n<li>Scaphoid abdomen</li>\n</ul>\n<p>Prenatal diagnosis is done by <strong>ultrasonography</strong>.&nbsp;<strong>Lung-to-head ratio</strong> (LHR) is used to assess severity in patients with left-sided CDH. An LHR value of <strong>&lt;1</strong>&nbsp;is associated with a very <strong>poor</strong> prognosis, whereas an LHR <strong>&gt;1.4</strong> predicts a more <strong>favourable</strong> outcome.</p>\n<p>Option A: <strong>Hyaline membrane disease</strong> is a syndrome in premature infants caused by developmental <strong>insufficiency</strong> of pulmonary <strong>surfactant</strong> production and structural immaturity in the lungs.</p>\n<p>Option B: <strong>Meconium aspiration syndrome</strong>&nbsp;is the aspiration of meconium-stained amniotic fluid, which can occur before, during or immediately after birth. Meconium is the first intestinal discharge from newborns, a viscous, dark-green substance composed of intestinal epithelial cells, lanugo, mucus, and intestinal secretions.</p>\n<p>Option D: During normal delivery, the compression of the rib cage while passing through the mother's vaginal canal helps to remove fluid from the lungs. However, newborns who are delivered via <strong>cesarean</strong> birth may have excess fluid in the lungs and therefore be <strong>hypoxic</strong> and develop <strong>transient tachypnea.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/893b34cb69f042bb810b403f5d7d9fd7.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "In which of the following conditions is normal peristalsis not seen?",
    "choices": [
      {
        "id": 1,
        "text": "Achalasia cardia"
      },
      {
        "id": 2,
        "text": "Esophageal carcinoma"
      },
      {
        "id": 3,
        "text": "Nutcracker esophagus"
      },
      {
        "id": 4,
        "text": "Hypertensive lower esophageal sphincter"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Achalasia cardia <strong>does not show&nbsp;</strong>normal peristalsis.</p>\n<p>Manometric features of achalasia cardia are as follows:</p>\n<ul>\n<li>Incomplete lower esophageal sphincter relaxation</li>\n<li><strong>Aperistalsis </strong>of the esophageal body</li>\n<li><strong>Elevated LES pressure</strong></li>\n</ul>\n<p><strong>Diffuse esophageal spasm</strong> is characterized by simultaneous <strong>multi-peaked contractions of the esophagus.</strong> The contractions are spontaneous and may be of abnormally high amplitude (&gt;120 mmHg) or long duration. <strong>Intermittent normal peristalsis is seen.</strong></p>\n<p><strong>Nutcracker esophagus</strong> is characterized by<strong> high amplitude (&ge;180 mmHg) contractions</strong> with an increased mean duration. The peristaltic sequence is normal.</p>\n<p><strong>Hypertensive lower esophageal sphincter</strong> is characterized by <strong>elevated LES pressure (&ge;26 mmHg).</strong> Normal peristalsis is seen in the body of the esophagus.</p>\n<p><strong>Esophageal carcinoma</strong> will not have any issues with the motility or peristalsis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old woman at 9 weeks of gestation comes to the clinic for check-up following an MTP. On ultrasound, retained tissue was found and the following instrument was used for its removal. What is this instrument?",
    "choices": [
      {
        "id": 1,
        "text": "Karmann syringe"
      },
      {
        "id": 2,
        "text": "Suction apparatus"
      },
      {
        "id": 3,
        "text": "Manual vacuum aspiration syringe"
      },
      {
        "id": 4,
        "text": "Menstrual regulation syringe"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p class=\"p1\">The image shows a <strong>manual vacuum aspiration </strong>(MVA)<strong> syringe.</strong></p>\n<p class=\"p1\">Manual vacuum aspiration<strong>&nbsp;</strong>can be safely done upto 12 weeks of gestation. However, WHO recommends it as the&nbsp;<strong>procedure of choice </strong>for MTP only upto <strong>10 weeks</strong>&nbsp;of gestation .&nbsp;</p>\n<p class=\"p1\">The <strong>indications </strong>of this procedure<strong>&nbsp;</strong>are given as follows:</p>\n<ul>\n<li class=\"p1\">Medical termination of pregnancy</li>\n<li class=\"p1\"><strong>Incomplete abortion</strong> or missed abortion</li>\n<li class=\"p1\">Molar pregnancy</li>\n<li class=\"p1\">Endometrial aspiration</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/31687d2f476841eeba39ef33ad54ca4d.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cf9fee03a89840be808f4b2eee9a2f54x1280x1875.PNG"
    ]
  },
  {
    "text": "You are performing intrauterine insemination during the ovulatory period in a patient with infertility. When will you expect implantation to occur?",
    "choices": [
      {
        "id": 1,
        "text": "6\u20137 days after fertilization"
      },
      {
        "id": 2,
        "text": "3\u20135 days after fertilization"
      },
      {
        "id": 3,
        "text": "14\u201319 days after fertilization"
      },
      {
        "id": 4,
        "text": "1\u20132 days after fertilization"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The fertilized ovum <strong>implants&nbsp;</strong>by <strong>6&ndash;7 days&nbsp;</strong>in the uterine cavity.</p>\n<p>Implantation involves:&nbsp;</p>\n<div class=\"page\" title=\"Page 108\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>&nbsp;<strong>Apposition</strong>: Blastocyst starts to establish contact with the uterine wall.</li>\n<li>&nbsp;<strong>Adhesion</strong>: Increase in the physical interaction between the blastocyst and the uterine epithelium.</li>\n<li>&nbsp;<strong>Invasion</strong>: Syncytiotrophoblasts and cytotrophoblasts penetrate and invade the endometrium.</li>\n</ul>\n<p>Prior to implantation, the endometrium is primed with estrogen and progesterone from the corpus luteum. This uterine receptivity is maximal from the&nbsp;<strong>20th - 24th</strong>&nbsp;days of the endometrial cycle. Failure of embryo transfer during this time period may result in repeated implantation&nbsp;<strong>failure</strong>&nbsp;in&nbsp;<strong>IVF patients.&nbsp;</strong></p>\n<p>Adherence of the blastocyst to the uterine cavity is a result of interaction between the cell-surface receptors at the implantation site and the blastocyst receptors.&nbsp;</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7fc7d899beca41b6add7984acbc104dfx1280x1278.JPEG"
    ]
  },
  {
    "text": "What is the investigation of choice in a 55-year-old woman who presents with post-menopausal bleed?",
    "choices": [
      {
        "id": 1,
        "text": "Pap smear"
      },
      {
        "id": 2,
        "text": "Endometrial biopsy"
      },
      {
        "id": 3,
        "text": "Fractional curettage"
      },
      {
        "id": 4,
        "text": "CA-125 estimation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Endometrial biopsy&nbsp;</strong>is the investigation of choice in a case of <strong>post-menopausal bleed</strong>, as the chances of <strong>endometrial cancer</strong> are quite high.</p>\n<p>For those who undergo TVUS and have an <strong>EEC</strong> (endometrial echo complex) <strong>&gt;4 mm</strong>, localized thickening, or an <strong>indistinct</strong> or nonvisible EEC, <strong>endometrial sampling</strong> is a reasonable next step.</p>\n<p>Investigations for endometrial carcinoma include:</p>\n<ul>\n<li><strong>Endometrial aspiration biopsy </strong>is the&nbsp;first investigation in abnormal uterine bleeding, especially in females &gt;35 years.</li>\n<li>Dilatation and fractional curettage&nbsp;was the best method to diagnose but now it is not used.</li>\n<li><strong>Hysteroscopy and biopsy </strong>is the investigation of choice for endometrial cancer.</li>\n<li><strong>Transvaginal USG </strong>is used as an&nbsp;<strong>adjunct</strong> to endometrial biopsy.</li>\n<li>Pap smear is&nbsp;not reliable to diagnose endometrial carcinoma.&nbsp;It is more useful as a screening tool rather than a diagnostic tool.</li>\n</ul>\n<p>If symptoms of postmenopausal bleeding persist, imaging of the endometrial cavity should be performed with one or a combination of the following: TVUS, contrast sonography, or hysteroscopy.</p>\n<p>Note:&nbsp;<strong>Surgical staging</strong> is the gold standard investigation for staging endometrial carcinoma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman recently became pregnant following a history of repeated abortions. She was anxious and wanted to undergo karyotyping this time to detect chromosomal disorders pre-natally. Barr body was found to be absent in her report. Which of the following is associated with an absent Barr body?",
    "choices": [
      {
        "id": 1,
        "text": "46 XX"
      },
      {
        "id": 2,
        "text": "45 X0"
      },
      {
        "id": 3,
        "text": "47 XXX"
      },
      {
        "id": 4,
        "text": "47 XXY"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Barr body is absent in female having <strong>45 X0 genome</strong>.</p>\n<p><strong>Barr body</strong></p>\n<ul>\n<li>Densely staining inactivated condensed X chromosome present in each somatic cell of a female is found in the nucleus.</li>\n<li>Chromatid body (Barr body or sex chromatin) is derived from one of the two X chromosomes which become inactivated.</li>\n<li>The number of Barr bodies is thus one less than the number of X chromosomes.</li>\n</ul>\n<p><strong>Turner's syndrome </strong>is female without Barr body.</p>\n<p><strong>Klinefelter's syndrome </strong>is male with Barr body.</p>\n<p><strong>Note: </strong></p>\n<ul>\n<li><span style=\"color: #000000;\"><strong>Lyon hypothesis</strong> states that only one of the two X chromosomes in a female is functional, the other becomes inactive during embryogenesis.</span></li>\n<li><span style=\"color: #000000;\"><strong>Davidson bodies</strong> are small nuclear buds of chromatin shaped like a drumstick found in neutrophils of females.</span></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Disruption of the axon with an intact endoneurium is seen in which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Axonotmesis"
      },
      {
        "id": 2,
        "text": "Neurotmesis"
      },
      {
        "id": 3,
        "text": "Neuropraxia"
      },
      {
        "id": 4,
        "text": "Neurolysis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Disruption of the axon with an intact endoneurium is seen in<strong>&nbsp;axonotmesis.</strong>&nbsp;There is an&nbsp;<strong>axonal disruption&nbsp;</strong>(inner axon is damaged) and loss of conductivity, with an intact outer sheath.&nbsp;</p>\n<p><strong>Axonotmesis</strong> (axonal interruption): There is a&nbsp;<strong>loss of conduction</strong>, but the <strong>continuity of the nerve is maintained</strong> and the neural tubes are intact.&nbsp;There is <strong>disruption of the axon</strong> i.e., the continuity of the axon is broken. But the <strong>endoneurium</strong> and perineurium are <strong>intact</strong>, maintaining the continuity of the nerve. It occurs following trauma such as <strong>closed</strong>&nbsp;<strong>fractures and dislocations</strong>.</p>\n<p>Distal to the lesion,&nbsp;<strong>Wallerian degeneration</strong> of the disrupted axon occurs, where axons disintegrate and are resorbed by phagocytes. It is then followed by axonal regeneration where numerous fine unmyelinated fibres grow from the proximal stumps to the endoneurial tubes.</p>\n<p>Other options:</p>\n<p>Option A- <strong>Neurapraxia </strong>is the&nbsp;reversible <strong>physiological nerve conduction block</strong> causing some loss of sensation and muscle power. There is spontaneous recovery after a few days or weeks. It occurs following <strong>prolonged compression</strong>, as in Saturday night palsy, and crutch palsy. Here, there is&nbsp;<strong>segmental demyelination</strong> but the <strong>axon is intact</strong>. Nerve conduction is&nbsp;slowed because of the loss of myelin. It is followed by the regeneration of the myelin.</p>\n<p><strong>Option B- Neurotmesis </strong>is the complete transection of the nerve trunk. It is usually associated with open wounds. The endoneurial tubes are destroyed and the scar tissue prevents the regenerating axons from entering the distal segment. The regenerating fibers mingle with proliferating Schwann cells and fibroblasts to form a neuroma at the site of injury.</p>\n<p><strong>Option D- Axonapraxia</strong>&nbsp;is a disruption to the axoplasmic flow of neurochemicals temporarily.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the MRI image.",
    "choices": [
      {
        "id": 1,
        "text": "T1 weighted image"
      },
      {
        "id": 2,
        "text": "T2 weighted image"
      },
      {
        "id": 3,
        "text": "FLAIR"
      },
      {
        "id": 4,
        "text": "STIR"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given MRI is a <strong>T2 weighted image</strong> as the <strong>CSF</strong> appears&nbsp;<strong>bright</strong>/hyperintense and <strong>white matter</strong> appears&nbsp;<strong>dark</strong>.&nbsp;</p>\n<p>In T1 images CSF is dark/hypointense, white matter is white and grey matter is dark.</p>\n<p>Many pulse sequence techniques are used in MRI, of which the most classic are T1 and T2 weighted images.</p>\n<p><strong>FLAIR</strong>&nbsp;(fluid-attenuated inversion recovery) is an inversion recovery technique that nulls fluid from T2. As a result, <strong>CSF is dark.&nbsp;</strong>However,&nbsp;white matter is dark and grey matter is bright similar to T2 imaging.</p>\n<p><strong>STIR</strong>&nbsp;(short tau inversion recovery) is an inversion recovery technique that nulls fat from T2. So,<strong> fat is dark.</strong>&nbsp;It is done to detect bone marrow edema in body part scans.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ff07e7dc67994ced9e00b9d53527c124.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/02a0b4ddc300404a883f372a042e3c06x668x692.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9170f642b45a41fc88ae14ed1739b025x682x682.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e3b41f67550140e5ab37b7936cbf54a4x676x676.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b47d42d43c5d4548b5021b465550c8fax806x942.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/69f31eed0ddb491bb7f438bf5b72f783x802x938.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6f3a7bdb71424ebab8f4fc58cbbfbb61x798x1034.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8db6978a3fd94e2aa9e1f887976fb044x802x922.PNG"
    ]
  },
  {
    "text": "A 21-year-old female presents to the clinic requesting liposuction. She feels she is obese and would like to get rid of the \"excess fat\". On further enquiry, she reveals a habit of eating high-calorie food multiple times a month which she later regrets and skipping meals at times. Her BMI is 23. An examination of her hands is shown below. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Anorexia nervosa"
      },
      {
        "id": 2,
        "text": "Bulimia nervosa"
      },
      {
        "id": 3,
        "text": "Binge-eating disorder"
      },
      {
        "id": 4,
        "text": "Purging disorder"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows calluses and pigmentation on knuckles, known as <strong>Russell's sign</strong>. The given clinical history of binge eating, body-image issues,&nbsp;Russell's sign<strong>&nbsp;</strong>along<strong>&nbsp;</strong>with a&nbsp;<strong>normal BMI</strong>&nbsp;is suggestive of <strong>bulimia nervosa.</strong></p>\n<p><strong>Bulimia nervosa</strong> is an eating disorder, often seen in young women. It is characterized by <strong>binge-eating episodes</strong>, followed by inappropriate, compensatory measures to stop&nbsp;weight gain, like&nbsp;<strong>self-induced vomiting</strong>, laxative abuse, diuretics, enema, and emetic abuse. The calluses on hands form due to the repeated scraping of knuckles on the teeth, during self-induced vomiting. These binge-eating episodes occur at least once a week and are present for at least 3 months. The patient fears gaining weight and has a relentless drive to be thin.&nbsp;</p>\n<p><strong>Treatment </strong>of bulimia nervosa:</p>\n<ul>\n<li>Without comorbid mood disorders - fluoxetine, topiramate, CBT</li>\n<li>With comorbid mood disorders - carbamazepine</li>\n</ul>\n<div class=\"page\" title=\"Page 529\">\n<div class=\"layoutArea\">&nbsp;</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/62038ac15abe4bbcad64eae9609c134f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which is the shortest acting muscle relaxant?",
    "choices": [
      {
        "id": 1,
        "text": "Vecuronium"
      },
      {
        "id": 2,
        "text": "Pancuronium"
      },
      {
        "id": 3,
        "text": "Suxamethonium"
      },
      {
        "id": 4,
        "text": "Pipecuronium"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Suxamethonium</strong> (succinylcholine) is the shortest-acting muscle relaxant.</p>\n<p>It has a <strong>rapid-onset</strong> (30&ndash;60secs) and <strong>short duration</strong> of action (typically less than 10 min) due to <strong>rapid hydrolysis</strong> by butyrylcholinesterase (<strong>plasma cholinesterase</strong> or pseudocholinesterase).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the most common organism implicated in the condition depicted below?",
    "choices": [
      {
        "id": 1,
        "text": "Human papillomavirus-10"
      },
      {
        "id": 2,
        "text": "Human papillomavirus-6"
      },
      {
        "id": 3,
        "text": "Human papillomavirus-3"
      },
      {
        "id": 4,
        "text": "Human papillomavirus-11"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image shows<strong> rough finger-like growth </strong>over the <strong>vulva</strong> which is suggestive of<strong>&nbsp;condyloma acuminata. </strong>It is caused by&nbsp;human papillomavirus<strong> (HPV-6 &gt; HPV-11).</strong></p>\n<p>It is also called&nbsp;genital/venereal warts and has<strong> high infectivity. </strong>It is acquired most commonly after sexual contact but may also occur non-sexually.</p>\n<p><strong>Imiquimod </strong>and <strong>p</strong><strong>odophyllotoxin </strong>are both the first-line drugs used in the treatment of genital warts.<strong><br /></strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/98e78c50b5e14e0295a60215df53f4fb.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following compounds are used in PET scan?",
    "choices": [
      {
        "id": 1,
        "text": "Fluorodeoxyglucose"
      },
      {
        "id": 2,
        "text": "Technetium pertechnate"
      },
      {
        "id": 3,
        "text": "Thallous chloride"
      },
      {
        "id": 4,
        "text": "Gallium citrate"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>PET</strong> involves the use of a radiolabelled bio-compound such as 2-fluoro-2-deoxy-D-glucose (<strong>FDG</strong>) which is injected intravenously. This compound is taken up and broken down in the cells.</p>\n<p>It is based on the principle that tumour cells have a <strong>high metabolic rate</strong>, and hence this compound is also metabolised by tumour cells. FDG is metabolised to FDG-6-phosphate which cannot be further metabolized by tumour cells. Hence it <strong>accumulates in tumour cells</strong>&nbsp;and<strong>&nbsp;</strong>can be&nbsp;measured and quantified.</p>\n<p>The applications of PET include:</p>\n<ul>\n<li><strong>Oncologic</strong>:\n<ul>\n<li>Detection, staging, drug response</li>\n<li>Differentiation between radiation necrosis and recurrence</li>\n</ul>\n</li>\n<li><strong>Neurologic</strong>:\n<ul>\n<li>Early diagnosis of Alzheimer's disease</li>\n<li>Localisation of seizure focus in the interictal phase</li>\n<li>Localising eloquent areas (e.g. speech, motor function)</li>\n</ul>\n</li>\n<li><strong>Cardiac</strong>: Identification of hibernating myocardium</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Fmge Mini Test - 004';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2022"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>