<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>239 Surgery Ini-Cet 2024 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Surgery
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">33</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following are  extra-esophageal complications associated with GERD?",
    "choices": [
      {
        "id": 1,
        "text": "1,2"
      },
      {
        "id": 2,
        "text": "2,3,4"
      },
      {
        "id": 3,
        "text": "1,2,3,4"
      },
      {
        "id": 4,
        "text": "3,4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Asthma, laryngitis, pulmonary fibrosis, and cough are all extra esophageal complications in gastroesophageal reflux disease(GERD)<br />\u00a0<br />\u00a0Extraoesophageal symptoms of GERD are:</p>\n<ul>\n<li><strong>Chronic cough</strong></li>\n<li><strong>Laryngitis,</strong></li>\n<li><strong>Asthma</strong></li>\n<li><strong>Dental erosions (especially on the lingual and palatal tooth</strong><br /><strong>surfaces).</strong></li>\n<li><strong>Pulmonary fibrosis</strong></li>\n<li>Sinusitis</li>\n<li>Pharyngitis</li>\n<li>Recurrent otitis media</li>\n</ul>\n<p>Extraesophageal symptoms of GERD originate from the respiratory tract and include both <strong>laryngeal </strong>and <strong>pulmonary</strong> issues These symptoms can arise through two mechanisms. The first and most common mechanism involves proximal esophageal reflux and <strong>microaspiration of gastroduodenal contents</strong>, which cause<strong> direct injury</strong> to the larynx and lower respiratory tract. The second mechanism involves distal esophageal acid exposure triggering a <strong>vagal nerve reflex</strong>, leading to bronchospasm and cough, due to the <strong>shared vagal innervation of the trachea and esophagus</strong>.</p>\n<p>The incidence of<strong> Barrett's esophagus</strong> is also more in patients with long term GERD, which in turn increases the risk of <strong>adenocarcinoma of esophagus.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25 year old male presented with difficulty in swallowing food and weight loss for past few months. He also complains of regurgitation of undigested food and halitosis. Barium swallow was performed. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Achalasia cardia"
      },
      {
        "id": 2,
        "text": "Esophageal carcinoma"
      },
      {
        "id": 3,
        "text": "Barrett's esophagus"
      },
      {
        "id": 4,
        "text": "Esophageal stricture"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given complaints of difficulty in swallowing, weight loss, regurgitation of undigested food and halitosis along with the barium swallow showing <strong>bird beak appearance</strong> is suggestive of <strong>achalasia cardia</strong>.</p>\n<p>Achalasia is a <strong>primary esophageal motility disorder </strong>caused due to the degeneration of neurons in the <strong>myenteric plexus</strong> of the esophagus. It is characterized by the <strong>absence of esophageal peristalsis</strong> and <strong>impaired relaxation of the lower esophageal sphincte</strong>r (LES), thereby causing a functional obstruction at the gastroesophageal junction. \u00a0</p>\n<p>The patients present with a triad of <strong>dysphagia, regurgitation, and weight loss.</strong> The dysphagia <strong>initially</strong> begins with<strong> liquid</strong>\u00a0and then progresses to solid foods, halitosis is present due to the accumulation of food. Patients may develop pneumonia, lung abscess, etc. at a later stage.</p>\n<p>The initial diagnosis is made by <strong>barium swallow</strong> or endoscopy, which shows the presence of dilated esophagus due to the constriction of the lower esophageal sphincter (bird beak appearance). The <strong>gold standard</strong> test to confirm achalasia cardia is <strong>esophageal manometry</strong>. The findings are impaired lower esophageal sphincter (LES) relaxation and absent peristalsis with elevated LES pressure.\u00a0</p>\n<p>Management includes:</p>\n<ul>\n<li><strong>Surgical esophagomyotomy</strong>.</li>\n<li>Non-surgical measures like sublingual nitroglycerin, nitrates, or calcium channel blockers.</li>\n<li>Injection of botulinum toxin</li>\n<li>Peroral endoscopic myotomy (POEM)\u00a0</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/62e8d922eeaf41ed9676792e272f45e1.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The instruments shown below are used for which of the following procedures?",
    "choices": [
      {
        "id": 1,
        "text": "Orogastric tube insertion"
      },
      {
        "id": 2,
        "text": "Chest tube drainage"
      },
      {
        "id": 3,
        "text": "Percutaneous endoscopic gastrostomy"
      },
      {
        "id": 4,
        "text": "Flatus tube insertion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The instruments shown in the image is used to perform <strong>percutaneous endoscopic gastrostomy.</strong></p>\n<p>A <strong>standard endoscopy</strong> is performed to ensure that there are no contraindications to <strong>gastrostomy insertion.</strong> The stomach is insufflated with air and direct percutaneous needle puncture made at a point where the stomach abuts the abdominal wall. Lignocaine is infused on withdrawal. A trocar is inserted and a wire is passed into the stomach, which can be caught with a snare. The scope is withdrawn, pulling the wire out through the mouth,at which point it is attached to the gastrostomy tube. The gastrostomy is pulled through into the stomach and out through the track created by the trocar insertion.</p>\n<p>The insertion of a percutaneous endoscopic gastrostomy (PEG) tube <strong>improves nutritional and functional outcomes</strong> in patients who cannot maintain oral nutritional intake. PEG insertion is often a preliminary step in the treatment of complex <strong>orofacial malignancies</strong> and can also be used to support nutrition in patients with various malignant, degenerative, or inflammatory diseases.</p>\n<p>Procedure risks include <strong>bleeding, perforation,aspiration risk,</strong> dislodgment with peritoneal contamination, wound site infection and granulation.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8b77aacf96334c31bf1f5d3397eaa705.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Patients diagnosed with breast cancer are usually advised to undergo ER screening test. What is its significance?",
    "choices": [
      {
        "id": 1,
        "text": "Diagnostic marker"
      },
      {
        "id": 2,
        "text": "Prognostic marker"
      },
      {
        "id": 3,
        "text": "Monitoring biomarker"
      },
      {
        "id": 4,
        "text": "Surrogate molecular marker"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Estrogen receptor (ER) is used as a<strong> prognostic marker.\u00a0</strong></p>\n<p>The term prognostic marker generally is used to describe molecular markers that predict disease-free survival, disease- specific survival, and overall survival, whereas the term <strong>predictive marker</strong> often is used in the context of predicting response to certain therapies.</p>\n<p>Other options</p>\n<p>Option A: A <strong>diagnostic biomarker</strong> detects or confirms the presence of a disease or condition of interest, or identifies an individual with a subtype of the disease.</p>\n<p>Option C:When a biomarker can be measured serially to assess the status of a disease or medical condition for evidence of exposure to a medical product or environmental agent, or to detect an effect of a medical product or biological agent, it is a <strong>monitoring biomarker</strong></p>\n<p>Option D: The most common and serious error in evaluating biomarkers is assuming that a correlation between a biomarker's level and a clinical outcome means the biomarker is a valid surrogate. However, for a biomarker to be a valid surrogate, it must not only be correlated with the outcome but also explain the change in the clinical outcome.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old female presents with recurrent episodes of right flank pain, hematuria, and a history of urinary tract infections. Urine analysis shows alkaline urine with a pH of 8.0. Which of the following is the most likely underlying cause of this patient's condition?",
    "choices": [
      {
        "id": 1,
        "text": "Triple phosphate stones"
      },
      {
        "id": 2,
        "text": "Calcium oxalate"
      },
      {
        "id": 3,
        "text": "Uric acid stones"
      },
      {
        "id": 4,
        "text": "Ammonium urate stones"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario and microscopic image showing <strong>coffin lid shaped crystals</strong> are suggestive of <strong>triple phosphate</strong> stones. They are also known as <strong>staghorn</strong> or <strong>struvite</strong> stones.</p>\n<p>This is caused due to infection with urea-splitting organisms, such as <strong>Proteus</strong>, Klebsiella, Serratia, or Enterobacter species.They are usually formed in <strong>alkaline urine</strong>.</p>\n<p>Staghorn calculi are<strong> radio-opaque</strong> stones that grow in a branching pattern along the pelvicalyceal system. The above organisms metabolize the urea into ammonium and bicarbonate. Increased metabolism of urea results in alkalinity of the urine, and precipitation of <strong>magnesium, ammonium, and phosphate</strong> - resulting in the formation of struvite stones.</p>\n<p>Complete removal of a staghorn calculus is essential, as any remaining fragments after treatment can lead to a rapid recurrence and continued presence of bacteriuria. Following the successful removal of the infection stone, long-term chemoprophylaxis is required for several months.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e5310af06cc74dae811bbdb5e3c1b036.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "All of the following statements are true regarding Wilm's tumour except?",
    "choices": [
      {
        "id": 1,
        "text": "It presents most commonly as abdominal mass"
      },
      {
        "id": 2,
        "text": "Most common age of presentation is within 5 years"
      },
      {
        "id": 3,
        "text": "95% of patients live long term with radiotherapy and chemotherapy"
      },
      {
        "id": 4,
        "text": "Metastasis to lungs is rare and occurs late"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Option C is not true regarding Wilms tumour.\u00a0The standard treatment of Wilm's tumour involves a combination of <strong>chemotherapy and surgery</strong>.</p>\n<p>Wilms tumor is the <strong>most common primary malignant renal tumor in children</strong>, typically affecting children less than 5 years ( OptionB). After neuroblastoma, it is the second most common malignant abdominal tumor in childhood. It most commonly presents as an <strong>asymptomatic abdominal mass</strong>. (Option A) Other findings include hypertension, abdominal pain, gross painless hematuria, and constitutional symptoms such as fever and weight loss.</p>\n<p><strong>CECT abdomen </strong>is used to identify the extent of the tumor, integrity of the other kidney, and metastasis. Wilms tumor is metabolically active and can concentrate fluorodeoxyglucose therefore PET/CT is also helpful to identify regional spread and metastatic lesions. A<strong> biopsy </strong>is <strong>discouraged </strong>as it may lead to disease upstaging.</p>\n<p>Treatment: Surgery and chemotherapy, with or without radiotherapy, are the mainstays of treatment.</p>\n<ul>\n<li><strong>Radical nephrectomy</strong> is the standard surgical procedure done. Routine sampling of the para-aortic, hilar, and paracaval lymph nodes should be done.</li>\n<li><strong>Nephron-sparing nephrectomy</strong> is done for children with bilateral disease or with a solitary kidney. Preoperative chemotherapy can be used in these cases to induce tumor shrinkage.</li>\n<li>The classical chemotherapy includes <strong>vincristine </strong>and <strong>dactinomycin</strong> with the addition of Adriamycin(Doxorubicin).</li>\n</ul>\n<p>Despite certain adverse risk factors such as metastases, unfavorable histology and recurrent disease, the prognosis for most children with Wilms' tumor remains very positive. The <strong>overall survival rate</strong> for children with Wilms' tumor is <strong>over 90%.</strong></p>\n<p>The tumour can extend into the renal vein and vena cava and metastasises to lymph nodes and lung. But metastasis to lungs occur late in the disease. (Option D)\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the colour code in trauma triage for patients with life threatening conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Red"
      },
      {
        "id": 2,
        "text": "Yellow"
      },
      {
        "id": 3,
        "text": "Green"
      },
      {
        "id": 4,
        "text": "Black"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Red</strong> is the colour code for patients with <strong>life threatening conditions</strong> who need <strong>immediate medical care.\u00a0</strong></p>\n<p>Triage includes rapid <strong>classification</strong> of the injured based on their injuries and the chances of survival with prompt medical intervention. It provides <strong>maximum benefit </strong>to the greatest number of injured in a disaster situation. It lessens the burden on medical facilities.</p>\n<p>The internationally accepted four-color coded system is used commonly. It includes:</p>\n<ul>\n<li>Red - High priority attention or transfer; Critical, but likely to survive if treatment is given early</li>\n<li>Yellow - Medium priority; Critical, likely to survive if treatment is given within hours</li>\n<li>Green - Ambulatory patients; Stable, likely to survive even if treatment is delayed for hours to days</li>\n<li>Black - Dead or moribund patients; Not breathing, pulseless, so severely injured that no medical care is likely to help</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following conditions is not a risk factor for the development of cholangiocarcinoma?",
    "choices": [
      {
        "id": 1,
        "text": "Hepatitis B"
      },
      {
        "id": 2,
        "text": "Caroli disesase"
      },
      {
        "id": 3,
        "text": "Primary sclerosing cholangitis"
      },
      {
        "id": 4,
        "text": "Infection with Opisthorchis viverrini"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>While all the given options are associated with the causation of <strong>cholangiocarcinoma, hepatitis</strong> <strong>B</strong> in particular has an association with <strong>intrahepatic cholangiocarcinoma</strong> and rarely extrahepatic while all the other options are associated with both <strong>intra</strong> and <strong>extrahepatic cholangiocarcinoma.</strong> Hence it is not as <strong>significantly associated</strong> with <strong>cholangiocarcinoma</strong> compared to the other options</p>\n<p><strong>Cholangiocellular carcinomas</strong> (CCCs) or cholangiocarcinomas are <strong>mucin-producing adenocarcinomas</strong> of the<strong> biliary duct system </strong>that may originate in the liver and extrahepatic bile ducts. Patients present with signs of <strong>obstructive jaundice</strong> associated with <strong>weight loss </strong>and <strong>anorexia.</strong> Initial workup by ultrasound shows dilation of the intrahepatic biliary tree, but definitive diagnosis requires <strong>visualisation of the biliary tree</strong> and MRCP or ERCP (biopsy possible) is preferred</p>\n<p>Risk factors for cholangiocarcinoma:</p>\n<ul>\n<li>Chronic inflammatory conditions- <strong>PSC</strong>, Oriental cholangiohepatitis,<strong>Hepatitis C</strong> infection</li>\n<li>Parasitic infections- <strong>Opisthorchis viverrini</strong>, C. sinensis</li>\n<li>Congenital - Choledochal cysts,<strong> Caroli\u2019s disease</strong></li>\n<li>Chemical agents- \u00a0Thorium dioxide (Thorotrast), Vinyl chloride, Dioxin, Asbestos</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman presented with ulcerative lesion over the breast associated with erythema of surrounding skin and history of retraction of nipple. Biopsy revealed invasive ductal carcinoma. According to 8th edition of AJCC classification, the patient can be classified under which stage?",
    "choices": [
      {
        "id": 1,
        "text": "Stage cant be M1"
      },
      {
        "id": 2,
        "text": "Stage IIIb"
      },
      {
        "id": 3,
        "text": "Stage 4, if N1-N3"
      },
      {
        "id": 4,
        "text": "T4b"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The patient presenting with <strong>ulcerative lesion</strong> with <strong>inflammatory signs </strong>can be classified as <strong>Stage IIIb</strong>. Inflammatory breast carcinoma (<strong>stage T4d</strong>) is characterized by the skin changes of brawny induration, erythema with a raised edge, and edema (peaud\u2019orange) involving &gt;1/3rd of the breast.</p>\n<p>T4d in the TNM staging of carcinoma breast points toward a diagnosis of inflammatory breast carcinoma. It shows <strong>extensive invasion</strong> and proliferation of tumor cells. Inflammatory breast cancer is the <strong>most aggressive subtype </strong>of breast cancer. The hallmark of this condition is the<strong> overexpression of e-cadherin</strong>. This results in increased tumor cohesion and the formation of tumoral clumps which can result in emboli. It has a particularly poor prognosis.</p>\n<p>In addition to anatomical staging, the eighth edition of the AJCC TNM staging system includes the histological grade, ER, PR, HER2/neu and Ki-67 assessment, multigene testingwith Oncotype DXand the response to neoadjuvant chemotherapy to refine the prognostic information.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old male had an episode of loss of consciousness subsequent to a head injury from a bike accident. Upon awakening, he began experiencing severe headache and nausea. He appears drowsy with a Glasgow Coma Scale (GCS) score of 10. One of his pupils is dilated and unresponsive. CT head given.  What is the management?",
    "choices": [
      {
        "id": 1,
        "text": "Anticoagulants to prevent further clotting of blood"
      },
      {
        "id": 2,
        "text": "Observe and serial monitoring in the ICU"
      },
      {
        "id": 3,
        "text": "Osmotic diuresis to decrease intracranial pressure"
      },
      {
        "id": 4,
        "text": "Urgent surgical evacuation"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given scenario of a man with a head injury, unconsciousness, nausea, dilated and fixed pupils, and the CT finding of a <strong>lenticular hemorrhage</strong> also showing a mid-line shift is characteristic of an <strong>extradural or epidural hemorrhage. Urgent surgical evacuation</strong> of heamatoma by craniotomy is the management.\u00a0</p>\n<p>Epidural hemorrhage/hematoma is an intracranial hemorrhage in which the hemorrhage is between the dura and the skull. It classically occurs due to a tear of the<strong> middle meningeal artery</strong>, following a <strong>fracture</strong> of the <strong>temporal</strong> bone. Management is by surgical evacuation of the hematoma or by ligation of the damaged middle meningeal artery\u00a0</p>\n<p>Clinically, patients with extradural hemorrhage typically present with an <strong>initial transient loss</strong> of <strong>consciousness.</strong> A<strong> lucid interva</strong>l is then seen, which may be <strong>minutes</strong> to <strong>hours</strong> during which the patient usually presents. Neurological deterioration then occurs following the lucid interval as the hematoma expands.</p>\n<p>As the hematoma expands, compensation is exhausted with rapid deterioration. There is <strong>contralateral hemiparesis, a reduced conscious level,</strong> and <strong>ipsilateral pupillary dilatation</strong>, the cardinal signs of <strong>brain compression and herniation.</strong> The prognosis for promptly evacuated extradural hematoma, without associated primary brain injury is excellent.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e91602ee9f7a41ff82b99b1ffa6169bd.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient with papillary carcinoma thyroid underwent thyroidectomy. She developed hoarseness of voice after surgery. Which of the following steps in surgery could not have resulted in this complication?",
    "choices": [
      {
        "id": 1,
        "text": "Division of strap muscles"
      },
      {
        "id": 2,
        "text": "Dissection close to Zuckerkandl tubercle"
      },
      {
        "id": 3,
        "text": "Dissection along triangle of Beahr"
      },
      {
        "id": 4,
        "text": "Ligation of superior thyroid vessels"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The patient presenting with hoarseness of voice post thyroidectomy can be due to <strong>injury to external laryngeal nerve</strong> or <strong>unilateral recurrent laryngeal nerve</strong>. The step in thyroidectomy where it is least to happen is during <strong>division of strap muscles</strong>.\u00a0</p>\n<p>Recurrent laryngeal nerve is related to the posterior branch of the inferior thyroid artery near the lobes of the thyroid gland. Therefore, during surgery, <strong>Inferior thyroid artery</strong> is ligated close to the gland to avoid injury to the recurrent laryngeal nerve.</p>\n<p>Thyroid surgery may cause injury to both external and recurrent laryngeal nerves (RLN). During thyroidectomy surgeries, there might be unilateral or bilateral recurrent laryngeal nerve injury. Unilateral RLN injury may be asymptomatic but in a few may cause <strong>hoarseness of voice.\u00a0</strong><br /><strong>Bilateral recurrent laryngeal nerve palsy </strong>can also occur postoperatively. It causes<strong> dyspnea and stridor</strong> but the voice is good. These cases required emergency tracheostomy. External laryngeal nerve injury is more common and could result in hoarseness of voice.</p>\n<p>Other options</p>\n<p>Option B: The RLN frequently passes immediately medial to the <strong>tubercle of Zuckerkandl</strong>. In order to find and protect RLN during thyroid surgery, a careful, bloodless, and meticulous dissection should be carried out around the tubercle.</p>\n<p>Option C: <strong>Beahrs\u2019 triangle i</strong>s bounded by common carotid artery as base, inferior thyroid artery superiorly and RLN as the <strong>lower arm of triangle</strong>. Recognizing the boundaries of the triangle posterior to thyroid after retracting the ipsilateral thyroid lobe medially, helps in avoiding RLN injury.</p>\n<p>Option D: The external branch of the superior laryngeal nerve courses along the cricothyroid muscle just medial to the <strong>superior pole vessels</strong>. To avoid injury to this nerve, the superior pole vessels are divided individually as close as possible to the point where they enter the thyroid gland</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the most common hernia in females?",
    "choices": [
      {
        "id": 1,
        "text": "Indirect inguinal"
      },
      {
        "id": 2,
        "text": "Direct inguinal"
      },
      {
        "id": 3,
        "text": "Femoral"
      },
      {
        "id": 4,
        "text": "Obturator"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>most common hernia</strong> in <strong>females</strong> is an <strong>indirect inguinal hernia</strong>.</p>\n<p><strong>Inguinal hernia</strong> is the <strong>most common hernia</strong> in men and women. It is classified into :</p>\n<ul>\n<li><strong>Indirect hernia</strong> - protrusion of the contents occurs through the <strong>deep inguinal ring</strong>, along with the spermatic cord, <strong>lateral </strong>to<strong> </strong>the inferior epigastric artery. It is the <strong>most common subtype</strong> of groin hernia in <strong>both males and females</strong>.</li>\n<li><strong>Direct inguinal hernia</strong> - Occurs through the <strong>posterior wall</strong> of the inguinal canal through the <strong>Hasselbach's triangle</strong>. The sac is <strong>medial</strong> to the inferior epigastric artery.</li>\n</ul>\n<p>Other options:</p>\n<p>Option C: <strong>Femoral hernia</strong> occurs when the hernial sac descends vertically through the femoral canal up to the saphenous opening and then escapes out into the loose areolar tissue. It is <strong>more common in women</strong> than in men; however, it is less common than inguinal hernia.</p>\n<p>Option D: In an <strong>obturator hernia</strong>, the contents pass through the obturator canal. It is more commonly seen in <strong>females </strong>than males; however, it is less common than inguinal hernia.</p>\n<p>Note: Inguinal hernias are five times more common than femoral hernias.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not done during the primary survey in trauma management?",
    "choices": [
      {
        "id": 1,
        "text": "1, 3 and 4"
      },
      {
        "id": 2,
        "text": "3 and 4"
      },
      {
        "id": 3,
        "text": "1 only"
      },
      {
        "id": 4,
        "text": "1 and 3"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>NCCT brain is not done during the primary survey in trauma management. (Option C)</p>\n<p><strong>Endotracheal intubation</strong> is part of <strong>airway management</strong> in the primary survey. <strong>Intercostal drainage</strong> for hemothorax or pneumothorax and <strong>chest X-ray </strong>especially <strong>AP view</strong> is part of <strong>breathing </strong>component assessment of the primary survey in trauma management.\u00a0</p>\n<p><strong>NCCT brain</strong> is a part of the <strong>secondary survey</strong> of trauma management and is performed after <strong>initial resuscitation</strong> and <strong>stabilisation</strong>.\u00a0A CT scan of the head is performed within 1 hour if the GCS is &lt;14 at the initial assessment. Other indications include a <strong>tense fontanelle</strong>, suspicion of an <strong>open/ depressed </strong>or<strong> base of skull\u00a0fracture</strong>, abnormal pupillary response, abnormal posturing, and a <strong>focal neurological defect</strong>.\u00a0A head CT scan should also be performed if there are <strong>three or more vomiting episodes</strong>, a witnessed <strong>loss of consciousness or amnesia for &gt;5 minutes.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old male arrived at the ER with altered mental status and hematemesis that began a day ago. He has a 20-year history of alcoholism, with his most recent binge occurring a week prior. An ultrasound revealed altered echo texture of liver and mild portal vein dilation. CT scan brain was normal. He was started on intravenous pantoprazole and antiemetics. What should be the next step in his management?",
    "choices": [
      {
        "id": 1,
        "text": "Start a course of broad spectrum antibiotics"
      },
      {
        "id": 2,
        "text": "Order a liver biopsy to asses for fibrosis"
      },
      {
        "id": 3,
        "text": "Perform an endoscopy to look for varices"
      },
      {
        "id": 4,
        "text": "Administer intravenous fluids and electrolyte replacement"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The next immediate step in managament of upper gastrointestinal bleeding is <strong>administration of intravenous fluids and electrolyte replacement</strong>.</p>\n<p>USG findings and history of alcoholism are suggestive of <strong>cirrhosis</strong> leading to portal hypertension. The <strong>upper GI endoscopy</strong> provides a <strong>definitive diagnosis</strong> and aids in predicting the risk of bleeding with an option to treat via band ligation or sclerotherapy. (Option C)</p>\n<p>The management of esophageal variceal bleeding involves:</p>\n<ul>\n<li><strong>Resuscitation with IV fluids</strong>, <strong>airway </strong>protection(intubation to protect airway and prevent aspiration), and oxygen</li>\n<li>Blood transfusion to maintain Hb between 7-9g/dL</li>\n<li><strong>Antibiotic prophylaxis</strong> with ceftriaxone before endoscopy (Option A)</li>\n<li>An attempt at hemostasis with <strong>octreotide or terlipressin</strong> or vasopressin</li>\n<li>Upper GI endoscopy within 12 hours after fluid resuscitation to confirm the source of the bleed</li>\n<li>Endoscopic variceal band <strong>ligation</strong> or <strong>sclerotherapy</strong></li>\n<li>In case, of failure or rebleeding - Transjugular intrahepatic portosystemic shunt (TIPS)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/843bb40225884e0b847c52871b9948cfx1200x1551.JPEG"
    ]
  },
  {
    "text": "A 23-year-old female presented with complaints of neck swelling, difficulty swallowing, and hoarseness of voice. Radiological evaluation revealed a mass compressing the trachea. Biopsy showed cells arranged in nests with amyloid deposits. What is the origin of these cells?",
    "choices": [
      {
        "id": 1,
        "text": "Follicular cells"
      },
      {
        "id": 2,
        "text": "Parafollicular cells"
      },
      {
        "id": 3,
        "text": "Hurthle cells"
      },
      {
        "id": 4,
        "text": "Ashkanazy cells"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical scenario along with biopsy showing cells arranged in nests along with <strong>amyloid deposits</strong> is suggestive of <strong>medullary carcinoma</strong> of the <strong>thyroid.</strong> Medullary carcinoma of the thyroid (MTC) arises from the <strong>parafollicular C cells.</strong></p>\n<p>Histopathology shows polygonal to <strong>spindle-shaped cells</strong> which form<strong> nests</strong>, trabeculae, or follicles. <strong>Amyloid deposits</strong> that are derived from the altered <strong>calcitonin molecules</strong> are present in the stroma. Calcitonin in the tumor cells and stroma is easily demonstratable by immunohistochemistry.</p>\n<p>Features of MTC:</p>\n<ul>\n<li>Painful neck mass with cervical lymphadenopathy</li>\n<li>Dysphagia, dysphonia, or dyspnea if there is local invasion</li>\n<li><strong>Diarrhea</strong> due to increased intestinal motility</li>\n<li><strong>Cushingoid habitus</strong> due to ectopic ACTH production</li>\n<li>Blood-borne metastasis\u00a0</li>\n</ul>\n<p>Diagnosis is by careful family history, physical examination, <strong>raised calcitonin</strong> and <strong>CEA levels,</strong> and fine-needle aspiration biopsy of the mass.</p>\n<p>Other options:</p>\n<p>Option C and D: A Hurthle cell is a cell in the thyroid that is often associated with Hashimoto's thyroiditis as well as benign and malignant tumors (H\u00fcrthle cell adenoma and H\u00fcrthle cell carcinoma). Ashkanazy cells are another name given to the cells with Hurthle bodies in Hashimoto's thyroiditis.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/13978ae15e1548d297146ee93c34b3f0x1279x1050.JPEG"
    ]
  },
  {
    "text": "A 34-year-old male, on investigation serum calcium level of 12.8 mg/dl (N- 8.5-10.25mg/dl) with raised PTH. On ultrasonography, a 1.5x1.5 mass was detected on the right lower lobe of the thyroid gland. Which of the following is true regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "A normal DEXA scan rules out the need for surgery"
      },
      {
        "id": 2,
        "text": "MIBI followed by focussed parathyroidectomy to be done"
      },
      {
        "id": 3,
        "text": "No surgery is required, only surveillance"
      },
      {
        "id": 4,
        "text": "Creatinine clearance >80ml/min mandates surgery"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The lab reports of this patient, associated with a thyroid mass indicate primary hyperparathyroidism due to parathyroid adenoma.<strong> MIBI</strong> followed by<strong> focused parathyroidectomy</strong> to be done in this condition.</p>\n<p>The patient presents with <strong>hypercalcemia</strong> (serum calcium 12.8 mg/dL) and <strong>elevated parathyroid hormone</strong> (PTH), which strongly indicates <strong>primary hyperparathyroidism </strong>(PHPT).\u00a0<br />The ultrasonographic finding of a mass in the right lower lobe of the thyroid is consistent with a <strong>parathyroid adenoma</strong>, the most common cause of PHPT.</p>\n<p><strong>99mTc-Sestamibi (MIBI)</strong> <strong>scan</strong> is commonly used in conjunction with ultrasonography to localise the hyperfunctioning parathyroid gland before surgery.</p>\n<p><strong>Focused parathyroidectomy</strong> is the treatment of choice in such cases when a single adenoma is identified. This approach is minimally invasive and guided by the imaging findings.</p>\n<p>Other options</p>\n<p>Option A: A normal DEXA scan does not negate the need for surgery in a patient with severe hypercalcemia like this. Severe hypercalcemia (&gt;12 mg/dL) is an absolute indication for surgery, irrespective of the results of the DEXA scan.\u00a0</p>\n<p>Option C: Observation is only appropriate for patients with mild hypercalcemia, no symptoms, and no target organ damage. <strong>Severe hypercalcemia</strong> (&gt;12 mg/dL) is an absolute indication for <strong>surgery</strong>.</p>\n<p>Option D: Creatinine clearance<strong> &lt; 60 ml/min</strong> mandates surgery.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A middle-aged woman presents with flank pain and painful micturition. The pain was relieved by IV analgesics given at a nearby primary healthcare centre. The patient is diagnosed with ureteric colic due to ureteric calculi. What is the best diagnostic modality in this case?",
    "choices": [
      {
        "id": 1,
        "text": "NCCT KUB"
      },
      {
        "id": 2,
        "text": "CECT"
      },
      {
        "id": 3,
        "text": "USG KUB"
      },
      {
        "id": 4,
        "text": "Ureteroscopy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>NCCT KUB</strong> (Non-contrast CT of the kidney, ureters, and bladder) is the <strong>best diagnostic</strong> modality for the clinical evaluation of <strong>ureteric stones.</strong></p>\n<p>NCCT is the preferred investigation for evaluation of:</p>\n<ul>\n<li>Renal stones<strong> </strong>except for indinavir stones</li>\n<li><strong>Ureteric stones</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Head injury</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Salivary gland stones</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the marked structure.",
    "choices": [
      {
        "id": 1,
        "text": "Corpora amylacea"
      },
      {
        "id": 2,
        "text": "Corpora arenacea"
      },
      {
        "id": 3,
        "text": "Lewy body"
      },
      {
        "id": 4,
        "text": "Psammoma bodies"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Option C: Lewy body: </strong>aggregates of insoluble fibrillar proteins called alpha-synuclein (specific) and ubiquitin in the neural cells. They are typically seen in <strong>Parkinson's disease</strong>, <strong>Lewy body dementia</strong>, and a few variants of Alzheimer's disease.</p>\n<p><br /><strong>Option D: Psammoma bodies :</strong> calcified structures seen in areas of cellular degeneration. \u00a0They \u00a0have a concentric laminated, or onion-like, appearance. Diagnostic feature of <strong>papillary thyroid carcinoma </strong>(PTC), the most common form of thyroid cancer.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/69047eb90c2f4943bf3615048051fe43.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/24f8e2a89d084e83be0482d4801cc3e0x686x726.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a7eeb69cb2564f3d977f332250acaaeax988x794.JPEG"
    ]
  },
  {
    "text": "A 25-year-old patient sustains a fall from the 2nd floor of a building and is brought to the emergency department. Which of the following is not an adjunct to the primary survey?",
    "choices": [
      {
        "id": 1,
        "text": "X-ray pelvis AP"
      },
      {
        "id": 2,
        "text": "X-ray chest AP"
      },
      {
        "id": 3,
        "text": "Extended FAST"
      },
      {
        "id": 4,
        "text": "CT abdomen and pelvis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>CT<strong> </strong>abdomen and pelvis are not an adjunct to the primary survey. <strong>CT scan </strong>is a part of a <strong>secondary survey</strong>.</p>\n<p>The <strong>primary survey</strong> identifies and manages the most immediately<strong> life-threatening</strong> pathologies first.\u00a0</p>\n<p>The <strong>secondary survey </strong>includes investigations that help identify all other injuries, excluding the apparent ones. This includes<strong> X-rays</strong> of the <strong>spine</strong> and <strong>extremities</strong>(limbs) and a <strong>CT</strong> of the <strong>abdomen</strong>, <strong>head</strong>, <strong>chest</strong>, <strong>pelvis</strong> and <strong>spine</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old male presents with acute epigastric pain and fever. He has a past history of cholelithiasis. On examination, abdominal guarding and rigidity present. His serum amylase, lipase are raised and patient has leucocytosis. What is true regarding his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Serum amylase remains elevated even after 30 days of resolution of acute pancreatitis"
      },
      {
        "id": 2,
        "text": "Serum lipase is more specific than serum amylase"
      },
      {
        "id": 3,
        "text": "> 75 percent patients present with hypercalcemia"
      },
      {
        "id": 4,
        "text": "Increase in the level of serum lipase is directly proportional to the severity"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>\u200b\u200bThe patient presents with features suggestive of <strong>acute pancreatitis </strong>(epigastric pain, fever, history of cholelithiasis, guarding/rigidity, raised serum amylase and lipase, and leukocytosis). For acute pancreatitis, <strong>serum lipase</strong> is more <strong>specific</strong> than serum amylase.</p>\n<p>Lipase has a higher specificity for diagnosing acute pancreatitis, as elevated amylase can occur in other conditions such as salivary gland disorders, intestinal obstruction, or renal failure. Lipase also remains elevated longer than amylase.</p>\n<p>The <strong>diagnostic criteria</strong> for acute pancreatitis require at least two of the following three features:</p>\n<ol>\n<li>Characteristic <strong>Abdominal Pain:</strong><br />Acute onset of severe epigastric pain, often radiating to the back.<br />Pain may worsen after eating and is associated with nausea and vomiting.</li>\n<li><strong>Serum Lipase and/or Amylase Elevation:</strong><br />At least 3 times the upper limit of normal (ULN).<br />Lipase is preferred due to its higher specificity and longer half-life.</li>\n<li><strong>Imaging </strong>Findings:<br />Characteristic findings of pancreatitis on imaging (CT scan, MRI, or ultrasound), such as:<br />Pancreatic enlargement<br />Peripancreatic fluid collections<br />Inflammatory changes in and around the pancreas</li>\n</ol>\n<p>Other Options:</p>\n<p>Option A:<strong> </strong>Amylase levels<strong> normalize within 3-5 days </strong>after an episode of acute pancreatitis.</p>\n<p>Option C: <strong>Hypocalcemia</strong> is more <strong>commonly </strong>observed, due to fat saponification in severe cases.</p>\n<p>Option D: The degree of elevation of serum lipase does not correlate with the severity of acute pancreatitis. Severity is assessed using clinical scores like <strong>Ranson's criteria</strong>, APACHE II, or CT severity index.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fe4a886b72ee4106a47639036533d73dx946x436.JPEG"
    ]
  },
  {
    "text": "A 34-year-old female presents with a lump in her left breast for 2 years. On examination, a 6 x 4 cm mass is palpated. Dimpling of the skin and bloody discharge from the nipple is present. The lesion is invading the pectoralis major muscle. Ipsilateral Level I and Level II matted axillary lymph nodes present. There was no distant metastasis. What is the TNM staging (AJCC 8th)?",
    "choices": [
      {
        "id": 1,
        "text": "T4bN1M0"
      },
      {
        "id": 2,
        "text": "T3N2M0"
      },
      {
        "id": 3,
        "text": "T4aN1M0"
      },
      {
        "id": 4,
        "text": "T2N1M1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>TNM staging of the tumour is <strong>T3 N2 M0</strong>.</p>\n<p>In the given scenario:</p>\n<ul>\n<li>6 x 4 cm mass - <strong>T3</strong></li>\n<li>Ipsilateral Level I and Level II matted axillary lymph nodes- <strong>N2</strong></li>\n<li>No distant metastasis - <strong>M0</strong>.</li>\n</ul>\n<p>In tumour size assessment, the <strong>greatest dimension</strong> is taken into consideration. For example, in a 6 x 4 cm lump, 6 cm is taken into account, and the tumour is classified as T3 (&gt;5 cm). If 2 lumps are present in the same breast, staging is according to the <strong>bigger lump</strong>. If lumps are present in <strong>bilateral</strong> breasts, <strong>separate</strong> <strong>staging</strong> is done for both lumps.</p>\n<p>Any <strong>contralateral lymph node</strong> involvement is considered as <strong>distant metastasis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 84-year-old man with a history of stroke 2 years ago, who is on prolonged bed rest, develops a pressure ulcer with partial thickness skin loss and a clean base. What is the grade of his pressure sore?",
    "choices": [
      {
        "id": 1,
        "text": "Grade 1"
      },
      {
        "id": 2,
        "text": "Grade 4"
      },
      {
        "id": 3,
        "text": "Grade 3"
      },
      {
        "id": 4,
        "text": "Grade 2"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Prevention</strong> is the <strong>best treatment </strong>for <strong>pressure</strong> <strong>sores</strong>. They can be prevented with <strong>good</strong> <strong>skincare</strong>, the use of <strong>air</strong>-<strong>fluidized</strong> <strong>beds</strong>, special pressure-<strong>dispersion</strong> <strong>cushions</strong>, or <strong>foams</strong>. <strong>Fecal</strong> or <strong>urinary</strong> <strong>diversion</strong> can be considered in special cases.</p>\n<p>The <strong>position</strong> of the bedridden patients should be <strong>changed once every 2 hours</strong> and <strong>wheel-chair bound patients </strong>should be taught to get off their chairs for <strong>10 seconds every 10 minutes.</strong></p>\n<p><strong>Surgical</strong> <strong>management</strong> of pressure sores follows the same principles involved in acute wound treatment. Prior to the operation, the pressure sores should be <strong>adequately</strong> <strong>debrided</strong>, and <strong>vacuum</strong>-<strong>assisted</strong> <strong>closure</strong> (VAC) can be used to promote the<strong> growth of granulation tissue</strong> required for surgical closure. <strong>Large skin flaps</strong> that have muscle with sensory innervation are <strong>best</strong> for <strong>reconstruction</strong>.</p>\n<p><strong>VAC</strong> is done by applying intermittent <strong>negative</strong> <strong>pressure</strong> of approximately -125 mmHg to hasten <strong>debridement</strong> and <strong>promote</strong> <strong>granulation</strong> tissue formation. <strong>Negative</strong> <strong>pressure</strong> <strong>decreases</strong> <strong>edema</strong>, <strong>removes</strong> <strong>interstitial</strong> <strong>fluid</strong>, and <strong>increases</strong> <strong>blood</strong> <strong>flow</strong>. This <strong>decreases</strong> <strong>bacterial</strong> <strong>growth</strong> and <strong>increases</strong> <strong>cell</strong> <strong>proliferation</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://upload.wikimedia.org/wikipedia/commons/0/01/Wound_stage.jpg"
    ]
  },
  {
    "text": "During ward rounds, you see a patient who is admitted with a ca esophagus. What is the most likely presentation in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Dysphagia of solids followed by liquids"
      },
      {
        "id": 2,
        "text": "Dysphagia of liquids followed by solids"
      },
      {
        "id": 3,
        "text": "Chest pain"
      },
      {
        "id": 4,
        "text": "Neck mass"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Dysphagia</strong> <strong>of</strong> <strong>solids</strong> <strong>followed by</strong> <strong>liquids</strong> is the most likely presentation in a patient with <strong>ca esophagus</strong>.</p>\n<p><strong>Initially</strong>, patients have difficulty swallowing <strong>solids</strong>. <strong>Later</strong>, as the tumor grows and narrows the esophageal lumen, dysphagia progresses to <strong>liquids</strong>. This progression occurs because solid foods require a wider lumen to pass through, and the narrowing caused by the tumor becomes more critical as it advances.</p>\n<p>Carcinoma esophagus is one of the most common malignancies manifesting in mid to late adulthood. It can be a <strong>squamous cell </strong>or <strong>adenocarcinoma</strong>.</p>\n<p>Squamous cell carcinoma (SCC) affects the <strong>upper two-thirds</strong> of the esophagus while adenocarcinoma affects the <strong>lower third</strong>. <strong>Tobacco smoking</strong> and <strong>alcohol</strong> are the risk factors for SCC. <strong>Obesity</strong> and <strong>gastroesophageal reflux disease</strong> increase the risk of adenocarcinoma.</p>\n<p><strong>Dysphagia</strong> can be the most common presenting feature but may present late. Other features such as regurgitation, <strong>weight loss</strong>, vomiting, and odynophagia can be seen. <strong>Lymph node involvement</strong> indicates a poor prognosis.</p>\n<p><strong>Endoscopy</strong> is the first line of investigation done. <strong>CT</strong> is useful to rule out metastasis. <strong>Endoscopic ultrasonography </strong>is used to assess the depth of tumor invasion through the wall of the esophagus, adjacent organs, and lymph node metastasis.</p>\n<p>Management options include radical esophagectomy, neoadjuvant chemotherapy, and palliative chemoradiation or endoscopic treatments.</p>\n<p>Other options\u00a0</p>\n<p>Option B: <strong>Dysphagia</strong> of <strong>liquids followed by solids</strong> is typically seen in <strong>motility disorders</strong>, such as achalasia cardia, where there is functional obstruction rather than a mechanical obstruction.</p>\n<p>Option C: <strong>Chest pain</strong> may occur in the <strong>CA esophagus</strong>, but it is not the most common presenting symptom. It usually arises in advanced cases or due to tumor invasion into surrounding structures.</p>\n<p>Option D: A <strong>neck mass</strong> might occur in <strong>metastatic disease</strong> (e.g., supraclavicular lymphadenopathy), but not the typical initial presentation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the T stage of this oral cavity tumour?",
    "choices": [
      {
        "id": 1,
        "text": "T4a"
      },
      {
        "id": 2,
        "text": "T4b"
      },
      {
        "id": 3,
        "text": "T3"
      },
      {
        "id": 4,
        "text": "T2"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This oral cavity tumour is stage T4a.</p>\n<p>In the given image, the oral cancer involves the floor of the mouth as well as the <strong>lip (adjacent structures)</strong>. When adjacent structures are involved, the cancer meets the criteria for T4a disease. (resectable)</p>\n<p>T4a is defined as <strong>\"moderately advanced local disease\"</strong> and includes tumors that invade floor of the mouth or the lip, and is resectable. These structures involve:</p>\n<ul>\n<li>Cortical bone (e.g., mandible or maxilla)</li>\n<li>Inferior alveolar nerve</li>\n<li>Floor of the mouth</li>\n<li>Skin of the face (chin or nose)</li>\n</ul>\n<p>The <strong>T staging</strong> for oral cavity tumors, based on the AJCC 8th edition, is as follows:</p>\n<ul>\n<li>T1: Tumor <strong>\u2264 2 cm</strong> in greatest dimension, no invasion of adjacent structures.</li>\n<li>T2: Tumor <strong>&gt; 2 cm but \u2264 4 cm</strong> in greatest dimension, no invasion of adjacent structures. <strong>(Option A)</strong></li>\n<li>T3: Tumor <strong>&gt; 4 cm</strong> in greatest dimension or <strong>minor invasion</strong> into structures such as the deep tongue muscle<strong>. (Option C)</strong></li>\n<li>T4a (Moderately advanced local disease): Tumor invades adjacent structures like cortical bone, inferior alveolar nerve, floor of the mouth, or skin (chin or nose).</li>\n<li>T4b (Very advanced local disease): Tumor<strong> invades</strong> masticator space, pterygoid plates, skull base, or encases the internal carotid artery. <strong>(Option B)</strong></li>\n</ul>\n<p>The gold standard investigation for oral cancer includes an<strong> incisional biopsy</strong>. An <strong>MRI </strong>is the imaging modality of choice for assessing primary extent. <strong>Surgical management</strong> with <strong>chemotherapy </strong>and adjuvant radiotherapy is the mainstay of management.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1ef57e0c47b04f2398a0825dfcf194e8.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old patient with peptic ulcer disease presents with abdominal pain that is not responding despite treatment in multiple hospitals. He was found to have ulcers in the jejunum and ileum. Gastric pH < 2, and gastrin levels after adequate cessation of PPIs are 10 times the normal value. Identify the lesion present and the boundaries of the triangle containing it.",
    "choices": [
      {
        "id": 1,
        "text": "Gastrinoma; triangle formed by common bile duct, junction of D2-D3, neck and body of pancreas"
      },
      {
        "id": 2,
        "text": "Insulinoma; triangle formed by cystic duct, junction of D2-D3, neck and body of pancreas"
      },
      {
        "id": 3,
        "text": "Gastrinoma; triangle formed by cystic duct, junction of D2-D3, neck and body of pancreas"
      },
      {
        "id": 4,
        "text": "Insulinoma; triangle formed by common bile duct, junction of D2-D3, neck and body of pancreas"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most common presentations of gastrinoma are <strong>epigastric pain</strong>, diarrhoea, and <strong>peptic ulcers</strong>. The ulcers occur at typical locations (<strong>proximal duodenum</strong>) and atypical locations (distal duodenum, jejunum). <strong>Duodenal ulcers</strong> are the most common. Gastrinoma if associated with marked gastric acid production and recurrent peptic ulcer is called <strong>Zollinger-Ellison syndrome</strong>.</p>\n<p>Diagnosis:\u00a0</p>\n<p>The gastric <strong>pH &lt;2</strong>, <strong>basal acid output &gt;15 mEq/hr</strong> and <strong>serum gastrin concentration more than 1000 pg/ml </strong>(normal is &lt;100 pg/ml) confirm the diagnosis of gastrinoma. When the diagnosis is in doubt (like gastrin levels 100-1000 pg/ml), then a secretin test is performed. A<strong> secretin test</strong> is considered positive when serum gastrin levels are more than 200 pg/ml on secretin administration and confirms the diagnosis of gastrinoma.</p>\n<p>For localization of the tumour for surgical management, CT or MRI scans should be done first. If the tumour is not localized on these scans, then somatostatin receptor scintigraphy or endoscopic ultrasound is done for better localization.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/91f98af4b9c4453ab198631d6f065adex1279x1347.JPEG"
    ]
  },
  {
    "text": "An intern is assisting with laparoscopic surgery, and the resident is orienting the intern to the instruments and the operating ports. Your surgeon asks you what the angle between the camera port and the working port is.",
    "choices": [
      {
        "id": 1,
        "text": "Azimuth's angle"
      },
      {
        "id": 2,
        "text": "Manipulation angle"
      },
      {
        "id": 3,
        "text": "Crossing angle"
      },
      {
        "id": 4,
        "text": "Elevation angle"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Other options</p>\n<p>Option B: <strong>Manipulation angle</strong> is the angle between <strong>two working ports</strong>. The minimum angle should be <strong>60\u00b0</strong>.</p>\n<p>Option C: <strong>Crossing angle</strong> refers to the <strong>intersection</strong> <strong>of</strong> <strong>instruments</strong> inside the abdominal cavity.</p>\n<p>Option D: The <strong>elevation angle</strong> is the angle between the <strong>working port</strong> and the <strong>horizontal line</strong>. The minimum angle must be <strong>60\u00b0</strong> to avoid colliding the instrument with the abdominal wall.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b904208e96ed4cb2a657ee736e08f2f1x1280x845.JPEG"
    ]
  },
  {
    "text": "A 35-year-old male underwent surgery for an ileal perforation. Due to heavy contamination, only the sheath was closed, and the wound was left open. Daily wound washing was performed, and the wound was closed on postoperative day 5. By which mechanism does wound healing occur in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Primary intention"
      },
      {
        "id": 2,
        "text": "Secondary intention"
      },
      {
        "id": 3,
        "text": "Tertiary intention"
      },
      {
        "id": 4,
        "text": "Quarternary intention"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Wound healing occurs by <strong>tertiary intention</strong> in this case. The wound is cleaned and left open for a few days. This allows soft tissues to drain and also ensures no infection is present before surgical closure can be done.\u00a0</p>\n<p>Wound closure is categorized into primary, secondary, or tertiary:</p>\n<p><strong>Primary closure </strong>is done for<strong> clean wounds with minimal tissue loss</strong> that are amenable to approximation of wound edges. Healing occurs by primary intention. Primary closure is ideally performed within <strong>6 to 8 hrs</strong> of trauma, but wounds in vascular areas (e.g. face) may be delayed to up to 24 hours after trauma.\u00a0</p>\n<p><strong>Secondary closure</strong> allows healing by <strong>secondary intention</strong>. The wound is<strong> left open </strong>to heal largely by the<strong> formation of granulation tissue and contraction</strong>. These wounds often have <strong>significant tissue loss</strong> precluding tension-free approximation of edges, with devitalized edges. Wound dressings are changed daily to aid in the formation of granulation tissue and subsequent contraction.\u00a0</p>\n<p><strong>Tertiary closure</strong>, also known as <strong>delayed primary closure</strong>, results in a combination of healing by primary and secondary intention. The wound is thoroughly irrigated, debrided, and left open for 2 to 5 days before surgical closure. It is used for wounds that are <strong>grossly contaminated without significant tissue loss</strong>.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old patient who is a known case of Hodgkin's lymphoma with a previous history of irradiation presents with right-sided thyroid swelling. FNAC reveals papillary carcinoma of the thyroid and there is no lymph node involvement. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Hemi-thyroidectomy"
      },
      {
        "id": 2,
        "text": "Hemi-thyroidectomy with modified radical neck dissection"
      },
      {
        "id": 3,
        "text": "Total thyroidectomy"
      },
      {
        "id": 4,
        "text": "Total thyroidectomy with modified radical neck dissection"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Total thyroidectomy\u00a0</strong>is performed in patients with <strong>radiation-induced differentiated thyroid cancers irrespective</strong> of their<strong> size.\u00a0<br /></strong></p>\n<p><strong>Management of differentiated thyroid cancers (DTC)</strong></p>\n<p>Differentiated thyroid cancers include<strong> papillary </strong>thyroid cancer<strong>, follicular </strong>thyroid cancer<strong>, and hurtle cell cancer.<br /></strong><strong>Hemithyroidectomy</strong> is performed for DTCs between <strong>1-4 cm without extrathyroidal</strong> extension or evidence of <strong>metastatic disease</strong>.<br />However,<strong> total thyroidectomy </strong>is performed in the <strong>following scenarios</strong></p>\n<div class=\"page\" title=\"Page 940\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Tumor at least 4 cm</li>\n<li>Gross extrathyroidal extension</li>\n<li>Evidence of metastatic disease</li>\n<li><strong>Radiation-induced DTC</strong></li>\n<li>Familial nonmedullary thyroid cancer</li>\n<li>Multifocal bilateral DTC.</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<p><strong>Central neck dissection</strong> is done only in case of<strong> involvement of level VI nodes</strong>.<br />If <strong>level VI plus other lymph nodes are enlarged</strong> - then <strong>total thyroidectomy + central neck dissection + modified radical neck dissection</strong> is done.<br />In case of <strong>tumor size &gt;4cm (T3 &amp;T4)</strong>, <strong>prophylactic central neck dissection</strong> is done.</p>\n<p>Below is the <strong>TNM staging</strong> of differentiated thyroid carcinoma.</p>\n<table>\n<tbody>\n<tr>\n<td>\n<p>Primary Tumor (T)\u00a0<br />TX Primary cannot be assessed\u00a0</p>\n<p>T0 No primary tumor\u00a0</p>\n<p>T1a \u22641 cm, intrathyroidal\u00a0</p>\n<p>T1b 1-2 cm, intrathyroidal\u00a0</p>\n<p>T2 2-4 cm, intrathyroidal\u00a0</p>\n<p><strong>T3 &gt;4 cm</strong> limited to the thyroid or any size with <strong>minimal extrathyroidal extension</strong> (muscle, soft tissue)\u00a0</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">T3a- &gt;4cm limited to the thyroid</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">T3b- gross extrathyroidal extension involving only the strap muscle.</li>\n</ul>\nT4a Invades subcutaneous tissue, larynx, trachea, esophagus, or RLN\u00a0T4b Invades prevertebral fascia or encases carotid or mediastinal vessels\u00a0</td>\n<td>\n<p>Regional Lymph Nodes (N)\u00a0</p>\n<p>NX Nodes cannot be assessed\u00a0</p>\n<p>N0 Negative nodes\u00a0</p>\n<p><strong>N1a</strong> Positive in levels<strong> VI &amp; VII</strong></p>\n<p>N1b Positive unilateral, bilateral, contralateral lateral neck lymph nodes.<br /><br /><br />Distant Metastasis (M)\u00a0</p>\n<p><br />M0 No distant metastasis\u00a0M1 Distant metastasis</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><br />Papillary carcinoma is the <strong>most common</strong> thyroid carcinoma. It is most common in <strong>iodine-sufficient areas</strong>, among children, and in those <strong>exposed to ionizing radiation</strong>. It is more common in<strong> women</strong> than men (2:1). Dysphagia, dysphonia, and dyspnea are associated with local invasion. It usually presents as a cold nodule on the scan.</p>\n<p><strong>Lymph node metastasis</strong> is common. Lateral aberrant thyroid denotes a cervical lymph node invaded by papillary carcinoma. The most common sites of metastasis:<strong> lung &gt; liver &gt; bone &gt; brain</strong>. It has an <strong>excellent prognosis</strong>, with a 10-year survival rate in excess of 95%.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "One of your friends is teaching you about enhanced recovery after surgery. Which of the following he states is incorrect?",
    "choices": [
      {
        "id": 1,
        "text": "Prolonged fasting is necessary"
      },
      {
        "id": 2,
        "text": "Epidural anaesthesia is recommended in laparoscopic surgery"
      },
      {
        "id": 3,
        "text": "Reduction of the hospital stay by 2-3 weeks"
      },
      {
        "id": 4,
        "text": "Beta-blockers are given after major surgery done under general anaesthesia to improve outcome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Prolonged fasting is not necessary for enhanced recovery after surgery.</p>\n<p>Early oral hydration and nourishment and avoidance of unnecessary IV fluid administration favors the <strong>Enhanced Recovery After Surgery (ERAS) protocol.</strong></p>\n<p>ERAS is an approach designed to speed the clinical recovery of the patient and reduce the cost and length of stay in the patient. It is achieved by optimizing the patient's health before surgery and then delivering evidence-based best care in the perioperative period.\u00a0</p>\n<p>It includes:</p>\n<ul>\n<li>Preference of minimally invasive procedures (e.g. laparoscopic)over open procedures.</li>\n<li>Minimal perioperative starvation.</li>\n<li>Preference for local or regional anesthesia, and adequate pain control with patient-controlled analgesia.\u00a0</li>\n<li>Early removal of Ryles tube and early feeding techniques, rather than IV fluid administration.</li>\n<li>Early mobilisation planned physiotherapy.\u00a0</li>\n<li>Discharge planning is started before the patient is admitted to hospital and involves support from stoma care nurses, physiotherapists etc.</li>\n</ul>\n<p>Other Options:</p>\n<p><strong>Option B: Epidural anaesthesia</strong> is recommended in laparoscopic surgery for pain management.</p>\n<p><strong>Option C: Reduction of the hospital stay by 2-3 weeks:</strong> ERAS protocols do reduce hospital stay so as to plan for early discharge.</p>\n<p><strong>Option D: Beta-blockers are given after major surgery done under general anaesthesia to improve outcome: </strong>Beta-blockers may be used postoperatively in certain cases to control heart rate, manage perioperative stress, and improve outcomes, especially in high-risk cardiac patients.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A chronic smoker comes with complaints of pain in his legs after walking 100 meters. On examination, he has an absent pulse in the bilateral dorsalis pedis, anterior tibial, and posterior tibial arteries, but no gangrene is present. Intermittent claudication is implicated. Which of the following statements is true regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Pain is more at night and sleep"
      },
      {
        "id": 2,
        "text": "Development of pain on the 1st step of walking"
      },
      {
        "id": 3,
        "text": "Pain aggravated by standing and relieved by bending forward"
      },
      {
        "id": 4,
        "text": "Pain develops after walking some distance and is relieved by rest"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In intermittent claudication, <strong>pain</strong> develops <strong>after walking</strong> some distance and is <strong>relieved</strong> by <strong>rest.</strong></p>\n<p><strong>Intermittent</strong>(vascular) <strong>claudication</strong> is most commonly felt in the<strong> calf muscles</strong> because of the involvement of the <strong>superficial femoral artery</strong> in chronic vascular occlusive disease.</p>\n<p>Intermittent claudication is the debilitating cramp-like pain felt in the leg muscles due to<strong> reduced blood flow </strong>and anaerobic metabolism brought on by peripheral arterial disease. It usually signifies <strong>mild</strong> to <strong>moderate chronic vascular occlusive disease. </strong>The pain is brought on by walking, not present on taking the first step. Relieved by rest in both the standing and sitting positions, usually within 5 minutes (option A). The distance that a patient can walk without stopping is known as <strong>claudication distance</strong>. It varies only slightly from day to day. The superficial femoral artery (70%) is the <strong>most commonly </strong>affected artery by claudication and manifests as pain in the <strong>calf</strong> muscles. Aorto-iliac occlusion may cause thigh or buttock claudication. <strong>Leriche's syndrome</strong> occurs due to aortoiliac occlusion and presents with a triad of claudication, impotence, and absent femoral pulses.</p>\n<p><strong>Boyd's classification</strong> of claudication:\u00a0</p>\n<ul>\n<li>Grade I: Patient complains of pain after walking. If the patient continues to walk, due to increased blood flow in muscle and opening of collaterals metabolites causing pain are washed away and the <strong>pain subsides</strong>.</li>\n<li>Grade II: <strong>Pain persists</strong> on continuing to walk; but can walk with effort.</li>\n<li>Grade III: The patient has to <strong>take</strong> <strong>rest</strong> to relieve the pain.</li>\n</ul>\n<p>Other options</p>\n<p>Option A: <strong>Rest pain</strong> occurs when the occlusive disease progresses in severity. Though this pain is present during the day, it is exacerbated on lying down at night due to loss of gravity-dependent perfusion of the foot. This may be relieved by hanging the foot out of the bed to restore the gravitational effects.</p>\n<p>Option B: The development of pain on taking the <strong>first step </strong>of walking is a classic sign of <strong>osteoarthritis</strong>.\u00a0</p>\n<p>Option C: Pain aggravated by standing and relieved by bending forward is seen in <strong>n</strong><strong>eurogenic claudication.</strong>\u00a0It may be seen in cases of <strong>nerve compression</strong> from lumbar intervertebral disc prolapse or spinal stenosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old male with a history of a road traffic accident is brought to the emergency department. His GCS is 8/15, oxygen saturation is 85%, BP is 100/ 60 mmHg, and heart rate is 60 beats per minute. On auscultation his right side breath sounds were absent. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Secure airway, give oxygen, insert ICD, secure IV line"
      },
      {
        "id": 2,
        "text": "Administer IV dextrose followed by NCCT head"
      },
      {
        "id": 3,
        "text": "Start IV fluids, give atropine and secure airway"
      },
      {
        "id": 4,
        "text": "Evaluate for head injury and do CT-head"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario of <strong>hemodynamic instability</strong>, decreased oxygen saturation (85%), GCS of 8/15 and absent breath sounds on the right side of the chest, with a history of a road traffic accident are suggestive of <strong>tension pneumothorax</strong>. The next step of management in this case is to secure the airway, give oxygen, insert the ICD, and secure the IV line.</p>\n<p>According to the<strong> latest ATLS guidelines</strong>, the <strong>order of primary survey</strong> in a trauma patient is <strong>ABCDEF</strong> following the principle of \u2018<strong>what kills first should be managed first</strong>\u2019 -\u00a0</p>\n<ul>\n<li>Airway</li>\n<li>Breathing</li>\n<li>Circulation with control of haemorrhage</li>\n<li>Disability(neurological)</li>\n<li>Exposure to environmental control</li>\n<li>Fluid resuscitation</li>\n</ul>\n<p>After securing the airway, <strong>breathing</strong> can be <strong>assessed</strong> by auscultating for <strong>breath sounds</strong> and a <strong>chest X-ray</strong> to look for a pneumothorax or hemothorax. Administering oxygen through a bag and mask is useful during desaturation only if the <strong>airway is patent</strong>. Therefore, securing the airway is the most important next step for this patient.\u00a0</p>\n<p><strong>Tension pneumothorax</strong> is mainly managed by inserting a <strong>wide-bore needle</strong> in the <strong>5th intercostal space (ICS)</strong> followed by placing an<strong> intercostal drain</strong> in the <strong>5th ICS</strong>. Once the airway and breathing are secured, hemodynamic instability must be corrected by securing an IV line to maintain circulation.</p>\n<p>Other investigations such as NCCT head and CT head are done later on during further evaluation in the secondary survey.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An elderly male patient comes with foul-smelling breath and dysphagia. A barium swallow X-ray is attached. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Achalasia cardia"
      },
      {
        "id": 2,
        "text": "Zenker's diverticulum"
      },
      {
        "id": 3,
        "text": "Tracheoesophageal fistula"
      },
      {
        "id": 4,
        "text": "Carcinoma esophagus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario of <strong>foul-smelling breath</strong> and <strong>dysphagia</strong>, and the given barium swallow X-ray showing the collection of contrast in a <strong>posterior</strong> <strong>pharyngeal</strong> <strong>pouch</strong>-like structure, are suggestive of <strong>Zenker's diverticulum</strong>.</p>\n<p>It often presents with the following:</p>\n<ul>\n<li><strong>Dysphagia</strong></li>\n<li>Regurgitation</li>\n<li><strong>Halitosis</strong></li>\n<li>Gurgling sound on swallowing</li>\n<li>Aspiration</li>\n</ul>\n<p>A barium swallow study may show a diverticulum arising from the midline of the <strong>posterior wall </strong>of the distal <strong>pharynx</strong> near the pharyngoesophageal junction. The diverticulum is typically noted at the C5-6 level. The outpouching may be transient, sometimes referred to as a <strong>pharyngeal pouch</strong>. The pouch is best identified during swallowing and is best visualized on the lateral view.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e1e0091ae92142dd85fefa8c3965099c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Truelove and Witts classification is used for?",
    "choices": [
      {
        "id": 1,
        "text": "Acute encephalitis"
      },
      {
        "id": 2,
        "text": "Acute pancreatitis"
      },
      {
        "id": 3,
        "text": "ARDS"
      },
      {
        "id": 4,
        "text": "Acute severe ulcerative colitis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Truelove and Witts classification is used for <strong>acute severe ulcerative colitis</strong>.</p>\n<p>Given below is the <strong>Truelove and Witts severity index</strong> for <strong>ulcerative colitis</strong>.\u00a0</p>\n<table style=\"border-collapse: collapse; width: 62.596%; height: 364.781px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 19.1621%; height: 22.3984px;\">\u00a0</td>\n<td style=\"width: 25.4325%; height: 22.3984px;\"><strong>Mild</strong></td>\n<td style=\"width: 29.3612%; height: 22.3984px;\"><strong>Moderate</strong></td>\n<td style=\"width: 26.0442%; height: 22.3984px;\"><strong>Severe</strong></td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 19.1621%; height: 22.3984px;\">Bowel movements</td>\n<td style=\"width: 25.4325%; height: 22.3984px;\">&lt; 4 per day</td>\n<td style=\"width: 29.3612%; height: 22.3984px;\">4 \u2013 6 per day</td>\n<td style=\"width: 26.0442%; height: 22.3984px;\">&gt; 6 per day</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 19.1621%; height: 22.3984px;\">Blood in stool</td>\n<td style=\"width: 25.4325%; height: 22.3984px;\">Small</td>\n<td style=\"width: 29.3612%; height: 22.3984px;\">Moderate</td>\n<td style=\"width: 26.0442%; height: 22.3984px;\">Severe</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 19.1621%; height: 22.3984px;\">Fever</td>\n<td style=\"width: 25.4325%; height: 22.3984px;\">None</td>\n<td style=\"width: 29.3612%; height: 22.3984px;\">&lt; 37.5\u00baC</td>\n<td style=\"width: 26.0442%; height: 22.3984px;\">&gt; 37.5\u00baC</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 19.1621%; height: 22.3984px;\">Tachycardia</td>\n<td style=\"width: 25.4325%; height: 22.3984px;\">None</td>\n<td style=\"width: 29.3612%; height: 22.3984px;\">&lt; 90 mean pulse</td>\n<td style=\"width: 26.0442%; height: 22.3984px;\">&gt;90 mean pulse</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 19.1621%; height: 22.3984px;\">Anemia</td>\n<td style=\"width: 25.4325%; height: 22.3984px;\">Mild</td>\n<td style=\"width: 29.3612%; height: 22.3984px;\">Hb &gt; 75% of normal Hb</td>\n<td style=\"width: 26.0442%; height: 22.3984px;\">Hb &lt; 75% of normal Hb</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 19.1621%; height: 22.3984px;\">ESR</td>\n<td style=\"width: 25.4325%; height: 22.3984px;\">&lt; 30mm</td>\n<td style=\"width: 29.3612%; height: 22.3984px;\">&lt; 30mm</td>\n<td style=\"width: 26.0442%; height: 22.3984px;\">&gt; 30mm</td>\n</tr>\n<tr style=\"height: 207.992px;\">\n<td style=\"width: 19.1621%; height: 207.992px;\">Endoscopic appearance</td>\n<td style=\"width: 25.4325%; height: 207.992px;\">\n<p>Erythema</p>\n<p>Decreased vascular markings</p>\n<p>Fine granularity</p>\n</td>\n<td style=\"width: 29.3612%; height: 207.992px;\">\n<p>Marked erythema</p>\n<p>Absent vascular markings</p>\n<p>Coarse granularity</p>\n<p>Contact bleeding</p>\n<p>No ulcerations</p>\n</td>\n<td style=\"width: 26.0442%; height: 207.992px;\">\n<p>Spontaneous bleeding</p>\n<p>Ulcerations</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '239 Surgery Ini-Cet 2024';
        let hierarchy = ["Marrow", "PYQs", "Surgery"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>