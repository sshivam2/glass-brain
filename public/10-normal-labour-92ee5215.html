<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10 Normal Labour - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / qBank / Obstetrics & Gynecology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">29</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following  acts as the primary trigger for onset of labour in pregnant women?",
    "choices": [
      {
        "id": 1,
        "text": "ACTH in mother"
      },
      {
        "id": 2,
        "text": "ACTH in fetus"
      },
      {
        "id": 3,
        "text": "Prostaglandin"
      },
      {
        "id": 4,
        "text": "Oxytocin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>fetal&nbsp;ACTH</strong> causes an increase in <strong>estrogen</strong> acting as the onset of labour in pregnant women. It results in the growth of the fetal adrenal gland which has the capacity for steroid biosynthesis i.e. estrogen.</p>\n<p>Daily steroid production of fetal adrenal glands near term is more than in adults.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bea7441b630742b88b63d7f1c2d44cccx1280x1317.JPEG"
    ]
  },
  {
    "text": "All of the following changes are seen during cervical ripening in a patient except _____.",
    "choices": [
      {
        "id": 1,
        "text": "Collagen fibril diameter is increased"
      },
      {
        "id": 2,
        "text": "Collagen fibrils are tightly packed"
      },
      {
        "id": 3,
        "text": "Increase in glycosaminoglycans"
      },
      {
        "id": 4,
        "text": "Stromal invasion with inflammatory cells"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Collagen fibrils are <strong>loosely packed</strong> during cervical ripening.</p>\n<p><strong>Changes in cervical ripening:</strong></p>\n<ul>\n<li>Collagen fibril diameter is increased, and there is increased spacing between fibrils leading to&nbsp;increased tissue compliance</li>\n<li>Increase in the amount of proteoglycan and glycosaminoglycan within the matrix</li>\n<li>Stromal invasion with inflammatory cells</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An obstetrician performs the following procedure for labor induction in a patient. What is the reflex elicited in the process?",
    "choices": [
      {
        "id": 1,
        "text": "Andrews reflex"
      },
      {
        "id": 2,
        "text": "Johnsons reflex"
      },
      {
        "id": 3,
        "text": "Gails reflex"
      },
      {
        "id": 4,
        "text": "Ferguson reflex"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Stripping of membranes</strong> is depicted in the image, which elicits the&nbsp;<strong>Ferguson reflex</strong>.</p>\n<p>Fetal ejection reflex or&nbsp;Ferguson reflex&nbsp;is a phenomenon in which <strong>mechanical stretching</strong> of the internal <strong>cervix</strong> enhances <strong>uterine activity</strong>. Release of oxytocin from the maternal pituitary has been suggested but not proven.</p>\n<div class=\"page\" title=\"Page 431\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>It is seen in stripping/sweeping&nbsp;and artificial rupture of membranes. Both of these are methods of induction of labor. It is associated with an increase in blood levels of <strong>prostaglandin&nbsp;F2&alpha;</strong>&nbsp;metabolite, also known as <strong>dinoprost/carboprost</strong>.&nbsp;</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/98105ca7bca1404181611249a94e9dd4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following image shows the Duncan method?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span class=\"hvr\">Comparison between two types of placental separation methods:</span></p>\n<table style=\"height: 151px;\" border=\"1\" width=\"400\">\n<tbody>\n<tr>\n<td><strong>Schultze method</strong></td>\n<td><strong>Duncan method</strong></td>\n</tr>\n<tr>\n<td>Separation begins from the center of the placenta to the periphery.</td>\n<td>Separation begins from the periphery to the center.</td>\n</tr>\n<tr>\n<td>Blood does not escape externally, as the blood pours into the membrane sac.</td>\n<td>Blood escapes from the vagina as the blood collects between the membranes and the uterine wall.</td>\n</tr>\n</tbody>\n</table>\n<p><span class=\"hvr\"><strong>Brandt Andrew's method</strong>&nbsp;or <strong>controlled cord traction</strong> is a manoeuvre of expressing the placenta from the uterus in the third stage of labour.&nbsp;</span></p>\n<p><span class=\"hvr\">One&nbsp;hand&nbsp;grasps&nbsp;the&nbsp;umbilical&nbsp;cord&nbsp;while the&nbsp;other&nbsp;is&nbsp;placed&nbsp;on&nbsp;the&nbsp;mother's&nbsp;abdomen&nbsp;with&nbsp;the&nbsp;fingers&nbsp;over&nbsp;the&nbsp;anterior&nbsp;surface&nbsp;of&nbsp;the&nbsp;uterus. While the hand&nbsp;on the&nbsp;abdomen&nbsp;is&nbsp;pressed&nbsp;backwards&nbsp;and&nbsp;slightly&nbsp;upward,&nbsp;the&nbsp;other&nbsp;applies&nbsp;gentle&nbsp;traction&nbsp;on&nbsp;the&nbsp;cord.</span></p>\n<p><span class=\"hvr\"><strong>Type III placenta previa</strong>&nbsp;is a type of incomplete or partial central placenta previa. Here, the placenta covers the internal os partially i.e. it covers the internal os when closed but does not entirely do so when fully dilated.<br /></span></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cfffd46438eb413a8711b772ddec989b.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6fd0d617048c4f1bb817b59d84de986bx1280x2116.JPEG"
    ]
  },
  {
    "text": "In which stage of labour, is the following expelled?",
    "choices": [
      {
        "id": 1,
        "text": "Second"
      },
      {
        "id": 2,
        "text": "Third"
      },
      {
        "id": 3,
        "text": "Fourth"
      },
      {
        "id": 4,
        "text": "First"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The placenta and membranes are expelled in the <strong>third stage</strong> of labour.</p>\n<p>The clinical stages of labour may be summarized as follows:</p>\n<table>\n<tbody>\n<tr>\n<td><strong>Stages of labour</strong></td>\n<td><strong>Definition</strong></td>\n</tr>\n<tr>\n<td>First</td>\n<td>True labour pain to <strong>full dilatation of cervix</strong></td>\n</tr>\n<tr>\n<td>Second</td>\n<td>Full dilatation of cervix to<strong> expulsion of fetus</strong></td>\n</tr>\n<tr>\n<td>Third</td>\n<td>Expulsion of fetus to<strong> expulsion of placenta</strong></td>\n</tr>\n<tr>\n<td>Fourth</td>\n<td><strong>One hour observation</strong> after the expulsion of placenta</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a48befa51ed24fd1b9c1a2db38d9b8a9.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "All of the following are included in the first stage of labour for a pregnant woman except:",
    "choices": [
      {
        "id": 1,
        "text": "Effacement of cervix"
      },
      {
        "id": 2,
        "text": "Dilatation of cervix"
      },
      {
        "id": 3,
        "text": "Crowning of fetal head"
      },
      {
        "id": 4,
        "text": "Fetal descent beginning"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The encirclement of the largest head diameter by the vulval ring is called <strong>crowning</strong>. This occurs in the <strong>second stage </strong>of labour.</p>\n<p>First stage of labour is divided into 2 phases:</p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align: center;\"><strong>Latent phase</strong></td>\n<td style=\"text-align: center;\"><strong>Active phase</strong></td>\n</tr>\n<tr>\n<td>The onset of true labour pain up to 6cm cervical dilatation</td>\n<td>From &ge; 6cm cervical dilatation with regular uterine contractions</td>\n</tr>\n<tr>\n<td>\n<p>Duration:</p>\n<p><strong>10-12 hours- nullipara</strong></p>\n<p><strong>6-</strong><strong>8 hours- multipara</strong></p>\n</td>\n<td>\n<p>Rate of cervical dilatation:</p>\n<p><strong>1.2 cm/hr- nullipara</strong></p>\n<p><strong>1.5 cm/hr- multipara</strong></p>\n</td>\n</tr>\n<tr>\n<td>Mainly cervical <strong>effacement </strong>occurs</td>\n<td>Mainly cervical<strong> dilatation </strong>occurs</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What does fetal position refer to?",
    "choices": [
      {
        "id": 1,
        "text": "Part of presentation which lies over the internal os"
      },
      {
        "id": 2,
        "text": "Relation of different parts of fetus to one another"
      },
      {
        "id": 3,
        "text": "Relation of the denominator to different quadrants of the pelvis"
      },
      {
        "id": 4,
        "text": "Part of fetus lying in the lower segment of uterus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Fetal position</strong> refers to the&nbsp;bony fixed point of reference on presenting part with respect to different quadrants of the pelvis.</p>\n<p>Definition of various terminologies used for fetus in-utero:</p>\n<table>\n<tbody>\n<tr>\n<td><strong>Term:</strong></td>\n<td><strong>Definition:</strong></td>\n</tr>\n<tr>\n<td><strong>Lie</strong></td>\n<td>Relationship of the long axis of fetus to the long axis of the maternal spine</td>\n</tr>\n<tr>\n<td><strong>Presentation</strong></td>\n<td>Part of the fetus occupying the lower pole of the pelvis</td>\n</tr>\n<tr>\n<td><strong>Presenting part</strong></td>\n<td>\n<p>Part of the presentation which overlies the internal os</p>\n</td>\n</tr>\n<tr>\n<td><strong>Attitude</strong></td>\n<td>\n<p>The relation of the different parts of the fetus to one another</p>\n</td>\n</tr>\n<tr>\n<td><strong>Denominator</strong></td>\n<td>\n<p>An arbitrary bony fixed point on the presenting part which comes in relation with the various quadrants of the maternal pelvis</p>\n</td>\n</tr>\n<tr>\n<td><strong>Position</strong></td>\n<td>\n<p>Relation of the denominator to the different quadrants of the pelvis</p>\n</td>\n</tr>\n<tr>\n<td><strong>Engagement</strong></td>\n<td>\n<p>When the biparietal diameter has passed the plane of the pelvic brim, the head is said to be engaged.</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A senior resident examines a primigravida in labour and informs that the fetus is cephalic in attitude of flexion. What is the most common presenting part of this fetus?",
    "choices": [
      {
        "id": 1,
        "text": "Vertex"
      },
      {
        "id": 2,
        "text": "Sinciput"
      },
      {
        "id": 3,
        "text": "Occiput"
      },
      {
        "id": 4,
        "text": "Face"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most common presenting part when the fetus is in attitude of flexion is <strong>vertex.</strong></p>\n<table>\n<tbody>\n<tr>\n<td><strong>Attitude</strong></td>\n<td><strong>Presenting part</strong></td>\n</tr>\n<tr>\n<td>Complete flexion</td>\n<td>Vertex (occipitoanterior)</td>\n</tr>\n<tr>\n<td>Incomplete flexion</td>\n<td>Vertex (sinciput)</td>\n</tr>\n<tr>\n<td>Deflexion</td>\n<td>Vertex (occipitoposterior)</td>\n</tr>\n<tr>\n<td>Partial extension</td>\n<td>Brow</td>\n</tr>\n<tr>\n<td>Complete extension</td>\n<td>Face</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b11b705aa2a54571b79f145c8288ca40x1200x1907.JPEG"
    ]
  },
  {
    "text": "The ultrasonogram shows the diameter of the fetal head which is taken as a reference for engagement. Which diameter does this refer to?",
    "choices": [
      {
        "id": 1,
        "text": "Biparietal diameter"
      },
      {
        "id": 2,
        "text": "Bitemporal diameter"
      },
      {
        "id": 3,
        "text": "Occipitofrontal diameter"
      },
      {
        "id": 4,
        "text": "Suboccipitofrontal diameter"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The fetal head is said to be engaged when the <strong>biparietal diameter </strong>(shown in the image) passes through the pelvic brim.&nbsp;Engagement of fetal head is with reference to this biparietal diameter.</p>\n<p>It is the <strong>greatest transverse diameter</strong> in an occiput presentation. It also reflects the gestational age in the <strong>second trimester</strong>, with a variation of 7-10 days.&nbsp;</p>\n<p class=\"p1\">BPD is measured in the <strong>transthalamic view</strong>, at the level of the thalamus and cavum septum pellucidum (CSP). It is measured from the outer edge of the skull in the near field to the inner edge of the skull in the far field.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b1a0cc428f3e4739afb0ef3d70f80f4d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4700f5a477a64d6e899b48550f25c87ax1280x1373.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a part of a partograph?",
    "choices": [
      {
        "id": 1,
        "text": "Fetal heart rate"
      },
      {
        "id": 2,
        "text": "Maternal heart rate"
      },
      {
        "id": 3,
        "text": "Maternal temperature"
      },
      {
        "id": 4,
        "text": "Fetal temperature"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Fetal temperature is not a part of a partograph.</p>\n<p>Assessment of progress of labor is best done by <strong>partograph.&nbsp;</strong>Components of partograph:</p>\n<ul>\n<li>Patient identification</li>\n<li><strong>Fetal heart rate </strong>recorded <strong>every 30 min</strong></li>\n<li><strong>Pulse </strong>recorded <strong>every 30 min</strong></li>\n<li><strong>Blood pressure and temperature&nbsp;</strong>recorded <strong>every 4 h</strong></li>\n<li><strong>Uterine contractions</strong> recorded <strong>every 30 min</strong></li>\n<li>Oxytocin-dose and concentration</li>\n<li>Urine analysis</li>\n<li>Vaginal examination done every 4 hours</li>\n<li>State of membranes and colour of liquor</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What are the cardinal movements of labour?",
    "choices": [
      {
        "id": 1,
        "text": "Engagement\u2014descent\u2014flexion\u2014internal rotation\u2014extension\u2014external rotation\u2014expulsion"
      },
      {
        "id": 2,
        "text": "Engagement\u2014flexion\u2014descent\u2014internal rotation\u2014extension\u2014expulsion"
      },
      {
        "id": 3,
        "text": "Engagement\u2014flexion\u2014descent\u2014external rotation\u2014expulsion"
      },
      {
        "id": 4,
        "text": "Engagement\u2014extension\u2014internal rotation\u2014external rotation\u2014expulsion"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>cardinal movements</strong> of labour are engagement, descent, flexion, internal rotation, extension, external rotation, expulsion.</p>\n<p>(Mnemonic: Every Day FIRE Raises Extremely)</p>\n<ul>\n<li>Every: Engagement</li>\n<li>Day: Descent</li>\n<li>F: Flexion</li>\n<li>IR: Internal rotation</li>\n<li>E: Extension</li>\n<li>Raises: external Rotation</li>\n<li>Extremely: Expulsion</li>\n</ul>\n<p>The most common presentation is <strong>cephalic</strong> and&nbsp;presenting part is <strong>vertex</strong>. Head enters the pelvis through <strong>transverse diameter</strong> majorly and&nbsp;left occipito transverse is the commonest fetal position. Internal rotation of fetal head occurs at the level of <strong>ischial spine</strong>. In a vertex delivery, the baby's head is delivered by extension and in&nbsp;a breech delivery, the baby's head is delivered by flexion. The best time to give episotomy is after crowning has occured.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/941a2cdb44d74a86b39dd4f328c4cf2fx1064x2840.JPEG"
    ]
  },
  {
    "text": "A multigravida with gestational diabetes mellitus was admitted in labour at term and progressed to full dilatation. The fetal vertex failed to descend beyond -3 station. The descent of the fetus is facilitated by all except:",
    "choices": [
      {
        "id": 1,
        "text": "Extension and straightening of the fetal body"
      },
      {
        "id": 2,
        "text": "Pressure of amniotic fluid"
      },
      {
        "id": 3,
        "text": "Uterine contractions and retractions"
      },
      {
        "id": 4,
        "text": "Well-flexed head"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>A <strong>well-flexed head</strong> facilitates <strong>internal rotation</strong>, not the descent of the presenting part.</p>\n<p>The descent of the fetus is brought about by:</p>\n<ul>\n<li>Pressure of amniotic fluid</li>\n<li>Direct pressure of the fundus upon the breech with contractions</li>\n<li>Bearing-down efforts of maternal abdominal muscles</li>\n<li>Extension and straightening of the fetal body</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a prerequisite for internal rotation of the fetal head for a woman in labor?",
    "choices": [
      {
        "id": 1,
        "text": "Straightening of fetal body"
      },
      {
        "id": 2,
        "text": "Tone of transversus abdominis"
      },
      {
        "id": 3,
        "text": "Well-extended head"
      },
      {
        "id": 4,
        "text": "Tone of levator ani muscles"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>tone of levator ani</strong> muscles is a prerequisite for <strong>internal rotation</strong> of the head.</p>\n<div class=\"page\" title=\"Page 169\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Prerequisites of internal rotation of the head are as follows:</p>\n<div class=\"page\" title=\"Page 169\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Well-flexed head</li>\n<li>Efficient uterine contraction</li>\n<li>Favorable shape at mid-pelvic plane</li>\n<li>Tone of the levator ani muscles &nbsp;</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true regarding the internal rotation of the fetal head?",
    "choices": [
      {
        "id": 1,
        "text": "Occiput turns towards the transverse axis"
      },
      {
        "id": 2,
        "text": "Rotation is not essential when the fetus is unusually small"
      },
      {
        "id": 3,
        "text": "Internal rotation is followed by external rotation"
      },
      {
        "id": 4,
        "text": "Rotation is earlier in primigravida than in multigravida"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<div class=\"page\" title=\"Page 169\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Internal rotation is <strong>not essential</strong> in the completion of labor\u00a0when the <strong>fetus is unusually small.</strong></p>\n<p>Internal rotation<strong>\u00a0</strong>begins with the occiput turning <strong>away</strong> from the transverse axis. In majority,\u00a0internal rotation is completed by the time the head reaches the pelvic floor. Internal rotation is followed by <strong>extension</strong> of the head, which is then followed by external rotation.</p>\n<p><strong>Rotation</strong>\u00a0occurs earlier in <strong>multigravida</strong> than primigravida whereas <strong>engagement</strong>\u00a0occurs earlier in <strong>primigravida</strong> than multigravida.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the minimum rate of cervical dilatation in primigravida during active labour?",
    "choices": [
      {
        "id": 1,
        "text": "1.5 cm/hr"
      },
      {
        "id": 2,
        "text": "1.2 cm/hr"
      },
      {
        "id": 3,
        "text": "1.7 cm/hr"
      },
      {
        "id": 4,
        "text": "2 cm/hr"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>During active labor, the minimal rate of cervical dilatation in primigravida is <strong>1.2 cm/hr.</strong></p>\n<p><strong>First stage</strong> of labour is divided into 2 phases:</p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align: left;\"><strong>Latent phase</strong></td>\n<td style=\"text-align: left;\"><strong>Active phase</strong></td>\n</tr>\n<tr>\n<td>The onset of true labor pain up to 6 cm cervical dilatation</td>\n<td>Starts from&nbsp;&ge; 6 cm cervical dilatation with regular uterine contractions</td>\n</tr>\n<tr>\n<td>\n<p>Duration:</p>\n<p><strong>12 h&nbsp;(nullipara)</strong><br /><strong>8 h (multipara)</strong></p>\n</td>\n<td>\n<p>The minimum rate of cervical dilatation:</p>\n<p><strong>1.2 cm/h (nullipara)</strong><br /><strong>1.5 cm/h (multipara)</strong></p>\n</td>\n</tr>\n<tr>\n<td>Concerned with cervical <strong>effacement</strong></td>\n<td>Concerned with cervical <strong>dilatation</strong></td>\n</tr>\n</tbody>\n</table>\n<p>The cervical dilatation ranges from a minimal rate of 1.2 cm - 6.8 cm/hr in nullipara. Also, the multiparas progress faster in the active phase of labor with a minimal dilatation rate of 1.5 cm/hr.</p>\n<p><strong>Friedman curve&nbsp;</strong>is the sigmoid curve plotting the pattern of cervical dilatation during the latent and active phase of normal labour.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/502fcb0e770742ac9eac4e8ef6748cd1x1280x1257.JPEG"
    ]
  },
  {
    "text": "Which of the following is part of the WHO guidelines for the management of second stage of labor?",
    "choices": [
      {
        "id": 1,
        "text": "Do a routine episiotomy"
      },
      {
        "id": 2,
        "text": "Manual support to perineum to maintain flexion of head"
      },
      {
        "id": 3,
        "text": "Never give warm compress to the perineum"
      },
      {
        "id": 4,
        "text": "Perform labor in lithotomy position"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The practice of <strong>guarding the perineum </strong>during delivery of the fetal head is part of the&nbsp;<strong>WHO management guidelines</strong> for the second stage of labor.</p>\n<p>The fingers of one hand support the perineum, while the second hand applies pressure to the fetal head to control the speed of crowning. The advantage of this is to prevent perineal tears.</p>\n<p>The second stage of labor begins with<strong> full dilatation of the cervix</strong> and ends with the <strong>delivery of the fetus.</strong></p>\n<p>The main events include the descent of the fetus (bearing down by the mother, uterine contractions), cardinal movements of labor, and delivery of the fetus.</p>\n<table style=\"width: 797px;\">\n<tbody>\n<tr>\n<td style=\"width: 268.891px;\">Second stage&nbsp;</td>\n<td style=\"width: 249.273px;\">Nulliparous&nbsp;</td>\n<td style=\"width: 236.445px;\">Multiparous&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 268.891px;\">Mean/average duration&nbsp;</td>\n<td style=\"width: 249.273px;\">50 minutes&nbsp;</td>\n<td style=\"width: 236.445px;\">30 minutes&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 268.891px;\">Maximum duration&nbsp;</td>\n<td style=\"width: 249.273px;\">2 hours (+1 with epidural)</td>\n<td style=\"width: 236.445px;\">1 hour (+1 with epidural)</td>\n</tr>\n<tr>\n<td style=\"width: 268.891px;\">WHO maximum duration of 2nd stage/diagnosis of arrest&nbsp;</td>\n<td style=\"width: 249.273px;\">3 hours&nbsp;</td>\n<td style=\"width: 236.445px;\">2 hours&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p>Management of the second stage of labor:</p>\n<ul>\n<li>The most common position used is the dorsal position with the hips flexed, knees flexed and abduction of the thighs. WHO recommends any position of choice including the <strong>upright position</strong>.&nbsp;</li>\n<li>WHO recommendations for the prevention of perineal tears include <strong>warm compresses to the perineum</strong>, <strong>perineal massage</strong>, <strong>guarding the perineum,</strong> and <strong>modified Ritgen's</strong> maneuver.</li>\n<li>Modified Ritgen's maneuver: A sterile towel or pad is held in one hand and placed over the perineum; the other hand applies gentle downward pressure on the occiput to promote flexion and controlled delivery of the head (ensuring the smallest diameter of the head passes through the outlet). Once the occiput is born&ndash;with gentle pressure, the head is extended&ndash;forehead, nose, and mouth are then delivered.</li>\n<li>WHO doesn't recommend fundal pressure and routine episiotomy.</li>\n</ul>\n<p>Other options:</p>\n<p>Option A:&nbsp;A liberal or <strong>routine episiotomy</strong> is <strong>discouraged</strong>. Episiotomy is indicated in cases of:</p>\n<ul>\n<li>Shoulder dystocia</li>\n<li>Breech delivery</li>\n<li>Fetal macrosomia</li>\n<li>Operative vaginal deliveries</li>\n<li>Persistent occiput posterior positions</li>\n</ul>\n<p>Option C:&nbsp;Manual techniques, such as massage or application of <strong>warm compresses</strong>, are <strong>recommended</strong> for healthy pregnant women requesting pain relief during labor.</p>\n<p>Option D: The position that is most comfortable to the mother i.e. <strong>upright/squatting position</strong> is encouraged. This position gives:</p>\n<ul>\n<li>less discomfort and difficulty in bearing down</li>\n<li>less labor pain</li>\n<li>less perineal/vaginal trauma and wound infections&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Modified Robson's classification class 1 includes:",
    "choices": [
      {
        "id": 1,
        "text": "Nulliparous, singleton, cephalic, induced labour"
      },
      {
        "id": 2,
        "text": "Nulliparous, singleton, cephalic, spontaneous labour"
      },
      {
        "id": 3,
        "text": "Multiparous without previous CS, spontaneous labour"
      },
      {
        "id": 4,
        "text": "Multiparous without previous CS, induced/CS before labour"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Class 1</strong> of modified Robson's classification includes <strong>nullipara</strong>, equal to or <strong>&gt;37</strong> weeks, <strong>single</strong>, <strong>cephalic,</strong> <strong>spontaneous labor</strong>.</p>\n<p>It is the most widely accepted classification system available for analyzing characteristics of delivering women worldwide.&nbsp;It consists of <strong>10 patient population</strong> categories.&nbsp;The basis for these categories include:&nbsp;</p>\n<ul>\n<li>Parity</li>\n<li>Onset of labor and mode of delivery</li>\n<li>Gestational age</li>\n<li>Fetal presentation&nbsp;</li>\n<li>No. of fetuses</li>\n</ul>\n<p>The <strong>modified Robson system</strong> classification is as follows:</p>\n<table style=\"height: 236px; width: 517px;\">\n<tbody>\n<tr style=\"height: 53px;\">\n<td style=\"width: 114.5px; height: 53px;\"><strong>Class 1</strong></td>\n<td style=\"width: 385.5px; height: 53px;\">Nullipara, equal to or &gt;37 weeks, single, cephalic, spontaneous labor</td>\n</tr>\n<tr style=\"height: 54px;\">\n<td style=\"width: 114.5px; height: 54px;\"><strong>Class 2</strong></td>\n<td style=\"width: 385.5px; height: 54px;\">\n<p>Nullipara, equal to or &gt;37 weeks, single, cephalic</p>\n<p>&nbsp;<strong>2a:</strong> induced labor&nbsp; <strong>2b:</strong> CS before labor</p>\n</td>\n</tr>\n<tr style=\"height: 56px;\">\n<td style=\"width: 114.5px; height: 56px;\"><strong>Class 3</strong></td>\n<td style=\"width: 385.5px; height: 56px;\">Multipara, equal to or &gt;37 weeks, single, cephalic, spontaneous labor (excludes previous CS)</td>\n</tr>\n<tr style=\"height: 54px;\">\n<td style=\"width: 114.5px; height: 54px;\"><strong>Class 4</strong></td>\n<td style=\"width: 385.5px; height: 54px;\">Multipara, equal to or &gt;37 weeks, single, cephalic&nbsp; &nbsp;<strong>4a:</strong> induced labor <strong>4b:</strong> CS before labor</td>\n</tr>\n<tr style=\"height: 49px;\">\n<td style=\"width: 114.5px; height: 49px;\"><strong>Class 5</strong></td>\n<td style=\"width: 385.5px; height: 49px;\">Multipara, previous CS, equal to or &gt;37 weeks, single, cephalic</td>\n</tr>\n<tr style=\"height: 49px;\">\n<td style=\"width: 114.5px; height: 49px;\"><strong>Class 6</strong></td>\n<td style=\"width: 385.5px; height: 49px;\">Nullipara, single, breech</td>\n</tr>\n<tr style=\"height: 50px;\">\n<td style=\"width: 114.5px; height: 50px;\"><strong>Class 7</strong></td>\n<td style=\"width: 385.5px; height: 50px;\">Multipara, single, breech (including previous CS)</td>\n</tr>\n<tr style=\"height: 48px;\">\n<td style=\"width: 114.5px; height: 48px;\"><strong>Class 8</strong></td>\n<td style=\"width: 385.5px; height: 48px;\">Multiple pregnancies (with or without previous CS)</td>\n</tr>\n<tr style=\"height: 55.5469px;\">\n<td style=\"width: 114.5px; height: 55.5469px;\"><strong>Class 9</strong></td>\n<td style=\"width: 385.5px; height: 55.5469px;\">Singleton pregnancy, oblique/transverse lie (with or without previous CS)</td>\n</tr>\n<tr style=\"height: 52px;\">\n<td style=\"width: 114.5px; height: 52px;\"><strong>Class 10</strong></td>\n<td style=\"width: 385.5px; height: 52px;\">&nbsp;Single, cephalic &lt;37 weeks (including previous CS)</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the fetal position in the given image.",
    "choices": [
      {
        "id": 1,
        "text": "Right occipito-posterior"
      },
      {
        "id": 2,
        "text": "Left occipito-anterior"
      },
      {
        "id": 3,
        "text": "Left occipito-posterior"
      },
      {
        "id": 4,
        "text": "Right occipito-anterior"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In the given vertex presentation, the fetal position is <strong>right occipitoanterior.</strong></p>\n<p><strong>Fetal position</strong> refers to the relation of the <strong>denominator </strong>(arbitrary <strong>bony</strong> fixed point on the presenting part), with respect to different <strong>quadrants</strong> of the maternal pelvis. In vertex presentation, the denominator is taken as the occiput (which is close to the triangular posterior fontanelle).</p>\n<p>To determine the fetal position the following two steps are followed:</p>\n<ol>\n<li>Determine the <strong>direction</strong> in which the occiput is facing:\n<ul>\n<li>Towards the pubic symphysis - <strong>occipito-anterior</strong></li>\n<li>Towards the sacral promontory - <strong>occipito-posterior</strong></li>\n<li>Midway between pubic symphysis and sacral promontory - <strong>occipito-transverse&nbsp;</strong></li>\n</ul>\n</li>\n<li>Determine if the occiput is facing the <strong>left</strong> or the <strong>right</strong> in relation to the materal pelvis</li>\n</ol>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/83f5f071364a43349a67fb91e84b3fa1.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8feae85a259d42049a433d013700e433x1280x1372.JPEG"
    ]
  },
  {
    "text": "Uterine contractions are palpable when its intensity is more than _____.",
    "choices": [
      {
        "id": 1,
        "text": "10 mm Hg"
      },
      {
        "id": 2,
        "text": "15 mmHg"
      },
      {
        "id": 3,
        "text": "20 mmHg"
      },
      {
        "id": 4,
        "text": "40 mmHg"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Uterine contractions are <strong>palpable</strong> when the intensity is <strong>&gt;10 mmHg. </strong></p>\n<p>Uterine contractions&nbsp;cause&nbsp;cervical dilatation at 15 mmHg and are painful beyond&nbsp;15 mmHg.</p>\n<table>\n<tbody>\n<tr>\n<td><strong>Stage of labour &nbsp; &nbsp;&nbsp;</strong></td>\n<td><strong>Pressure</strong></td>\n</tr>\n<tr>\n<td>1st</td>\n<td>40&ndash;50 mmHg</td>\n</tr>\n<tr>\n<td>2nd</td>\n<td>100&ndash;120 mmHg</td>\n</tr>\n<tr>\n<td>3rd</td>\n<td>100&ndash;120 mmHg</td>\n</tr>\n</tbody>\n</table>\n<p>Units for measuring the intensity of uterine contractions are mmHg and Montevideo units (MV).</p>\n<p>1 MV = intensity of uterine contractions x number of contractions in 10 min.</p>\n<p>During labour, normal uterine contractions are between <strong>190 and 300 MV</strong> and at the time of delivery, it is <strong>300 MV</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A primigravida presents to the labor room at 39 weeks of gestation. On examination, you notice the fetal head has appeared at the vulva. Which of the following maneuvers can be used to assist the delivery of the head?",
    "choices": [
      {
        "id": 1,
        "text": "Prague maneuver"
      },
      {
        "id": 2,
        "text": "Lovset's maneuver"
      },
      {
        "id": 3,
        "text": "Pinard's maneuver"
      },
      {
        "id": 4,
        "text": "Ritgen's maneuver"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Ritgen's maneuver</strong>&nbsp;is done for&nbsp;delivery of head in normal labor.</p>\n<p>This maneuver is done when the head distends the vulva and perineum enough to open the vaginal introitus to a diameter of &gt;5 cm. A towel is draped and a gloved hand may be used to exert forward pressure on the chin of the fetus through the perineum. The other hand exerts pressure superiorly against the occiput.</p>\n<p>This maneuver allows <strong>controlled delivery of the head</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e3c8be3d46524a1b816883680f594c09x600x654.JPEG"
    ]
  },
  {
    "text": "Which dermatome is pain in the early stage of labor limited to?",
    "choices": [
      {
        "id": 1,
        "text": "T10-L1"
      },
      {
        "id": 2,
        "text": "S1-S3"
      },
      {
        "id": 3,
        "text": "L4-L5"
      },
      {
        "id": 4,
        "text": "L2-L3"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Pain in the&nbsp;<strong>early stage of labor</strong> is limited to dermatomes&nbsp;<strong>T10-L1</strong>. This is of <strong>uterine</strong> origin.</p>\n<p>Pain in the&nbsp;<strong>late stage of labour</strong> is due to&nbsp;<strong>dilatation of cervix</strong> and perineal stretching. The nerves carrying the pain include <strong>S2,3,4.&nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young primigravida at 39 weeks of gestation presented to the casualty crying of intense abdominal pain. She was diagnosed to be in labour. Which of the following is not a characteristic of this pain?",
    "choices": [
      {
        "id": 1,
        "text": "Painful uterine contraction"
      },
      {
        "id": 2,
        "text": "Relieved by enema and sedatives"
      },
      {
        "id": 3,
        "text": "Formation of bag of waters"
      },
      {
        "id": 4,
        "text": "Progressive descent of presenting part"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>True labor pain is not relieved by enema and sedatives.</p>\n<p>It is characterized by the following:</p>\n<ul>\n<li><strong>Painful uterine contractions</strong> at regular intervals</li>\n<li>The frequency of contractions increases gradually</li>\n<li>The intensity and duration of contractions increase progressively</li>\n<li>Associated with 'show'- extrusion of the mucus plug that had previously filled the cervical canal during pregnancy</li>\n<li>Progressive effacement and dilatation of the cervix</li>\n<li><strong>Progressive descent </strong>of the <strong>presenting part</strong></li>\n<li>Formation of the <strong>'bag of forewaters'</strong> i.e.,<strong>&nbsp;</strong>bulging fluid-filled amniotic membrane presenting in front of the fetal head</li>\n<li>Not relieved by enema or sedatives</li>\n</ul>\n<table style=\"width: 595px;\">\n<tbody>\n<tr>\n<td style=\"width: 163.15625px;\"><strong>Features</strong></td>\n<td style=\"width: 211.84375px;\"><strong>True labour pains</strong></td>\n<td style=\"width: 207px;\"><strong>False labour pains</strong></td>\n</tr>\n<tr>\n<td style=\"width: 163.15625px;\">Cervical dilatation and effacement</td>\n<td style=\"width: 211.84375px;\">Present</td>\n<td style=\"width: 207px;\">Absent</td>\n</tr>\n<tr>\n<td style=\"width: 163.15625px;\">Pain</td>\n<td style=\"width: 211.84375px;\">Lower abdomen and back, radiating to thighs</td>\n<td style=\"width: 207px;\">Lower abdomen only</td>\n</tr>\n<tr>\n<td style=\"width: 163.15625px;\">Show</td>\n<td style=\"width: 211.84375px;\">Present</td>\n<td style=\"width: 207px;\">Absent</td>\n</tr>\n<tr>\n<td style=\"width: 163.15625px;\">Bag of water</td>\n<td style=\"width: 211.84375px;\">Formed</td>\n<td style=\"width: 207px;\">Absent</td>\n</tr>\n<tr>\n<td style=\"width: 163.15625px;\">Relief with enema</td>\n<td style=\"width: 211.84375px;\">No</td>\n<td style=\"width: 207px;\">Yes</td>\n</tr>\n</tbody>\n</table>\n<p><strong>False labour pain</strong>&nbsp;is seen more in primigravidae than in parous women. It usually appears prior to the onset of true labor pain by 1 or 2 weeks in primigravidae and by a few days in multiparae.</p>\n<p>Such pains are probably due to stretching of the cervix and lower uterine segment with consequent irritation of the neighboring ganglia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You notice the gynecology resident administer the nerve block seen in the image before performing an episiotomy. Which nerve roots are blocked?",
    "choices": [
      {
        "id": 1,
        "text": "L1,2,3"
      },
      {
        "id": 2,
        "text": "L2,3"
      },
      {
        "id": 3,
        "text": "S2,3,4"
      },
      {
        "id": 4,
        "text": "L5,S1,S2"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The nerve roots blocked in&nbsp;<strong>pudendal nerve block</strong> are&nbsp;<strong>S2,3,4.&nbsp;</strong>It is blocked just above the tip of the&nbsp;<strong>ischial spine</strong> by piercing the&nbsp;<strong>sacrospinous ligament.</strong>&nbsp;</p>\n<p>Pudendal nerve block can be used for:</p>\n<ul>\n<li>Analgesia in the second stage of labor</li>\n<li>Episiotomy repair</li>\n<li>Pelvic floor relaxation for outlet instrument delivery</li>\n<li>Minor procedures of the lower vagina and perineum</li>\n<li>Perineal analgesia prior to application of vacuum/forceps</li>\n</ul>\n<p>Pudendal block does not impact the cervix or upper vagina. It is ineffective for pain relief associated with uterine manipulation such as manual extraction of the placenta.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a5944f1e6d8f487c84407b6b354747c5.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Paracervical block relieves pain from all except:",
    "choices": [
      {
        "id": 1,
        "text": "Cervix"
      },
      {
        "id": 2,
        "text": "Uterus"
      },
      {
        "id": 3,
        "text": "Lower third of vagina"
      },
      {
        "id": 4,
        "text": "Upper third of vagina"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Pain from the&nbsp;<strong>lower third of the vagina</strong> is relieved by <strong>pudendal block</strong>, not paracervical block.</p>\n<p>Paracervical block&nbsp;relieves the pain of <strong>uterine contractions </strong>and <strong>cervical dilatation.</strong>&nbsp;It also relieves pain from <strong>upper third of the vagina. </strong>It is not useful at the time of episiotomy as the lower part of the vagina is not anesthetized.</p>\n<p>Note:&nbsp;Paracervical block is no longer considered safe as it causes <strong>fetal bradycardia</strong>.&nbsp;<strong>Epidural analgesia</strong> is <strong>preferred</strong> when complete relief of pain is needed throughout labour.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are indications for early clamping of cord in a new born baby except:",
    "choices": [
      {
        "id": 1,
        "text": "Rh isoimmunization"
      },
      {
        "id": 2,
        "text": "Postdated pregnancy"
      },
      {
        "id": 3,
        "text": "Birth asphyxia"
      },
      {
        "id": 4,
        "text": "Maternal diabetes"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Postdated pregnancy is not an indication for early cord clamping.</p>\n<p><strong>Early cord clamping</strong> is indicated in:</p>\n<ul>\n<li>Birth asphyxia</li>\n<li>Rh isoimmunization</li>\n<li>Diabetic mother</li>\n</ul>\n<p>The benefits of <strong>delayed cord clamping</strong> for up to 60 seconds is an increase in total body iron stores, expand blood volume and a <strong>decrease in anemia</strong> incidence in the <strong>neonate.</strong></p>\n<p>On the other hand, delayed cord clamping can lead to a higher hemoglobin concentration, which increases risks for <strong>hyperbilirubinemia</strong> and extended hospitalization for neonatal phototherapy. Delayed cord clamping can also hinder timely neonatal resuscitation.</p>\n<p>According to <strong>AIIMS</strong> Protocols in Neonatology, in <strong>uncomplicated</strong> preterm birth, <strong>delayed cord clamping</strong> should be attempted. This is done for a minimum time of 60 seconds after delivery for preterm infants not requiring immediate resuscitation after birth. It states that DCC must be done even if the mother has an <strong>HIV</strong> infection.&nbsp;But as per the <strong>NACO</strong> guidelines,&nbsp;<strong>early cord clamping </strong>is<strong> advised</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a sign of placental separation in stage 3 of parturition of a pregnant woman?",
    "choices": [
      {
        "id": 1,
        "text": "Schroeder's sign"
      },
      {
        "id": 2,
        "text": "Shortening of cord"
      },
      {
        "id": 3,
        "text": "Suprapubic bulge"
      },
      {
        "id": 4,
        "text": "Kustner's sign"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Lengthening </strong>of the<strong> umbilical cord</strong> is seen in placental separation.</p>\n<p><strong>Signs of placental separation:</strong></p>\n<ul>\n<li>The uterus becomes globular, firm, and ballottable (earliest sign to appear)</li>\n<li><strong>Schroeder's sign -</strong>&nbsp;Slight rise of fundal height as the separated placenta comes down in the lower segment and uterus rests over it</li>\n<li>Slight <strong>suprapubic bulging</strong> due to separated placenta distending the lower segment.</li>\n<li><strong>Kustner's sign -&nbsp;</strong>On pushing, the uterus cephalad with a hand on the abdomen, the cord no longer recedes</li>\n<li>A sudden gush of blood</li>\n<li>Permanent lengthening of cord</li>\n</ul>\n<p>Note:&nbsp;<strong>Schroeder's ring</strong> is a constriction ring/contraction ring formed due to incoordinate uterine action.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false regarding the modified WHO partogram?",
    "choices": [
      {
        "id": 1,
        "text": "Right side of alert line indicates immediate referral to First Referral Unit (FRU)"
      },
      {
        "id": 2,
        "text": "Alert and action line are separated by a difference of 4 hours"
      },
      {
        "id": 3,
        "text": "Each small square in partogram is equal to 1 hour"
      },
      {
        "id": 4,
        "text": "Partograph recording should be started once the cervical dilatation reaches 4 cm"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Each <strong>small square</strong> in a&nbsp;<strong>modified WHO partogram</strong> is equal to <strong>30 minutes.&nbsp;</strong>Each small square in a&nbsp;<strong>composite </strong>WHO partogram is equal to <strong>1 hour.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the following instrument commonly used in obstetrics.",
    "choices": [
      {
        "id": 1,
        "text": "Mayo scissors"
      },
      {
        "id": 2,
        "text": "Curved scissors"
      },
      {
        "id": 3,
        "text": "Suture remover"
      },
      {
        "id": 4,
        "text": "Episiotomy scissors"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The instrument given in the picture is<strong> episiotomy scissors.\u00a0</strong>The angulation in the scissor is to prevent the extension of pelvic tears into the anal margins and obstetric anal sphincter injuries / complete perineal tears.</p>\n<p>Complications of episiotomy:\u00a0</p>\n<p>They can be immediate or remote.\u00a0</p>\n<p>Immediate complications include an extension of the incision into the rectum, vulval hematoma, wound dehiscence and injury to anal sphincter.\u00a0</p>\n<p>Remote complications include dyspareunia, chances of perineal lacerations in subsequent labor and scar endometriosis (rare).</p>\n<p>Mayo scissors are long and stout scissors. They can be blunt-tipped/pointed tip/straight or curved. Straight mayo scissors are designed for cutting body tissues near the surface of a wound. They are also used to cut sutures and are also known as suture-cutting scissors.</p>\n<p>Curved mayo scissors allow much deeper penetration into the wound and are used to cut thick tissues such as those found in the uterus, muscles, breast, and foot. Mayo scissors used for dissection are placed in tissue with the tips closed. The scissors are then opened so that the tips open and spread out the tissue during the dissection process.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/71bad115c69b45bb9ed60112a70bf0a7.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/015134ab07b14d9eb884ed9294cdbe51x1200x916.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/abe30855adf844ca8d7ff8e9ee16f4e1x1280x753.JPEG"
    ]
  },
  {
    "text": "A nursing assistant posted in the obstetric care unit was asked to monitor the progress of labour. After how much dilatation of the cervix, should she start the documentation?",
    "choices": [
      {
        "id": 1,
        "text": "2cm"
      },
      {
        "id": 2,
        "text": "5cm"
      },
      {
        "id": 3,
        "text": "4cm"
      },
      {
        "id": 4,
        "text": "6cm"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The WHO Labour Care Guide <strong>begins</strong> the <strong>documentation</strong> of labour progression at <strong>5 cm </strong>of <strong>cervical dilatation</strong>.</p>\n<p>The WHO Labour Care Guide is a tool designed to help health personnel involved in labour care. It aims to\u00a0</p>\n<ul>\n<li>Guide the <strong>monitoring</strong> and help in the <strong>documentation</strong> of the progress of labour.</li>\n<li>Guide the health professionals to offer <strong>supportive</strong> <strong>care</strong> throughout labour.</li>\n<li>Assist doctors in promptly <strong>identifying</strong> and <strong>addressing</strong> emerging <strong>labour</strong> <strong>complications</strong>.</li>\n<li><strong>Prevent</strong> the use of <strong>unnecessary</strong> <strong>interventions</strong> in labour.</li>\n<li>Support <strong>audits</strong> and <strong>quality</strong> <strong>improvement</strong>.</li>\n</ul>\n<p>The differences between the WHO-modified partograph and the <strong>latest WHO Labour Care Guide </strong>are tabulated below:\u00a0</p>\n<table style=\"height: 260px;\" width=\"669\">\n<tbody>\n<tr style=\"height: 39px;\">\n<td style=\"width: 326.5px; height: 39px; text-align: center;\"><strong>WHO modified partograph</strong></td>\n<td style=\"width: 326.5px; height: 39px; text-align: center;\"><strong>WHO Labour Care Guide</strong></td>\n</tr>\n<tr style=\"height: 86px;\">\n<td style=\"width: 326.5px; height: 86px;\">Documentation of labour progression begins at <strong>4 cm</strong> of cervical dilatation.</td>\n<td style=\"width: 326.5px; height: 86px;\">Documentation of labour progression begins at <strong>5 cm</strong> of cervical dilatation.</td>\n</tr>\n<tr style=\"height: 95px;\">\n<td style=\"width: 326.5px; height: 95px;\">Fixed <strong>1 cm/hour \u2018alert\u2019 and \u2018action\u2019</strong> lines</td>\n<td style=\"width: 326.5px; height: 95px;\"><strong>Time-based cut-offs</strong> for <strong>each centimetre</strong> of cervical dilatation to guide the obstetrician to take action. For example, at 5 cm of cervical dilatation, if there is no progress &gt;6 hours, action needs to be taken.</td>\n</tr>\n<tr style=\"height: 87px;\">\n<td style=\"width: 326.5px; height: 87px;\">Monitoring of labour is restricted to the <strong>first stage</strong> only.</td>\n<td style=\"width: 326.5px; height: 87px;\">Monitoring of <strong>the second stage of labour</strong> is included</td>\n</tr>\n<tr style=\"height: 78px;\">\n<td style=\"width: 326.5px; height: 78px;\">No section on supportive care interventions</td>\n<td style=\"width: 326.5px; height: 78px;\">Addition of a section on <strong>supportive care</strong> of the mother- labour companionship, pain relief, oral fluid intake and posture</td>\n</tr>\n<tr style=\"height: 78px;\">\n<td style=\"width: 326.5px; height: 78px;\">Documentation of <strong>strength, duration, and frequency</strong> of uterine contractions</td>\n<td style=\"width: 326.5px; height: 78px;\">Documentation of <strong>only</strong> the <strong>duration and frequency of uterine contractions</strong></td>\n</tr>\n</tbody>\n</table>\n<p><strong>Note</strong>: Previously the answer to the question was 4 cm (according to the modified WHO patograph). However, this information is outdated, therefore the answer to this question has been revised per the latest WHO guidelines.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/719c60870fc947ccaf5225fb3f2ffd2bx724x1024.JPEG"
    ]
  }
];
        let quizName = '10 Normal Labour';
        let hierarchy = ["Marrow", "qBank", "Obstetrics & Gynecology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>