<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obg St 3 (From Q-Bank) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Of the following statements regarding the division of labor on basis of dilatation and descent curves all are true except",
    "choices": [
      {
        "id": 1,
        "text": "Preparatory division includes latent and acceleration phases"
      },
      {
        "id": 2,
        "text": "Dilatational division is unafected by sedation"
      },
      {
        "id": 3,
        "text": "Dilatational division includes acceleration phase"
      },
      {
        "id": 4,
        "text": "Pelvic division encompasses both deceleration phase and second stage of labor"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Dilatational division occupies phase of maximum slope. The acceleration phase is included in preparatory division.</p>\n<p>A scientific approach by <strong>Friedman (1954)</strong> described a characteristic <strong>sigmoid pattern for labor by graphing cervical dilatation against time.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1ecf286f5fd04815866ed8359c47c3c5x1280x1033.JPEG"
    ]
  },
  {
    "text": "Dysfunctional uterine bleeding is defined as a state of abnormal uterine bleeding without any clinically detectable ______",
    "choices": [
      {
        "id": 1,
        "text": "Organic cause"
      },
      {
        "id": 2,
        "text": "Systemic cause"
      },
      {
        "id": 3,
        "text": "Iatrogenic cause"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>DUB is defined as a state of <strong>abnormal uterine bleeding</strong> without any clinically detectable <strong>organic, systemic, and iatrogenic cause</strong> (Pelvic pathology, e.g., tumor, inflammation or pregnancy is excluded).</li>\n<li>In this case, hormonal imbalance is considered the root cause of hyperplasia of the endometrium that causes menorrhagia; this often happens in anovulatory cycles with excessive or unopposed influence of oestrogen on the endometrium.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false regarding uterine anatomy?",
    "choices": [
      {
        "id": 1,
        "text": "Round ligaments receive their blood supply from Sampson's artery"
      },
      {
        "id": 2,
        "text": "Transverse cervical ligaments are also called cardinal ligaments"
      },
      {
        "id": 3,
        "text": "Uterine innervation is by the pudendal nerve plexus"
      },
      {
        "id": 4,
        "text": "Lymphatic drainage is primarily to the obturator, internal and external iliac nodes."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The uterus is innervated by the fibers of\u00a0the <strong>uterovaginal plexus, </strong>also known as the\u00a0<strong>Frankenhauser ganglion.</strong></p>\n<p>Option A: Round ligaments receive their blood supply from <strong>Sampson's artery</strong>\u00a0which\u00a0represents the <strong>anastomosis</strong> of the <strong>uterine artery</strong> and <strong>ovarian artery</strong>.</p>\n<p>Option B: The cardinal ligaments are also called transverse cervical ligaments or <strong>Mackenrodt ligaments</strong>. They consist primarily of <strong>perivascular connective tissue</strong>. They attach to the posterolateral pelvic walls near the origin of the internal iliac artery and surround the vessels supplying the uterus and vagina.</p>\n<p>Option D: Lymphatic drainage of the uterus is primarily to the <strong>obturator</strong> and<strong> internal and external iliac nodes</strong>. One theory of endometriosis, states lymphatic spread as cause for seeding in the pelvis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young girl with McCune-Albright syndrome is noted to have precocious menstruation. This condition is defined as the occurrence of menstruation at____.",
    "choices": [
      {
        "id": 1,
        "text": "<8 years"
      },
      {
        "id": 2,
        "text": "<7 years"
      },
      {
        "id": 3,
        "text": "<10 years"
      },
      {
        "id": 4,
        "text": "<11 years"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Precocious menstruation</strong>&nbsp;refers to the occurrence of menstruation <strong>before</strong> the age of <strong>10 years</strong>.<strong>&nbsp;</strong></p>\n<p><strong>Precocious puberty</strong>&nbsp;in a girl is the appearance of any of the <strong>secondary sexual characteristics</strong> before the age of <strong>8 years</strong> or the occurrence of <strong>menarche</strong> before the age of <strong>10 years</strong>.</p>\n<p><strong>McCune Albright</strong> syndrome is&nbsp;associated with <strong>cafe-au-lait spots</strong>, <strong>precocious puberty</strong> (and precocious menstruation), and <strong>polyostotic fibrous dysplasia</strong> leading to&nbsp;recurrent fractures. The image given below shows cafe-au-lait spots.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1fb4d5d4b9a94208b076b5b4e2fca638x145x240.JPEG"
    ]
  },
  {
    "text": "In a patient diagnosed with PCOS, which of the following is not an indication for surgical management?",
    "choices": [
      {
        "id": 1,
        "text": "Ovarian hyperstimulation"
      },
      {
        "id": 2,
        "text": "Infertility"
      },
      {
        "id": 3,
        "text": "Previous pregnancy losses"
      },
      {
        "id": 4,
        "text": "Morbid obesity"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Surgical management is indicated in all the above conditions except for morbid obesity.</p>\n<p>Indications of surgery in PCOS include:</p>\n<ul>\n<li>Failed medical therapy</li>\n<li>Ovarian hyperstimulation</li>\n<li>Infertility</li>\n<li>Previous pregnancy losses</li>\n</ul>\n<p>Surgery comprises of&nbsp;<strong>laparoscopic drilling</strong> or puncture of not more than four cysts in each ovary. It is done<strong> using</strong> a&nbsp;<strong>laser</strong> or by <strong>unipolar</strong> <strong>electrocautery. </strong>It&nbsp;restores the endocrine milieu and improves fertility for a year or so. Thereafter, <strong>pelvic adhesions</strong> caused by surgery may again reduce the fertility rate. The formation of adhesions can be <strong>reduced by hydrofloatation</strong>.</p>\n<p>The <strong>advantages of surgery</strong> are as follows:&nbsp;</p>\n<ul>\n<li>Tubal testing with chromotubation can be performed simultaneously</li>\n<li>Other causes of infertility like endometriosis can be looked for</li>\n<li>One-time treatment</li>\n<li>Intense and prolonged monitoring for side effects is not required</li>\n<li>Cost-effective compared to IVF</li>\n<li>Reduces androgen and LH production</li>\n<li>Following surgery, single ovulation occurs with drugs, and hyperstimulation and multiple pregnancies are avoided</li>\n<li>Ovulation occurs in 80&ndash;90% and pregnancy in 60&ndash;70%</li>\n</ul>\n<p>The <strong>disadvantages of surgery</strong> are as follows:</p>\n<ul>\n<li>It involves giving anaesthesia and performing an invasive procedure like laparoscopy</li>\n<li>Adhesions may form postoperatively</li>\n<li>If cautery is used, premature ovarian failure due to destruction of ovarian tissue may be seen</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old woman with dyspareunia is diagnosed to have endometriosis. Which of the following drugs is not useful for her treatment?",
    "choices": [
      {
        "id": 1,
        "text": "Estrogen"
      },
      {
        "id": 2,
        "text": "Progesterone"
      },
      {
        "id": 3,
        "text": "Danazol"
      },
      {
        "id": 4,
        "text": "GnRH"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Estrogen is not used in the treatment of <strong>endometriosis</strong> as the condition is <strong>estrogen-dependent</strong>.</p>\n<p>For <strong>minimal disease,</strong> the drug of choice is <strong>NSAIDs. Oral contraceptive pills</strong> are given if associated menstrual complaints are present. OCPs inhibit gonadotropin release and decrease the menstrual flow.</p>\n<p>For <strong>moderate</strong> to <strong>severe</strong> disease, oral <strong>progestogens</strong> are the first drugs to be started. They are known to antagonize estrogenic effects on the endometrium causing endometrial atrophy. The drug of choice is <strong>GnRH agonists.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9b8855c72c1f4b3496542f08bb8c81aax1280x988.JPEG"
    ]
  },
  {
    "text": "A 46-year-old woman presented with heavy menstrual bleeding and dysmenorrhea. You suspect a diagnosis of submucous uterine fibroids. Which of the following investigations will help you confirm this?",
    "choices": [
      {
        "id": 1,
        "text": "2 and 3"
      },
      {
        "id": 2,
        "text": "1, 2 and 3"
      },
      {
        "id": 3,
        "text": "4 and 5"
      },
      {
        "id": 4,
        "text": "1, 2 and 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Investigations required to identify submucous fibroids include:</p>\n<ul>\n<li><strong>USG -&nbsp;most commonly</strong>&nbsp;done. Transvaginal USG is useful to assess the location, dimension, and associated adnexal pathology.</li>\n<li>MRI gives better soft tissue details but is not routinely done</li>\n<li><strong>Saline infusion sonography</strong> and hysteroscopy<strong> -&nbsp;</strong>help to visualise submucous fibroid more clearly</li>\n<li>Laparoscopy - If uterus &lt;12 weeks size and associated pelvic pain and infertility and to detect pelvic endometriosis and tubal pathology.</li>\n<li>Uterine curettage &ndash; A bump is felt in submucous fibroid during endometrial curettage. Dilatation and curettage is done in patients presenting with postmenopausal bleeding.</li>\n<li><strong>Hysterosalpingography</strong> &ndash; A filling defect is seen.</li>\n</ul>\n<p>CT<strong>&nbsp;</strong>abdomen is not very useful for the identification of submucous fibroids. These cannot be visualised on colposcopy either.</p>\n<p>The image below shows the <strong>ultrasonographic appearance</strong> of a <strong>submucous fibroid</strong> (asterisk):</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/742bfb1eeda44120b645d4f34b8f62f2x550x497.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8af0257787374ac4a546cce476c0fbe5x550x513.PNG"
    ]
  },
  {
    "text": "An adolescent girl was brought by her mother to the clinic with complaints of irregular periods and acne. A USG scan was performed which showed the following finding. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Polycystic ovarian disease"
      },
      {
        "id": 2,
        "text": "Theca lutein cysts"
      },
      {
        "id": 3,
        "text": "Congenital adrenal hyperplasia"
      },
      {
        "id": 4,
        "text": "Ovarian endometriosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical history and the <strong>neck&shy;lace</strong>&nbsp;<strong>appearance</strong> on ultrasound are suggestive of&nbsp;polycystic ovarian disease.</p>\n<p>The <strong>original Rotterdam consensus</strong> defined polycystic ovaries when &ge;<strong>12</strong>&nbsp;follicles were seen per ovary on USG. Each follicle should measure <strong>between 2 and 9 mm</strong>, and/or an ovarian volume should be &gt;10 ml. Due to improvement in imaging modalities since that time, the threshold for follicle number has now been raised to 20 per ovary.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/09e7cfcea5a9405dbde8a9bffc208ff4.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A diagnostic laparoscopy was performed on a 27-year-old woman with severe dysmenorrhoea and dyspareunia.  The following finding was seen on the pelvic peritoneum. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pelvic Inflammatory Disease"
      },
      {
        "id": 2,
        "text": "Adenomyosis"
      },
      {
        "id": 3,
        "text": "Fitz Hugh Curtis syndrome"
      },
      {
        "id": 4,
        "text": "Endometriosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical history and the image showing characteristic <strong>powder burn spots</strong>&nbsp;seen over the pelvic peritoneum on laparoscopy point toward a diagnosis of <strong>pelvic</strong>&nbsp;<strong>endometriosis.</strong></p>\n<p>On laparoscopy, the typical endometriotic lesions appear like small black, dark brown or bluish dots. These are called&nbsp;powder burns or <strong>gunshot appearance</strong> of the <strong>serosal surfaces</strong> of the <strong>peritoneum.</strong> They are nodules or small cysts containing <strong>old haemorrhages</strong> <strong>surrounded by</strong> a variable degree of <strong>fibrosis</strong>.</p>\n<p><strong>Subtle appearances of endometriosis</strong> seen on laparoscopy are:</p>\n<ul>\n<li>Red flame-shaped areas</li>\n<li>Red polypoid areas</li>\n<li>Yellow-brown patches</li>\n<li>White peritoneal plaques or scarring</li>\n<li>Peritoneal defects - known as Allen Masters Syndrome</li>\n<li>Subovarian adhesions.</li>\n</ul>\n<p>The lesions mentioned above are thought to be more active than the powder burn areas.</p>\n<p>Endometriotic lesions in the <strong>peritoneal cavity</strong> contain yellowish-brown fluid. This <strong>fluid contains prostaglandins</strong> that are <strong>responsible for</strong> the <strong>pain</strong> associated with this condition. Endometriosis of the <strong>ovary</strong> leads to formation of the <strong>chocolate cyst</strong>&nbsp;which is a true cyst with columnar epithelium lining.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8a40cc26afb4430f9393f16b3b583210.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2c1b19d3960c44bebf6cf9888b709d1dx1280x1071.JPEG"
    ]
  },
  {
    "text": "When does red degeneration of fibroids most commonly occur?",
    "choices": [
      {
        "id": 1,
        "text": "First trimester of pregnancy"
      },
      {
        "id": 2,
        "text": "Second trimester of pregnancy"
      },
      {
        "id": 3,
        "text": "Third trimester of pregnancy"
      },
      {
        "id": 4,
        "text": "Puerperium"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Red/carneous degeneration occurs most commonly during the <strong>second trimester</strong> of pregnancy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The laparoscopy report of a woman with pelvic inflammatory disease states she has Gainesville stage III PID. Which of the following presentations could have been seen in her?",
    "choices": [
      {
        "id": 1,
        "text": "3 and 5"
      },
      {
        "id": 2,
        "text": "3 and 4"
      },
      {
        "id": 3,
        "text": "1 and 2"
      },
      {
        "id": 4,
        "text": "1 and 4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Gainesville<strong>&nbsp;stage III</strong> includes two forms of PID - acute salpingitis with superimposed <strong>tubal occlusion</strong> or <strong>tubo-ovarian complex</strong>.</p>\n<p><strong>Gainesville</strong> has described the <strong>stages</strong> of PID depending upon the <strong>severity</strong> of <strong>tubal damage </strong>as follows:</p>\n<table style=\"height: 400px; width: 511.688px;\">\n<tbody>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 167px;\">\n<p>Stage</p>\n</td>\n<td style=\"height: 46px; width: 326.688px;\">\n<p>Condition&nbsp;</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 167px;\">\n<p>Stage I&nbsp;</p>\n</td>\n<td style=\"height: 46px; width: 326.688px;\">\n<p>Acute salpingitis without peritonitis - no adhesions&nbsp;</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 167px;\">\n<p>Stage II&nbsp;</p>\n</td>\n<td style=\"height: 46px; width: 326.688px;\">\n<p>Acute salpingitis with peritonitis - purulent discharge&nbsp;&nbsp;</p>\n</td>\n</tr>\n<tr style=\"height: 54.7604px;\">\n<td style=\"height: 54.7604px; width: 167px;\">\n<p>Stage III</p>\n</td>\n<td style=\"height: 54.7604px; width: 326.688px;\">\n<p>Acute salpingitis with superimposed tubal occlusion or tubo-ovarian complex&nbsp;</p>\n</td>\n</tr>\n<tr style=\"height: 51px;\">\n<td style=\"width: 167px; height: 51px;\">\n<p>Stage IV</p>\n</td>\n<td style=\"height: 51px; width: 326.688px;\">\n<p>Ruptured tubo-ovarian abscess&nbsp;</p>\n</td>\n</tr>\n<tr style=\"height: 56px;\">\n<td style=\"height: 56px; width: 167px;\">\n<p>Stage V</p>\n</td>\n<td style=\"height: 56px; width: 326.688px;\">\n<p>Tubercular salpingitis&nbsp;&nbsp;</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following presentations is unlikely to be seen in a patient with gonorrhoea?",
    "choices": [
      {
        "id": 1,
        "text": "Intermenstrual bleeding"
      },
      {
        "id": 2,
        "text": "Vaginal discharge"
      },
      {
        "id": 3,
        "text": "Proctitis"
      },
      {
        "id": 4,
        "text": "Haematuria"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Haematuria is unlikely to be seen in a patient with gonorrhoea.</p>\n<p><strong>Gynaecological </strong>presentation&nbsp;of <strong>gonorrhoea</strong>&nbsp;is:</p>\n<ul>\n<li>Excessive vaginal discharge associated with pruritus and inflammation</li>\n<li>Acute unilateral pain and swelling over labia due to the involvement of Bartholin&rsquo;s gland</li>\n<li>Intermenstrual bleeding</li>\n</ul>\n<p><strong>Non-gynaecological</strong> presentation&nbsp;of <strong>gonorrhoea</strong>&nbsp;is:</p>\n<ul>\n<li>Pharyngeal infection</li>\n<li>Dysuria&nbsp;</li>\n<li>Rectal discomfort due to associated proctitis.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old nulliparous woman presents to you with primary infertility. On examination, stage 2 uterine prolapse is present. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Ring pessary"
      },
      {
        "id": 2,
        "text": "Fothergill\u2019s operation"
      },
      {
        "id": 3,
        "text": "Sling operation"
      },
      {
        "id": 4,
        "text": "Colpocleisis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Sling operations</strong> are recommended in cases of <strong>nulliparous prolapse</strong>, who wish to retain menstrual and child-bearing function</p>\n<p>Mackenrodt&rsquo;s and uterosacral ligaments of the uterus are strengthened, by using nylon or Dacron tapes as slings. Abdominal sling operations include:</p>\n<ul>\n<li><strong>Abdominal wall cervicopexy</strong> - cervical supports are fixed to the abdominal wall</li>\n<li><strong>Shirodkar&rsquo;s</strong> sling operation - cervix is fixed to the lumbosacral fascia using Mersilene tape</li>\n<li><strong>Khanna&rsquo;s</strong> abdominal sling operation - isthmus of the cervix is fixed to the anterior superior iliac spines. It is not done anymore due to the risk of periosteitis.&nbsp;</li>\n<li><strong>Virkud's</strong> sling operation -&nbsp;the tape is fixed from the isthmus and attached to the rectus compartment&nbsp;</li>\n<li><strong>Joshi's</strong> sling operation - the uterus is suspended from the pectineal ligaments.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 34-year-old G3P2L2 woman presents to the ER with hypotension, tachycardia, and severe abdominal pain. On examination, fetal parts are palpable in the abdomen. USG abdomen revealed a large uterine wall defect. What's the most common cause of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "C-section scar dehiscence"
      },
      {
        "id": 2,
        "text": "Obstructed labor"
      },
      {
        "id": 3,
        "text": "Blunt abdominal trauma"
      },
      {
        "id": 4,
        "text": "Prolonged induction of labor"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given case scenario is suggestive of <strong>uterine rupture</strong>. The most common cause&nbsp;is<strong> scar dehiscence</strong> due to a<strong> previous cesarean section</strong>. This can occur due to trial of labour after C-section, or due to spontaneous labor in a patient with previous C-section. Other causes of uterine rupture are:</p>\n<ul>\n<li><strong>Prolonged induction</strong> or augmentation of labor</li>\n<li><strong>Obstructed labor</strong></li>\n<li><strong>Blunt abdominal trauma</strong> during pregnancy</li>\n<li>Rupture of hematometra</li>\n<li>Rupture of pyometra&nbsp;</li>\n</ul>\n<p>&nbsp;Uterine rupture is managed as follows:</p>\n<ul>\n<li>Immediate cesarean section</li>\n<li>Depending upon the extent of rupture:\n<ul>\n<li>Subtotal hysterectomy</li>\n<li>Hysterectomy</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A P3L3 post-menopausal woman is diagnosed with type III genuine stress incontinence. Which of the following causes this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Pudendal nerve injury"
      },
      {
        "id": 2,
        "text": "Intrinsic sphincter deficiency"
      },
      {
        "id": 3,
        "text": "Urethral hypermobility"
      },
      {
        "id": 4,
        "text": "Loss of posterior urethrovesical angle"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Type III</strong> genuine stress incontinence (GSI) is due to <strong>intrinsic sphincter deficiency.</strong></p>\n<p><strong>Genuine stress incontinence&nbsp;</strong>is the <strong>involuntary</strong> leakage of urine due to <strong>increased abdominal pressure</strong> in the <strong>absence</strong> of <strong>contraction</strong> of the <strong>detrusor</strong> muscle. It occurs when <strong>physical stress </strong>causes the bladder pressure to exceed the urethral pressure.</p>\n<p>GSI is classified into three types based on the mechanism of incontinence:</p>\n<table style=\"height: 126px; width: 496px;\">\n<tbody>\n<tr>\n<td style=\"width: 140.758px; text-align: center;\"><strong>Type of GSI</strong></td>\n<td style=\"width: 339.242px; text-align: center;\"><strong>Mechanism of incontinence</strong></td>\n</tr>\n<tr>\n<td style=\"width: 140.758px;\">Type I</td>\n<td style=\"width: 339.242px;\">Loss of posterior urethrovesical angle</td>\n</tr>\n<tr>\n<td style=\"width: 140.758px;\">Type II</td>\n<td style=\"width: 339.242px;\">\n<p>Loss of posterior urethrovesical angle</p>\n<p>Urethral hypermobility</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 140.758px;\">Type III</td>\n<td style=\"width: 339.242px;\">Intrinsic sphincter deficiency&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p>Genuine stress incontinence (GSI) can further be <strong>graded</strong> into <strong>three different severities</strong>:</p>\n<ul>\n<li>Grade 1 - Incontinence on severe stress, such as coughing, sneezing, or jogging</li>\n<li>Grade 2 - Incontinence on moderate stress such as walking fast or climbing stairs</li>\n<li>Grade 3 - Incontinence on mild stress, such as on standing</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false about the Miller-Kurzrok test?",
    "choices": [
      {
        "id": 1,
        "text": "Penetration of > 3 cm at 30 minutes is considered normal"
      },
      {
        "id": 2,
        "text": "Cervical mucus is placed alongside husband's semen on a glass slide"
      },
      {
        "id": 3,
        "text": "It is done at the time of ovulation"
      },
      {
        "id": 4,
        "text": "Jerky motility of sperm is considered normal"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In the Miller&ndash;Kurzrok test, sperm acquiring<strong> jerky motility</strong> after penetrating cervical mucus&nbsp;is considered<strong> abnormal</strong>.</p>\n<p>The <strong>Miller-Kurzrok test</strong> is a special test done in semen analysis to <strong>diagnose</strong> the <strong>cause of infertility</strong>. It is an in vitro test of sperm&ndash;mucus interaction.</p>\n<p>It is based on the basic principle that a normal cervical mucus permits invasion by motile sperms. It is <strong>done at</strong> the time of <strong>ovulation</strong>. The test consists of placing <strong>cervical mucus</strong> on a glass slide <strong>alongside</strong> the specimen of the husband's <strong>semen</strong> and studying the penetration of sperms under the microscope. The<strong> penetration</strong> of sperm <strong>&gt; 3 cm</strong> into the mucus at <strong>30 minutes</strong> is considered <strong>normal</strong>.</p>\n<p>Other special tests in semen analysis include:</p>\n<ul>\n<li>Sperm penetration test</li>\n<li>Semen&ndash;cervical mucus contact test</li>\n<li>Postcoital test (Sims&rsquo; or Huhner&rsquo;s test)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Radiotherapy is indicated in vulval cancer stage",
    "choices": [
      {
        "id": 1,
        "text": "1 node - ve"
      },
      {
        "id": 2,
        "text": "2 node \u2013 ve"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "Both 2 & 3"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Radiotherapy is indicated in <strong>stage 1 node +ve, 2 node +ve, 3 &amp; 4</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common type of vaginal cancer likely to be seen in a woman with a history of intrauterine di-ethyl stilbesterol exposure?",
    "choices": [
      {
        "id": 1,
        "text": "Squamous cell carcinoma"
      },
      {
        "id": 2,
        "text": "Melanoma"
      },
      {
        "id": 3,
        "text": "Clear cell adenocarcinoma"
      },
      {
        "id": 4,
        "text": "Fibrosarcoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Clear cell adenocarcinoma of the vagina</strong> is commonly seen in adoloscent girls with a history of <strong>intrauterine&nbsp;DES exposure</strong>.&nbsp;</p>\n<p>It involves the upper third of the anterior vaginal wall.&nbsp;<strong>Radical hysterectomy, vaginectomy </strong>with <strong>pelvic lymphadenectomy</strong> is the treatment of choice.&nbsp;</p>\n<p>The most common lesion due to DES exposure is vaginal adenosis&nbsp;and not clear cell adenocarcinoma. It is a benign condition.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following is the mainstay of treatment in a patient diagnosed with Stage III endometrial cancer?",
    "choices": [
      {
        "id": 1,
        "text": "Surgery"
      },
      {
        "id": 2,
        "text": "Chemotherapy"
      },
      {
        "id": 3,
        "text": "External beam radiotherapy"
      },
      {
        "id": 4,
        "text": "Brachytherapy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Chemotherapy</strong> is\u00a0the mainstay of treatment in <strong>Stage III endometrial cancer</strong>.</p>\n<p>In order to stage carcinoma endometrium, total abdominal hysterectomy with bilateral salpingo-oophorectomy and lymphadenectomy is done (surgical staging).\u00a0</p>\n<p>Thus the management, once staging is done, is mainly postoperative.\u00a0Up to <strong>stage II</strong>, <strong>radiotherapy</strong> can be given.\u00a0Stages <strong>III &amp; IV</strong>\u00a0are managed by chemotherapy such as <strong>doxorubicin, cisplatin,</strong>\u00a0and<strong> paclitaxel.</strong></p>\n<p>Note: <strong>Stage III</strong> is said to be inoperable but <strong>debulking surgery</strong> is sometimes attempted. However, the mainstay of treatment for stage III disease remains chemotherapy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The instrument shown in the image is used to take sample from _______",
    "choices": [
      {
        "id": 1,
        "text": "Cervix"
      },
      {
        "id": 2,
        "text": "Ectocervix"
      },
      {
        "id": 3,
        "text": "Endocervix"
      },
      {
        "id": 4,
        "text": "Both b & c"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image is of cytobrush &ndash; to take samples from endocervix.</p>\n<p>(Ayre&rsquo;s spatula &ndash; to take samples from squamocolumnar junction.)</p>\n<p>Note:</p>\n<p>For hormonal study, sample is taken from the lateral wall of vagina.</p>\n<p>For cytological study, sample is taken from the posterior wall of vagina.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/89d6e55d60b6423eb9d8ee3022ba109e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/afc3884d2049461bbe18fc44000f4240x1280x960.JPEG"
    ]
  },
  {
    "text": "Which among the following is not a feature of modified radical hysterectomy ?",
    "choices": [
      {
        "id": 1,
        "text": "Medial half of Macenrodt remove"
      },
      {
        "id": 2,
        "text": "Medial half of uterosacral removed"
      },
      {
        "id": 3,
        "text": "Clinically palpable lymph node removed"
      },
      {
        "id": 4,
        "text": "Upper 4cm of vagina removed"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>In <strong>modified radical hysterectomy (Type 2) upper 2cm of vagina</strong> is removed.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 22-year-old woman at 14 weeks of gestation was rushed to the ER with complaints of severe abdominal pain, nausea, and vomiting. USG showed an edematous right ovary with a large cyst and disruption in adnexal flow on Doppler. Which of the following most commonly leads to this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Dysgerminoma"
      },
      {
        "id": 2,
        "text": "Teratoma"
      },
      {
        "id": 3,
        "text": "Thecoma"
      },
      {
        "id": 4,
        "text": "Theca lutein cyst"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above scenario is suggestive of <strong>ovarian torsion</strong>. Mature cystic&nbsp;<strong>teratoma</strong> (dermoid cyst) is the <strong>commonest</strong> tumor to undergo<strong> torsion</strong>, especially at the end of the 1st trimester or during puerperium.</p>\n<p>Management includes <strong>derotation</strong>&nbsp;and <strong>cystectomy</strong>&nbsp;in pregnancy irrespective of gestational age. This is also done in non-pregnant women of reproductive age to preserve ovarian function. Resection is reserved for patients in whom malignancy is suspected.</p>\n<p>Dermoid cyst is the <strong>most common germ cell tumor.</strong>&nbsp;It is also the most common benign tumor of the ovary in the reproductive age group and in pregnancy.&nbsp;It is bilateral in 10-15% of cases.&nbsp;</p>\n<p>Dermoid cyst is derived from all three germ cell layers, but&nbsp;<strong>ectodermal derivatives </strong>are most<strong> common.&nbsp;</strong><strong>Rokitansky&rsquo;s protuberance</strong> is the most common site for the development of malignancy. It is seen as a projection covered by skin, sebaceous glands, sweat glands, teeth, and bones. Sometimes <strong>thyroid tissue</strong> can be seen on histopathological examination, known as <strong>struma ovarii.</strong></p>\n<p>The image below&nbsp;shows a dermoid cyst with Rokitansky protuberance.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/46516e2afcb1420190b8cb2c5a22978cx1280x1266.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b2f061aefbd046d3bdfbba086eb5fccex720x430.JPEG"
    ]
  },
  {
    "text": "Staging laparotomy was performed in a teenage girl who presented with an adnexal mass. Histopathological examination showed the following. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Mucinous cystadenoma"
      },
      {
        "id": 2,
        "text": "Krukenberg tumor"
      },
      {
        "id": 3,
        "text": "Endodermal sinus tumor"
      },
      {
        "id": 4,
        "text": "Dysgerminoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given histopathological image shows <strong>Schiller-Duval bodies. </strong>It is suggestive of a <strong>yolk sac tumor </strong>(endodermal sinus tumor).</p>\n<p>It is an <strong>aggressive malignant germ cell tumor</strong> of the ovaries. It occurs in ovaries or testes and sacrococcygeal areas in young children. It is usually unilateral.&nbsp;These tumors are usually associated with <strong>raised AFP</strong> and <strong>alpha 1 antitrypsin</strong>.</p>\n<p>The image below depicts&nbsp;Schiller-Duval bodies.&nbsp;It consists of a central capillary surrounded by tumor cells, present within a cystic space that may be lined by flat to cuboidal tumor cells.&nbsp;50% of yolk sac tumors have Schiller-Duval bodies and they are pathognomonic when present.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3b4be9f8598d4e5cb31557695edb54fd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a666235f32b94d6d935b2fbc9c80eeb6x969x994.JPEG"
    ]
  },
  {
    "text": "Which of the following is a prerequisite for internal rotation of the fetal head for a woman in labor?",
    "choices": [
      {
        "id": 1,
        "text": "Straightening of fetal body"
      },
      {
        "id": 2,
        "text": "Tone of transversus abdominis"
      },
      {
        "id": 3,
        "text": "Well-extended head"
      },
      {
        "id": 4,
        "text": "Tone of levator ani muscles"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>tone of levator ani</strong> muscles is a prerequisite for <strong>internal rotation</strong> of the head.</p>\n<div class=\"page\" title=\"Page 169\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Prerequisites of internal rotation of the head are as follows:</p>\n<div class=\"page\" title=\"Page 169\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Well-flexed head</li>\n<li>Efficient uterine contraction</li>\n<li>Favorable shape at mid-pelvic plane</li>\n<li>Tone of the levator ani muscles &nbsp;</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "T sign is seen in _______",
    "choices": [
      {
        "id": 1,
        "text": "Monochorionic monoamniotic"
      },
      {
        "id": 2,
        "text": "Dichorionic diamniotic"
      },
      {
        "id": 3,
        "text": "Monochorionic diamniotic"
      },
      {
        "id": 4,
        "text": "Both B and C"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>T sign is seen in a&nbsp;<strong>monochorionic diamniotic pregnancy.</strong></p>\n<p>It helps<strong>&nbsp;</strong>to differentiate between monochorionic and dichorionic pregnancies. While <strong>T sign</strong> is seen in&nbsp;<strong>monochorionic diamniotic pregnancy</strong>, <strong>Lambda sign</strong> is seen in <strong>dichorionic diamniotic pregnancy</strong>.</p>\n<p>Monochorionic diamniotic pregnancies have a dividing membrane that is <strong>thin (less than 2 mm) </strong>and formed by amnions of each twin<strong>.</strong>&nbsp;A &ldquo;T&rdquo; is formed at the point at which amnions meet the placenta. It may not be seen until the second trimester.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/f62ddee0e58e4f76951e3e00b4c1fce1x932x262.JPEG"
    ]
  },
  {
    "text": "According to Priscilla White's classification for diabetes in pregnancy, all of the following classes should be managed with insulin except ______",
    "choices": [
      {
        "id": 1,
        "text": "B"
      },
      {
        "id": 2,
        "text": "H"
      },
      {
        "id": 3,
        "text": "A1"
      },
      {
        "id": 4,
        "text": "F"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Class A1 </strong>is managed by<strong> diet therapy</strong>. Other than A1,<strong>&nbsp;all the other&nbsp;classes</strong> are managed by <strong>insulin therapy</strong>.</p>\n<p>Priscilla White's classification for diabetes in pregnancy is not used anymore. It was modified by the American College of Obstetricians and Gynaecologists in 1986.</p>\n<table>\n<tbody>\n<tr>\n<td>Class</td>\n<td>Description</td>\n</tr>\n<tr>\n<td colspan=\"2\">Gestational Diabetes Mellitus</td>\n</tr>\n<tr>\n<td>A1</td>\n<td>Diet-controlled GDM</td>\n</tr>\n<tr>\n<td>A2</td>\n<td>Insulin-controlled GDM</td>\n</tr>\n<tr>\n<td colspan=\"2\">Diabetes Mellitus</td>\n</tr>\n<tr>\n<td>B</td>\n<td>Onset &gt;20y<br />Duration &lt;10y</td>\n</tr>\n<tr>\n<td>C</td>\n<td>Onset 10-19y<br />Duration 10-19y</td>\n</tr>\n<tr>\n<td>D</td>\n<td>Onset &lt;10y<br />Duration &gt;20y<br />Benign retinopathy</td>\n</tr>\n<tr>\n<td>F</td>\n<td>Nephropathy</td>\n</tr>\n<tr>\n<td>R</td>\n<td>Proliferative retinopathy</td>\n</tr>\n<tr>\n<td>H</td>\n<td>Heart disease</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "During clinical pelvimetry, the obstetrician determines the diagonal conjugate to be X cm. What is the obstetric conjugate?",
    "choices": [
      {
        "id": 1,
        "text": "X+1 cm"
      },
      {
        "id": 2,
        "text": "X+2 cm"
      },
      {
        "id": 3,
        "text": "X-1 cm"
      },
      {
        "id": 4,
        "text": "X-2 cm"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The obstetric conjugate is <strong>X</strong><strong>-2cm</strong> where X is the diagonal conjugate.</p>\n<p>Anteroposterior diameters of the pelvis:</p>\n<ul>\n<li><strong>True conjugate</strong> or the anteroposterior diameter, extends from the upper most margin of the symphysis pubis to the sacral promontory. It is normally<strong> 11 cm</strong>.</li>\n<li><strong>Obstetrical conjugate</strong> is the shortest distance between the sacral promontory and the symphysis pubis. It is normally 10 cm. It is estimated&nbsp;indirectly by <strong>subtracting 1.5&ndash;2 cm from </strong>the <strong>diagonal conjugate.</strong></li>\n<li><strong>Diagonal conjugate</strong>&nbsp;is determined by measuring the distance from the lowest margin of the symphysis to the sacral promontory. It is normally <strong>12cm</strong>. It is <strong>measured clinically</strong>.&nbsp;</li>\n</ul>\n<div class=\"page\" title=\"Page 51\">&nbsp;</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d3a7a1e2dcee4c87a3b08d40b3d035e6x1280x1321.JPEG"
    ]
  },
  {
    "text": "A 30-year-old G3P2 woman was admitted to the ward at 40 weeks of gestation for induction of labor. You were asked to calculate her Bishop's score. What should be the minimum score before performing this procedure?",
    "choices": [
      {
        "id": 1,
        "text": "3"
      },
      {
        "id": 2,
        "text": "5"
      },
      {
        "id": 3,
        "text": "6"
      },
      {
        "id": 4,
        "text": "8"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>minimum</strong> <strong>Bishop</strong> <strong>Score</strong> required before proceeding with induction of labour is <strong>6</strong>.</p>\n<p>A Bishop score &gt;8 conveys a high likelihood of a successful induction. The latest guidelines state that a cut-off score of 6 can be used to choose between pharmacological and mechanical methods of induction.</p>\n<p>This score\u00a0is calculated based on the:</p>\n<ul>\n<li>station of the fetal head</li>\n<li>dilation of cervix</li>\n<li>cervical\u00a0length</li>\n<li>position of cervix</li>\n<li>consistency of the cervix.</li>\n</ul>\n<div class=\"page\" title=\"Page 544\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 544\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>This score\u00a0is an important <strong>determinant</strong> of a <strong>successful induction</strong>.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following factors maximally increases the risk of tubal pregnancy?",
    "choices": [
      {
        "id": 1,
        "text": "Intrauterine device"
      },
      {
        "id": 2,
        "text": "Pelvic Inflammatory disease"
      },
      {
        "id": 3,
        "text": "Prior tubal surgery"
      },
      {
        "id": 4,
        "text": "Artificial reproductive technique"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Prior tubal surgery </strong>for ectopic pregnancy<strong>&nbsp;</strong>has the <strong>highest risk</strong> of tubal pregnancy among the given options.</p>\n<p>Risk factors for ectopic pregnancy:</p>\n<ul>\n<li>Prior ectopic pregnancy</li>\n<li><strong>Prior tubal surgery</strong> for ectopic, recanalization of tube post-sterilization</li>\n<li><strong>Pelvic inflammatory disease</strong> - <strong>most common</strong> cause for ectopic pregnancy</li>\n<li>Infertility</li>\n<li>Artificial reproductive therapy</li>\n<li>Endometriosis</li>\n<li>Smoking</li>\n<li>Maternal age &gt;40 years</li>\n<li>Contraceptive methods - intrauterine device, progesterone-only pills</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Abnormally high plasma hCG levels are found in all except",
    "choices": [
      {
        "id": 1,
        "text": "Twins"
      },
      {
        "id": 2,
        "text": "Down syndrome"
      },
      {
        "id": 3,
        "text": "Choriocarcinoma"
      },
      {
        "id": 4,
        "text": "Ectopic pregnancy"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In ectopic pregnancy, hCG levels are lower than normal.</p>\n<p><strong>Substantively high levels of hCG</strong> detected in:</p>\n<ul>\n<li>Multiple pregnancy</li>\n<li>Hydatidiform mole or choriocarcinoma and</li>\n<li>Pregnancy with a trisomy 21 fetus (Down&rsquo;s syndrome)</li>\n<li>Erythroblastosis fetalis associated with fetal hemolytic anemia</li>\n</ul>\n<p><strong>Relatively lower levels of hCG</strong> detected in:</p>\n<ul>\n<li>Ectopic pregnancies</li>\n<li>Spontaneous abortion</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following events in Rh-negative patients does not require Anti-D prophylaxis?",
    "choices": [
      {
        "id": 1,
        "text": "Miscarriage"
      },
      {
        "id": 2,
        "text": "Chorionic villi sampling"
      },
      {
        "id": 3,
        "text": "Amniocentesis"
      },
      {
        "id": 4,
        "text": "Postpartum hemorrhage"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Postpartum hemorrhage is not an indication of Anti-D prophylaxis.</p>\n<p><strong>Anti-D prophylaxis</strong> is administered to Rh-negative patients in the following circumstances:</p>\n<ul>\n<li>Pregnancy loss due to:\n<ul>\n<li>Ectopic pregnancy</li>\n<li>Spontaneous <strong>abortion</strong>/hydatiform mole</li>\n<li>Elective abortion</li>\n<li>Fetal death (any trimester)</li>\n</ul>\n</li>\n<li>Procedures:\n<ul>\n<li>Amniocentesis</li>\n<li><strong>Chorionic villus sampling</strong></li>\n<li>Fetal blood sampling</li>\n<li>External cephalic version</li>\n</ul>\n</li>\n<li>Delivery</li>\n<li>Trauma</li>\n<li>Placental abruption</li>\n<li>Unexplained vaginal bleeding during pregnancy</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which finding is most likely to be seen in a patient with pre-eclampsia?",
    "choices": [
      {
        "id": 1,
        "text": "Low uric acid level"
      },
      {
        "id": 2,
        "text": "Decreased GFR"
      },
      {
        "id": 3,
        "text": "Low serum creatinine level"
      },
      {
        "id": 4,
        "text": "High urinary calcium"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Decreased GFR</strong> is seen in pre-eclampsia.</p>\n<p>During normal pregnancy, renal blood flow and GFR are increased. However, in pre-eclampsia, <strong>renal blood flow</strong> and <strong>GFR decrease</strong>&nbsp;due to <strong>increased</strong> renal <strong>afferent arteriolar</strong> <strong>resistance</strong>.&nbsp;The hallmark renal lesion is <strong>glomerular endotheliosis</strong>.&nbsp;Diminished filtration causes serum <strong>creatinine levels</strong> and plasma <strong>uric acid</strong> concentration levels to <strong>rise</strong>. The elevation is also due to enhanced tubular reabsorption.</p>\n<p>The most common system involved in pre-eclampsia is the renal system.</p>\n<p>Several studies have demonstrated that pre-eclampsia is associated with <strong>low urinary calcium</strong>. This is often used as a predictive test.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Suitable cases for expectant management in case of placenta previa include all except:",
    "choices": [
      {
        "id": 1,
        "text": "Assured fetal well-being"
      },
      {
        "id": 2,
        "text": "Duration of pregnancy >37 weeks"
      },
      {
        "id": 3,
        "text": "Mother in good health"
      },
      {
        "id": 4,
        "text": "No active vaginal bleeding"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The duration of pregnancy must be <strong>less than 37 weeks </strong>for expectant management which was advocated&nbsp;by&nbsp;<strong>McAfee</strong>&nbsp;and <strong>Johnson.</strong>&nbsp;</p>\n<p>The <strong>aim</strong> of conservative management is to continue the pregnancy for fetal maturity without compromising maternal health.</p>\n<p><strong>Prerequisites:</strong></p>\n<ul>\n<li>Availability of blood for transfusion&nbsp;</li>\n<li>Facilities for cesarean section available&nbsp;</li>\n</ul>\n<p><strong>Selection</strong> of cases for expectant management for placenta&nbsp;previa:&nbsp;</p>\n<ol>\n<li>Mother is hemodynamically <strong>stable</strong> (Hb&nbsp;<span style=\"text-decoration: underline;\">&gt;</span>10 g% and/or hematocrit&nbsp;<span style=\"text-decoration: underline;\">&gt;&nbsp;</span>30%)&nbsp;</li>\n<li>Duration of pregnancy <strong>&lt;37 weeks</strong>&nbsp;</li>\n<li>No active vaginal bleeding&nbsp;</li>\n<li>Fetus normal on USG and reactive on CTG</li>\n</ol>\n<p><strong>Conduct</strong> of expectant treatment:&nbsp;</p>\n<ul>\n<li><strong>Corticosteroids</strong>&nbsp;for fetal lung maturity&nbsp;</li>\n<li>Bed rest or pelvic rest</li>\n<li>Periodic monitoring of mother for bleeding pv</li>\n<li>Fetal surveillance with USG&nbsp;&nbsp;</li>\n<li><strong>Tocolytics</strong> if contractions are present</li>\n<li><strong>Anti-D</strong> to all&nbsp;Rh-negative (unsensitized) women.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the normal pH of amniotic fluid?",
    "choices": [
      {
        "id": 1,
        "text": "8.1 - 8.7"
      },
      {
        "id": 2,
        "text": "7.1 - 7.3"
      },
      {
        "id": 3,
        "text": "6.1 - 6.3"
      },
      {
        "id": 4,
        "text": "6.5 - 6.9"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The normal pH of the amniotic fluid is <strong>7.1 - 7.3</strong></p>\n<p>The normal pH of the vaginal secretions is 4.5 - 5.5. In <strong>premature rupture</strong> of membranes (PROM), the pH of the vaginal secretions becomes<strong> 6 - 6.2</strong>&nbsp;as the amniotic fluid mixes with it. This forms the basis for nitrazine paper test.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following figure shows the transverse section of the uterus with an implanted zygote. Identify structure A.",
    "choices": [
      {
        "id": 1,
        "text": "Decidua basalis"
      },
      {
        "id": 2,
        "text": "Decidua parietalis"
      },
      {
        "id": 3,
        "text": "Decidua capsularis"
      },
      {
        "id": 4,
        "text": "Uterine cavity"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given image, the <strong>decidua basalis</strong> is marked as A. This part of the decidua forms the placenta.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d27b65eec19f48b09b0717b737083493.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/154b4879e8f849a0951968affa73c689x1280x1020.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e0e416fc1ec94ddb89d83ced476326a7x1280x813.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f49aef412d834055a26c8e026e177f72x1280x2202.JPEG"
    ]
  },
  {
    "text": "False regarding UTI in pregnancy",
    "choices": [
      {
        "id": 1,
        "text": "The prevalence of ASB is 5%"
      },
      {
        "id": 2,
        "text": "It is higher in people with sickle cell trait"
      },
      {
        "id": 3,
        "text": "The most common organism responsible is klebsiella"
      },
      {
        "id": 4,
        "text": "If ASB is not treated 25% of them will develop symptomatic infection"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Asymptomatic bacteriuria:</p>\n<ul>\n<li>Organisms that cause urinary infections are those from the normal perineal flora. the most common causative agent is <strong>E.coli</strong></li>\n<li>Prevalence during pregnancy: 2-7%</li>\n<li>Prevalence depends on parity (more in higher parity), race, socioeconomic status (more in low SES)</li>\n<li>More common in sickle cell anemia/trait, diabetics</li>\n<li>Definition: Presence of persistent, actively multiplying bacteria in the urinary tract in asymptomatic women. Clean voided specimen &gt;/= 10<sup>5</sup> organisms is diagnostic.</li>\n<li>If not treated ~25% develop symptomatic infection during pregnancy</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common chronic disease leading to anemia in pregnancy is ________",
    "choices": [
      {
        "id": 1,
        "text": "Chronic renal failure"
      },
      {
        "id": 2,
        "text": "Rheumatoid arthritis"
      },
      {
        "id": 3,
        "text": "Inflammatory Bowel Disease"
      },
      {
        "id": 4,
        "text": "Granulomatous infections"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Chronic renal insufficiency</strong> is the <strong>most common disorder</strong> encountered as a <strong>cause of anemia</strong> during <strong>pregnancy.</strong></p>\n<p><strong>Recombinant erythropoietin</strong> is used in treating\u00a0<strong>anaemia</strong> due to chronic renal failure.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The anatomical classification of the pelvis based on shape was given by ______.",
    "choices": [
      {
        "id": 1,
        "text": "Caldwell and Moloy"
      },
      {
        "id": 2,
        "text": "McAfee and Johnson"
      },
      {
        "id": 3,
        "text": "Page and Sher"
      },
      {
        "id": 4,
        "text": "Burns and Marshall"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The anatomical classification&nbsp;of the pelvis based on shape was given by&nbsp;<strong>Caldwell and Moloy.</strong></p>\n<p>The greatest transverse diameter of the pelvic inlet divides the pelvis into anterior and posterior segments. The shapes of these segments help classify the pelvis as follows:</p>\n<ul>\n<li>Gynecoid</li>\n<li>Anthropoid</li>\n<li>Android</li>\n<li>Platypelloid</li>\n</ul>\n<p>The various differences between these types is summarised below:</p>\n<table style=\"width: 928px; height: 475px;\">\n<tbody>\n<tr>\n<td style=\"width: 115.762px; text-align: center;\">&nbsp;</td>\n<td style=\"width: 166.27px; text-align: center;\"><strong>Gynecoid</strong>&nbsp;</td>\n<td style=\"width: 174.707px; text-align: center;\"><strong>Anthropoid</strong>&nbsp;</td>\n<td style=\"width: 204.141px; text-align: center;\"><strong>Android</strong>&nbsp;</td>\n<td style=\"width: 234.648px; text-align: center;\"><strong>Platypelloid</strong>&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 115.762px;\"><strong>Shape</strong>&nbsp;</td>\n<td style=\"width: 166.27px;\">Round&nbsp;</td>\n<td style=\"width: 174.707px;\">Anteroposteriorly oval&nbsp;</td>\n<td style=\"width: 204.141px;\">Triangular/ Heart-shaped&nbsp;</td>\n<td style=\"width: 234.648px;\">Transversely oval / Flat bowl shaped</td>\n</tr>\n<tr>\n<td style=\"width: 115.762px;\"><strong>Sacral angle</strong></td>\n<td style=\"width: 166.27px;\">&gt;90&deg;&nbsp;</td>\n<td style=\"width: 174.707px;\">&gt;90&deg;</td>\n<td style=\"width: 204.141px;\">&lt;90&deg;</td>\n<td style=\"width: 234.648px;\">&gt;90&deg;</td>\n</tr>\n<tr>\n<td style=\"width: 115.762px;\"><strong>Side walls</strong>&nbsp;</td>\n<td style=\"width: 166.27px;\">Straight or slightly divergent&nbsp;</td>\n<td style=\"width: 174.707px;\">Straight or divergent&nbsp;</td>\n<td style=\"width: 204.141px;\">Convergent&nbsp;</td>\n<td style=\"width: 234.648px;\">Divergent&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 115.762px;\"><strong>Ischial spines</strong>&nbsp;</td>\n<td style=\"width: 166.27px;\">Not prominent&nbsp;</td>\n<td style=\"width: 174.707px;\">Not prominent&nbsp;</td>\n<td style=\"width: 204.141px;\">Prominent&nbsp;</td>\n<td style=\"width: 234.648px;\">Not prominent&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 115.762px;\"><strong>Subpubic</strong> <strong>angle</strong> <strong>&nbsp;</strong></td>\n<td style=\"width: 166.27px;\">Wide (85&deg;)&nbsp;</td>\n<td style=\"width: 174.707px;\">Slightly narrow&nbsp;</td>\n<td style=\"width: 204.141px;\">Narrow&nbsp;</td>\n<td style=\"width: 234.648px;\">Very wide (&gt;90&deg;)&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 115.762px;\"><strong>Fetal Position&nbsp;</strong></td>\n<td style=\"width: 166.27px;\">\n<p>Occipitolateral&nbsp;</p>\n<p>Oblique occipitoanterior&nbsp;</p>\n</td>\n<td style=\"width: 174.707px;\">\n<p>Direct occipitoanterior</p>\n<p>Occipitoposterior&nbsp;</p>\n</td>\n<td style=\"width: 204.141px;\">\n<p>Occipitolateral</p>\n<p>Oblique occipitoposterior&nbsp;</p>\n</td>\n<td style=\"width: 234.648px;\">Occipitolateral&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 115.762px;\"><strong>Engaging diameter</strong></td>\n<td style=\"width: 166.27px;\">Transverse / oblique&nbsp;</td>\n<td style=\"width: 174.707px;\">Anteroposterior&nbsp;</td>\n<td style=\"width: 204.141px;\">Transverse / oblique&nbsp;</td>\n<td style=\"width: 234.648px;\">Transverse&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 115.762px;\"><strong>Delivery</strong>&nbsp;</td>\n<td style=\"width: 166.27px;\">No difficulty&nbsp;&nbsp;</td>\n<td style=\"width: 174.707px;\">Face-to-pubis - most common.</td>\n<td style=\"width: 204.141px;\">\n<p>Deep transverse arrest is common.</p>\n<p>Difficult delivery with an increased chance of perineal injuries&nbsp;</p>\n</td>\n<td style=\"width: 234.648px;\">No difficulty&nbsp;</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f7a9ca9259f448399854bca8eaf14e1bx600x768.JPEG"
    ]
  },
  {
    "text": "Increased maternal serum alpha-fetoprotein is detected in a primigravida. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Repeat measurement of MSAFP at a later date"
      },
      {
        "id": 2,
        "text": "Targeted sonography"
      },
      {
        "id": 3,
        "text": "Amniocentesis"
      },
      {
        "id": 4,
        "text": "Termination of pregnancy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The next best step is&nbsp;<strong>targeted sonography</strong>. Maternal serum alpha-fetoprotein (MSAFP) levels are only used as a screening test and must be followed by a diagnostic test.</p>\n<p><strong>Amniocentesis</strong> is a diagnostic test for amniotic fluid AFP measurement. It was once considered the standard for the diagnosis of open neural tube disorders but has been <strong>replaced</strong> in most centers <strong>by</strong> <strong>targeted sonography.</strong></p>\n<p>Defects in fetal integuments, such as ventral wall and <strong>neural tube defects</strong>, permit fetal AFP to leak into the amnionic fluid. This results in&nbsp;<strong>increased</strong> <strong>MSAFP</strong> levels. This is detected on screening performed from <strong>15 to 20 weeks</strong> of gestation.</p>\n<div class=\"page\" title=\"Page 303\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 304\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Conditions with <strong>elevated MSAFP</strong>:</p>\n<ul>\n<li>Wrong gestational age</li>\n<li>Neural tube defects</li>\n<li>Multiple pregnancies</li>\n<li>Renal anomalies</li>\n</ul>\n<p>Conditions with <strong>decreased MSAFP</strong>:</p>\n<ul>\n<li>Trisomies (Down's syndrome)</li>\n<li>Gestational trophoblastic disease.</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What does the term 'placental sign' denote?",
    "choices": [
      {
        "id": 1,
        "text": "Alteration of fetal heart rate on pressing the head into the pelvis"
      },
      {
        "id": 2,
        "text": "Spotting on the expected date of period in early months of pregnancy"
      },
      {
        "id": 3,
        "text": "Permanent lengthening of the cord in 3rd stage of labor"
      },
      {
        "id": 4,
        "text": "Slight gush of bleeding in 3rd stage of labor"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Spotting</strong> on the expected date of menstruation in the <strong>early months</strong> of pregnancy is known as <strong>placental sign</strong>.</p>\n<p><strong>Cyclic bleeding </strong>may occur<strong> up to 12 weeks </strong>of pregnancy&nbsp;until the decidual space is obliterated by the fusion of decidua parietalis with decidua capsularis. The bleeding is usually scanty and lasts for a shorter duration than in a regular menstrual cycle.</p>\n<p>Option A: Slowing of the fetal heart rate (FHR) on pressing the head down into the pelvis is suggestive of <strong>placenta previa</strong> (especially of posterior type) and is called <strong>Stallworthy&rsquo;s sign</strong>.&nbsp;The fetal heart rate recovers as soon as the pressure is released.</p>\n<p>Options C and D: Permanent lengthening of the cord and slight gush of bleeding in 3rd stage of labor are suggestive of separation of the placenta.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following methods is not used for delivery of the aftercoming head in breech?",
    "choices": [
      {
        "id": 1,
        "text": "Burns-Marshall method"
      },
      {
        "id": 2,
        "text": "Mauriceau-Smellie-Veit method"
      },
      {
        "id": 3,
        "text": "Piper's forceps"
      },
      {
        "id": 4,
        "text": "Keilland's forceps"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Delivery of the aftercoming head&nbsp;in breech is not done with the help of Keilland's forceps.&nbsp;These forceps are used for the rotation of the fetal head. It is not used anymore.</p>\n<p>The methods used for <strong>delivery of the aftercoming head</strong> include the following:</p>\n<p><strong>Burns-Marshall manoeuvre:&nbsp;</strong>When the occiput is seen under the pubic symphysis, steady traction is given on the feet. The baby is swung in an <strong>arc</strong> towards the mother's abdomen. Simultaneous suprapubic pressure is given and the head is born by flexion.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/465bba920a424076894e520c43e49978x1280x5962.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a668c378237a4e2884b255d668c280c7x1279x1187.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e47eb6bd91f34cf48614f2eafe70f6b8x1279x1270.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2623613ea218483db6658f13cb6d2297x300x320.JPEG"
    ]
  },
  {
    "text": "A 26-year-old woman presents with 6 weeks of amenorrhea and a positive UPT. Her past obstetric history was significant for 2 mid-trimester abortions. On USG, cervical length was 20 mm and no bulging membranes were seen.  What is the next step in her management?",
    "choices": [
      {
        "id": 1,
        "text": "Expectant management"
      },
      {
        "id": 2,
        "text": "Immediate rescue cerclage"
      },
      {
        "id": 3,
        "text": "Prophylactic cerclage at 12 weeks"
      },
      {
        "id": 4,
        "text": "Immediate termination of pregnancy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario is suggestive of <strong>cervical incompetence.</strong>&nbsp;It can be managed with <strong>prophylactic cervical cerclage</strong>&nbsp;done between&nbsp;<strong>12 </strong>and<strong> 14 weeks</strong>&nbsp;of gestation.</p>\n<p>Rescue or<strong> emergency cerclage</strong> is done anytime <strong>within</strong> <strong>24 weeks</strong>&nbsp;of gestation. It should<strong>&nbsp;</strong>only be done when there is <strong>bulging</strong> <strong>of membranes</strong> through the dilated cervix.&nbsp;</p>\n<p><strong>Investigations</strong>&nbsp;<strong>for cervical incompetence</strong>:</p>\n<ul>\n<li>In interconceptional period -&nbsp;\n<ul>\n<li>Passage of number 6 - 8 Hegar's dilator beyond the internal os without resistance or pain</li>\n<li>Funnel-shaped shadow in premenstrual hysterocervicography</li>\n</ul>\n</li>\n<li>During pregnancy -\n<ul>\n<li>Per speculum examination showing cervical dilatation with herniation of membranes</li>\n<li>USG revealing cervical length &lt;2.5 cm and funnelling of internal os &gt;1 cm</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true about the resumption of meiosis-I?",
    "choices": [
      {
        "id": 1,
        "text": "It is not hormone dependent"
      },
      {
        "id": 2,
        "text": "Resumed due to LH"
      },
      {
        "id": 3,
        "text": "Resumed due to FSH"
      },
      {
        "id": 4,
        "text": "Resumed due to GnRH"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Meiosis-I</strong> in the primary oocyte is resumed after <strong>LH surge</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/53dd7c50dac04043940249130d646789x1280x3073.JPEG"
    ]
  },
  {
    "text": "The USG below demonstrates",
    "choices": [
      {
        "id": 1,
        "text": "Ectopic pregnancy"
      },
      {
        "id": 2,
        "text": "Missed abortion"
      },
      {
        "id": 3,
        "text": "Hydatidiform mole"
      },
      {
        "id": 4,
        "text": "Leiomyoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Sonograms of hydatidiform moles</strong></p>\n<p><strong>Complete mole:</strong></p>\n<ul>\n<li>The above image shows sagittal view of a uterus with a complete hydatidiform mole.</li>\n<li>The characteristic <strong>&ldquo;snowstorm&rdquo; appearance</strong> is due to an echogenic uterine mass that has numerous anechoic cystic spaces but without a fetus and amnionic sac.</li>\n</ul>\n<p>Partial mole:</p>\n<ul>\n<li>A partial mole has features that include a thickened, multicystic placenta along with a fetus or at least fetal tissue.</li>\n<li>Increase in the transverse diameter of the gestational sac</li>\n<li>In early pregnancy, however, these sonographic characteristics are seen in fewer than half of hydatidiform moles.</li>\n<li>&nbsp;The most common misdiagnosis is incomplete or missed abortion.</li>\n</ul>\n<p>Occasionally molar pregnancy can be confused for a multifetal pregnancy or a uterine leiomyoma with cystic degeneration.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e7638344bf69407f904a6519944b702c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false about amniotic fluid?",
    "choices": [
      {
        "id": 1,
        "text": "Composition remains same throughout pregnancy"
      },
      {
        "id": 2,
        "text": "Major source is fetal urine after 20 weeks"
      },
      {
        "id": 3,
        "text": "It is primarily reabsorbed by fetal swallowing"
      },
      {
        "id": 4,
        "text": "It is alkaline in nature"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The composition of <strong>amniotic fluid</strong> is not the same throughout pregnancy but changes <strong>later in pregnancy</strong> due to <strong>contamination</strong> by fetal <strong>urinary metabolites</strong>.</p>\n<p>In <strong>early pregnancy</strong>, it is <strong>identical</strong> to <strong>plasma</strong>&nbsp;in composition as it is mainly composed of a transudate of plasma.&nbsp;In <strong>late pregnancy,</strong> as amniotic fluid is primarily formed by<strong> fetal urination,</strong> the composition is altered. Disorders of the fetal kidney can lead to oligohydramnios.</p>\n<p>Fetal swallowing is the primary method of resorption of amniotic fluid. Disorders of swallowing in the fetus can cause polyhydramnios.</p>\n<p>Amniotic fluid is <strong>alkaline</strong> in nature and this helps in differentiating it from vaginal secretions which are acidic. This forms the basis of the <strong>nitrazine paper test</strong> used for the diagnosis of&nbsp;<strong>premature rupture of membranes</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "After how many weeks of postpartum will the uterus becomes a pelvic organ?",
    "choices": [
      {
        "id": 1,
        "text": "1 week"
      },
      {
        "id": 2,
        "text": "2 weeks"
      },
      {
        "id": 3,
        "text": "4 weeks"
      },
      {
        "id": 4,
        "text": "6 weeks"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The uterus becomes a <strong>pelvic</strong> organ&nbsp;by <strong>2&nbsp;weeks </strong>of postpartum.</p>\n<p><strong>Involution</strong>&nbsp;of the uterus occurs due to a decrease in the size of muscle fibers.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<table>\n<tbody>\n<tr>\n<td><strong>Time following delivery</strong></td>\n<td><strong>Features</strong></td>\n<td><strong>Weight of the uterus</strong></td>\n</tr>\n<tr>\n<td>Immediately following delivery</td>\n<td>\n<p>Uterus corresponds to 20 weeks gestational age</p>\n<p>Fundus lies just below the umbilicus</p>\n</td>\n<td>1000 g</td>\n</tr>\n<tr>\n<td>48 hours&nbsp;</td>\n<td>Myometrial involution starts</td>\n<td>&nbsp;-</td>\n</tr>\n<tr>\n<td>1 week</td>\n<td>Rapid involution of uterus</td>\n<td>500 g</td>\n</tr>\n<tr>\n<td>2 weeks</td>\n<td>The uterus becomes a <strong>pelvic</strong> organ</td>\n<td>300 g</td>\n</tr>\n<tr>\n<td>4 weeks</td>\n<td><strong>Clinically,</strong> involution is complete</td>\n<td>100 g</td>\n</tr>\n<tr>\n<td>6-8 weeks</td>\n<td>\n<p>Uterus returns to normal (pre-pregnant) size</p>\n<p><strong>Sonographically,</strong> involution is complete at 8 weeks</p>\n</td>\n<td>60 g</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A pregnant lady delivered her baby unattended while she was on the way to the hospital. While examining her, you note a perineal tear in which the anal sphincter is disrupted. This tear is classified as___.",
    "choices": [
      {
        "id": 1,
        "text": "1st degree"
      },
      {
        "id": 2,
        "text": "2nd degree"
      },
      {
        "id": 3,
        "text": "3rd degree"
      },
      {
        "id": 4,
        "text": "4th degree"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The perineal tears in which <strong>anal sphincter</strong> is <strong>disrupted</strong> are classified as <strong>third-degree</strong> perineal tear.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "During a routine check-up of a multigravida at 32 weeks of gestation, the fetus was found to be in breech presentation. The obstetrician planned to do an external cephalic version.  What is the ideal time to do this procedure?",
    "choices": [
      {
        "id": 1,
        "text": "In labour"
      },
      {
        "id": 2,
        "text": "At 39 weeks"
      },
      {
        "id": 3,
        "text": "At 37 weeks"
      },
      {
        "id": 4,
        "text": "At 34 weeks"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The ideal time to do <strong>external cephalic version</strong>&nbsp;is <strong>37 weeks</strong>. This procedure is attempted in a woman who has completed&nbsp;36 weeks of gestation and has a <strong>breech</strong> fetal presentation.</p>\n<p><strong>Before 37</strong> weeks, a breech presentation has a high likelihood of <strong>correcting spontaneously</strong>. Moreover, if performed too early, there is time to return back to breech.</p>\n<p><strong>After 37</strong> weeks, the <strong>success rates</strong> of ECV are <strong>very low</strong>. Although it can be&nbsp;performed until the early stages of labour, it is not recommended.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Human placenta is best described as",
    "choices": [
      {
        "id": 1,
        "text": "Discoidal"
      },
      {
        "id": 2,
        "text": "Hemochorial"
      },
      {
        "id": 3,
        "text": "Deciduate"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The human placenta is a <strong>discoid, deciduate, labyrinthine and hemochorial </strong>type.</p>\n<p>Interpretation of the fine structure of the placenta by electron microscope shows prominent microvilli on the syncytial surface which help increase the surface area in direct contact with, maternal blood. The contact between the trophoblast and the maternal blood is the defining characteristic of a hemochorial placenta.</p>\n<p>Placenta is discoid like in shape.</p>\n<p>It is deciduate as it is shed at the time of parturition.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false regarding the pathogenesis of pre-eclampsia?",
    "choices": [
      {
        "id": 1,
        "text": "Vascular sensitivity to angiotensin 2 is increased"
      },
      {
        "id": 2,
        "text": "Angiotensinase activity is depressed"
      },
      {
        "id": 3,
        "text": "There is an increase in sFlt -1 levels"
      },
      {
        "id": 4,
        "text": "A decrease in the level of soluble endoglin is seen"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In pre-eclampsia, there is an&nbsp;<strong>increase </strong>in the level of<strong> soluble endoglin</strong>.</p>\n<p>Excessive amounts of antiangiogenic factors,&nbsp;increased sensitivity to angiotensin, and lowered angiotensinase levels <strong>worsen hypoxia</strong> at the uteroplacental interface.</p>\n<div class=\"page\" title=\"Page 754\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 754\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Trophoblast of women who develop preeclampsia overproduces at least two<strong> antiangiogenic peptides</strong> that enter the maternal circulation. They&nbsp;<strong>increase</strong> months before clinical preeclampsia develops.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<ul>\n<li>Soluble <strong>endoglin </strong>(sEng)&nbsp;is derived from the placenta and <strong>blocks</strong> endothelial nitric oxide-dependent <strong>vasodilatation.</strong> It also inhibits various TGF&beta; isoforms from binding to endothelial receptors.</li>\n</ul>\n<div class=\"page\" title=\"Page 754\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Soluble <strong>Fms-like tyrosine kinase 1</strong> (sFlt-1)&nbsp;is a variant of the Flt-1 receptor for placental growth factor (PlGF) and for VEGF.&nbsp;Increased maternal sFlt-1 levels inactivate and decrease circulating free PlGF and VEGF concentrations, leading to <strong>endothelial dysfunction.</strong></li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Obg St 3 (From Q-Bank)';
        const quizFilename = 'obg-st-3-from-q-bank-00dfd12b.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>