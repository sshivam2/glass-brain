<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medicine St 3 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">55</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Characteristic cardiac lesion in SLE is",
    "choices": [
      {
        "id": 1,
        "text": "Pericarditis"
      },
      {
        "id": 2,
        "text": "Verrucous endocarditis"
      },
      {
        "id": 3,
        "text": "Myocardial fibrosis"
      },
      {
        "id": 4,
        "text": "Valvular incompetence"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>characteristic cardiac lesions of SLE</strong> are <strong>verrucous valvular abnormalities</strong> known as <strong>Libman-Sacks endocarditis</strong>.</p>\n<p>They most often are located on the <strong>left-sided cardiac valves</strong>, particularly on the <strong>ventricular surface of the posterior mitral leaflet</strong>, and are made up almost entirely of <strong>fibrin.</strong></p>\n<p>However,<strong> Pericarditis </strong>is the <strong>most common cardiac manifestation of SLE.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Cogan syndrome includes all of the following except",
    "choices": [
      {
        "id": 1,
        "text": "Interstitial nephritis"
      },
      {
        "id": 2,
        "text": "Interstitial keratitis"
      },
      {
        "id": 3,
        "text": "Aortitis"
      },
      {
        "id": 4,
        "text": "Vestibuloauditory symptoms"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Interstitial nephritis is not a part of Cogan&rsquo;s syndrome.</p>\n<p><strong>Cogan&rsquo;s syndrome</strong> is a <strong>primary vasculitis syndrome</strong>.</p>\n<p>It includes</p>\n<ul>\n<li><strong>Interstitial keratitis</strong></li>\n<li><strong>Vestibuloauditory</strong> symptoms</li>\n<li>Systemic vasculitis, particularly <strong>aortitis </strong>with involvement of the aortic valve. <strong>Glucocorticoids </strong>are the <strong>mainstay of treatment</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The deformity present in the below given image of transthoracic echocardiography is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Mitral valve stenosis"
      },
      {
        "id": 2,
        "text": "Mitral regurgitation"
      },
      {
        "id": 3,
        "text": "Mitral valve prolapse"
      },
      {
        "id": 4,
        "text": "Mitral valve hypoplasia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above given image shows <strong>&ldquo;Hockey stick&rdquo; or &ldquo;elbow&rdquo; deformity</strong> seen in case of <strong>mitral stenosis usually seen in chronic rheumatic heart disease.</strong></p>\n<p>&ldquo;Hockey stick&rdquo; or an &ldquo;elbow&rdquo; deformity is seen in diastolic image of transthoracic echocardiography:</p>\n<ul>\n<li><strong>Leaflet thickening</strong></li>\n<li><strong>Restriction of the anterior mitral valve leaflet tip</strong></li>\n<li><strong>Doming of the body of the leaflet toward the interventricular septum</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5148dc968ce24966aff196afe1582291.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a component of classical triad of ECG changes in pericardial effusion with cardiac tamponade",
    "choices": [
      {
        "id": 1,
        "text": "Sinus tachycardia"
      },
      {
        "id": 2,
        "text": "Prolonged ST segment"
      },
      {
        "id": 3,
        "text": "Low voltage QRS complex"
      },
      {
        "id": 4,
        "text": "Electrical alternans"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Prolonged ST segment</strong> is <strong>not a part of classic triad of ECG findings</strong> for pericardial effusion with cardiac tamponade.</p>\n<ul>\n<li>Classical triad of ECG changes in pericardial effusion with cardiac tamponade includes:\n<ul>\n<li><strong>Sinus tachycardia</strong></li>\n<li><strong>Low QRS voltages</strong></li>\n<li><strong>Electrical alternans</strong> (best seen in <strong>leads V3 and V4</strong> in this case; arrows)</li>\n</ul>\n</li>\n<li>This triad is <strong>highly specific</strong> for pericardial effusion, usually with tamponade physiology, but of <strong>limited sensitivity</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/505052b1f4c841f68d3d076123915607x625x230.PNG"
    ]
  },
  {
    "text": "Most commonly involved vessel in case of leukocytoclastic angiitis is",
    "choices": [
      {
        "id": 1,
        "text": "Arterioles"
      },
      {
        "id": 2,
        "text": "Capillaries"
      },
      {
        "id": 3,
        "text": "Post capillary venules"
      },
      {
        "id": 4,
        "text": "Medium sized arteries"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Postcapillary venules are the most commonly involved vessels in leukocytoclastic angiitis.</p>\n<p><strong>Leukocytoclastic angiitis</strong>:</p>\n<ul>\n<li>Also known as <strong>cutaneous vasculitis/hypersensitivity</strong><strong> vasculitis/cutaneous leukocytoclastic angiitis.</strong></li>\n<li><strong>Defined</strong> as the <strong>inflammation of the blood vessels of the dermis.</strong></li>\n<li><strong>Postcapillary venules</strong> are the <strong>most commonly involved</strong> vessels; capillaries and arterioles may be involved less frequently.</li>\n<li>The typical <strong>histopathologic </strong>feature of cutaneous vasculitis is the presence of <strong>vasculitis of small vessels.</strong></li>\n<li>This vasculitis is characterized by a <strong>leukocytoclasis</strong>.</li>\n<li><strong>Clinical feature:</strong>\n<ul>\n<li>Predominance of <strong>skin involvement</strong> mainly in the form of <strong>palpable purpura</strong>.</li>\n<li>Other cutaneous manifestations of the vasculitis may occur, including macules, papules, vesicles, bullae, subcutaneous nodules, ulcers, and recurrent or chronic urticaria.</li>\n<li>Pruritic or even quite painful, with a burning or stinging sensation.</li>\n</ul>\n</li>\n<li><strong>Most commonly site:</strong>\n<ul>\n<li>Lower extremities in ambulatory patients</li>\n<li>Sacral area in bedridden patients due to the effects of hydrostatic forces on the postcapillary venules.</li>\n</ul>\n</li>\n<li><strong>Lab features:</strong>\n<ul>\n<li>Mild leukocytosis with or without eosinophilia</li>\n<li>Elevated ESR</li>\n</ul>\n</li>\n<li><strong>Diagnostic feature:</strong>\n<ul>\n<li>Demonstration of vasculitis on biopsy</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 70 year old male presented with severe pain in knee joint of acute onset. On examination - knee was red, swollen and tender. X ray of knee showed linear calcification. Definitive diagnosis requires",
    "choices": [
      {
        "id": 1,
        "text": "Estimation of serum uric acid"
      },
      {
        "id": 2,
        "text": "Estimation of serum calcium levels"
      },
      {
        "id": 3,
        "text": "Rheumatoid factor"
      },
      {
        "id": 4,
        "text": "Demonstration of positive birefringent rhomboid crystals in synovial fluid"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Diagnosis</strong> of given case scenario is <strong>calcium pyrophosphate deposition disease</strong>.</p>\n<p>Factors favoring diagnosis are:</p>\n<ul>\n<li>Most common in <strong>elderly.</strong></li>\n<li><strong>Knee joint</strong> is <strong>most commonly affected</strong>.</li>\n<li><strong>Radiographs or ultrasound</strong> reveal <strong>punctate and/or linear radiodense deposits</strong> within fibrocartilaginous joint menisci or articular hyaline cartilage (<strong>chondrocalcinosis</strong>).</li>\n</ul>\n<p><strong>Definitive diagnosis</strong> requires demonstration of <strong>typical rhomboid or rodlike crystals </strong>(generally <strong>weakly positively birefringent or nonbirefringent</strong> with polarized light) in <strong>synovial fluid or articular tissue.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Bode index is used in",
    "choices": [
      {
        "id": 1,
        "text": "Liver transplantation"
      },
      {
        "id": 2,
        "text": "Renal transplantation"
      },
      {
        "id": 3,
        "text": "Lung transplantation"
      },
      {
        "id": 4,
        "text": "Heart transplantation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>BODE index is related to lung transplantation.</p>\n<p>BODE stands for</p>\n<ul>\n<li><strong>B</strong>ody mass index</li>\n<li>Airflow <strong>O</strong>bstruction</li>\n<li><strong>D</strong>yspnea</li>\n<li><strong>E</strong>xercise capacity</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "False about CURB-65 criteria to assess pneumonia severity is",
    "choices": [
      {
        "id": 1,
        "text": "Urea > 7 mmol/L"
      },
      {
        "id": 2,
        "text": "Respiratory rate \u2265 30/min"
      },
      {
        "id": 3,
        "text": "Systolic blood pressure \u2264 100 mmHg"
      },
      {
        "id": 4,
        "text": "Diastolic blood pressure \u2264 60 mmHg"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>CURB-65</strong> includes <strong>systolic blood pressure &le; 90 mmHg</strong> as criteria, not &le; 100 mmHg.</p>\n<p>The CURB-65 is used to assess the severity of pneumonia.</p>\n<p>It includes five variables:</p>\n<ul>\n<li><strong>C</strong>onfusion</li>\n<li><strong>U</strong>rea &gt;7 mmol/L</li>\n<li><strong>R</strong>espiratory rate &ge;30/min</li>\n<li><strong>B</strong>lood pressure, systolic &le;90 mmHg or diastolic &le;60 mmHg</li>\n<li>Age &ge;<strong>65</strong> years</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common symptom of lung cancer",
    "choices": [
      {
        "id": 1,
        "text": "Cough"
      },
      {
        "id": 2,
        "text": "Weight loss"
      },
      {
        "id": 3,
        "text": "Dyspnea"
      },
      {
        "id": 4,
        "text": "Chest pain"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Cough is the most common presenting feature in a case of lung carcinoma followed by weight loss.</strong></p>\n<p><strong>Presenting Signs and Symptoms of Lung Cancer:</strong></p>\n<table style=\"width: 249.8px;\">\n<tbody>\n<tr>\n<td style=\"width: 154px;\">Symptom and Signs</td>\n<td style=\"width: 87.8px;\">Range of Frequency</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Cough</td>\n<td style=\"width: 87.8px;\">8&ndash;75%</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Weight loss</td>\n<td style=\"width: 87.8px;\">0&ndash;68%</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Dyspnea</td>\n<td style=\"width: 87.8px;\">3&ndash;60%</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Chest pain</td>\n<td style=\"width: 87.8px;\">20&ndash;49%</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Hemoptysis</td>\n<td style=\"width: 87.8px;\">6&ndash;35%</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Bone pain</td>\n<td style=\"width: 87.8px;\">6&ndash;25%</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Clubbing</td>\n<td style=\"width: 87.8px;\">0&ndash;20%</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Fever</td>\n<td style=\"width: 87.8px;\">0&ndash;20%</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Weakness</td>\n<td style=\"width: 87.8px;\">0&ndash;10%</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Superior vena cava obstruction</td>\n<td style=\"width: 87.8px;\">0&ndash;4%</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Dysphagia</td>\n<td style=\"width: 87.8px;\">0&ndash;2%</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Wheezing and stridor</td>\n<td style=\"width: 87.8px;\">0&ndash;2%</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Structure extensively degenerated in paraneoplastic cerebellar degeneration is:",
    "choices": [
      {
        "id": 1,
        "text": "Cerebellar cortical neuron"
      },
      {
        "id": 2,
        "text": "Purkinje cell"
      },
      {
        "id": 3,
        "text": "Deep cerebellar nuclei"
      },
      {
        "id": 4,
        "text": "Spinocerebellar tract"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Paraneoplastic cerebellar degeneration</strong> occurs due to <strong>extensive degeneration of Purkinje cells</strong>, with variable involvement of other cerebellar cortical neurons, deep cerebellar nuclei, and spinocerebellar tracts.</li>\n<li>The tumors more frequently involved are</li>\n<li>SCLC (P/Q-type voltage-gated calcium channels)</li>\n<li>Cancer of the breast and ovary (Anti-Yo antibodies)</li>\n<li>Hodgkin&rsquo;s lymphoma (anti-Tr antibodies)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The given ECG shows",
    "choices": [
      {
        "id": 1,
        "text": "Hypertrophic cardiomyopathy"
      },
      {
        "id": 2,
        "text": "Pulmonary embolism"
      },
      {
        "id": 3,
        "text": "Pericardial effusion"
      },
      {
        "id": 4,
        "text": "Anterior wall MI"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>The given ECG shows changes corresponding with pulmonary embolism.</li>\n<li>Changes are\n<ul>\n<li>Sinus tachycardia</li>\n<li>S1Q3T3 pattern (T-wave inversion in III)</li>\n<li>Incomplete RBBB</li>\n<li>Right precordial T-wave inversions</li>\n</ul>\n</li>\n<li>Consistent with acute RV overload in a patient with pulmonary emboli</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8101841ef378438ba9c97bd4ed4d1d04.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Most common site of anomaly depicted in the below given image, whose histological section shows a persistent caliber artery present in the submucosa is?",
    "choices": [
      {
        "id": 1,
        "text": "Lesser curvature"
      },
      {
        "id": 2,
        "text": "Greater curvature"
      },
      {
        "id": 3,
        "text": "Pylorus"
      },
      {
        "id": 4,
        "text": "Antrum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>The above given image shows <strong>actively spurting</strong> <strong>Dieulafoy&rsquo;s lesion</strong>.</li>\n<li>There is <strong>no underlying mucosal lesion.</strong></li>\n<li><strong>Histological picture shows <strong>persistent caliber artery present in the gastric submucosa, immediately beneath the mucosa.</strong></strong></li>\n<li></li>\n<li><strong>Hence the diagnosis is Dieulafoy&rsquo;s Lesion.</strong></li>\n<li>It is seen <strong>most commonly</strong> on the <strong>lesser curvature of the proximal stomach</strong>.</li>\n<li>It also called <strong>persistent caliber artery</strong> - a large-caliber arteriole that runs immediately beneath the gastrointestinal mucosa and bleeds through <strong>pinpoint mucosal erosion.</strong></li>\n<li>Often recognized only after <strong>repeated endoscopy for recurrent bleeding</strong>.</li>\n<li>Treatment:\n<ul>\n<li>Endoscopic therapy, such as <strong>thermal coagulation or band ligation</strong></li>\n<li><strong>Angiographic embolization or surgical oversewing</strong> where endoscopic therapy has failed.</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fe9b9639f2164197abebb8ca644dc146.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the endoscopic image",
    "choices": [
      {
        "id": 1,
        "text": "Caustic burn"
      },
      {
        "id": 2,
        "text": "Vascular ectasia"
      },
      {
        "id": 3,
        "text": "Eosinophilic esophagitis"
      },
      {
        "id": 4,
        "text": "Schatzi ring"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>The endoscopy image shows presence of <strong>linear furrows and multiple corrugated rings</strong> throughout a narrowed esophagus called <strong>feline esophagus or trachealization of the esophagus.</strong></li>\n<li>It suggests diagnosis of <strong>eosinophilic esophagitis</strong>.</li>\n<li>The diagnosis requires <strong>biopsy</strong> with <strong>histologic finding of &gt; 15&ndash;20 eosinophils per high-power field.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d921a3ce746e4cb7b8cce283220edb27.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Best investigation for metastatic gastrinoma is",
    "choices": [
      {
        "id": 1,
        "text": "Endoscopic ultrasound"
      },
      {
        "id": 2,
        "text": "Selective arterial secretin injection"
      },
      {
        "id": 3,
        "text": "MRI"
      },
      {
        "id": 4,
        "text": "Octreoscan"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li><strong>Octreoscan</strong> with <strong>sensitivity of 80-100%</strong> is the <strong>best investigation</strong> to detect <strong>metastatic gastrinomas.</strong></li>\n<li>It is based in the <strong>principle</strong> that several types of <strong>endocrine tumors express cell-surface receptors for somatostatin.</strong></li>\n<li>This permits the localization of gastrinomas by <strong>measuring the uptake of the stable somatostatin analogue111 In-pentreotide (OctreoScan)</strong> with sensitivity and specificity rates of &gt;85%.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Triple A syndrome includes all of the following except",
    "choices": [
      {
        "id": 1,
        "text": "Achlorhydria"
      },
      {
        "id": 2,
        "text": "Alacrimia"
      },
      {
        "id": 3,
        "text": "Achalasia"
      },
      {
        "id": 4,
        "text": "Addison\u2019s disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Achlorhydria</strong> is <strong>not a part</strong> of triple A syndrome.</p>\n<p><strong>Triple A syndrome</strong> is due to <strong>mutation in AAAS gene</strong>.</p>\n<p>It includes:</p>\n<ul>\n<li>Alacrimia</li>\n<li>Achalasia</li>\n<li>Addison&rsquo;s disease</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Beck\u2019s triad is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Cardiac tamponade"
      },
      {
        "id": 2,
        "text": "Constrictive Pericarditis"
      },
      {
        "id": 3,
        "text": "Restrictive cardiomyopathy"
      },
      {
        "id": 4,
        "text": "Hypertrophic cardiomyopathy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Beck&rsquo;s triad</strong> is seen in <strong>cardiac tamponade.</strong></p>\n<p>It includes:</p>\n<ul>\n<li>Hypotension</li>\n<li>Soft or absent heart sounds</li>\n<li>Jugular venous distention with a prominent x descent but an absent y descent.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The triad of saturnine gout, hypertension and renal failure is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Autoimmune  nephropathy"
      },
      {
        "id": 2,
        "text": "Sickle cell nephropathy"
      },
      {
        "id": 3,
        "text": "Diabetic nephropathy"
      },
      {
        "id": 4,
        "text": "Lead nephropathy"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>The triad of &ldquo;<strong>saturnine gout,&rdquo; hypertension, and renal insufficiency</strong> should prompt a practitioner to ask specifically about <strong>lead exposure</strong>.</li>\n<li>Heavy metals like lead or cadmium lead to proximal tubule dysfunction.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All are true about recovery phase of Acute Kidney Injury except",
    "choices": [
      {
        "id": 1,
        "text": "Hypernatremia"
      },
      {
        "id": 2,
        "text": "Hypokalemia"
      },
      {
        "id": 3,
        "text": "Hypomagnesaemia"
      },
      {
        "id": 4,
        "text": "Hypocalcaemia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Hyponatremia is seen in recovery phase of acute kidney injury.</p>\n<p>Stages of AKI:</p>\n<ul>\n<li><strong>Initiation phase</strong>\n<ul>\n<li>Decrease in urine output</li>\n</ul>\n</li>\n<li><strong>Maintenance phase</strong>\n<ul>\n<li>Hyponatremia</li>\n<li>Hyperkalemia</li>\n<li>Hyperphosphataemia</li>\n<li>Hypomagnesemia</li>\n<li>Hypocalcaemia</li>\n<li>Metabolic acidosis</li>\n<li>Elevation of BUN</li>\n</ul>\n</li>\n<li><strong>Recovery/diuretic phase</strong>&nbsp;\n<ul>\n<li>Hyponatremia</li>\n<li>Hypokalemia</li>\n<li>Hypophosphataemia</li>\n<li>Hypomagnesaemia</li>\n<li>Hypocalcaemia</li>\n<li></li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common acute complication during hemodialysis is",
    "choices": [
      {
        "id": 1,
        "text": "Air embolism"
      },
      {
        "id": 2,
        "text": "Hypotension"
      },
      {
        "id": 3,
        "text": "Bleeding"
      },
      {
        "id": 4,
        "text": "Anaphylactoid reaction"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Hypotension</strong> is the <strong>most common acute complication of hemodialysis</strong>, particularly among patients with diabetes mellitus.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "False about pre-renal acute renal failure is",
    "choices": [
      {
        "id": 1,
        "text": "Urine osmolality >500 mosmol/L H2O"
      },
      {
        "id": 2,
        "text": "Fractional excretion of sodium < 1"
      },
      {
        "id": 3,
        "text": "Blood urea nitrogen/Plasma creatinine ratio < 10-15: 1"
      },
      {
        "id": 4,
        "text": "Urine/plasma creatinine ratio > 40"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In case of <strong>pre-renal acute renal failure</strong>, <strong>blood urea nitrogen/plasma creatinine ratio will be &gt; 20.</strong></p>\n<p><strong>Differences between pre-renal and intrinsic renal failure:</strong></p>\n<p></p>\n<table style=\"width: 420.8px;\">\n<tbody>\n<tr>\n<td style=\"width: 131px;\"><strong>Index</strong> <strong>&nbsp;</strong></td>\n<td style=\"width: 143px;\"><strong>Pre-renal failure</strong> <strong>&nbsp;</strong></td>\n<td style=\"width: 132.8px;\"><strong>Intrinsic renal failure</strong></td>\n</tr>\n<tr>\n<td style=\"width: 131px;\">BUN/Plasma creatinine ratio</td>\n<td style=\"width: 143px;\">&gt;20:1</td>\n<td style=\"width: 132.8px;\">10&ndash;15:1</td>\n</tr>\n<tr>\n<td style=\"width: 131px;\">Urine osmolality (mosmol/L H2O)</td>\n<td style=\"width: 143px;\">&gt;500</td>\n<td style=\"width: 132.8px;\">&lt;350</td>\n</tr>\n<tr>\n<td style=\"width: 131px;\">Urine sodium UNa (meq/L)</td>\n<td style=\"width: 143px;\">&lt;20</td>\n<td style=\"width: 132.8px;\">&gt;40</td>\n</tr>\n<tr>\n<td style=\"width: 131px;\">Fractional excretion of sodium</td>\n<td style=\"width: 143px;\">&lt;1%</td>\n<td style=\"width: 132.8px;\">&gt;2%</td>\n</tr>\n<tr>\n<td style=\"width: 131px;\">Urine/plasma creatinine (UCr/PCr)</td>\n<td style=\"width: 143px;\">&gt;40</td>\n<td style=\"width: 132.8px;\">&lt;20</td>\n</tr>\n<tr>\n<td style=\"width: 131px;\">Urinalysis (casts)</td>\n<td style=\"width: 143px;\">None or hyaline/ granular</td>\n<td style=\"width: 132.8px;\">Muddy brown</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common neurological disorder seen in chronic renal failure patients is",
    "choices": [
      {
        "id": 1,
        "text": "Dementia"
      },
      {
        "id": 2,
        "text": "Polyneuropathy"
      },
      {
        "id": 3,
        "text": "Restless leg syndrome"
      },
      {
        "id": 4,
        "text": "Encephalopathy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Polyneuropathy</strong> is the <strong>most common neurological disorder</strong> seen in about <strong>60% of patients with CKD.</strong></p>\n<p>It is characterized by</p>\n<ul>\n<li>Length-dependent numbness</li>\n<li>Tingling</li>\n<li>Allodynia</li>\n<li>Mild distal weakness</li>\n</ul>\n<p>The sensorimotor polyneuropathy can be <strong>stabilized by hemodialysis</strong> and <strong>improved with successful renal transplantation.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Not a part of \u201cTriple therapy\u201d immunosuppression for post-renal transplant patient is",
    "choices": [
      {
        "id": 1,
        "text": "Prednisone"
      },
      {
        "id": 2,
        "text": "Cyclosporine"
      },
      {
        "id": 3,
        "text": "Azathioprine"
      },
      {
        "id": 4,
        "text": "Belatacept"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Belatacept</strong> is <strong>not part of &ldquo;Triple therapy&rdquo;</strong> immunosuppression for post-renal transplant patient.</p>\n<ul>\n<li>The most frequently used combination is <strong>triple therapy</strong> with\n<ul>\n<li><strong>Prednisone</strong></li>\n<li>Calcineurin inhibitor <strong>(Tacrolimus</strong> - 1st line or <strong>Cyclosporine)</strong></li>\n<li>Antimetabolite <strong>(Mycophenolate mofetil</strong> or <strong>Azathioprine)</strong></li>\n</ul>\n</li>\n<li><strong>Mammalian TOR (mTOR) inhibitors</strong> can replace one of the last two agents.</li>\n</ul>\n<p><strong>Note:</strong> More recently, the U.S. Food and Drug Administration (FDA) approved a new <strong>co-stimulatory blocking antibody</strong> (CD80 &amp; CD86), <strong>belatacept</strong>, as a new strategy to prevent long-term calcineurin inhibitor toxicity. It is&nbsp;indicated for&nbsp;prophylaxis of organ rejection in patients who are EBV seropositive and receiving a kidney&nbsp;transplant.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with breast carcinoma presents with nephrotic syndrome. Renal biopsy is likely to reveal",
    "choices": [
      {
        "id": 1,
        "text": "Focal segmental glomerulosclerosis"
      },
      {
        "id": 2,
        "text": "Membranous glomerulonephritis"
      },
      {
        "id": 3,
        "text": "Membranoproliferative glomerulonephritis"
      },
      {
        "id": 4,
        "text": "Minimal Change Disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Most carcinomas cause secondary membranous glomerulonephritis.</p>\n<p><strong>Membranous glomerulo nephritis:</strong></p>\n<ul>\n<li>Primary/idiopathic membranous glomerulonephritis</li>\n<li>Secondary membranous glomerulonephritis\n<ul>\n<li><strong>Infection:</strong> Hepatitis B and C, syphilis, malaria, schistosomiasis, <strong>leprosy</strong>, filariasis</li>\n<li><strong>Cancer:</strong> Breast, colon, lung, stomach, kidney, esophagus, neuroblastoma</li>\n<li><strong>Drugs:</strong> Gold, mercury, penicillamine, nonsteroidal anti-inflammatory agents, probenecid</li>\n<li><strong>Autoimmune diseases: </strong>Systemic lupus erythematosus, rheumatoid arthritis, primary biliary cirrhosis, dermatitis herpetiformis, bullous pemphigoid, myasthenia gravis, Sjogren\u2019s syndrome, Hashimoto\u2019s thyroiditis.</li>\n<li><strong>Other systemic diseases:</strong> Fanconi\u2019s syndrome, sickle cell anemia, diabetes, Crohn\u2019s disease, sarcoidosis, Guillain-Barre syndrome, Weber-Christian disease, angiofollicular lymph node hyperplasia.</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common mutation in cystic fibrosis?",
    "choices": [
      {
        "id": 1,
        "text": "Class I"
      },
      {
        "id": 2,
        "text": "Class II"
      },
      {
        "id": 3,
        "text": "Class III"
      },
      {
        "id": 4,
        "text": "Class IV"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In cystic fibrosis, CFTR mutations that <strong>disrupt protein maturation</strong> are termed <strong>class II defects</strong> and are by far the <strong>most common genetic abnormalities.</strong></p>\n<p>There are 6 classes of defects involving the CFTR gene:</p>\n<table style=\"height: 218px; width: 555px;\">\n<tbody>\n<tr style=\"height: 28.8681px;\">\n<td style=\"width: 63.382px; height: 28.8681px;\"><strong>Class</strong></td>\n<td style=\"width: 291.618px; height: 28.8681px;\"><strong>Defect</strong></td>\n</tr>\n<tr style=\"height: 19px;\">\n<td style=\"width: 63.382px; height: 19px;\">Class I</td>\n<td style=\"width: 291.618px; height: 19px;\">Absence of synthesis e.g.,&nbsp;W1282X<strong>,&nbsp;</strong>G542X</td>\n</tr>\n<tr style=\"height: 39px;\">\n<td style=\"width: 63.382px; height: 39px;\">Class II</td>\n<td style=\"width: 291.618px; height: 39px;\"><strong>Defective protein maturation </strong>and premature<strong> degradation </strong>e.g.,<strong> F508 deletion</strong></td>\n</tr>\n<tr style=\"height: 19px;\">\n<td style=\"width: 63.382px; height: 19px;\">Class III</td>\n<td style=\"width: 291.618px; height: 19px;\">Disordered gating/regulation e.g.,&nbsp;G551D mutation</td>\n</tr>\n<tr style=\"height: 19px;\">\n<td style=\"width: 63.382px; height: 19px;\">Class IV</td>\n<td style=\"width: 291.618px; height: 19px;\">Defective conductance through the ion channel pore</td>\n</tr>\n<tr style=\"height: 39px;\">\n<td style=\"width: 63.382px; height: 39px;\">Class V</td>\n<td style=\"width: 291.618px; height: 39px;\">Promoter or splicing abnormality leading to reduced CFTR transcripts</td>\n</tr>\n<tr style=\"height: 19px;\">\n<td style=\"width: 63.382px; height: 19px;\">Class VI</td>\n<td style=\"width: 291.618px; height: 19px;\">Accelerated turnover from the cell surface</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "DLco is decreased in all of the following conditions except",
    "choices": [
      {
        "id": 1,
        "text": "Emphysema"
      },
      {
        "id": 2,
        "text": "Pulmonary haemorrhage"
      },
      {
        "id": 3,
        "text": "Interstitial lung disease"
      },
      {
        "id": 4,
        "text": "Pulmonary hypertension"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>DLco is increased in pulmonary haemorrhage</strong> &ndash; <strong>hemoglobin</strong> present in erythrocytes <strong>combine with CO</strong> which results in <strong>reduced concentration of CO in exhaled air</strong>. Hence <strong>DLco is increased</strong>.</p>\n<p><strong>Diffusing Capacity (Dlco):</strong></p>\n<ul>\n<li>This test uses a <strong>small (and safe) amount of carbon monoxide (CO)</strong> to measure gas <strong>exchange across the alveolar membrane</strong> during a <strong>10-sec breath hold</strong>.</li>\n<li>CO in <strong>exhaled breath is analyzed</strong> to determine the quantity of CO crossing the alveolar membrane and combining with hemoglobin in red blood cells.</li>\n<li>It <strong>increases with the increase in</strong>\n<ul>\n<li>Surface area available for diffusion and</li>\n<li>The amount of hemoglobin within the capillaries</li>\n</ul>\n</li>\n<li>Varies <strong>inversely with alveolar membrane thickness</strong></li>\n<li>Thus, <strong>Dlco decreases in diseases</strong> that&nbsp;\n<ul>\n<li>Thicken or destroy alveolar membranes (e.g., <strong>pulmonary fibrosis, emphysema</strong>)</li>\n<li>Curtail the pulmonary vasculature (e.g., <strong>pulmonary hypertension</strong>)</li>\n<li>Reduce alveolar capillary hemoglobin (e.g., <strong>anemia</strong>)</li>\n</ul>\n</li>\n<li>Single-breath diffusing capacity may be <strong>elevated in</strong>\n<ul>\n<li>Acute congestive heart failure</li>\n<li>Asthma</li>\n<li>Polycythemia</li>\n<li>Pulmonary hemorrhage</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Type 3 respiratory failure occurs in",
    "choices": [
      {
        "id": 1,
        "text": "Postoperative atelectasis"
      },
      {
        "id": 2,
        "text": "Kyphoscoliosis"
      },
      {
        "id": 3,
        "text": "Flail chest"
      },
      {
        "id": 4,
        "text": "Pulmonary fibrosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Postoperative atelectasis causes type 3 respiratory failure.</p>\n<p><strong>Type III respiratory failure</strong></p>\n<ul>\n<li>Results from <strong>lung atelectasis</strong>.</li>\n<li>Since atelectasis occurs <strong>commonly in the perioperative period</strong>, this form is also called <strong>perioperative respiratory failure.</strong></li>\n<li><strong>After general anesthesia</strong>, <strong>decrease in functional residual capacity</strong> lead to collapse of dependent lung units.</li>\n<li>Treated by\n<ul>\n<li>Frequent changes in position</li>\n<li>Chest physiotherapy</li>\n<li>Upright positioning</li>\n<li>Control of incisional and/or abdominal pain</li>\n</ul>\n</li>\n<li>Noninvasive positive-pressure ventilation - used to reverse <strong>regional atelectasis</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common type of bronchiectasis",
    "choices": [
      {
        "id": 1,
        "text": "Cylindrical"
      },
      {
        "id": 2,
        "text": "Varicose"
      },
      {
        "id": 3,
        "text": "Cystic"
      },
      {
        "id": 4,
        "text": "Irregular"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>Cylindrical or tubular is the most common form of bronchiectasis.</li>\n<li>Other types are &ndash; varicose &amp; cystic.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Shohl\u2019s solution is",
    "choices": [
      {
        "id": 1,
        "text": "Sodium citrate"
      },
      {
        "id": 2,
        "text": "Sodium bicarbonate"
      },
      {
        "id": 3,
        "text": "Potassium citrate"
      },
      {
        "id": 4,
        "text": "Lugol iodine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>Shohl&rsquo;s solution is sodium citrate.</li>\n<li>It is used in correction of metabolic acidosis and the Hypokalemia in case of classic dRTA.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common cause of death in Menke\u2019s disease",
    "choices": [
      {
        "id": 1,
        "text": "Laryngospasm"
      },
      {
        "id": 2,
        "text": "Cyano-methemoglobinemia"
      },
      {
        "id": 3,
        "text": "Diaphragmatic paralysis"
      },
      {
        "id": 4,
        "text": "Cardiac rupture"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Most common cause of death in case of menkes kinky hair syndrome is cardiac rupture.</p>\n<p>Menkes kinky hair syndrome:</p>\n<ul>\n<li>It is an <strong>X-linked metabolic disturbance of copper metabolism.</strong></li>\n<li>It is caused by mutations in the copper-transporting ATP7A gene.</li>\n<li>It is characterized by\n<ul>\n<li>Mental retardation</li>\n<li>Hypocupremia</li>\n<li>Decreased circulating ceruloplasmin</li>\n</ul>\n</li>\n<li>Children with this disease often die within 5 years because of dissecting aneurysms or cardiac rupture</li>\n<li>The diagnosis of copper deficiency is usually based on low serum levels of copper (&lt;65 &mu;g/dL) and low ceruloplasmin levels (&lt;20 mg/dL)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not considered a major manifestation of unintentional weight loss?",
    "choices": [
      {
        "id": 1,
        "text": "Anorexia"
      },
      {
        "id": 2,
        "text": "Dehydration"
      },
      {
        "id": 3,
        "text": "Osteopenia"
      },
      {
        "id": 4,
        "text": "Sarcopenia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Osteopenia</strong> is not considered a major manifestation of unintentional weight loss (UWL).</p>\n<p>The four major manifestations of unintentional weight loss are</p>\n<ul>\n<li><strong>Anorexia</strong> (loss of appetite)</li>\n<li><strong>Sarcopenia</strong> (loss of muscle mass)</li>\n<li><strong>Cachexia</strong> (a syndrome of weight loss, loss of muscle and adipose tissue, anorexia, and weakness)</li>\n<li><strong>Dehydration</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All are true about Miller fisher syndrome except",
    "choices": [
      {
        "id": 1,
        "text": "Ataxia"
      },
      {
        "id": 2,
        "text": "Areflexia"
      },
      {
        "id": 3,
        "text": "Muscle weakness"
      },
      {
        "id": 4,
        "text": "Ophthalmoplegia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Miller Fisher syndrome is characterized by Areflexia without muscle weakness.</p>\n<ul>\n<li>Miller Fisher syndrome (MFS) is a <strong>variant of GBS</strong>.</li>\n<li>It accounts for <strong>~5% of all cases.</strong></li>\n<li>It is strongly associated with <strong>antibodies to the ganglioside GQ1b (IgG).</strong></li>\n<li>It presents with\n<ul>\n<li>Rapidly evolving ataxia</li>\n<li>Areflexia of limbs without weakness</li>\n<li>Ophthalmoplegia, often with pupillary paralysis</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Triad of normal pressure hydrocephalus doesn\u2019t include",
    "choices": [
      {
        "id": 1,
        "text": "Ataxia"
      },
      {
        "id": 2,
        "text": "Aphasia"
      },
      {
        "id": 3,
        "text": "Dementia"
      },
      {
        "id": 4,
        "text": "Urinary incontinence"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Triad of NPH doesn&rsquo;t include aphasia.</p>\n<ul>\n<li>The clinical triad of NPH includes\n<ul>\n<li>An abnormal gait (ataxic or apractic)</li>\n<li>Dementia (usually mild to moderate, with an emphasis on executive impairment)</li>\n<li>Urinary urgency or incontinence</li>\n</ul>\n</li>\n<li>Neuroimaging reveals <strong>enlarged lateral ventricles</strong> (hydrocephalus) with little or <strong>no cortical atrophy</strong>, although the sylvian fissures may appear propped open (so-called &ldquo;<strong>boxcarring</strong>&rdquo;), which can be mistaken for perisylvian atrophy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The pulse waveform of a patient is given below. Which of the following conditions is the patient likely suffering from?",
    "choices": [
      {
        "id": 1,
        "text": "Aortic regurgitation"
      },
      {
        "id": 2,
        "text": "Aortic stenosis"
      },
      {
        "id": 3,
        "text": "Pericardial tamponade"
      },
      {
        "id": 4,
        "text": "Left ventricular failure"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given pulse waveform shows <strong>two peaks in systole</strong>, indicating <strong>pulsus bisferiens</strong>. Of the given options, <strong>aortic regurgitation</strong> causes pulsus bisferiens.</p>\n<p>In <strong>aortic regurgitation</strong>, the <strong>left ventricle receives extra blood due to the incompetent aortic valve</strong>, apart from the normal pulmonary venous blood coming from the left atrium. This <strong>large stroke volume</strong> when <strong>ejected with force</strong> causes the wall of the aorta to collapse due to the <strong>Venturi effect</strong>. This causes a <strong>midsystolic dip</strong> in the blood flow.</p>\n<p>Other options:</p>\n<p>Option B: <strong>Aortic stenosis</strong> causes <strong>pulsus parvus et tardus</strong>. The fixed obstruction of the aortic valve produces a <strong>slow rising pulse</strong> since the rate at which the blood can be ejected out of the left ventricle is restricted.&nbsp;</p>\n<p>Option C: <strong>Pericardial tamponade</strong> causes <strong>pulsus paradoxus</strong>. This is a misnomer, because pulsus paradoxus is actually an <strong>exaggerated fall in the sytolic blood pressure during inspiration</strong>, and has nothing to do with pulse. A <strong>fall of systolic BP up to 10 mmHg</strong> is seen in <strong>normal</strong> individuals during inspiration. In patients with <strong>pericardial tamponade</strong>, there is restricted filling of the left ventricle and thus the <strong>fall in systolic BP is more than 10 mmHg</strong>.&nbsp;</p>\n<p>Option D: In patients with <strong>severe left ventricle failure</strong>, <strong>alternating low</strong> and <strong>high</strong> <strong>volume</strong> <strong>pulse</strong> is seen.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e6bc9c423db04334a6f02374b636853a.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Paroxysmal AV block is associated with",
    "choices": [
      {
        "id": 1,
        "text": "First degree block"
      },
      {
        "id": 2,
        "text": "Type I second degree block"
      },
      {
        "id": 3,
        "text": "Type II second degree block"
      },
      {
        "id": 4,
        "text": "Third degree block"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>Paroxysmal AV block</strong> are <strong>series of nonconducted P waves</strong> associated with <strong>Second-degree AV block (particularly type II).</strong></li>\n<li>It <strong>implies significant conduction system disease</strong> and is an <strong>indication for permanent pacing</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/089cd3f3e419414fa79c4074431d94c4x407x207.PNG"
    ]
  },
  {
    "text": "DIC is commonly seen in",
    "choices": [
      {
        "id": 1,
        "text": "M1 AML"
      },
      {
        "id": 2,
        "text": "M2 AML"
      },
      {
        "id": 3,
        "text": "M3 AML"
      },
      {
        "id": 4,
        "text": "M4 AML"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>M3 AML i.e. acute promyelocytic leukemia is associated with DIC.</p>\n<table style=\"width: 416px;\">\n<tbody>\n<tr>\n<td style=\"width: 187px;\"><strong>Class</strong></td>\n<td style=\"width: 221px;\"><strong>Salient features</strong></td>\n</tr>\n<tr>\n<td style=\"width: 187px;\">M0 &ndash; Minimally differentiated AML</td>\n<td style=\"width: 221px;\">Myeloid lineage blasts</td>\n</tr>\n<tr>\n<td style=\"width: 187px;\">M1 &ndash; AML without maturation</td>\n<td style=\"width: 221px;\">Myeloblasts without maturation (&gt;3% blasts MPO or SBB positive)</td>\n</tr>\n<tr>\n<td style=\"width: 187px;\">M2 &ndash; AML with maturation</td>\n<td style=\"width: 221px;\"><strong>t(8;21)</strong> <strong>Auer rods +</strong> Max incidence of <strong>chloroma</strong></td>\n</tr>\n<tr>\n<td style=\"width: 187px;\">M3 &ndash; Acute promyelocytic leukemia</td>\n<td style=\"width: 221px;\"><strong>t(15;17)</strong> <strong>Auer rods +</strong> Ass with <strong>DIC</strong></td>\n</tr>\n<tr>\n<td style=\"width: 187px;\">M4 &ndash; Acute Myelomonocytic leukemia (Naegli type)</td>\n<td style=\"width: 221px;\"><strong>Inversion 16</strong></td>\n</tr>\n<tr>\n<td style=\"width: 187px;\">M5 &ndash; Acute monocytic leukemia (Schilling type)</td>\n<td style=\"width: 221px;\"><strong>t(9;11)</strong> <strong>Tissue infiltration</strong>Organomegaly</td>\n</tr>\n<tr>\n<td style=\"width: 187px;\">M6 &ndash; Acute erythroleukemia (Di Gugleimo disease)</td>\n<td style=\"width: 221px;\">&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 187px;\">M7 &ndash; Acute megakaryocytic leukemia</td>\n<td style=\"width: 221px;\">As with <strong>myelofibrosis and Down syndrome</strong></td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A disease of which of the following systems is most likely to have resulted in this finding?",
    "choices": [
      {
        "id": 1,
        "text": "Endocrine system"
      },
      {
        "id": 2,
        "text": "Respiratory system"
      },
      {
        "id": 3,
        "text": "Neurologic system"
      },
      {
        "id": 4,
        "text": "Haematopoietic system"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The finding seen above is &ndash;<strong>Dahl&rsquo;s sign/ Thinker&rsquo;s sign/ Target sign</strong></p>\n<ul>\n<li>It is a seen as symmetric, slanting regions of hyperpigmentation on both thighs, as a result of repeated pressure from the elbows on the epidermis of the thighs in patient&rsquo;s spending large amount of time in the <strong>tripod position.</strong></li>\n<li>Seen in patients with advanced <strong>COPD</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e4dd0fb7438b4034b1c7b09164505aad.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Arterial blood gas analysis of a person with liver disease reveals the following results. What type of metabolic and/or respiratory abnormality is likely to be present?",
    "choices": [
      {
        "id": 1,
        "text": "Metabolic alkalosis and compensatory respiratory acidosis"
      },
      {
        "id": 2,
        "text": "High anion gap metabolic acidosis"
      },
      {
        "id": 3,
        "text": "Metabolic acidosis and compensatory respiratory alkalosis"
      },
      {
        "id": 4,
        "text": "Metabolic alkalosis and simultaneous respiratory alkalosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given arterial blood gas (ABG) result shows\u00a0<strong>metabolic alkalosis </strong>plus <strong>respiratory alkalosis</strong>.</p>\n<p>ABG analysis is done to assess disturbances of the normal acid-base homeostasis. It is calculated using the following steps:</p>\n<p>Step 1: Determine if acidemia or alkalemia is present. <strong>Acidemia</strong> is a blood <strong>pH</strong> <strong>below 7.35</strong> and <strong>alkalemia</strong> is a blood pH <strong>above 7.45</strong>.\u00a0</p>\n<p>The ABG given here shows a pH of 7.5 which is above the limit of 7.45. Thus there is <strong>alkalemia</strong>.</p>\n<table style=\"height: 149px; width: 434px;\">\n<tbody>\n<tr style=\"height: 30px;\">\n<td style=\"width: 96px; height: 30px;\">pH = 7.5</td>\n<td style=\"width: 91.9219px; height: 30px;\"><strong>Increased</strong></td>\n<td style=\"width: 223.078px; height: 30px;\">\u00a0Normal - 7.35 to 7.45</td>\n</tr>\n<tr style=\"height: 57.875px;\">\n<td style=\"width: 96px; height: 57.875px;\">PCO<sub>2 </sub>= 35</td>\n<td style=\"width: 91.9219px; height: 57.875px;\">Normal</td>\n<td style=\"width: 223.078px; height: 57.875px;\">\u00a0Normal - 35 to 45 mmHg</td>\n</tr>\n<tr style=\"height: 36px;\">\n<td style=\"width: 96px; height: 36px;\">HCO<sub>3</sub><sup>- </sup>= 32</td>\n<td style=\"width: 91.9219px; height: 36px;\"><strong>Increased</strong></td>\n<td style=\"width: 223.078px; height: 36px;\">\u00a0Normal - 20 to 28\u00a0mEq/L</td>\n</tr>\n</tbody>\n</table>\n<p>Step 2: Look for the cause of acidemia/alkalemia. <strong>Acidosis</strong> is the <strong>pathological process</strong> that causes an <strong>increase</strong> in <strong>hydrogen ions</strong>. <strong>Alkalosis</strong> is the pathological process that causes a <strong>decrease</strong> in hydrogen ions.\u00a0</p>\n<p>Here, the value of HCO<sub><sup>3-</sup>\u00a0</sub>is 32 (increase in bicarbonate ions). PCO<sub>2\u00a0</sub>is within normal limits. Thus, the<strong> primary</strong> acid-base disorder is <strong>metabolic alkalosis</strong>.\u00a0</p>\n<p>During a simple metabolic disorder, you would expect there to be respiratory compensation (and vice versa).\u00a0</p>\n<p>The expected respiratory compensation during metabolic alkalosis is :\u00a0<strong>PCO<sub>2 </sub>= (HCO<sub>3</sub><sup><span style=\"text-decoration: line-through;\">-</span></sup> ) + 15</strong> or\u00a0PCO<sub>2\u00a0</sub>increases by 6 mmHg for each 10mEq/L increase in\u00a0HCO<sub>3</sub><sup>-</sup>\u00a0.\u00a0\u00a0</p>\n<p>Thus, the expected increase in PCO<sub>2</sub> should be 32 + 15\u00a0 = 47 mmHg. However, the\u00a0PCO<sub>2</sub> here is only 35 mmHg and hence there is <strong>no\u00a0respiratory compensation</strong>.</p>\n<p>Step 3: Since CO<sub>2\u00a0</sub>is\u00a035, which is below the compensatory values, it suggests that there is a <strong>simultaneous</strong> <strong>respiratory alkalosis</strong>.</p>\n<p>Thus the ABG above shows a <strong>mixed</strong> disorder of metabolic alkalosis with simultaneous respiratory alkalosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with urinary frequency, nocturia, enuresis. 24 hr urine volume was done and found that it is greater than 3 litres. The urine osmolality was 200 mOsm/L. ADH assay was done and the values revealed 0.8 pg/ml. MRI of brain was done and the T1 weighted image did not reveal any abnormalities. The most likely diagnosis is ?",
    "choices": [
      {
        "id": 1,
        "text": "Nephrogenic DI"
      },
      {
        "id": 2,
        "text": "Primary polydipsia"
      },
      {
        "id": 3,
        "text": "Pituitary DI"
      },
      {
        "id": 4,
        "text": "Mannitol Infusion"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical situation suggests <strong>Primary polydipsia.</strong></p>\n<p><strong>Approach to the question :</strong></p>\n<ul>\n<li>Greater than 3 litres = Polyuria</li>\n<li>Urine osmolality &lt; 300 mOsm/ L = Diabetes insipidus, Primary polydipsia</li>\n<li>Urine osmolality &gt; 300 mOsm/ L = Solute loss (Mannitol infusion, Hypertonic saline)</li>\n<li>ADH assay normal value = 1 pg/ml</li>\n<li>ADH assay &gt; 1 = Nephrogenic DI</li>\n<li>ADH assay &lt; 1 = Primary polydipsia , Central DI</li>\n</ul>\n<p>To differentiate Central DI and Primary polydipsia , MRI brain should be done.</p>\n<ul>\n<li>In case of Primary polydipsia , <strong>Pituitary bright spot</strong> will be <strong>seen</strong>.</li>\n<li>In Central DI , <strong>Pituitary bright spot</strong> will be <strong>absent.</strong></li>\n</ul>\n<p><strong>NOTE:&nbsp;</strong>In <strong>most healthy adults and children</strong>, the <strong>posterior pituitary emits a hyperintense signal</strong> visible in T1-weighted midsagittal images. <strong>This &ldquo;bright spot&rdquo; is almost always present in patients with primary polydipsia</strong> but is always absent<br />or abnormally small in patients with pituitary DI.</p>\n<p>Therefore, when the question says that there were no abnormalities in the MRI, it just means that there is a <strong>pituitary bright spot present</strong>, because it is a finding seen even in healthy people and hence not considered an abnormality.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with headaches, palpitations and profuse sweating. He is a known case of Multiple Endocrine Neoplasia type 2. On abdominal scan adrenal medullary tumors are revealed with size of 2.5 cm. The metabolite most likely involved in producing such symptoms is?",
    "choices": [
      {
        "id": 1,
        "text": "Nor epinephrine"
      },
      {
        "id": 2,
        "text": "Epinephrine"
      },
      {
        "id": 3,
        "text": "Serotonin"
      },
      {
        "id": 4,
        "text": "GABA"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Epinephrine is produced by small adrenal tumors.</p>\n<p>Pheochromocytoma produces :</p>\n<ul>\n<li>Norepinephrine\u00a0 in\n<ul>\n<li>Extra adrenal tumors</li>\n<li>Large adrenal tumors ( &gt; 3 cm)</li>\n</ul>\n</li>\n<li>Epinephrine in\n<ul>\n<li>Small adrenal tumors ( &lt; 3 cm)</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45 year old female presents with symptoms of thyrotoxicosis. The RAIU scan shows increased uptake. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hashimoto\u2019s thyroiditis"
      },
      {
        "id": 2,
        "text": "Struma ovarii"
      },
      {
        "id": 3,
        "text": "Thyrotoxicosis factitia"
      },
      {
        "id": 4,
        "text": "Choriocarcinoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Choriocarcinoma produces beta hCG which acts on TSH receptor to stimulate uptake of Iodine.</p>\n<p>Hence RAIU would show <strong>increased uptake. </strong></p>\n<p><strong>Option A.</strong></p>\n<p><strong>Hashimoto\u2019s thyroiditis</strong></p>\n<p>Any inflammation of thyroid will lead to <strong>reduced Uptake of Iodine.</strong></p>\n<p><strong>Option B. &amp; C.</strong></p>\n<p><strong>Struma ovari and thyrotoxicosis factitia </strong>lead to <strong>reduced TSH</strong> leading to <strong>reduced uptake of iodine</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "SIADH may be seen in all of the following except",
    "choices": [
      {
        "id": 1,
        "text": "Use of vincristine"
      },
      {
        "id": 2,
        "text": "Oat cell carcinoma"
      },
      {
        "id": 3,
        "text": "Porphyria \u2013 acute attack"
      },
      {
        "id": 4,
        "text": "Primary pulmonary emphysema"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>SIADH may be seen in all of the above except\u00a0Primary pulmonary emphysema.</p>\n<p><strong>Pulmonary causes of SIADH:</strong></p>\n<ul>\n<li>Asthma</li>\n<li>Pneumonias (viral, bacterial, tuberculous)</li>\n<li>Pneumothorax</li>\n<li>Atelectasis</li>\n<li>Acute Respiratory Faliure</li>\n<li>Small cell Lung cancer</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old lady complains of weight gain and oligomenorrhea followed by amenorrhea for 8 months. Her blood pressure is measured to be 160/100 mm of Hg. Which of the following is the most appropriate investigation?",
    "choices": [
      {
        "id": 1,
        "text": "Serum electrolytes"
      },
      {
        "id": 2,
        "text": "Plasma cortisol"
      },
      {
        "id": 3,
        "text": "Plasma testosterone and USG"
      },
      {
        "id": 4,
        "text": "T3, T4 and TSH"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical situation suggests a diagnosis of Cushing&rsquo;s disease which is diagnosed by <strong>Cortisol levels.</strong></p>\n<ul>\n<li>Weight gain with oligomenorrhea points to Cushing&rsquo;s syndrome.</li>\n<li>Cortisol inhibits gonadotropin release that explains amenorrhea.</li>\n<li>Hypertension in these patients is secondary to increased cortisol that has some mineralocorticoid activity also.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Best test for diagnosis of carcinoid tumor is",
    "choices": [
      {
        "id": 1,
        "text": "24 hour catecholamines"
      },
      {
        "id": 2,
        "text": "24 hour metanephrine levels"
      },
      {
        "id": 3,
        "text": "24 hour vanillyl mandelic acid levels"
      },
      {
        "id": 4,
        "text": "24 hour urinary 5 H.I.A.A"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li><strong>5 Hydroxy Indole Acetic acid</strong> is a urinary metabolite of serotonin.</li>\n<li><strong>Serotonin</strong> and <strong>5- HIAA</strong> are produced in excess by most carcinoid tumors.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common cranial nerve involved in sarcoidosis:",
    "choices": [
      {
        "id": 1,
        "text": "3"
      },
      {
        "id": 2,
        "text": "5"
      },
      {
        "id": 3,
        "text": "7"
      },
      {
        "id": 4,
        "text": "8"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>The <strong>most common cranial nerve involved in Sarcoidosis is the seventh nerve</strong>, which can be <strong>affected bilaterally</strong>.</li>\n<li><strong>Nerve biopsy</strong> can reveal <strong>noncaseating granulomas</strong> infiltrating the endoneurium, perineurium, and epineurium along with <strong>lymphocytic necrotizing angiitis</strong>.</li>\n<li>Neurosarcoidosis may respond to treatment with <strong>glucocorticoids or other immunosuppressive agents.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25 year old man with 3 weeks fever presented with tricuspid valve vegetation. Patient is intravenous drug abuser. Most common cause of endocarditis in this patient is:",
    "choices": [
      {
        "id": 1,
        "text": "Staphylococcus aureus"
      },
      {
        "id": 2,
        "text": "Candida albicans"
      },
      {
        "id": 3,
        "text": "Pseudomonas"
      },
      {
        "id": 4,
        "text": "Streptococcus Viridians"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Staphylococcus aureus is the most common cause of&nbsp;endocarditis in Intravenous drug users.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Type of MODY associated with renal cyst is",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "3"
      },
      {
        "id": 3,
        "text": "5"
      },
      {
        "id": 4,
        "text": "7"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>MODY 5</strong> is associated with <strong>renal cyst</strong>.</li>\n<li><strong>Most common type of MODY- MODY 3</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The features given in the images is characteristic of",
    "choices": [
      {
        "id": 1,
        "text": "Hand foot and mouth disease"
      },
      {
        "id": 2,
        "text": "IBD related enteropathic arthropathy"
      },
      {
        "id": 3,
        "text": "Reactive arthritis"
      },
      {
        "id": 4,
        "text": "Peripheral vascular disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>The image shows classical Keratoderma blenorrhagica which is an extra articular manifestation of reactive arthritis. </li>\n<li>Previously this condition was called Reiter&rsquo;s disease.</li>\n</ul>\n<p>Other extra articular manifestations includes:</p>\n<ul>\n<li>Uveitis </li>\n<li>Diarrhoea</li>\n</ul>\n<p>Articular manifestations include:</p>\n<ul>\n<li><strong>Asymmetrical oligo arthritis of large joint </strong></li>\n<li><strong>Additive type of arthritis</strong> </li>\n</ul>\n<p>Diagnosis:</p>\n<ul>\n<li>Mostly Clinical , shows HLA B27 positivity </li>\n</ul>\n<p>Treatment:&nbsp;</p>\n<ul>\n<li>First line- <strong>NSAIDS</strong> (&gt;80% resolution)&nbsp;</li>\n<li>Start with sulphasalazine &amp; Methotrexate if no resolution or if erosions are present</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dd45489e359d40638e6cd75edc1bcae7.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Massive myoclonus is a hallmark of which stage of SSPE?",
    "choices": [
      {
        "id": 1,
        "text": "Stage 1"
      },
      {
        "id": 2,
        "text": "Stage 2"
      },
      {
        "id": 3,
        "text": "Stage 3"
      },
      {
        "id": 4,
        "text": "Stage 4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Clinical stages of subacute sclerosis panencephalitis:</strong></p>\n<table style=\"width: 174px;\">\n<tbody>\n<tr>\n<td style=\"width: 33px;\">Stage&nbsp;</td>\n<td style=\"width: 135px;\">Clinical manifestations&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 33px;\">Stage I&nbsp;</td>\n<td style=\"width: 135px;\">Personality changes, failure in school, strange&nbsp;behaviour&nbsp;&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 33px;\"><strong>Stage II&nbsp;</strong></td>\n<td style=\"width: 135px;\"><strong>Massive, repetitive, and frequent myoclonic jerks, seizures and dementia&nbsp;&nbsp;</strong></td>\n</tr>\n<tr>\n<td style=\"width: 33px;\">Stage III&nbsp;</td>\n<td style=\"width: 135px;\">Rigidity, extrapyramidal symptoms, and progressive unresponsiveness&nbsp;&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 33px;\">Stage IV&nbsp;</td>\n<td style=\"width: 135px;\">Coma, vegetative state, autonomic failure, and akinetic mutism&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Infraclavicular lesion of TB is called as",
    "choices": [
      {
        "id": 1,
        "text": "Rich focus"
      },
      {
        "id": 2,
        "text": "Ghon focus"
      },
      {
        "id": 3,
        "text": "Assmann's focus"
      },
      {
        "id": 4,
        "text": "Simon's focus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Lesions in TB include:</strong></p>\n<ul>\n<li><strong>Ghons focus</strong> - Beneath the pleura in the basal segment of the upper or apical segment of lower lobe.</li>\n<li>Ghon complex - Ghon focus+ Involvement of regional lymph node.</li>\n<li>Ghon lesions - Calcified healed primary TB lesions.</li>\n<li>Ranke's complex - I/L calcified hilar lymphadenopathy with Ghon lesions.</li>\n<li><strong>Simon's focus</strong> - Apical scarring with appearance of fibronodular patch.</li>\n<li>Puhl's lesion - Lesion at apex of lung in chronic TB.</li>\n<li><strong>Assmann focus</strong> - Infraclavicular lesion.</li>\n<li><strong>Rich focus</strong> - TB calcified foci in brain, meninges and spinal cord.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Find the incorrect match of PFT value in the following regarding emphysema",
    "choices": [
      {
        "id": 1,
        "text": "TLC- Increased"
      },
      {
        "id": 2,
        "text": "FEV1/FVC- Decreased"
      },
      {
        "id": 3,
        "text": "DLCO \u2013 decreased"
      },
      {
        "id": 4,
        "text": "Compliance \u2013 Decreased"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Compliance is increased</strong> in cases of emphysema as opposed to the other obstructive diseases.</p>\n<p><strong>PFT values in Emphysema:</strong></p>\n<p>Loss of lung elastic recoil- Hyperinflation leads to.</p>\n<ul>\n<li><strong>TLC-Increased.</strong></li>\n<li><strong>RV-Increased.</strong></li>\n<li><strong>FRC-Increased.</strong></li>\n<li>Severe elevation of RV leads to FVC-Decreased.</li>\n<li>Loss of lung elastic recoil reduces the pressure driving maximal expiratory flow leads to.</li>\n<li>FEV<sub>1</sub>- Decreased.</li>\n<li>FEV1/FVC-Decreased.</li>\n<li><strong>DLCO- Decreased.</strong></li>\n<li><strong>Compliance = Change in volume / Change in pressure</strong>.</li>\n<li>Emphysema &ndash; compliance is increased(mainly static compliance is increased).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The definition of fever of unknown origin (FUO) includes all of the following, except:",
    "choices": [
      {
        "id": 1,
        "text": "Undiagnosed after one week of investigation"
      },
      {
        "id": 2,
        "text": "Immuno compromised status should be ruled out"
      },
      {
        "id": 3,
        "text": "Temperature more than 38.3 C"
      },
      {
        "id": 4,
        "text": "Fever persisting for more than 3 weeks"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The current definition of <strong>fever of unknown origin (FUO)</strong> does <strong>not include</strong> undiagnosed after one week of investigation. The criterion \"diagnosis uncertain, after 1 week of evaluation\" which was previously a part of the definition has been removed.</p>\n<p><strong>FUO </strong>is currently defined as:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Fever \u226538.3\u00b0C</strong> (\u2265101\u00b0F) on at least <strong>two occasions\u00a0</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Duration of <strong>\u22653 weeks</strong></li>\n<li aria-level=\"1\"><strong>No known immunocompromised state</strong></li>\n<li aria-level=\"1\"><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Diagnosis is uncertain </strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">after thorough history-taking, physical examination, and obligatory investigations.</span></li>\n</ul>\n<p><strong>Inflammation of Unknown Origin (IUO)</strong> is closely related to FUO. It has the same definition, <strong>except for the body temperature </strong>criterion. IUO is characterized by elevated inflammatory parameters (such as CRP or ESR) on multiple occasions for at least three weeks in an immunocompetent patient with normal body temperature. The causes and workups for IUO are similar to those for FUO.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A diabetic patient who has developed chronic renal failure is prescribed a dipeptidyl-peptidase 4 (DPP4) inhibitor. No dose adjustment was done. Which of the following drugs was most likely prescribed to him?",
    "choices": [
      {
        "id": 1,
        "text": "Dulaglutide"
      },
      {
        "id": 2,
        "text": "Vildagliptin"
      },
      {
        "id": 3,
        "text": "Linagliptin"
      },
      {
        "id": 4,
        "text": "Pramlintide"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Among the given options, the drug that was most likely prescribed to this patient is<strong>\u00a0linagliptin. </strong>It is a <strong>DPP-4 inhibitor</strong> that\u00a0can be <strong>safely used in renal failure.</strong>\u00a0It is mainly <strong>excreted</strong> through the <strong>hepatobiliary route.</strong></p>\n<p>DPP4 inhibitors are orally acting novel drugs that act by the <strong>incretin pathway</strong> and stimulate <strong>insulin secretion</strong>. These drugs have significantly lesser chances of hypoglycemic side effects. These drugs are <strong>mainly eliminated unchanged by the kidneys,</strong> except\u00a0<strong>Linagliptin</strong> which is eliminated by the<strong> hepatobiliary route</strong> and is therefore considered relatively safer in a patient with renal failure.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/feef159a142d4c04a39692ab831ad5fcx410x514.JPEG"
    ]
  },
  {
    "text": "Lymphangioleiomyomatosis (LAM) is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Prepubertal males"
      },
      {
        "id": 2,
        "text": "Post menopausal females"
      },
      {
        "id": 3,
        "text": "Pre menopausal females"
      },
      {
        "id": 4,
        "text": "Post pubertal males and females"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Lymphangioleiomyomatosis (LAM) is seen in premenopausal females. ILD (Interstitial lung disease), in general, occur more commonly in women.</p>\n<p><br /><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Gender predisposition in ILDs</strong></p>\n<table style=\"height: 123px;\" width=\"406\">\n<tbody>\n<tr>\n<td style=\"width: 202px;\"><strong>Women</strong></td>\n<td style=\"width: 188px;\"><strong>Men</strong></td>\n</tr>\n<tr>\n<td style=\"width: 202px;\">Exclusively in premenopausal women:LAM Pulmonary involvement in Tuberous Sclerosis</td>\n<td style=\"width: 188px;\">Pneumoconiosis (due to occupational exposure to asbestos, beryllium, and silica)</td>\n</tr>\n<tr>\n<td style=\"width: 202px;\">ILDs in association with CTD(connective tissue disorder) (except ILD is associated with rheumatoid arthritis)</td>\n<td style=\"width: 188px;\">ILD is associated with rheumatoid arthritis&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 202px;\">&nbsp;</td>\n<td style=\"width: 188px;\">IPF (Idiopathic pulmonary fibrosis)</td>\n</tr>\n<tr>\n<td style=\"width: 202px;\">&nbsp;</td>\n<td style=\"width: 188px;\">Pulmonary LCH (Langerhans cell histiocytosis)</td>\n</tr>\n</tbody>\n</table>\n<p>Lymphangioleiomyomatosis</p>\n<p>Seen in young women with recurrent pneumothorax or chylous effusion. The disease accelerates during pregnancy and abates after oophorectomy. <strong>HRCT shows thin-walled cysts</strong> surrounded by normal lung parenchyma. It is associated with meningioma. <strong>Marker: HMB-45.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "ANCA positivity is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Cryoglobulinemic vasculitis"
      },
      {
        "id": 2,
        "text": "Hypersensitivity vasculitis"
      },
      {
        "id": 3,
        "text": "Microscopic polyangiitis"
      },
      {
        "id": 4,
        "text": "Cogan\u2019s syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>ANCA (Antineutrophilic cytoplasmic antibody) positivity is seen in certain types of vasculitis. There are 2 types: c ANCA and p ANCA &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>\n<table style=\"height: 156px; width: 374px;\">\n<tbody>\n<tr>\n<td style=\"width: 64px;\">&nbsp;</td>\n<td style=\"width: 94px;\"><strong>c ANCA</strong></td>\n<td style=\"width: 200px;\"><strong>p ANCA</strong></td>\n</tr>\n<tr>\n<td style=\"width: 64px;\"><strong>Location of ANCA</strong></td>\n<td style=\"width: 94px;\">Cytoplasmic</td>\n<td style=\"width: 200px;\">Perinuclear</td>\n</tr>\n<tr>\n<td style=\"width: 64px;\"><strong>Target antigen</strong></td>\n<td style=\"width: 94px;\">Proteinase 3</td>\n<td style=\"width: 200px;\">Myeloperoxidase</td>\n</tr>\n<tr>\n<td style=\"width: 64px;\"><strong>Positive in:</strong></td>\n<td style=\"width: 94px;\">Wegener&rsquo;s granulomatosis(Granulomatosis with polyangiitis)</td>\n<td style=\"width: 200px;\">Microscopic polyangiitisChurg-Strauss syndrome</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Mucosal neuromas, marfanoid habitus, medullated corneal nerve fibres and megacolon are conditions associated with which of the following syndromes?",
    "choices": [
      {
        "id": 1,
        "text": "MEN 1"
      },
      {
        "id": 2,
        "text": "MEN 2A"
      },
      {
        "id": 3,
        "text": "MEN 3"
      },
      {
        "id": 4,
        "text": "MEN 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>MEN 2B is also called MEN 3. It arises from a mutation in RET protoncogene and is characterized by:<br />&bull; Medullary thyroid cancer (&gt;90%)<br />&bull; Pheochromocytoma (&gt;50%)<br />&bull; Associated abnormalities;<br />&bull; Mucosal neuromas<br />&bull; Marfanoid habitus<br />&bull; Medullated corneal nerve fibres<br />&bull; Megacolon</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Medicine St 3';
        const quizFilename = 'medicine-st-3-5f90bab7.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>