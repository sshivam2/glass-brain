<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>215 Medicine Neet 2018 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Medicine
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">29</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Thrombosis of posterior inferior cerebellar artery causes _______.",
    "choices": [
      {
        "id": 1,
        "text": "Lateral medullary syndrome"
      },
      {
        "id": 2,
        "text": "Weber syndrome"
      },
      {
        "id": 3,
        "text": "Medial medullary syndrome"
      },
      {
        "id": 4,
        "text": "Millard Gubler syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p class=\"p1\">Thrombosis of the <strong>posterior inferior cerebellar artery</strong> (PICA) causes <strong>lateral medullary syndrome</strong> or <strong>Wallenberg syndrome</strong>.</p>\n<p class=\"p1\"><strong>PICA</strong> is a branch of the fourth part of the <strong>vertebral artery</strong>, which is a branch of the first part of <strong>subclavian artery</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/40ef020f58e54dd99bd2f163755f47c2x684x680.PNG"
    ]
  },
  {
    "text": "A patient presents with frequent urination, nocturia, and enuresis. 24-hour urine volume was measured and recorded to be 7 liters. The urine osmolarity was 260 mOsm/L. ADH assay was performed and the recorded values were reported as 0.8 pg/ml. An MRI of the brain was performed and T1 weighted indicated the absence of the bright spot. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Nephrogenic DI"
      },
      {
        "id": 2,
        "text": "Primary polydipsia"
      },
      {
        "id": 3,
        "text": "Pituitary DI"
      },
      {
        "id": 4,
        "text": "Mannitol infusion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Diabetes Insipidus(DI) :</strong>\u00a0</p>\n<table style=\"border-collapse: collapse; width: 54.0797%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 33%;\"><strong>Types\u00a0</strong></td>\n<td style=\"width: 33%;\"><strong>Primary pathology</strong></td>\n<td style=\"width: 41.8497%;\"><strong>Caused by</strong></td>\n</tr>\n<tr>\n<td style=\"width: 33%;\">Pituitary/ Central DI</td>\n<td style=\"width: 33%;\">Primary deficiency of ADH secretion</td>\n<td style=\"width: 41.8497%;\">AVP -Neurophysin II gene(most common gene defect)</td>\n</tr>\n<tr>\n<td style=\"width: 33%;\">Primary polydipsia</td>\n<td style=\"width: 33%;\">\n<p>Suppression of ADH secretion by excessive fluid intake</p>\n<p>\u00a0</p>\n</td>\n<td style=\"width: 41.8497%;\">\n<p>1. Dipsogenic DI : Following head trauma, TB meningitis, Multiple sclerosis.\u00a0</p>\n<p>2. Psychogenic DI : Due to psychosis or OCD</p>\n<p>3. Iatrogenic polydipsia : Due to motivated health benefits</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 33%;\">Gestational DI</td>\n<td style=\"width: 33%;\">Deficiency due to Increased degradation of ADH\u00a0</td>\n<td style=\"width: 41.8497%;\">\n<p>N terminal aminopeptidase produced by placenta</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 33%;\">Nephrogenic DI</td>\n<td style=\"width: 33%;\">Renal insensitivity to ADH or drugs like lithium or genetic mutation</td>\n<td style=\"width: 41.8497%;\">\n<p>defect in gene encoding V2 receptor on chXq28(most common gene defect)</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Treatment:</p>\n<ul>\n<li>For <strong>Central DI</strong>, synthetic analog\u00a0of ADH\u00a0<strong>Desmopressin(DDAVP)</strong> is used.\u00a0</li>\n<li>For <strong>Nephrogenic DI</strong>, a <strong>low sodium diet</strong> with <strong>thiazide</strong> diuretic and/or <strong>amiloride</strong> and <strong>prostaglandin synthesis inhibitor</strong> is used.\u00a0</li>\n<li>For <strong>primary polydipsia</strong>, there are no effective drugs used but for <strong>Iatrogenic</strong> type <strong>patient education</strong> is helpful.\u00a0</li>\n</ul>\n<p>Other options:</p>\n<p>Option A: In <strong>nephrogenic DI</strong>, there is <strong>polyuria</strong>, <strong>low</strong> urine osmolarity but the <strong>ADH levels </strong>will be <strong>&gt;1pg/mL</strong>.</p>\n<p>Option B: In <strong>primary polydipsia</strong>, there is<strong> polyuria</strong>, <strong>low</strong> urine osmolarity, <strong>ADH levels</strong> will be <strong>&lt;1pg/mL</strong> but a <strong>pituitary bright spot present</strong>.</p>\n<p>Option D: In<strong> solute loss</strong> (mannitol or hypertonic saline infusion), urine osmolality is <strong>&gt;300 mOsm/L</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/40ce57f3a4ba43f1956fdf52bc56059ax1200x1923.JPEG"
    ]
  },
  {
    "text": "What levels of prolactin are definitely suggestive of prolactinoma?",
    "choices": [
      {
        "id": 1,
        "text": ">50\u03bcg/L"
      },
      {
        "id": 2,
        "text": ">100\u03bcg/L"
      },
      {
        "id": 3,
        "text": ">150\u03bcg/L"
      },
      {
        "id": 4,
        "text": ">200\u03bcg/L"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The diagnosis of a <strong>prolactinoma</strong> is highly likely when prolactin levels are <strong>&gt; 200 &mu;g/L</strong>.</p>\n<p>The <strong>normal</strong> range of serum prolactin (PRL) is <strong>5-20 &mu;g/L</strong>. Prolactin levels &lt; 100 &mu;g/L can be due to non-functioning pituitary adenomas or non-neoplastic causes of hyperprolactinemia. MRI brain must be done in all patients with hyperprolactinemia.</p>\n<p>Prolactinoma are tumors arising from the <strong>lactotroph cells</strong> of the <strong>pituitary gland</strong>, they can be classified as <strong>microadenoma</strong>(&lt;1cm in diameter, usually non invasive ) or <strong>macroadenoma</strong>(&gt;1cm, locally invasive to adjacent structures). Clinical features include amenorrhea, infertility, and galactorrhea in women, impotence, loss of libido, infertility in men and if tumor extends beyond sella, there can be visual field defects and other mass effects. </p>\n<p>Treatment - In <strong>asymptomatic</strong> patients and those where <strong>fertility is not desired</strong>, they do <strong>not require treatment</strong> and can be monitored using <strong>regular PRL</strong> measurements and <strong>MRI</strong>.&nbsp;In <strong>symptomatic microadenoma</strong> cases, <strong>oral dopamine agonists</strong> (cabergoline and bromocriptine) form the main treatment for hyperprolactinemia and reduction of tumor volume.&nbsp;For <strong>macroadenoma</strong>, before starting dopamine agonists <strong>visual field testing</strong> is to be done, and reassess it with <strong>MRI changes every 6-12 month</strong> intervals until maximum reduction is achieved, in <strong>unresponsive</strong> cases consider <strong>surgery</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient develops prosthetic valve endocarditis 2 years after valve replacement surgery. Which of the following organism is the most likely cause?",
    "choices": [
      {
        "id": 1,
        "text": "Streptococci"
      },
      {
        "id": 2,
        "text": "Staphylococcus aureus"
      },
      {
        "id": 3,
        "text": "Coagulase negative staphylococci"
      },
      {
        "id": 4,
        "text": "HACEK organisms"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Patient developing endocarditis 2 years after prosthetic valve surgery suggests <strong>late-onset endocarditis</strong>. In such cases, the most common causative organism is <strong>streptococci.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common extra-articular manifestation of rheumatoid arthritis?",
    "choices": [
      {
        "id": 1,
        "text": "Subcutaneous nodule"
      },
      {
        "id": 2,
        "text": "Sjogren's syndrome"
      },
      {
        "id": 3,
        "text": "Felty's syndrome"
      },
      {
        "id": 4,
        "text": "Vasculitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Patients who have a history of cigarette smoking had early onset arthritic manifestations and tested <strong>positive</strong> for <strong>RA factor</strong> or <strong>ACPA</strong> are more likely to develop <strong>extra-articular manifestations</strong>. Other common extra-articular manifestations include secondary Sjogren's syndrome, interstitial lung disease, pulmonary nodules, and anemia. FELTY&rsquo;S syndrome is a triad of neutropenia, splenomegaly, and nodular RA.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Periodic acid Schiff positive macrophages are seen in:",
    "choices": [
      {
        "id": 1,
        "text": "Agammaglobulinemia"
      },
      {
        "id": 2,
        "text": "Whipple's disease"
      },
      {
        "id": 3,
        "text": "Abetalipoproteinemia"
      },
      {
        "id": 4,
        "text": "Crohn's disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Whipple's disease is a <strong>chronic infection</strong> caused by <strong><em>Tropheryma whipplei</em></strong>, classically presents as <strong>chronic diarrhea</strong>, abdominal pain, <strong>intermittent fever</strong>, weight loss, <strong>arthralgia/arthritis</strong> with <strong>neurological</strong>(cognitive changes progressing to dementia, personality and mood alterations, hypothalamic involvement and supranuclear ophthalmoplegia) and <strong>cardiological</strong> involvement (endocarditis, congestive heart failure, embolic events, aneurysms).</p>\n<p>Investigations- <strong>Intestinal biopsy</strong> showing <strong>PAS-positive diastase</strong> resistant inclusions in <strong>lamina propria</strong>, specific PCR-based diagnosis has higher sensitivity. <strong>Urine PCR</strong> is an important tool to assess the <strong>success of therapy</strong>.</p>\n<p>Treatment- <strong>IV ceftriaxone</strong> (2 g q12h) or <strong>meropenem</strong> (2 g q8h) for 2&ndash;4 weeks and then treated with <strong>oral doxycycline</strong>, or minocycline plus hydroxy- chloroquine for at least 1 year. Trimethoprim/Sulfamethoxazole is used as an oral alternative, but high relapses.&nbsp;&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0216f81d94af4ef89c0d9bc9e6c49211x1280x1574.JPEG"
    ]
  },
  {
    "text": "According to the berlin definition, moderate ARDS is characterized by all, except",
    "choices": [
      {
        "id": 1,
        "text": "PaO2/FiO2 200 - 300mm/Hg"
      },
      {
        "id": 2,
        "text": "Bilateral interstitial infiltrates"
      },
      {
        "id": 3,
        "text": "Symptom onset within a week"
      },
      {
        "id": 4,
        "text": "No cardiac failure on echocardiography"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Moderate ARDS</strong> is characterized by PaO2/FiO2: <strong>101 - 200 mmHg</strong>.&nbsp;PaO2/FiO2: <strong>200 - 300 mm/Hg</strong> is classified as <strong>mild ARDS</strong>.&nbsp;<br /><br /><strong>Diagnostic criteria</strong> in ARDS&mdash;<strong>Berlin definition</strong>:(requires each of the following criteria to be present to diagnose ARDS)</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Onset - Acute</strong>: Respiratory symptoms must have begun <strong>&lt; 1 week</strong> of a known clinical insult</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Bilateral alveolar</strong> or <strong>interstitial infiltrates</strong>: on a chest X-ray image or CT scan</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Respiratory failure must not be fully explained by cardiac failure or fluid overload. Objective assessment e.g Echo should be done in cases of no known cause.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Impairment of oxygenation: The severity of hypoxemia defines the severity of ARDS.</li>\n</ul>\n<table style=\"width: 399px; height: 271px;\">\n<tbody>\n<tr style=\"height: 17px;\">\n<td style=\"height: 17px; width: 88px; text-align: center;\">\n<p><strong>Severity</strong></p>\n</td>\n<td style=\"height: 17px; width: 302px; text-align: center;\">\n<p><strong> PaO<sub>2</sub>/FiO<sub>2</sub></strong></p>\n<p>(On ventilator settings that include PEEP&nbsp;&ge;5 cm H<sub>2</sub>O)</p>\n</td>\n</tr>\n<tr style=\"height: 7px;\">\n<td style=\"height: 7px; width: 88px; text-align: center;\">\n<p><strong>Mild</strong></p>\n</td>\n<td style=\"height: 7px; width: 302px; text-align: center;\">\n<p><strong>&gt; 200 mmHg </strong>but<strong> &le; 300 mmHg</strong></p>\n</td>\n</tr>\n<tr style=\"height: 82px;\">\n<td style=\"height: 82px; width: 88px; text-align: center;\">\n<p><strong>Moderate</strong></p>\n</td>\n<td style=\"height: 82px; width: 302px; text-align: center;\"><strong>&gt; 100 mmHg </strong>but<strong> &le; 200 mmHg</strong></td>\n</tr>\n<tr style=\"height: 55px;\">\n<td style=\"height: 55px; width: 88px; text-align: center;\"><strong>Severe</strong></td>\n<td style=\"height: 55px; width: 302px; text-align: center;\"><strong>&le; 100 mmHg</strong></td>\n</tr>\n</tbody>\n</table>\n<p>Note:&nbsp;American-European Consensus Conference (AECC) classification of ARDS is no longer used.</p>\n<p>Image: Alveolar/interstitial infiltrates in ARDS patient</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0e8043c881b441c788b8c7892cbcc720x720x806.JPEG"
    ]
  },
  {
    "text": "Low serum copper levels attributed to ATP7A gene is due to:",
    "choices": [
      {
        "id": 1,
        "text": "Dubin-Johnson syndrome"
      },
      {
        "id": 2,
        "text": "Wilson's disease"
      },
      {
        "id": 3,
        "text": "Menke's disease"
      },
      {
        "id": 4,
        "text": "Gilbert's syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Aceruloplasminemia</strong> is an <strong>autosomal recessive</strong> disease characterized by tissue <strong>iron overload</strong>, mental deterioration, <strong>microcytic anemia</strong>, and <strong>low serum iron</strong> and <strong>copper</strong> concentrations.<br /><br />Option B: <strong>Low serum copper</strong>&nbsp;and <strong>low ceruloplasmin</strong> is also seen in <strong>Wilson&rsquo;s disease</strong>, but is associated with the gene defect <strong>ATP7B</strong>&nbsp;on <strong>chromosome 13</strong>. It&nbsp;is an <strong>autosomal recessive</strong> disorder of copper metabolism with features of hepatolenticular degeneration and <strong>Kayser Fleischer ring</strong>.&nbsp; &nbsp;</p>\n<p>Option A: <strong>Dubin Johnson Syndrome</strong> is an <strong>autosomal recessive</strong> disorder characterized by impaired canalicular excretion of bilirubin due to mutation in <strong>MRP-2 protein</strong> leading to <strong>conjugated hyperbilirubinemia</strong>.&nbsp;</p>\n<p>Option D: <strong>Gilbert&rsquo;s Syndrome</strong> is characterized by <strong>decreased UDP glucuronyl transferase</strong> activity leading to <strong>unconjugated hyperbilirubinemia</strong>, which can be <strong>autosomal recessive</strong> or<strong> dominant</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with cutaneous vasculitis, glomerulonephritis, and peripheral neuropathy. Which investigation should be performed next to help you diagnose the condition?",
    "choices": [
      {
        "id": 1,
        "text": "ANCA"
      },
      {
        "id": 2,
        "text": "RA factor"
      },
      {
        "id": 3,
        "text": "HbsAg"
      },
      {
        "id": 4,
        "text": "MIF"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Small Vessel Vasculitis/ ANCA- associated Vasculitis</p>\n<table style=\"width: 785px;\">\n<tbody>\n<tr style=\"height: 96px;\">\n<td style=\"width: 248.215px; text-align: center; height: 96px;\">\n<p><strong>Granulomatosis with Polyangiitis</strong></p>\n<p>(Wegener's granulomatosis)</p>\n</td>\n<td style=\"width: 272.785px; text-align: center; height: 96px;\"><strong>Microscopic Polyangiitis</strong></td>\n<td style=\"width: 268px; text-align: center; height: 96px;\">\n<p><strong>Eosinophilic granulomatosis with Polyangiitis</strong></p>\n<p>(Churg Strauss syndrome)</p>\n</td>\n</tr>\n<tr style=\"height: 90px;\">\n<td style=\"width: 248.215px; text-align: center; height: 90px;\">Characterized by a triad of <strong>upper and lower respiratory tract</strong> involvement with <strong>glomerulonephritis</strong>.</td>\n<td style=\"width: 272.785px; text-align: center; height: 90px;\">Characterized by <strong>necrotizing vasculitis</strong> with <strong>glomerulonephritis</strong>(pauci immune, crescentic)</td>\n<td style=\"width: 268px; text-align: center; height: 90px;\">Characterized by <strong>asthma</strong>, <strong>peripheral and tissue eosinophilia</strong>, <strong>extravascular granuloma</strong> formation, and <strong>vasculitis</strong> of multiple organs.</td>\n</tr>\n<tr style=\"height: 114px;\">\n<td style=\"width: 248.215px; text-align: center; height: 114px;\"><strong>Nodular cavitary infiltrates</strong> in lungs showing necrotizing granulomas, and vasculitis on lung biopsy</td>\n<td style=\"width: 272.785px; text-align: center; height: 114px;\">\n<p><strong>Diffuse alveolar hemorrhage</strong>, <strong>hemoptysis</strong>.</p>\n<p>No URTI, No granulomas, No&nbsp;pulmonary nodules/cavities.</p>\n</td>\n<td style=\"width: 268px; text-align: center; height: 114px;\">\n<p><strong>Mononeuritis multiplex</strong> - most common and characteristic.</p>\n<p>Biopsy showing granulomas with eosinophilic infiltrates.&nbsp;</p>\n</td>\n</tr>\n<tr style=\"height: 15.9913px;\">\n<td style=\"width: 248.215px; text-align: center; height: 15.9913px;\"><strong>C-ANCA +</strong></td>\n<td style=\"width: 272.785px; text-align: center; height: 15.9913px;\"><strong>P-ANCA +</strong></td>\n<td style=\"width: 268px; text-align: center; height: 15.9913px;\"><strong>P-ANCA +</strong></td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the approximate time interval between HIV infection & manifestation of AIDS?",
    "choices": [
      {
        "id": 1,
        "text": "7.5 years"
      },
      {
        "id": 2,
        "text": "10 years"
      },
      {
        "id": 3,
        "text": "12 years"
      },
      {
        "id": 4,
        "text": "5 years"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>After exposure to the HIV virus, there occurs <strong>primary infection</strong> following an incubation period of <strong>2-4 weeks</strong>, which is usually symptomatic in more than 50% of cases, following <strong>3-6 weeks</strong> there is <strong>acute HIV syndrome</strong> due to wide dissemination of the virus, characterized by fever, sore throat, diarrhea, lymphadenopathy, and rash.</p>\n<p>This <strong>peak viremia drops</strong> as the <strong>immune response develops</strong>, to reach a <strong>plateau</strong> about <strong>3 months later</strong>.&nbsp;Following this there is a prolonged period of <strong>clinical latency</strong>, during which infected individuals are <strong>asymptomatic</strong>, lasting for a median of <strong>10 years</strong>.</p>\n<p>Following this period, <strong>chronic persistent infection</strong> develops which is the hallmark of HIV disease called&nbsp;<strong>Acquired immunodeficiency syndrome</strong> (AIDS).</p>\n<p>Long-term non-progressors: a small part of <strong>untreated HIV-infected</strong> people with <strong>CD4 counts</strong> within the <strong>reference range</strong> for <strong>&gt;10 years</strong>.&nbsp;</p>\n<p>Elite controllers: Some <strong>long-term non-progressors</strong> have <strong>undetectable viral loads</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3427d6415f6a4fbaa5309f656fe49894x1280x1475.JPEG"
    ]
  },
  {
    "text": "Myasthenia gravis is associated with __________.",
    "choices": [
      {
        "id": 1,
        "text": "Decreased acetylcholine release at the nerve endings"
      },
      {
        "id": 2,
        "text": "Decreased myosin"
      },
      {
        "id": 3,
        "text": "Absence of troponin C"
      },
      {
        "id": 4,
        "text": "Decreased synaptic transmission at the myoneural junction"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<table style=\"width: 520px;\">\n<tbody>\n<tr>\n<td style=\"width: 250.299px; text-align: center;\"><strong>Myasthenia gravis</strong></td>\n<td style=\"width: 277.701px; text-align: center;\"><strong>Lambert Eaton Myasthenic Syndrome</strong></td>\n</tr>\n<tr>\n<td style=\"width: 250.299px;\"><strong>Postsynaptic</strong> condition</td>\n<td style=\"width: 277.701px;\"><strong>Pre synaptic</strong> condition</td>\n</tr>\n<tr>\n<td style=\"width: 250.299px;\">Antibodies against <strong>AchR</strong>, <strong>MuSK</strong>, <strong>LRP-4</strong></td>\n<td style=\"width: 277.701px;\">Antibodies against fast <strong>P/Q type calcium channel</strong></td>\n</tr>\n<tr>\n<td style=\"width: 250.299px;\">Earliest manifestation - <strong>ptosis</strong>, <strong>diplopia</strong></td>\n<td style=\"width: 277.701px;\">Earliest manifestation - <strong>proximal muscles</strong> of <strong>lower limb</strong> involvement</td>\n</tr>\n<tr>\n<td style=\"width: 250.299px;\">DTR - <strong>normal</strong></td>\n<td style=\"width: 277.701px;\">DTR - <strong>depressed/ absent</strong></td>\n</tr>\n<tr>\n<td style=\"width: 250.299px;\">Autonomic changes - <strong>absent</strong></td>\n<td style=\"width: 277.701px;\">Autonomic changes - <strong>present</strong> like dry mouth and impotence</td>\n</tr>\n<tr>\n<td style=\"width: 250.299px;\">On exertion - <strong>increased weakness</strong> seen</td>\n<td style=\"width: 277.701px;\">On exertion - <strong>decreased weakness</strong> seen</td>\n</tr>\n<tr>\n<td style=\"width: 250.299px;\">EMG(repeated nerve stimulation) - <strong>decremental response</strong></td>\n<td style=\"width: 277.701px;\">EMG(repeated nerve stimulation) - <strong>incremental response</strong></td>\n</tr>\n<tr>\n<td style=\"width: 250.299px;\">Associated with <strong>thymic</strong> abnormality</td>\n<td style=\"width: 277.701px;\">Associated with <strong>small cell carcinoma</strong> of <strong>lung</strong> in older adults</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following is wrong regarding Weber\u2019s syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Contralateral hemiplegia"
      },
      {
        "id": 2,
        "text": "Ipsilateral oculomotor nerve palsy"
      },
      {
        "id": 3,
        "text": "Contralateral Parkinsonism"
      },
      {
        "id": 4,
        "text": "Ipsilateral paralysis of lower face"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p class=\"p1\"><strong>Ipsilateral paralysis</strong> of the <strong>lower face</strong> is <strong>not</strong> seen in <strong>Weber's syndrome</strong>. However, there is <strong>contralateral paralysis</strong> of the <strong>lower face</strong>.</p>\n<p class=\"p1\">Weber syndrome is caused by <strong>infarction</strong> in the distribution of the penetrating branches of the <strong>posterior cerebral artery</strong> (PCA). It affects the <strong>cerebral peduncle</strong>, especially medially, with damage to the fascicle of cranial nerve III and the pyramidal fibers.</p>\n<p class=\"p1\">The resultant clinical findings are <strong>contralateral hemiplegia</strong> of the <strong>face</strong>, <strong>arm</strong>, and <strong>leg</strong> secondary to corticospinal and corticobulbar tract involvement, and <strong>ipsilateral</strong> <strong>oculomotor paresis</strong> including a <strong>dilated pupil</strong>.</p>\n<p class=\"p1\">\u00a0</p>\n<table class=\"t1\" style=\"width: 474px; height: 463.781px;\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr style=\"height: 54.3984px;\">\n<td class=\"td1\" style=\"width: 195.762px; text-align: center; height: 54.3984px;\" valign=\"top\">\n<p class=\"p1\"><strong>Structure damaged</strong></p>\n</td>\n<td class=\"td1\" style=\"width: 272.237px; text-align: center; height: 54.3984px;\" valign=\"top\">\n<p class=\"p1\"><strong>Effect</strong></p>\n</td>\n</tr>\n<tr style=\"height: 121.594px;\">\n<td class=\"td1\" style=\"width: 195.762px; text-align: left; height: 121.594px;\" valign=\"top\">\n<p class=\"p1\">Cranial nerve III fibres</p>\n</td>\n<td class=\"td1\" style=\"width: 272.237px; text-align: left; height: 121.594px;\" valign=\"top\">\n<ul>\n<li class=\"p1\">Ipsilateral ptosis</li>\n<li class=\"p1\">Ipsilateral divergent squint</li>\n<li class=\"p1\">Loss of accommodation reflex</li>\n<li class=\"p1\">Loss of light reflex</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 76.7969px;\">\n<td class=\"td1\" style=\"width: 195.762px; text-align: left; height: 76.7969px;\" valign=\"top\">\n<p class=\"p1\">Corticobulbar tract</p>\n</td>\n<td class=\"td1\" style=\"width: 272.237px; text-align: left; height: 76.7969px;\" valign=\"top\">\n<p class=\"p1\">UMN lesion leading to contralateral paralysis of the lower face</p>\n</td>\n</tr>\n<tr style=\"height: 54.3984px;\">\n<td class=\"td1\" style=\"width: 195.762px; text-align: left; height: 54.3984px;\" valign=\"top\">\n<p class=\"p1\">Corticospinal tract</p>\n</td>\n<td class=\"td1\" style=\"width: 272.237px; text-align: left; height: 54.3984px;\" valign=\"top\">\n<p class=\"p1\">Contralateral hemiplegia</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d63fecab667c4879933074b5ce214f69x1280x1287.JPEG"
    ]
  },
  {
    "text": "A 10-year-old boy complains of multiple episodes of acute severe pain in his fingers and toes which resolves on its own for the past 1 year. Which of the following conditions is he most likely suffering from?",
    "choices": [
      {
        "id": 1,
        "text": "Alpha-thalassemia"
      },
      {
        "id": 2,
        "text": "Beta-thalassemia"
      },
      {
        "id": 3,
        "text": "Sickle cell anemia"
      },
      {
        "id": 4,
        "text": "Von Willebrand disease type 1"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The features of multiple <strong>episodes</strong> of <strong>acute severe pain</strong> in <strong>fingers and toes</strong> with <strong>spontaneous resolution</strong> are suggestive of <strong>dactylitis</strong> (hand-foot syndrome), which usually occurs in <strong>sickle cell anemia</strong>.</p>\n<p>The <strong>sickled RBCs</strong> have a sticking tendency towards the <strong>endothelium</strong> of the <strong>small venules</strong>. These abnormalities provoke unpredictable <strong>episodes</strong> <strong>of</strong> <strong>vaso-occlusion</strong>. <strong>Dactylitis</strong> is characterized by <strong>severe pain</strong> affecting the <strong>bones</strong> of the <strong>hands</strong>, <strong>feet</strong>, or both. It is often the <strong>first symptom</strong> of sickle cell anemia in children.</p>\n<p>Treatment - Administration of <strong>patient-controlled analgesia</strong> or a frequent <strong>fixed dose</strong> of <strong>opioids</strong> with <strong>rescue doses</strong> for breakthrough pain are preferred with frequent monitoring during the initial 48-72 hrs to prevent unexpected death due to arrhythmias or pulmonary embolism.</p>\n<p>Other manifestations include:</p>\n<ul>\n<li><strong>Splenic autoinfarction</strong> - repeated splenic microinfarcts&nbsp;</li>\n<li><strong>Acute splenic sequestration</strong> - venous obstruction, needing emergency transfusion/splenectomy</li>\n<li><strong>Painful ischemic crises</strong> - vaso-occlusion in connective and musculoskeletal tissue</li>\n<li>Renal papillary necrosis leading to <strong>isosthenuria</strong></li>\n<li>Cerebrovascular <strong>strokes</strong></li>\n<li>Chronic lower <strong>leg ulcers</strong></li>\n<li><strong>Priapism</strong> in males</li>\n</ul>\n<p><strong>&alpha;-thalassemia&nbsp;</strong>(Option A) and <strong>&beta;-thalassemia&nbsp;</strong>(Option B) are characterized by <strong>pallor</strong>, <strong>jaundice</strong>, growth failure, <strong>hepatosplenomegaly</strong>, characteristic <strong>thalassemic facies</strong>, and <strong>hair-on-end appearance</strong> of the <strong>skull</strong>.</p>\n<p>Option D: <strong>Von Willebrand Disease</strong> is characterized by predominantly <strong>mucosal bleeding</strong> symptoms like excessive bruising and epistaxis.&nbsp;&nbsp;&nbsp;&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Cryoglobulinemia is associated with _______.",
    "choices": [
      {
        "id": 1,
        "text": "Hepatitis C"
      },
      {
        "id": 2,
        "text": "Ovarian cancer"
      },
      {
        "id": 3,
        "text": "Diabetes"
      },
      {
        "id": 4,
        "text": "Leukemia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Cryoglobulinemia</strong> is associated with <strong>hepatitis C</strong> infection.</p>\n<p>Following Hepatitis C infection, there is an aberrant <strong>immune response</strong> leading to an&nbsp;<strong>immune complex formation</strong> containing <strong>hepatitis C antigens</strong>, <strong>polyclonal IgG</strong> specific to Hepatitis C, and <strong>monoclonal IgM rheumatoid factor</strong>, which triggers an <strong>inflammatory cascade</strong> results in Cryoglobulinemic <strong>vasculitis</strong>.</p>\n<p><strong>Cryoglobulins</strong> are the <strong>immunoglobulins</strong> that <strong>precipitate</strong> at temperatures <strong>less than 37&deg;C</strong>, the presence of these cryoglobulins in serum leads to Cryoglobulinemia, which is characterized by <strong>cutaneous vasculitis</strong>, <strong>palpable purpura</strong>, <strong>arthritis</strong>, <strong>peripheral neuropathy</strong>, and <strong>glomerulonephritis</strong>.</p>\n<p>Important conditions associated with cryoglobulinemia are:</p>\n<ul>\n<li><strong>Hepatitis C</strong></li>\n<li>Multiple myeloma</li>\n<li>Connective tissue disorders</li>\n<li>Lymphoproliferative disorders</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the characteristic pattern seen in Brown-Sequard syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Contralateral loss of joint sense and position"
      },
      {
        "id": 2,
        "text": "Contralateral loss of pain sensation"
      },
      {
        "id": 3,
        "text": "Ipsilateral loss of complete sensory functions"
      },
      {
        "id": 4,
        "text": "Contralateral motor functions"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>Brown&ndash;Sequard syndrome</strong> presents with <strong>contralateral&nbsp;loss of pain sensation</strong>.</p>\n<p><strong>Lateral</strong> <strong>hemisection</strong> of the spinal cord produces the <strong>Brown&ndash;S&eacute;quard syndrome</strong>&nbsp;<span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;knife or bullet injuries and demyelination are the most common.&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:14915,&quot;3&quot;:{&quot;1&quot;:0},&quot;4&quot;:{&quot;1&quot;:2,&quot;2&quot;:16777215},&quot;9&quot;:0,&quot;12&quot;:0,&quot;14&quot;:{&quot;1&quot;:2,&quot;2&quot;:2302755},&quot;15&quot;:&quot;Arial, \\&quot;Helvetica Neue\\&quot;, Helvetica, sans-serif&quot;,&quot;16&quot;:12}\">(also known as the hemicord syndrome)</span>.&nbsp;<span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;knife or bullet injuries and demyelination are the most common.&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:14915,&quot;3&quot;:{&quot;1&quot;:0},&quot;4&quot;:{&quot;1&quot;:2,&quot;2&quot;:16777215},&quot;9&quot;:0,&quot;12&quot;:0,&quot;14&quot;:{&quot;1&quot;:2,&quot;2&quot;:2302755},&quot;15&quot;:&quot;Arial, \\&quot;Helvetica Neue\\&quot;, Helvetica, sans-serif&quot;,&quot;16&quot;:12}\">Knife or bullet injuries and demyelination are the most common causes of&nbsp;this condition.</span></p>\n<p>Clinical features include:</p>\n<ul>\n<li><strong>Ipsilateral weakness</strong> (corticospinal tract involvement)&nbsp;</li>\n<li><strong>Ipsilateral loss</strong> of <strong>joint position</strong> and <strong>vibratory sense</strong> (posterior column involvement)</li>\n<li><strong>Contralateral loss</strong> of <strong>pain</strong> and <strong>temperature</strong> sense (spinothalamic tract involvement) one or two levels below the lesion</li>\n<li><strong>Ipsilateral</strong> segmental signs like <strong>radicular pain</strong>, <strong>muscle atrophy</strong>, or <strong>loss</strong> of a <strong>deep tendon reflex</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child presents with hepatitis and progressive neurological degeneration. A picture of his eye has been provided below. Among the following options, what would be the initial step regarding the investigations done for this child's diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Serum ceruloplasmin levels"
      },
      {
        "id": 2,
        "text": "Serum copper levels"
      },
      {
        "id": 3,
        "text": "Enzyme assay"
      },
      {
        "id": 4,
        "text": "Karyotyping"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Option B: The role of total <strong>serum copper</strong> in the diagnosis of <strong>Wilson's</strong> disease is <strong>limited</strong>. Measurement of serum ceruloplasmin and urinary copper is preferred.</p>\n<p>Option C: <strong>ATP7B enzyme assays</strong> have shown promise in early studies as a <strong>neonatal screening test</strong> for Wilson's disease. However, it is <strong>not</strong> yet part of <strong>routine</strong> clinical practice.</p>\n<p>Option D: <strong>Karyotyping</strong> is done for every <strong>asymptomatic</strong> 1st and 2nd degree relative of a patient with Wilson&rsquo;s disease. This helps <strong>differentiate</strong> the <strong>carriers (heterozygous)</strong> from the <strong>patients (homozygous)</strong> and can lead to early initiation of treatment before the onset of symptoms.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/eb23fc76116647f2b380907ac0e35b62.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Automatic implantable cardioverter-defibrillator (AICD) implantation is done for which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Brugada syndrome"
      },
      {
        "id": 2,
        "text": "Ventricular fibrillation"
      },
      {
        "id": 3,
        "text": "Acute coronary syndrome with low ejection fraction"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>An <strong>Automated Implantable Cardioverter-Defibrillator</strong> (AICD) is a device placed in the chest or abdomen to <strong>detect arrhythmias</strong> and perform <strong>cardioversion</strong>, <strong>defibrillation</strong>, and <strong>pace the heart</strong>.</p>\n<p>It is used in:&nbsp;-</p>\n<ul>\n<li><strong>Brugada syndrome</strong>- refers to a sodium channelopathy with a high risk of arrhythmias that can lead to sudden cardiac death.</li>\n<li><strong>Ventricular fibrillation</strong> and ventricular tachycardia.</li>\n<li><strong>Acute coronary syndrome</strong> with a <strong>low ejection fraction</strong>.</li>\n</ul>\n<p><strong>ICDs</strong> are indicated for <strong>primary prevention</strong> in patients who had <strong>myocardial infarction &gt;40 days ago</strong> (with Class II-III NYHA Heart failure with LVEF &lt;35% and Class I NYHA with LVEF &lt;30%). <strong>Cardiac resynchronization therapy</strong> for <strong>prevention of sudden cardiac death</strong> in heart failure. High-risk situations of sudden cardiac death in hypertrophic cardiomyopathy, non-ischemic dilated cardiomyopathy with low ejection fraction.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Pseudo P pulmonale is seen in which electrolyte abnormality?",
    "choices": [
      {
        "id": 1,
        "text": "Hypokalemia"
      },
      {
        "id": 2,
        "text": "Hyponatremia"
      },
      {
        "id": 3,
        "text": "Hypocalcemia"
      },
      {
        "id": 4,
        "text": "Hypercalcemia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Hypocalcemia (Option C) prolongs the QT interval.</p>\n<p>Hypercalcemia&nbsp;(Option D) shortens the QT interval.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4d9e8473516241d69ff4a08b5b764be4x1280x2207.JPEG"
    ]
  },
  {
    "text": "The Gold's criteria for very severe COPD is:",
    "choices": [
      {
        "id": 1,
        "text": "FEV1/FVC <0.7 and FEV1 < 30%"
      },
      {
        "id": 2,
        "text": "FEV1/FVC <0.7 and  FEV1 < 70%"
      },
      {
        "id": 3,
        "text": "FEV1/FVC<0.7 and  FEV1< 50%"
      },
      {
        "id": 4,
        "text": "Both A and C"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Gold's criteria for <strong>very severe COPD</strong> (stage IV) are <strong>FEV1/FVC &lt;0.7</strong> and<strong> FEV1 &lt; 30%</strong>.</p>\n<p>The severity of COPD is assessed by <strong>Global Initiative for Chronic Obstructive Lung Disease</strong> (GOLD) classification:</p>\n<table>\n<tbody>\n<tr>\n<td width=\"77\">\n<p><strong>GOLD Stage</strong></p>\n</td>\n<td width=\"102\">\n<p><strong>Severity </strong></p>\n</td>\n<td width=\"198\">\n<p><strong>Spirometry </strong></p>\n</td>\n</tr>\n<tr>\n<td width=\"77\">\n<p>I</p>\n</td>\n<td width=\"102\">\n<p>Mild</p>\n</td>\n<td width=\"198\">\n<p>FEV1/FVC &lt;0.7 and FEV1 &ge;80% predicted</p>\n</td>\n</tr>\n<tr>\n<td width=\"77\">\n<p>II</p>\n</td>\n<td width=\"102\">\n<p>Moderate</p>\n</td>\n<td width=\"198\">\n<p>FEV1/FVC &lt;0.7 and FEV1 &ge;50% but &lt;80% predicted</p>\n</td>\n</tr>\n<tr>\n<td width=\"77\">\n<p>III</p>\n</td>\n<td width=\"102\">\n<p>Severe</p>\n</td>\n<td width=\"198\">\n<p>FEV1/FVC &lt;0.7 and FEV1 &ge;30% but &lt;50% predicted</p>\n</td>\n</tr>\n<tr>\n<td width=\"77\">\n<p>IV</p>\n</td>\n<td width=\"102\">\n<p>Very severe</p>\n</td>\n<td width=\"198\">\n<p>FEV1/FVC &lt;0.7 and FEV1 &lt;30% predicted</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Note: FEV1/FVC and FEV1 predicted are measured after the administration of a bronchodilator.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/eda7f0cf5ada48ac9b474ce986cfb27fx1280x1348.JPEG"
    ]
  },
  {
    "text": "A 35-year-old female patient has hypokalemia, hypertension and metabolic alkalosis. What is the most likely etiology?",
    "choices": [
      {
        "id": 1,
        "text": "Bartter syndrome"
      },
      {
        "id": 2,
        "text": "Gitelman's syndrome"
      },
      {
        "id": 3,
        "text": "Liddle's syndrome"
      },
      {
        "id": 4,
        "text": "Fanconi's syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Hypertension with hypokalemia and metabolic alkalosis is seen in <strong>Liddle's syndrome</strong>.</p>\n<p>Liddle's syndrome (pseudo aldosteronism) is an <strong>autosomal dominant</strong> condition that is caused due to the <strong>increased activation of ENaC channels</strong>. This causes increased reabsorption of Na+ exchanged for K+ causing <strong>hypokalemia</strong>. Increased Na absorption leads to <strong>hypertension</strong>, and there is also a loss of H+ ion with K+, leading to <strong>metabolic alkalosis</strong>. It is associated with <strong>low renin</strong>&nbsp;and <strong>low aldosterone</strong> levels.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the diagnostic test of choice for HIV in a baby born to an HIV-infected mother?",
    "choices": [
      {
        "id": 1,
        "text": "HIV DNA PCR"
      },
      {
        "id": 2,
        "text": "Cord blood ELISA"
      },
      {
        "id": 3,
        "text": "Western blot"
      },
      {
        "id": 4,
        "text": "Third generation ELISA"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In a <strong>baby</strong> born to an <strong>HIV-infected mother</strong>, HIV infection is diagnosed using <strong>HIV DNA PCR</strong>. NACO recommends the use of a qualitative HIV-1 DNA PCR (NAT) in children aged &lt;18 months for <strong>Early Infant Diagnosis&nbsp;</strong>(EID).</p>\n<p><strong>Antibody assays</strong> (e.g., ELISA) are <strong>not reliable</strong> in infants and young children because of the persistence of transplacentally acquired maternal antibodies. For this reason, HIV virologic testing must be performed using tests that detect HIV DNA or RNA to diagnose HIV infection in children.</p>\n<p><strong>Scheduled repeated testing</strong> is necessary because test sensitivity increases with time from HIV virus exposure and very recent infection will not be detectable. The <strong>cord blood</strong> should <strong>not be used</strong> for testing because of the possibility of contamination of the sample with maternal blood.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a common feature of allergic bronchopulmonary aspergillosis?",
    "choices": [
      {
        "id": 1,
        "text": "Distal bronchiectasis"
      },
      {
        "id": 2,
        "text": "Cough"
      },
      {
        "id": 3,
        "text": "Wheezing"
      },
      {
        "id": 4,
        "text": "Raised serum IgE levels"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Central bronchiectasis</strong> is a typical feature of <strong>allergic bronchopulmonary aspergillosis</strong> (ABPA), <strong>not distal bronchiectasis</strong>.&nbsp;</p>\n<p>ABPA is an <strong>eosinophilic pulmonary disorder</strong> caused by a <strong>hypersensitivity</strong> reaction to the <strong>colonization</strong> of airways by the fungus<strong> <em>Aspergillus fumigatus</em></strong>. It occurs almost exclusively in patients with <strong>asthma</strong> (~2.5% of patients) or <strong>cystic fibrosis</strong> (up to 15%). In chronic cases, repeated episodes of bronchial obstruction, inflammation, and mucoid impaction can lead to bronchiectasis, fibrosis, and respiratory compromise. While <strong>central bronchiectasis</strong> is characteristic, some patients can develop <strong>chronic cavitary lesions</strong>.</p>\n<p>With the development of ABPA, asthma or cystic fibrosis typically worsens and may manifest with a new or worsening cough or an increase in sputum production or wheezing. Many patients report coughing up thick sputum casts. The presence of <strong>hyperattenuating mucus</strong> in the airways is <strong>highly specific</strong>.</p>\n<p>ABPA is diagnosed serologically, based on the presence of:<br /><strong>Serum IgE &gt; 1000 IU/ml</strong><br />Positive skin prick test or IgE levels against <em>A. fumigatus</em> extract<br />Detection of Aspergillus-specific antibodies<br /><strong>Eosinophilia &gt;500 cells/&mu;L</strong></p>\n<p>Treatment - The use of <strong>systemic glucocorticoids</strong> is indicated for ABPA, but the course should be <strong>tapered by 3-6 months</strong>. <strong>Antifungal agents</strong> like itraconazole, voriconazole, and newer azoles can be used for over 4 months to control disease activity. <strong>Monoclonal antibodies</strong> against IgE, IL-4, and IL-5 receptors can be used for <strong>severe refractory cases</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 58-year-old male patient has been diagnosed with hypertension.  On examination, there is no existing cardiovascular disease, no hypertension mediated organ damage (HMOD) and the renal function is normal. He should be immediately started with pharmacological management if his blood pressure is more than ______.",
    "choices": [
      {
        "id": 1,
        "text": ">130/80 mmHg"
      },
      {
        "id": 2,
        "text": "\u2265160/100 mmHg"
      },
      {
        "id": 3,
        "text": "> 150/100 mmHg"
      },
      {
        "id": 4,
        "text": "\u2265140/90 mmHg"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In this patient with <strong>no markers</strong> of cardiovascular disease, <strong>no</strong>\u00a0<strong>hypertension-mediated end-organ damage</strong> (HMOD), and <strong>normal renal function</strong>, <strong>immediate pharmacological treatment</strong> is recommended when the <strong>blood pressure</strong> (BP) is <strong>\u2265140/90 mmHg</strong> according to the <strong>AHA </strong>and <strong>ESH </strong>on the management of hypertension.</p>\n<p>Guidelines for Hypertension Management:</p>\n<ul>\n<li>Adults 18\u201379 y with SBP \u2265140 mm\u2009Hg or DBP \u226590 mm\u2009Hg</li>\n<li>Adults \u226580 y with SBP \u2265160 mm\u2009Hg but \u2265140 mm\u2009Hg can be considered.</li>\n<li>In frail patients, individualize treatment.</li>\n<li>In patients with CVD, especially CAD, SBP \u2265130 mm\u2009Hg, or DBP \u226580 mm\u2009Hg.</li>\n</ul>\n<p>Treatment BP targets:</p>\n<ul>\n<li>Adults 18\u201379 y, primary SBP/DBP goal &lt;140/90 mm\u2009Hg; if treatment well tolerated target SBP/DBP &lt;130/80 mm\u2009Hg but not SBP &lt;120 mm\u2009Hg or DBP &lt;70 mm\u2009Hg. For adults with isolated systolic hypertension, target SBP lowering, albeit cautiously.</li>\n<li>In adults \u226580 y, target SBP/DBP &lt;140/90 mm\u2009Hg, if well tolerated</li>\n</ul>\n<p>AHA Hypertension grading:</p>\n<table style=\"border-collapse: collapse; width: 90.0188%; height: 134.39px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 33.3648%; height: 22.3984px;\"><strong>BLOOD PRESSURE CATEGORY</strong></td>\n<td style=\"width: 33.3648%; height: 22.3984px;\"><strong>SYSTOLIC BP</strong></td>\n<td style=\"width: 33.2705%; height: 22.3984px;\"><strong>DIASTOLIC BP</strong></td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 33.3648%; height: 22.3984px;\">Normal\u00a0</td>\n<td style=\"width: 33.3648%; height: 22.3984px;\">&lt;120 mmHg</td>\n<td style=\"width: 33.2705%; height: 22.3984px;\">&lt;80 mmHg</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 33.3648%; height: 22.3984px;\">Elevated</td>\n<td style=\"width: 33.3648%; height: 22.3984px;\">120-129 mmHg</td>\n<td style=\"width: 33.2705%; height: 22.3984px;\">&lt;80 mmHg</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 33.3648%; height: 22.3984px;\">Stage 1</td>\n<td style=\"width: 33.3648%; height: 22.3984px;\">130-139 mmHg</td>\n<td style=\"width: 33.2705%; height: 22.3984px;\">80-89 mmHg</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 33.3648%; height: 22.3984px;\">Stage 2</td>\n<td style=\"width: 33.3648%; height: 22.3984px;\">\u2265140 mmHg</td>\n<td style=\"width: 33.2705%; height: 22.3984px;\">\u226590 mmHg</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 33.3648%; height: 22.3984px;\">Hypertensive crisis</td>\n<td style=\"width: 33.3648%; height: 22.3984px;\">\u2265180 mmHg</td>\n<td style=\"width: 33.2705%; height: 22.3984px;\">\u2265120 mmHg</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A middle-aged woman who presented with tremors, palpitations, weight loss, and menstrual irregularities is diagnosed with Graves' disease. Which of the following statements would be correct with respect to her thyroid function test?",
    "choices": [
      {
        "id": 1,
        "text": "Low TSH levels"
      },
      {
        "id": 2,
        "text": "Low free T4 levels"
      },
      {
        "id": 3,
        "text": "Low  serum T3 levels"
      },
      {
        "id": 4,
        "text": "Radioactive Iodine Uptake (RAIU) at 24 hours below normal"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In <strong>Graves' disease</strong>, the level of <strong>serum TSH</strong> is <strong>low</strong>, <strong>free T4</strong> is <strong>high</strong> and <strong>serum T3</strong> is <strong>high</strong>. In patients with <strong>thyrotoxicosis</strong>, the <strong>radioactive iodine uptake</strong> (RAIU) at <strong>24 hours</strong> is <strong>characteristically elevated</strong>.</p>\n<p>Grave&rsquo;s disease is characterized by<strong> thyrotoxicosis</strong> caused by <strong>thyroid-stimulating immunoglobulins</strong> (TSIs) synthesized by lymphocytes in the thyroid gland, bone marrow, and lymph nodes. <strong>Thyroid peroxidase</strong> (TPO) and <strong>thyroglobulin</strong> (Tg) antibodies are also seen. This results in <strong>excess</strong> production of <strong>free T3</strong> and <strong>free T4</strong> levels and in turn <strong>reduces</strong> serum <strong>TSH</strong> levels.</p>\n<p><strong>RAIU</strong> is used to <strong>differentiate</strong> <strong>Grave&rsquo;s from other thyroid disorders</strong>, here there is diffuse high uptake. Measurement of TRab and TPOs is also done to confirm the diagnosis if the diagnosis clinically is unclear. </p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/64adfd0224b446ae8efab0bb6d1b5b2ax1200x2321.JPEG"
    ]
  },
  {
    "text": "The observed myocardial stunning pattern does not match the ECG findings of a patient. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Takotsubo cardiomyopathy"
      },
      {
        "id": 2,
        "text": "Restrictive cardiomyopathy"
      },
      {
        "id": 3,
        "text": "Brigade's cardiomyopathy"
      },
      {
        "id": 4,
        "text": "Pericardial tamponade"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Option B: <strong>Restrictive cardiomyopathy</strong> is characterized by <strong>diastolic dysfunction</strong> with <strong>reduced contractility</strong> <strong>and ejection fraction</strong>, most commonly seen in amyloidosis, and enlarged ventricles on imaging with <strong>low-voltage ECG complexes</strong>.</p>\n<p>Option C: <strong>Arrhythmogenic right ventricular cardiomyopathy&nbsp;</strong>(ARVC) is a type of <strong>familial dilated cardiomyopathy&nbsp;</strong>(DCM), having defects in desmosomal proteins, affecting the ventricles showing <strong>thin ventricular walls</strong> on Echo, <strong>epsilon waves</strong>, and <strong>low voltage ECG complexes</strong>.<br /> <br />Option D: <strong>Pericardial tamponade</strong> is characterized by <strong>hypotension</strong>, <strong>muffled heart sounds</strong> and <strong>increased jugular venous pressure</strong> with muffled heart sounds with <strong>total electrical alternans</strong> and <strong>sinus tachycardia</strong> in ECG. </p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following antiretroviral drugs is not used in HIV & hepatitis B co-infection?",
    "choices": [
      {
        "id": 1,
        "text": "Tenofovir"
      },
      {
        "id": 2,
        "text": "Abacavir"
      },
      {
        "id": 3,
        "text": "Lamivudine"
      },
      {
        "id": 4,
        "text": "Emtricitabine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Abacavir</strong> is <strong>not used</strong> in <strong>HIV and hepatitis-B co-infection</strong>. It is used in the <strong>first-line ART regimen</strong> for patients with <strong>abnormal serum creatinine</strong> values.</p>\n<p>Nucleoside reverse transcriptase inhibitor (NRTI) drugs like&nbsp;<strong>lamivudine,</strong>&nbsp;its closely related drug <strong>emtricitabine,</strong> and the nucleotide reverse transcriptase inhibitor (NRTI) <strong>t</strong><strong>enofovir</strong>&nbsp;have activity <strong>against hepatitis B virus</strong>.&nbsp;These drugs are preferred in combination with other antiretrovirals for the treatment of HIV &amp; HBV co-infections.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Who comes under category III non-heart-beating donor?",
    "choices": [
      {
        "id": 1,
        "text": "A patient who died during transportation to the hospital"
      },
      {
        "id": 2,
        "text": "A patient who died after failed resuscitation after reaching the hospital"
      },
      {
        "id": 3,
        "text": "A patient who was brought dead to the hospital"
      },
      {
        "id": 4,
        "text": "A patient who is awaiting death in the hospital"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Category III donors</strong> are patients&nbsp;with <strong>non-survivable injuries</strong> who have their <strong>treatment withdrawn</strong> and if such patients wished in life to be <strong>organ donors</strong>, the transplant team can attend at the time of treatment withdrawal and <strong>retrieve organs after cardiac arrest</strong> has occurred.</p>\n<p><strong>Modified Maastricht classification</strong>- Categories of non-heart-beating donors:</p>\n<div id=\"__sec3\" class=\"sec sec-last\">\n<p class=\"p p-last\">&nbsp;</p>\n<table style=\"height: 280px; width: 504.859px;\">\n<tbody>\n<tr style=\"height: 20px;\">\n<td style=\"width: 90px; height: 20px;\">Category</td>\n<td style=\"width: 233px; height: 20px;\">Description</td>\n<td style=\"width: 155.859px; height: 20px;\">Circumstances</td>\n</tr>\n<tr style=\"height: 132px;\">\n<td style=\"width: 90px; height: 132px;\">Category I</td>\n<td style=\"width: 233px; height: 132px;\">Includes <strong>victims of accident and suicide</strong> who are<strong> found dead at the scene</strong> and resuscitation is deemed pointless (e.g. fatal cervical spine fracture).</td>\n<td style=\"width: 155.859px; height: 132px;\">Uncontrolled - transplant team not present or prepared&nbsp;</td>\n</tr>\n<tr style=\"height: 132px;\">\n<td style=\"width: 90px; height: 132px;\">Category II</td>\n<td style=\"width: 233px; height: 132px;\"><strong>victims of sudden cardiac or cerebral catastrophe</strong> who are brought to emergency departments while being resuscitated by ambulance personnel or who <strong>died in the department</strong>. Other sources include patients suffering an isolated brain injury, anoxia, and stroke, and victims of major trauma who died soon after hospital admission.</td>\n<td style=\"width: 155.859px; height: 132px;\">\n<div id=\"__sec2\" class=\"sec sec-first\">&nbsp;</div>\n<div id=\"__sec3\" class=\"sec sec-last\">Uncontrolled - transplant team not present or prepared&nbsp; &nbsp;&nbsp;</div>\n&nbsp;</td>\n</tr>\n<tr style=\"height: 132px;\">\n<td style=\"width: 90px; height: 132px;\">Category III</td>\n<td style=\"width: 233px; height: 132px;\">Patients who are dying, often in an intensive care unit. These are the patients awaiting cardiac arrest where the treating clinicians have decided to withdraw treatment and not commence resuscitation for various reasons.</td>\n<td style=\"width: 155.859px; height: 132px;\">\n<div id=\"__sec2\" class=\"sec sec-first\">\n<p class=\"p p-last\">Controlled - transplant team present and prepared</p>\n</div>\n<div id=\"__sec3\" class=\"sec sec-last\">&nbsp;</div>\n&nbsp;</td>\n</tr>\n<tr style=\"height: 132px;\">\n<td style=\"width: 90px; height: 132px;\">Category IV</td>\n<td style=\"width: 233px; height: 132px;\">Comprises patients who suffer <strong>unexpected cardiac arrest</strong> during or after the determination of <strong>brain death.</strong></td>\n<td style=\"width: 155.859px; height: 132px;\">\n<div id=\"__sec2\" class=\"sec sec-first\">\n<p class=\"p p-last\">Controlled - transplant team present and prepared</p>\n</div>\n<div id=\"__sec3\" class=\"sec sec-last\">&nbsp;</div>\n&nbsp;</td>\n</tr>\n<tr style=\"height: 132px;\">\n<td style=\"width: 90px; height: 132px;\">\n<p class=\"p p-last\">Category V&nbsp;</p>\n</td>\n<td style=\"width: 233px; height: 132px;\"><strong>Unexpected cardiac arrest</strong> during <strong>intensive care</strong> -</td>\n<td style=\"width: 155.859px; height: 132px;\">\n<div id=\"__sec3\" class=\"sec sec-last\">Uncontrolled - transplant team not present or prepared&nbsp; &nbsp;&nbsp;</div>\n&nbsp;</td>\n</tr>\n</tbody>\n</table>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following conditions is associated with AV block?",
    "choices": [
      {
        "id": 1,
        "text": "Hypothyroidism"
      },
      {
        "id": 2,
        "text": "Cushing's syndrome"
      },
      {
        "id": 3,
        "text": "Hyperthyroidism"
      },
      {
        "id": 4,
        "text": "Pheochromocytoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Hypothyroidism</strong> is associated with <strong>AV block</strong>. In hypothyroidism, there is <strong>reduced myocardial contractility</strong> and <strong>reduced pulse rate</strong> leading to a <strong>reduced stroke volume</strong> and <strong>bradycardia</strong>, <strong>AV block</strong>.</p>\n<p><strong>Causes of AV block:</strong></p>\n<p><strong>Autonomic:</strong></p>\n<ul>\n<li>Carotid sinus hypersensitivity</li>\n</ul>\n<p><strong>Metabolic</strong>:</p>\n<ul>\n<li>Hyperkalemia</li>\n<li>Hypermagnesemia</li>\n<li>Hypothyroidism</li>\n<li>Adrenal insufficiency</li>\n</ul>\n<p><strong>Drug related:</strong></p>\n<ul>\n<li>Beta blockers</li>\n<li>Calcium channel blockers</li>\n<li>Adenosine</li>\n<li>Digitalis</li>\n<li>Lithium</li>\n<li>Class 1 and class 3 anti arrhythmics</li>\n</ul>\n<p><strong>Infections:</strong></p>\n<ul>\n<li>Endocarditis</li>\n<li>Lyme disease</li>\n<li>Chaga's disease</li>\n<li>Syphilis</li>\n<li>Tuberculosis</li>\n<li>Diphtheria</li>\n<li>Toxoplasmosis</li>\n</ul>\n<p><strong>Inflammatory:</strong></p>\n<ul>\n<li>SLE</li>\n<li>RA</li>\n<li>Scleroderma</li>\n</ul>\n<p><strong>Infiltrative:</strong></p>\n<ul>\n<li>Amyloidosis</li>\n<li>Sarcoidosis</li>\n<li>Hemachromatosis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which drug is used for mass chemoprophylaxis for meningococcal meningitis?",
    "choices": [
      {
        "id": 1,
        "text": "Ciprofloxacin"
      },
      {
        "id": 2,
        "text": "Chloramphenicol"
      },
      {
        "id": 3,
        "text": "Tetracycline"
      },
      {
        "id": 4,
        "text": "Penicillin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Ciprofloxacin</strong> is used for <strong>chemoprophylaxis</strong> of <strong>meningococcal meningitis</strong> for <strong>close contacts</strong>. Ceftriaxone and rifampicin are also used.</p>\n<p>Antibiotic chemoprophylaxis among close contacts of a patient with invasive meningococcal disease is recommended to <strong>prevent secondary cases.</strong></p>\n<ul>\n<li><strong>Rifampin</strong> - was <strong>earlier used</strong> widely, but is <strong>not optimal</strong>&nbsp;due to the high risk of adverse events, emerging resistance, and the need for compliance for four doses.</li>\n<li><strong>Ciprofloxacin</strong> - widely used as a single oral dose, but it <strong>cannot be given</strong> in <strong>pregnancy</strong> and those <strong>below 18</strong> <strong>years</strong> of age.</li>\n<li><strong>Ceftriaxone</strong> - can be given in pregnancy and all ages&nbsp;as a <strong>single IM or IV dose</strong>. However, reduced susceptibility of isolates to ceftriaxone has occasionally been reported.</li>\n</ul>\n<p>Recommended chemoprophylaxis for high-risk close contacts for meningococcal meningitis:&nbsp;</p>\n<table style=\"height: 306px; width: 415px; float: left;\">\n<tbody>\n<tr style=\"height: 54px;\">\n<td style=\"width: 97px; height: 54px;\"><strong>Patient group</strong></td>\n<td style=\"width: 97px; height: 54px;\"><strong>Drug</strong></td>\n<td style=\"width: 53px; height: 54px;\"><strong>Age</strong></td>\n<td style=\"width: 61px; height: 54px;\"><strong>Dose</strong></td>\n<td style=\"width: 74px; height: 54px;\"><strong>Route and duration</strong></td>\n</tr>\n<tr style=\"height: 76px;\">\n<td style=\"width: 97px; height: 164px;\" rowspan=\"3\">\n<p><strong>Non-pregnant individuals</strong></p>\n&nbsp;&nbsp;</td>\n<td style=\"width: 97px; height: 104px;\" rowspan=\"2\">\n<p>Rifampicin</p>\n<p>&nbsp;</p>\n&nbsp;&nbsp;</td>\n<td style=\"width: 53px; height: 76px;\">&nbsp;&lt;1 month</td>\n<td style=\"width: 61px; height: 76px;\">&nbsp;5 mg/kg</td>\n<td style=\"width: 74px; height: 76px;\">Oral every 12 hrs for 2 days &nbsp;</td>\n</tr>\n<tr style=\"height: 28px;\">\n<td style=\"width: 53px; height: 28px;\">&gt;1 month&nbsp;</td>\n<td style=\"width: 61px; height: 28px;\">10 mg/kg&nbsp;</td>\n<td style=\"width: 74px; height: 28px;\">Oral every 12 hrs for 2 days</td>\n</tr>\n<tr style=\"height: 60px;\">\n<td style=\"width: 97px; height: 60px;\">\n<p>Ciprofloxacin&nbsp;</p>\n<p>&nbsp;</p>\n</td>\n<td style=\"width: 53px; height: 60px;\">&nbsp;&gt;18 years</td>\n<td style=\"width: 61px; height: 60px;\">500 mg</td>\n<td style=\"width: 74px; height: 60px;\">Oral single dose &nbsp;</td>\n</tr>\n<tr style=\"height: 56px;\">\n<td style=\"width: 97px; height: 109px;\" rowspan=\"2\">\n<p><strong>Children and pregnant women</strong></p>\n</td>\n<td style=\"width: 97px; height: 109px;\" rowspan=\"2\">\n<p>Ceftriaxone</p>\n<p>&nbsp;</p>\n</td>\n<td style=\"width: 53px; height: 56px;\">&lt;15 years</td>\n<td style=\"width: 61px; height: 56px;\">125mg</td>\n<td style=\"width: 74px; height: 56px;\">IM single dose &nbsp;</td>\n</tr>\n<tr style=\"height: 53px;\">\n<td style=\"width: 53px; height: 53px;\">&gt; 15 years</td>\n<td style=\"width: 61px; height: 53px;\">250 mg</td>\n<td style=\"width: 74px; height: 53px;\">IM single dose</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '215 Medicine Neet 2018';
        let hierarchy = ["Marrow", "PYQs", "Medicine"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>