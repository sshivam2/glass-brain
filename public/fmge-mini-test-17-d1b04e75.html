<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 17 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Identify the marked structure:",
    "choices": [
      {
        "id": 1,
        "text": "Asterion"
      },
      {
        "id": 2,
        "text": "Glabella"
      },
      {
        "id": 3,
        "text": "Pterion"
      },
      {
        "id": 4,
        "text": "Nasion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The structure marked in the image is the&nbsp;<strong>pterion.&nbsp;</strong></p>\n<p>The pterion is an&nbsp;<strong>H-shaped sutural junction</strong>&nbsp;between four bones of the skull:</p>\n<ol>\n<li>Frontal bone</li>\n<li>Squamous part of the temporal bone</li>\n<li>Greater wing of the sphenoid bone</li>\n<li>Parietal bone</li>\n</ol>\n<p>It is located approximately <strong>4 cm above</strong> the <strong>midpoint</strong> of the&nbsp;<strong>zygomatic</strong> arch.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/87328ba0712c435084c2cdbbd54edb4b.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dc81c0a94d7a40f28052b990aa39f8e8x1280x1525.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3dea3f58f8aa498d81f60998535a309bx600x666.JPEG"
    ]
  },
  {
    "text": "The following diagram shows the depth of respiration of a 55-year old man who was diagnosed with sepsis. Identify the pattern of breathing.",
    "choices": [
      {
        "id": 1,
        "text": "Biot's breathing"
      },
      {
        "id": 2,
        "text": "Ataxic breathing"
      },
      {
        "id": 3,
        "text": "Kussmaul breathing"
      },
      {
        "id": 4,
        "text": "Cheyne-Stokes breathing"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The pattern of breathing seen in the image is<strong> Kussmaul&rsquo;s Breathing</strong>.&nbsp;It is a type of deep, rapid breathing usually implies metabolic acidosis, but can also occur with Ponto-mesencephalic lesions.</p>\n<p>Other options:</p>\n<p>Options A and B:<strong> Biot's breathing -&nbsp;</strong>The pattern of breathing is irregular and rapid with rhythmical pauses lasting for 10&ndash;30 seconds.&nbsp;It is&nbsp;also known as <strong>ataxic breathing</strong> is associated with increased intracranial pressure and meningitis.</p>\n<p>Options D:<strong> Cheyne-Stokes Breathing -&nbsp;</strong>Characterized by progressively deeper and sometimes faster breathing (crescendo-decrescendo cycles), with periods of apnea. It is seen in patients with heart failure and uremia.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7bd8ad5915384632b02b66cd1277f808.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8ead8c315480484b9440a48e81bd4e66x1280x1846.JPEG"
    ]
  },
  {
    "text": "You are a biochemistry resident and perform the test for the reducing sugars during a lab demonstration. The outcomes of the test appear as shown in the image below. The reagent which you have used for this test contains all of the following contents except ____.",
    "choices": [
      {
        "id": 1,
        "text": "Sodium carbonate"
      },
      {
        "id": 2,
        "text": "Sodium citrate"
      },
      {
        "id": 3,
        "text": "Sodium hydroxide"
      },
      {
        "id": 4,
        "text": "Copper sulphate"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given test is <strong>Benedict's test,</strong> the Benedict's reagent used contains all the above contents except sodium hydroxide.</p>\n<p>Benedict&rsquo;s test is a <strong>test for reducing sugars</strong>. It is answered by all <strong>monosaccharides and most disaccharides except sucrose.</strong></p>\n<p><strong>Principle:</strong> All monosaccharides and reducing disaccharides contain a free functional aldehyde or ketone group. When heated in the presence of an alkali, they are <strong>converted to enediols</strong>, which <strong>reduce</strong> <strong>the cupric</strong> <strong>compounds</strong> <strong>(Cu<sup>2+</sup>)</strong> present in Benedict's reagent <strong>to an insoluble precipitate of red cuprous oxide (Cu<sub>2</sub>O).</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c2b0a26dedcf4ec68ebb373c1f0d6f43.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a10f302589914d7aaa1fe11c164329b7x478x633.JPEG"
    ]
  },
  {
    "text": "When you are going through the case sheets of the patients admitted in your unit during your internship, you notice the following pedigree chart attached to one of the files. Which of the following diseases is the patient likely to have?",
    "choices": [
      {
        "id": 1,
        "text": "Huntington's disease"
      },
      {
        "id": 2,
        "text": "Sickle cell anemia"
      },
      {
        "id": 3,
        "text": "Hemophilia A"
      },
      {
        "id": 4,
        "text": "Rett syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The pedigree is representative of an <strong>autosomal dominant</strong> type of inheritance. Of the options mentioned, Huntington's disease shows an autosomal dominant pattern.</p>\n<p>In the autosomal dominant pattern of inheritance, both males and females are equally affected, and the affected individual has a 50% chance of passing it on to the offspring.</p>\n<p>The following flow chart helps in making out the pattern of inheritance from a given pedigree chart.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/88029fb151f74bb09ad165f53186153c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5d2da5449d984cc5901a5c798cf8e25dx1280x1944.JPEG"
    ]
  },
  {
    "text": "A patient is brought to the hospital, with C/O seizures and the MRI image of the brain is given below. The disease is most probably caused by?",
    "choices": [
      {
        "id": 1,
        "text": "Cysticercosis cellulosae"
      },
      {
        "id": 2,
        "text": "T. saginata"
      },
      {
        "id": 3,
        "text": "Cysticerocosis bovis"
      },
      {
        "id": 4,
        "text": "T. asiatica"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical history of seizures and the radiological findings of multilobulated cystic lesions in the subarachnoid space, typical&nbsp;parenchymal brain calcifications are suggestive of <strong>neurocysticercosis</strong> caused by T.<strong>&nbsp;</strong>solium <strong>(Cysticercosis cellulosae).</strong></p>\n<p>Neurocysticercosis is the most common central nervous system parasitic infection.</p>\n<p>The clinical features of neurocysticercosis include epilepsy, increased intracranial tension, hydrocephalus, psychiatric disturbances, meningoencephalitis, transient paresis, behavioral disorders aphasia, and visual disturbances.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/30530679c1d04c55aeaaaa3a72663366.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 66-year-old man presented with difficulty in urination, back pain, and an elevated PSA blood test.  An X-ray revealed two radiolucent lesions in the bony pelvis and MRI revealed several enlarged lymph nodes in the lower abdomen.  Which of the following drugs can most likely be used to treat the given condition?",
    "choices": [
      {
        "id": 1,
        "text": "Anastrozole"
      },
      {
        "id": 2,
        "text": "Desogestrel"
      },
      {
        "id": 3,
        "text": "Goserelin"
      },
      {
        "id": 4,
        "text": "Oxandrolone"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical features and investigations showing elevated PSA, osteolytic lesions and enlarged lymph nodes are suggestive of <strong>prostate</strong> <strong>cancer</strong>. <strong>Goserelin&nbsp;</strong>is a <strong>GnRH</strong> <strong>agonist</strong> used in the treatment of prostate cancer.</p>\n<p><strong>Androgen deprivation therapy</strong> is the primary medical therapy for prostate cancer. The drugs approved for this indication include leuprolide, goserelin, histrelin, buserelin, and triptorelin.</p>\n<p>The agonist action of the GnRH analogs causes increased testosterone production, causing a tumor flare. It can be prevented by concomitant administration of an <strong>androgen receptor antagonist&nbsp;</strong>such as flutamide, bicalutamide, or nilutamide;&nbsp;until downregulation of testosterone is complete.</p>\n<p>The combined androgen deprivation therapy with continuous GnRH agonist and an androgen receptor antagonist is as effective as surgical castration, in reducing the levels of serum testosterone and its effects. GnRH agonist can be used in the early and late course of the disease.</p>\n<p><strong>Other options:</strong></p>\n<p><strong>Option a:&nbsp;Anastrozole</strong> is an aromatase inhibitor, used in the treatment of advanced breast cancer.</p>\n<p><strong>Option b:&nbsp;Desogestrel</strong> is a synthetic progestin without androgenic activity. It is used in combination with ethinyl estradiol for oral contraception.</p>\n<p><strong>Option c: Oxandrolone</strong> is a synthetic derivative of testosterone (anabolic steroid). It is used in the treatment of bone pain in patients with osteoporosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child presents to the emergency department with a  history of ingestion of 10-20 ferrous sulfate tablets.  Arterial blood gas revealed acidosis. Which of the following can be used in the management of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Deferoxamine"
      },
      {
        "id": 2,
        "text": "Activated charcoal"
      },
      {
        "id": 3,
        "text": "Dimercaprol"
      },
      {
        "id": 4,
        "text": "Penicillamine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario points to <strong>iron toxicity</strong>, which is managed with <strong>deferoxamine</strong> (also known as&nbsp;<strong>desferrioxamine</strong>).</p>\n<p>Large amounts of ferrous salts can be fatal in <strong>children</strong>. Initial symptoms include <strong>abdominal pain</strong>, diarrhea, vomiting, and <strong>gastrointestinal bleeding</strong>. In severe cases, <strong>cyanosis</strong> and hyperventilation due to <strong>metabolic</strong> <strong>acidosis</strong> can develop. This can sometimes be followed by an <strong>asymptomatic phase</strong>. Later, hypoglycemia and hepatic and renal failure can develop. <strong>Pyloric stenosis</strong> and gastric scarring can develop due to its corrosive nature. Ultimately, if left untreated, the child can die.</p>\n<p>The gastric contents can be used for an iron color test to estimate the iron concentration in plasma. As iron tablets are <strong>radiopaque</strong>, an X-ray can be used to assess the number of pills taken. <strong>Deferoxamine</strong>, an <strong>iron chelator</strong> has to be administered <strong>intramuscularly</strong>. Side effects include pruritus, wheals, rash, and anaphylaxis.&nbsp;</p>\n<p><strong>Deferiprone</strong> and <strong>deferasirox</strong> are other <strong>oral</strong> iron chelators used to treat iron overload in<strong> thalassemia</strong> patients.&nbsp;</p>\n<p>Other options:</p>\n<p>Option B: <strong>Activated charcoal</strong> can be used in the initial management of acetaminophen and opioid overdose. It is used for gastrointestinal decontamination to prevent further absorption of the poison.</p>\n<p>Option C: <strong>Dimercaprol,</strong>&nbsp;also known as <strong>BAL</strong> (British anti-Lewisite), is used to treat <strong>arsenic</strong>, mercury poisoning, and <strong>Wilson's disease</strong>.</p>\n<p>Option D: <strong>D-penicillamine</strong> (Cuprimine) can be used to treat scleroderma, <strong>Wilson's disease</strong>, and rheumatoid arthritis. Side effects include nephrotoxicity, hematologic derangements, and a characteristic rash that involves the neck and axillae&mdash;<strong>elastosis perforans serpiginosa</strong>.&nbsp;It is associated with membranous glomerulonephritis, drug-induced lupus, and <strong>myasthenia gravis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 9-year-old boy comes with complaints of right ear pain, difficulty in opening the mouth, painful swallowing, and fever. The oral cavity examination reveals the following. The external facial examination is unremarkable. Which of the following is likely?",
    "choices": [
      {
        "id": 1,
        "text": "Pharyngitis"
      },
      {
        "id": 2,
        "text": "Parotid abscess"
      },
      {
        "id": 3,
        "text": "Bezold\u2019s Abscess"
      },
      {
        "id": 4,
        "text": "Quinsy"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows&nbsp;<strong>quinsy</strong>&nbsp;also known as a<strong>&nbsp;peritonsillar&nbsp;abscess.</strong></p>\n<p><strong>Peritonsillar abscess&nbsp;</strong>or quinsy&nbsp;is a collection of pus in the peritonsillar space which lies between the capsule of the tonsil and the superior constrictor muscle.&nbsp;It usually follows an episode of acute tonsillitis when the crypta magna gets infected and gets sealed off. An intratonsillar abscess then forms which then bursts through the capsule to reach the peritonsillar space.</p>\n<p>Usually, it is unilateral though occasionally bilateral abscesses are recorded.</p>\n<p>It presents with marked&nbsp;<strong>odynophagia</strong>&nbsp;such that the patient cannot even swallow his&nbsp;<strong>saliva</strong>&nbsp;which&nbsp;<strong>dribbles</strong>&nbsp;from the angle of his mouth. The patient is usually&nbsp;<strong>dehydrated.&nbsp;</strong>Other features include a muffled and thick speech, often called a&nbsp;<strong>hot potato voice,&nbsp;</strong>sore throat,&nbsp;ipsilateral otalgia, torticollis, and fever.</p>\n<p>On examination, the tonsil, pillars, and soft palate are congested and enlarged. The uvula is congested and&nbsp;<strong>oedematous&nbsp;</strong>and&nbsp;pushed&nbsp;to<strong>&nbsp;the&nbsp;opposite&nbsp;</strong>side. Mucopus covering the tonsil is seen.<strong>&nbsp;Jugulodigastric lymph nodes&nbsp;</strong>are enlarged and tender.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p>CECT,&nbsp;submandibular ultrasonography,&nbsp;and&nbsp;MRI&nbsp;are better suited for&nbsp;visualizing the abscess and its<strong>&nbsp;extent</strong>.&nbsp;<strong>Submandibular ultrasonography</strong>&nbsp;is also helpful for<strong>&nbsp;incision and drainage</strong>.</p>\n<p class=\"ng-binding\">&nbsp;<strong>Management of peritonsillar abscess:</strong></p>\n<ul>\n<li aria-level=\"1\"><strong>Hospitalization</strong></li>\n<li aria-level=\"1\"><strong>Intravenous fluids</strong>&nbsp;to address dehydration</li>\n<li aria-level=\"1\">High-dose<strong>&nbsp;intravenous antibiotics</strong>&nbsp;to cover aerobes and anaerobes</li>\n<li aria-level=\"1\">Analgesics for pain relief</li>\n<li aria-level=\"1\">Drainage by needle aspiration or incision and drainage</li>\n<li aria-level=\"1\">Tonsillectomy when there is airway obstruction or recurrence.</li>\n</ul>\n<p><strong>Incision and drainage</strong>&nbsp;of the abscess at the point of the maximum bulge above the upper pole of the tonsil or just lateral to the point of junction of the anterior pillar with a line drawn through the base of the uvula.</p>\n<p>&nbsp;Complications of peritonsillar abscess are:</p>\n</div>\n<div class=\"ng-scope\">\n<ul>\n<li>Retropharyngeal abscess</li>\n<li>Laryngeal edema</li>\n<li>Parapharyngeal abscess</li>\n<li>Septicemia</li>\n<li>Pneumonitis/ lung abscess</li>\n<li>Jugular vein thrombosis</li>\n<li>Spontaneous hemorrhage from carotid artery/ jugular vein.</li>\n</ul>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7aa87f7f47904a8ca8db87286d6e070c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The distance at which Jaeger\u2019s chart is read is ______.",
    "choices": [
      {
        "id": 1,
        "text": "20 cm"
      },
      {
        "id": 2,
        "text": "30 cm"
      },
      {
        "id": 3,
        "text": "35 cm"
      },
      {
        "id": 4,
        "text": "40 cm"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Jaeger&rsquo;s chart is held at a distance of&nbsp;<strong>35 cm away from patient</strong>.</p>\n<p>It is used to <strong>measure near vision</strong>.</p>\n<p>The smallest letter is designated as <strong>N5</strong> or <strong>J1</strong> and the largest is <strong>N48</strong>.</p>\n<p>Snellen's near vision chart can also be used.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/544e87637b6a4331a81196308b2aba88x368x585.JPEG"
    ]
  },
  {
    "text": "A 10 year old girl has just started menstruating. She will be provided with a pack of sanitary napkins by the ASHA in her village under:",
    "choices": [
      {
        "id": 1,
        "text": "Janani Suraksha Yojana"
      },
      {
        "id": 2,
        "text": "Rashtriya Kishor Swasthya Karyakram"
      },
      {
        "id": 3,
        "text": "LAQSHYA initiative"
      },
      {
        "id": 4,
        "text": "Pradhan Mantri Surakshit Matritva Abhiyaan"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The girl will be provided with a pack of 6 sanitary napkins for 6 Rupees (called Freedays) by the ASHA under the Menstrual Hygiene Scheme which is a part of the Rashtriya Kishor Swasthya Karyakram (RKSK).</p>\n<p><strong>Rashtriya Kishor Swasthya Karyakram:</strong></p>\n<ul>\n<li>Development of adolescent population (10-19 years).</li>\n<li>Weekly Iron and Folic Acid supplementation (60mg Fe + 500 mcg Folic Acid)</li>\n<li>Menstrual hygiene: A&nbsp;pack of 6 sanitary napkins for 6 Rupees (called Freedays) by the ASHA</li>\n<li>It also includes enhancement of mental health and prevention of substance abuse and violence.</li>\n</ul>\n<p>The <strong>LAQSHYA</strong> initiative is for improving the quality of labour rooms and providing Respectful Maternity Care. It also includes expanding the obstetric ICUs at government medical college hospitals.</p>\n<p>The <strong>Pradhan Mantri Surakshit Matritva Abhiyaan (PMSMA)</strong> ensures quality antenatal care so that a pregnant woman receives at least 1 check up in her 2nd or 3rd trimester by a doctor in the PMSMA clinic, on the 9th of every month.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/068ec92f207f4c09800d45bfaf47356cx188x269.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8182bf071dcf4be7845ed42239649461x450x450.JPEG"
    ]
  },
  {
    "text": "Which of the following steps is not included in the STEP approach of WHO?",
    "choices": [
      {
        "id": 1,
        "text": "Therapeutic assessment"
      },
      {
        "id": 2,
        "text": "Physical assessment"
      },
      {
        "id": 3,
        "text": "Psychological assessment"
      },
      {
        "id": 4,
        "text": "Behavioral assessment"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Therapeutic assessment</strong>\u00a0is not included in the\u00a0<span style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><strong>WHO's STEP approach</strong></span>.\u00a0</p>\n<p>The STEP approach of WHO is a survey methodology developed to assess risk factors of non-communicable diseases(NCD). It helps countries establish an <strong>NCD\u00a0surveillance system.\u00a0</strong>The steps include the following:</p>\n<ul>\n<li>Questionnaires contain questions about <strong>behavioral</strong> risk factors like tobacco use, alcohol use, diet, and physical activity.\u00a0</li>\n<li><strong>Physical measurements</strong>\u00a0contain blood pressure, height, weight, and waist size</li>\n<li>Biochemical measurements contain blood glucose, blood lipids, urinary sodium, and creatinine.\u00a0\u00a0</li>\n</ul>\n<p>Note: Mental health and suicide are included in optional behavioral risk factors (step 1). Hence,\u00a0<strong>psychological assessment</strong> is also included in the STEP approach.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the delivery criteria in a Type A PHC?",
    "choices": [
      {
        "id": 1,
        "text": "It has more than 20 deliveries per month"
      },
      {
        "id": 2,
        "text": "It has less than 20 deliveries per month"
      },
      {
        "id": 3,
        "text": "It has more than 30 deliveries per month"
      },
      {
        "id": 4,
        "text": "It has less than 30 deliveries per month"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Type A </strong>PHC has\u00a0<strong>less than 20 deliveries per month.</strong></li>\n<li><strong>Type B</strong> PHC has\u00a0<strong>20 or more deliveries per month.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old man comes to the emergency room with complaints of sudden onset chest pain that radiates to the left arm and jaw. He is profusely sweating. An ECG was taken immediately. Interpret his ECG.",
    "choices": [
      {
        "id": 1,
        "text": "Right ventricular hypertrophy"
      },
      {
        "id": 2,
        "text": "Right bundle-branch block"
      },
      {
        "id": 3,
        "text": "Left bundle-branch block"
      },
      {
        "id": 4,
        "text": "Ventricular tachycardia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient has a myocardial infarction (<strong>MI</strong>) with ECG changes of a&nbsp;<strong>left bundle-branch block (LBBB)</strong>,<strong>&nbsp;</strong>which can be identified by the following classical features:</p>\n<ul>\n<li>Wide QRS&nbsp;complex- QRS &ge;120 ms&nbsp;</li>\n<li>Predominantly negative (QS) complexes in lead V<span class=\"s1\">1 </span>and entirely positive (R) complexes in lead V<span class=\"s1\">6</span>.</li>\n<li>M pattern seen in&nbsp;left chest leads (V5, V6)&nbsp;</li>\n</ul>\n<div class=\"page\" title=\"Page 1922\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>MI can have the following ECG changes:</p>\n<ul>\n<li>ST-segment elevation- zone of injury</li>\n<li>T wave depression</li>\n<li>Deep Q waves- late sign to develop</li>\n<li>New left bundle branch block (LBBB)</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/11c0fcd8304d49b685cd154757bf0991.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0e6306d001434620bdba7c39df33bf02x1280x810.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/96faff1fdae6488e944b880304724ac9x528x329.PNG"
    ]
  },
  {
    "text": "The most common symptom of thyrotoxicosis is_____",
    "choices": [
      {
        "id": 1,
        "text": "Palpitation"
      },
      {
        "id": 2,
        "text": "Fatigue and weakness"
      },
      {
        "id": 3,
        "text": "Diarrhea"
      },
      {
        "id": 4,
        "text": "Hyperactivity and irritability"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Hyperactivity and irritability</strong> are considered the most common symptoms of thyrotoxicosis.</p>\n<p><strong>Thyrotoxicosis</strong>&nbsp;means an excess of thyroid hormone in the body i.e increased T4 and T3.</p>\n<p>Other <strong>symptoms</strong> of thyrotoxicosis include:</p>\n<ul>\n<li>&nbsp;<strong>heat intolerance</strong> and sweating, <strong>palpitations</strong>, fatigue,<strong> weight loss despite increased appetite</strong>,<strong> diarrhea</strong>, polyuria, and oligomenorrhea.</li>\n</ul>\n<p>A few important <strong>signs</strong> suggestive of hyperthyroidism include:</p>\n<ul>\n<li>tachycardia, tremor, atrial fibrillation in the elderly,&nbsp;goiter, muscle weakness, lid retraction or lag, signs of hyperdynamic circulation such as bounding pulse, wide pulse pressure, aortic systolic murmur.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the probable diagnosis of the ECG given below?",
    "choices": [
      {
        "id": 1,
        "text": "Hypokalemia"
      },
      {
        "id": 2,
        "text": "Hyperkalemia"
      },
      {
        "id": 3,
        "text": "Hypothermia"
      },
      {
        "id": 4,
        "text": "Hypocalcemia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The hallmark of this patient's ECG is the&nbsp;<strong>Osborn J wave.</strong></p>\n<p>Hypothermia is defined as core body temperature being less than 95&deg;F.</p>\n<p>In the <strong>initial stages</strong> of hypothermia, as a reaction to the general stress, there is <strong>sinus tachycardia</strong>.&nbsp;As the temperature drops <strong>below 90&deg;F,</strong> there is <strong>sinus bradycardia</strong> associated with prolongation of the PR interval, QRS complex, and QT interval progressively.</p>\n<p>With temperature approaching<strong> 86&deg;F</strong>, <strong>atrial ectopic activity</strong> is often noted and can progress to atrial fibrillation. It is at this level of hypothermia that many patients have <strong>Osborn waves</strong> that consist of an extra deflection at the end of the QRS complex.&nbsp;J waves occur when a heterogeneous distribution of potassium current enhances the activity of a transient outward potassium current in the heart, caused by low temperatures.</p>\n<p>Osborn waves, also known as J waves, camel-hump waves, or hypothermic waves, are best seen in the inferior and lateral precordial leads. They become more prominent as the body temperature drops, and they regress gradually with rewarming.</p>\n<p>A progressive widening of the QRS complex occurs when the temperature falls below 86&deg;F, which is associated with an increased risk of ventricular fibrillation and asystole occurs when the temperature drops to about 60&deg;F.</p>\n<p>Other options:</p>\n<ul>\n<li>Hyperkalemia: Tall, tented T waves are seen in hyperkalemia.</li>\n<li>Hypokalemia: U waves are seen in hypokalemia.</li>\n<li>Hypocalcemia: Prolonged QTc interval, occasional T wave inversion.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f25a676499d6448e951bdb4c73a89191.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/90fcffe783084af687dfc7632812faa0x482x442.PNG"
    ]
  },
  {
    "text": "A 45-year-old male presents with complaints of sudden, involuntary, and uncontrollable dance-like movements. He also complains of facing difficulty with his memory. His wife says he has gotten very emotional recently.  What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Parkinson's disease"
      },
      {
        "id": 2,
        "text": "Huntington's chorea"
      },
      {
        "id": 3,
        "text": "Friedreich's ataxia"
      },
      {
        "id": 4,
        "text": "Alzheimer's disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical presentation of sudden, involuntary, and <strong>uncontrollable dance-like movements,</strong> along with <strong>cognitive</strong> and <strong>emotional</strong> symptoms, is characteristic of <strong>Huntington's disease </strong>(HD), also known as <strong>Huntington's chorea.</strong></p>\n<p>Huntington's disease (HD) is a degenerative disease of the\u00a0<strong>caudate</strong>\u00a0and\u00a0<strong>putamen</strong>\u00a0(\u201cstriate neurons\u201d)\u00a0caused by<strong>\u00a0</strong>an<strong>\u00a0autosomal dominant\u00a0</strong>inheritance of a<strong>\u00a0trinucleotide repeat (CAG)\u00a0</strong>in the<strong>\u00a0</strong>Huntington gene (chromosome 4),\u00a0which results in motor, behavioral, oculomotor, and cognitive dysfunction. HD is characterized by rapid, nonpatterned, semi-purposeful, involuntary choreiform movements of limb, face, or trunk. A phenomenon referred to as anticipation is seen particularly in males, with subsequent generations having larger numbers of repeats and earlier ages of disease onset.</p>\n<p>Tetrabenazine and deutetrabenazine\u00a0are\u00a0<strong>inhibitors of VMAT2</strong>\u00a0and cause presynaptic depletion of catecholamines.\u00a0<strong>Deutetrabenazine</strong>\u00a0is a newer form of tetrabenazine approved for the treatment of chorea associated with Huntington's disease. Deutetrabenazine takes advantage of the stronger bonds that deuterium forms with carbon (deuterated tetrabenazine). They have a longer half-life than the corresponding products of tetrabenazine metabolism.</p>\n<p>Tetrabenazine is extensively metabolized by CYP2D6. It\u00a0may cause hypotension and depression with suicidal tendencies. It\u00a0can also cause<strong> Parkinsonism</strong>. Deutetrabenazine has adverse effects similar to those of tetrabenazine.</p>\n<p><strong>Other Options:</strong></p>\n<ul>\n<li><strong>Parkinson's disease i</strong>s characterized by tremors, <strong>bradykinesia</strong> (slow movement), and rigidity. It does not typically cause the dance-like choreiform movements seen in HD.</li>\n<li><strong>Friedreich ataxia</strong> is a genetic disorder that primarily affects the nervous system, causing <strong>progressive ataxia</strong> (loss of coordination). It does not typically present with choreiform movements.</li>\n<li><strong>Alzheimer's disease</strong> primarily affects memory and cognitive function, but it does not cause dance-like choreiform movements.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the next step in the management of an old patient who has undergone complete excision of glioblastoma?",
    "choices": [
      {
        "id": 1,
        "text": "Chemotherapy with Bevacizumab"
      },
      {
        "id": 2,
        "text": "No further management"
      },
      {
        "id": 3,
        "text": "Chemoradiation"
      },
      {
        "id": 4,
        "text": "Radiotherapy"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Standard treatment post-surgical<strong>&nbsp;resection of glioblastoma </strong>includes<strong> radiotherapy</strong>&nbsp;in older patients. Radiation alone is effective as a single-modality therapy in the elderly owing to the survival benefit of radiation. Moreover, the combined-modality therapy of Chemoradiation has increased the risk of Neurotoxicity.<br /><br />It is used in combination with&nbsp;<strong>temozolomide</strong>&nbsp;chemotherapy in younger individuals.&nbsp;<strong>Temozolomide&nbsp;</strong>is used as a<strong> first-line agent </strong>for the management of glioblastoma multiforme<strong>. </strong>It is used for<strong> newly diagnosed cases </strong>along with<strong> radiotherapy </strong>and also used for<strong> maintenance therapy. Bevacizumab</strong>, which is a vascular endothelial growth factor (VEGF) antibody may be used in the treatment of recurrent glioblastoma.&nbsp;</p>\n<p><strong>Glioblastoma&nbsp;</strong>is the&nbsp;<strong>most common</strong>&nbsp;adult primary intracranial neoplasm. It affects people usually in the sixth or seventh decade. These tumors may arise de novo or may result from a malignant transformation of lower-grade astrocytomas. Mutations of Isocitrate Dehydrogenase (IDH) and Epidermal Growth Factor Receptor gene (EGFR) are implicated in the pathogenesis of the same.&nbsp;</p>\n<p>Clinically, patients usually present with&nbsp;headaches, seizures due to raised intracranial pressure or focal neurologic deficits depending upon the site involved.&nbsp;</p>\n<p>Grossly, glioblastomas are found infiltrating the brain tissue and are poorly delineated. They have greyish tumor cells with central yellowish necrosis and multiple areas of hemorrhages. Microscopically, they are composed of poorly differentiated pleomorphic astrocytic cells with nuclear atypia and high mitotic activity. Necrosis and florid microvascular proliferation are characteristic. They exhibit pseudopalisading&mdash;dense arrangement of tumor cells&nbsp;lining up around the foci of tumor necrosis.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p>According to the WHO Classification of CNS diseases 2016, glioblastomas are classified as follows:</p>\n<ul>\n<li>Glioblastoma,&nbsp;<strong>IDH-wildtype</strong>:\n<ul>\n<li>About 90% of cases</li>\n<li>Primary or de novo glioblastoma</li>\n<li><strong>Over 55 years</strong>&nbsp;of age</li>\n<li><strong>Worst</strong>&nbsp;prognosis</li>\n</ul>\n</li>\n<li>Glioblastoma,&nbsp;<strong>IDH-mutant</strong>:\n<ul>\n<li>About 10% of cases</li>\n<li>Secondary glioblastoma, with a history of prior lower-grade diffuse glioma</li>\n<li>Arises in&nbsp;<strong>younger</strong>&nbsp;patients</li>\n<li><strong>Poor</strong>&nbsp;prognosis</li>\n<li>Glioblastoma,<strong>&nbsp;NOS</strong>&nbsp;(not otherwise specified), where full IDH evaluation cannot be performed.</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/293f0c0deb9e47afb8ee66dca1f13fb7x720x534.JPEG"
    ]
  },
  {
    "text": "Perforation of the oesophagus is managed surgically in all cases except which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Perforation of cervical oesophagus"
      },
      {
        "id": 2,
        "text": "Boerhaave\u2019s syndrome"
      },
      {
        "id": 3,
        "text": "Perforation of abdominal oesophagus"
      },
      {
        "id": 4,
        "text": "Septic shock"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Instrumental perforations</strong> in <strong>the cervical esophagus are usually small </strong>and can nearly always be managed <strong>conservatively.</strong></p>\n<p>Indications for <strong>considering nonoperative management</strong> in esophageal perforation:</p>\n<ul>\n<li>Small septic load</li>\n<li>Minimal cardiovascular upset</li>\n<li><strong>Confined to mediastinum</strong></li>\n<li>By flexible endoscope</li>\n<li><strong>Cervical esophagus </strong></li>\n</ul>\n<p>Indications for <strong>surgical exploration</strong> in esophageal perforation :</p>\n<ul>\n<li><strong>Large septic load</strong></li>\n<li>Septic shock</li>\n<li>Pleura breached</li>\n<li><strong>Boerhaave&rsquo;s syndrome</strong></li>\n<li>Perforation of the abdominal esophagus</li>\n</ul>\n<p><strong>Esophageal perforation:</strong></p>\n<ul>\n<li><strong>Iatrogenic/spontaneous</strong></li>\n<li><strong>Iatrogenic instrument-induced</strong> perforation is the&nbsp;<strong>most common</strong> cause of esophageal perforation.</li>\n<li>Iatrogenic perforation is most common <strong>in cervical esophagus in the cricopharyngeal area.</strong></li>\n<li>Spontaneous perforation refers to <strong>Boerhaave&rsquo;s</strong> syndrome.</li>\n<li><strong>Pain</strong> is the most common presentation of perforation.</li>\n<li><strong>Crepitus</strong> may be present.</li>\n<li><strong>Complications</strong>&nbsp;of esophageal perforation are pneumothorax and empyema (most common in the left side of the chest and <strong>bilateral in 10% of cases</strong>).</li>\n<li><strong>Hamman sign</strong>, mediastinal crunch is seen</li>\n<li><strong>Investigations</strong>:\n<ul>\n<li>X-ray chest</li>\n<li>CT scan</li>\n<li>Esophagogram</li>\n<li>Thoracentesis</li>\n<li>Serum amylase level may be raised.</li>\n</ul>\n</li>\n<li><strong>Treatment:</strong>&nbsp;Primary closure within 24 hours of injury and conservative treatment in selected cases.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Genetic testing for BRCA 1/BRCA 2 is indicated for all of the following except:",
    "choices": [
      {
        "id": 1,
        "text": "Breast cancer diagnosed in a post menopausal female >50 years of age"
      },
      {
        "id": 2,
        "text": "Male breast cancer"
      },
      {
        "id": 3,
        "text": "Bilateral breast cancer"
      },
      {
        "id": 4,
        "text": "Breast and ovarian cancer"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Genetic testing is not recommended in post-menopausal females &gt;50 years of age.\u00a0</p>\n<div class=\"page\" title=\"Page 861\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Genetic counselling</strong> is the process of discussing various genetic testing such as BRCA testing and multiple gene panel testing.</p>\n</div>\n</div>\n</div>\n</div>\n<p>Genetic counselling and testing for genetic mutations (BRCA 1, BRCA 2 and others such as TP53, PTEN) are recommended for <strong>high-risk</strong> women with:</p>\n<ul>\n<li>Breast cancer diagnosed\u00a0<strong>before age 50</strong></li>\n<li><strong>Triple-negative</strong>\u00a0breast cancer</li>\n<li>Bilateral breast cancer</li>\n<li>Breast and ovarian cancer in the same individual</li>\n<li>Breast cancer in men</li>\n<li>Family history (maternal or paternal) of\u00a0<strong>two or more</strong>\u00a0individuals with\u00a0<strong>breast</strong>\u00a0and\u00a0<strong>ovarian</strong>\u00a0cancer</li>\n<li>A close\u00a0<strong>male relative</strong>\u00a0with breast cancer</li>\n<li>A close relative with early-onset (&lt;50 years) breast or ovarian cancer</li>\n<li>Known BRCA1 or BRCA2 mutation in the family</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Following a road traffic accident, a 23-year-old man presents with breathlessness. On examination, he has hypotension and distended neck veins. On auscultation, muffled heart sounds are heard. What is this condition primarily associated with?",
    "choices": [
      {
        "id": 1,
        "text": "Hypovolemic shock"
      },
      {
        "id": 2,
        "text": "Cardiogenic shock"
      },
      {
        "id": 3,
        "text": "Obstructive shock"
      },
      {
        "id": 4,
        "text": "Distributive shock"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario of\u00a0<strong>Beck's triad</strong>\u00a0(hypotension, distended neck veins, and muffled heart sounds) is seen in\u00a0<strong>cardiac tamponade</strong>. Shock due to cardiac tamponade is <strong>primarily</strong> an example of <strong>obstructive shock.</strong></p>\n<p><strong>Obstructive shock</strong> is characterized by a <strong>reduction in preload</strong> due to <strong>mechanical obstruction</strong> of the cardiac filling of the left and/or right sides of the heart, which in turn leads to <strong>fall in cardiac output</strong>.\u00a0Common causes of obstructive shock include:</p>\n<ul>\n<li>Cardiac tamponade</li>\n<li>Tension pneumothorax</li>\n<li>Massive pulmonary embolus or air embolus</li>\n</ul>\n<p>Cardiogenic shock is due to primary failure of the heart to pump blood. It may be due to myocardial depression as a result of infarction, cardiomyopathy, blunt myocardial injury.\u00a0Patients with cardiac tamponade may eventually develop <strong>cardiogenic shock</strong> as the myocardium is stressed against the obstruction.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Immediately post-delivery, the uterus corresponds to __ weeks of gestational age:",
    "choices": [
      {
        "id": 1,
        "text": "20"
      },
      {
        "id": 2,
        "text": "16"
      },
      {
        "id": 3,
        "text": "12"
      },
      {
        "id": 4,
        "text": "30"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Immediately post-delivery</strong>, the <strong>uterus</strong> corresponds to <strong>20 weeks of gestational age.</strong></p>\n<div class=\"page\" title=\"Page 192\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The rate of involution of the uterus can be clinically assessed by noting the fundal height of the uterus in relation to the symphysis pubis.</p>\n<div class=\"page\" title=\"Page 192\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Involution</strong>\u00a0of the uterus occurs due to a decrease in the size of muscle fibers.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<table border=\"1\">\n<tbody>\n<tr>\n<td><strong>Time following delivery</strong></td>\n<td><strong>Features</strong></td>\n<td><strong>Weight of the uterus</strong></td>\n</tr>\n<tr>\n<td>Immediately following delivery\u00a0</td>\n<td>\n<p><strong>Uterus corresponds to 20 weeks gestational age.</strong> Fundus lies just below the umbilicus</p>\n</td>\n<td>1000 g</td>\n</tr>\n<tr>\n<td>48 hours\u00a0</td>\n<td>Myometrial involution starts</td>\n<td>\u00a0-</td>\n</tr>\n<tr>\n<td>1 week</td>\n<td>Rapid involution of uterus</td>\n<td>500 g</td>\n</tr>\n<tr>\n<td>2 weeks</td>\n<td>The uterus becomes a\u00a0pelvic\u00a0organ</td>\n<td>300 g</td>\n</tr>\n<tr>\n<td>4 weeks</td>\n<td>Clinically,\u00a0involution is\u00a0complete</td>\n<td>100 g</td>\n</tr>\n<tr>\n<td>6-8 weeks</td>\n<td>\n<p>Uterus returns to normal (pre-pregnant) size</p>\n<p>Sonographically,\u00a0involution is complete at 8 weeks</p>\n</td>\n<td>60 g</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young female patient is undergoing evaluation for infertility and is posted for a hysterosalpingogram. Which of the following is not a contraindication for hysterosalpingography?",
    "choices": [
      {
        "id": 1,
        "text": "Genital tract infection"
      },
      {
        "id": 2,
        "text": "Premenstrual phase"
      },
      {
        "id": 3,
        "text": "Uterine synechiae"
      },
      {
        "id": 4,
        "text": "Suspected pregnancy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>All of the following are contraindications for hysterosalpingography (HSG) except option C.<strong> Uterine synechiae</strong> is an <strong>indication</strong> for HSG.</p>\n<p><strong>Contraindications for HSG</strong>:</p>\n<ul>\n<li>Presence of <strong>genital tract infection</strong> and bleeding</li>\n<li>Genital Tuberculosis, due to the risk of spreading infection.</li>\n<li><strong>Suspected pregnancy</strong></li>\n<li>Allergy to the dye</li>\n<li><strong>Premenstrual phase</strong>\n<ul>\n<li>If by chance pregnancy has occurred, it may be dislodged.</li>\n<li>Thick endometrium might prevent the smooth flow of the dye, at the cornual end.</li>\n<li>There is a risk of embolism and endometriosis if HSG is done during this phase.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Hysterosalpingography (HSG)</strong> is an imaging technique used for visualization of the uterine cavity and fallopian tubes by the injection of a <strong>radiopaque dye.</strong>&nbsp;</p>\n<p>It is best performed between day 5 and day 10 of the menstrual cycle.</p>\n<p><strong>10-15ml</strong> of the dye is injected using a <strong>Leech-Wilkinson cannula</strong>,<strong> Rubin's cannula, </strong>or<strong> Foley's catheter</strong>. If the tubes are patent, the dye will spill out of the tubal ostia and smear the adjacent bowel.</p>\n<p><strong>It is used to detect</strong>:</p>\n<ul>\n<li>Tubal patency</li>\n<li><strong>Uterine anomalies</strong></li>\n<li>Uterine polyps</li>\n<li><strong>Uterine synechiae</strong></li>\n<li>Feasibility of tuboplasty, by studying the location and extent of tubal pathology</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5e95f2bd2ec442f3a060d86522706686x1279x796.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b800645d3b66410496c50100808a277dx600x468.JPEG"
    ]
  },
  {
    "text": "Information obtained by lateral plate X-ray pelvimetry are all except ______",
    "choices": [
      {
        "id": 1,
        "text": "Sacral curve"
      },
      {
        "id": 2,
        "text": "True conjugate"
      },
      {
        "id": 3,
        "text": "Bispinous diameter"
      },
      {
        "id": 4,
        "text": "Inclination of the pelvis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The bispinous diameter can be viewed in the anteroposterior view and not the lateral plate X-ray pelvimetry.</p>\n<p>For complete evaluation of the pelvis, three views are taken &mdash; anteroposterior, lateral and outlet. But <strong>X-ray pelvimetry is restricted only to the erect lateral view</strong> (the femoral head and acetabular margins must be superimposed) which gives most of the useful information.</p>\n<p><strong>Anteroposterior view can give the accurate measurement of the transverse diameter of the inlet and bispinous diameter.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following milestones is expected to be seen in a child at 5 years of age?",
    "choices": [
      {
        "id": 1,
        "text": "Dressing and undressing themself"
      },
      {
        "id": 2,
        "text": "Hopping and telling stories"
      },
      {
        "id": 3,
        "text": "Riding a tricycle and making a tower of 9 blocks"
      },
      {
        "id": 4,
        "text": "Establishment of handedness and parallel play"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>At the age of 5 years, a child is expected to <strong>dress</strong> and <strong>undress</strong> themselves.</p>\n<p>Developmental milestones at the<strong> age of 5 years </strong>include:</p>\n<ul>\n<li>Motor - <strong>skips</strong></li>\n<li>Adaptive - Draws a triangle</li>\n<li>Language - Asks meaning of words</li>\n<li>Social - Dresses and undresses</li>\n</ul>\n<p><strong>Undressing</strong> is easier and hence learned <strong>before</strong> <strong>dressing</strong>.</p>\n<ul>\n<li>2 years - Helps to undress</li>\n<li>3 years - Helps in dressing (if helped with buttons)</li>\n<li>5 years - Dress and undress fully (without any help)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 12-year-old boy presents with a gradually progressing swelling and pain for 6 months over the upper tibia. His radiographic image is shown below. The most likely diagnosis is:",
    "choices": [
      {
        "id": 1,
        "text": "Osteosarcoma"
      },
      {
        "id": 2,
        "text": "Osteoclastoma"
      },
      {
        "id": 3,
        "text": "Brodie's abscess"
      },
      {
        "id": 4,
        "text": "Ewing's sarcoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario and the radiographic image findings are most suggestive of<strong> Brodie's abscess.</strong></p>\n<p>All of the given conditions may present with a history of swelling and pain. However, the differentiating features of each of the given conditions are as follows:</p>\n<table style=\"height: 89px; width: 590px;\">\n<tbody>\n<tr>\n<td style=\"width: 96px;\"><strong>Condition</strong></td>\n<td style=\"width: 127px;\"><strong>Age group</strong></td>\n<td style=\"width: 234px;\"><strong>Radiographic findings</strong></td>\n</tr>\n<tr>\n<td style=\"width: 96px;\"><strong>Brodie's abscess</strong></td>\n<td style=\"width: 127px;\">\n<p>Children, adolescents</p>\n</td>\n<td style=\"width: 234px;\">Lytic lesion with dense sclerotic rim, minimal periosteal reaction</td>\n</tr>\n<tr>\n<td style=\"width: 96px;\"><strong>Osteosarcoma</strong></td>\n<td style=\"width: 127px;\">Children, adolescents and seventh decade</td>\n<td style=\"width: 234px;\">Periosteal reaction leading to sunray appearance and Codman triangle</td>\n</tr>\n<tr>\n<td style=\"width: 96px;\"><strong>Osteoclastoma</strong></td>\n<td style=\"width: 127px;\">20-40 years</td>\n<td style=\"width: 234px;\">Lytic lesion with thin sclerotic rim, minimal periosteal reaction</td>\n</tr>\n<tr>\n<td style=\"width: 96px;\"><strong>Ewing's sarcoma</strong></td>\n<td style=\"width: 127px;\">10-20 years</td>\n<td style=\"width: 234px;\">Periosteal reaction leading to onion peel appearance</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6066964ee5834bf49fd0bd8db8400e9d.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following does not suggest a medical cause of mental illness?",
    "choices": [
      {
        "id": 1,
        "text": "Elderly age"
      },
      {
        "id": 2,
        "text": "Loss of consciousness"
      },
      {
        "id": 3,
        "text": "Auditory hallucination"
      },
      {
        "id": 4,
        "text": "Acute onset"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Auditory hallucination</strong> is <strong>not</strong> suggestive of a medical cause of mental illness.</p>\n<div class=\"page\" title=\"Page 52\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Hallucinations are perceptions in the absence of stimuli to account for them.</p>\n<p><strong>Auditory hallucinations</strong> are the hallucinations most commonly seen in the <strong>psychiatric setting</strong>.\u00a0<strong>Nonauditory hallucinations</strong>\u00a0often suggest that there is a <strong>neurologic, medical, or substance withdrawal</strong> issue rather than a primary psychiatric issue.</p>\n<div class=\"page\" title=\"Page 271\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Features of the medical cause of mental illness:</p>\n<div class=\"page\" title=\"Page 2554\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li><strong>Acute onset</strong> (within hours or minutes, with prevailing symptoms) First episode</li>\n<li><strong>Older age</strong>\u00a0</li>\n<li>Current medical illness or injury</li>\n<li>Significant substance abuse</li>\n<li><strong>Nonauditory disturbances of perception</strong></li>\n<li>Neurologic symptoms\u2014<strong>loss of consciousness</strong>, seizures, head injury, change in headache pattern, change in vision</li>\n<li>Classic mental status signs\u2014diminished alertness, disorientation, memory impairment, impairment in concentration and attention, dyscalculia, concreteness</li>\n<li>Other mental status signs\u2014speech, movement, or gait disorders</li>\n<li>Constructional apraxia\u2014difficulties in drawing clocks, cubes, intersecting pentagons, Bender\u2013Gestalt test</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The correct preoperative fasting recommendation is _________",
    "choices": [
      {
        "id": 1,
        "text": "4 hours for solids in adults"
      },
      {
        "id": 2,
        "text": "2 hours for liquids in adults"
      },
      {
        "id": 3,
        "text": "2 hours for breast milk in infants"
      },
      {
        "id": 4,
        "text": "4 hours for solids in infants"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correct preoperative fasting recommendation is <strong>2 hours for liquids in adults</strong>.</p>\n<p><strong>Recommended Preoperative Fasting period</strong>:</p>\n<ul>\n<li>For neonates and infants:\n<ul>\n<li>2 hours for clear fluids</li>\n<li>4 hours for breast milk</li>\n<li>6 hours for solids and infant formula</li>\n</ul>\n</li>\n<li>For all above 1 year of age:\n<ul>\n<li><strong>2 hours for clear fluids</strong></li>\n<li>6 hours for a light meal</li>\n<li>8 hours if the meal contains fried, fatty food</li>\n</ul>\n</li>\n</ul>\n<p>Preoperative fasting is intended to reduce the risk of pulmonary aspiration.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the diagnosis of a man with diffuse hair loss involving crown and frontal scalp with maintenance of frontal hair line?",
    "choices": [
      {
        "id": 1,
        "text": "Female pattern baldness"
      },
      {
        "id": 2,
        "text": "Male pattern baldness"
      },
      {
        "id": 3,
        "text": "Alopecia areata"
      },
      {
        "id": 4,
        "text": "Anagen effluvium"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Female pattern baldness</strong> presents with diffuse thinning of hair over the <strong>mid</strong><strong>\u2010</strong><strong>frontal scalp</strong> with minimal or no bitemporal recession.Usually vertex baldness is absent and <strong>frontal hair line is maintained</strong>.</p>\n<p><strong>Male pattern baldness</strong> involves <strong>vertex baldness</strong> and <strong>frontal hair line recession</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ec56d6521f69434fa2508780bafb22cbx620x209.PNG"
    ]
  },
  {
    "text": "The plain X-ray shows a particular pathological change in ribs and is seen in:",
    "choices": [
      {
        "id": 1,
        "text": "Coarctation of aorta"
      },
      {
        "id": 2,
        "text": "Rickets"
      },
      {
        "id": 3,
        "text": "ASD"
      },
      {
        "id": 4,
        "text": "Multiple myeloma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The X-ray depicts the&nbsp;<strong>inferior rib notching&nbsp;</strong>which is one of the findings in <strong>coarctation of the aorta.</strong></p>\n<p>The most common location of coarctation of the aorta is just <strong>beyond the origin of the left subclavian artery</strong>.</p>\n<ul>\n<li>Plain radiograph findings:\n<ul>\n<li><strong>A figure of 3 sign </strong>(Reverse 3): Contour abnormality of the aorta</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d95e3f6555e64b4a9bf7e5f61a9130f0.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c30e24d3fd5147cfb198f30738c006e4x1024x1024.JPEG"
    ]
  },
  {
    "text": "Identify the heart chamber marked in the given CT image.",
    "choices": [
      {
        "id": 1,
        "text": "Right atrium"
      },
      {
        "id": 2,
        "text": "Right ventricle"
      },
      {
        "id": 3,
        "text": "Left ventricle"
      },
      {
        "id": 4,
        "text": "Left atrium"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The structure marked in the above CT image is the&nbsp;<strong>left atrium.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d2f28a3e213848df884b3412bda19348.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8788fd9822bb4f92895409f1586db11ax1280x1038.JPEG"
    ]
  }
];
        let quizName = 'Fmge Mini Test - 17';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>