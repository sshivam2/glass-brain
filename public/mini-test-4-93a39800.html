<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Test 4 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2022-23
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 45-year-old chronic kidney disease patient with diabetes is now prescribed DPP-4 inhibitors. Which of the following DPP-4 inhibitors is best suited for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Sitagliptin"
      },
      {
        "id": 2,
        "text": "Saxagliptin"
      },
      {
        "id": 3,
        "text": "Vildagliptin"
      },
      {
        "id": 4,
        "text": "Linagliptin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Linagliptin</strong>&nbsp;is preferred in this patient as it<strong> does not</strong>&nbsp;<strong>require dose adjustment</strong> in patients with renal failure.</p>\n<p><strong>Linagliptin</strong>&nbsp;is a&nbsp;<strong>dipeptidyl-peptidase-4&nbsp;</strong>(DPP-4)<strong>&nbsp;inhibitor</strong>. It is used in type 2 diabetes as monotherapy or in combination therapy when metformin is not tolerated or contraindicated. It&nbsp;binds extensively to plasma proteins and is cleared<strong>&nbsp;primarily by the hepatobiliary system.&nbsp;</strong>Hence, no dosage adjustment is needed in renal failure.</p>\n<p>Other DPP-4 inhibitors (sitagliptin, vildagliptin, saxagliptin, alogliptin) show renal elimination&nbsp;and therefore require dose reduction in renal failure.</p>\n<p><strong>Dipeptidyl peptidase-4 inhibitors&nbsp;</strong>enhance the release of insulin postprandially, decreases glucagon, and thereby lower mealtime as well as fasting glucose. They are weight neutral.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An elderly woman was hospitalized for pneumonia and is on antibiotic therapy with clindamycin. She now complains of diarrhea, abdominal pain, and fever. Her colonoscopy findings are shown in the image below. Which of the following toxins is most commonly associated with her GI symptoms?",
    "choices": [
      {
        "id": 1,
        "text": "Toxin A"
      },
      {
        "id": 2,
        "text": "Staphylococcal enterotoxins"
      },
      {
        "id": 3,
        "text": "Shiga toxin"
      },
      {
        "id": 4,
        "text": "Heat labile enterotoxin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above clinical scenario along with the image given above showing yellow plaques and nodules on the mucosa are suggestive of <strong>pseudomembranous colitis</strong>. It is usually caused by <em><strong>Clostridium difficile</strong></em>. The pathogenesis is mediated by the enterotoxins -<strong> toxin A</strong> and toxin B.</p>\n<p><em>Clostridium difficile</em> is a gram-positive anaerobic bacillus that causes<strong>&nbsp;<em>Clostridioides </em>(formerly&nbsp;<em>Clostridium</em>)<em>&nbsp;</em><em>difficile</em> infection</strong>&nbsp;after ingestion of spores of the organism. The more severe form of the condition is known as <strong>pseudomembranous colitis</strong> (PMC).&nbsp;Enzyme immunoassay to detect <strong>glutamate dehydrogenase</strong> is<strong> less specific</strong> compared to<strong> toxin detection</strong> for diagnosis. So a combination of the two can be used for diagnostic confirmation.</p>\n<p>The condition is most commonly associated with&nbsp;<strong>prolonged antimicrobial use</strong>,&nbsp;which interferes with the commensal colonic microflora. The most commonly implicated antibiotics are&nbsp;cephalosporins,&nbsp;ampicillin, and <strong>clindamycin.</strong> The spores are spread by contact with the&nbsp;<strong>feces</strong>&nbsp;of affected individuals or asymptomatic carriers. It can persist on surfaces for months. Risk factors include&nbsp;<strong>poor hand hygiene</strong>, old age, and gastrointestinal surgery.</p>\n<p>The spores germinate in the small intestine and produce two toxins&mdash;<strong>toxin A</strong>&nbsp;(enterotoxin) and&nbsp;<strong>toxin B</strong>&nbsp;(cytotoxin). These interfere with the epithelial-cell barrier function and result in diarrhea and&nbsp;<strong>pseudomembrane</strong>&nbsp;formation. The pseudomembranes appear as small whitish-yellow plaques initially which later coalesce to involve the entire colon wall. It contains&nbsp;<strong>necrotic leukocytes</strong>,<strong>&nbsp;fibrin</strong>, and&nbsp;<strong>cellular debris</strong>. The<strong>&nbsp;anamnestic IgG response</strong>&nbsp;determines which patients develop the disease or remain asymptomatic.&nbsp;</p>\n<p>Symptoms include<strong>&nbsp;diarrhea</strong>, fever, and abdominal pain. The diagnosis is based on a combination of <strong>clinical criteria</strong> and detection of <strong>toxin</strong> or the <strong>organism</strong> in stool samples. This can be done by&nbsp;<strong>nucleic acid amplification testing</strong>&nbsp;(NAAT) methods such as&nbsp;<strong>polymerase chain reaction</strong>&nbsp;(PCR) or by&nbsp;<strong>culture</strong>.&nbsp;</p>\n<p><strong>Discontinuation</strong> of any ongoing antimicrobials and adequate hydration are general measures that are recommended.&nbsp;<strong>Oral fidaxomicin</strong>&nbsp;or&nbsp;<strong>vancomycin</strong>&nbsp;is the first-line treatment. Oral metronidazole can be used when these are not available.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dffcb344ca434eddb0809c02d09b07a2.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A young boy presents with pain in his fingers and toes. On examination, he had pallor and icterus. Electrophoresis shows increased HbA2, HbF, and S spike. Peripheral smear findings are given below.  What is the likely mode of inheritance of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "X-linked recessive"
      },
      {
        "id": 2,
        "text": "Autosomal dominant"
      },
      {
        "id": 3,
        "text": "Autosomal recessive"
      },
      {
        "id": 4,
        "text": "X-linked dominant"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario with electrophoresis showing increased <strong>HbA2, HbF,</strong> and<strong> S spike</strong> and peripheral smear showing <strong>sickle-shaped cells</strong> are suggestive of&nbsp;<strong>sickle cell disease</strong>. It is inherited in an <strong>autosomal recessive</strong> pattern.</p>\n<p>Sickle cell anemia is an <strong>autosomal recessive </strong>disorder that occurs due to the <strong>point mutation</strong> in the &beta;-globin gene which results in the replacement of glutamate residue with valine. This causes the production of <strong>sickle-shaped red blood cells</strong> due to the polymerization of <strong>deoxygenated</strong> <strong>hemoglobin (HbS).</strong></p>\n<p>Factors that predispose to sickling are infection, dehydration, and acidosis.</p>\n<p>The <strong>clinical features</strong> of sickle cell disease are due to the tendency of <strong>HbS molecules</strong> to <strong>stack</strong> into <strong>polymers</strong> when <strong>deoxygenated.</strong> The features are:</p>\n<ul>\n<li>Moderately severe hemolytic anemia with jaundice.</li>\n<li><strong>Painful bone crisis-</strong>&nbsp;hand-foot syndrome or dactylitis of the bones of hands and feet.</li>\n<li><strong>Acute chest syndrome</strong> typically presents with fever, cough, chest pain, and <strong>pulmonary infiltrates</strong>.</li>\n<li>Hyposthenuria- inability to concentrate urine.</li>\n<li>The<strong> aplastic crisis</strong> stems from the infection of red cell progenitors by <em>parvovirus B19</em>, which causes a transient cessation of erythropoiesis and a sudden worsening of the anemia.</li>\n<li>Spleen\n<ul>\n<li>In children-&nbsp;<strong>splenic sequestration</strong> crises occur which results in <strong>splenomegaly</strong> due to red pulp congestion.</li>\n<li>Adolescence or early adulthood-&nbsp;<strong>autosplenectomy</strong> occurs due to splenic infarction, fibrosis, and progressive shrinkage.</li>\n<li>Increased susceptibility to infection with encapsulated organisms like pneumococcal, meningococcal, and <em>Haemophilus influenza</em> septicemia, but can be reduced by vaccination and prophylactic antibiotics.</li>\n</ul>\n</li>\n<li>Other clinical features- priapism, leg ulcers, <strong>stroke</strong>, retinopathy, pigment gallstones, and growth retardation.</li>\n</ul>\n<p>The diagnosis is suggested by the clinical findings, the presence of irreversibly sickled red cells on the peripheral smear, and hemoglobin electrophoresis&nbsp;showing<strong> increased HbA2, HbF,</strong> and <strong>S spike</strong>. The changes in the skull resemble a <strong>crewcut</strong> in radiographic studies&nbsp;as a result of compensatory erythroid hyperplasia.</p>\n<p>The image given below shows the sickling of RBCs in sickle cell disease.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a867618ef8514df1909cbb2eaa7450f2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/eb3825393aff4017bd812141e8d3ec77x1280x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2d6c82c1ef6a49469bd89681e8a61d7dx610x600.PNG"
    ]
  },
  {
    "text": "A young man with type 1 diabetes mellitus is brought with severe nausea, vomiting, and abdominal pain. A bolus of both normal saline and IV short-acting insulin is administered. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Start normal saline infusion and continuous insulin infusion"
      },
      {
        "id": 2,
        "text": "Administer potassium at 10 mEq/ hour"
      },
      {
        "id": 3,
        "text": "Administer bicarbonate 50 mEq in sterile water"
      },
      {
        "id": 4,
        "text": "Start continuous insulin infusion and administer potassium"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is suggestive of <strong>diabetic ketoacidosis</strong> (DKA). The next step in management is to <strong>start</strong>\u00a0<strong>normal saline infusion </strong>and<strong>\u00a0continuous insulin infusion</strong>.</p>\n<p>DKA is a complication of <strong>poorly controlled</strong> diabetes mellitus common\u00a0in <strong>type 1 diabetes mellitus</strong> but can also occur in type 2. It occurs in the setting of absolute or relative <strong>insulin deficiency</strong> along with <strong>glucagon excess</strong> leading to extreme hyperglycemia.</p>\n<p>Clinical features include severe <strong>nausea</strong>, <strong>vomiting</strong>, severe <strong>abdominal pain,\u00a0</strong>and\u00a0severe\u00a0<strong>volume depletion.\u00a0</strong>Signs include Kussmaul\u00a0breathing, fruity odor on the patient\u2019s breath, tachycardia, <strong>dehydration,</strong> and <strong>hypotension.\u00a0</strong></p>\n<p>The diagnosis of\u00a0<strong>DKA</strong>\u00a0is made based on the following parameters:</p>\n<ul>\n<li><strong>Hyperglycemia</strong> &gt;250 mg/dL</li>\n<li><strong>Ketosis</strong> or <strong>ketones</strong> in the <strong>urine</strong></li>\n<li><strong>Metabolic acidosis</strong> with\u00a0<strong>pH &lt;7.4</strong>\u00a0and\u00a0<strong>HCO<sub>3</sub> &lt;15</strong>\u00a0mEq/L</li>\n<li><strong>High anion gap</strong>\u00a0due to ketoacids and lactic acidosis</li>\n</ul>\n<p><strong>Pseudohyponatremia </strong>(dilutional)\u00a0is seen as a result of\u00a0<strong>hyperglycemia\u00a0</strong>due to osmotic shift.\u00a0<strong>Normal sodium levels</strong> on admission indicate <strong>severe dehydration</strong>.\u00a0<strong>Potassium</strong>\u00a0levels at presentation may be\u00a0<strong>normal</strong>\u00a0or\u00a0<strong>elevated</strong>\u00a0despite total body deficit, due to intracellular shift.\u00a0If the initial serum\u00a0<strong>potassium</strong>\u00a0<strong>&lt;3.3 mEq/L</strong>, insulin should be administered only after the\u00a0<strong>correction\u00a0</strong>of hypokalemia. This is because treatment with\u00a0<strong>insulin</strong>\u00a0and fluids can\u00a0<strong>worsen hypokalemia</strong>.</p>\n<p>The mainstay management of diabetic ketoacidosis includes urgent <strong>fluid resuscitation</strong> and maintenance, along with<strong> insulin therapy</strong>, electrolyte replacement, and supportive care.\u00a0The algorithm of management is given below.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3bd9e1e7228e4ca0bf552de377af0dcax1280x2847.JPEG"
    ]
  },
  {
    "text": "A 50-year-old man presents with symptoms of fatigue and headache. On further examination, he is found to have pallor, tingling, and numbness over his extremities. Peripheral smear shows macrocytic anemia. Laboratory findings revealed methylmalonic acid excretion in the urine. He was diagnosed with type 2 diabetes 15 years ago and has been taking metformin. Which of the following is most likely deficient in him?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin B9"
      },
      {
        "id": 2,
        "text": "Vitamin B12"
      },
      {
        "id": 3,
        "text": "Vitamin B6"
      },
      {
        "id": 4,
        "text": "Vitamin B1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A <strong>vitamin B12</strong>/ cobalamin deficiency is most likely seen in him.</p>\n<p>The given clinical&nbsp;features of&nbsp;<strong>peripheral neuropathy</strong>, peripheral smear finding of&nbsp;<strong>macrocytic anemia</strong>&nbsp;with&nbsp;<strong>hypersegmented neutrophils, methylmalonic acid excretion</strong> in the urine,<strong>&nbsp;</strong>and history of <strong>metformin</strong> intake after being diagnosed with type 2 diabetes mellitus indicate a <strong>vitamin B12&nbsp;deficiency.<br /></strong></p>\n<p>Vitamin B12 or cobalamin is a water-soluble vitamin that is derived from animal products such as red meat, dairy, and eggs. Its absorption in the <strong>terminal ileum</strong> is facilitated by the presence of&nbsp;<strong>intrinsic factor</strong>, produced by parietal cells in the stomach. There are two vitamin B<sub>12</sub>-dependent enzymes:</p>\n<ul>\n<li><strong>Methionine synthase</strong>&nbsp;(homocysteine methyltransferase): Catalyzes the conversion of homocysteine to methionine.</li>\n<li><strong>Methylmalonyl CoA mutase</strong>: methylmalonyl CoA, formed as an intermediate in the catabolism of valine, isoleucine, and propionyl CoA is converted to succinyl CoA.</li>\n</ul>\n<p>The activity of methylmalonyl CoA mutase is greatly reduced in vitamin B12 deficiency, leading to an accumulation of <strong>methylmalonic acid</strong> and its <strong>excretion in urine</strong>. Since vitamin B12 is also linked to the regeneration of methionine from homocysteine, its deficiency can result in&nbsp;<strong>hyperhomocysteinemia</strong>&nbsp;as well.</p>\n<p>Risk factors for B12 deficiency include gastric atrophy (<strong>pernicious anemia</strong>), terminal ileal disease, strict vegetarianism, acid-reducing drugs (e.g., H2 blockers), and&nbsp;prolonged use of <strong>metformin</strong>.&nbsp;The interference by metformin on calcium-dependent membrane action is responsible for vitamin B12-intrinsic factor malabsorption in the terminal ileum.</p>\n<p>On examination, patients present <strong>anemia</strong>, fatigue, and pallor symptoms. Other presenting complaints may include <strong>peripheral neuropathy</strong>, <strong>glossitis</strong>, diarrhea, headaches, neuropsychiatric disturbances like&nbsp;dementia, and <strong>subacute combined degeneration of spinal cord&nbsp;</strong>(<strong>SACD</strong>) leading to&nbsp;<strong class=\"ng-binding\">ataxia</strong>. A peripheral smear shows <strong>macrocytic anemia</strong> and <strong>hypersegmented neutrophils</strong>.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Vitamin B9&nbsp;</strong>(Folic acid) deficiency can also be seen in patients on&nbsp;prolonged use of <strong>metformin&nbsp;</strong>and&nbsp;can cause&nbsp;<strong>macrocytic anemia</strong>. Urinary excretion of <strong>methylmalonic acid</strong> differentiates between megaloblastic anemia&nbsp;due to folate and vitamin B<sub>12</sub>&nbsp;deficiency. Folate deficiency results in:</p>\n<ul>\n<li>Megaloblastic anemia&nbsp;</li>\n<li>Homocystenemia</li>\n<li>Neural tube defects&nbsp;(spina bifida, Anencephaly) in the fetus.</li>\n</ul>\n<p>Option C: A patient with pyridoxine/ <strong>Vitamin B6</strong> deficiency presents with symptoms of seborrhea, glossitis, convulsions, neuropathy, depression, confusion, and <strong>microcytic anemia</strong>.</p>\n<p>Option D: A patient with thiamine/ <strong>Vitamin B1</strong> deficiency presents either <strong>dry Beriberi</strong> with <strong>predominantly neurological</strong> symptoms like <strong>neuropathy</strong>, muscle weakness and wasting or <strong>wet Beriberi</strong> with predominant cardiac symptoms like cardiomegaly, tachycardia, high output congestive cardiac failure.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old male patient presented with a history of tremors, palpitation, and difficulty in closing his eyes for the past 1 month. On examination, you note the following finding as shown in the image given below. What is this sign called?",
    "choices": [
      {
        "id": 1,
        "text": "Dalrymple\u2019s sign"
      },
      {
        "id": 2,
        "text": "Enroth's sign"
      },
      {
        "id": 3,
        "text": "Gifford's sign"
      },
      {
        "id": 4,
        "text": "Mobius sign"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows lid retraction in the right eye, which is known as&nbsp;<strong>Dalrymple's sign.</strong></p>\n<p>It is the&nbsp;<strong>commonest</strong>&nbsp;and&nbsp;<strong>earliest sign</strong>&nbsp;of&nbsp;<strong>Grave's ophthalmopathy</strong>. It is due to overactivity of levator aponeurosis and M&uuml;ller's muscle. Here the upper lid margin is at level with or above the superior limbus, causing the upper sclera to become visible (scleral show).</p>\n<p><strong>Grave's disease</strong>&nbsp;is an<strong>&nbsp;autoimmune</strong>&nbsp;disorder that results in&nbsp;<strong>hyperthyroidism.</strong>&nbsp;In this condition, autoantibodies bind to thyroid-stimulating hormone (TSH) receptors and stimulate the secretion of thyroid hormone.&nbsp;</p>\n<p>Thyroid ophthalmopathy or thyroid eye disease can be seen in Graves' disease or even in euthyroid/ hypothyroid patients.&nbsp;<strong>Women&nbsp;</strong>and&nbsp;<strong>smokers</strong>&nbsp;are at higher risk of developing Grave's ophthalmopathy (otherwise known as<strong>&nbsp;</strong>thyroid eye disease).&nbsp;</p>\n<p><strong>Thyroid function tests&nbsp;</strong>and a&nbsp;<strong>thyroid autoantibody assay&nbsp;</strong>should be done to assess thyroid hormone status.&nbsp;</p>\n<p>Control of hyperthyroidism is effective in management. Injecting botulinum toxin to levator aponeurosis and M&uuml;ller's muscle may be done as a temporary measure.&nbsp;</p>\n<p>The other options are all signs associated with Grave's disease but do not correlate with the given image.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c1108ee6d3e643d59050309dd57625e5.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following indicators is used to measure intracellular fluid volume?",
    "choices": [
      {
        "id": 1,
        "text": "Tritium oxide and Evans blue"
      },
      {
        "id": 2,
        "text": "Deuterium oxide and inulin"
      },
      {
        "id": 3,
        "text": "Inulin and 125I-albumin"
      },
      {
        "id": 4,
        "text": "Thiosulfate and Evans blue"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Deuterium oxide </strong>and <strong>inulin</strong> are the indicators used for the measurement of <strong>intracellular fluid volume</strong> (ICF).</p>\n<p>The ICF <strong>cannot</strong> be measured <strong>directly</strong>. It is calculated by subtracting the extracellular fluid volume (<strong>ECF</strong>) from the total body water (<strong>TBW</strong>).</p>\n<p><strong>ICF&nbsp; = TBW - ECF</strong></p>\n<p>Indicators used for the measurement of TBW are:</p>\n<ul>\n<li>Tritium oxide (<sup>3</sup>H<sub>2</sub>O)</li>\n<li><strong>Deuterium oxide (<sup>2</sup>H<sub>2</sub>O)</strong></li>\n<li>Antipyrine</li>\n</ul>\n<p>Indicators used for the measurement of <strong>ECF&nbsp;</strong>are:</p>\n<ul>\n<li><sup>22</sup>Na</li>\n<li><sup>125</sup>I-iothalamate</li>\n<li>Thiosulfate</li>\n<li><strong>Inulin</strong></li>\n</ul>\n<p>Other options:</p>\n<p>Option A: <strong>Tritium oxide </strong>and<strong> Evans blue </strong>are used for the measurement of<strong> TBW</strong> and<strong> plasma volume&nbsp;</strong>respectively.</p>\n<p>Option C:<strong> Inulin</strong> and <sup><strong>125</strong></sup><strong>I-albumin</strong> are used for the measurement of <strong>ECF volume</strong> and <strong>plasma volume&nbsp;</strong>respectively, and together, they are used to calculate the<strong> interstitial fluid volume</strong> (ECF-plasma volume).</p>\n<p>Option D:&nbsp;<strong>Thiosulfate</strong> and <strong>Evans</strong> <strong>blue</strong> are used for the measurement of <strong>ECF volume</strong> and <strong>plasma volume&nbsp;</strong>respectively, and together, they are used to calculate the <strong>interstitial</strong> <strong>fluid</strong> <strong>volume</strong> (ECF-plasma volume).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old male patient with COVID-19 infection develops shortness of breath and is brought to the hospital. His SpO2 increases from 81% to 83% on administering oxygen via facemask at 10 L/min. The decision to deliver oxygen using the device shown below is made. What is its oxygen delivery rate?",
    "choices": [
      {
        "id": 1,
        "text": "1-6 L/min"
      },
      {
        "id": 2,
        "text": "2-15 L/min"
      },
      {
        "id": 3,
        "text": "10-15 L/min"
      },
      {
        "id": 4,
        "text": "40-60 L/min"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The equipment shown in the image is <strong>high-flow nasal cannula</strong>. It delivers oxygen at 40-60 L/min.\u00a0This patient has\u00a0<strong>persistent hypoxia</strong>\u00a0after an adequate trial of standard oxygen therapy and should be started on\u00a0<strong>high-flow nasal cannula oxygen therapy.\u00a0</strong></p>\n<p><strong>High flow nasal cannula</strong> is a mode of respiratory support used in the management of acute respiratory failure. It delivers <strong>humidified gas</strong> via the nasal cannula at high flow rates.</p>\n<ul>\n<li>HFNC can deliver oxygen at 40 L/min, 37\u00b0C, and 99.9% relative humidity.</li>\n<li>The <strong>high-flow oxygen</strong> is delivered directly to the nasopharynx. This produces <strong>FiO<sub>2</sub></strong> equal to that delivered by traditional mask devices.</li>\n<li>The benefits of HFNC include <strong>reduced work</strong> of breathing, <strong>improved gas exchange</strong> by nasopharyngeal dead-space washout, and <strong>decreased</strong>\u00a0<strong>energy</strong> required to <strong>humidify</strong> and <strong>heat</strong> respiratory gases.</li>\n</ul>\n<p>The HFNC equipment shown in the image below uses a heated humidifier (named PMH200), a nasal cannula (No. 2), and a ventilator (brand: vivo30).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2c59e9d848f14caab96b7e72d5defc07.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3aebb44bf51947339bd67c0ef0bc717ex512x525.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/830ff59bb60643dd907d3b8157545fe2x1280x1280.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2d9a526f186649dabbf96fed3f12c658x720x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e9e6523971b7493b9ef0d7937aec36c9x1279x1173.JPEG"
    ]
  },
  {
    "text": "Which national health program's logo is shown below?",
    "choices": [
      {
        "id": 1,
        "text": "Directly observed therapy short course"
      },
      {
        "id": 2,
        "text": "National tuberculosis elimination program"
      },
      {
        "id": 3,
        "text": "End TB strategy"
      },
      {
        "id": 4,
        "text": "National tobacco control program"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given logo is of the <strong>National Tuberculosis Elimination Program</strong> (NTEP).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f4140cfd744244f98c6ba011a02529ea.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0aedca5099294ed49330a2c7c486d988x1280x1259.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b0bc3d437ffc43458595dcc9923c1fb0x240x210.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4a8c18ed58f84dc98fe0aea874a94e8cx225x225.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c9a7b46eb5aa46589568e787f5cb8d52x146x119.PNG"
    ]
  },
  {
    "text": "A patient was started on a drug for the treatment of glaucoma. He presents with complaints of extensive loss of orbital fat giving the appearance of a sunken eye. Which of the following drugs is most likely to cause this side effect?",
    "choices": [
      {
        "id": 1,
        "text": "Timolol"
      },
      {
        "id": 2,
        "text": "Pilocarpine"
      },
      {
        "id": 3,
        "text": "Acetazolamide"
      },
      {
        "id": 4,
        "text": "Latanoprost"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario is suggestive of orbital fat atrophy and it is seen with&nbsp;<strong>topical PGF2&alpha; (prostaglandin) analogs&nbsp;</strong>like<strong>&nbsp;latanoprost.</strong></p>\n<p>Topical PGF2 alpha (prostaglandin) analogs are used as a first line in glaucoma.&nbsp;<strong>Latanoprost</strong>&nbsp;is the<strong>&nbsp;most&nbsp;commonly</strong>&nbsp;used anti-glaucoma medication. Other prostaglandin analogues are travoprost, bimatoprost, tafluprost, and unoprostone.</p>\n<p>Mechanism of action: It&nbsp;<strong>reduces intraocular pressure</strong>&nbsp;by altering the ciliary muscle tension and improving the&nbsp;<strong>outflow</strong>&nbsp;of the aqueous humor.</p>\n<p>Adverse effects:</p>\n<ul>\n<li>Blurring of vision</li>\n<li>Iris pigmentation</li>\n<li>Thickening and darkening of eyelashes</li>\n<li>Macular edema&nbsp;especially in aphakic patients.&nbsp;</li>\n<li><strong>Orbital fat atrophy</strong></li>\n</ul>\n<p>Other options:</p>\n<p>Option A:<strong> Timolol</strong>&nbsp;is a&nbsp;<strong>non-selective beta-blocker</strong>&nbsp;used topically in glaucoma. Ocular adverse effects of beta-blockers include&nbsp;<strong>dryness</strong>&nbsp;and&nbsp;<strong>redness</strong>&nbsp;of the eye, stinging, corneal hypoesthesia, blurred vision, and allergic blepharoconjunctivitis. Systemic side effects like bradycardia and bronchospasm may be seen due to absorption through the nasolacrimal duct.</p>\n<p>Option B: <strong>Pilocarpine</strong>&nbsp;is a&nbsp;<strong>miotic</strong>&nbsp;agent and adverse effects are corneal edema, miosis, induced myopia, and retinal detachment.</p>\n<p>Option C:<strong> Acetazolamide</strong>&nbsp;is a&nbsp;<strong>carbonic anhydrase inhibitor&nbsp;</strong>and reduces intraocular pressure by&nbsp;<strong>reducing&nbsp;</strong>the<strong>&nbsp;aqueous humor formation.&nbsp;</strong>It&nbsp;is given orally and the systemic adverse effects are anorexia, paresthesia, hypokalemia, acidosis, and depression.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient was diagnosed with multibacillary leprosy. For how long should she be treated and monitored for relapse, respectively?",
    "choices": [
      {
        "id": 1,
        "text": "6 months, 2 years"
      },
      {
        "id": 2,
        "text": "6 months, 3 years"
      },
      {
        "id": 3,
        "text": "12 months, 5 years"
      },
      {
        "id": 4,
        "text": "12 months, 10 years"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A patient with&nbsp;<strong>multibacillary leprosy</strong>&nbsp;should be <strong>treated</strong> for&nbsp;<strong>12 months&nbsp;</strong>and <strong>monitored for relapse</strong> for at least <strong>5 years.</strong></p>\n<p>Leprosy is a chronic infectious disease that mainly affects the skin, the peripheral nerves, upper respiratory tract mucosa, and the eyes caused by&nbsp;<em>Mycobacterium leprae. </em>If&nbsp;left untreated, it can lead to permanent damage to the skin, nerves, limbs, and eyes.</p>\n<p>Leprosy is classified as paucibacillary (PB) or multibacillary (MB).&nbsp;<strong>Paucibacillary</strong>&nbsp;leprosy refers to cases with <strong>1-5 skin lesions</strong>, <strong>no or only 1 involved</strong> <strong>nerve</strong>, with <strong>no bacilli</strong> in a skin smear.&nbsp;<strong>Multibacillary</strong>&nbsp;leprosy refers to cases with <strong>&gt;5 skin lesions,</strong>&nbsp;with <strong>&gt;1&nbsp;nerve involvement</strong>, or with the <strong>presence of bacilli</strong> in the skin smear, irrespective of the number of skin lesions.</p>\n<p>WHO recommends multidrug therapy (MDT) for the treatment of leprosy. The currently recommended MDT regimen includes <strong>dapsone, rifampicin</strong> and <strong>clofazimine</strong>. It is given for&nbsp;<strong>6 months</strong> in <strong>paucibacillary</strong> leprosy and <strong>12 months</strong> for <strong>multibacillary</strong> cases.&nbsp;</p>\n<div class=\"page\" title=\"Page 1430\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The majority of the cases are cured following MDT, however, relapse may occur. A <strong>multibacillary patient</strong> has to be <strong>monitored for 5 years</strong> and the <strong>paucibacillary patient</strong> has to be <strong>monitored for 2 years</strong> after completion of treatment.</p>\n<p>The blister pack provided for the treatment of multibacillary leprosy is shown below.</p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/df1b88f8af0a487786d1a18785861967x307x146.JPEG"
    ]
  },
  {
    "text": "A middle-aged male patient who is under mechanical positive pressure ventilation developed a sudden drop in saturation. BP is 90/60 mmHg, respiratory rate is 40 breaths per minute, and pulse rate is 120 bpm. The chest x-ray is given below. What is the diagnosis and the immediate step of management for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Left cardiac tamponade; Pericardiocentesis"
      },
      {
        "id": 2,
        "text": "Right cardiac tamponade; Pericardiocentesis"
      },
      {
        "id": 3,
        "text": "Left -sided tension pneumothorax; Needle thoracostomy"
      },
      {
        "id": 4,
        "text": "Right-sided tension pneumothorax; Chest tube insertion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario along with the x-ray points to a diagnosis of\u00a0<strong>left-sided tension pneumothorax</strong>.\u00a0Immediate<strong> needle thoracostomy</strong> with a\u00a0wide-bore needle in the fifth intercostal space should be done in order to prevent cardiovascular collapse.</p>\n<p>The given\u00a0<strong>x-ray</strong>\u00a0features showing a well-demarcated area\u00a0<strong>devoid</strong>\u00a0of\u00a0<strong>lung markings</strong>\u00a0on the\u00a0<strong>left</strong>\u00a0side with\u00a0<strong>tracheal deviation</strong>\u00a0and the<strong>\u00a0mediastinal shift</strong>\u00a0to the<strong>\u00a0right side,</strong>\u00a0along with the clinical scenario\u00a0is\u00a0suggestive of\u00a0<strong>tension pneumothorax.</strong></p>\n<p>Tension pneumothorax is a<strong>\u00a0clinical diagnosis,\u00a0</strong>and treatment should never be delayed while waiting for radiological confirmation. Imaging modalities used are ultrasound\u2013extended focused assessment with sonar for trauma (<strong>eFAST</strong>), chest x-ray, and spiral CT.</p>\n<p>A tension pneumothorax develops when there is a<strong>\u00a0</strong>tear either in the\u00a0<strong>parietal</strong>\u00a0or\u00a0<strong>visceral pleura</strong>. This\u00a0tear acts as a\u00a0<strong>one-way valve\u00a0</strong>i.e. air enters from the lung or chest wall through it during inspiration but has no way to escape during expiration. This ultimately leads to the\u00a0<strong>collapse</strong>\u00a0of the<strong>\u00a0affected lung</strong>.</p>\n<p>It usually occurs\u00a0following\u00a0<strong>penetrating</strong>\u00a0or blunt\u00a0<strong>chest trauma,</strong>\u00a0iatrogenic lung injury, or <strong>mechanical positive pressure ventilation</strong>.</p>\n<p>It is\u00a0characterized by:</p>\n<ul>\n<li>Chest pain</li>\n<li><strong>Tachypnoea</strong>, and\u00a0acute dyspnea</li>\n<li>Sudden onset\u00a0<strong>hemodynamic compromise</strong>\u00a0(<strong>tachycardia,\u00a0hypotension, low O<sub>2</sub>\u00a0saturation</strong>,\u00a0loss of consciousness)</li>\n<li>Neck vein distension</li>\n<li><strong>Tracheal deviation</strong>\u00a0away from the side of the injury\u00a0</li>\n<li>Decreased chest movements\u00a0on the affected side</li>\n<li><strong>Hyper-resonance</strong>\u00a0on percussion\u00a0on the affected side</li>\n<li><strong>Absence</strong>\u00a0or\u00a0<strong>decreased</strong>\u00a0<strong>breath sounds\u00a0</strong>on the affected side</li>\n</ul>\n<p>Management of tension pneumothorax:</p>\n<ul>\n<li><strong>Immediate\u00a0</strong>management-\u00a0<strong>needle decompression</strong>\u00a0or\u00a0<strong>needle thoracostomy</strong>\u00a0i.e. insertion of a wide-bore needle in the 5th ICS anterior to the mid-axillary line.</li>\n<li><strong>Definitive</strong>\u00a0management-\u00a0<strong>tube thoracostomy</strong>\u00a0or\u00a0<strong>chest tube insertion</strong>\u00a0in the 5th ICS in the<strong>\u00a0triangle of safety,\u00a0</strong>identified as a triangle that lies anterior to the mid-axillary line above the nipple, below, and lateral to the pectoralis major muscle.</li>\n</ul>\n<p>The x-ray below shows a\u00a0<strong>left-sided tension pneumothorax</strong>. The yellow arrows are pointing to the tracheal deviation and the mediastinal shift to the right side.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0ea5ea36ec07498fa5a9b03ca5d59e7d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/33d12882a129422b9950446756d39eccx1279x1186.PNG"
    ]
  },
  {
    "text": "A female patient presents with nasal obstruction, nasal discharge, and loss of smell. On examination of the nose, she has roomy nasal cavities, foul-smelling discharge, and dry greenish crusts. She is also found to have merciful anosmia. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Atrophic rhinitis"
      },
      {
        "id": 2,
        "text": "Nasal polyps"
      },
      {
        "id": 3,
        "text": "Allergic rhinitis"
      },
      {
        "id": 4,
        "text": "Foreign body"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical vignette of<strong> merciful anosmia</strong>, <strong>foul-smelling discharge,</strong> and<strong> roomy nasal cavities</strong>, with<strong> dry greenish crusts</strong>, points to a diagnosis of <strong>atrophic rhinitis</strong>.</p>\n<p>Atrophic rhinitis is a <strong>chronic inflammation</strong> of the nose characterized by <strong>atrophy</strong> of <strong>nasal mucosa</strong> and <strong>turbinate bones. </strong>The exact etiology of this condition is not known. It is more common in <strong>females</strong> and starts around <strong>puberty</strong>.&nbsp;</p>\n<p>Clinically patients present with <strong>nasal obstruction, foul odor,</strong> and<strong> merciful anosmia. </strong>Merciful anosmia is when the patient has <strong>marked anosmia</strong> and is unable to smell the <strong>foul odor</strong>&nbsp;coming from their nose.</p>\n<p>On examination of the nose,<strong> greenish</strong> or<strong> greyish crusting</strong> of the nasal passage, pale nasal mucosa, atrophied nasal turbinates, and epistaxis following the removal of the crusts. The <strong>roomy nasal cavity</strong> is seen due to the resorption of bones of the turbinates.</p>\n<p>Treatment:</p>\n<ul>\n<li><strong>Nasal irrigation -&nbsp;</strong>using&nbsp;<strong>warm saline</strong>&nbsp;or an&nbsp;<strong>alkaline&nbsp;solution</strong>&nbsp;composed of sodium bicarbonate 1 part, sodium biborate 1 part, sodium chloride 2 parts in 280 mL of water.</li>\n<li>Local antibiotics -&nbsp;<strong>Kemicetine antiozena</strong>&nbsp;solution&nbsp;containing&nbsp;<strong>chloromycetin, estradiol, and vitamin D2.&nbsp;</strong></li>\n<li>25% glucose in glycerine,&nbsp;estradiol spray, systemic use of streptomycin, potassium iodide,&nbsp;placental extract.</li>\n<li>Surgical&nbsp;management:\n<ul>\n<li><strong>Young's operation</strong>: In this procedure, flaps are raised within the nasal vestibule and both the nostrils are completely closed and&nbsp;are opened after 6 months. During this time, the mucosa may revert to normal and the crusting is reduced.</li>\n<li><strong>Modified Young's operation: </strong>In this procedure, the nostrils are <strong>partially closed</strong> and thereby&nbsp;avoiding the discomfort of complete closure of the nostrils. The results are the same compared to Young's operation.</li>\n<li>Narrowing of the nasal cavity can be done by submucosal injection of <strong>Teflon paste</strong>, or by insertion of fat, cartilage, or Teflon strips under the mucoperiosteum.</li>\n</ul>\n</li>\n</ul>\n<p>Other options:</p>\n<p>Option B: <strong>Nasal polyps</strong> are non-neoplastic masses of the edematous nasal or sinus mucosa. Nasal polyps can be antrochoanal polyps or ethmoidal polyps. They present with a polypoid mass in the nose.</p>\n<p>Option C: <strong>Allergic rhinitis</strong> is associated with inferior turbinate hypertrophy and can cause chronic nasal obstruction. It is characterized by watery nasal discharge, sneezing, and itching in the nose.</p>\n<p>Option D: <strong>Foreign body nose</strong> is commonly seen in children. The child presents with unilateral, foul-smelling nasal discharge.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A mother brings her 7-year-old daughter with the complaint that the child wakes up at night screaming, sweating, and terrified. She does not respond to the comforting efforts by her parents. She does not recall the episode in the morning. In which stage of sleep do the episodes experienced by the daughter occur?",
    "choices": [
      {
        "id": 1,
        "text": "NREM stage 1"
      },
      {
        "id": 2,
        "text": "REM sleep"
      },
      {
        "id": 3,
        "text": "NREM stages 3, 4"
      },
      {
        "id": 4,
        "text": "NREM stage 2"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><span data-preserver-spaces=\"true\">The child who wakes up with intense fear and signs of arousal such as sweating, and does not recall the event in the morning is experiencing <strong>sleep terrors</strong> or<strong> n</strong></span><strong>ight terrors.&nbsp;</strong><span data-preserver-spaces=\"true\">Night terrors occur in deep sleep&nbsp;</span><strong><span data-preserver-spaces=\"true\">(stages 3 and 4 of NREM sleep).</span></strong></p>\n<p>Sleep terror or night terror is an <strong>NREM sleep arousal disorder.</strong> In this condition, the patient experiences <strong>sudden arousal</strong> with <strong>intense fearfulness</strong>. They may have a piercing <strong>scream</strong> or <strong>cry</strong> with manifestations of <strong>intense anxiety</strong>.</p>\n<p>On arousal, they sit up in bed, are <strong>unresponsive to stimuli</strong>, and are <strong>confused</strong> and <strong>disoriented</strong> <strong>on</strong> <strong>awakening</strong>. <strong>Autonomic disturbances</strong> may be present. If vocal, they are <strong>incoherent</strong>. The patient <strong>cannot</strong> generally <strong>be awakened</strong> and efforts to calm them are not successful.&nbsp;&nbsp;</p>\n<p>Sleep terrors&nbsp;only have brief frightening or vivid images, or may not have imagery at all. It can be <strong>provoked</strong> by <strong>sleep</strong> <strong>deprivation</strong>, <strong>fever</strong>, and central nervous system <strong>depressant</strong> <strong>withdrawal</strong>.&nbsp;</p>\n<p><span data-preserver-spaces=\"true\">Nightmares have elaborate dream sequences<strong>&nbsp;without autonomic disturbances</strong>. They occur in <strong>REM sleep.</strong> The patient <strong>can be aroused</strong> and typically remembers the dream.</span></p>\n<p><span data-preserver-spaces=\"true\">The various stages of sleep and their appearance on EEG are summarized in the image below.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/85c8452da2eb4fb99f572735f5b40413x1280x2592.JPEG"
    ]
  },
  {
    "text": "A person working in the smelting industry presents with the finding as shown below. She also complains of painful paresthesia over the hands and feet. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Arsenic poisoning"
      },
      {
        "id": 2,
        "text": "Chromium poisoning"
      },
      {
        "id": 3,
        "text": "Mercury poisoning"
      },
      {
        "id": 4,
        "text": "Lead poisoning"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical features and the image showing<strong> hyperkeratosis</strong> of palms are suggestive of chronic <strong>arsenic poisoning.</strong></p>\n<p>Acute poisoning:&nbsp;<strong>Resembles cholera</strong>; garlicky odor.</p>\n<p>Chronic poisoning:</p>\n<ul>\n<li class=\"p1\"><strong>Raindrop pigmentation is seen</strong>&nbsp;on temples, eyelids, and neck</li>\n<li class=\"p1\"><strong>Aldrich-Mee&rsquo;s lines&nbsp;</strong>(transverse white striae on the fingernails)</li>\n<li class=\"p1\">Hyperkeratosis of palms and soles</li>\n<li class=\"p1\">Painful paresthesia of hands and feet</li>\n<li class=\"p1\">The red velvety appearance of the stomach</li>\n<li class=\"p1\"><strong>Blackfoot disease -</strong>&nbsp;a gangrenous condition affecting the extremities</li>\n</ul>\n<p class=\"p1\">Tests to detect Arsenic poisoning:</p>\n<ul>\n<li class=\"p1\"><strong>Marsh test and Reinsch test</strong></li>\n</ul>\n<p class=\"p1\">Treatment:</p>\n<ul>\n<li><strong>Freshly prepared hydrated ferric oxide</strong></li>\n<li>BAL (British anti-Lewisite)</li>\n<li>Penicillamine (If BAL is not available)</li>\n</ul>\n<p class=\"p1\">&nbsp;<strong>Mee&rsquo;s lines</strong> - Transverse white striae of the fingernails are shown below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fcc02fa236a4485f90d2d484245ac27d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6d5a0e05abc8480f8f2dcd18a335fce7x1158x990.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b113a4ce4fc2491ab165bf23119653d7x320x261.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cbb01b47d44f44c383f6f4df1e21dfa6x620x473.JPEG"
    ]
  },
  {
    "text": "A 33-year-old lady comes for a routine check-up at 34 weeks of gestation when her blood pressure is found to be 170/118 mmHg. Her urine analysis shows proteinuria 3+. Which of the following statements are true about the management of this situation?",
    "choices": [
      {
        "id": 1,
        "text": "3 and 4 only"
      },
      {
        "id": 2,
        "text": "3 and 5 only"
      },
      {
        "id": 3,
        "text": "1, 2 and 5"
      },
      {
        "id": 4,
        "text": "1, 2, 4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is suggestive of severe&nbsp;<strong>pre-eclampsia</strong>&nbsp;with&nbsp;<strong>hypertensive crisis&nbsp;</strong>(BP&gt;160/110 mmHg)<strong>. Intravenous Labetalol&nbsp;</strong>is the drug of choice for controlling blood pressure in<strong> severe pre-eclampsia </strong>and the<strong> maximum dose</strong> that can be given is<strong> 300 mg</strong>. Therefore, options 3 and 4 are correct.&nbsp;</p>\n<p>Drugs used in the management of hypertensive crisis.</p>\n<table style=\"height: 239px; width: 680px;\">\n<tbody>\n<tr>\n<td style=\"width: 84px; text-align: center;\"><strong>Drug</strong></td>\n<td style=\"width: 69px; text-align: center;\"><strong>Onset of Action&nbsp;</strong></td>\n<td style=\"width: 161px; text-align: center;\"><strong>Dose schedule&nbsp;</strong></td>\n<td style=\"width: 178.608px; text-align: center;\"><strong>Maximum dose&nbsp;</strong></td>\n<td style=\"width: 35.3923px; text-align: center;\"><strong>Maintainance Dose&nbsp;</strong></td>\n</tr>\n<tr>\n<td style=\"width: 84px; text-align: center;\"><strong>Labetalol</strong></td>\n<td style=\"width: 69px;\">5 mins</td>\n<td style=\"width: 161px;\">10-20 mg IV every 10 mins&nbsp;</td>\n<td style=\"width: 178.608px;\">300 mg IV</td>\n<td style=\"width: 35.3923px;\">40 mg/hr</td>\n</tr>\n<tr>\n<td style=\"width: 84px; text-align: center;\"><strong>Hydralazine</strong></td>\n<td style=\"width: 69px;\">10 mins</td>\n<td style=\"width: 161px;\">5 mg IV every 30 mins&nbsp;</td>\n<td style=\"width: 178.608px;\">30 mg IV</td>\n<td style=\"width: 35.3923px;\">10 mg/hr</td>\n</tr>\n<tr>\n<td style=\"width: 84px; text-align: center;\"><strong>Nifedipine</strong></td>\n<td style=\"width: 69px;\">10 mins&nbsp;</td>\n<td style=\"width: 161px;\">10-20 mg oral, can be repeated in 30 mins&nbsp;</td>\n<td style=\"width: 178.608px;\">240 mg/24 hours&nbsp;</td>\n<td style=\"width: 35.3923px;\">4-6 hour intervals&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 84px; text-align: center;\"><strong>Nitroglycerin</strong></td>\n<td style=\"width: 69px;\">0.5-5mins&nbsp;</td>\n<td style=\"width: 161px;\">5 mcg/min IV</td>\n<td style=\"width: 178.608px;\">Short-term therapy when other drugs failed</td>\n<td style=\"width: 35.3923px;\">&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 84px; text-align: center;\"><strong>Sodium Nitroprusside&nbsp;</strong></td>\n<td style=\"width: 69px;\">0.5-5mins&nbsp;</td>\n<td style=\"width: 161px;\">0.25-5 mcg/kg/min IV</td>\n<td style=\"width: 178.608px;\">Short-term therapy <strong>when other drugs failed</strong></td>\n<td style=\"width: 35.3923px;\">&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p class=\"p1\">&nbsp;</p>\n<p class=\"p1\">Captopril is an ACE inhibitor and is hence contraindicated in pregnancy.</p>\n<p class=\"p1\">Labetalol is avoided in women having asthma or cardiac failure.</p>\n<p class=\"p1\">Sodium nitroprusside is only given after treatment with other drugs has failed.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 7-year-old boy presents with dyspnea on exertion and bluish discoloration of lips, which is relieved on squatting. A chest x-ray is taken and is shown below. Which of the following is the primary defect responsible for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Anterior deviation of the infundibular septum"
      },
      {
        "id": 2,
        "text": "Pulmonary venous connection to the SVC"
      },
      {
        "id": 3,
        "text": "Downward displacement of tricuspid valve"
      },
      {
        "id": 4,
        "text": "Ostium secundum defect in the fossa ovalis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical vignette showing <strong>cyanotic spells</strong> and chest x-ray showing a <strong>boot-shaped</strong> cardiac silhouette are suggestive of the<strong> Tetralogy of Fallot</strong>. The primary defect is an <strong>anterior deviation of the infundibular septum</strong> (the muscular septum that separates the aortic and pulmonary outflows).</p>\n<p><strong>Tetralogy of Fallot (TOF)</strong>&nbsp;is a&nbsp;cyanotic congenital heart condition&nbsp;and has been classically characterized by the following&nbsp;components:</p>\n<ul>\n<li>Obstruction to right ventricular outflow (<strong>pulmonary stenosis</strong>)</li>\n<li>Malalignment type of ventricular septal defect (<strong>VSD</strong>)</li>\n<li>Dextroposition of the aorta so that it overrides the ventricular septum (<strong>overriding of the aorta</strong>), and</li>\n<li>Right ventricular hypertrophy (<strong>RVH</strong>)</li>\n</ul>\n<p><strong>Paroxysmal hypercyanotic attacks</strong> (hypoxic, &ldquo;blue,&rdquo; or &ldquo;tet&rdquo; spells) are a problem during the 1st year of life and&nbsp;may last from a few minutes to a few hours. The child can have&nbsp;shortness of breath and bluish discoloration of lips which is relieved on squatting. Short episodes are followed by generalized weakness and sleep. Severe spells may progress to unconsciousness and occasionally to convulsions or hemiparesis.</p>\n<p>Older children with tetralogy of Fallot characteristically<strong> increase pulmonary blood flow</strong> by <strong>squatting</strong>.&nbsp;Squatting&nbsp;is a compensatory mechanism, it increases&nbsp;<strong>peripheral vascular resistance (PVR)</strong>&nbsp;and thus decreases the magnitude of the right-to-left shunt across the&nbsp;<strong>ventricular septal defect (VSD)</strong>.</p>\n<p>Chest X-ray describes \"<strong>Coeur en sabot</strong>\" or&nbsp;<strong>boot-shaped heart</strong>, which is seen in the&nbsp;tetralogy of Fallot (TOF).</p>\n<ul>\n<li>\"Coeur en sabot\" is due to cardiac apex elevation as a result of&nbsp;<strong>right ventricular hypertrophy.&nbsp;</strong>The cardiac silhouette has been likened to that of a boot.</li>\n<li>The hilar areas and lung fields are relatively clear because of&nbsp;<strong>diminished pulmonary blood flow</strong>&nbsp;or the small size of the pulmonary arteries.</li>\n<li>The aorta is usually large.</li>\n</ul>\n<p>Other options:</p>\n<p>Option B - A <strong>pulmonary venous connection to the superior vena cava (SVC)</strong> is seen in <strong>total anomalous&nbsp;pulmonary venous return</strong> (TAPVR). It is a cyanotic congenital heart defect in which the pulmonary veins drain directly into the right atrium, coronary sinus, SVC, IVC, or ductus venosus.</p>\n<p>On chest x-ray, supracardiac TAPVR presents with the <strong>snowman appearance of the heart&nbsp;</strong>which is as shown below</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dbd50778463e4fd3b998c78dd00b373b.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ce23f3a34ed842c08b637cf171dfe1d8x720x893.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a62677468177448caa2014bbfdf39028x625x549.PNG"
    ]
  },
  {
    "text": "A 30-year-old man presented to the emergency department after suffering a penetrating injury to the neck. On examination, there is a small laceration just above the cricoid cartilage. His vitals were found to be stable. Examination revealed active bleeding from the site of injury. What is the next step of management?",
    "choices": [
      {
        "id": 1,
        "text": "Immediate neck exploration"
      },
      {
        "id": 2,
        "text": "CT Angiogram"
      },
      {
        "id": 3,
        "text": "Angioembolization"
      },
      {
        "id": 4,
        "text": "Bronchoscopy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above clinical scenario of <strong>penetrating neck injury</strong> just above the <strong>cricoid cartilage</strong> corresponds to<strong>\u00a0zone II</strong> neck injury. Although the patient is hemodynamically stable, the <strong>presence</strong> of <strong>hard signs</strong> such as <strong>active bleeding\u00a0</strong>warrants<strong>\u00a0immediate neck exploration</strong> as the next step of management.</p>\n<p><strong>Neck trauma</strong> is classified based on the different regions of the neck:</p>\n<ul>\n<li>Zone I:\u00a0<strong>thoracic inlet\u00a0</strong>to<strong>\u00a0cricoid</strong>, associated with\u00a0<strong>maximum mortality.</strong> It contains large vascular structures as well as the trachea and oesophagus.</li>\n<li>Zone II:\u00a0<strong>cricoid cartilage</strong>\u00a0to the\u00a0<strong>angle of the mandible</strong>,\u00a0<strong>most commonly prone to injury</strong>\u00a0and most\u00a0<strong>easily accessible</strong>\u00a0for surgery. It contains the carotid and vertebral arteries, jugular veins, and structures of the aerodigestive tract.</li>\n<li>Zone III:\u00a0<strong>angle of the mandible</strong>\u00a0to the\u00a0<strong>base of the skull</strong>. Structures within zone III include blood vessels that are\u00a0<strong>difficult to expose</strong>\u00a0surgically.</li>\n</ul>\n<p>The following are the <strong>indications</strong> for <strong>immediate surgical exploration</strong> of neck trauma. They are also known as the\u00a0<strong>hard signs of neck trauma</strong>:</p>\n<ul>\n<li aria-level=\"1\"><strong>Active bleeding</strong>\u00a0</li>\n<li aria-level=\"1\">Expanding or pulsatile hematoma</li>\n<li aria-level=\"1\">Air bubbling from penetrating injury</li>\n<li aria-level=\"1\">Massive subcutaneous emphysema</li>\n<li aria-level=\"1\">Hematemesis</li>\n<li aria-level=\"1\">Presence of neurological deficit</li>\n<li aria-level=\"1\">Fluid-resistant\u00a0hemorrhagic shock</li>\n<li aria-level=\"1\">Audible bruit or palpable thrill</li>\n<li aria-level=\"1\">Airway compromise</li>\n</ul>\n<p>Management:</p>\n<ul>\n<li aria-level=\"1\">\u00a0If the patient is <strong>hemodynamically</strong>\u00a0<strong>unstable </strong>or presence of any<strong> hard signs -</strong>\u00a0<strong>neck exploration.</strong></li>\n<li aria-level=\"1\">\u00a0If the patient is stable-\u00a0angiography and angioembolization\u00a0are indicated. If it fails, then neck exploration should be done.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young girl presented with an inability to abduct her right thumb following a supracondylar fracture of her right humerus. The following test was done on her and found to be positive. What is the nerve likely to be injured?",
    "choices": [
      {
        "id": 1,
        "text": "Median nerve"
      },
      {
        "id": 2,
        "text": "Radial nerve"
      },
      {
        "id": 3,
        "text": "Ulnar nerve"
      },
      {
        "id": 4,
        "text": "Posterior interosseus nerve"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario and the image showing a <strong>positive pen test</strong> are suggestive of the weakness of the&nbsp;<strong>abductor pollicis brevis</strong> muscle. The nerve likely to be injured in this case is the&nbsp;<strong>median nerve</strong>.</p>\n<p>To perform the&nbsp;<strong>pen test</strong>, the hand is held flat with the palm facing upwards. A pen is held above the palm and the patient is asked to touch the pen with his thumb. If the patient is<strong> unable</strong> to<strong> touch</strong> the pen, it signifies a <strong>positive</strong> <strong>pen test</strong>.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p>Median nerve lesions can be high lesions or low lesions depending on the site of injury.</p>\n<p><strong>Low lesions</strong>&nbsp;occur due to injuries at the <strong>distal 1/3<sup>rd </sup></strong>of the <strong>forearm</strong> such as carpal dislocation or cut wound of the wrist. There will be paralysis of the <strong>hand muscles</strong> and the patient will be <strong>unable</strong> to <strong>abduct</strong> the <strong>thumb</strong>. There is also a <strong>loss </strong>of <strong>sensation</strong> over the <strong>radial 3&frac12;&nbsp;digits</strong>. The&nbsp;<strong>forearm muscles</strong>&nbsp;supplied by the median nerve&nbsp;are<strong> spared</strong>&nbsp;in these lesions. Wasting of thenar eminence is seen in long-standing cases.</p>\n<p><strong>High lesions</strong>&nbsp;occur due to injuries&nbsp;<strong>above</strong> the<strong> elbow</strong>&nbsp;such as&nbsp;<strong>forearm fractures </strong>or<strong> elbow dislocation</strong>. There is <strong>paralysis</strong> of the <strong>forearm muscles</strong> along with all the features of low lesions.</p>\n<p>Muscles supplied by the median nerve are given in the table:</p>\n<table style=\"height: 298px; width: 361px;\">\n<tbody>\n<tr style=\"height: 20px;\">\n<td style=\"width: 88.3359px; height: 20px;\">In the arm</td>\n<td style=\"width: 256.664px; height: 20px;\">No muscles</td>\n</tr>\n<tr style=\"height: 79px;\">\n<td style=\"width: 88.3359px; height: 79px;\">Proximal 1/3<sup>rd</sup> of the forearm</td>\n<td style=\"width: 256.664px; height: 79px;\">All the flexor muscles of the proximal forearm, except the flexor carpi ulnaris and the medial half of the flexor digitorum profundus</td>\n</tr>\n<tr style=\"height: 40px;\">\n<td style=\"width: 88.3359px; height: 40px;\">Distal 1/3<sup>rd</sup> of the forearm&nbsp;</td>\n<td style=\"width: 256.664px; height: 40px;\">No muscles</td>\n</tr>\n<tr style=\"height: 21.9062px;\">\n<td style=\"width: 88.3359px; height: 21.9062px;\">In the hand</td>\n<td style=\"width: 256.664px; height: 21.9062px;\">\n<p><strong>Abductor pollicis brevis<br /></strong>Opponens pollicis<br />Flexor pollicis brevis<br />First two lumbricals</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Other tests for median nerve:&nbsp;</p>\n<p><strong>Pointing index sign</strong> or <strong>Oschner&rsquo;s clasp test </strong>- the patient is asked to clasp both hands together. When this is done the index&nbsp;and the middle finger fail to flex due to the loss of action of long finger flexors which are supplied by the median nerve.&nbsp;</p>\n<p><strong>Benediction test </strong>- due to loss of activity of the long finger flexors&nbsp;the patient is unable to flex the index and middle finger&nbsp;on lifting the hand. As this is the position a clergyman uses to bless the couple during the marriage, it is called&nbsp;the benediction test.</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a5f6ce3454034878a803f4d2a05803ec.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 3-year-old girl is being evaluated for congenital ptosis. On examination, there is retraction of the ptotic lid when she is asked to move her jaw from side to side. It is inferred that there is a misdirection of the nerve supplying the jaw muscles to the levator palpebrae muscle. Identify the misdirected nerve.",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario describes <strong>Marcus&ndash;Gunn jaw-winking syndrome</strong>. The misdirected cranial nerve supplying the jaw muscles is the mandibular division of the <strong>trigeminal nerve</strong>&nbsp;labeled as '4'.</p>\n<p><strong>Trigeminal nerve</strong></p>\n<p>The trigeminal nerve leaves the <strong>anterior aspect of the pons</strong> as a small motor root and a large sensory root. The nerve passes forward out of the posterior cranial fossa and rests on the upper surface of the apex of the <strong>petrous part of the temporal bone</strong> in the middle cranial fossa. The large sensory root now expands to form the crescent-shaped <strong>trigeminal ganglion</strong>, which lies within a pouch of dura mater called the trigeminal or Meckel cave. The ophthalmic, maxillary, and mandibular nerves arise from the anterior border of the ganglion.</p>\n<p><strong>Branches of the trigeminal nerve</strong></p>\n<ul>\n<li><strong>The ophthalmic nerve (V1)</strong>\n<ul>\n<li>Leaves the skull through the<strong> superior orbital fissure</strong> to enter the orbital cavity.</li>\n<li>Contains only <strong>sensory</strong> fibers\n<ul>\n<li>Cornea</li>\n<li>Skin of forehead, scalp, eyelids, and nose</li>\n<li>Mucous membrane of paranasal sinuses and nasal cavity</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>The maxillary nerve (V2)</strong>\n<ul>\n<li>Leaves the skull through the <strong>foramen rotundum.</strong></li>\n<li>Contains only <strong>sensory</strong> fibers from\n<ul>\n<li>Teeth of upper jaw</li>\n<li>Skin of face over maxilla</li>\n<li>Mucous membrane of nose, the maxillary sinus, and palate</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>The mandibular nerve (V3</strong>)\n<ul>\n<li>Leaves the skull through the <strong>foramen ovale.</strong></li>\n<li>Contains both sensory and motor fibers.</li>\n<li><strong>Sensory</strong> from\n<ul>\n<li>Skin&nbsp;of&nbsp;cheek, over mandible and side&nbsp;of&nbsp;head</li>\n<li>Teeth&nbsp;of&nbsp;lower jaw and temporomandibular joint</li>\n<li>Mucous membrane&nbsp;of&nbsp;mouth and anterior part&nbsp;of&nbsp;tongue</li>\n</ul>\n</li>\n<li><strong>Motor</strong> to\n<ul>\n<li>Muscles of mastication (pterygoids, masseter and temporalis)</li>\n<li>Tensor tympani</li>\n<li>Anterior belly of digastric</li>\n<li>Mylohyoid</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><strong>Marcus&ndash;Gunn jaw-winking syndrome:</strong></p>\n<ul>\n<li>About <strong>5%</strong> of all cases of <strong>congenital ptosis</strong> are associated with the Marcus&ndash;Gunn jaw-winking phenomenon.</li>\n<li>The vast majority are <strong>unilateral</strong>.</li>\n<li><strong>Etiology</strong>:<strong>&nbsp;</strong>a branch of the <strong>mandibular division</strong> of the <strong>fifth</strong> cranial nerve is <strong>misdirected</strong> to the levator muscle.</li>\n<li>Signs\n<ul>\n<li><strong>Retraction of the ptotic lid</strong> in conjunction with <strong>stimulation of the ipsilateral pterygoid muscles</strong> by <strong>chewing</strong>, <strong>sucking</strong>, opening the mouth, or contralateral jaw movement.</li>\n<li>Less common stimuli to winking include <strong>jaw protrusion</strong>, <strong>smiling</strong>, swallowing, and clenching of teeth.</li>\n<li><strong>Jaw-winking does not improve with age</strong> although patients may learn to mask it.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Image</strong>:&nbsp;The woman cannot control her eyelids while drinking.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8cebb4df089a4bc6a014898d3dfa63f7.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7dee4f8a38f34d9bae43f489f12a0038x466x313.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b18ce187f0c248829301610677f51205x1280x1444.JPEG"
    ]
  }
];
        let quizName = 'Mini Test 4';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2022-23"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>