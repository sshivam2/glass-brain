<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 037 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2022
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A woman presents to the outpatient department with complaints of amenorrhoea for the past year. She has a history of postpartum hemorrhage and lactational failure. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Sheehan's syndrome"
      },
      {
        "id": 2,
        "text": "Hyperthyroidism"
      },
      {
        "id": 3,
        "text": "Prolactinoma"
      },
      {
        "id": 4,
        "text": "Pituitary apoplexy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario points to a diagnosis of\u00a0<strong>Sheehan's syndrome</strong>.\u00a0</p>\n<p>Sheehan syndrome\u00a0also called <strong>post-partum pituitary necrosis</strong> refers to the necrosis of the pituitary gland following significant <strong>post-partum bleeding, hypovolemia, and shock.</strong>\u00a0It may present acutely as an endocrine emergency or present chronically.The late presentation has the following features:</p>\n<ul>\n<li><strong>Lactation failure</strong> - due to prolactin deficiency</li>\n<li><strong>Amenorrhea</strong> - due to anovulation caused by reduced gonadotropin activity</li>\n<li><strong>Hypothyroidism</strong> - due to decreased TSH secretion\u00a0</li>\n<li><strong>Adrenal insufficiency</strong> - due to low ACTH</li>\n</ul>\n<p class=\"p1\">Option B: <strong>Hyperthyroidism </strong>can cause oligomenorrhoea and amenorrhea but is likely to have symptoms of hyperthyroidism like\u00a0weight loss, palpitations, tremors, heat intolerance, dyspnea on exertion, diarrhoea and muscle weakness.</p>\n<p class=\"p1\">Option C:<strong> Prolactinoma</strong>\u00a0or pituitary adenoids is the condition of hyperprolactinemia diagnosed by a prolactin level &gt;200 \u03bcg/L. It usually presents with infertility, amenorrhea, and <strong>galactorrhea.</strong></p>\n<p class=\"p1\">Option D: <strong>Pituitary apoplexy</strong> is a condition in which there is a\u00a0<strong>haemorrhage or infarction</strong>\u00a0of the pituitary gland. This disorder commonly occurs in a<strong> pre-existing pituitary adenoma</strong>. This patient does not have any signs of adenoma and a history of PPH makes\u00a0Sheehan syndrome more likely.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Antigen binding to MHC class I activates which of the following cells?",
    "choices": [
      {
        "id": 1,
        "text": "Cytotoxic T cells"
      },
      {
        "id": 2,
        "text": "B cells"
      },
      {
        "id": 3,
        "text": "NK cells"
      },
      {
        "id": 4,
        "text": "Helper cells"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Antigen binding to <strong>major histocompatibility complex</strong> (MHC) <strong>class I</strong> activates <strong>cytotoxic T cells</strong>.</p>\n<p>The major histocompatibility complex (MHC), is a genetic locus that encodes a group of antigens. The MHC molecules also bind peptide antigens and present them to the T cells. The human MHC is called the <strong>human leukocyte antigen</strong> (HLA) complex.</p>\n<p>The <strong>MHC class I</strong> proteins present their antigens to <strong>CD8 T cells (cytotoxic T cells)</strong>. The antigens bound to <strong>MHC class II</strong> proteins activate the <strong>CD4 T cells( T helper cells)</strong>. There is no cross recognition between the T cells and MHC classes. This is known as <strong>MHC restriction</strong>. For example, a CD4 T cell would recognize an antigen presented by a macrophage only if it's bound to MHC class II molecules.&nbsp;</p>\n<p>Other options:</p>\n<p>Option B - <strong>B cells</strong> interact with an antigen based on the immunoglobulin surface receptors on the B cell. The receptor along with the antigen is embodied and degraded and the peptides produced are returned to the cell surface. It is then bound to the <strong>MHC class II</strong> molecules present on the cell surface. This is then recognized by <strong>CD4 T cells</strong>. Ultimately, the B cells are stimulated to proliferate and differentiate into <strong>plasma cells</strong> which secrete <strong>antibodies</strong>.&nbsp;</p>\n<p>Option C - <strong>Natural killer</strong> (NK) cells are granular lymphocytes that confer <strong>innate immunity</strong> by protecting against viruses and <strong>intracellular</strong> pathogens.&nbsp;</p>\n<p>Option D - <strong>T helper cells</strong> are responsible for the production of <strong>cytokines</strong> which activate the humoral and cell-mediated branches of immunity. These cells will recognize only those antigens that are presented along with <strong>MCH class II</strong> molecules on APC such as macrophages and B lymphocytes.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 27-year-old woman presents to the hospital with fever, malaise, and arthralgia for a 1-month duration. She also complains of pain, numbness, and weakness in her right arm which has been increasing over the past 1 week. Clinical examination reveals weak radial pulses and her lab investigations show elevated ESR. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Coarctation of aorta"
      },
      {
        "id": 2,
        "text": "Giant cell arteritis"
      },
      {
        "id": 3,
        "text": "Takayasu arteritis"
      },
      {
        "id": 4,
        "text": "Syphilitic aortitis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above clinical features with marked weakening of pulse in the upper extremities and laboratory findings of elevated ESR are suggestive of <strong>Takayasu arteritis.</strong>\u00a0It is also known as <strong>pulseless disease.\u00a0</strong></p>\n<p>Takayasu arteritis is a systemic disease and may present with<strong> generalised</strong> and <strong>vascular symptoms</strong>. It\u00a0commonly affects adolescents or\u00a0<strong>young females.</strong> Generalised symptoms like fever, night sweats, weight loss, malaise, arthralgias, and anorexia, may occur long before vascular symptoms.</p>\n<p>Vascular symptoms depend on the vessel involved:</p>\n<ul>\n<li>Arch of the aorta and its branches:\n<ul>\n<li><strong>Subclavian artery (most commonly affected)</strong>\u00a0- leads to\u00a0<strong>weak pulses</strong>\u00a0in the upper extremities. Hence it is also known as pulseless disease. May also lead to\u00a0<strong>Raynaud\u2019s phenomenon</strong>.</li>\n<li>Carotid arteries- leads to weak pulses, blindness, and neurological deficits.</li>\n<li>Aortic arch- may lead to congestive heart failure</li>\n</ul>\n</li>\n<li>Abdominal aorta, celiac axis and superior mesenteric artery- leads to abdominal pain, nausea and vomiting</li>\n<li>Iliac vessels- leads to claudication of the legs</li>\n<li>Renal arteries- leads to systemic hypertension</li>\n<li>Pulmonary artery- leads to pulmonary hypertension</li>\n<li>Coronary arteries (least commonly affected) - lead to myocardial infarction</li>\n</ul>\n<p>Investigations:</p>\n<ul>\n<li>Lab reports reveal an elevated ESR level, anemia, and elevated immunoglobulin levels.</li>\n<li><strong>Arteriography</strong>\u00a0is done as a confirmatory test.</li>\n</ul>\n<p>Treatment includes\u00a0<strong>glucocorticoid</strong>\u00a0therapy, methotrexate, immunotherapy with anti-TNF agents, and surgery.\u00a0</p>\n<p>Other options:</p>\n<p>Option A:<strong> Coarctation of the aorta</strong> is a congenital narrowing of the aorta, leading to <strong>upper limb hypertension </strong>and <strong>weak or delayed femoral pulses</strong> (radio-femoral delay). Patients may also present with headaches, nosebleeds, and <strong>claudication</strong> in the lower limbs.</p>\n<p>Option B: <strong>Giant cell arteritis</strong> is a vasculitis affecting<strong> large arteries</strong>, commonly presenting with <strong>temporal headache</strong>, scalp tenderness,<strong> jaw claudication,</strong> and vision loss. It is often associated with <strong>elevated ESR </strong>and systemic symptoms like fever and fatigue.</p>\n<p>Option D: <strong>Syphilitic aortitis</strong>, a complication of <strong>tertiary syphilis</strong>, involves inflammation of the aorta, leading to <strong>aortic aneurysm, aortic regurgitation</strong>, or narrowing of the coronary ostia. Clinical features include <strong>chest pain, dyspnea, </strong>and signs of <strong>heart failure.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In patients with Wilson's disease, Kayser-Fleischer rings are most commonly associated with:",
    "choices": [
      {
        "id": 1,
        "text": "Hepatitis"
      },
      {
        "id": 2,
        "text": "Dystonia"
      },
      {
        "id": 3,
        "text": "Osteoarthritis"
      },
      {
        "id": 4,
        "text": "Cholelithiasis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The presence of the&nbsp;<strong>Kayser-Fleischer</strong> (KF) ring in <strong>Wilson's disease</strong>&nbsp;is most commonly associated with&nbsp;<strong>neuropsychiatric</strong> manifestations such as&nbsp;<strong>dystonia.</strong></p>\n<p>Wilson&rsquo;s disease is caused due to a&nbsp;<strong>loss-of-function mutation</strong>&nbsp;in the&nbsp;<strong>ATP7B</strong>&nbsp;gene on&nbsp;<strong>Chr.13q</strong>. The gene encodes a copper-transporting ATPase (ATP7B) which has 2 functions:</p>\n<ul>\n<li aria-level=\"1\">Maintains copper in bound form by binding copper to apoceruloplasmin</li>\n<li aria-level=\"1\">Helps excrete free copper in bile.</li>\n</ul>\n<p>Thus, an ATP7B deficiency leads to&nbsp;<strong>excess deposition of free copper</strong>&nbsp;within tissues.&nbsp;It is an&nbsp;<strong>autosomal recessive</strong>&nbsp;condition. So, siblings of affected children have a&nbsp;<strong>1 in 4</strong>&nbsp;chance.</p>\n<p>In the majority of cases, neuropsychiatric manifestations follow hepatic manifestations. It is due to the <strong>deposition </strong>of&nbsp;<strong>free copper</strong> in the <strong>basal ganglia</strong> (leading to bilateral degeneration and atrophy) and <strong>cortex</strong>. The features include:</p>\n<ul>\n<li><strong>Dysarthria</strong> (most common): Irregular word spacing, hypophonic or spastic speech</li>\n<li><strong>Dystonia</strong>: Vacuous smile i.e mask-like face with an open mouth</li>\n<li><strong>Parkinsonism: </strong>Bradykinesia, postural instability, rigidity</li>\n<li><strong>Subcortical dementia</strong>: Slow mental processing, memory loss</li>\n<li>Psychiatric symptoms: Loss of emotional control, depression, hyperactivity</li>\n<li>Decreased scholastic performance: Deterioration in handwriting, clumsiness</li>\n<li>Autonomic symptoms: Excessive sweating and salivation, sexual dysfunction</li>\n<li><strong>Wing beating tremors</strong> (seen in advanced disease): High amplitude tremor that is prominent with arms abducted, elbows flexed and palms facing downward.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young man presented to the emergency department one hour after spilling hot oil on his hands while cooking. On examination, multiple blisters are present on his right hand. The injuries are extremely painful when touched with gloves and capillary refilling is normal.  Which layers of skin are involved in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Only epidermis"
      },
      {
        "id": 2,
        "text": "Epidermis and papillary dermis"
      },
      {
        "id": 3,
        "text": "Epidermis and reticular dermis"
      },
      {
        "id": 4,
        "text": "Epidermis, dermis and subcutaneous tissue"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This patient with multiple <strong>blisters</strong>, <strong>tenderness</strong> over the injured skin, and <strong>normal capillary refilling</strong> time has&nbsp;<strong>second-degree superficial burns</strong>. The layers of skin involved here are the<strong> epidermis&nbsp;and papillary dermis</strong> (the upper part of the dermis).</p>\n<p>According to the depth and the extent of tissue damage, burn injuries can be classified as follows:</p>\n<ul>\n<li><strong>First-degree</strong> burns: In this, there is damage to the <strong>epidermis</strong>. These injuries are extremely<strong> painful</strong> but<strong> do not blister.</strong> They have a <strong>normal</strong> <strong>capillary refilling</strong> time.</li>\n<li><strong>Second</strong>-<strong>degree</strong> burns (partial-thickness burns): In this, there is damage to the <strong>epidermis and dermis</strong>. Depending on the extent of the dermal involvement, they can further be divided into superficial or deep.\n<ul>\n<li><strong>Superficial partial-thickness</strong> burns: They involve the <strong>epidermis</strong> and <strong>upper</strong> part of the <strong>dermis</strong> (papillary). These injuries are red, moist, and extremely<strong> painful</strong> and <strong>blisters</strong> are present. The <strong>capillary return</strong> is&nbsp;<strong>visible</strong> when the injured skin is blanched<strong>.</strong></li>\n<li><strong>Deep partial-thickness</strong> burns: They involve the <strong>epidermis</strong> and the <strong>deeper dermis</strong>. These injuries are <strong>less painful </strong>and<strong> some sensation </strong>is preserved. The capillaries <strong>do not blanch</strong> on pressure.</li>\n</ul>\n</li>\n<li><strong>Third-degree</strong> burns:&nbsp; In this degree, there is damage to the <strong>epidermis</strong>, <strong>dermis</strong>, and <strong>subcutaneous</strong> tissue. The injuries have a <strong>hard leathery </strong>feel with the <strong>absence</strong> of <strong>sensation</strong>.</li>\n<li><strong>Fourth-degree</strong> burns: In this degree, there is damage to the underlying <strong>soft tissues</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A pregnant woman in her 30th week of pregnancy undergoes a pulmonary function test. Assuming there is no respiratory abnormality, which of the following would be decreased?",
    "choices": [
      {
        "id": 1,
        "text": "Respiratory rate"
      },
      {
        "id": 2,
        "text": "Vital capacity"
      },
      {
        "id": 3,
        "text": "Functional residual capacity"
      },
      {
        "id": 4,
        "text": "Inspiratory capacity"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Functional residual capacity</strong>&nbsp;decreases in pregnancy.</p>\n<p>The&nbsp;<strong>changes in the respiratory system</strong>&nbsp;during pregnancy are:</p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">\n<p><strong>Increase</strong></p>\n</td>\n<td style=\"text-align: center;\">\n<p><strong>Decrease</strong></p>\n</td>\n<td style=\"text-align: center;\">\n<p><strong>Unaffected</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<ul>\n<li>Tidal volume</li>\n<li>Inspiratory capacity</li>\n<li>Minute O<sub>2</sub> uptake</li>\n<li>Minute ventilation</li>\n</ul>\n</td>\n<td>\n<ul>\n<li>Functional residual capacity</li>\n<li>Expiratory reserve volume</li>\n<li>Residual volume</li>\n<li>Total lung capacity</li>\n</ul>\n</td>\n<td>\n<ul>\n<li>Respiratory rate</li>\n<li>Vital capacity</li>\n<li>Inspiratory reserve volume&nbsp;</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>(Mnemonic: TIMM increases in pregnancy)</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6d19e95a28124de0aa90384c7448d269x1279x973.JPEG"
    ]
  },
  {
    "text": "Radiograph of a child with history of delayed walking showed the following findings. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Scurvy"
      },
      {
        "id": 2,
        "text": "Rickets"
      },
      {
        "id": 3,
        "text": "Achondroplasia"
      },
      {
        "id": 4,
        "text": "Osteogenesis imperfecta"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The radiological features are suggestive of active&nbsp;<strong>rickets</strong>. The X-ray shows characteristic&nbsp;<strong>fraying&nbsp;</strong>and&nbsp;<strong>cupping </strong>of the<strong> metaphysis</strong> with&nbsp;<strong>widening of joint spaces.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a7ed7b8bc7e1484f8825c3fd73c12750.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which one of the following has maximum ionization potential?",
    "choices": [
      {
        "id": 1,
        "text": "Electron"
      },
      {
        "id": 2,
        "text": "Proton"
      },
      {
        "id": 3,
        "text": "Helium ion"
      },
      {
        "id": 4,
        "text": "Gamma-photon"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Helium ion&nbsp;</strong>has the <strong>maximum ionizing potential.</strong> It is similar to alpha particles,&nbsp;with two protons and two neutrons.</p>\n<p>It has the&nbsp;least penetrating ability and penetrates only superficial tissues to an extent of 1 mm.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old man presenting with halitosis and regurgitation, underwent a barium swallow scan as shown below. Weakness located in which of the following muscles predisposes to the suspected condition\u200b?",
    "choices": [
      {
        "id": 1,
        "text": "Superior constrictor"
      },
      {
        "id": 2,
        "text": "Middle constrictor"
      },
      {
        "id": 3,
        "text": "Inferior constrictor"
      },
      {
        "id": 4,
        "text": "Palatopharyngeus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This clinical scenario of a patient with halitosis and regurgitation with the GIF of an X-ray showing the barium swallow filling a sac in the posterior pharyngeal wall is highly suggestive of<strong>&nbsp;Zenker's diverticulum.</strong>&nbsp;It protrudes through the <strong>Killian's dehiscence,</strong> a potential space present in the <strong>inferior constrictor muscle</strong>.</p>\n<p>The inferior constrictor muscle is made up of 2 parts: The upper<strong> thyropharyngeus</strong>&nbsp;and the lower<strong> cricopharyngeus</strong>. The cricopharyngeus muscle is divisible into the superficial oblique component (<strong>pars oblique</strong>) and the deeper transverse component (<strong>pars fundiformis</strong>). These 2 components of the muscle have a potential space between them termed&nbsp;<strong>Killian's dehiscence.&nbsp;</strong>&nbsp;</p>\n<p>As a result of the uncoordinated contraction between the cricopharyngeus and upper oesophagal sphincter, mucosal herniation through the Killian's dehiscence gives rise to&nbsp;<strong>Zenker's diverticulum.&nbsp;</strong>This diverticulum is a common site for food impaction and accumulation (halitosis, regurgitation) and may cause dysphagia in affected patients.&nbsp;</p>\n<p>Note -&nbsp;Another potential site of diverticulum formation is the&nbsp;<strong>Laimer's triangle,&nbsp;</strong>situated below the cricopharyngeus and above the longitudinal fibres of the oesophagus.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/00013fa0bddb435fb8b941132b434da6.GIF"
    ],
    "explanation_images": []
  },
  {
    "text": "During a routine dissection class, your professor asks you to identify the structures seen in the given specimen. Correctly match the following with their respective structures:",
    "choices": [
      {
        "id": 1,
        "text": "1- Putamen; 2- Globus pallidus; 3- Caudate nucleus; 4- Thalamus"
      },
      {
        "id": 2,
        "text": "1- Caudate nucleus; 2- Thalamus; 3- Globus pallidus; 4- Putamen"
      },
      {
        "id": 3,
        "text": "1- Thalamus; 2- Caudate nucleus; 3- Globus pallidus; 4- Putamen"
      },
      {
        "id": 4,
        "text": "1- Caudate nucleus; 2- Putamen; 3- Thalamus; 4- Globus pallidus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows the coronal section of the brain with different parts of the basal ganglia.&nbsp;The correct match is: 1- Caudate nucleus, 2- Thalamus, 3- Globus pallidus, 4- Putamen.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/55f9b9f938364fd18d3386bcc0a75f44.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8f67e2ff2a6c4714bd2e6569240e8a33x1279x1007.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/996b630fb67e4378a0d6e58f6d128fa3x600x525.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cd4b94d17e914b21ba67dd0ce02f8c6dx567x424.JPEG"
    ]
  },
  {
    "text": "A 2-year-old girl was brought to her pediatrician with complaints of repeated hand wringing movements and finger-licking.  On examination, microcephaly and marked regression of language milestones were noticed. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Social anxiety disorder"
      },
      {
        "id": 2,
        "text": "Asperger's syndrome"
      },
      {
        "id": 3,
        "text": "Rett syndrome"
      },
      {
        "id": 4,
        "text": "Heller's syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This <strong>girl</strong> with stereotyped <strong>hand-wringing movements</strong>, <strong>repetitive behaviour,</strong>&nbsp;<strong>regressed language milestones</strong>, and <strong>microcephaly&nbsp;</strong>most likely has<strong>&nbsp;Rett syndrome</strong>.</p>\n<p>It is an <strong>X-linked dominant</strong> disease caused by a mutation of MECP2 gene and hence predominantly seen in <strong>girls</strong>.&nbsp;The&nbsp;onset is after a few months of <strong>apparently normal development</strong>.</p>\n<p>Between the ages of 6 months to 2 years, affected children develop progressive encephalopathy. Patients typically have</p>\n<ul>\n<li><strong>Regression of previously acquired</strong> milestones following a period of normal development. This can include motor and language milestones.</li>\n<li><strong>Stereotypic hand movements</strong> such as hand wringing, biting, or licking the fingers, and&nbsp;<strong>poor muscle coordination</strong>.</li>\n<li><strong>Head circumference</strong> is <strong>normal</strong> at <strong>birth,</strong> but between the age of 6 months to 1 year, growth begins to <strong>decelerate </strong>leading to<strong>&nbsp;microcephaly</strong>. Seizures are an associated feature in a large number of cases.&nbsp;</li>\n</ul>\n<p>Supportive treatment is given.<strong> Physiotherapy</strong> is beneficial for muscular dysfunction. <strong>Anticonvulsants</strong> may be required to control seizures.</p>\n<p>Other options:</p>\n<p>Option A:&nbsp;<strong>Social anxiety disorder&nbsp;</strong>also known as social phobia is a fear of social situations like social gatherings, oral presentations, and meeting new people. They are fearful of embarrassing themselves in such situations.</p>\n<p>Option B:&nbsp;<strong>Asperger's syndrome</strong> is a type of autism spectrum disorder. There is marked <strong>nonverbal communicative gestures</strong> and failure to develop <strong>relationships</strong> with peers. <strong>No significant delay</strong> in<strong> language milestones</strong> or cognitive development is seen. The<strong>&nbsp;intelligence&nbsp;</strong>remains normal.</p>\n<p>Option D:&nbsp;<strong>Heller's syndrome</strong> is a type of autism spectrum disorder. It is also known as <strong>childhood disintegrative disorder</strong>. It is predominantly seen in<strong> boys</strong>. They have marked <strong>regression</strong> in intellectual, social, and language functions <strong>after 2 years</strong> of apparently normal development.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Preoperative fasting recommendation is _________",
    "choices": [
      {
        "id": 1,
        "text": "4 hours for solids in adults"
      },
      {
        "id": 2,
        "text": "2 hours for clear liquids in adults"
      },
      {
        "id": 3,
        "text": "2 hours for breast milk in infants"
      },
      {
        "id": 4,
        "text": "4 hours for solids in infants"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Preoperative fasting recommendation is <strong>2 hours for liquids in adults</strong>.</p>\n<p><strong>Recommended Preoperative Fasting period</strong>:</p>\n<ul>\n<li>For neonates and infants:\n<ul>\n<li>2 hours for clear fluids</li>\n<li>4 hours for breast milk</li>\n<li>6 hours for solids and infant formula</li>\n</ul>\n</li>\n<li>For all above 1 year of age:\n<ul>\n<li>2 hours for clear fluids</li>\n<li>6 hours for a light meal</li>\n<li>8 hours if the meal contains fried, fatty food</li>\n</ul>\n</li>\n</ul>\n<p>Preoperative fasting is intended to reduce the risk of pulmonary aspiration.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A female patient with fever and malar rashes was found to have vegetations on either side of the heart valves. What is the likely type of endocarditis seen in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Infective\u00a0endocarditis"
      },
      {
        "id": 2,
        "text": "Libman Sacks\u00a0endocarditis"
      },
      {
        "id": 3,
        "text": "Non-bacterial\u00a0thrombotic \u00a0endocarditis"
      },
      {
        "id": 4,
        "text": "Rheumatic heart disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The vegetations on both sides of the valves along with the history suggestive of <strong>systemic lupus erythematosus</strong> are consistent with <strong>Libman Sacks Endocarditis.</strong></p>\n<p>Summary of salient features of vegetations in different endocarditis:</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td>&nbsp;</td>\n<td><strong>Rheumatic heart disease</strong></td>\n<td><strong>Infective&nbsp;endocarditis</strong></td>\n<td><strong>Non-bacterial&nbsp;thrombotic or&nbsp;marantic&nbsp;endocarditis</strong></td>\n<td><strong>Libman Sacks&nbsp;endocarditis</strong></td>\n</tr>\n<tr>\n<td><strong>Etiology</strong></td>\n<td>Rheumatic&nbsp;heart&nbsp;disease</td>\n<td>Infective&nbsp;endocarditis</td>\n<td>Malignancy&nbsp;(M3-AML,&nbsp;pancreatic carcinoma),<br />deep vein thrombosis,<br />Trousseau syndrome</td>\n<td>Systemic lupus erythematosus</td>\n</tr>\n<tr>\n<td><strong>Vegetations</strong></td>\n<td>Small, warty, Firm,&nbsp;Friable</td>\n<td>Large,&nbsp;Bulky, friable, destructive</td>\n<td>Small, single, or&nbsp;multiple, non-destructive</td>\n<td>Small to medium-sized, flat,&nbsp;verrucous</td>\n</tr>\n<tr>\n<td><strong>Site</strong></td>\n<td>Along lines&nbsp;of closure</td>\n<td>Cusps of valves,&nbsp;mural&nbsp;endocardium</td>\n<td>Line of closure</td>\n<td>Either or both&nbsp;sides of the valve&nbsp;leaflets.</td>\n</tr>\n<tr>\n<td><strong>Sterile/Infective</strong></td>\n<td>Non-sterile</td>\n<td>Non-sterile</td>\n<td>Sterile</td>\n<td>Sterile</td>\n</tr>\n<tr>\n<td><strong>Embolization</strong></td>\n<td>Uncommon</td>\n<td>Very common</td>\n<td>common</td>\n<td>Uncommon</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Parents of a child with febrile seizures are concerned about the relapse, complications, and treatment of this condition. All of the following are true regarding the risks and management of this case, except:",
    "choices": [
      {
        "id": 1,
        "text": "Antipyretics do not reduce the risk of a recurrent febrile seizure"
      },
      {
        "id": 2,
        "text": "Clobazam or clonazepam help reduce recurrence of febrile seizures"
      },
      {
        "id": 3,
        "text": "Anti-epileptic therapy can decrease the risk of future epilepsy"
      },
      {
        "id": 4,
        "text": "Pre-existing neurodevelopmental abnormality increases the risk of febrile seizures"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>All of the above statements are true, except for <strong>option C:&nbsp;Antiepileptic therapy can decrease the risk of future epilepsy</strong>. The risk of future epilepsy does<strong> not change</strong> with or without <strong>antiepileptic therapy</strong>.</p>\n<p><strong>Febrile seizures</strong> are seizures that:</p>\n<ul>\n<li>Occur between the age of 6 months and 5 years</li>\n<li>Occur at a temperature of<strong> 38&deg;C (100.4&deg;F) </strong>or<strong> higher</strong></li>\n<li>Are not due to any CNS infection or any metabolic imbalance</li>\n<li>Occur without a history of prior afebrile seizures</li>\n<li>Occur with <strong>no post-ictal neurological deficit</strong>.</li>\n</ul>\n<p><strong>Antipyretics do not reduce the risk of recurrent febrile seizures.</strong></p>\n<p><strong>Types of febrile seizures:</strong></p>\n<table style=\"width: 446px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 220px; text-align: center;\"><strong>Simple febrile seizures</strong></td>\n<td style=\"width: 218px; text-align: center;\"><strong>Complex (atypical) febrile seizures</strong></td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Occurs within 24 hours of the onset of fever</td>\n<td style=\"width: 218px; text-align: center;\">Can occur at any time during a fever</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">&nbsp;Generalized seizures</td>\n<td style=\"width: 218px; text-align: center;\">Focal seizures</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Duration is &lt;15 min</td>\n<td style=\"width: 218px; text-align: center;\">Prolonged</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">No recurrence within 24 hrs of seizures</td>\n<td style=\"width: 218px; text-align: center;\">Recurrent</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Chances of going into epilepsy <strong>1%</strong></td>\n<td style=\"width: 218px; text-align: center;\">Chances of going into epilepsy are 6%</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Investigations:</strong></p>\n<div class=\"page\" title=\"Page 561\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>In first episode of febrile seizure, lumbar puncture is indicated in cases of clinically suspected meningitis.</li>\n<li><span style=\"font-size: 14px;\">EEG and neuroimaging are advised for children with atypical febrile seizures.</span></li>\n</ul>\n</div>\n</div>\n</div>\n<p><strong>Treatment:</strong></p>\n<div class=\"page\" title=\"Page 561\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>An acute episode of seizure is terminated by intravenous lorazepam or midazolam.&nbsp;<span style=\"font-size: 14px;\">Antipyretics and proper hydration.</span></p>\n</div>\n</div>\n</div>\n<p><strong>Prophylaxis:</strong></p>\n<ul>\n<li>\n<div class=\"column\">\n<p>In children with risk factors for recurrence or those with frequent recurrences (&ge;3 in 6 months or &ge;4 in one year),give intermittent prophylaxis&nbsp;<span style=\"font-size: 14px;\">for 3 days during the fever episode to reduces recurrences.</span></p>\n</div>\n</li>\n</ul>\n<p>Note:</p>\n<ul>\n<li><strong>Antipyretics</strong> can decrease the discomfort of the child but <strong>do not reduce</strong> the risk of having a recurrent febrile seizure.</li>\n<li><strong>Intermittent oral nitrazepam, clobazam, and clonazepam</strong> <strong>help reduce</strong> but do not eliminate, the risks of recurrence of febrile seizures.</li>\n<li>The risk of&nbsp;<strong>future epilepsy</strong> does not change with or without <strong>antiepileptic therapy. </strong></li>\n<li><strong>Pre-existing neurodevelopmental abnormality</strong> increases the <strong>risk of febrile seizures.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old male patient came with complaints of excessive lacrimation. Ocular examination showed an abnormality similar to what is shown below. Which of the following organism is likely to cause this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Chlamydia trachomatis"
      },
      {
        "id": 2,
        "text": "Herpes simplex type 1"
      },
      {
        "id": 3,
        "text": "Neiserria gonorrhea"
      },
      {
        "id": 4,
        "text": "Staphylococcus aureus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above image shows<strong> Herbert's pits</strong>. This finding is seen in <strong>trachoma</strong> which is caused by <strong><em>Chlamydia trachomatis,</em></strong> more specifically the<strong>&nbsp;TRIC</strong>&nbsp;(trachoma inclusion conjunctivitis) <strong>serovars A</strong>,<strong> B</strong>, <strong>Ba</strong>, <strong>C</strong>.&nbsp;</p>\n<p><strong>Trachoma</strong> is a form of chronic infective conjunctivitis and is one of the<strong> leading causes</strong> of <strong>blindness</strong>. It has an &lsquo;active&rsquo; inflammatory stage and a &lsquo;cicatricial&rsquo; chronic stage.</p>\n<p>The<strong> active inflammatory stage</strong>&nbsp;is<strong> more prevalent</strong> in <strong>children</strong> and presents with nonspecific symptoms of ocular irritation, foreign body sensation, and discharge (often mild symptoms). Examination findings at this stage show:&nbsp;</p>\n<ul>\n<li><strong>Conjunctival follicles </strong>containung&nbsp;<strong>Leber cells </strong>(multinucleated lymphocytes)</li>\n<li>corneal&nbsp;<strong>Herbert's follicles&nbsp;</strong>(similar to conjunctival follicles)</li>\n</ul>\n<p><strong>Cicatricial chronic stage</strong> is seen in <strong>middle age</strong>. And when the chronic infection with sequelae sets in, the patient complains of pain, lacrimation,<strong> photophobia</strong> and later blurring, and finally<strong>&nbsp;loss of vision</strong>. Conjunctiva shows&nbsp;<strong>c</strong><strong>oncretions</strong>&nbsp;(whitish deposits of inspissated mucus in depressions called glands of Henle). Corneal signs include:&nbsp;</p>\n<ul>\n<li><strong>Herbert pits</strong>&nbsp;(pitted scars in the limbal which are remnants of healed of Herbert follicles)</li>\n<li><strong>corneal opacity </strong>is seen in later stages.</li>\n</ul>\n<p>There can be associated <strong>t</strong><strong>richiasis&nbsp;</strong>( when at least one eyelash rubs the eyeball) and entropion.</p>\n<p>At present&nbsp;<strong>WHO grading </strong>with&nbsp;<strong>`FISTO&rsquo;</strong> is in use.</p>\n<p>Trachoma is treated according to the WHO classification using the&nbsp;<strong>SAFE</strong> <strong>strategy</strong>&nbsp;(<strong>S</strong>urgery, <strong>A</strong>ntibiotics,<strong> F</strong>acial hygiene, and <strong>E</strong>nvironmental improvement). <strong>Azithromycin</strong> is the&nbsp;<strong>antibiotic of choice</strong>, and surgery involves the correction of&nbsp;<strong>trichiasis and entropion</strong>. In case of significant corneal scarring, penetrating keratoplasty is done.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8c9a6b541a524e56a98ee56842d40a32.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old female patient presented to OPD with the given presentation. On examination, it seems gelatinous in consistency. She reports fluctuation in size, mild numbness in hand and occasional pain. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Ganglion cyst"
      },
      {
        "id": 2,
        "text": "Lipoma"
      },
      {
        "id": 3,
        "text": "Dermoid cyst"
      },
      {
        "id": 4,
        "text": "Hematoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The history and image are suggestive of a patient with a<strong> ganglion cyst</strong>.\u00a0</p>\n<p>Ganglion cyst\u00a0arises from the<strong> leakage of synovial fluid from a joint or tendon sheath</strong> and thus contains a glary, <strong>viscous fluid</strong>.</p>\n<p>It can appear anywhere in the wrist but the most common area is the dorsal surface of the scapholunate ligament.</p>\n<p>Patients usually present with\u00a0<strong>painless</strong>, <strong>well-defined</strong>, <strong>cystic</strong>, <strong>transillumination-positive,</strong> and <strong>non-tender swelling</strong>. If there is an impingement on a nearby nerve or structure it can cause pain.</p>\n<p>It <strong>disappears spontaneously</strong>, but the <strong>aspiration</strong> of the swelling or <strong>operative removal</strong> can be done for reassurance or when there is pressure on the nerve. Even if treatment is done, the <strong>rates of recurrence are high</strong>.\u00a0\u00a0</p>\n<p>Other Options:</p>\n<p>Option B:<strong> Lipomas</strong> are <strong>benign tumors of adipose tissue</strong>. It can occur anywhere and at any depth. It can be encapsulated or diffuse, superficial or deep. On examination, they are <strong>nontender and non-pulsatile</strong>. Because of the soft consistency, they may appear to be fluctuant but they are not. The <strong>slip sign is positive</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8f36326fd8ec4e02917cb69699ff590a.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f76ff1a90bc44bdeab7504b0c4b84ba7x720x995.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/26fa6fe0483a40bda58bdfb8ab72fefdx720x477.JPEG"
    ]
  },
  {
    "text": "A young female patient from a rural area presented with severe pain in the lower abdomen and pelvic regions, and vaginal bleeding. Her last menstrual period was 2 months back and her urine pregnancy test appeared positive. The physician suspects a ruptured ectopic pregnancy. Blood is most likely to collect in :",
    "choices": [
      {
        "id": 1,
        "text": "Rectouterine pouch"
      },
      {
        "id": 2,
        "text": "Ovarian fossa"
      },
      {
        "id": 3,
        "text": "Posterior fornix"
      },
      {
        "id": 4,
        "text": "Vesicouterine pouch"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The physician can confirm the diagnosis by obtaining the blood from the\u00a0<strong>rectouterine pouch,\u00a0</strong>which is also called as the\u00a0<strong>pouch of Douglas.\u00a0</strong>This procedure is called <strong>culdocentesis.</strong></p>\n<p>The classic triad of symptoms in tubal pregnancy are</p>\n<ul>\n<li>Severe lower abdominal pain</li>\n<li>Amenorrhea- usually for 6-8 weeks before the appearance of the symptoms</li>\n<li>Vaginal bleeding</li>\n</ul>\n<p>If a ruptured ectopic pregnancy is suspected, then blood samples should be sent for hemoglobin estimation and blood grouping. Estimation of \u03b2-HCG can be used to confirm pregnancy. Once it is suspected, transvaginal sonography or laparoscopy can be performed to visualize the ruptured ectopic.</p>\n<p>However, if imaging techniques are not available, then culdocentesis can be performed. An 18 gauge lumbar puncture needle with a syringe is inserted into the <strong>rectouterine pouch</strong> by puncturing the posterior fornix. If non-clotting blood is obtained from the pouch which has a hematocrit of <strong>more than 15%,</strong> it indicates the presence of ruptured ectopic pregnancy.</p>\n<p><strong>Peritoneum of the female pelvis</strong></p>\n<p>In females, the peritoneum covers the anterior and anterolateral surfaces of the rectum, uterus, and urinary bladder. Spaces found in the female pelvis are:</p>\n<p><strong>Pararectal fossae</strong>- Present on either side of the rectum. They are limited laterally by the peritoneum that covers the uterosacral ligaments.\u00a0</p>\n<p><strong>Paravesical fossae</strong>- Present on either side of the bladder. It is limited laterally by the peritoneum which covers the round ligament of the uterus.</p>\n<p><strong>Rectouterine pouch</strong> (pouch of Douglas)- The peritoneum which covers the anterior surface of the rectum is reflected anteriorly to cover the posterior surface of the posterior fornix of the vagina and the uterus, forming a rectouterine pouch.</p>\n<p><strong>Vesicouterine pouch</strong>-\u00a0The peritoneum covering the fundus and body of the uterus, is reflected anteriorly to cover the posterosuperior surface of the bladder forming a vesicouterine pouch.</p>\n<p><strong>Ovarian fossa</strong>-\u00a0is a shallow depression in the peritoneal lining of the lateral pelvic wall between the peritoneal ridges. It is formed by the obliterated umbilical arteries anteriorly, the ureter posteriorly, and the external iliac vessels above. It lies behind the lateral attachment of the broad ligament and contains the ovary in nulliparous females.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f38dd4dca4a440dc8795b8fa2155d6acx1280x1532.JPEG"
    ]
  },
  {
    "text": "A person has been bitten by the following snake. Which of the following options describes the symptoms seen classically in this snake bite?",
    "choices": [
      {
        "id": 1,
        "text": "Anaphylaxis"
      },
      {
        "id": 2,
        "text": "Intravascular Hemolysis"
      },
      {
        "id": 3,
        "text": "Myoglobinuria"
      },
      {
        "id": 4,
        "text": "Neurotoxicity and muscle paralysis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image given above shows&nbsp;<strong>common krait,</strong>&nbsp;which is&nbsp;<strong>neurotoxic</strong>&nbsp;and shows classical symptoms such as&nbsp;<strong>muscle paralysis</strong>.</p>\n<p>The neurotoxicity symptoms that would be seen in the patient include:&nbsp;</p>\n<ul>\n<li>headache</li>\n<li>blurred vision</li>\n<li>perioral paraesthesia</li>\n<li>hyperacusis</li>\n<li>dizziness</li>\n<li>vertigo</li>\n<li>gooseflesh</li>\n<li>vomiting</li>\n<li>hypersalivation</li>\n</ul>\n<p>Neurotoxicity effects are&nbsp;<strong>completely reversible</strong>&nbsp;in response to antivenom or anticholinesterase or they may wear off spontaneously in about a week.</p>\n<p>Other options:</p>\n<p>Option A:&nbsp;<strong>Anaphylaxis</strong>&nbsp;is seen in poisoning due to&nbsp;<strong>stiletto snakes</strong>. Other symptoms include pain, swelling, blisters, and local lymph node enlargements.</p>\n<p>Option B: Systemic bleeding such as&nbsp;<strong>intravascular hemolysis</strong>, ecchymosis, and incoagulable blood is seen in bites due to&nbsp;<strong>back-fanged snakes.</strong></p>\n<p>Option C:&nbsp;<strong>Myoglobinuria</strong>&nbsp;is seen in poisoning due to&nbsp;<strong>sea snakes.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5ab159f647e04bf0adc12c601e1ff381.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The sign given below is seen in which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Marfan\u2019s syndrome"
      },
      {
        "id": 2,
        "text": "Ehlers-Danlos syndrome"
      },
      {
        "id": 3,
        "text": "Osteogenesis imperfecta"
      },
      {
        "id": 4,
        "text": "Pseudoxanthoma elasticum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image has the&nbsp;characteristic<strong> wrist sign</strong> i.e. the distal phalange of the first and fifth fingers of the hand overlaps when wrapped around the opposite wrist. This is seen in <strong>Marfan's syndrome.&nbsp;</strong>This happens as their fingers and hands are long and slender and have a spider-like appearance (<strong>arachnodactyly</strong>).&nbsp;</p>\n<p>Marfan's syndrome is an&nbsp;<strong>inherited connective tissue disorder</strong>&nbsp;that is caused by a mutation in a gene that codes for an&nbsp;<strong>extracellular matrix protein-fibrillin-1</strong>&nbsp;(FBN1).&nbsp;The&nbsp;<strong>FBN1 locus</strong>&nbsp;is on the long arm of&nbsp;<strong>chromosome 15</strong>. It is a&nbsp;<strong>clinical diagnosis</strong>&nbsp;based on skeletal, cardiovascular, and ocular manifestations.&nbsp;</p>\n<p>Skeletal manifestations:&nbsp;</p>\n<ul>\n<li><strong>Overgrowth of long bones</strong>&nbsp;(dolichostenomelia) with an<strong>&nbsp;arm span to height</strong>&nbsp;ratio of&nbsp;<strong>more than 1.05</strong></li>\n<li>Pectus carinatum or pectus excavatum</li>\n<li>Long and slender fingers (<strong>arachnodactyly</strong>), contracture of fingers (<strong>camptodactyly</strong>)</li>\n<li>Malar hypoplasia</li>\n<li>Joint laxity&nbsp;</li>\n</ul>\n<p>Cardiovascular manifestations:</p>\n<ul>\n<li><strong>Thickened</strong>&nbsp;atrioventricular&nbsp;<strong>valves</strong>,&nbsp;<strong>valvular</strong>&nbsp;<strong>prolapse</strong>&nbsp;(mitral regurgitation)&nbsp;</li>\n<li>Aortic valve dysfunction due to&nbsp;<strong>aortic root aneurysm</strong></li>\n<li>Aortic dissection and rupture due to&nbsp;<strong>cystic medial necrosis</strong>&nbsp;of the aorta</li>\n</ul>\n<p>Ocular manifestations:</p>\n<ul>\n<li><strong>ectopia lentis</strong></li>\n<li>myopia</li>\n<li>flat cornea</li>\n<li>retinal detachments</li>\n<li>early cataracts and glaucoma</li>\n</ul>\n<p>Other systemic manifestations:&nbsp;</p>\n<ul>\n<li>thoracic&nbsp;<strong>scoliosis</strong></li>\n<li>spontaneous pneumothorax</li>\n<li>striae atrophicae in the skin</li>\n</ul>\n<p>Image (a) shows&nbsp;<strong>Walker-Murdoch (wrist) sign</strong>&nbsp;- the&nbsp;ability to join the thumb and fifth finger around the wrist. Image (b) shows&nbsp;<strong>Steinberg (thumb) sign&nbsp;</strong>-&nbsp;thumb tip extends from the palm of the hand in a closed fist&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/821dc3d694c9418d9d345dfe2895a58e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/93ed4d495be0468587568c63c2bfd355x512x354.PNG"
    ]
  },
  {
    "text": "While performing an inguinal hernia repair on a 3-year-old boy, the surgeon notices a Meckel\u2019s diverticulum as the content of the hernial sac. What is this hernia called?",
    "choices": [
      {
        "id": 1,
        "text": "Amyand\u2019s hernia"
      },
      {
        "id": 2,
        "text": "Narath's hernia"
      },
      {
        "id": 3,
        "text": "Cloquet's hernia"
      },
      {
        "id": 4,
        "text": "Littre\u2019s hernia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Meckel&rsquo;s diverticulum</strong> found in inguinal or femoral hernial sacs is known as <strong>Littre's hernia. </strong>It<strong>&nbsp;</strong>can cause intestinal obstruction.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/362187e7798048298b3ce3402d79e168x1200x1310.JPEG"
    ]
  },
  {
    "text": "A patient presents with multiple nodulocystic lesions on the face. Which among the following is the drug of choice in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Steroids"
      },
      {
        "id": 2,
        "text": "Isotretinoin"
      },
      {
        "id": 3,
        "text": "Erythromycin"
      },
      {
        "id": 4,
        "text": "Tetracycline"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The likely diagnosis in this patient is <strong>nodular acne</strong> and the drug of choice for this condition is <strong>oral isotretinoin.</strong></p>\n<p><strong>Isotretinoin\u00a0</strong>is an orally administered systemic retinoid that is used in the management of severe acne.</p>\n<p>Commonly seen adverse effects of isotretinoin are <strong>cheilitis</strong> (dry lips), <strong>xerosis</strong> (dry skin), <strong>xerostomia</strong> (dry mouth), <strong>dry nose,</strong> and <strong>increased</strong> <strong>sun</strong> <strong>sensitivity</strong>.\u00a0</p>\n<p>Oral isotretinoin is <strong>contraindicated</strong> in <strong>pregnant</strong> patients and patients who may be pregnant.\u00a0</p>\n<p>Other Options:</p>\n<p><strong>Option A: </strong>Steroids are not indicated in cases of acne as they can exacerbate the condition due to <strong>increased sebum production </strong>and <strong>skin cell turnover disruption</strong>.</p>\n<p><strong>Options B and C:</strong> Nodulocystic acne is a severe form of acne that often requires more aggressive treatment options, such as isotretinoin. While antibiotics may be used in some cases of nodulocystic acne, they are not the first-line treatment option.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/11148a0215a8402bb40ad4d7b2166a59.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true about the given dose-response curve:",
    "choices": [
      {
        "id": 1,
        "text": "Drug B is the most potent"
      },
      {
        "id": 2,
        "text": "Drug B is the most efficacious"
      },
      {
        "id": 3,
        "text": "Drug C is more efficacious than drug D"
      },
      {
        "id": 4,
        "text": "Drug B is more efficacious than drug A"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The more the <strong>curve</strong> is to the<strong> left</strong>, the <strong>more</strong> is its <strong>potency</strong>. Hence <strong>drug B </strong>is the <strong>most potent&nbsp;</strong>on the given dose-response curve (DRC).</p>\n<p><strong>Potency</strong></p>\n<ul>\n<li>It is defined as the <strong>amount of drug</strong> needed to produce a given response.</li>\n<li>The more the curve is on the left side, the more is its potency.</li>\n<li>Hence in the given DRC <strong>drug B</strong> is <strong>most </strong>potent and <strong>drug D</strong> is the<strong> least</strong> potent.</li>\n</ul>\n<p><strong>Efficacy</strong></p>\n<ul>\n<li>It is defined as the <strong>maximum effect</strong> produced by the drug and is determined by the peak of the curve.</li>\n</ul>\n<p>Hence in the given DRC, <strong>drug B has the least efficacy,</strong> and drugs A, C &amp; D are equally efficacious.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8a1d51a037e64ae498722fe1669b3cf6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/29a1326c91ea4e47bb57387a171d1677x1280x938.JPEG"
    ]
  },
  {
    "text": "An exclusively breastfed newborn was brought with vomiting and diarrhea that developed since birth. On examination, the baby is jaundiced, hypotonic, and has hepatomegaly. Urine was positive for Benedict's test, blood glucose was low and erythrocyte galactose-1-phosphate was elevated. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Fructosuria"
      },
      {
        "id": 2,
        "text": "Von Gierke's disease"
      },
      {
        "id": 3,
        "text": "Classical galactosemia"
      },
      {
        "id": 4,
        "text": "Hereditary fructose intolerance"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical scenario of an exclusively breastfed infant with vomiting, diarrhea, jaundice, hypotonia, and hepatomegaly with elevated erythrocyte galactose-1-phosphate is suggestive of <strong>classical galactosemia.</strong></p>\n<p><strong>Classical galactosemia&nbsp;</strong>is an&nbsp;autosomal recessive disorder.<strong>&nbsp;</strong>The enzyme deficient here is&nbsp;<strong>galactose-1-phosphate uridyl transferase (GALT)</strong>.<strong>&nbsp;</strong>Normally, newborns receive up to 40% of their intake as lactose (glucose + galactose). Without GALT, the infant can't metabolize <strong>galactose 1-phosphate </strong>which&nbsp;accumulates and causes injury to the kidney, liver, and brain.</p>\n<p>Clinical features include <strong>vomiting, hypoglycemia,</strong> hepatomegaly, jaundice, congenital cataracts, aminoaciduria, and&nbsp;<strong>failure to thrive</strong>. There is an increased incidence of&nbsp;<em>Escherichia coli</em> neonatal <strong>sepsis</strong>. Long-term <strong>complications</strong> include speech delays, learning impairment, motor dysfunction, and hypergonadotrophic hypogonadism (in females)</p>\n<div class=\"page\" title=\"Page 136\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The presence of galactose in urine (Positive benedict's test), elevated blood galactose, and elevated&nbsp;erythrocyte galactose-1-phosphate help in confirming the diagnosis.</p>\n</div>\n</div>\n</div>\n<p>Treatment is a <strong>galactose-free diet</strong>. Supportive therapy and prevention of complications is important.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/273ae933e27941edbdbe9e4f99d5dbe6x1280x1129.JPEG"
    ]
  },
  {
    "text": "A 30-year-old woman presents with a painless beefy-red ulcer on the labia that bleeds when touched. There is no lymphadenopathy. Microscopic findings are as shown below. What is the causative organism?",
    "choices": [
      {
        "id": 1,
        "text": "Treponema pallidum"
      },
      {
        "id": 2,
        "text": "Hemophilus ducreyi"
      },
      {
        "id": 3,
        "text": "Klebsiella  granulomatis"
      },
      {
        "id": 4,
        "text": "Chlamydia trachomatis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical picture of a<strong> painless</strong>, <strong>beefy red</strong>, <strong>foul-smelling ulcer</strong> with <strong>no lymphadenopathy</strong>, with microscopy showing <strong>Donovan bodies,</strong> points to a diagnosis of&nbsp;<strong>granuloma inguinale</strong>. It is caused by&nbsp;<strong><em>Klebsiella granulomatis</em>&nbsp;</strong>also known as&nbsp;<strong><em>Calymmatobacterium granulomatis</em></strong><strong>.</strong></p>\n<p>The&nbsp;<strong>incubation</strong>&nbsp;period varies from<strong>&nbsp;8-80 days</strong>, the average being<strong>&nbsp;50 days</strong>.</p>\n<p>Four types of lesions have been described in this condition:</p>\n<ul>\n<li><strong>Ulcerogranulomatous -</strong>&nbsp;<strong>most common</strong>&nbsp;type with&nbsp;<strong>painless beefy red</strong>&nbsp;ulcers<strong>.&nbsp;</strong>They are also highly&nbsp;<strong>vascular&nbsp;</strong>and&nbsp;<strong>bleed</strong>&nbsp;on touch.</li>\n<li><strong>Hypertrophic -</strong>&nbsp;usually with a raised irregular edge</li>\n<li><strong>Necrotic -</strong>&nbsp;offensive smelling ulcer that causes tissue destruction</li>\n<li><strong>Sclerotic</strong>&nbsp;or&nbsp;<strong>cicatricial -</strong>&nbsp;with fibrous or scar tissue</li>\n</ul>\n<p>The image below shows a beefy-red ulcer characteristic of donovanosis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c1f05dfe755c421db43dd97848bdf9e5.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4465a723820740639de897db67e3f990x720x537.JPEG"
    ]
  },
  {
    "text": "An intern posted in the labor room is administering birth-dose vaccines to a newborn baby. According to the National Immunization Schedule, which of the following vaccine would he not administer?",
    "choices": [
      {
        "id": 1,
        "text": "BCG"
      },
      {
        "id": 2,
        "text": "OPV"
      },
      {
        "id": 3,
        "text": "Hepatitis B vaccine"
      },
      {
        "id": 4,
        "text": "Pentavalent vaccine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The pentavalent vaccine is not given at birth.&nbsp;The vaccines given at birth are <strong>BCG</strong>, <strong>OPV (0 dose) and hepatitis B&nbsp;</strong>vaccines.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are a physiologist, studying the microstructure of a skeletal muscle. In the image given below, all of the following can be found in the area marked 'x' except ______.",
    "choices": [
      {
        "id": 1,
        "text": "Actin"
      },
      {
        "id": 2,
        "text": "Myosin"
      },
      {
        "id": 3,
        "text": "Troponin"
      },
      {
        "id": 4,
        "text": "Tropomyosin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The marked region 'x' is depicting the <strong>I-band</strong>&nbsp;of the myofibril.&nbsp;It does not contain myosin.</p>\n<p><span data-preserver-spaces=\"true\">The portion of myofibril that lies between two&nbsp;<strong>Z lines</strong>&nbsp;is known as the&nbsp;<strong>sarcomere.&nbsp;</strong>One sarcomere comprises&nbsp;<strong>1 entire A band</strong>&nbsp;and&nbsp;<strong>2 half-I bands.&nbsp;</strong></span></p>\n<p><span data-preserver-spaces=\"true\"><strong>A band</strong> consists of <strong>Myosin</strong>&nbsp;(thick filaments) surrounded by Actin filaments. I-band comprises&nbsp;<strong>thin filaments</strong>&nbsp;that contain&nbsp;<strong>actin, troponin,</strong> and <strong>tropomyosin.&nbsp;</strong><strong>H zone</strong>&nbsp;is the middlemost part of the<strong> A band</strong> which comprises only myosin heads.&nbsp;During skeletal muscle contraction,&nbsp;<strong>A band</strong>&nbsp;remains constant.&nbsp;<strong>Z lines</strong>&nbsp;come closer to each other.&nbsp;<strong>H and I bands</strong>&nbsp;reduce in their lengths.&nbsp;</span></p>\n<p><strong>Tropomyosin&nbsp;</strong>molecules are long filaments located in the groove between the two chains in the actin. Each thin filament contains 300&ndash;400 actin molecules and 40&ndash;60 tropomyosin molecules.</p>\n<p><strong>Troponin</strong>&nbsp;molecules are small globular units located at intervals along with the tropomyosin molecules. Each of the three troponin subunits has a unique function:</p>\n<ul>\n<li>Troponin&nbsp;<strong>T</strong>&nbsp;binds the troponin components to tropomyosin.</li>\n<li>Troponin&nbsp;<strong>I</strong>&nbsp;inhibits the <strong>i</strong>nteraction of myosin with actin.</li>\n<li>Troponin&nbsp;<strong>C</strong>&nbsp;contains the binding sites for the&nbsp;<strong>Ca&nbsp;</strong><strong><sup>2+</sup></strong>&nbsp;that help to initiate contraction.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3e00cb0bad1549dbbb6c39d6181d356e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/81984b509dcd497685b5e4c7bbf63aa5x1280x2342.JPEG"
    ]
  },
  {
    "text": "What type of data does the image given below represent?",
    "choices": [
      {
        "id": 1,
        "text": "Nominal"
      },
      {
        "id": 2,
        "text": "Discrete"
      },
      {
        "id": 3,
        "text": "Continuous"
      },
      {
        "id": 4,
        "text": "Ordinal"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image is of a <strong>histogram.&nbsp;</strong>It<strong>&nbsp;</strong>is used to represent frequency distributions of <strong>continuous quantitative </strong>data.</p>\n<p><strong>Nominal</strong> and <strong>ordinal</strong> data can be represented by a <strong>bar chart</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9e748530ff3840979f51c5048243c3e9.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A child presents with lesions as shown in the image below. He also complained of decreased vision at night. Which of the following dose of vitamin A prophylaxis given to children under the vitamin A distribution scheme in India could have prevented this condition?",
    "choices": [
      {
        "id": 1,
        "text": "2,00,000 IU  given yearly between the ages 1-6 years"
      },
      {
        "id": 2,
        "text": "1,00,000 IU  given yearly between the ages 1-6 years"
      },
      {
        "id": 3,
        "text": "1,00,000 IU  given 6-monthly between the ages 1-6 years"
      },
      {
        "id": 4,
        "text": "2,00,000 IU given 6-monthly between the ages 1-6 years"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image above showing&nbsp;<strong>phrynoderma&nbsp;</strong>along with the history of decreased vision at the night suggests a likely diagnosis of&nbsp;<strong>vitamin A deficiency</strong>. Under the <strong>vitamin-A distribution scheme </strong>in <strong>India</strong>, <strong>200,000 IU </strong>of vitamin A are given orally at<strong> 6-monthly intervals </strong>between the ages<strong>&nbsp;of 1 to 6 years</strong>.</p>\n<div class=\"page\" title=\"Page 1656\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 1656\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Vitamin A deficiency</strong> is a major preventable cause of blindness in children<strong>. </strong>It&nbsp;can lead to mucocutaneous disease and result in various ocular complications, including blindness. The <strong>earliest sign</strong> of vitamin A deficiency is defective <strong>dark adaptation</strong> and <strong>night blindness (nyctalopia)</strong>. Xerosis and scaling are commonly present in cutaneous findings.<strong> Phrynoderma</strong>, which is characterized by the presence of <strong>keratotic follicular papules</strong> over anterolateral thighs and <strong>posterolateral upper arms</strong> is also seen.</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 1657\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Treatment</strong> is done by administering <strong>50,000&ndash;2,00,000 IU of daily vitamin A supplementation</strong> until clinical signs and symptoms resolve and serum retinol levels normalize.&nbsp;</p>\n<p>The image below shows a Bitot's spot(due to Vitamin A deficiency) seen as a foamy appearance on the surface of the conjunctiva.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5f13278df72a4d4b8a5a5fa737545d91.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e6afff1d0a2943f2b9be1fda9a8f900fx720x449.PNG"
    ]
  },
  {
    "text": "A 45-year-old chronic alcoholic, with a history of binge drinking and multiple episodes of vomiting, presents with hematemesis and abdominal pain. On endoscopy, a longitudinal mucosal tear is found in the gastroesophageal junction. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Boerhaave syndrome"
      },
      {
        "id": 2,
        "text": "Mallory-Weiss tear"
      },
      {
        "id": 3,
        "text": "Gastric antral vascular ectasia"
      },
      {
        "id": 4,
        "text": "Dieulafoy lesion"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of a&nbsp;<strong>Mallory</strong>-<strong>Weiss tear.</strong>&nbsp;</p>\n<p>Mallory-Weiss tear is a <strong>longitudinal tear in the mucosa or submucosa</strong> of the gastroesophageal junction.</p>\n<p>It is most commonly seen in alcoholics, following forceful vomiting, retching, coughing, or staining. The <strong>left gastric artery</strong> is the most common vessel to bleed. The investigation of choice is <strong>endoscopy</strong>.</p>\n<p>Management of Mallory Weiss tear</p>\n<ol>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Conservative, as it is usually self-limiting.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Endoscopic electrocoagulation or sclerosant therapy.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Angiographic embolization - if endoscopy fails.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">High gastrotomy - if all these maneuvers fail.</li>\n</ol>\n<p>Option A:<strong> Boerhaave syndrome</strong> is characterized by spontaneous perforation of the esophagus. Here <strong>all layers are involved</strong>. Clinical features include <strong>Mackler's</strong> <strong>triad</strong></p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Retching</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Chest pain</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Subcutaneous emphysema</li>\n</ul>\n<p>Option C:<strong> Gastric Antral Vascular Ectasia</strong> (GAVE) is characterized by dilated venules in the submucosa of the antrum.</p>\n<p>On endoscopy: <strong>Watermelon</strong> <strong>stomach</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/378902f95afd48589fcb29c274507abdx720x783.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3a86a746b09341888df90ed23c43f0e5x512x385.PNG"
    ]
  },
  {
    "text": "What is the earliest sign seen on cystoscopy in a patient suspected to have bladder tuberculosis?",
    "choices": [
      {
        "id": 1,
        "text": "Tubercles at the ureteric orifice"
      },
      {
        "id": 2,
        "text": "Pallor around the ureteric orifices"
      },
      {
        "id": 3,
        "text": "Focal areas of hyperaemia"
      },
      {
        "id": 4,
        "text": "Hunner's patches"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>earliest sign</strong> of tuberculosis of the bladder observed by cystoscopy is the <strong>pallor of the mucosa</strong> around the <strong>ureteric orifice</strong> due to submucous edema. Subsequently, <strong>tubercles</strong> may be seen.</p>\n<p>In long-standing cases, there is marked <strong>fibrosis</strong> and the <strong>capacity</strong> of the bladder is greatly <strong>reduced (thimble bladder).</strong> This is managed by <strong>augmentation cystoplasty.</strong></p>\n<p>The following X-ray KUB shows a thimble bladder:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e5c4b134b71c4d4babbf287b78afcc1ex720x503.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4d451ff848c741d1bbb2a2acafee885bx1280x1663.JPEG"
    ]
  }
];
        let quizName = 'Fmge Mini Test - 037';
        const quizFilename = 'fmge-mini-test-037-48b3cb2b.html';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2022"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>