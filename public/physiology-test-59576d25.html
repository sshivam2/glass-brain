<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physiology Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Test Series Subject / 2023
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following statements is true about the skeletal muscle contraction?",
    "choices": [
      {
        "id": 1,
        "text": "Ca2+\u00a0is released from mitochondria"
      },
      {
        "id": 2,
        "text": "Ca2+\u00a0is released from the sarcoplasmic reticulum"
      },
      {
        "id": 3,
        "text": "Extracellular Ca2+ is not important for contraction"
      },
      {
        "id": 4,
        "text": "Voltage-gated Ca2+\u00a0channels on sarcolemma have no role in excitation-contraction coupling"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>During the contraction of the skeletal muscle, the&nbsp;Ca<sup>2+</sup> is released from the sarcoplasmic reticulum. Option B is correct.</p>\n<p><strong>Excitation-contraction coupling</strong> refers to the process by which the membrane depolarization of the muscle fiber <strong>(excitation)</strong> leads to the <strong>contraction</strong> of the muscle.</p>\n<p>The steps of excitation-contraction coupling in skeletal muscle are as follows:</p>\n<ul>\n<li><strong>Motor-neuron discharge</strong> causes the release of <strong>acetylcholine</strong> at the motor endplate, which binds to the nicotinic acetylcholine receptors.</li>\n<li>This causes increased Na+ and K+ conductance in the endplate membrane, leading to the generation of<strong> end-plate potential,</strong> which is a local potential.</li>\n<li>When the local endplate potential reaches a threshold for the muscle fiber, an <strong>action potential</strong> is generated.</li>\n<li>The generated action potential passes inward through the<strong> T tubules</strong>, leading to the spread of <strong>depolarisation.</strong></li>\n<li>The depolarization of the muscle fiber causes the <strong>release of Ca<sup>2+</sup></strong> from terminal cisterns of the&nbsp;<strong>sarcoplasmic reticulum</strong> and diffusion to thick and thin filaments.</li>\n<li>The calcium released,&nbsp;<strong>binds&nbsp;to troponin C</strong>, uncovering myosin-binding sites on actin.</li>\n<li>The formation of<strong> cross-linkages between actin and myosin</strong> and sliding of thin on thick filaments causes contraction of the skeletal muscle.</li>\n</ul>\n<p><strong>Steps in relaxation:</strong></p>\n<ul>\n<li>The cytoplasmic calcium is pumped back into the sarcoplasmic reticulum, by the action of <strong>SERCA</strong> (sarcoplasmic endoplasmic reticulum calcium ATPase).</li>\n<li>Once the<strong> calcium concentration is lowered</strong>, the interaction between actin and myosin ceases, and the muscle <strong>relaxes.</strong>&nbsp;</li>\n</ul>\n<div class=\"page\" title=\"Page 116\">\n<div class=\"section\"><strong>Other options:</strong></div>\n<div class=\"section\">&nbsp;</div>\n<div class=\"section\">\n<div class=\"section\"><strong>Option A:</strong> Incorrect -&nbsp;Ca2<sup>+</sup> is not released from mitochondria. It is released from the sarcoplasmic reticulum.</div>\n<strong>Option C:</strong> Incorrect - Extracellular calcium levels play an important role in muscle contraction. When there is a decrease in extracellular calcium as in hypocalcemia, the voltage-gated sodium channels are activated, which causes sodium influx. The increased intracellular sodium concentration causes sustained depolarization, which may lead to <strong>tetany.</strong></div>\n<div class=\"section\"><strong>Option D:&nbsp;</strong>Incorrect -&nbsp;Voltage-gated calcium channels on the sarcoplasmic reticulum are activated by a depolarizing stimulus, which causes the release of calcium from the sarcoplasmic reticulum. The increased calcium concentration will eventually lead to muscle contraction.</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following sodium channels to their sites of reabsorption in the nephron:",
    "choices": [
      {
        "id": 1,
        "text": "1-A, 2-B, 3-D, 4-C"
      },
      {
        "id": 2,
        "text": "1-D, 2-B, 3-C, 4-A"
      },
      {
        "id": 3,
        "text": "1-C, 2-A, 3-D, 4-B"
      },
      {
        "id": 4,
        "text": "1-B, 2-A, 3-C, 4-D"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The correct option is <strong>Option C:</strong>&nbsp;<strong>1-C, 2-A, 3-D, 4-B.&nbsp;</strong></p>\n<p>Reabsorption of sodium in different parts of the nephron are:</p>\n<ul>\n<li>Proximal convoluted tubule (PCT):&nbsp;<br />\n<ul>\n<li>Nearly 60% of the filtered sodium is reabsorbed in the PCT. Solutes mainly absorbed in the proximal tubule are sodium, chloride, bicarbonate, phosphate, lactate, glucose, amino acids etc.&nbsp;</li>\n<li>In <strong>early PCT</strong>, the main sodium channels used for reabsorption are<strong> Na<sup>+</sup>-glucose cotransporter (SGLT)</strong>, Na<sup>+</sup>-H<sup>+</sup> exchanger, Na<sup>+</sup>-amino acid cotransporter, Na<sup>+</sup>-phosphate cotransporter, etc.&nbsp;</li>\n<li>In <strong>distal PCT</strong>,<strong><strong>&nbsp;</strong></strong>due to high<strong><strong>&nbsp;</strong></strong>chloride concentration in the lumen, it favors NaCl reabsorption, driven by Cl<sup>&minus;</sup> gradient.&nbsp;</li>\n<li>The total solute and water reabsorption are proportional to each other. Thus, the entire proximal tubule also reabsorbs nearly 60% of the filtered water (<strong>isosmotic reabsorption</strong>).&nbsp;</li>\n</ul>\n</li>\n<li>Loop of Henle:\n<ul>\n<li>The thin descending limb has no active transport of Na+ outside the lumen but the loop is permeable to water, making the tubular fluid&nbsp;<strong>hypertonic.</strong></li>\n<li>A thick ascending limb&nbsp;reabsorbs nearly 30% of the Na<span style=\"font-size: 11.666666030883789px;\">+</span>&nbsp;by <strong>Na&ndash;2Cl&ndash;K cotransporter</strong>, an example of secondary active transport. This loop is<strong>&nbsp;impermeable to water.&nbsp;</strong>Since some of the solutes are reabsorbed and water is not reabsorbed, it <strong>dilutes&nbsp;</strong>the tubular fluid. Other ions like Ca 2+, and Mg2+ are also absorbed here.&nbsp;</li>\n</ul>\n</li>\n<li>Distal convoluted tubule: Approximately 7% of the filtered load of sodium chloride is reabsorbed in the early distal tubule. This occurs due to the presence of&nbsp;<strong>sodium chloride co-transporter.&nbsp;</strong>Even this segment dilutes the tubular fluid as it is impermeable to water.&nbsp;</li>\n<li>Cortical collecting tubule: The remaining 3% of the filtered Na+ is absorbed via <strong>ENaCs</strong> (epithelial sodium channels) in this duct. &nbsp;This portion is regulated by aldosterone to maintain homeostasis in Na+ balance.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/35783f7c4b7f43e9a9a525c4acfe370ex1280x1670.JPEG"
    ]
  },
  {
    "text": "The following process where transportation is along the concentration gradient is an example of:",
    "choices": [
      {
        "id": 1,
        "text": "Simple diffusion"
      },
      {
        "id": 2,
        "text": "Facilitated diffusion"
      },
      {
        "id": 3,
        "text": "Primary active transport"
      },
      {
        "id": 4,
        "text": "Secondary active transport"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows a glucose transporter that transports glucose <strong>from a higher concentration to a lower concentration.</strong> This is an example of <strong>facilitated diffusion.&nbsp;</strong></p>\n<p>When carrier proteins help in the movement of substances in the direction of their chemical or electrical gradients (downhill movement), no energy input is required and the process is called facilitated diffusion.</p>\n<p>Glucose transporters also referred to as <strong>GLUTs</strong>, are transport proteins in the cell membrane responsible for the transfer of glucose into the cells by facilitated diffusion. <strong>Facilitated diffusion</strong> involves the passage of molecules or ions inside the cell membrane by binding to a carrier/ transport protein.&nbsp;</p>\n<p>For example, insulin stimulates glucose entry into the cells via <strong>facilitated diffusion</strong> by increasing the number of glucose transporters (GLUTs) in the cell membrane.&nbsp;This type of insulin-dependent glucose transport via GLUT 4 is observed in <strong>skeletal muscle, cardiac muscle, </strong>and<strong> adipose tissues.&nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/da63999051b5469b8dfbb4960677baa7.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The structures involved in the auditory pathway are -",
    "choices": [
      {
        "id": 1,
        "text": "1, 2 and 3"
      },
      {
        "id": 2,
        "text": "1, 4 and 5"
      },
      {
        "id": 3,
        "text": "2, 3 and 4"
      },
      {
        "id": 4,
        "text": "3, 4 and 5"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The structures involved in the auditory pathway are&nbsp;<strong>1, 4, and 5,</strong> i.e, the&nbsp;<strong>superior olivary nucleus</strong>,<strong>&nbsp;medial geniculate body</strong>, and&nbsp;<strong>superior temporal gyrus</strong>.</p>\n<p>The correct sequence of structures involved in the auditory pathway from the periphery to the center is -</p>\n<ol>\n<li>Vestibulocochlear nerve</li>\n<li>Cochlear nucleus</li>\n<li><strong>Superior olivary nucleus</strong></li>\n<li><strong>Lateral lemniscus</strong></li>\n<li><strong>Inferior colliculus</strong></li>\n<li><strong>Medial geniculate body</strong></li>\n<li>Auditory cortex - <strong>superior temporal gyrus</strong></li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/21d34630f07c4f3a9d8753de74fa1220x1280x1441.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1f2cecf16b1040809c4dd31c05e16773x600x1002.JPEG"
    ]
  },
  {
    "text": "Which of the following proteins is present in skeletal muscles, but absent in a smooth muscle?",
    "choices": [
      {
        "id": 1,
        "text": "Troponin"
      },
      {
        "id": 2,
        "text": "Tropomyosin"
      },
      {
        "id": 3,
        "text": "Actin"
      },
      {
        "id": 4,
        "text": "Myosin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Actin, myosin, and tropomyosin are present in both skeletal muscle and smooth muscle. But troponin is absent and&nbsp;calmodulin is present in smooth muscle.</p>\n<table width=\"663\">\n<tbody>\n<tr>\n<td width=\"54\">&nbsp;</td>\n<td width=\"190\">\n<p>Skeletal Muscle</p>\n</td>\n<td width=\"210\">\n<p>Smooth Muscle</p>\n</td>\n<td width=\"210\">\n<p>Cardiac Muscle</p>\n</td>\n</tr>\n<tr>\n<td width=\"54\">Location</td>\n<td width=\"190\">\n<p>&nbsp;</p>\n<p>Limbs, body wall, tongue, pharynx, and beginning of the esophagus</p>\n</td>\n<td width=\"210\">\n<p>&nbsp;</p>\n<p>Esophagus (distal part), urogenital tract, urinary bladder, blood vessels, iris of the eye, arrector pili muscle</p>\n</td>\n<td width=\"210\">\n<p>&nbsp;</p>\n<p>Wall of the heart</p>\n</td>\n</tr>\n<tr>\n<td width=\"54\">\n<p>Cell shape</p>\n</td>\n<td width=\"190\">\n<p>Long and cylindrical</p>\n</td>\n<td width=\"210\">\n<p>Spindle-shaped</p>\n</td>\n<td width=\"210\">\n<p>Short and cylindrical</p>\n</td>\n</tr>\n<tr>\n<td width=\"54\">\n<p>Branching</p>\n</td>\n<td width=\"190\">\n<p>Fibers unbranched</p>\n</td>\n<td width=\"210\">\n<p>Fibers unbranched</p>\n</td>\n<td width=\"210\">\n<p>Fibers branched</p>\n</td>\n</tr>\n<tr>\n<td width=\"54\">\n<p>Nucleus</p>\n</td>\n<td width=\"190\">\n<p>Multinucleated</p>\n</td>\n<td width=\"210\">\n<p>Uninucleated</p>\n</td>\n<td width=\"210\">\n<p>Uninucleated</p>\n</td>\n</tr>\n<tr>\n<td width=\"54\">\n<p>Membrane</p>\n</td>\n<td width=\"190\">\n<p>Bounded by sarcolemma</p>\n</td>\n<td width=\"210\">\n<p>Bounded by plasmalemma</p>\n</td>\n<td width=\"210\">\n<p>Bounded by plasmalemma</p>\n</td>\n</tr>\n<tr>\n<td width=\"54\">\n<p>Striations</p>\n</td>\n<td width=\"190\">\n<p>Light and dark bands</p>\n</td>\n<td width=\"210\">\n<p>Absent</p>\n</td>\n<td width=\"210\">\n<p>Faint light and dark bands&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td width=\"54\">\n<p>Intercalated discus</p>\n</td>\n<td width=\"190\">\n<p>No&nbsp;</p>\n</td>\n<td width=\"210\">\n<p>No</p>\n</td>\n<td width=\"210\">Yes</td>\n</tr>\n<tr>\n<td width=\"54\">\n<p>Nerve supply</p>\n</td>\n<td width=\"190\">\n<p>Somatic nervous system</p>\n</td>\n<td width=\"210\">\n<p>Autonomic nervous system</p>\n</td>\n<td width=\"210\">\n<p>Autonomic nervous system</p>\n</td>\n</tr>\n<tr>\n<td width=\"54\">\n<p>Blood supply</p>\n</td>\n<td width=\"190\">\n<p>Abundant</p>\n</td>\n<td width=\"210\">\n<p>Scanty</p>\n</td>\n<td width=\"210\">\n<p>Abundant</p>\n</td>\n</tr>\n<tr>\n<td width=\"54\">\n<p>Source of &uarr; cytosolic Ca<sup>2+</sup></p>\n</td>\n<td width=\"190\">Sarcoplasmic reticulum (SR)&nbsp;</td>\n<td width=\"210\">\n<p>SR and ECF&nbsp;</p>\n</td>\n<td width=\"210\">SR and ECF</td>\n</tr>\n<tr>\n<td width=\"54\">\n<p>Ca<sup>2+</sup>&nbsp;regulation</p>\n</td>\n<td width=\"190\">Troponin&nbsp;</td>\n<td width=\"210\">\n<p>Calmodulin (myosin)</p>\n</td>\n<td width=\"210\">Troponin</td>\n</tr>\n<tr>\n<td width=\"54\">\n<p>Contraction</p>\n</td>\n<td width=\"190\">\n<p>Very rapid</p>\n</td>\n<td width=\"210\">\n<p>Slow</p>\n</td>\n<td width=\"210\">\n<p>Rapid</p>\n</td>\n</tr>\n<tr>\n<td width=\"54\">\n<p>Fatigue</p>\n</td>\n<td width=\"190\">\n<p>Get fatigued soon</p>\n</td>\n<td width=\"210\">\n<p>Do not get fatigued</p>\n</td>\n<td width=\"210\">\n<p>Never get fatigued</p>\n</td>\n</tr>\n<tr>\n<td width=\"54\">\n<p>Control</p>\n</td>\n<td width=\"190\">\n<p>Voluntary</p>\n</td>\n<td width=\"210\">\n<p>Involuntary</p>\n</td>\n<td width=\"210\">\n<p>Involuntary</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In the following pressure-volume loop diagram of left ventricle, the mitral valve will close at the point:",
    "choices": [
      {
        "id": 1,
        "text": "Point 1"
      },
      {
        "id": 2,
        "text": "Point 2"
      },
      {
        "id": 3,
        "text": "Point 3"
      },
      {
        "id": 4,
        "text": "Point 4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The closure of the <strong>mitral valve&nbsp;</strong>corresponds to&nbsp;<strong>point 2</strong>,&nbsp;which marks the beginning of the isovolumetric contraction phase.</p>\n<p>&nbsp;The <strong>pressure-volume curve</strong> represents the changes in volume and pressure in the left ventricle during a single cardiac cycle. The relationship between ventricular pressure (Y-axis) and volume (X-axis) throughout the cardiac cycle is represented by this loop.</p>\n<ul>\n<li>Point 1 - Mitral valve opens</li>\n<li>Point 2 - Mitral valve closes</li>\n<li>Point 3 - Aortic valve opens</li>\n<li>Point 4 - Aortic valve closes</li>\n</ul>\n<p><strong>Phase I: </strong>Period of <strong>filling:&nbsp;</strong>&nbsp;</p>\n<ul>\n<li>In the given diagram, the period of filling lasts from point 1 to point 2.</li>\n<li>At point A, the volume of blood present in the left ventricle is the <strong>end-systolic volume</strong> which corresponds to about 50 ml. It is at this point that the <strong>mitral valve opens</strong> and the venous blood flows into the left ventricle from the left atrium.</li>\n<li>At point B, the end of the period of filling&mdash;the amount of blood present in the left ventricle is called the <strong>end-diastolic volume</strong> which corresponds to about 120 ml. It is at this point that the <strong>mitral valve closes.</strong></li>\n</ul>\n<p><strong>Phase II: </strong>Period of <strong>isovolumic contraction:</strong></p>\n<ul>\n<li>In the given diagram, the period of isovolumetric contraction lasts from point 2 to point 3.</li>\n<li>At point B, the mitral valve closes and the volume of the ventricle does not change as all the valves are closed. However, the pressure inside the ventricle continues to rise.</li>\n<li>At point C the ventricular pressure increases to become equal to the pressure in the aorta (80 mm Hg) and then the aortic valve opens.</li>\n</ul>\n<p><strong>Phase III: </strong>Period of <strong>ejection</strong></p>\n<ul>\n<li>In the given diagram, the period of ejection lasts from point 3 to point 4.</li>\n<li>At point C, the <strong>aortic valve opens</strong> and the volume of the ventricle decreases as the blood flows out of the ventricle into the aorta.</li>\n<li>The systolic pressure continues to rise as the ventricle contracts.</li>\n<li>At point D the aortic valve closes.</li>\n</ul>\n<p><strong>Phase IV: </strong>Period of <strong>isovolumic relaxation</strong></p>\n<ul>\n<li>In the given diagram, the period of relaxation lasts from point 4 to point 1.</li>\n<li>At point D,&nbsp;the <strong>aortic valve closes</strong> and the ventricular pressure falls back to the diastolic pressure level.&nbsp;</li>\n<li>This decrease in&nbsp;intraventricular pressure occurs without any change in volume.</li>\n<li>At point A, the ventricle now has an end-systolic volume of 50 ml of blood similar to the beginning of the cycle.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/170440a589bf467fb46928cf195814a6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9499b8e6649542cb88781f17312c95a4x1280x1596.JPEG"
    ]
  },
  {
    "text": "A normal healthy adult participated in a respiratory study that was conducted to understand the respiratory functions. In the upright position, an increase in all of the following parameters can be seen with respect to the base of the lungs except?",
    "choices": [
      {
        "id": 1,
        "text": "Pulmonary blood flow"
      },
      {
        "id": 2,
        "text": "Ventilation per unit volume"
      },
      {
        "id": 3,
        "text": "Ventilation-perfusion ratio"
      },
      {
        "id": 4,
        "text": "Intrapleural pressure"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: justify;\">In the<strong> upright position</strong>, an increase in the&nbsp;<strong>ventilation-perfusion ratio (V/Q ratio)&nbsp;</strong>is not seen with respect to the <strong>base of the lungs.&nbsp;</strong>At the base of the lung, the&nbsp;<strong>V/Q ratio </strong>is&nbsp;<strong>decreased.&nbsp;</strong></p>\n<p><strong>V/Q ratio</strong>&nbsp;is the ratio of alveolar ventilation (V) to pulmonary blood flow (Q) for the lungs at rest. The average value of the V/Q ratio throughout the lungs is <strong>0.8</strong>.&nbsp;When this ratio is mismatched, it can cause CO<sub>2</sub> retention (when solely, ventilation is impaired) or lowered arterial O<sub>2</sub> (when perfusion is impaired).&nbsp;</p>\n<div class=\"page\" title=\"Page 635\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Normally, in the upright position, the V/Q ratio in the normal lungs markedly undergoes changes from the apex to the base due to the <strong>effect of gravity</strong> as shown below -&nbsp;</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4f683f1e3a9f4fd39596c3cb83767fc2x1280x1248.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c909e391650c49b89993fef346eb1d16x1280x903.JPEG"
    ]
  },
  {
    "text": "An elderly man presents with weakness in his lower limbs. On motor examination, the resident taps on the patellar tendon with a knee hammer and there was a sudden kicking movement of the knee. Which of the following is true about the given reflex?",
    "choices": [
      {
        "id": 1,
        "text": "Glycine is the neurotransmitter"
      },
      {
        "id": 2,
        "text": "Root value of the reflex is L5 - S2"
      },
      {
        "id": 3,
        "text": "It is a monosynaptic stretch reflex"
      },
      {
        "id": 4,
        "text": "Efferent is acted upon\u00a0\u03b3-motor neurons of the hamstring muscles"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>From the given scenario, the resident is performing<strong>&nbsp;</strong>a<strong> knee jerk reflex (patellar reflex)</strong> on this patient.&nbsp;</p>\n<p><strong>Knee jerk </strong>or<strong> patellar reflex&nbsp;</strong>is elicited by&nbsp;tapping the patellar tendon resulting in contraction of the <strong>quadriceps</strong> muscle. It is an&nbsp;example of a <strong>deep tendon reflex&nbsp;</strong>or<strong> myotatic </strong><strong>stretch reflex </strong>as stretching the muscle causes reflex contraction.&nbsp;</p>\n<p>The reflex arc in the knee jerk reflex consists of only one synapse between afferents and efferents. Hence, it is also an example of a&nbsp;<strong>monosynaptic reflex.&nbsp;</strong></p>\n<div class=\"page\" title=\"Page 650\">Reflex arc of knee jerk reflex - &nbsp;</div>\n<p>Tapping the tendon causes a stretch of the muscle spindle which is present within the muscle.&nbsp;The muscle spindle is a sensory proprioceptor responsible for identifying the length of the muscle fibers.&nbsp;The <strong>Ia afferent</strong> sensory fibers in the muscle spindles are activated in response to the stretch. These Ia afferent fibers go to the spinal cord&nbsp;at the <strong>dorsal root</strong>&nbsp;<strong>ganglia</strong> and stimulate the <strong>alpha-motor neurons</strong>. This results in the&nbsp;<strong>contraction </strong>of the muscle that was initially stretched.&nbsp;The neurotransmitter at the central synapse is <strong>glutamate.</strong></p>\n<p>The femoral nerve <strong>L2-L4</strong> mediates the patellar reflex.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a93583a31a13474ab81f53f5420e2fb4x1280x1709.9788285109387.JPEG"
    ]
  },
  {
    "text": "Which of the following has the lowest oxygen concentration in fetal circulation?",
    "choices": [
      {
        "id": 1,
        "text": "Superior vena cava"
      },
      {
        "id": 2,
        "text": "Inferior vena cava"
      },
      {
        "id": 3,
        "text": "Umbilical artery"
      },
      {
        "id": 4,
        "text": "Umbilical vein"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Among the fetal blood vessels mentioned above, the\u00a0<strong>superior vena cava</strong>\u00a0(SVC) has the<strong> lowest oxygen concentration</strong>. It\u00a0carries deoxygenated blood from the upper part of the body to the right atrium.</p>\n<p>The <strong>pO<sub>2</sub> of SVC is about 12-14 mmHg</strong> whereas the pO<sub>2</sub> of the <strong>umbilical artery</strong> is about <strong>20-25 mm Hg.</strong> This is because the SVC carries only <strong>deoxygenated</strong> blood, whereas the umbilical artery carries a <strong>mix of oxygenated blood</strong> from the ascending aorta and <strong>deoxygenated blood</strong> from systemic circulation.</p>\n<p>Fetal circulation:</p>\n<p>The blood gets oxygenated in the placenta and this passes to the <strong>umbilical vein.</strong> From the umbilical vein, <strong>50%</strong> of the blood enters the <strong>hepatic circulation</strong> and <strong>50%</strong> bypasses the liver to enter the <strong>inferior vena cava.</strong>\u00a0Thus, the inferior vena cava, which also carries blood from hepatic veins, kidneys, and from lower extremities, carries a mixture of deoxygenated and oxygenated blood. So, the <strong>highest percentage of oxygen</strong> in fetal circulation is in the <strong>umbilical vein,</strong> followed by the <strong>inferior vena cava.\u00a0</strong></p>\n<p>The blood then enters the heart via the right atrium. The right atrium also receives purely deoxygenated blood from the superior vena cava. This blood then enters the pulmonary artery. Since fetal lungs are collapsed, most of the blood enters the descending aorta via ductus arteriosus and is then distributed to the body.\u00a0</p>\n<p>Finally, some of this blood from the aorta and the lower parts of the body is pumped back to the placenta via <strong>umbilical arteries</strong>. Hence, they contain a mix of both oxygenated and deoxygenated blood.\u00a0</p>\n<p>The rough estimate of oxygenation of the vessels in the fetal circulation is given below:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9c78c26741dd4afcb7ffad87359e928fx1280x2558.JPEG"
    ]
  },
  {
    "text": "The following image shows the sequence of propulsion of a bolus in the gut by means of peristalsis. Which of the following substances is responsible for the configuration of the segment of the gut marked as '2'?",
    "choices": [
      {
        "id": 1,
        "text": "Vasoactive intestinal peptide"
      },
      {
        "id": 2,
        "text": "Acetylcholine"
      },
      {
        "id": 3,
        "text": "Substance P"
      },
      {
        "id": 4,
        "text": "Serotonin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given configuration of the segment marked by<strong> '2'</strong> is&nbsp;due to the&nbsp;<strong>vasoactive intestinal peptide</strong> being responsible for a state of <strong>relaxation&nbsp;</strong>of this part of the gut.&nbsp;</p>\n<p>The above image shows <strong>peristalsis</strong>. It is a reflex response that is initiated when the gut wall is stretched by the contents of the lumen. The given segment of relaxation is an&nbsp;<strong>anterograde segment </strong>that<strong>&nbsp;</strong>moves from an&nbsp;<strong>oral to </strong>a<strong> caudal direction.&nbsp;</strong></p>\n<p>Stretching of the <strong>gut wall</strong> releases serotonin and activates the cholinergic neurons present in the <strong>myenteric plexus.</strong> Cholinergic neurons passing in an anterograde direction produce&nbsp;<strong>NO and VIP </strong>which cause <strong>relaxation</strong> of a segment of the intestine in front of the bolus. Cholinergic neurons passing in a retrograde direction produce&nbsp;<strong>substance P and acetylcholine</strong> which cause <strong>contraction</strong> of a segment of the intestine behind the bolus.</p>\n<p>The following image shows the events as described.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/efbcada6e41944b0aa33134644364c5c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/20bf9560a497479f98f808f74188dbbax1280x1400.JPEG"
    ]
  },
  {
    "text": "Match the following hormones to their respective receptor's target of action.",
    "choices": [
      {
        "id": 1,
        "text": "1-D, 2-C, 3-B, 4-A"
      },
      {
        "id": 2,
        "text": "1-A, 2-B, 3-C, 4-D"
      },
      {
        "id": 3,
        "text": "1-C, 2-A, 3-D, 4-B"
      },
      {
        "id": 4,
        "text": "1-B, 2-D, 3-A, 4-C"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The correct option is\u00a0<strong>Option 3: 1-C, 2-A, 3-D, 4-B</strong></p>\n<table style=\"border-collapse: collapse; width: 45.1583%; height: 89.5936px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 51.7423%; height: 22.3984px;\">1. Thyroid hormones</td>\n<td style=\"width: 48.2577%; height: 22.3984px;\">C. Intracellular receptor</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 51.7423%; height: 22.3984px;\">2. Insulin</td>\n<td style=\"width: 48.2577%; height: 22.3984px;\">A. Receptor tyrosine kinase\u00a0</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 51.7423%; height: 22.3984px;\">3. Atrial natriuretic peptide</td>\n<td style=\"width: 48.2577%; height: 22.3984px;\">D. Guanylyl cyclase</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 51.7423%; height: 22.3984px;\">4. Norepinephrine</td>\n<td style=\"width: 48.2577%; height: 22.3984px;\">B. Adenylyl cyclase</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Thyroid hormones</strong> act on <strong>intracellular receptors</strong> (intracytoplasmic or intranuclear) to induce the transcription of selected mRNAs, thereby promoting protein synthesis. Other hormones with similar action include steroid hormones and retinoic acid.</p>\n<p><strong>Insulin</strong>\u00a0activates the <strong>tyrosine kinase enzyme </strong>on the intracellular (cytoplasmic) portions of transmembrane receptors, thereby phosphorylating the receptor. Other hormones with similar action include EGF, PDGF, M-CSF</p>\n<p><strong>Atrial natriuretic peptide\u00a0</strong>increases intracellular <strong>cGMP</strong> by activating the enzyme <strong>guanylyl cyclase.</strong> A similar mechanism of action is seen with nitric oxide (NO).</p>\n<p><strong>Norepinephrine\u00a0</strong>acts on intracellular <strong>adenylyl cyclase</strong> enzyme via beta-1 (adenylyl cyclase activation to increase cAMP) and alpha-2 (adenylyl cyclase inhibition to decrease cAMP). It activates phospholipase C and increases the production of DAG, IP3, via alpha-1 receptors.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An oxygen hemoglobin dissociation curve of a 30-year-old athlete was recorded. If curve 3 represents the dissociation curve during rest, how would the graph shift if he was exercising?",
    "choices": [
      {
        "id": 1,
        "text": "Curve 1"
      },
      {
        "id": 2,
        "text": "Curve 2"
      },
      {
        "id": 3,
        "text": "Curve 3"
      },
      {
        "id": 4,
        "text": "Curve 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>From the given scenario, during <strong>exercise</strong>, the oxygen hemoglobin curve shifts considerably towards the right and is denoted by the <strong>curve 4.</strong></p>\n<p><strong>Curve 3</strong>\u00a0represents the <strong>normal</strong> oxygen hemoglobin curve during rest.\u00a0</p>\n<p>Conditions that cause a <strong>right shift (curve 3 to curve 4)</strong> in the oxygen hemoglobin curve are: (Conditions with the increased requirement of O2 - metabolically active tissues)</p>\n<ul>\n<li>Hypoxia and Hypercarbia - Metabolically active tissues utilize O2 and tissues produce CO2</li>\n<li>\u2193 pH - Secondary to increased CO2 production</li>\n<li>\u2191 in temperature, heat</li>\n<li>\u2191 in 2,3-DPG - increased anaerobic glycolysis</li>\n</ul>\n<p>Conditions that cause a <strong>left shift (curve 3 to curve 2)</strong>\u00a0 in the oxygen hemoglobin dissociation curve are:</p>\n<ul>\n<li>Decreased carbon dioxide</li>\n<li>\u2191 pH of the blood</li>\n<li>\u2193 in the temperature of the body</li>\n</ul>\n<p><strong>Curve 1</strong>\u00a0represents the Myoglobin-O2 binding curve. It is a rectangular hyperbola (unlike a sigmoid curve of the oxygen-hemoglobin curve). This is because it only has a single oxygen binding site. It is present in muscles in large amounts and can provide oxygen to muscles even at low blood oxygen levels.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b9f63c92f3b948e7995634a0b57b28bf.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fc35180960c142238cea26e0e603e24ax1280x1379.JPEG"
    ]
  },
  {
    "text": "The agglutination test of a 2-day-old baby born to an Rh-negative mother is given below. The baby is at the risk of having hemolytic reactions due to the presence of?",
    "choices": [
      {
        "id": 1,
        "text": "A antigen"
      },
      {
        "id": 2,
        "text": "B antigen"
      },
      {
        "id": 3,
        "text": "H antigen"
      },
      {
        "id": 4,
        "text": "D antigen"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The baby is at the risk of having hemolytic reactions due to the presence of the <strong>D antigen</strong>. The given agglutination test shows <strong>agglutination only with</strong> the <strong>Rh antiserum</strong>. The&nbsp;<strong>Rh antigen</strong> in the given options is the <strong>D antigen</strong>.</p>\n<p>From the given agglutination test, the blood group of the baby is <strong>O-positive,&nbsp;</strong>as there is agglutination with the Rh antiserum, but no agglutination with A or B antisera.&nbsp;</p>\n<p>Rh alloimmunization occurs when an <strong>Rh-negative mother</strong> produces <strong>antibodies</strong> to Rh antigens due to an <strong>Rh-positive fetus.&nbsp;</strong></p>\n<p>In an Rh-positive individual, the presence of<strong>&nbsp;</strong>the D antigen is specific and carries antigenic properties responsible for hemolytic reactions.&nbsp;</p>\n<p>There are six common types of Rh antigens (C, D, E and c, d, e) each of which is called an <strong>Rh factor.</strong> The <strong>type D antigen</strong> is more antigenic than the others. Individuals who have the type D antigen are said to be Rh-positive, whereas those who don't have it are Rh-negative.</p>\n<p><strong>ABO blood typing</strong> is performed by mixing the individual's red blood cells with antisera that contains the various agglutinins on a slide and observing for the presence of clumping or agglutination.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ee6d0ac3b08a479d8b4624bac2c650fc.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/56a9fca19b1f4dbc8d11e98777095dcax1280x917.JPEG"
    ]
  },
  {
    "text": "After a meal, the plasma levels of insulin has peaked in a person. Which of the following glucose transporters would facilitate the uptake of glucose by the skeletal muscles mediated by insulin?",
    "choices": [
      {
        "id": 1,
        "text": "GLUT 2"
      },
      {
        "id": 2,
        "text": "GLUT 4"
      },
      {
        "id": 3,
        "text": "GLUT 3"
      },
      {
        "id": 4,
        "text": "GLUT 5"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The glucose transporter that would facilitate the uptake of glucose by the skeletal muscles mediated by insulin is <strong>GLUT-4.</strong></p>\n<p>Normally, a pool of GLUT-4 molecules is maintained within vesicles in the cytoplasm of the insulin-sensitive cells. When the insulin receptors in them are stimulated, the vesicles move rapidly and fuse themselves to the cell membrane and facilitate the transport of glucose molecules into the cells.</p>\n<p>This GLUT-4 receptor is also present in <strong>cardiac muscle</strong> and <strong>adispose tissues.</strong></p>\n<table>\n<tbody>\n<tr>\n<td width=\"154\">&nbsp;</td>\n<td width=\"154\">\n<p><strong>Function</strong></p>\n</td>\n<td width=\"154\">\n<p><strong>Major sites of expression</strong></p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p><strong>Secondary active transport</strong></p>\n<p><strong>(Na&nbsp;</strong><strong><sup>+</sup></strong>&nbsp;<strong>-glucose cotransport)</strong></p>\n</td>\n<td width=\"154\">&nbsp;</td>\n<td width=\"154\">&nbsp;</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>SGLT 1</p>\n</td>\n<td width=\"154\">\n<p>Absorption of glucose</p>\n</td>\n<td width=\"154\">\n<p>Small intestine, renal tubules</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>SGLT 2</p>\n</td>\n<td width=\"154\">\n<p>Absorption of glucose</p>\n</td>\n<td width=\"154\">\n<p>Renal tubules</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p><strong>Facilitated diffusion</strong></p>\n</td>\n<td width=\"154\">&nbsp;</td>\n<td width=\"154\">&nbsp;</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>GLUT 1</p>\n</td>\n<td width=\"154\">\n<p>Basal glucose uptake</p>\n</td>\n<td width=\"154\">\n<p>Placenta, blood-brain barrier, brain, red cells, kidneys, colon, many other organs</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>GLUT 2</p>\n</td>\n<td width=\"154\">\n<p>&beta;-cell glucose sensor; transport out of intestinal and renal epithelial cells</p>\n</td>\n<td width=\"154\">\n<p>&beta; cells of islets, liver, epithelial cells of small intestine, kidneys</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>GLUT 3</p>\n</td>\n<td width=\"154\">\n<p>Basal glucose uptake</p>\n</td>\n<td width=\"154\">\n<p>Brain, placenta, kidneys, many other organs</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>GLUT 4</p>\n</td>\n<td width=\"154\">\n<p>Insulin-stimulated glucose uptake</p>\n</td>\n<td width=\"154\">\n<p>Skeletal and cardiac muscle, adipose tissue, other tissues</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>GLUT 5</p>\n</td>\n<td width=\"154\">\n<p>Fructose transport</p>\n</td>\n<td width=\"154\">\n<p>Jejunum, sperm</p>\n</td>\n</tr>\n<tr>\n<td width=\"154\">\n<p>GLUT 6</p>\n</td>\n<td width=\"154\">Function not known</td>\n<td width=\"154\">Brain, spleen, leucocytes</td>\n</tr>\n<tr>\n<td width=\"154\">GLUT 7</td>\n<td width=\"154\">Glucose-6-phosphate transporter in the endoplasmic reticulum</td>\n<td width=\"154\">Liver</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The lung function of a patient is tested using a spirometer, and the following recording is noted. The technician looks at the graph and enters the following values in the report.",
    "choices": [
      {
        "id": 1,
        "text": "2, 4, and 6"
      },
      {
        "id": 2,
        "text": "1, 2, and 5"
      },
      {
        "id": 3,
        "text": "3, and 5"
      },
      {
        "id": 4,
        "text": "2, 3, 5, and 6"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The technician has recorded <strong>inspiratory reserve volume</strong>,<strong> inspiratory capacity,</strong> and <strong>vital capacity wrongly.</strong></p>\n<p>In the above graph,&nbsp;</p>\n<p><strong>Tidal volume</strong> (TV) is the amount of air that moves into the lungs with each inspiration or the amount of air that moves out with each expiration during <strong>quiet breathing</strong>. In this patient it is <strong>0.5L</strong>. The normal values are 500-750 mL.</p>\n<p><strong>Inspiratory reserve volume (IRV)</strong> is the air inspired with a maximal inspiratory effort in excess of the tidal volume. In this patient, it is 6-3L = <strong>3L.</strong> The normal values are around 2L.</p>\n<p><strong>Expiratory reserve volume</strong>&nbsp;(ERV) is the volume expelled by an active expiratory effort after passive expiration. In this patient it is 2.5-1.5 = <strong>1L.</strong> The normal value is around 1L.</p>\n<p><strong>Inspiratory capacity (IC)</strong> is the maximum amount of air inspired from the end-expiratory level. It can be calculated as TV+IRV which is 0.5L + 3L= <strong>3.5L.</strong> The normal value is around 2.5L.</p>\n<p><strong>Expiratory capacity (EC)</strong> is the maximum amount of air expired after a normal inspiration. It is calculated as TV+ERV, which is 0.5L + 1L = <strong>1.5 L.</strong> Normal value is around 1.5L</p>\n<p><strong>Vital capacity (VC</strong>) refers to the maximum amount of air expired after full inspiration. It is calculated as TV+IRV+ERV. In this patient it is 0.5+ 3+1 =<strong>4.5L.</strong> The normal value is around 3.5L.</p>\n<p>Other important lung values:</p>\n<div class=\"page\" title=\"Page 1431\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>The forced vital capacity (FVC)</strong>, is the largest amount of air that can be expired after a maximal inspiratory effort.</p>\n<div class=\"page\" title=\"Page 1431\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Forced expiratory volume in the first second, <strong>FEV1,</strong> is the fraction of the vital capacity expired during the first second.&nbsp;</p>\n<p><strong>Respiratory minute volume (RVV)</strong>&nbsp;is a measurement of the amount of air that enters the lungs per minute. It is calculated as respiratory rate X tidal volume.</p>\n<p><strong>Maximal voluntary respiration (MVV),</strong> is the largest volume of gas that can be moved into and out of the lungs in 1 min by voluntary effort.</p>\n<p><strong>Total lung capacity</strong> is the total volume of the lung. It can be calculated by adding tidal volume, inspiratory reserve volume, expiratory reserve volume, and residual volume. Normal total lung capacity is around 5L.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9597eeda2b1b4f05b652ce2b7dbd7fcf.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a648030646e348bfb9e250e86056a8c3x1280x1058.JPEG"
    ]
  },
  {
    "text": "A 28-year-old woman was detected with a positive antibody titer against the thyroid peroxidase enzyme. All of the following steps are catalyzed by this enzyme for the synthesis of thyroid hormones except?",
    "choices": [
      {
        "id": 1,
        "text": "Coupling"
      },
      {
        "id": 2,
        "text": "Oxidation"
      },
      {
        "id": 3,
        "text": "Organification"
      },
      {
        "id": 4,
        "text": "Iodide trapping"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Iodide trapping&nbsp;</strong>(iodide uptake) is <strong>not&nbsp;</strong>catalyzed by <strong>thyroid peroxidase</strong>. Oxidation, organification, and coupling are catalyzed by it. &nbsp;</p>\n<p>Steps in synthesis and secretion of thyroid hormone:&nbsp;</p>\n<ul>\n<li><strong>Iodide uptake</strong>:&nbsp;The basolateral <strong>sodium-iodide symporter</strong> (NIS) actively takes up&nbsp;I<sup>-&nbsp;</sup>(iodide) from the circulation into the follicular cells. The process of concentrating iodide in the cell is known as iodide trapping. Iodide is then transported into the colloid through a <strong>pendrin</strong> (chloride-iodide) transporter.</li>\n<li><strong>Thyroglobulin synthesis</strong>: Thyroglobulin (Tg), is a large glycoprotein rich in <strong>tyrosine residues</strong>. It is synthesized by the thyrocytes and secreted into colloid.</li>\n<li aria-level=\"1\"><strong>Iodination of thyroglobulin</strong>: This is regulated by the&nbsp;<strong>thyroid peroxidase</strong> (TPO) enzyme. TPO has three functions:&nbsp;\n<ul>\n<li aria-level=\"2\"><strong>Oxidation</strong>: TPO oxidizes iodine&nbsp;in the presence of H2O2</li>\n<li aria-level=\"2\"><strong>Organification</strong>: TPO links tyrosine residues of thyroglobulin with iodine (I<sub>2</sub>) to form monoiodotyrosine (MIT), diiodotyrosine (DIT)</li>\n<li aria-level=\"2\"><strong>Coupling reactions</strong>: TPO combines iodinated tyrosine residues to make&nbsp;MIT + DIT = T3 (triiodothyronine),&nbsp;DIT + DIT = T4 (tetraiodothyronine)</li>\n</ul>\n</li>\n<li><strong>Storage</strong>: Thyroid hormones are bound to thyroglobulin and stored in the follicular lumen as colloids. The colloid has hormone reserves for <strong>2-3 months</strong></li>\n<li aria-level=\"1\"><strong>Release</strong>:&nbsp;Iodinated thyroglobulin is cleaved by lysosomal proteolytic enzymes in the colloid from the thyroid cells. This releases thyroxine and triiodothyronine into the peripheral blood.&nbsp;</li>\n<li aria-level=\"1\"><strong>Peripheral T3 conversion</strong>: T4 undergoes deiodination in extrathyroidal tissue to form T3, which is the active form of the hormone.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e457ac295ff24185aded01a37f9e93edx1200x1687.JPEG"
    ]
  },
  {
    "text": "A patient is undergoing an evaluation for shortness of breath. A test to assess the diffusing capacity of the lungs is done. This is measured using one of the following gas components?",
    "choices": [
      {
        "id": 1,
        "text": "Carbon monoxide"
      },
      {
        "id": 2,
        "text": "Nitrous oxide"
      },
      {
        "id": 3,
        "text": "Carbon dioxide"
      },
      {
        "id": 4,
        "text": "Nitric oxide"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>diffusion capacity</strong> of the lungs is measured with <strong>carbon monoxide (CO).</strong></p>\n<p>The diffusing of CO is diffusion-limited and hence the diffusion capacity for CO called&nbsp;<strong>D<sub>LCO</sub></strong>&nbsp;is measured as an index of diffusing capacity of the lung.</p>\n<p>The diffusing capacity of the lung for a given gas is directly proportional to the surface area of the alveolar-capillary membrane and inversely proportional to its thickness.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/d6189195e876496c9bfe7a5b847211a7x992x158.PNG"
    ]
  },
  {
    "text": "Levels of a specific hormone secreted from the adrenocortical region, for 24 hours were plotted in a group of 40 people, and the findings are given below. Excessive synthesis of this hormone can lead to all the given features except?",
    "choices": [
      {
        "id": 1,
        "text": "Hyperglycemia"
      },
      {
        "id": 2,
        "text": "Hypertension"
      },
      {
        "id": 3,
        "text": "Enhanced cellular immunity"
      },
      {
        "id": 4,
        "text": "Increased protein catabolism"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The adrenocortical hormone likely plotted above is <strong>cortisol</strong> as the graph shows a diurnal variation with the maximum peak occurring around 8.00 AM.&nbsp;Excessive synthesis of this hormone <strong>does not cause&nbsp;enhanced cellular immunity.</strong>&nbsp;</p>\n<p>Cortisol <strong>suppresses</strong>&nbsp;<strong>cellular immunity</strong> by <strong>inhibiting the production of IL-2</strong> and <strong>decreasing the proliferation of T-lymphocytes</strong>. This action is used for suppressing immunity by administering exogenous glucocorticoids to reduce the rejection reactions during transplantation. &nbsp;</p>\n<p>Cortisol is secreted in a pulsatile fashion and has a <strong>diurnal variation</strong> in its level. The <strong>maximum level occurs in the morning</strong>&nbsp;just before awakening (at around 8.00 AM). It gradually declines later and the&nbsp;<strong>lowest levels</strong> are seen in the evening and midnight, after falling asleep.&nbsp;</p>\n<p><strong>Cortisol</strong> is the major glucocorticoid hormone synthesized in the adrenal cortex, mainly in the zona fasciculata layer. Its <strong>actions </strong>are -&nbsp;</p>\n<p>i) Metabolic effects:</p>\n<ul>\n<li>On carbohydrates: It stimulates gluconeogenesis, increases glycogen synthesis, and decreases the utilization of glucose in peripheral tissues. Thus, excess stimulation of cortisol causes <strong>hyperglycemia.&nbsp;</strong></li>\n<li>On fat: Increases&nbsp;<strong>lipolysis</strong>.&nbsp;</li>\n<li>On protein: Exerts a catabolic effect and causes <strong>proteolysis</strong></li>\n<li>Effect on appetite: Increases the <strong>appetite</strong> and food intake by inducing the synthesis of <strong>neuropeptide-Y</strong>.</li>\n</ul>\n<p>ii) Anti-inflammatory&nbsp;and immunosuppressive effects:</p>\n<ul>\n<li><strong>Induce</strong> the synthesis of <strong>lipocortin</strong>, an inhibitor of phospholipase A2</li>\n<li><strong>Inhibit</strong> the release of <strong>histamine</strong> and <strong>serotonin</strong>&nbsp;</li>\n<li><strong>Inhibit</strong> the production of <strong>IL-2</strong> and <strong>T lymphocytes</strong>, and depresses&nbsp;<strong>cellular immunity</strong></li>\n</ul>\n<p>iii) Maintenance of vascular responsiveness to catecholamines:</p>\n<ul>\n<li>Cortisol up-regulates <strong>&alpha;1 receptors</strong> on arterioles, increasing their sensitivity to the <strong>vasoconstrictor</strong> effect of norepinephrine, thereby causing <strong>hypertension</strong> in hypercortisolism.&nbsp;</li>\n</ul>\n<p>iv) Bone formation inhibition by decreasing the type 1 collagen synthesis, intestinal calcium absorption, and osteoblastic activity.&nbsp;</p>\n<p>v) In the central nervous system, cortisol receptors are majorly found in the limbic system. Hence, stimulation of this decreases the rapid eye movement during sleep and increases awake time. Thus, high levels of cortisol are seen in the morning just before awakening.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9e642a36f3cc4adca6477817b05d8a5a.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A randomized control study was conducted on a group of 100 people to find out the causes and effects of different hormones that increase the secretion of insulin. All of the following factors increase its secretion except?",
    "choices": [
      {
        "id": 1,
        "text": "Somatostatin"
      },
      {
        "id": 2,
        "text": "Acetylcholine"
      },
      {
        "id": 3,
        "text": "Gastric inhibitory polypeptide"
      },
      {
        "id": 4,
        "text": "Arginine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Somatostatin</strong> <strong>decreases insulin secretion</strong>, whereas all others- acetylcholine, gastric inhibitory polypeptide, and arginine stimulate insulin secretion.&nbsp;</p>\n<p><strong>Somatostatin</strong>, also known as growth hormone-inhibitory hormone,<em>&nbsp;</em>is secreted from delta cells of the islets of Langerhans. It acts locally from these cells to <strong>inhibit insulin </strong>and<strong> glucagon secretion</strong>. It decreases the utilization of the absorbed nutrients by the tissues.<span class=\"Apple-converted-space\">&nbsp;</span>The main role of this hormone is to prevent rapid exhaustion of the food, thereby making it available over a longer period of time.&nbsp;</p>\n<p><strong>Insulin</strong> is secreted by the pancreatic beta cells in response to increased blood glucose concentration.<span class=\"Apple-converted-space\">&nbsp;</span>It promotes liver uptake, storage, and the utilization of glucose from the blood. If blood glucose levels are high, they cause&nbsp;glucose&nbsp;to be rapidly stored in the liver in the form of glycogen. It also promotes the conversion of this excess glucose to fatty acids.&nbsp;When glucose levels fall, insulin secretion is decreased and activation of enzyme phosphorylase split glycogen to release stored glucose into the circulating blood.&nbsp;</p>\n<p>Mechanism of insulin secretion:</p>\n<p><strong>Glucose</strong>&nbsp;enters beta cells of the pancreas via&nbsp;<strong>GLUT-2</strong>&nbsp;receptors. Once inside, it is phosphorylated by&nbsp;<strong>glucokinase</strong>&nbsp;(rate-limiting step) to glucose-6-phosphate which is&nbsp;oxidized to form adenosine triphosphate (<strong>ATP</strong>). This ATP causes the&nbsp;<strong>closure</strong>&nbsp;of ATP-sensitive&nbsp;<strong>potassium</strong>&nbsp;channels and hence&nbsp;<strong>depolarization</strong>. This leads to&nbsp;<strong>opening</strong>&nbsp;voltage-gated&nbsp;<strong>calcium</strong>&nbsp;channels and Ca2+ influx. This stimulates the&nbsp;<strong>fusion</strong>&nbsp;of the insulin-containing vesicles with the cell membrane and the&nbsp;<strong>secretion of insulin</strong>&nbsp;into the extracellular fluid by&nbsp;<strong>exocytosis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8b3b2a05626e43a3b5317c85e2f28c37x1280x1768.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a monoamine neurotransmitter?",
    "choices": [
      {
        "id": 1,
        "text": "GABA"
      },
      {
        "id": 2,
        "text": "Norepinephrine"
      },
      {
        "id": 3,
        "text": "DOPA"
      },
      {
        "id": 4,
        "text": "Serotonin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>GABA</strong> is not a monoamine neurotransmitter. It is an <strong>amino acid.</strong></p>\n<p>Biogenic amines are small, charged molecules that are synthesized from amino acids and contain an amino group (R\u2014NH2). Amines known to act as neurotransmitters are <strong>dopamine, norepinephrine</strong> (noradrenaline), <strong>epinephrine</strong> (adrenaline), <strong>serotonin</strong> (5-hydroxytryptamine [5-HT]).</p>\n<p>Amino acids and their derived amines acting as neurotransmitters:</p>\n<ul>\n<li><strong>Tyrosine </strong>-\u00a0 catecholamines: dopamine, norepinephrine, and epinephrine.</li>\n<li><strong>Tryptophan\u00a0</strong>- serotonin</li>\n<li><strong>Histidine</strong> -<strong>\u00a0</strong>histamine</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with impaired RFTs was given a substance 'x' whose clearance is 20mL/min and the urinary concentration is 100mg/mL. If the urine flow is 2mL/min, calculate the plasma concentration of the substance 'x'.",
    "choices": [
      {
        "id": 1,
        "text": "10mg/mL"
      },
      {
        "id": 2,
        "text": "20mg/mL"
      },
      {
        "id": 3,
        "text": "100mg/mL"
      },
      {
        "id": 4,
        "text": "200mg/mL"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The calculated<strong> plasma concentration</strong> of the substance <strong>'x'</strong>&nbsp;in the above patient is <strong>10mg/mL.</strong></p>\n<p>It is calculated using the formula -</p>\n<p><strong>C = [U]<sub>x </sub></strong>x<strong>&nbsp;V / [P]<sub>x&nbsp;</sub></strong></p>\n<p>Where,</p>\n<ul>\n<li>C is the clearance (mL/min) = 20mL/min</li>\n<li>[U]<sub>x </sub>is the urine concentration of substance x (mg/mL) = 100mg/mL</li>\n<li>V is the urine flow rate (mL/min) = 2mL/min</li>\n<li>[P]<sub>x&nbsp;</sub>is the&nbsp;plasma concentration of substance x (mg/ml)</li>\n</ul>\n<p>The steps of calculation are shown in the image below -&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/791938f7411c42a2a63b2fe54649ad5fx1280x1266.JPEG"
    ]
  },
  {
    "text": "A student was asked to record ECG by using bipolar limb leads. The below image shows the arrangement of the bipolar electrodes and the potentials recorded across lead I and lead II. What is the potential recorded across lead III?",
    "choices": [
      {
        "id": 1,
        "text": "+1.7 mV"
      },
      {
        "id": 2,
        "text": "-1.7 mV"
      },
      {
        "id": 3,
        "text": "+0.7 mV"
      },
      {
        "id": 4,
        "text": "-0.7 mV"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p class=\"p1\"><span class=\"s1\">According to&nbsp;Einthoven&rsquo;s law, the potential recorded across <strong>lead III</strong> is&nbsp;<strong>+0.7 mV&nbsp;</strong></span></p>\n<p class=\"p1\"><span class=\"s1\"><strong>Einthoven&rsquo;s Law</strong>:&nbsp;</span>Einthoven&rsquo;s law states that if the ECGs are recorded simultaneously with the three limb leads, the sum of the potentials recorded in leads I and III will equal the potential in lead II.</p>\n<p class=\"p2\"><strong>Lead I potential + Lead III potential = Lead II potential</strong></p>\n<p class=\"p2\">Lead III = Lead II &ndash; Lead I = (1.2-0.5) = <strong>+0.7 mV</strong></p>\n<p class=\"p2\">Note: Einthoven's triangle is an imaginary triangle drawn around the area of the heart. It is formed by the arrangement of three bipolar limb leads (the two arms and left leg)&nbsp;</p>\n<p class=\"p2\">ECG leads :</p>\n<p>LA &ndash; Left arm: RA &ndash; Right arm: LL &ndash; Left leg: LF &ndash; Left foot</p>\n<ul>\n<li><strong>Limb leads measure the electrical activity in the frontal plane</strong></li>\n<li><strong>Chest leads measure the electrical activity in the horizontal plane<br /><br /></strong></li>\n</ul>\n<table border=\"1\">\n<tbody>\n<tr>\n<td rowspan=\"2\">Limb Lead</td>\n<td colspan=\"2\">Location</td>\n<td rowspan=\"2\">Augmented limb leads</td>\n<td rowspan=\"2\">Location</td>\n<td rowspan=\"2\">Chest leads</td>\n<td rowspan=\"2\">Location</td>\n</tr>\n<tr>\n<td>+</td>\n<td>-</td>\n</tr>\n<tr>\n<td>I</td>\n<td>LA<br /><br /></td>\n<td>&nbsp;RA</td>\n<td>aVF</td>\n<td>LF +ve</td>\n<td>V1</td>\n<td>4th intercostal space. just to the right of the sternum</td>\n</tr>\n<tr>\n<td>II</td>\n<td>LL<br /><br /></td>\n<td>&nbsp;RA</td>\n<td>aVL</td>\n<td>LA +ve</td>\n<td>V2</td>\n<td>4th intercostal space. just to the left of the sternum</td>\n</tr>\n<tr>\n<td>III</td>\n<td>LL<br /><br /></td>\n<td>LA&nbsp;</td>\n<td>aVR</td>\n<td>RA +ve</td>\n<td>V3</td>\n<td>midway between V2 and V4</td>\n</tr>\n<tr>\n<td colspan=\"5\" rowspan=\"3\">&nbsp;</td>\n<td>V4</td>\n<td>Midclavicular line. fifth intercostal</td>\n</tr>\n<tr>\n<td>V5</td>\n<td>Anterior axillary line, same level as V4</td>\n</tr>\n<tr>\n<td>V6</td>\n<td>Midaxillary line, the same level as V4 and V5</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/253558d03d674948bb36dfd556f3592d.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Doppler flowmetry of the brain in a 28-year-old patient showed increased cerebral blood flow. Cerebral blood flow is increased in all of the given situations except:",
    "choices": [
      {
        "id": 1,
        "text": "Increase in pCO2"
      },
      {
        "id": 2,
        "text": "Raised intracranial pressure"
      },
      {
        "id": 3,
        "text": "Hypoxia"
      },
      {
        "id": 4,
        "text": "Lactic acidosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<div class=\"page\" title=\"Page 375\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Cerebral blood flow is&nbsp;increased in all of the above situations except for&nbsp;<strong>raised intracranial pressure.</strong></p>\n<p>As brain tissue and spinal fluid are essentially incompressible, the volume of blood, spinal fluid, and brain in the cranium at any time must be relatively constant <strong>(Monro- Kellie doctrine).</strong>&nbsp;Therefore, if the intracranial pressure increases, cerebral vessels get compressed. Hence, an&nbsp;<strong>increase in intracranial pressure compromises cerebral blood flow.&nbsp;</strong></p>\n<p>Normal cerebral blood flow is around 50-65mL/100g of brain tissue/min.&nbsp;</p>\n<ul>\n<li><strong>Factors that increase cerebral blood flow</strong><br />\n<ul>\n<li>Increased H<sup>+</sup> ion concentration which causes vasodilation of cerebral vessels</li>\n<li><strong>Increased arterial pCO2</strong> that combines with water to form carbonic acid and release H+ ions</li>\n<li>Substances that decrease the pH in the blood like <strong>lactic acid</strong>, pyruvic acid etc&nbsp;</li>\n<li><strong>Hypoxia</strong> immediately increases blood flow as brain is sensitive to even slightly low levels of oxygen drop</li>\n<li>Substances released from astrocytes- NO, K<sup>+</sup>, adenosine, etc&nbsp;</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with chronic kidney disease has a report showing HCO3- = 23 mEq/L, Na+ = 145 mEq/L, Cl- = 100 mEq/L. Calculate the anion gap in this patient.",
    "choices": [
      {
        "id": 1,
        "text": "16 mEq/L"
      },
      {
        "id": 2,
        "text": "20 mEq/L"
      },
      {
        "id": 3,
        "text": "22 mEq/L"
      },
      {
        "id": 4,
        "text": "24 mEq/L"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The anion gap in this patient is <strong>22 mEq/L</strong>.</p>\n<p>Normally, in the serum, the total number of cations is equal to the total number of anions. But, a few of the anions\u00a0(lactate, phosphate, and\u00a0sulfate)\u00a0<strong>cannot be measured</strong>\u00a0and this is called an<strong> anion gap</strong>. It\u00a0is the difference between measured cations and measured anions and is estimated as:</p>\n<p><strong>Plasma anion gap = [Na<sup>+</sup> ] \u2212 [HCO3<sup>\u2212</sup>\u00a0] - [Cl<sup>\u2212</sup>\u00a0]</strong></p>\n<p>Substituting the values = 145\u221223\u2212100= 22 mEq/L</p>\n<p>The normal anion gap ranges between<strong> 8-16 mEq/L.</strong></p>\n<table>\n<tbody>\n<tr>\n<td>Component</td>\n<td>Normal Range</td>\n<td>Optimal Value</td>\n</tr>\n<tr>\n<td>pH</td>\n<td>7.35 - 7.45</td>\n<td>7.4</td>\n</tr>\n<tr>\n<td>HCO<sub>3</sub><sup>-</sup>\u00a0</td>\n<td>22 - 28 mEq/L\u00a0</td>\n<td>\u00a024 mEq/L</td>\n</tr>\n<tr>\n<td>pCO<sub>2</sub></td>\n<td>35 - 45 mmHg</td>\n<td>40 mmHg\u00a0</td>\n</tr>\n<tr>\n<td>Anion gap</td>\n<td>6 - 12 mEq/L</td>\n<td>&lt;10 mEq/L</td>\n</tr>\n<tr>\n<td>O<sub>2</sub>\u00a0saturation</td>\n<td colspan=\"2\">&gt; 95%</td>\n</tr>\n<tr>\n<td>pO<sub>2</sub></td>\n<td colspan=\"2\">75 - 100 mmHg\u00a0\u00a0</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The lung compliance of a 40-year-old patient with shortness of breath has been compared to that of a normal person in the pressure-volume curve below. What is the likely diagnosis based on this chart?",
    "choices": [
      {
        "id": 1,
        "text": "Pulmonary fibrosis"
      },
      {
        "id": 2,
        "text": "Emphysema"
      },
      {
        "id": 3,
        "text": "Alveolar edema"
      },
      {
        "id": 4,
        "text": "Sarcoidosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The interpretation of the above pressure-volume curve shows that the patient has <strong>increased lung compliance,</strong> making the likely diagnosis of&nbsp;<strong>pulmonary emphysema.&nbsp;</strong></p>\n<p><strong>Compliance</strong> is the tendency for tissue to resume its original position after an applied force has been removed.</p>\n<p>After an expiration during quiet breathing, the lungs have a tendency to collapse and the chest wall has a tendency to expand. The interaction between the recoil of the lungs and the recoil of the chest can be measured through a spirometer and a curve of airway pressure plotted against volume is the<strong> pressure-volume curve of the total respiratory system (Ptr). </strong></p>\n<p>Compliance of the lung and chest wall is measured as the slope of the P<sub>TR</sub> curve, or, as a change in lung volume per unit change in airway pressure (&Delta;V/&Delta;P).&nbsp;</p>\n<ul>\n<li class=\"p1\">The curve is shifted <strong>downwards</strong>&nbsp;when compared to normal in case of <strong>decreased compliance</strong>. Eg. pulmonary edema, and interstitial pulmonary fibrosis&nbsp;due to alveoli being prevented from getting inflated. Decreased compliance is also seen in sarcoidosis.</li>\n<li class=\"p1\">The curve is shifted <strong>upwards</strong> and to the left in case of <strong>increased compliance</strong>. Eg. emphysema<strong>,&nbsp;</strong>normal aging lungs&nbsp;due to decreased elastic recoil of lungs (a tendency of the lungs to become less stretched).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ec3f6191ecb54be2880f72842f6f3449.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3c21f632988c4b8dbe977d35a5f2155dx1280x1472.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/653f3202a60e4b2491c2fbdecc99890fx1280x1381.JPEG"
    ]
  },
  {
    "text": "The pupillary light reflex is being assessed in a child with suspected cranial nerve palsy. Which two cranial nerves are being tested here?",
    "choices": [
      {
        "id": 1,
        "text": "2nd and 5th cranial nerves"
      },
      {
        "id": 2,
        "text": "3rd and 5th cranial nerves"
      },
      {
        "id": 3,
        "text": "2nd and 3rd cranial nerves"
      },
      {
        "id": 4,
        "text": "3rd and 7th cranial nerves"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The<strong>&nbsp;2<sup>nd</sup></strong>&nbsp;and <strong>3<sup>rd</sup>&nbsp;</strong>cranial nerves are being tested during the pupillary light reflex.<strong>&nbsp;</strong>The<strong> afferent </strong>of <strong>pupillary light reflex</strong> is&nbsp;the<strong> 2<sup>nd</sup>&nbsp;</strong>cranial nerve and the&nbsp;<strong>efferent </strong>is&nbsp;the&nbsp;<strong>3<sup>rd&nbsp;</sup></strong>cranial nerve.</p>\n<p>When light is shone in one eye, the pupils of both eyes constrict.&nbsp;</p>\n<ul>\n<li>Constriction of the pupil of the same eye is called <strong>direct reflex.</strong></li>\n<li>Constriction of the contralateral pupil is called <strong>consensual reflex/indirect reflex.&nbsp;</strong>&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b7853040afd94e54a38f9c9cafad101cx1250x1259.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b2e91359c0e1469f9f766b68ab475ed4x1280x1883.JPEG"
    ]
  },
  {
    "text": "A young patient was operated on for a brain tumor. Post-op, it is found that there is an injury to the hypothalamus. All of the following anterior pituitary hormones are likely to be decreased in this patient except:",
    "choices": [
      {
        "id": 1,
        "text": "Thyroid stimulating hormone"
      },
      {
        "id": 2,
        "text": "Prolactin"
      },
      {
        "id": 3,
        "text": "Luteinizing hormone"
      },
      {
        "id": 4,
        "text": "Follicle stimulating hormone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Following damage to the hypothalamus, all the hormones secreted by the anterior pituitary will decrease except <strong>prolactin.&nbsp;</strong></p>\n<p>The<strong> hypothalamus</strong> plays an important role in controlling the hormones released from the anterior pituitary. It mainly stimulates the production of all the other anterior pituitary hormones except prolactin. It <strong>inhibits prolactin production</strong>&nbsp;by releasing prolactin inhibitory hormones.&nbsp;</p>\n<p>Therefore, any injury to the hypothalamus or damage to the&nbsp;hypothalamic-hypophysial portal system, the levels of other anterior pituitary hormones are decreased, while the prolactin levels are increased.</p>\n<p>Prolactin&nbsp;is secreted by the <strong>lactotropes</strong> of the <strong>anterior pituitary</strong>. Structurally it is <strong>similar</strong> to&nbsp;<strong>human growth hormone</strong> and human chorionic somatomammotropin (hCS).</p>\n<p>Levels of prolactin are increased during <strong>exercise</strong>,&nbsp;surgical and psychological stresses, <strong>stimulation of the nipple</strong>, <strong>sleep</strong>, pregnancy, thyrotropin-releasing hormone, etc.</p>\n<p>The important function of prolactin is to cause <strong>milk secretion</strong> and <strong>prevent ovulation</strong> in a lactating mother. It increases the production of casein and lactalbumin. Increased prolactin <strong>decreases</strong> the secretion of gonadotropin-releasing hormones, and subsequently decreases the secretion of <strong>gonadotropins</strong>.&nbsp;</p>\n<p>Clinical correlation - <strong>Dopamine</strong> released from the arcuate nucleus of the hypothalamus <strong>decreases</strong> the secretion of prolactin. Therefore, <strong>L dopa</strong> which is a precursor of dopamine&nbsp;<strong>decreases</strong> prolactin secretion, and dopamine antagonists like <strong>chlorpromazine</strong> and antipsychotics<strong> increase</strong> the prolactin secretion.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A person has consumed a meal rich in protein. Which of the following substances would primarily be secreted that would cause an increase in the secretion of acid in the stomach?",
    "choices": [
      {
        "id": 1,
        "text": "Histamine"
      },
      {
        "id": 2,
        "text": "Cholecystokinin"
      },
      {
        "id": 3,
        "text": "Secretin"
      },
      {
        "id": 4,
        "text": "Gastrin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>When a meal rich in<strong> protein</strong> has been consumed, the&nbsp;increase in the secretion of acid in the stomach is likely due to&nbsp;<strong>gastrin</strong>.&nbsp;</p>\n<p>The <strong>peptides</strong>&nbsp;and <strong>amino acids</strong>&nbsp;have a special stimulatory effect on the gastric cells located in the pyloric antrum, causing the secretion of <strong>gastrin</strong>. This further increases the hydrochloric acid secretion.&nbsp;</p>\n<p>Stimuli that increase acid and gastrin secretion:</p>\n<ul>\n<li>Distension of stomach</li>\n<li><strong>Peptides</strong></li>\n<li>Calcium</li>\n<li>Increased vagal discharge</li>\n</ul>\n<p>Stimuli that decrease acid and gastrin secretion:</p>\n<ul>\n<li>Gastric acid</li>\n<li>Secretin family - secretin, glucagon, VIP, GIP</li>\n<li>Somatostatin</li>\n<li>Calcitonin</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young male patient was diagnosed with intracranial hemorrhage. He was started on hypertonic saline. He was in a road traffic accident and CT confirmed the diagnosis. Which of the following images best depicts the changes in the fluid volumes after administration of the given saline?",
    "choices": [
      {
        "id": 1,
        "text": "3"
      },
      {
        "id": 2,
        "text": "4"
      },
      {
        "id": 3,
        "text": "2"
      },
      {
        "id": 4,
        "text": "1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>After the administration of hypertonic saline, the changes in the fluid volume occur as depicted in <strong>image 4.</strong></p>\n<p>The clinical features depict raised intracranial pressure due to intracranial hemorrhage. Patients are started on osmotic diuretics like mannitol or hypertonic saline to <strong>prevent cerebral swelling</strong>. Administration of the osmotic agents increases the osmolarity of the plasma. The cerebral tissues have lower osmolarity compared to the plasma. Therefore, this leads to the flow of excess water from cerebral tissues to the blood via osmosis.</p>\n<p>Whenever hypertonic saline is added to the extracellular fluid (ECF),&nbsp;the extracellular osmolarity increases. It causes osmosis of water out of the cells into the extracellular compartment. Almost all the added sodium chloride remains in the extracellular compartment and fluid diffuses into the extracellular space to achieve osmotic equilibrium. The net effect is that the <strong>volume of ECF increases</strong>, the volumes of<strong> intracellular fluid (ICF) decreases</strong>, and the <strong>osmolarity</strong> of <strong>both</strong> the compartments <strong>increase.&nbsp;</strong></p>\n<p>Whenever <strong>isotonic saline</strong> is added to the extracellular fluid, the osmolarity of fluids does not change. The main effect is that it <strong>increases the ECF</strong> volume</p>\n<p>Whenever <strong>hypotonic saline</strong> is added to ECF, the osmolarity of ECF decreases. This leads to the movement of water from the ECF to the ICF until both attain the same osmolarity.&nbsp;Both the <strong>intracellular and extracellular volumes</strong> are <strong>increased</strong> by the addition of hypotonic fluid, but the intracellular volume increases to a greater extent. Osmolarity decreases in both the compartments.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/23eea01875394ef7a16aa38d65a0dc71.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c8512a47f2b74f4895873c591a8f0aecx1280x1825.2186177715091.JPEG"
    ]
  },
  {
    "text": "Which heart sound occurs immediately after the pressure waveform indicated by the arrow?",
    "choices": [
      {
        "id": 1,
        "text": "S4"
      },
      {
        "id": 2,
        "text": "S3"
      },
      {
        "id": 3,
        "text": "S2"
      },
      {
        "id": 4,
        "text": "S1"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>heart sound</strong> occurring just after the pressure waveform marked by the arrow is\u00a0<strong>S1. </strong>The\u00a0waveform marked in the image is<strong> 'a wave'</strong> and it\u00a0corresponds to <strong>atrial contraction.</strong></p>\n<p><strong>S1 </strong>(first heart sound)\u00a0is heard in the<strong> isovolumetric contraction</strong> phase of the cardiac cycle where ventricles contract against<strong> closed mitral valves</strong>. This occurs <strong>after atrial systole</strong>, corresponding to an <strong>'a' wave</strong> in the jugular venous pressure.\u00a0Thus,<strong> S1</strong> can be heard just <strong>after</strong> the <strong>'a' wave.\u00a0</strong></p>\n<p><strong>Jugular venous pressure</strong> measured in the<strong> internal jugular vein</strong> (IJV) is a reflection of the <strong>right atrial pressure. </strong>IJV is preferred because it is not valved and is in direct line with the superior vena cava and right atrium.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5ba23e132a764ff6aa018d7a684be78f.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4a0084f6c7294620bb3e17085244aa99x1280x1063.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/049c50df2f8c440ca9083c6a693ae11dx1280x1280.JPEG"
    ]
  }
];
        let quizName = 'Physiology Test';
        const quizFilename = 'physiology-test-59576d25.html';
        let hierarchy = ["Marrow", "FMGE Test Series Subject", "2023"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>