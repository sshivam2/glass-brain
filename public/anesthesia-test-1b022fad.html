<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anesthesia Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2020 - 21
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">75</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "What is the concentration of bupivacaine you use while administering spinal anesthesia to a patient?",
    "choices": [
      {
        "id": 1,
        "text": "0.2%"
      },
      {
        "id": 2,
        "text": "0.5%"
      },
      {
        "id": 3,
        "text": "0.75%"
      },
      {
        "id": 4,
        "text": "5%"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>0.5% h</strong><strong>yperbaric</strong>&nbsp;<strong>preservative-free</strong>&nbsp;<strong>bupivacaine</strong> is most commonly used for spinal anesthesia.</p>\n<p>1 ml of 0.5% Bupivacaine = 5 mg of Bupivacaine.</p>\n<p>It is made <strong>hyperbaric</strong> (density heavier than CSF) by adding <strong>8.25% dextrose</strong> to the local anesthetic solution.</p>\n<table style=\"height: 193px; width: 561px;\">\n<tbody>\n<tr>\n<td style=\"width: 529px; text-align: center;\" colspan=\"5\"><strong>Dosages and action of spinal anesthesia drugs</strong></td>\n</tr>\n<tr>\n<td style=\"width: 136px;\"><strong>Drug</strong></td>\n<td style=\"width: 77px;\"><strong>Concentration</strong></td>\n<td style=\"width: 105px;\"><strong>Volume</strong></td>\n<td style=\"width: 105px;\"><strong>Total Dose</strong></td>\n<td style=\"width: 106px;\"><strong>Duration</strong></td>\n</tr>\n<tr>\n<td style=\"width: 136px;\"><strong>Bupivacaine (levobupivacaine, Ropivacaine)</strong></td>\n<td style=\"width: 77px;\">0.5% (rarely 0.75%)</td>\n<td style=\"width: 105px;\">3-4 ml</td>\n<td style=\"width: 105px;\">15-20 mg</td>\n<td style=\"width: 106px;\">90-200 min</td>\n</tr>\n<tr>\n<td style=\"width: 136px;\"><strong>Lidocaine</strong></td>\n<td style=\"width: 77px;\">2% plain, 5% in 7.5% glucose</td>\n<td style=\"width: 105px;\">1-2 ml</td>\n<td style=\"width: 105px;\">30-100 mg</td>\n<td style=\"width: 106px;\">30-90 min</td>\n</tr>\n<tr>\n<td style=\"width: 136px;\"><strong>Tetracaine</strong></td>\n<td style=\"width: 77px;\">1%</td>\n<td style=\"width: 105px;\">1-2 ml</td>\n<td style=\"width: 105px;\">5-20 mg</td>\n<td style=\"width: 106px;\">90-200 min</td>\n</tr>\n</tbody>\n</table>\n<p>Addition of vasoconstrictors&nbsp;(epinephrine and phenylephrine) and opioids improve the quality and the duration of local anesthetic action.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a patient requiring invasive BP monitoring, which is the preferred artery used for canulation and measurement?",
    "choices": [
      {
        "id": 1,
        "text": "Ulnar"
      },
      {
        "id": 2,
        "text": "Radial"
      },
      {
        "id": 3,
        "text": "Brachial"
      },
      {
        "id": 4,
        "text": "Femoral"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Radial artery</strong> is the preferred artery for invasive blood pressure monitoring because of ease of cannulation, presence of collateral blood flow and less associated complications.</p>\n<p>Before cannulating the radial artery, it is essential to perform a modified <strong>Allen&rsquo;s test</strong> in order to determine the adequacy of collateral flow to the hand.</p>\n<p>The other arteries which can be used for invasive blood pressure monitoring are ulnar, brachial, axillary, and femoral arteries and less commonly dorsalis pedis, posterior tibial, and superficial temporal arteries.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following patients would you prefer to use an LMA for securing the airway?",
    "choices": [
      {
        "id": 1,
        "text": "A term G2P1L1 woman previously diagnosed with pre-eclampsia planned for elective Cesarean section"
      },
      {
        "id": 2,
        "text": "A 30-year-old patient to be taken up for repair of hiatus hernia"
      },
      {
        "id": 3,
        "text": "A middle-aged man with a history of diabetes diagnosed with pharyngeal abscess"
      },
      {
        "id": 4,
        "text": "A 40-year-old woman planned for laparoscopic cholecystectomy, having Mallampatti class III airway"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Laryngeal mask airway</strong> (LMA) is <strong>indicated</strong> in cases with <strong>difficult</strong> <strong>airway</strong> where endotracheal intubation is not possible or not available. It can be used as an alternative to an endotracheal tube for ventilating and oxygenating the patient.&nbsp;</p>\n<p>LMA is relatively <strong>contraindicated</strong> in conditions that are associated with increased risk of aspiration (e.g.: <strong>Hiatal</strong> <strong>hernia</strong>, <strong>pregnancy</strong>, inadequate NPO).&nbsp;LMA may protect the larynx from pharyngeal secretions but not from gastric secretions.&nbsp;The presence of a <strong>pharyngeal</strong> <strong>pathology</strong> such as an abscess or tumor, or a pharyngeal obstruction is also a relative contraindication of LMA insertion.</p>\n<p><strong>The normal anatomic position of the LMA.</strong></p>\n<p>The proximal portion of the LMA rests upon the epiglottis, whereas the distal end or, the <strong>tip</strong> extends into the pharynx at the upper end of the <strong>esophagus</strong>. The opening on the laryngeal mask overlies the laryngeal inlet.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/194b9ae9f30941af84bccaeaf3207e28x1280x1428.JPEG"
    ]
  },
  {
    "text": "A 20-year-old patient has been on tablet fluoxetine for depression for the past 3 months and is now scheduled to undergo elective surgery. What would you advise him?",
    "choices": [
      {
        "id": 1,
        "text": "Withhold  Fluoxetine for 3 weeks prior to surgery"
      },
      {
        "id": 2,
        "text": "Withhold fluoxetine  for 3 days prior to surgery"
      },
      {
        "id": 3,
        "text": "Withhold fluoxetine and replace with monoamine oxidase inhibitors"
      },
      {
        "id": 4,
        "text": "Continue fluoxetine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p style=\"text-align: justify;\"><strong>Fluoxetine</strong> is a selective serotonin reuptake inhibitor (<strong>SSRI</strong>), an antidepressant, and is to be <strong>continued </strong>on the day of surgery to avoid exacerbation of symptoms.</p>\n<p style=\"text-align: justify;\">Abrupt withdrawal of short-acting SSRIs should be avoided, as it can cause a <strong>discontinuation syndrome</strong> including dizziness, chills, muscle aches, and anxiety.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 22-year-old man was brought to the casualty with palpitations and dizziness. His heart rate was 160/min and blood pressure was 110/80 mmHg. His ECG is given below. Vagal maneuver was found to be ineffective. What would your next line of management be?",
    "choices": [
      {
        "id": 1,
        "text": "Adenosine 0.6 mg"
      },
      {
        "id": 2,
        "text": "Adenosine 1.2 mg"
      },
      {
        "id": 3,
        "text": "Adenosine 6 mg"
      },
      {
        "id": 4,
        "text": "Adenosine 12 mg"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient has&nbsp;<strong>paroxysmal supraventricular tachycardia.</strong></p>\n<p>As <strong>vagal</strong> <strong>maneuver</strong> has been found <strong>ineffective</strong>, then the next best step is to administer <strong>adenosine 6 mg IV.</strong></p>\n<p>For treating supraventricular tachycardia, the hemodynamic status of the patient has to be assessed. In this patient, as his blood pressure is normal and&nbsp;there is no evidence of hemodynamic deterioration, initial treatment consists of vagal maneuvers (Valsalva maneuver) in awake patients.&nbsp;</p>\n<p>In this scenario, as this was unsuccessful, IV adenosine 6 mg had to be given. If necessary another dose of adenosine 12 mg may be administered after 1-2 minutes.</p>\n<p>If the drug is administered via a central venous catheter, then these doses are reduced to 3 mg and 6 mg, respectively.</p>\n<p>If there is hemodynamic deterioration, then cardioversion is the treatment of choice.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9b6e060eba614177a05becb1ac8b0a58.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which is the shortest acting muscle relaxant?",
    "choices": [
      {
        "id": 1,
        "text": "Vecuronium"
      },
      {
        "id": 2,
        "text": "Pancuronium"
      },
      {
        "id": 3,
        "text": "Suxamethonium"
      },
      {
        "id": 4,
        "text": "Pipecuronium"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Suxamethonium</strong> (succinylcholine) is the shortest-acting muscle relaxant.</p>\n<p>It has a <strong>rapid-onset</strong> (30\u201360secs) and <strong>short duration</strong> of action (typically less than 10 min) due to <strong>rapid hydrolysis</strong> by butyrylcholinesterase (<strong>plasma cholinesterase</strong> or pseudocholinesterase).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Post-anesthetic shivering can be best controlled with the use of ________",
    "choices": [
      {
        "id": 1,
        "text": "Tramadol"
      },
      {
        "id": 2,
        "text": "Pethidine"
      },
      {
        "id": 3,
        "text": "Fentanyl"
      },
      {
        "id": 4,
        "text": "Morphine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Post-anesthetic shivering can be best controlled with the use of&nbsp;<strong>pethidine</strong> (meperidine) at a dose of 12.5 to 35 mg.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Maximum risk of life threatening infections is seen with ______",
    "choices": [
      {
        "id": 1,
        "text": "Thiopentone"
      },
      {
        "id": 2,
        "text": "Propofol"
      },
      {
        "id": 3,
        "text": "Etomidate"
      },
      {
        "id": 4,
        "text": "Ketamine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Propofol</strong> is associated with a maximum risk of life-threatening infections because it decreases polymorphonuclear leukocyte chemotaxis.</p>\n<p>It also affects the phagocytosis and killing of <em>Staphylococcus aureus </em>and <em>Escherichia coli. </em></p>\n<p>Propofol formulations contain egg lecithin and soyabean oil. The egg&nbsp;is a good medium for bacterial growth can support the growth of bacteria which can lead to sepsis.</p>\n<p>Hence Propofol must be used within <strong>6 h</strong> of opening the ampoule.</p>\n<p>Nowadays certain additives like 0.005% <strong>disodium edetate</strong> or 0.025% <strong>sodium metabisulfite</strong> have been added to propofol formulations so as to retard the rate of growth of microorganisms.</p>\n<p><strong>Note</strong>: Immunological reactions are rare with Thiopentone.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following is the most potent inhaled anesthetic?",
    "choices": [
      {
        "id": 1,
        "text": "Halothane"
      },
      {
        "id": 2,
        "text": "Isoflurane"
      },
      {
        "id": 3,
        "text": "Desflurane"
      },
      {
        "id": 4,
        "text": "Sevoflurane"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>most potent</strong> inhaled anesthetic among the given options is <strong>halothane,&nbsp;</strong>with a minimum alveolar concentration (MAC) value of 0.75%.</p>\n<p>The <strong>least potent</strong> inhaled anesthetic is <strong>nitrous oxide</strong> with a MAC value of 104%.</p>\n<p>Note:<strong>&nbsp;</strong>Methoxyflurane has a MAC of 0.16%, making it more potent than halothane. However, it is obsolete now. The&nbsp;most potent agent overall is methoxyflurane and the most potent agent in clinical use&nbsp;is halothane.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient sustained an epidural bleed in a car accident and is brought to the ER. On examination, he has a GCS of 8 and requires immediate intubation. What would be the surest sign of correct placement of the ET tube?",
    "choices": [
      {
        "id": 1,
        "text": "Pulse oximeter"
      },
      {
        "id": 2,
        "text": "Capnography"
      },
      {
        "id": 3,
        "text": "Auscultation of chest and epigastrium"
      },
      {
        "id": 4,
        "text": "Chest radiography"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p style=\"text-align: justify;\"><strong>End-tidal CO<sub>2</sub> </strong>measured by <strong>capnography</strong> is the surest sign of tracheal intubation.</p>\n<p style=\"text-align: justify;\">It also assesses the adequacy of ventilation in the perioperative period. It can rule out oesophagal intubation where initially carbon dioxide may be detected due to swallowed air but later on ceases.</p>\n<p style=\"text-align: justify;\">It cannot reliably rule out endobronchial intubation, which is indicated by a sudden rise in peak inspiratory pressure.</p>\n<p class=\"\" style=\"text-align: justify;\">Option C: Physical examination methods such as auscultation of chest and epigastrium, visualization of thoracic movement, and fogging in the tube are not sufficiently reliable to confirm endotracheal tube placement.</p>\n<p class=\"\" style=\"text-align: justify;\">Options A and D: Similarly, pulse oximetry and chest radiography are not reliable as sole techniques to determine endotracheal intubation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 36-year-old housewife is scheduled for an excision biopsy of a breast lump under general anaesthesia. The procedure is planned on an outpatient basis. Which is the intravenous induction agent of choice for her?",
    "choices": [
      {
        "id": 1,
        "text": "Ketamine"
      },
      {
        "id": 2,
        "text": "Thiopentone"
      },
      {
        "id": 3,
        "text": "Propofol"
      },
      {
        "id": 4,
        "text": "Etomidate"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The intravenous induction agent of choice for <strong>ambulatory</strong><strong>&nbsp;</strong>anesthesia is <strong>propofol.</strong></p>\n<p>Propofol has<strong>&nbsp;</strong>a<strong> rapid onset </strong>of action and a<strong> faster recovery.</strong>&nbsp;This makes it an ideal induction agent for outpatient/ambulatory/day care anesthesia.</p>\n<p>Besides, propofol has <strong>antiemetic </strong>properties which help&nbsp;reduce post-operative nausea and vomiting.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which one of the following is the description of the term allodynia used in the context of pain management?",
    "choices": [
      {
        "id": 1,
        "text": "Perception of ordinarily non-noxious stimulus as severe pain"
      },
      {
        "id": 2,
        "text": "Absence of pain perception"
      },
      {
        "id": 3,
        "text": "pain in area that lacks sensation"
      },
      {
        "id": 4,
        "text": "Unpleasant sensation with or without a stimulus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Perception of ordinarily<strong> non-noxious stimulus </strong>as<strong> severe pain</strong>&nbsp;is<strong>&nbsp;</strong>Allodynia.</p>\n<p>Absence of pain perception: Analgesia</p>\n<p>Pain in an area that lacks sensation:&nbsp;Anaesthesia Dolorosa</p>\n<p>Unpleasant sensation with or without a stimulus: Dysesthesia</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not an absolute contraindication for spinal anaesthesia?",
    "choices": [
      {
        "id": 1,
        "text": "Patient refusal"
      },
      {
        "id": 2,
        "text": "Myelopathy"
      },
      {
        "id": 3,
        "text": "Raised intracranial pressure"
      },
      {
        "id": 4,
        "text": "Local infection"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p style=\"text-align: justify;\">All of the above are absolute contraindications for spinal anaesthesia except <strong>myelopathy</strong>, which is a<strong> relative contraindication.</strong></p>\n<p style=\"text-align: justify;\">In the setting of neurological deficit (myelopathy), careful evaluation of neurologic status must first be undertaken and noted along with documentation of the discussion of the risks and benefits for a medico-legal purpose.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old man with well controlled hypertension has been scheduled for surgery. What is his ASA-PS classification?",
    "choices": [
      {
        "id": 1,
        "text": "ASA-PS Class I"
      },
      {
        "id": 2,
        "text": "ASA-PS Class II"
      },
      {
        "id": 3,
        "text": "ASA-PS Class III"
      },
      {
        "id": 4,
        "text": "ASA-PS Class IV"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p style=\"text-align: justify;\">A well-controlled hypertensive patient falls under the&nbsp;<strong>ASA-PS Class II category.</strong></p>\n<p style=\"text-align: justify;\">ASA-PS Class II<strong> - </strong>A patient with a mild systemic disease such as well-controlled diabetes mellitus or hypertension or a current smoker.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "On a historical day, performing surgeries without the torture of pain was demonstrated successfully for the first time at Massachusetts General Hospital, the home of Harvard Medical School. This is celebrated as the 'World Anesthesia Day' every year on which day?",
    "choices": [
      {
        "id": 1,
        "text": "December 1st"
      },
      {
        "id": 2,
        "text": "April 7th"
      },
      {
        "id": 3,
        "text": "October 16th"
      },
      {
        "id": 4,
        "text": "July 11th"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: justify;\"><strong>October 16th </strong>is&nbsp;celebrated every year as <strong>\"World Anesthesia Day\"&nbsp;</strong>or<strong> \"Ether day\" </strong>to&nbsp;commemorate the first successful demonstration of diethyl ether anesthesia to perform painless surgeries.</p>\n<p style=\"text-align: justify;\">On this day in 1846, <strong>William Thomas Green Morton</strong> gave the first successful public demonstration of ether anaesthesia at Massachusetts General Hospital, Harvard Medical School.</p>\n<p style=\"text-align: justify;\"><strong>The first public demonstration of surgical anesthesia:</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/87c230d6392f4b219aaa8996092fcf10x1280x960.JPEG"
    ]
  },
  {
    "text": "On administration of intravenous thiopentone for induction, a patient loses consciousness in less than thirty seconds. Which of the following is the reason for its rapid onset of action?",
    "choices": [
      {
        "id": 1,
        "text": "Low lipid solubility"
      },
      {
        "id": 2,
        "text": "Rapid redistribution"
      },
      {
        "id": 3,
        "text": "High amount of ionized fraction"
      },
      {
        "id": 4,
        "text": "High amount of unionized fraction"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p style=\"text-align: left;\"><strong>Thiopentone</strong> has a <strong>rapid onset</strong> of action due to the&nbsp;<strong>high</strong><strong>&nbsp;unionized fraction</strong>&nbsp;and&nbsp;<strong>high lipid solubility.</strong></p>\n<p style=\"text-align: left;\">Only the <strong>unionized</strong> form can cross the <strong>blood-brain barrier</strong> and exert its action (within 30 s).</p>\n<p style=\"text-align: left;\">Rapid redistribution is responsible for the termination of action of thiopentone. i.e., it governs the duration of the action, not the onset.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An unconscious 4-year-old child is brought to the ER. On examination, she is gasping but her pulse is not recordable. You start chest compressions and rescue breaths. As the child is not responding you want to start IV epinephrine, but you cannot obtain IV access.  Which of the following sites is preferred for intraosseous access in this situation?",
    "choices": [
      {
        "id": 1,
        "text": "Proximal Tibia"
      },
      {
        "id": 2,
        "text": "Sternum"
      },
      {
        "id": 3,
        "text": "Iliac crest"
      },
      {
        "id": 4,
        "text": "Proximal femur"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The site preferred for intraosseous access among the given options is&nbsp;<strong>proximal tibia. </strong></p>\n<p><strong>Other</strong> sites of choice are <strong>distal femur, distal end of radius, or ulna</strong>.</p>\n<p>Intraosseous access involves placing a catheter into the marrow venous plexus and administering, crystalloids, colloids, drugs, and blood which leads to rapid and reliable absorption into the systemic circulation.&nbsp;</p>\n<p>The fluids are administered under pressure because of the resistance to fluid flow from the IO catheter into the IO space.&nbsp;The disadvantage with this route is the risk of osteomyelitis, compartment syndrome, bone marrow or fat embolism.</p>\n<p>American Heart Association recommends the&nbsp;intraosseous&nbsp;route as an alternative to an intravenous route in order to deliver drugs and fluids, especially in children.&nbsp;This is because intraosseous access can easily be made in 30-60 seconds and thus provide <strong>emergency</strong> <strong>vascular</strong> <strong>access</strong>.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The highest incidence of anaphylactic reactions is seen with",
    "choices": [
      {
        "id": 1,
        "text": "Albumin"
      },
      {
        "id": 2,
        "text": "Gelatin"
      },
      {
        "id": 3,
        "text": "Hydroxyethyl starch"
      },
      {
        "id": 4,
        "text": "Dextran"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>highest incidence</strong> of anaphylactic reactions is seen with <strong>gelatin.</strong></p>\n<p>Gelatin is a semisynthetic colloid obtained by hydrolysis of bovine collagen.</p>\n<p><strong>Hydroxyethyl Starch</strong> (Hetastarch) is non-antigenic and <strong>rarely causes anaphylactoid reactions.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In pregnant women who are administered general anaesthesia, which of the following is the most common cause for mortality?",
    "choices": [
      {
        "id": 1,
        "text": "Hypotension"
      },
      {
        "id": 2,
        "text": "Pulmonary aspiration"
      },
      {
        "id": 3,
        "text": "Arrhythmias"
      },
      {
        "id": 4,
        "text": "Amniotic fluid embolism"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p style=\"text-align: left;\">Pregnant women who undergo <strong>general anaesthesia</strong>\u00a0are at increased risk of mortality from <strong>pulmonary aspiration </strong>of\u00a0gastric\u00a0contents.\u00a0</p>\n<p style=\"text-align: left;\">Other risk factors include\u00a0<strong>failed intubation </strong>of the trachea and <strong>inadequate ventilation</strong>.\u00a0General anaesthesia has a <strong>1.7 times </strong>greater risk of maternal morbidity and mortality than regional anaesthesia. Maternal mortality associated with aspiration is\u00a0<strong>5-15%.</strong></p>\n<p style=\"text-align: left;\"><strong>Mendelson's syndrome\u00a0</strong>is chemical pneumonitis or aspiration pneumonitis caused by aspiration during anaesthesia, especially during pregnancy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the preferred agent used as sedative premedication in pediatric anaesthesia?",
    "choices": [
      {
        "id": 1,
        "text": "Barbiturate"
      },
      {
        "id": 2,
        "text": "Diazepam"
      },
      {
        "id": 3,
        "text": "Midazolam"
      },
      {
        "id": 4,
        "text": "Propofol"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: justify;\">The preferred sedative premedication in children is <strong>midazolam</strong>.</p>\n<p style=\"text-align: justify;\">It is preferred as it has a <strong>shorter elimination half-life</strong> (2 hours) and has the advantage of producing <strong>anterograde amnesia</strong>. It is water-soluble and hence painless on injection. It&nbsp;is usually administered to children <strong>10 to 12 months or older</strong>&nbsp;because of separation anxiety from parents.</p>\n<p style=\"text-align: justify;\">Other sedative premedications that are sometimes used include dexmedetomidine, clonidine, temazepam and ketamine.</p>\n<p style=\"text-align: justify;\">Option A:<strong> Barbiturates </strong>are not commonly used for premedication in children since the availability of short-acting benzodiazepines. A major disadvantage is hyperalgesia, which can induce agitation in children with pain.&nbsp;</p>\n<p style=\"text-align: justify;\">Option B: <strong>Diazepam</strong>&nbsp;has a longer elimination half-life (18 hours) and immature liver function that would prolong its action in young children.</p>\n<p style=\"text-align: justify;\">Option D: <strong>Propofol&nbsp;</strong>is the most useful sedative-hypnotic drug but is not approved for this use in pediatric patients.</p>\n<p style=\"text-align: justify;\">Note<strong>- Ketamine </strong>is effective as a sedative, but it can increase oral secretion and can cause hallucinations during recovery. Hence oral ketamine is usually avoided, and when used, is administered along&nbsp;with antisialogogue (atropine/glycopyrrolate) and a benzodiazepine (such as midazolam).</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young man sustained multiple fractures following an RTA. He is being taken up for damage control surgery. His pulse is 120/min, BP 80/50mmHg, and also has cold extremities. What is the intravenous agent of choice for induction in him?",
    "choices": [
      {
        "id": 1,
        "text": "Propofol"
      },
      {
        "id": 2,
        "text": "Thiopentone"
      },
      {
        "id": 3,
        "text": "Ketamine"
      },
      {
        "id": 4,
        "text": "Etomidate"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical features suggest <strong>circulatory failure.</strong> The IV induction agent of choice in&nbsp;<strong>hypotensive</strong> patients&nbsp;is <strong>ketamine&nbsp;</strong>&gt; etomidate.</p>\n<p>Ketamine helps to <strong>maintain</strong> arterial pressure, heart rate, and <strong>cardiac output</strong> by <strong>central</strong> stimulation of the <strong>sympathetic nervous system</strong> and inhibition of the reuptake of norepinephrine.&nbsp;It also increases peripheral arteriolar resistance and reduces redistribution of hypothermia in hypovolemic patients.</p>\n<p>Ketamine is avoided in patients with hypertension as it raises the blood pressure.&nbsp;</p>\n<p>Option A: Propofol produces cardiovascular depression by direct myocardial depressant effects and decreases systemic vascular resistance, which is more profound than thiopentone.</p>\n<p>Option B: Thiopentone decreases cardiac output, systemic arterial pressure, and peripheral vascular resistance.</p>\n<p>Option D:&nbsp;Etomidate is primarily used in Neurosurgery as it decreases Intracranial pressure but despite its favorable hemodynamic profile, it causes arterial hypotension in the volume-depleted patient.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What gas is the following cylinder used to carry?",
    "choices": [
      {
        "id": 1,
        "text": "Entonox"
      },
      {
        "id": 2,
        "text": "Air"
      },
      {
        "id": 3,
        "text": "Oxygen"
      },
      {
        "id": 4,
        "text": "Nitrous oxide"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Blue cylinders are used to store <strong>nitrous oxide.</strong></p>\n<p>Maximum pressure in the nitrous oxide cylinder is around <strong>745&nbsp;</strong>psig<strong>.</strong></p>\n<p>Critical temperature of nitrous oxide is<strong> 36.5<sup>o</sup>C,&nbsp;</strong>hence it is present in <strong>liquid</strong>&nbsp;form at room temperature.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c3105d9197c64ffb9e4015eec68ea181.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "An overworked OT technician brings an oxygen gas cylinder instead of an air cylinder to the theater. However, he realizes his mistake when he is unable to attach it to the hanger-yoke assembly because of the Pin index safety system. What would be the Pin index of the cylinder he is holding?",
    "choices": [
      {
        "id": 1,
        "text": "2, 5"
      },
      {
        "id": 2,
        "text": "1, 5"
      },
      {
        "id": 3,
        "text": "3, 5"
      },
      {
        "id": 4,
        "text": "7"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Pin index system for oxygen gas is 2,5.</strong></p>\n<p>Pin index system (PISS) is a safety measure to prevent incorrect cylinder attachment.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c533a5d5eee649f0a15c481db2f2b004.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not an early sign of malignant hyperthermia?",
    "choices": [
      {
        "id": 1,
        "text": "Hyperthermia"
      },
      {
        "id": 2,
        "text": "Tachycardia"
      },
      {
        "id": 3,
        "text": "Masseter spasm"
      },
      {
        "id": 4,
        "text": "Elevated end tidal carbon dioxide"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Hyperthermia</strong> is a <strong>late sign</strong> of malignant hyperthermia.</p>\n<p><strong>Clinical Manifestations</strong> of Malignant Hyperthermia:</p>\n<p><strong>Early Signs:</strong></p>\n<ul>\n<li>Elevated end-tidal carbon dioxide</li>\n<li>Tachypnea and/or tachycardia</li>\n<li>Masseter spasm, if succinylcholine has been used</li>\n<li>Generalized muscle rigidity</li>\n<li>Mixed metabolic and respiratory acidosis</li>\n<li>Profuse sweating</li>\n<li>Mottling of skin</li>\n<li>Cardiac arrhythmias</li>\n<li>Unstable blood pressure</li>\n</ul>\n<p><strong>Late Signs</strong></p>\n<ul>\n<li>Hyperkalemia</li>\n<li>Rapid increase of core body temperature- body temperature rises by 1&deg;C every 5 minutes</li>\n<li>Elevated creatine phosphokinase levels</li>\n<li>Gross myoglobinemia and myoglobinuria</li>\n<li>Cardiac arrest</li>\n<li>Disseminated intravascular coagulation</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "To provide epidural analgesia during labour, what is the ideal concentration of epinephrine added to the local anaesthetic?",
    "choices": [
      {
        "id": 1,
        "text": "1:10,000"
      },
      {
        "id": 2,
        "text": "1: 1,00,000"
      },
      {
        "id": 3,
        "text": "1: 2,00,000"
      },
      {
        "id": 4,
        "text": "1: 4,00,000"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Very dilute concentration of epinephrine<strong> (1:400,000 to 1:800,000) </strong>is&nbsp;used along with local anaesthetics for labour epidural analgesia.</p>\n<p><strong>Epidural epinephrine</strong> can provide vasoconstriction which would <strong>delay the vascular uptake of local anaesthetic and opioid.</strong> Additionally, it can activate &alpha;2-adrenergic receptors and thus produce analgesia on its own.</p>\n<p>Epinephrine, used along with local anaesthetics at a concentration of 5 &mu;g/mL or <strong>1:200,000</strong> may be associated with uterine artery vasoconstriction which can adversely affect the fetus and delay the progress of labour. Hence epinephrine at this dose is used only for <strong>test dose </strong>(15 &mu;g/mL or 3 ml of 1:200,000). A test dose is given to rule out the intravascular placement of epidural catheter following the procedure.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following inhaled anaesthetic is mainly associated with hepatotoxicity?",
    "choices": [
      {
        "id": 1,
        "text": "Methoxyflurane"
      },
      {
        "id": 2,
        "text": "Nitrous oxide"
      },
      {
        "id": 3,
        "text": "Isoflurane"
      },
      {
        "id": 4,
        "text": "Halothane"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Halothane </strong>is mainly known to be associated with complications such as <strong>hepatotoxicity</strong>.<br /><br />Halothane causes&nbsp; impaired hepatic perfusion, hepatocyte hypoxia, benign postoperative intrahepatic cholestasis, and <strong>halothane hepatitis.<br /></strong></p>\n<p>Patients exposed to <strong>multiple doses</strong> of halothane at short intervals, <strong>middle-aged obese women,</strong> and persons with a familial predisposition to halothane toxicity or a personal history of toxicity are considered to be at <strong>increased risk.</strong></p>\n<p>Halothane hepatitis is the result of an <strong>immune response</strong> to hepatic proteins that are trifluoroacetylated as a consequence of halothane metabolism. This leads to <strong>centrilobular necrosis</strong> of the liver and results in clinical manifestations. It may also be associated with <strong>jaundice</strong> and <strong>encephalopathy</strong>.</p>\n<div class=\"page\" title=\"Page 406\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Halothane is contraindicated in patients with <strong>unexplained liver dysfunction</strong> following previous anaesthetic exposure.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old patient on regular low dose aspirin requires a CABG procedure. What would be your advice regarding aspirin before the procedure?",
    "choices": [
      {
        "id": 1,
        "text": "Continue aspirin"
      },
      {
        "id": 2,
        "text": "Stop aspirin and replace with heparin"
      },
      {
        "id": 3,
        "text": "Stop aspirin and give a platelet transfusion"
      },
      {
        "id": 4,
        "text": "Cancel the surgery as he cannot be operated on"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p style=\"text-align: justify;\"><strong>Aspirin</strong> should be&nbsp;<strong>continued</strong>&nbsp;in patients requiring CABG procedure.&nbsp;</p>\n<p style=\"text-align: justify;\">Discontinuation of aspirin in patients requiring CABG procedure is associated with&nbsp;<strong>increased in-hospital mortality</strong>. Hence aspirin is continued before the procedure.</p>\n<p style=\"text-align: justify;\">The approach for most surgical patients is to <strong>discontinue </strong>aspirin temporarily for<strong> 3 days before surgery</strong> to mitigate potential intraoperative bleeding. However, the drug should be continued to prevent cardiovascular thrombotic events in the following:&nbsp; &nbsp; &nbsp;</p>\n<ol style=\"text-align: justify;\">\n<li>Patients with a prior PCI (Percutaneous coronary intervention)</li>\n<li>Patients with coronary artery disease&nbsp;</li>\n<li>Patient with stroke in the past 9 months.</li>\n</ol>\n<p>&nbsp;Note: The use of heparin may paradoxically <strong>increase </strong><strong>platelet aggregation</strong> and is not recommended.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drugs is the intravenous induction agent of choice in a patient with a history of myocardial infarction?",
    "choices": [
      {
        "id": 1,
        "text": "Etomidate"
      },
      {
        "id": 2,
        "text": "Thiopentone"
      },
      {
        "id": 3,
        "text": "Propofol"
      },
      {
        "id": 4,
        "text": "Ketamine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>As the patient has a history of coronary artery disease, the agent of choice is <strong>etomidate.</strong></p>\n<p>Etomidate is the most <strong>cardiac stable</strong> intravenous agent due to its lack of effect on the sympathetic nervous system and baroreceptor function.</p>\n<p>The myocardial oxygen supply-to-demand ratio is well maintained. It is the IV induction agent of choice in patients with<strong>&nbsp;coronary artery disease</strong>,<strong> cardiomyopathy</strong>,&nbsp;and&nbsp;<strong>cerebral vascular disease.</strong></p>\n<p>Adverse effects of etomidate:</p>\n<ul>\n<li>Postoperative nausea and vomiting (PONV)</li>\n<li>Myoclonus</li>\n<li>Adrenocortical suppression</li>\n<li>Epileptogenic potential</li>\n</ul>\n<p>Option B: Thiopentone decreases the cardiac output, systemic arterial pressure, and peripheral vascular resistance.</p>\n<p>Option C: Propofol produces cardiovascular depression by direct myocardial depressant effects and decreases systemic vascular resistance.</p>\n<p>Option D: Ketamine produces an increase in arterial pressure, heart rate and thus increases myocardial oxygen demand.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Your senior asks you to administer oxygen to a patient in order to avoid diffusion hypoxia. When is this phenomenon observed during anesthesia?",
    "choices": [
      {
        "id": 1,
        "text": "Induction with halothane"
      },
      {
        "id": 2,
        "text": "Induction with nitrous oxide"
      },
      {
        "id": 3,
        "text": "Recovery from halothane"
      },
      {
        "id": 4,
        "text": "Recovery from nitrous oxide"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Diffusion hypoxia</strong> is observed in anesthesia during <strong>recovery </strong>from<strong> nitrous oxide</strong>&nbsp;anesthesia.</p>\n<p>Due to low solubility (low blood gas partition coefficient), N<sub>2</sub>O diffuses from the blood to the alveoli and replaces the oxygen. This reduces alveolar O<sub>2</sub> concentration, resulting in <strong>relative hypoxemia</strong>.</p>\n<p>Diffusion hypoxia can be avoided by using 100% oxygen for 10 minutes during recovery from anesthesia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not an amino ester?",
    "choices": [
      {
        "id": 1,
        "text": "Cocaine"
      },
      {
        "id": 2,
        "text": "Procaine"
      },
      {
        "id": 3,
        "text": "Lidocaine"
      },
      {
        "id": 4,
        "text": "Chloroprocaine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Lidocaine</strong> (lignocaine, xylocaine) is an amino-amide.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following adverse effects are not attributed to succinylcholine?",
    "choices": [
      {
        "id": 1,
        "text": "Hypokalemia"
      },
      {
        "id": 2,
        "text": "Masseter spasm"
      },
      {
        "id": 3,
        "text": "Increased intracranial pressure"
      },
      {
        "id": 4,
        "text": "Arrhythmias"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Succinyl choline</strong> produces <strong>hyperkalemia</strong>&nbsp;not hypokalemia.</p>\n<p>Use of succinylcholine&nbsp;<strong>increases</strong> the plasma<strong> K+ levels </strong>by<strong> 0.5 mEq/L.</strong> This increase in K+ is well tolerated by healthy individuals but could be deliterious in patients with severe metabolic acidosis and hypovolemia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following local anaesthetic is commonly used in topicalization of airway for awake intubation?",
    "choices": [
      {
        "id": 1,
        "text": "Bupivacaine"
      },
      {
        "id": 2,
        "text": "Benzocaine"
      },
      {
        "id": 3,
        "text": "Prilocaine"
      },
      {
        "id": 4,
        "text": "Lidocaine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Lidocaine</strong> is the local anesthetic of choice to provide topical anesthesia of airway prior to awake intubation. It is preferred since it has a <strong>rapid onset</strong> and a <strong>high therapeutic index.</strong></p>\n<p><strong>Bupivacaine</strong>&nbsp;is<strong>&nbsp;not</strong>&nbsp;formulated for&nbsp;<strong>topical</strong>&nbsp;use.</p>\n<p><strong>Benzocaine and Cetacaine</strong> (a topical application spray containing benzocaine, tetracaine, and butamben) had been used but greater incidence of <strong>methemoglobinemia</strong> due to benzocaine has discouraged their use.</p>\n<p><strong>Prilocaine</strong> is usually available as a combination with lidocaine in Eutectic mixture of local anesthetic (EMLA) to provide topical anesthesia to <strong>intact skin</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 70 kg athlete was posted for surgery on her injured rotator cuff. She was administered a total of 640mg of succinylcholine by intermittent dosing. During recovery, she was unable to respire spontaneously and move her limbs. What is the most likely reason for this?",
    "choices": [
      {
        "id": 1,
        "text": "Muscular weakness due to fasciculation produced by succinylcholine"
      },
      {
        "id": 2,
        "text": "Undiagnosed muscular dystrophy and muscular weakness"
      },
      {
        "id": 3,
        "text": "Phase II blockade produced by succinyl choline"
      },
      {
        "id": 4,
        "text": "Pseudocholinesterase deficiency increasing action of succinylcholine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: justify;\">The most likely reason which led to this scenario is<strong> phase II&nbsp;blockade </strong>produced by <strong>succinylcholine.</strong></p>\n<p style=\"text-align: justify;\">Phase II block is clinically seen with the dose <strong>&gt;5 mg/kg.&nbsp;</strong>It is&nbsp;seen with a&nbsp;single <strong>large</strong> dose, <strong>repeated</strong> doses, or a <strong>continuous</strong> infusion of <strong>Sch</strong> which can lead to <strong>desensitization</strong> of the receptors resulting in a <strong>prolonged</strong> neuromuscular <strong>blockade.</strong></p>\n<p style=\"text-align: justify;\">Causes of prolonged apnea include:</p>\n<ul style=\"text-align: justify;\">\n<li>Atypical/pseudocholinesterase deficiency - can result in apnea even with a normal dose of succinylcholine</li>\n<li>Altered response of endplate to depolarizing relaxant (myasthenia gravis)</li>\n<li>Accumulation of succinylcholine leading to phase II blockade</li>\n</ul>\n<p style=\"text-align: justify;\">Note: Although options A, B, and D can lead to prolonged apnea, in the above case scenario, the patient has received ~9 mg/kg of succinylcholine. Hence, the most probable diagnosis is phase II blockade leading to prolonged apnea.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following situations is least suitable for performing nasotracheal intubation?",
    "choices": [
      {
        "id": 1,
        "text": "A 35 year old patient with unstable c-spine injury requiring awake intubation"
      },
      {
        "id": 2,
        "text": "A 60 year old man with a tumor of the oral cavity"
      },
      {
        "id": 3,
        "text": "A 28 year old woman with fracture of ramus of mandible"
      },
      {
        "id": 4,
        "text": "A 40 year old man with fracture of the base of skull"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Nasotracheal intubation is <strong>contraindicated</strong>&nbsp;in&nbsp;base of skull fractures<strong>&nbsp;</strong>as there is a chance for the tube to enter the cranial vault.</p>\n<p>The nasotracheal route is <strong>preferred</strong> in the following:</p>\n<ul>\n<li>When intubation via the oral route is difficult or not possible - large <strong>oral cavity tumors</strong> or abscess, conditions restricting mouth opening like temporomandibular joint ankylosis, <strong>fracture</strong> <strong>mandible</strong>&nbsp;etc.</li>\n<li>Surgeries of the oral cavity</li>\n<li><strong>Awake intubation&nbsp;</strong>as it bypasses the gag reflex and is more tolerable by a conscious patient.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As an intern posted in the OT, you see the Anesthesia Senior Resident holding the needle shown in the image. What is the likely procedure that he is about to perform?",
    "choices": [
      {
        "id": 1,
        "text": "Spinal anesthesia"
      },
      {
        "id": 2,
        "text": "Epidural anesthesia"
      },
      {
        "id": 3,
        "text": "Combined spinal epidural anesthesia"
      },
      {
        "id": 4,
        "text": "IV cannulation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shown is the 18 G&nbsp;<strong>Tuohy needle,</strong>&nbsp;which is used in<strong> epidural anesthesia</strong>.</p>\n<p><strong>Identification points:</strong></p>\n<ul>\n<li>It has a <strong>blunt, curved tip (Huber tip)</strong>&nbsp;that helps to <strong>prevent accidental dural puncture</strong></li>\n<li>The needle shaft is marked in 1-cm intervals so that the depth of insertion can be identified</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/61d90c1de9e242abbe580eeda0811ed9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7c453ca187034b57880a2e096cc43108x1280x960.JPEG"
    ]
  },
  {
    "text": "Identify the gauge of the given IV cannula.",
    "choices": [
      {
        "id": 1,
        "text": "14G"
      },
      {
        "id": 2,
        "text": "16G"
      },
      {
        "id": 3,
        "text": "18G"
      },
      {
        "id": 4,
        "text": "24G"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given cannula is 14 gauge IV cannula as its color code is<strong> orange.</strong></p>\n<p>The maximal flow rate in a cannula of this gauge is 270mL/minute.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0bc9e34c2730461484fb053a02d4d95b.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following opioids follow the marked graphical representation (A) in the given image?",
    "choices": [
      {
        "id": 1,
        "text": "Morphine"
      },
      {
        "id": 2,
        "text": "Butorphanol"
      },
      {
        "id": 3,
        "text": "Buprenorphine"
      },
      {
        "id": 4,
        "text": "Pentazocine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The graph is of the <strong>ceiling effect</strong> of <strong>opioids</strong> i.e. with some opioids when the <strong>ceiling</strong> is reached further <strong>increment</strong> in <strong>dose</strong> does not <strong>increase</strong> the <strong>effect.</strong> <strong>Morphine does not show the ceiling effect.\u00a0</strong></p>\n<p>The ceiling effect is particularly seen with respiratory depression i.e. <strong>higher doses</strong> do not produce further respiratory depression.<strong> Respiratory</strong> depression increases proportionally with <strong>dose.</strong></p>\n<p>The following opioids show a ceiling effect:</p>\n<ul>\n<li>Buprenorphine</li>\n<li>Butorphanol</li>\n<li>Nalbuphine</li>\n<li>Pentazocine</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2ec1709802db42a2b95968595d1672bd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a7cfbbdedb254049b86317fd45fcde6dx1280x840.JPEG"
    ]
  },
  {
    "text": "The anesthesia PG applies a cream with an occlusive dressing on the forearm of a baby brought for IV cannulation.  1 hour later, the baby allows him to place the cannula without crying. What is the composition of the cream that was applied?",
    "choices": [
      {
        "id": 1,
        "text": "2.5 % lidocaine and 2.5 % procaine"
      },
      {
        "id": 2,
        "text": "2.5% lidocaine and 2.5 % prilocaine"
      },
      {
        "id": 3,
        "text": "5% lidocaine and 2.5% procaine"
      },
      {
        "id": 4,
        "text": "5% lidocaine and 2.5 % prilocaine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The substance applied by the anesthesia resident is <strong>EMLA cream</strong> (Eutectic Mixture of Local Anesthetic) which consists of a 1:1 mixture of <strong>2.5% lidocaine</strong> and <strong>2.5% prilocaine</strong>.</p>\n<p>A eutectic mixture has a melting point lesser than the individual drugs and hence the mixture is in the <strong>oil form</strong> at <strong>room temperature.</strong></p>\n<p>EMLA can provide adequate <strong>dermal analgesia</strong> for procedures like:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Split skin graft harvesting and laser skin treatments</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Venipuncture and intravenous cannulation in children</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Lithotripsy</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Circumcision</li>\n</ul>\n<p>EMLA is applied 45-60 minutes before the procedure with an occlusive dressing as shown in the image. It provides analgesia up to a <strong>depth</strong> of <strong>5mm</strong> which <strong>lasts</strong> for <strong>1-2 hours.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ec85abed33284ced8d0657dd623b83eax512x113.PNG"
    ]
  },
  {
    "text": "A child was administered an anesthetic for fracture reduction in the ER. He could open his eyes, was blabbering and breathing spontaneously but did not feel any pain. Which anesthetic agent was administered?",
    "choices": [
      {
        "id": 1,
        "text": "Ketamine"
      },
      {
        "id": 2,
        "text": "Propofol"
      },
      {
        "id": 3,
        "text": "Etomidate"
      },
      {
        "id": 4,
        "text": "Thiopentone"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given features suggest <strong>dissociative anaesthesia</strong>, which is a characteristic feature of <strong>ketamine</strong>.</p>\n<p>Ketamine produces dissociative anesthesia which is characterized by a state wherein the patient is <strong>conscious</strong> (eg., eye opening, swallowing, muscle contracture) but <strong>unable</strong> to <strong>process</strong> or <strong>respond</strong> to sensory input.</p>\n<p>Ketamine functionally &ldquo;<strong>dissociates&rdquo;</strong> the <strong>thalamus</strong> (which relays sensory impulses from the reticular activating system to the cerebral cortex) from the<strong> limbic cortex</strong> (which is involved with the awareness of sensation).&nbsp;It acts as an <strong>antagonist</strong> at the phencyclidine<strong>&nbsp;</strong>site of the <strong>NMDA receptor.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old male is posted for inguinal hernia surgery. In order to perform a fast-track surgical procedure, the anesthetic technique of choice is:",
    "choices": [
      {
        "id": 1,
        "text": "General anesthesia"
      },
      {
        "id": 2,
        "text": "Spinal anesthesia"
      },
      {
        "id": 3,
        "text": "Epidural anesthesia"
      },
      {
        "id": 4,
        "text": "Infiltration anesthesia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Infiltration anesthesia</strong> is ideal to perform inguinal hernia repair as a<strong> fast-track procedure.</strong></p>\n<p>It has a lesser incidence of complications than regional or general anesthesia. Other anesthetic techniques for hernia repair include intercostal block and ilioinguinal nerve block.</p>\n<p>Ambulatory/Outpatient anesthesia employs the use of fast - Track surgical techniques to provide adequate surgical anesthesia and minimize post-operative complications in order to reduce the duration of hospital stay.</p>\n<p><strong>Disadvantage of infiltration anesthesia</strong>&nbsp;- Short duration of anesthesia even when long-acting local anesthetics like bupivacaine are used. Extended- duration local anesthesia can be produced by encapsulating bupivacaine into a biodegradable carrier.</p>\n<p><strong>Regional anesthesia</strong> is contraindicated in patients with bleeding disorders, those on anticoagulants and with local infections.</p>\n<p><strong>Spinal anesthesia</strong> has the disadvantage over epidural anesthesia of delayed recovery due to profound motor blockade. Spinal opioids like fentanyl or sufentanil are added to prolong postoperative analgesia and minimize motor block without delaying recovery. But the adverse effects of spinal opioids like nausea, pruritus and postoperative urinary retention are additive.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most commonly used carbon dioxide absorbent in a closed circuit?",
    "choices": [
      {
        "id": 1,
        "text": "Amsorb"
      },
      {
        "id": 2,
        "text": "Sodasorb"
      },
      {
        "id": 3,
        "text": "Soda lime"
      },
      {
        "id": 4,
        "text": "Baralyme"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Soda lime</strong> is the most commonly used carbon dioxide absorbent in circle breathing systems.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You observe the catheter shown in the image being used by your attending in the ICU. Which of the following procedures is it used for?",
    "choices": [
      {
        "id": 1,
        "text": "Gastro-Esophageal varices"
      },
      {
        "id": 2,
        "text": "Embolectomy"
      },
      {
        "id": 3,
        "text": "Pulmonary artery catheterization"
      },
      {
        "id": 4,
        "text": "Urinary catheterization"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shown above is the<strong> Swan-ganz catheter</strong>&nbsp;which is used for<strong> pulmonary artery catheterization</strong>. It is also called the pulmonary artery catheter. The standard pulmonary artery catheter is 110 cm long with a 7.0 &ndash; 9.0 Fr circumference.&nbsp;</p>\n<p>Uses of Swan-ganz catheter<strong>:</strong></p>\n<ul>\n<li>Measurement of pressures in right atrium, right ventricle and pulmonary artery</li>\n<li>Indirect measurement of left atrial pressure through pulmonary capillary wedge pressure</li>\n<li>Cardiac output</li>\n<li>Oxygen saturation- pulmonary samples to rule out left-right shunt</li>\n<li>Monitoring left ventricle filling pressure</li>\n<li>Differentiate cardiogenic from non cardiogenic pulmonary edema</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0f8d0b11de0b4652bd14d3fa63e4b8f7.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following inhalational agents produces a nephrotoxic substance called compound A?",
    "choices": [
      {
        "id": 1,
        "text": "Halothane"
      },
      {
        "id": 2,
        "text": "Methoxyflurane"
      },
      {
        "id": 3,
        "text": "Sevoflurane"
      },
      {
        "id": 4,
        "text": "Desflurane"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Sevoflurane</strong> reacts with strong bases like sodium hydroxide and potassium hydroxide present in <strong>soda-lime</strong> and <strong>baralyme</strong> leading to the formation of a <strong>haloalkene</strong> (fluoromethyl-2,2-difluoro-1-[trifluoromethyl] vinyl ether) known as <strong>compound A.</strong></p>\n<p>Compound A has the potential to cause<strong> proximal tubular necrosis.&nbsp;</strong></p>\n<p><strong>Risk factors </strong>for increased compound A production:</p>\n<ul>\n<li>Prolonged duration of anesthesia</li>\n<li>High concentration of sevoflurane</li>\n<li>Low flow techniques</li>\n<li>Dry baralyme</li>\n</ul>\n<p>A fresh gas flow of<strong> at least&nbsp;2L/ min</strong> can prevent the generation of compound A</p>\n<p><strong>Amsorb</strong> is a CO2 absorbent that is more inert than soda-lime and baralyme and so associated with lesser degradation of sevoflurane and&nbsp;<strong>less compound A</strong> production.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "When providing CPR to an adult, what ratio of chest compressions to rescue breaths would you provide if there were 2 rescuers?",
    "choices": [
      {
        "id": 1,
        "text": "15:1"
      },
      {
        "id": 2,
        "text": "15:2"
      },
      {
        "id": 3,
        "text": "30:1"
      },
      {
        "id": 4,
        "text": "30:2"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>During cardiopulmonary resuscitation of<strong> adults, </strong>the ratio of chest compression to rescue breaths is <strong>30:2 irrespective </strong>of the <strong>number of rescuers.</strong></p>\n<p>In infants and children, the ratio is 30:2 for a single-rescuer and 15:2 if 2 or more rescuers are present.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An elderly primigravida at 37 weeks of gestation develops bilateral pedal oedema. On examination, she has a BP of 148/92 mmHg and proteinuria of 400mg/day. Emergency LSCS has been scheduled for the patient. Which of the following anaesthetic techniques would be prefered in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "General anesthesia"
      },
      {
        "id": 2,
        "text": "Spinal anesthesia"
      },
      {
        "id": 3,
        "text": "Lumbar epidural"
      },
      {
        "id": 4,
        "text": "Caudal anesthesia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: justify;\"><strong>Epidural anaesthesia</strong> is the preferred anaesthetic technique in this patient who is likely to be suffering from <strong>preeclampsia</strong>.&nbsp;</p>\n<p style=\"text-align: justify;\">Epidural anaesthesia is the first choice anaesthetic technique for patients with<strong> pre-eclampsia </strong>during labour, vaginal delivery, and cesarean section.&nbsp;One major prerequisite for its usage is <strong>normal platelet count </strong>(minimum 100,000/&mu;L)<strong>&nbsp;</strong>and <strong>normal coagulation</strong>.</p>\n<p style=\"text-align: justify;\">It has been shown to decrease catecholamine secretion and improve uteroplacental perfusion up to 75% in these patients, provided hypotension is avoided.</p>\n<p style=\"text-align: justify;\">Option A:<strong> General anaesthesia</strong> is indicated in patients with <strong>coagulopathy</strong> and in <strong>severe pre-eclampsia&nbsp;</strong>with complications.</p>\n<p style=\"text-align: justify;\">Option B:<strong> Spinal anaesthesia</strong> can be given in mild pre-eclampsia but hypotension associated with spinal anaesthesia limits its use in moderate to severe pre-eclampsia.&nbsp;</p>\n<p style=\"text-align: justify;\">Option D: <strong>Caudal anaesthesia</strong> is generally unpopular in obstetric anaesthesia because of painful needle placement, high failure rates, potential contamination at the injection site, and risks of accidental fetal injection.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the shortest acting opioid?",
    "choices": [
      {
        "id": 1,
        "text": "Fentanyl"
      },
      {
        "id": 2,
        "text": "Remifentanil"
      },
      {
        "id": 3,
        "text": "Alfentanil"
      },
      {
        "id": 4,
        "text": "Sufentanil"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The shortest acting opioid is&nbsp;<strong>remifentanil</strong> with t<sub>1/2</sub>&nbsp;of 8-20 minutes.</p>\n<p>The rapid metabolism by&nbsp;<strong>tissue esterases</strong> and rapid clearance results in its ultra short-acting nature.</p>\n<p>Remifentanil has the <strong>fastest onset</strong> of action and <strong>recovery</strong>, making it the opioid of choice in <strong>daycare surgery.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common cause of bacterial meningitis following spinal anesthesia is _________",
    "choices": [
      {
        "id": 1,
        "text": "Staphylococcus"
      },
      {
        "id": 2,
        "text": "Streptococcus"
      },
      {
        "id": 3,
        "text": "E.coli"
      },
      {
        "id": 4,
        "text": "Hemophilus influenza"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The most common organism responsible for post-neuraxial (epidural and spinal)<strong> bacterial meningitis </strong>is <strong><em>Streptococcus viridians</em>.</strong></p>\n<div class=\"page\" title=\"Page 1995\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>On the other hand, the most common organism responsible for&nbsp;<strong>epidural</strong> related local infection (local abscess) is<strong>&nbsp;<em>Staphylococcus</em>.</strong></p>\n</div>\n</div>\n</div>\n<p><em><strong>Streptococcus viridians</strong></em> is an oral commensal, emphasizing the purpose of wearing a mask as part of a full aseptic technique.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 47-year-old woman was brought to the casualty in an unconscious state after having suddenly collapsed. As there was no pulse, cardiopulmonary resuscitation was started and the monitor showed the following rhythm. What is the next step?",
    "choices": [
      {
        "id": 1,
        "text": "Defibrillation"
      },
      {
        "id": 2,
        "text": "Synchronized cardioversion"
      },
      {
        "id": 3,
        "text": "1 mg epinephrine IV"
      },
      {
        "id": 4,
        "text": "0.5 mg atropine IV"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient has an organized, apparently<strong> normal ECG without a pulse&nbsp;</strong>- i.e the patient has <strong>pulseless electrical activity</strong> (PEA). A pulseless electrical activity involves a heterogeneous group of cardiac rhythms, all without a pulse.</p>\n<p>The immediate treatment for this is giving <strong>chest compressions </strong>and<strong> 1 mg epinephrine</strong> at the <strong>earliest</strong> until definitive therapy to the cause can be instituted.</p>\n<p>It is essential to rule out the reversible causes of cardiac arrest because the treatment for each of them is different and PEA is likely to persist until the cause is treated.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/afcb5b8322cc4db9b71de1dcc76b45ee.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false about the modified Mallampati score?",
    "choices": [
      {
        "id": 1,
        "text": "It is used to assess oral cavity before intubation"
      },
      {
        "id": 2,
        "text": "In class II, tonsillar pillars cannot be visualized"
      },
      {
        "id": 3,
        "text": "Higher scores are associated with higher risk of sleep apnea"
      },
      {
        "id": 4,
        "text": "In class III, only hard palate is visible"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In class III of Mallampati score, <strong>both</strong> hard and soft palates are visible.</p>\n<p>Option A: Mallampati score is used to predict difficult tracheal intubation based on the size of the tongue base relative to the oropharyngeal space.</p>\n<p>Option B: In class II, only soft palate, fauces, and the portion of uvula are visualized, tonsillar pillars can't be visualized.</p>\n<p>Option C: Higher Mallampati scores (class III and IV) are associated with a greater incidence of difficult intubation and sleep apnea.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young boy developed masseter spasm and tachycardia after being administered succinylcholine for RSI. Which of the following is the best site for monitoring core body temperature in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Oral cavity"
      },
      {
        "id": 2,
        "text": "Esophagus"
      },
      {
        "id": 3,
        "text": "Axilla"
      },
      {
        "id": 4,
        "text": "Rectum"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical features are suggestive of <strong>malignant hyperthermia</strong> in this patient and the&nbsp;<strong>distal oesophagus</strong> is the best site for core temperature monitoring in this condition.&nbsp; &nbsp;&nbsp;</p>\n<p><strong>Pulmonary artery </strong>is the <strong>most accurate site</strong> for temperature measurement but it is not used routinely due to a higher incidence of complications. It is useful in patients already on Swan-Ganz catheter.</p>\n<p>Option A:<strong> Oral cavity (sublingual)</strong>&nbsp;readings can be influenced by mouth breathing, tachypnea, and ambient temperature.</p>\n<p>Option C:<strong> Axilla </strong>readings are influenced by contact with probe, skin perfusion, environment, etc.</p>\n<p>Option D:<strong> Rectum </strong>readings are higher than central sites due to heat-producing flora in feces.</p>\n<p>Other sites for core thermal monitoring<strong>:</strong></p>\n<ul>\n<li>Tympanic membrane</li>\n<li>Nasopharynx</li>\n<li>Trachea</li>\n<li>Skin</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The main mechanism of action of lignocaine is through inhibition of ___________.",
    "choices": [
      {
        "id": 1,
        "text": "Resting, voltage-gated Na channel"
      },
      {
        "id": 2,
        "text": "Inactivated, voltage-gated Na channel"
      },
      {
        "id": 3,
        "text": "Resting, ligand-gated Na channel"
      },
      {
        "id": 4,
        "text": "Inactivated, ligand-gated Na channel"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The main mechanism of action of local anesthetics is through <strong>inhibition</strong> of<strong> inactivated, voltage-gated Na channel.</strong></p>\n<p>Local anesthesia involves the abolition of local sensation through blockade of nerve impulses.</p>\n<p>Na channels exist in 3 states:</p>\n<ul>\n<li>Resting (non-conducting)</li>\n<li>Open (conducting)</li>\n<li>Inactivated (non conducting)</li>\n</ul>\n<p>Local anesthetics have a <strong>greater affinity </strong>for the channel in the<strong> open or inactivated state</strong> than in the resting state. They bind to the Na channel from the inner aspect in cationic form.</p>\n<p>They bind to the &alpha; subunit of Na channel and inhibit the conformational changes associated with channel opening, thereby preventing Na influx. When a considerable number of Na channels are inactivated, the action potential cannot be generated and impulse cannot be propagated.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old female patient has to undergo incisional hernia surgery under general anesthesia. She complains of awareness in her past caesarean section. Which of the following monitoring techniques can be used to prevent such awareness?",
    "choices": [
      {
        "id": 1,
        "text": "Pulse plethysmography"
      },
      {
        "id": 2,
        "text": "Color doppler"
      },
      {
        "id": 3,
        "text": "Transesophageal echocardiography"
      },
      {
        "id": 4,
        "text": "Bispectral index monitoring"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>The monitoring technique</strong> used to prevent such an awareness intraoperatively is the\u00a0<strong>bispectral index</strong>.\u00a0</p>\n<p><strong>The bispectral index </strong>is a monitoring technique to\u00a0check the\u00a0<strong>depth of anesthesia\u00a0</strong>using an algorithm by a device. Individual intraoperative awareness is evaluated. It utilizes parameters like EEG signals, eye blinking, etc.\u00a0</p>\n<p>BIS examines\u00a0<strong>four components within the EEG</strong>\u00a0that are associated with the anesthetic state.</p>\n<ol>\n<li>Low-frequency waves (as found during deep anesthesia)</li>\n<li>High-frequency beta activation (as found during light anesthesia)</li>\n<li>Suppressed EEG waves</li>\n<li>Burst suppression</li>\n</ol>\n<p>It has numerical values from 0 to 100. with 0 representing isoelectric EEG and 100 being awake CNS. Recommended range of Bispectral index (BIS)\u00a0for anesthesia:\u00a0<strong>40-60</strong>.</p>\n<table style=\"width: 287.133px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 87px; text-align: center;\">\u00a0BIS\u00a0 <br />value</td>\n<td style=\"width: 184.133px;\">\u00a0\u00a0 Interpretation</td>\n</tr>\n<tr>\n<td style=\"width: 87px;\">\u00a0\u00a0\u00a0\u00a0 80-100</td>\n<td style=\"width: 184.133px; text-align: center;\">\u00a0\u00a0 Awake</td>\n</tr>\n<tr>\n<td style=\"width: 87px;\">\u00a0 \u00a0 \u00a060-80</td>\n<td style=\"width: 184.133px; text-align: center;\">\u00a0 Moderate sedation</td>\n</tr>\n<tr>\n<td style=\"width: 87px;\">\u00a0 \u00a0 \u00a040-60</td>\n<td style=\"width: 184.133px; text-align: center;\">General anesthesia</td>\n</tr>\n<tr>\n<td style=\"width: 87px;\">\u00a0 \u00a0 \u00a0 &lt;40</td>\n<td style=\"width: 184.133px; text-align: center;\">\u00a0Deep hypnosis</td>\n</tr>\n<tr>\n<td style=\"text-align: center; width: 87px;\">0\u00a0</td>\n<td style=\"width: 184.133px; text-align: center;\">Coma (Flatline coma)</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You witness a 40-year-old man suddenly collapse near the ER. He is unresponsive and you start chest compressions as his pulse is also not recordable. For maximum effectiveness, what should be the depth of your compressions?",
    "choices": [
      {
        "id": 1,
        "text": "1 cm"
      },
      {
        "id": 2,
        "text": "2 cm"
      },
      {
        "id": 3,
        "text": "3 cm"
      },
      {
        "id": 4,
        "text": "5 cm"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>High-quality cardiopulmonary resuscitation involves adequate <strong>chest compressions </strong>to a <strong>depth</strong> of at least <strong>5 cm in adults.</strong></p>\n<p>If a feedback device is used, then the compression depth can be increased to 6 cm.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A comatose patient is being shifted to the cardiac ICU after achieving return of spontaneous circulation (ROSC). What is the body temperature to be maintained in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "12-16\u00b0"
      },
      {
        "id": 2,
        "text": "20-24 \u00b0C"
      },
      {
        "id": 3,
        "text": "32-36\u00b0C"
      },
      {
        "id": 4,
        "text": "42- 45\u00b0 C"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>According to the post-cardiac arrest care algorithm,<strong>&nbsp;targeted temperature management</strong> is the maintenance of a constant target temperature between <strong>32-36<sup>0</sup></strong>C for <strong>at least 24 hours. </strong></p>\n<p>This is done&nbsp;in post-cardiac resuscitation patients who have achieved return of spontaneous circulation (<strong>ROSC</strong>), but are <strong>still comatose.</strong></p>\n<p>The entire body is to be cooled using a combination of methods like fluid-filled cooling blankets, ice packs, forced air blankets, cold IV fluids, and/or invasive devices or catheters.</p>\n<p>It has been found to be the only intervention that can improve neurological recovery after cardiac arrest. It is most beneficial in ventricular fibrillation and pulseless ventricular tachycardia patients.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following nerves is popularly used in clinical anaesthesia to monitor neuromuscular blockade?",
    "choices": [
      {
        "id": 1,
        "text": "Ulnar Nerve"
      },
      {
        "id": 2,
        "text": "Median Nerve"
      },
      {
        "id": 3,
        "text": "Radial nerve"
      },
      {
        "id": 4,
        "text": "Mandibular nerve"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Ulnar nerve</strong> stimulation at wrist&nbsp;is popularly used to assess&nbsp;the <strong>adequacy of neuromuscular blockade.</strong></p>\n<p>Neuromuscular blockade is measured using a peripheral nerve stimulator.</p>\n<table style=\"height: 130px; width: 343px;\">\n<tbody>\n<tr>\n<td style=\"width: 110px;\"><strong>Nerve</strong></td>\n<td style=\"width: 235px;\"><strong>Response</strong></td>\n</tr>\n<tr>\n<td style=\"width: 110px;\">Ulnar nerve</td>\n<td style=\"width: 235px;\">Contraction of adductor pollicis</td>\n</tr>\n<tr>\n<td style=\"width: 110px;\">Facial nerve</td>\n<td style=\"width: 235px;\">Contraction of orbicularis oculi</td>\n</tr>\n<tr>\n<td style=\"width: 110px;\">Posterior tibial nerve</td>\n<td style=\"width: 235px;\">Contraction of flexor hallucis brevis</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old man with a history of hypertension and diabetes is on dialysis for chronic renal failure. Which is the inhalational agent safe in him, if he is to undergo surgery?",
    "choices": [
      {
        "id": 1,
        "text": "Methoxyflurane"
      },
      {
        "id": 2,
        "text": "Desflurane"
      },
      {
        "id": 3,
        "text": "Enflurane"
      },
      {
        "id": 4,
        "text": "Sevoflurane"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The anesthetic agent safe in renal failure is <strong>d</strong><strong>esflurane.</strong></p>\n<p>Desflurane is minimally metabolized and eliminated rapidly unchanged.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Shambu, a 55-year-old man met with a road traffic accident and was brought to the casualty. Radiographs revealed multiple rib fractures. Which of the following methods is used to treat this patient?",
    "choices": [
      {
        "id": 1,
        "text": "General anaesthesia with endotracheal intubation"
      },
      {
        "id": 2,
        "text": "Spinal anaesthesia"
      },
      {
        "id": 3,
        "text": "Epidural anaesthesia"
      },
      {
        "id": 4,
        "text": "Infraclavicular block"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: justify;\"><strong>Epidural anaesthesia </strong>is used to provide adequate analgesia which is the mainstay of treatment in patients with multiple rib fractures.</p>\n<p style=\"text-align: justify;\">The complications can be minimized by adequate pain relief with epidural anaesthesia. Rib fracture patients will have the following complications due to splinting and pain:</p>\n<ul style=\"text-align: justify;\">\n<li>Hypoventilation</li>\n<li>Hypoxia</li>\n</ul>\n<p style=\"text-align: justify;\">Other techniques to provide analgesia following rib fractures are&nbsp;<strong>intercostal nerve block </strong>and<strong> intrapleural&nbsp;block</strong> which&nbsp;necessitates <strong>multiple injections</strong>, which increases the risk for complications.</p>\n<p style=\"text-align: justify;\">The complications include<strong>&nbsp;vascular puncture, pneumothorax</strong>, patient discomfort due to the need for palpation of the fractured rib during local anaesthetic (LA) administration. Also, <strong>LA toxicity</strong> can occur because of the high systemic absorption.&nbsp;</p>\n<p style=\"text-align: justify;\">Option A: General Anaesthesia is more invasive to manage patient with multiple rib fractures and has potentially more side effects and complications than Epidural Anaesthesia. Endotracheal intubation as treatment is reserved only for patients who cannot maintain an airway or maintain sufficient oxygen saturation.</p>\n<p style=\"text-align: justify;\">Option B<strong>: </strong>Spinal anaesthesia involves a high level of anaesthesia which is required to cover the thoracic dermatomes which would lead to high spinal or total spinal anaesthesia.</p>\n<p style=\"text-align: justify;\">Option D: Infraclavicular block&nbsp;is a brachial plexus block that is used for the upper limbs.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 6-year-old child requires endotracheal intubation. Which is the correct length of the tube to be chosen?",
    "choices": [
      {
        "id": 1,
        "text": "6 cm"
      },
      {
        "id": 2,
        "text": "10 cm"
      },
      {
        "id": 3,
        "text": "12 cm"
      },
      {
        "id": 4,
        "text": "15 cm"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The appropriate length of the endotracheal tube for a 6-year-old child is 15 cm.</p>\n<p>The formula to estimate endotracheal tube length is:&nbsp;<strong>12 + (Age/2) = Length of tube (in cm)</strong></p>\n<p>If the ETT&nbsp;is inserted too deep, it can lead to endobronchial intubation. If inserted too shallow,&nbsp;it can lead to accidental extubation.</p>\n<p>An adequate sized tube should be placed with its tip midway between the vocal cords and the carina.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dd291de6f19942f5be1876d339bb85b3x1280x2540.JPEG"
    ]
  },
  {
    "text": "A 35-year-old woman was brought to the casualty ward with a history of road traffic accident (RTA) and head trauma.  Her eye opens to pain, moans, can localize limb towards the pain stimulus on the left hand and away from the pain stimulus on the right hand and both the legs in extended posture. Calculate her GCS.",
    "choices": [
      {
        "id": 1,
        "text": "11"
      },
      {
        "id": 2,
        "text": "9"
      },
      {
        "id": 3,
        "text": "7"
      },
      {
        "id": 4,
        "text": "3"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The GCS (Glasgow Coma Scale) of this patient is E2V2M5, which comes to a total score of 9.<br />E2-Eye opens to pain<br />V2-Moans<br />M5-Localizes to pain on the left hand (the score represents the best performance elicited, which would be localizing towards the pain stimulus)</p>\n<p>Revised Glasgow coma scale for head injury:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 26-year-old term primigravida is taken to the operation theatre for an emergency cesarean section due to sudden fetal distress. The anaesthetist wants to prevent chances of pulmonary aspiration and decides to intubate using rapid sequence intubation. Which of the following steps is not performed in this technique?",
    "choices": [
      {
        "id": 1,
        "text": "Preoxygenation"
      },
      {
        "id": 2,
        "text": "Cricoid pressure"
      },
      {
        "id": 3,
        "text": "Bag\u00a0and mask ventilation"
      },
      {
        "id": 4,
        "text": "Propofol infusion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Bag and mask ventilation is <strong>avoided</strong> in rapid sequence intubation because it leads to <strong>stomach</strong> <strong>inflation</strong> and increases the risk of<strong> aspiration</strong>.<br /><strong><br /></strong><strong>Indications of Rapid sequence intubation:</strong></p>\n<p>RSI is done when the patient is at increased risk of pulmonary aspiration&nbsp;as in:</p>\n<ul>\n<li aria-level=\"1\"><strong>pregnancy</strong></li>\n<li aria-level=\"1\">full stomach</li>\n<li aria-level=\"1\">intestinal obstruction</li>\n<li aria-level=\"1\">hiatus hernia</li>\n<li aria-level=\"1\">encephalopathy</li>\n<li aria-level=\"1\">morbid obesity</li>\n<li aria-level=\"1\">diabetic gastroparesis.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/431763442d4248af822e1dfbf43f4484x1280x2171.JPEG"
    ]
  },
  {
    "text": "DIBUCAINE NUMBER is used to assess:",
    "choices": [
      {
        "id": 1,
        "text": "Concentration of butyryl cholinesterase"
      },
      {
        "id": 2,
        "text": "Concentration of acetyl cholinesterase"
      },
      {
        "id": 3,
        "text": "Genetic make up of an individual with respect to butyryl cholinesterase"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Dibucaine number indicates the <strong>genetic makeup</strong> of an individual with respect to <strong>butyrylcholinesterase</strong>, BUT it<strong> does not measure</strong> the <strong>concentration</strong> of the enzyme in the plasma substrate.</p>\n<p>Dibucaine is a local anesthetic which measures pseudocholinesterase function but not the amount of enzyme.</p>\n<p>It inhibits normal pseudocholinesterase activity by 80% but inhibits atypical enzyme activity by only 20%.</p>\n<p>Dibucaine number refers to the percentage of inhibition of pseudocholinesterase activity.</p>\n<p>A patient with normal pseudocholinesterase has a dibucaine number of 80; a homozygote will have a dibucaine number of 20.</p>\n<p>Therefore, adequacy of pseudocholinesterase can be determined</p>\n<ul>\n<li>quantitatively in units per liter (a minor factor) - in laboratory</li>\n<li>qualitatively-by dibucaine number (the major factor)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 42-year-old epileptic patient is posted for general anesthesia. Which of the following is contraindicated in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Ketamine"
      },
      {
        "id": 2,
        "text": "Propofol"
      },
      {
        "id": 3,
        "text": "Thiopentone"
      },
      {
        "id": 4,
        "text": "Midazolam"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Ketamine</strong> should be avoided in patients with a history of seizures as it <strong>further increases ICP</strong> and also causes delirium and hallucinations.</p>\n<p><strong>Ketamine:</strong></p>\n<ul>\n<li>Ketamine should be avoided in patients with a history of seizures.</li>\n<li>Increases brain oxygen consumption and metabolic rate, intracranial tension is highly raised.</li>\n<li>Hallucination is the most common side effect of ketamine.</li>\n<li>Emergence reaction (vivid dreaming, illusion etc)</li>\n</ul>\n<p><strong>Thiopentone:</strong></p>\n<ul>\n<li>Agent of choice for cerebral protection</li>\n<li>Anticonvulsant action due to the phenyl group</li>\n</ul>\n<p><strong>Propofol:</strong></p>\n<ul>\n<li>Decreases ICP</li>\n<li>Neuroprotective</li>\n</ul>\n<p><strong>Midazolam:</strong></p>\n<ul>\n<li>&nbsp; Used in treating seizures</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are a certified BLS provider showing your junior how to perform bag and mask ventilation on a mannequin. While applying the face mask, where would you place the fifth digit of your hand?",
    "choices": [
      {
        "id": 1,
        "text": "Bridge of the nose"
      },
      {
        "id": 2,
        "text": "The mask device"
      },
      {
        "id": 3,
        "text": "Ramus of mandible"
      },
      {
        "id": 4,
        "text": "Angle of mandible"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The fifth digit of the hand should be placed at the <strong>angle of mandible</strong> while holding a face mask.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4d4a089781de4526bad5e8a55be3978ex1280x1063.JPEG"
    ]
  },
  {
    "text": "In an intubated patient, after what duration of endotracheal intubation will you need to perform a tracheostomy?",
    "choices": [
      {
        "id": 1,
        "text": "2 hours"
      },
      {
        "id": 2,
        "text": "2 days"
      },
      {
        "id": 3,
        "text": "2 weeks"
      },
      {
        "id": 4,
        "text": "2 months"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Tracheostomy</strong> is performed in an intubated patient after <strong>2-3 weeks</strong>.</p>\n<p>This is because if an orotracheal or nasotracheal tube is left in situ for <strong>more than 2-3 weeks, </strong>it results in <strong>subglottic stenosis.</strong></p>\n<p>Hence it is ideal to replace the endotracheal tube with a <strong>cuffed tracheostomy tube.</strong></p>\n<p>If on intubation, it is perceived that the patient may require intubation for a period longer than 2 weeks, then tracheostomy can be performed soon after intubation.</p>\n<p>Tracheostomy has been found to reduce the incidence of pneumonia, the duration of mechanical ventilation, and the length of stay in hospitals for patients with major head injuries.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient has serum bilirubin of 4.9 mg/dl and serum creatinine of 5.2 mg/dl. Which of the following muscle relaxants can be used in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Vecuronium"
      },
      {
        "id": 2,
        "text": "Atracurium"
      },
      {
        "id": 3,
        "text": "Pancuronium"
      },
      {
        "id": 4,
        "text": "Rocuronium"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Atracurium</strong> can be safely used in this patient with elevated serum bilirubin and serum creatinine as it undergoes\u00a0<strong>Hofmann elimination.</strong></p>\n<p>Atracurium and cis-atracurium undergo plasma ester hydrolysis and\u00a0<strong>Hofmann elimination</strong>\u00a0at physiological pH and temperature. Hofmann elimination\u00a0is a spontaneous <strong>non-enzymatic organ-independent</strong> degradation. So, the clearance of atracurium and cis-atracurium is independent of liver or kidney function. Hence, they are the agents of choice in patients with <strong>liver disease and/or renal failure.</strong></p>\n<p>The metabolites of atracurium and cis-atracurium are monoquaternary acrylate and <strong>laudanosine</strong>.</p>\n<p>Some of the adverse effects of atracurium are hypotension, tachycardia, and allergic reactions (bronchospasm) due to a dose-dependent<strong> histamine release</strong>. On the other hand, these adverse effects are not seen with <strong>cis-atracurium</strong> and so it is <strong>preferred</strong> over the former.</p>\n<p>Pancuronium, rocuronium, and vecuronium are dependent on the liver for excretion.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Inhalational agent with most rapid induction and recovery among the given agents is",
    "choices": [
      {
        "id": 1,
        "text": "Nitrogen"
      },
      {
        "id": 2,
        "text": "Halothane"
      },
      {
        "id": 3,
        "text": "Methoxyflurane"
      },
      {
        "id": 4,
        "text": "Desflurane"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Desflurane</strong> has the <strong>most rapid induction and recovery among the given options.</strong></p>\n<p><strong>Blood gas partition coefficient/ Ostwald coefficient for blood&ndash;gas:</strong></p>\n<ul>\n<li>The coefficient is defined as the ratio of the concentration in<strong> blood</strong> to the concentration in<strong> gas </strong>that is in contact with that blood,<strong> </strong>when the <strong>partial pressure </strong>in both compartments is<strong> equal.&nbsp;</strong></li>\n<li>It is used to describe the <strong>solubility </strong>of <strong>inhaled&nbsp;</strong>general anesthetics in blood.</li>\n<li>The more soluble the inhaled anesthetic is in blood compared to in the air, the more it binds to plasma proteins in the blood and the higher the blood&ndash;gas partition coefficient.</li>\n<li>It is <strong>inversely related to induction rate</strong> i.e. agents with high blood gas partition coefficient have slow rate of induction and vice versa.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are criteria for brain death, except:",
    "choices": [
      {
        "id": 1,
        "text": "Absent deep tendon reflexes"
      },
      {
        "id": 2,
        "text": "Isoelectric EEG"
      },
      {
        "id": 3,
        "text": "Absent brainstem reflexes"
      },
      {
        "id": 4,
        "text": "Absent ventilatory effort"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>All the options are criteria for brain death, except absent deep tendon reflexes.<strong> Deep tendon reflexes</strong>/ spinal cord reflexes may be <strong>present</strong> in <strong>brain</strong> <strong>death</strong> as the spinal cord function below C1 is intact.\u00a0</p>\n<p><strong>Clinical criteria </strong>for brain death:</p>\n<ul>\n<li><strong>Coma</strong>-<strong>\u00a0</strong>Deep, unresponsiveness to noxious stimuli</li>\n<li><strong>Absent motor activity</strong>- No decerebrate or decorticate posturing</li>\n<li><strong>Absence of brainstem reflexes</strong>-<strong>\u00a0</strong>Pupillary, oculocephalic, corneal, gag reflex, etc.</li>\n<li><strong>Apnea</strong>-<strong>\u00a0</strong>Absence of spontaneous respiration at \u00a0arterial pCO<sub>2</sub>\u00a0tension of at least 50\u201360 mmHg</li>\n</ul>\n<p><strong>Confirmatory test</strong> findings (not mandatory but may assist in diagnosis)</p>\n<ul>\n<li><strong>Isoelectric electroencephalogram</strong></li>\n<li>Absence of somatosensory evoked potentials and brainstem evoked potentials\u00a0</li>\n<li>Absence of cerebral perfusion, as documented by angiographic, transcranial Doppler, or radioisotopic studies</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "At what level does the spinal cord end in adults?",
    "choices": [
      {
        "id": 1,
        "text": "L3-L4"
      },
      {
        "id": 2,
        "text": "L1-L2"
      },
      {
        "id": 3,
        "text": "T12-L1"
      },
      {
        "id": 4,
        "text": "L2-L3"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The distal termination of the spinal cord is the<strong> lower border of L1 in adults.</strong></p>\n<p>Because the spinal cord ends at L1, lower nerve roots course some distance before exiting the intervertebral foramina. These lower spinal nerves form the cauda equina.</p>\n<p><strong>Note</strong>:</p>\n<p>In children, the spinal cord ends at L3 and moves up with age.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old athlete with left apical primary spontaneous pneumothorax was posted for thoracoscopic bullectomy under anesthesia with spontaneous ventilation. Which of the following breathing circuits would be the most effective for this purpose?",
    "choices": [
      {
        "id": 1,
        "text": "Mapleson A"
      },
      {
        "id": 2,
        "text": "Mapleson B"
      },
      {
        "id": 3,
        "text": "Mapleson C"
      },
      {
        "id": 4,
        "text": "Mapleson D"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Mapleson's A </strong>or<strong> Magill circuit&nbsp;</strong>is the&nbsp;circuit of choice for <strong>spontaneous ventilation</strong>.</p>\n<p>Modified co-axial variety of Type A - <strong>Lack's circuit.</strong></p>\n<p><strong>SMAL - For Spontaneous, Magill's circuit, Mapleson's Type A, Lack's co-axial circuit</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The maximum oxygen delivered by a nasal cannula is?",
    "choices": [
      {
        "id": 1,
        "text": "20%"
      },
      {
        "id": 2,
        "text": "60%"
      },
      {
        "id": 3,
        "text": "40%"
      },
      {
        "id": 4,
        "text": "100%"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The maximum oxygen delivered by a nasal cannula is 40%.</p>\n<p><strong>The nasal cannula </strong>is a<strong> low flow variable</strong> <strong>performance</strong> oxygen delivery system that can provide a maximum inspired oxygen concentration of <strong>40%</strong> at flow rates greater than 10 L/ min for short periods. It is usually limited to a <strong>flow of 5-6 L/min</strong> to reduce the discomfort resulting from inadequate humidification and high flow into the nasal cavity. It may also cause&nbsp;drying and crusting of the nasal mucosa.</p>\n<p>Oxygen delivery devices can be broadly divided into low flow oxygen devices (eg: nasal cannula, simple face mask, non-rebreathing mask) and high flow oxygen devices (eg: venturi mask).</p>\n<table width=\"620\">\n<tbody>\n<tr>\n<td><strong>Oxygen delivery devices</strong></td>\n<td><strong>Flow rate (liter/min)&nbsp;</strong></td>\n<td><strong>Approximate FiO2</strong></td>\n</tr>\n<tr>\n<td>Nasal cannula&nbsp;</td>\n<td>1-6&nbsp;</td>\n<td>0.24-0.44&nbsp;</td>\n</tr>\n<tr>\n<td>Simple face mask&nbsp;</td>\n<td>6-10</td>\n<td>0.40-0.60</td>\n</tr>\n<tr>\n<td>Non-rebreathing mask</td>\n<td>10-15</td>\n<td>0.90-1.00&nbsp;</td>\n</tr>\n<tr>\n<td>Venturi mask&nbsp;</td>\n<td>2-15&nbsp;</td>\n<td>0.24-0.60</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old woman was taken up for a cesarean section. Following the administration of spinal anaesthesia, she suddenly developed hypotension.  Which of the following would be the vasopressor of choice for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Dopamine"
      },
      {
        "id": 2,
        "text": "Adrenaline"
      },
      {
        "id": 3,
        "text": "Ephedrine"
      },
      {
        "id": 4,
        "text": "Phenylephrine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p style=\"text-align: justify;\"><strong>Phenylephrine</strong> is the vasopressor of choice to manage <strong>hypotension </strong>caused by spinal anaesthesia in <strong>pregnancy.</strong></p>\n<p style=\"text-align: justify;\">Phenylephrine produces lesser fetal acidosis and has lesser fetal transfer than <strong>ephedrine.&nbsp;</strong>Ephedrine was recommended in the past; however, its use has declined since it is associated with <strong>fetal acidosis</strong> and <strong>base deficit</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following intravenous anesthetics can be used to reduce postoperative pain?",
    "choices": [
      {
        "id": 1,
        "text": "Thiopentone"
      },
      {
        "id": 2,
        "text": "Propofol"
      },
      {
        "id": 3,
        "text": "Ketamine"
      },
      {
        "id": 4,
        "text": "Etomidate"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Ketamine </strong>can be used to reduce postoperative pain as it&nbsp;produces profound<strong> analgesia.</strong></p>\n<p>It <strong>inhibits</strong> nociceptive central hypersensitization.</p>\n<p>Besides, ketamine may be effective in the treatment of:</p>\n<ul>\n<li>cancer pain, visceral pain</li>\n<li>migraine, chronic neuropathic pain</li>\n<li>phantom limb pain</li>\n<li>fibromyalgia, complex regional pain syndrome</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following inhalational agents is suitable for neurosurgery?",
    "choices": [
      {
        "id": 1,
        "text": "Halothane"
      },
      {
        "id": 2,
        "text": "Isoflurane"
      },
      {
        "id": 3,
        "text": "Nitrous oxide"
      },
      {
        "id": 4,
        "text": "Ether"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Among the given options, <strong>isoflurane</strong> is best suited for neurosurgery.</p>\n<p>All of the inhalational anesthetics are<strong> cerebral vasodilators</strong>. The order of vasodilating potency is:</p>\n<p>halothane &gt; enflurane &gt; desflurane &gt;&nbsp;<strong>isoflurane </strong>&gt;&nbsp;sevoflurane.&nbsp;</p>\n<p><strong>Note: </strong>Due to its lesser vasodilating property,&nbsp;<strong>sevoflurane</strong> is preferred to isoflurane for neurosurgery.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient who is under general anaesthesia shows the following finding on the ET CO2 monitor. Which condition can lead to this characteristic waveform on capnography?",
    "choices": [
      {
        "id": 1,
        "text": "Malignant hyperthermia"
      },
      {
        "id": 2,
        "text": "Bronchospasm"
      },
      {
        "id": 3,
        "text": "Rebreathing"
      },
      {
        "id": 4,
        "text": "Accidental extubation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above capnographic waveform depicts <strong>bronchospasm</strong>.&nbsp;</p>\n<p><strong>Shark fin appearance</strong> - Prolonged phase II, increased &alpha; angle, and steeper phase III suggest bronchospasm or airway obstruction.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/87a39eea1bc445edb2829a538298c6bd.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "In which of the following devices is Murphy's eye seen?",
    "choices": [
      {
        "id": 1,
        "text": "Nasopharyngeal airway"
      },
      {
        "id": 2,
        "text": "Laryngoscope"
      },
      {
        "id": 3,
        "text": "Bronchoscope"
      },
      {
        "id": 4,
        "text": "Endotracheal tube"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Murphy's eye is seen in the <strong>endotracheal tube (ETT).</strong></p>\n<p><strong>Murphy's eye</strong> refers to the <strong>distal opening</strong> in the side wall of the ETT<strong>.</strong></p>\n<p>If the distal end of the lumen of the tube is blocked by secretions, Murphy's eye serves to provide <strong>an alternate route for ventilation.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3ca9b5f3a06f4027b9626096e9c988f7x1280x1026.JPEG"
    ]
  }
];
        let quizName = 'Anesthesia Test';
        const quizFilename = 'anesthesia-test-1b022fad.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2020 - 21"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>