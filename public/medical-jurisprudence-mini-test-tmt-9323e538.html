<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Jurisprudence Mini Test - -Tmt - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2024-25
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following statements is not true about criminal negligence?",
    "choices": [
      {
        "id": 1,
        "text": "Contributory negligence constitutes as a defense"
      },
      {
        "id": 2,
        "text": "A case between the state and the accused doctor"
      },
      {
        "id": 3,
        "text": "Accused doctor is liable to punishment with imprisonment or fine or both"
      },
      {
        "id": 4,
        "text": "Even the risk of injury is punishable, even if nobody is hurt"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Contributory negligence can be cited as a defense in <strong>civil negligence\u00a0</strong>and <strong>not in criminal negligence</strong> cases.</p>\n<p><strong>Contributory negligence</strong> is used to describe the <strong>plaintiff's contribution</strong> towards the <strong>damage</strong> <strong>caused</strong> by the negligent act of the <strong>accused doctor</strong> (defendant). In such a case, the accused doctor must prove that the plaintiff neglected to take sufficient care of his own health and safety, which in turn contributed to their suffering.\u00a0\u00a0</p>\n<table style=\"height: 134px; width: 435px; border-color: #000000;\">\n<tbody>\n<tr style=\"height: 18px;\">\n<td style=\"width: 101.146px; height: 18px; text-align: center;\"><strong>\u00a0Factor</strong></td>\n<td style=\"width: 130.208px; height: 18px; text-align: center;\"><strong>Civil negligence\u202f</strong></td>\n<td style=\"width: 161.983px; height: 18px; text-align: center;\"><strong>Criminal negligence\u202f</strong></td>\n</tr>\n<tr style=\"height: 91px;\">\n<td style=\"width: 101.146px; height: 91px;\"><strong>Negligence\u202f</strong></td>\n<td style=\"width: 130.208px; height: 91px;\">Lack of competent care and skill in the professional behavior</td>\n<td style=\"width: 161.983px; height: 91px;\"><strong>Gross carelessness </strong>and lack of regard for patient's welfare</td>\n</tr>\n<tr style=\"height: 79px;\">\n<td style=\"width: 101.146px; height: 79px;\"><strong>Contributory Negligence</strong></td>\n<td style=\"width: 130.208px; height: 79px;\">It may be cited as a defense for the doctor</td>\n<td style=\"width: 161.983px; height: 79px;\"><strong>Does not constitute </strong>a <strong>defense </strong>for the doctor</td>\n</tr>\n<tr style=\"height: 55px;\">\n<td style=\"width: 101.146px; height: 55px;\"><strong>Litigation\u202f</strong></td>\n<td style=\"width: 130.208px; height: 55px;\">Between two parties\u202f\u00a0</td>\n<td style=\"width: 161.983px; height: 55px;\"><strong>Between state</strong> and <strong>doctor\u202f\u00a0</strong>(option B)</td>\n</tr>\n<tr style=\"height: 55px;\">\n<td style=\"width: 101.146px; height: 55px;\"><strong>Criteria for punishment\u00a0</strong></td>\n<td style=\"width: 130.208px; height: 55px;\">No action if the act has not resulted in harm/damage</td>\n<td style=\"width: 161.983px; height: 55px;\"><strong>Bare negligence </strong>with <strong>risk of injury </strong>is<strong> punishable, </strong>despite nobody being hurt (option D)</td>\n</tr>\n<tr style=\"height: 40px;\">\n<td style=\"width: 101.146px; height: 40px;\"><strong>Trial by</strong></td>\n<td style=\"width: 130.208px; height: 40px;\">Civil court\u202f\u00a0</td>\n<td style=\"width: 161.983px; height: 40px;\">Criminal court\u202f\u00a0</td>\n</tr>\n<tr style=\"height: 56px;\">\n<td style=\"width: 101.146px; height: 56px;\"><strong><span class=\"TextRun SCXW200823556\" lang=\"EN-GB\" xml:lang=\"EN-GB\"><span class=\"NormalTextRun SCXW200823556\">Evidence\u202f</span></span><span class=\"TextRun SCXW200823556\" lang=\"EN-IN\" xml:lang=\"EN-IN\"><span class=\"NormalTextRun SCXW200823556\">\u202f</span></span><span class=\"EOP SCXW200823556\" data-ccp-props=\"{&quot;201341983&quot;:0,&quot;335559739&quot;:200,&quot;335559740&quot;:276}\">\u00a0</span></strong></td>\n<td style=\"width: 130.208px; height: 56px;\">Strong evidence is sufficient\u202f\u202f\u00a0</td>\n<td style=\"width: 161.983px; height: 56px;\">Guilt must be proved beyond reasonable doubt\u202f\u00a0</td>\n</tr>\n<tr style=\"height: 49px;\">\n<td style=\"width: 101.146px; height: 49px;\"><strong>Punishment\u202f\u202f</strong></td>\n<td style=\"width: 130.208px; height: 49px;\">Liable to pay damages</td>\n<td style=\"width: 161.983px; height: 49px;\"><strong>Imprisonment\u202f</strong>\u202for <strong>fine</strong> or both (option B)</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "If a question of negligence against a doctor has already been decided by a Court in a dispute between the doctor and his patient, the patient will not be allowed to contest the same question based on the same set of facts. This is known as:",
    "choices": [
      {
        "id": 1,
        "text": "Res ipsa loquitur"
      },
      {
        "id": 2,
        "text": "Res judicata"
      },
      {
        "id": 3,
        "text": "Res indicata"
      },
      {
        "id": 4,
        "text": "Limitation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>If a question of negligence against a doctor has already been decided by a Court in a dispute between the doctor and his patient, the patient will not be allowed to contest the same question <strong>based on the same set</strong> <strong>of facts</strong> and this is known as <strong>Res Judicata.</strong></p>\n<p><strong>Defences Against Negligence</strong></p>\n<ul>\n<li>No duty is owed to the plaintiff</li>\n<li>Duty discharged according to prevailing standards</li>\n<li>Error of judgment</li>\n<li>Contributory negligence - the absence of ordinary care on the part of the patient or his personal attendant</li>\n<li>Res judicata<strong>\u00a0</strong>(<strong>Section 337, BNSS</strong>) -If a question of negligence against a doctor has already been decided by a Court in a dispute between the doctor and his patient, the patient will not be allowed to contest the same question<strong> based on the same set of facts</strong>.</li>\n</ul>\n<p>Other options:</p>\n<p>Option A: '<strong>Res Ipsa Loquitor</strong>' means '<strong>the thing or fact speaks for itself</strong>'. It is obvious evidence of the negligent act committed. For example, swabs left in the abdominal cavity post laparotomy.</p>\n<p>Option C &amp; D: <strong>Limitation</strong>\u00a0(<strong>Res indicata</strong>)- A suit for damages for negligence should be filed against the doctor within two years from the date of alleged negligence. A suit <strong>filed after two years will be dismissed</strong>. But, where a breach of duty to provide care as per a particular contract between a patient and a doctor is committed, legal action can be initiated <strong>up to three years</strong> from the date of alleged negligence.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "First Class judicial magistrate may pass a maximum sentence of _______.",
    "choices": [
      {
        "id": 1,
        "text": "Imprisonment upto 1 year and fine of Rs 10,000"
      },
      {
        "id": 2,
        "text": "Imprisonment upto 3 years and a fine of Rs 50,000"
      },
      {
        "id": 3,
        "text": "Imprisonment upto 7 years and unlimited fine"
      },
      {
        "id": 4,
        "text": "Death sentence but it must be confirmed by high court"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The maximum sentence that a Judicial Magistrate of the First Class may pass is <strong>imprisonment up to</strong> <strong>3 years</strong> and a<strong> fine of Rs 50,000.</strong></p>\n<table>\n<tbody>\n<tr>\n<td><strong>Class of magistrate</strong></td>\n<td><strong>Imprisonment</strong></td>\n<td><strong>Fine </strong></td>\n</tr>\n<tr>\n<td>Chief judicial magistrate</td>\n<td>Upto 7 years</td>\n<td>unlimited</td>\n</tr>\n<tr>\n<td>1<sup>st</sup> class judicial magistrate</td>\n<td>Upto 3 years</td>\n<td>50,000 Rs</td>\n</tr>\n<tr>\n<td>2<sup>nd</sup> class judicial magistrate</td>\n<td>Upto 1 year</td>\n<td>10,000 Rs</td>\n</tr>\n</tbody>\n</table>\n<p><br />The maximum sentence that a<strong> District and Sessions Judge (DSJ</strong>) may pass is a <strong>Death sentence, </strong>but it must be confirmed by the High Court.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which sections of BNS deal with punishment for murder by an ordinary person and punishment for murder by a life convict, respectively?",
    "choices": [
      {
        "id": 1,
        "text": "Sec 102, Sec 103(1)"
      },
      {
        "id": 2,
        "text": "Sec 103(1), Sec 105"
      },
      {
        "id": 3,
        "text": "Sec 103(1), Sec 104"
      },
      {
        "id": 4,
        "text": "Sec 104, Sec 105"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Punishment for murder by an <strong>ordinary</strong> person is defined under Section <strong>103(1)</strong> of BNS (or Section <strong>302</strong> IPC).</p>\n<p>Punishment for murder by a <strong>life convict</strong> is defined under Section <strong>104</strong> of the BNS (or Section <strong>303</strong> IPC).</p>\n<p>Offences affecting life are given in the table below.</p>\n<table style=\"width: 408px;\">\n<tbody>\n<tr>\n<td style=\"width: 57.1236px; text-align: center;\">\n<p><strong>BNS section</strong></p>\n</td>\n<td style=\"width: 61.8494px; text-align: center;\">\n<p><strong>IPC section</strong></p>\n</td>\n<td style=\"width: 246.993px; text-align: center;\">\n<p><strong>Deals with</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57.1236px;\">\n<p>100</p>\n</td>\n<td style=\"width: 61.8494px;\">\n<p>299</p>\n</td>\n<td style=\"width: 246.993px;\">\n<p>Culpable homicide (amounting to murder)</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57.1236px;\">\n<p>101</p>\n</td>\n<td style=\"width: 61.8494px;\">\n<p>300</p>\n</td>\n<td style=\"width: 246.993px;\">\n<p>Murder\u00a0</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57.1236px;\">\n<p>102</p>\n</td>\n<td style=\"width: 61.8494px;\">\n<p>301</p>\n</td>\n<td style=\"width: 246.993px;\">\n<p>Culpable homicide by causing the death of a person\u00a0other than the person whose death was intended</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57.1236px;\">\n<p><strong>103(1)</strong></p>\n</td>\n<td style=\"width: 61.8494px;\">\n<p><strong>302</strong></p>\n</td>\n<td style=\"width: 246.993px;\">\n<p>Punishment for murder</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57.1236px;\">\n<p><strong>103(2)</strong></p>\n</td>\n<td style=\"width: 61.8494px;\">\n<p><strong>(new addition)</strong></p>\n</td>\n<td style=\"width: 246.993px;\">\n<p>When a group of five or more persons murders on the<br />ground of race, caste or community, sex, place of birth, language, or personal belief, each member shall be punished with death or with<br />imprisonment for life, and shall also be liable to fine</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57.1236px;\">\n<p><strong>104</strong></p>\n</td>\n<td style=\"width: 61.8494px;\">\n<p><strong>303 </strong></p>\n</td>\n<td style=\"width: 246.993px;\">\n<p>Punishment for murder by life convict (life imprisonment, or death sentence)</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57.1236px;\">\n<p>105</p>\n</td>\n<td style=\"width: 61.8494px;\">\n<p>304</p>\n</td>\n<td style=\"width: 246.993px;\">\n<p>Punishment for culpable homicide not amounting to murder</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57.1236px;\">\n<p>106(1)</p>\n</td>\n<td style=\"width: 61.8494px;\">\n<p>304A</p>\n</td>\n<td style=\"width: 246.993px;\">\n<p>Causing death by negligence</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57.1236px;\">\n<p>80</p>\n</td>\n<td style=\"width: 61.8494px;\">\n<p>304B</p>\n</td>\n<td style=\"width: 246.993px;\">\n<p>Dowry death</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57.1236px;\">\n<p>107</p>\n</td>\n<td style=\"width: 61.8494px;\">\n<p>305</p>\n</td>\n<td style=\"width: 246.993px;\">\n<p>Abetment of suicide of child or person of unsound mind</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57.1236px;\">\n<p>108</p>\n</td>\n<td style=\"width: 61.8494px;\">\n<p>306</p>\n</td>\n<td style=\"width: 246.993px;\">\n<p>Abetment of suicide</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57.1236px;\">\n<p>109</p>\n</td>\n<td style=\"width: 61.8494px;\">\n<p>307</p>\n</td>\n<td style=\"width: 246.993px;\">\n<p>Attempt to Murder</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements about summons is false?",
    "choices": [
      {
        "id": 1,
        "text": "Conduct money is offered to the witness irrespective of type of case"
      },
      {
        "id": 2,
        "text": "It is a document compelling the attendance of  witness in the court"
      },
      {
        "id": 3,
        "text": "Criminal courts have priority over civil courts"
      },
      {
        "id": 4,
        "text": "208 BNS deals with punishment for non-attendance"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Conduct <strong>money</strong> is <strong>provided</strong> only in <strong>civil cases.</strong></p>\n<p><strong>Conduct money </strong>is the fee paid to the witness at the time of serving summons. This is provided in <strong>civil cases</strong> to meet the expenses for attending the court. In <strong>criminal cases, no fee</strong> is <strong>paid</strong> to the witness at the time of serving the summons. However, in criminal cases, conveyance charges and daily allowance can be claimed by the doctor according to Government rules.\u00a0</p>\n<p><strong>Summons</strong></p>\n<p>A summons is a document compelling the attendance of a witness in a Court of law under penalty, on a particular day, time, and for the purpose of giving evidence. <strong>(Option B)</strong></p>\n<p><strong>Priority of summons</strong></p>\n<table style=\"border-collapse: collapse; width: 44.861%; height: 171px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 50.042%;\"><strong>Courts</strong></td>\n<td style=\"width: 50.042%;\"><strong>Priority</strong></td>\n</tr>\n<tr>\n<td style=\"width: 50.042%;\">Higher courts vs lower courts</td>\n<td style=\"width: 50.042%;\">Higher courts</td>\n</tr>\n<tr>\n<td style=\"width: 50.042%;\">Criminal courts vs civil courts</td>\n<td style=\"width: 50.042%;\">Criminal courts <strong>(Option C)</strong></td>\n</tr>\n<tr>\n<td style=\"width: 50.042%;\">Courts of equal status</td>\n<td style=\"width: 50.042%;\">The court from which the summons was first received</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Common IPC Sections dealing with summons include:</strong></p>\n<table style=\"height: 316px; width: 34.1198%;\">\n<tbody>\n<tr>\n<td style=\"width: 19.4667%;\">\n<p><strong>IPC Section</strong></p>\n</td>\n<td style=\"width: 27.4475%;\">\n<p><strong>BNS Section\u00a0</strong></p>\n</td>\n<td style=\"width: 53.0858%;\">\n<p><strong>Deals with</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 19.4667%;\">\n<p>172</p>\n</td>\n<td style=\"width: 27.4475%;\">\n<p>206</p>\n</td>\n<td style=\"width: 53.0858%;\">\n<p>Absconding to avoid service of summons or other proceedings</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 19.4667%;\">\n<p><strong>174</strong></p>\n</td>\n<td style=\"width: 27.4475%;\">\n<p><strong>208</strong></p>\n</td>\n<td style=\"width: 53.0858%;\">\n<p>Non-attendance in obedience to an order from a public servant <strong>(Option D)</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 19.4667%;\">\n<p>176</p>\n</td>\n<td style=\"width: 27.4475%;\">\n<p>211</p>\n</td>\n<td style=\"width: 53.0858%;\">\n<p>Omission to give notice/ information to public servant by a person legally bound to give it</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 19.4667%;\">\n<p>177</p>\n</td>\n<td style=\"width: 27.4475%;\">\n<p>212</p>\n</td>\n<td style=\"width: 53.0858%;\">\n<p>Furnishing false information</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Note:\u00a0</p>\n<p>Under BNS section 206, the upper limit of the fines is increased from five hundred to five thousand rupees and one.</p>\n<p>Under BNS section 211, the upper limit of fines is increased from five hundred to five thousand rupees and one thousand to ten thousand rupees.</p>\n<p>Under BNS section 212, the upper limit of the fine has been increased from one thousand to five thousand rupees.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A police sub-inspector brings the accused in a rape case to a doctor and requests a medical examination. He believes that examination findings would yield evidence to prove the offense allegedly committed. However, the accused is not cooperative. Under which section of BNSS (CrPC) can the doctor examine the accused?",
    "choices": [
      {
        "id": 1,
        "text": "Section 337 BNSS (300 CrPC)"
      },
      {
        "id": 2,
        "text": "Section 184 BNSS (164A CrPC)"
      },
      {
        "id": 3,
        "text": "Section 52 BNSS (53 A CrPC)"
      },
      {
        "id": 4,
        "text": "Section 53 BNSS (54 CrPC)"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The doctor can <strong>examine the</strong> <strong>accused</strong>\u00a0using force under section <strong>52 BNSS</strong> (Section 53 CrPC)<strong> </strong>as\u00a0requested by<strong>\u00a0</strong>the<strong> sub-inspector</strong>.</p>\n<p><strong>Section 52 BNSS </strong>(Section 53-A CrPC) states that when a person is arrested for <strong>rape</strong> or <strong>attempted rape</strong>, and there is a reasonable belief that examining their body could provide evidence of the crime, a <strong>registered medical practitioner </strong>(RMP) employed by a government or local authority hospital is permitted to conduct the examination. If such a practitioner is <strong>not available</strong> within a <strong>16-kilometre radius</strong> of the crime scene, any other RMP can perform the examination at the request of a police officer. The practitioner, along with anyone assisting them in good faith and under their direction, is allowed to use necessary and reasonable force to carry out the examination.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You got a call from your close friend saying that he is sick and needs a medical certificate for taking leave from his job. He then emerged as a leading suspect in a murder case that took place on the day you gave him the certificate. Under which BNS section will you be charged in this case?",
    "choices": [
      {
        "id": 1,
        "text": "227"
      },
      {
        "id": 2,
        "text": "229"
      },
      {
        "id": 3,
        "text": "234"
      },
      {
        "id": 4,
        "text": "238"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Issuing or signing a false certificate is punishable under <strong>Section 234 of the BNS</strong>.</p>\n<p>The sections related to false evidence are as follows:</p>\n<table style=\"border-collapse: collapse; width: 44.0109%; height: 282.18px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 32.4042%; text-align: center;\">\n<p><strong>Definition</strong></p>\n</td>\n<td style=\"width: 34.3206%; text-align: center;\"><strong>BNS</strong></td>\n<td style=\"width: 33.2753%; text-align: center;\"><strong>IPC</strong></td>\n</tr>\n<tr style=\"height: 64.75px;\">\n<td style=\"width: 32.4042%; height: 64.75px;\">\n<p>Perjury</p>\n</td>\n<td style=\"width: 34.3206%; height: 64.75px;\">227</td>\n<td style=\"width: 33.2753%; height: 64.75px;\"><br />191</td>\n</tr>\n<tr style=\"height: 72.4688px;\">\n<td style=\"width: 32.4042%; height: 72.4688px;\">Fabricating false evidence</td>\n<td style=\"width: 34.3206%; height: 72.4688px;\">228</td>\n<td style=\"width: 33.2753%; height: 72.4688px;\">192</td>\n</tr>\n<tr style=\"height: 72.4688px;\">\n<td style=\"width: 32.4042%; height: 72.4688px;\">Punishment for perjury</td>\n<td style=\"width: 34.3206%; height: 72.4688px;\">229</td>\n<td style=\"width: 33.2753%; height: 72.4688px;\">193</td>\n</tr>\n<tr style=\"height: 72.4922px;\">\n<td style=\"width: 32.4042%; height: 72.4922px;\">Issuing False certificates</td>\n<td style=\"width: 34.3206%; height: 72.4922px;\">234</td>\n<td style=\"width: 33.2753%; height: 72.4922px;\">197</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An unidentified woman was rescued from a building collapse with her leg developing signs of gangrene. The trauma surgeon decided to conduct an above-knee amputation without her consent, considering the risk of sepsis. According to which section of the BNS is this not considered an offense?",
    "choices": [
      {
        "id": 1,
        "text": "25"
      },
      {
        "id": 2,
        "text": "27"
      },
      {
        "id": 3,
        "text": "28"
      },
      {
        "id": 4,
        "text": "30"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The emergency amputation performed by the surgeon is an <strong>act done in good faith</strong> for the benefit of a patient when obtaining consent is not possible. This is not an offense according to <strong>section 30</strong> of the <strong>BNS</strong>.</p>\n<p>Section 30 of the BNS states that an act done in good faith for the benefit of a person <strong>without consent </strong>is<strong> not punishable</strong> when the circumstances don't allow obtaining consent in time for the act of benefit.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Section 25</strong> of the BNS: Acts done <strong>with consent</strong> that are <strong>not intended </strong>or expected <strong>to cause death or grievous hurt</strong> are not considered offense.</p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Option B: <strong>Section 27</strong> of the BNS: An action performed in <strong>good faith </strong>for the <strong>benefit </strong>of a child under 12 years of age or a person with a mental illness, <strong>with the consent</strong> of a parent or guardian, is not considered an offense.</span></p>\n<p>Option D: <strong>Section 28</strong> of the BNS: <strong>Consent</strong> is considered <strong>invalid </strong>if given <strong>under misconception or fear</strong>, or when given by a person<strong> </strong>of <strong>unsound mind</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following will not be seen in a well-executed judicial hanging?",
    "choices": [
      {
        "id": 1,
        "text": "Irreversible apnea"
      },
      {
        "id": 2,
        "text": "Asphyxial signs"
      },
      {
        "id": 3,
        "text": "Irreversible loss of consciousness"
      },
      {
        "id": 4,
        "text": "Destruction of the reticular formation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A well-executed judicial hanging will not exhibit<strong> asphyxial signs.</strong></p>\n<p>The legal death sentence in India is carried out by <strong>hanging</strong> the criminal. <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">The face of the person is covered with a dark mask and he is made to stand on a platform over trapdoors, which open downwards when a blot is drawn.</span></p>\n<div class=\"ng-star-inserted\">\n<div class=\"table-responsive font-weight-light answer-scroll answer-html ng-star-inserted\">\n<p>The rope is looped around the neck with the knot under the<strong> angle of the right jaw</strong> and the person is allowed to drop for <strong>5-7 meters </strong>according to weight, age, and build of the person.</p>\n<p>Sudden stopage of the moving body causes <strong>fracture dislocation</strong> usually at the<strong> C2-C3 </strong>or<strong> C3-C4 </strong>vertebra level. Bilateral fractures of either the pedicles or laminae of the arch of the second, third or fourth cervical vertebrae occurs <strong>(hangman's fracture)&nbsp;</strong></p>\n<p>With proper judicial hanging, the <strong>brain stem ruptures </strong>between the pons and the medulla, destroying the <strong>reticular formation</strong> and resulting in an <strong>irreversible loss of consciousness.</strong> Destruction of respiratory centres also results in<strong> irreversible apnea.</strong></p>\n<p>Death is <strong>instantaneous</strong> but heartbeat may continue for 15-20 minutes and spasmodic muscle jerking may occur for a considerable time. <strong>Asphyxial signs </strong>are not seen in properly performed judicial hangings.</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the minimum punishment for gang rape of a minor?",
    "choices": [
      {
        "id": 1,
        "text": "10 years"
      },
      {
        "id": 2,
        "text": "20 years"
      },
      {
        "id": 3,
        "text": "Life imprisonment"
      },
      {
        "id": 4,
        "text": "Death"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Under <strong>Section 70(2) of the BNS</strong>, gang rape of a woman under 18 years of age is punishable with a minimum of life imprisonment, i.e., imprisonment for the remainder of that person\u2019s natural life, with a fine, and can be increased up to a death sentence.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 52-year-old man commits a crime and is under trial. His lawyer presents a medical certificate for the man, stating that he has had schizophrenia for the past 30 years. This person will not be held guilty under which Bhartiya Nyaya Sanhita (BNS) section?",
    "choices": [
      {
        "id": 1,
        "text": "21"
      },
      {
        "id": 2,
        "text": "22"
      },
      {
        "id": 3,
        "text": "23"
      },
      {
        "id": 4,
        "text": "24"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given scenario of a person with a history of schizophrenia will not be held guilty under <strong>BNS (Bhartiya Nyaya Sanhita) Section 22</strong>. The law<strong> </strong>states that an act of a person of an unsound mind (schizophrenia in this case) is not liable for punishment or prosecution.</p>\n<p>Other options:</p>\n<p>Option A: BNS - Section<strong> 21</strong> states that a child of 7\u201312 years without proper mental maturity is not liable for the act.</p>\n<p>Option C: BNS - Section<strong> 23</strong> states that a person who commits an offense under involuntary intoxication is not liable for the act.</p>\n<p>Option D: BNS - Section <strong>24</strong> states that a person who commits an offense under voluntary intoxication is liable for the act.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Section 90 of the BNS deals with ____",
    "choices": [
      {
        "id": 1,
        "text": "Causing miscarriage with the consent of the mother"
      },
      {
        "id": 2,
        "text": "Causing miscarriage without the consent of the mother"
      },
      {
        "id": 3,
        "text": "Death of the mother by an act done with intent to cause miscarriage"
      },
      {
        "id": 4,
        "text": "Causing the death of the quick unborn child by an act amounting to culpable homicide"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Section 90</strong> of the BNS deals with the <strong>death of the mother</strong> caused by an act done with<strong> intent to cause miscarriage</strong>.</p>\n<p><strong>Section 90(1)</strong> of BNS, states that if the woman dies because of a miscarriage, which is done <strong>with her consent</strong> shall be punished with imprisonment of either description for a term that may extend to ten years and shall also be liable to a fine.</p>\n<p><strong>Section 90(2)</strong> of BNS, states that when a miscarriage leading to the death of the woman is done <strong>without the consent</strong> of the woman, it shall be punishable either with imprisonment for life or with the punishment specified in the sub-section (1).</p>\n<p>Related sections:</p>\n<ul>\n<li><strong>Section</strong> <strong>88</strong> of BNS states that <strong>miscarriage induced</strong> <strong>not for the purpose of saving the life/good of the woman</strong>, be punished with imprisonment for 3 years. If the woman is \u201cquick with child\u201d the period is extended for 7 years more. (Option A)</li>\n<li><strong>Section 89</strong> of BNS, states that if <strong>miscarriage</strong> is done <strong>without the consent</strong> of the woman, the punishment is life imprisonment (Option B)</li>\n<li><strong>Section</strong> <strong>92</strong> of BNS, states that an act leading to the death of a quick unborn child, done with the intention of preventing a child from being born alive, is guilty of culpable homicide and shall be punished with imprisonment of either description for a term that may extend to ten years and shall also be liable to a fine. (Option D)</li>\n<li><strong>Section</strong> <strong>93</strong> of BNS, exposure or <strong>abandoning children</strong> are both punishable.</li>\n<li><strong>Section</strong> <strong>94</strong> of BNS \u2013 <strong>concealment</strong> of birth and secret disposal of the fetus are punishable.</li>\n</ul>\n<p>Note- The phrase \u201cquick with child\u201d refers to advanced pregnancy when quickening can be felt.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The mental ability of a person to make a valid will is known as _______________.",
    "choices": [
      {
        "id": 1,
        "text": "Mens rea"
      },
      {
        "id": 2,
        "text": "Corpus delicti"
      },
      {
        "id": 3,
        "text": "Testamentary capacity"
      },
      {
        "id": 4,
        "text": "Compos Menti"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The mental ability of a person to make a will is called <strong>testamentary capacity (testament = will).</strong></p>\n<p>A valid will is a written, duly signed, and witnessed document. At the time of making the will, the testator must be <strong>major</strong> and of <strong>sound disposing mind</strong> such that he can dispose of his property with understanding and reason.</p>\n<p>A person affected by <strong>delusions</strong> can make a will if the delusion is not related in any way to the disposal of property or the persons affected. During the period of <strong>lucid interval,</strong> a mentally ill person can make a valid will.</p>\n<p>The testator appoints an <strong>executor</strong> to carry out the terms of his will after his death.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Mens rea</strong> (guilty mind) in criminal law refers to the state of mind of a defendant who is accused of committing a crime. <strong>Actus reus</strong> refers to the actual physical act causing death.</p>\n<p>Option B: <strong>Corpus delicti</strong>, also known as the<strong> body of offence</strong>, says that a crime must be proved to have occurred before a person can be convicted of committing that crime.</p>\n<p>Option D: <strong>Compos mentis-</strong> Before documenting a <strong>dying declaration,</strong> the doctor has to ascertain that the person is <strong>conscious</strong> and of <strong>sound mind</strong> with <strong>normal mental faculties</strong>\u00a0(compos mentis).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In the recently passed law for replacing the colonial legal sections, which of the following is the replacement of the Indian Evidence Act (IEA)?",
    "choices": [
      {
        "id": 1,
        "text": "Bhartiya Nyaya Sanhita"
      },
      {
        "id": 2,
        "text": "Bharatiya Nagarik Suraksha Sanhita"
      },
      {
        "id": 3,
        "text": "Bharatiya Sakshya Adhiniyam"
      },
      {
        "id": 4,
        "text": "Bhartiya Nagarik Sakshya Sanhita"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the recent change in legal sections, the Indian Evidence Act (IEA) has been replaced by <strong>Bharatiya Sakshya Adhiniyam</strong> (BSA).</p>\n<p>Other options:</p>\n<p>Option A: <strong>Bharatiya Nyaya Sanhita</strong> is the official criminal code in the Republic of India. It took effect on July 1, 2024, replacing the Indian Penal Code after being passed by the parliament in December 2023.</p>\n<p>Option B: <strong>Bharatiya Nagarik Suraksha Sanhita</strong> is the main legislation in India for administering substantive criminal law and aims to consolidate and amend the law relating to Criminal Procedure.</p>\n<p>Option D: Bhartiya Nagarik Sakshya Sanhita is a redundant option since such a law does not exist in our constitution.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A person is not exempt from criminal responsibility when he commits a crime in which of the following states?",
    "choices": [
      {
        "id": 1,
        "text": "Voluntary drunkenness"
      },
      {
        "id": 2,
        "text": "Somnambulism"
      },
      {
        "id": 3,
        "text": "Delirium tremens"
      },
      {
        "id": 4,
        "text": "Oneroid state"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The person is <strong>not exempt from criminal responsibility</strong> when he commits a crime during<strong> voluntary drunkenness.</strong></p>\n<p>The person is not criminally responsible during the following conditions</p>\n<ul>\n<li><strong>Somnambulism </strong>(Option B) also known as sleepwalking, is when people get up and walk around while asleep.</li>\n<li>Somolentia</li>\n<li><strong>Delirium tremens </strong>(Option C)<strong> </strong>- It is a severe form of alcohol withdrawal. It involves sudden and severe mental or nervous system changes.</li>\n<li><strong>Involuntary drunkenness</strong></li>\n<li>Post-traumatic automatism</li>\n<li><strong>Oneroid state </strong>(Option D)<strong> </strong>- A dream-like fantastic delusional derangement of consciousness, is characterized by a kaleidoscopic quality of psychopathological experiences, wherein reality, illusions and hallucinations are merged into one. It is typically accompanied by motor and, in particular, catatonic disturbances.</li>\n<li>Twilight state</li>\n</ul>\n<p>The tests to determine criminal responsibility include:</p>\n<ul>\n<li>McNaughten's rule (included in Sec. 84 of IPC)</li>\n<li>Durham rule</li>\n<li>Curren\u2019s rule</li>\n<li>The Irresistible Impulse Test (New Hampshire Doctrine)</li>\n<li>The American Law Institute (ALI) Test</li>\n<li>The Federal Rule</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A middle-aged patient with a duodenal diverticulum who underwent surgery the previous day and has been nil per os since the surgery complains of abdominal pain. The surgeon was wearing a bracelet with a coin attached during the surgery despite being warned by the nurse. The abdominal radiograph is shown below. Under which doctrine will the surgeon be held responsible?",
    "choices": [
      {
        "id": 1,
        "text": "Res indicata"
      },
      {
        "id": 2,
        "text": "Res ipsa loquitur"
      },
      {
        "id": 3,
        "text": "Contributory negligence"
      },
      {
        "id": 4,
        "text": "Medical maloccurrence"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows a&nbsp;<strong>coin in the abdomen</strong>&nbsp;that was absent before the surgery. As the patient was nil per os after the surgery, this implies that the coin from the bracelet had fallen inside the abdomen during the surgery and the surgeon completed the surgery without removing it. The surgeon will be held responsible under <strong>res ipsa loquitur.</strong></p>\n<p>Res ipsa loquitur means \"<strong>the thing or fact speaks for itself</strong>.\" It implies that the negligent act is so obvious that the patient need not prove the negligence. The patient has to only state the negligent act. This doctrine applies to both civil and criminal negligence. All of the following conditions should be fulfilled for this doctrine:</p>\n<ul>\n<li>In the absence of negligence, there would not have been any injury usually.</li>\n<li>The doctor had complete control over the injury-producing instrument or treatment.</li>\n<li>The patient was not a part of contributory negligence.</li>\n</ul>\n<p>Other options:</p>\n<p>Option A - <strong>Res&nbsp;indicata</strong>&nbsp;is a defense for the doctor against negligence. This specifies that a&nbsp;suit for damages for negligence should be filed against the doctor <strong>within two years</strong> from the date of alleged negligence. A suit&nbsp;filed beyond two years would be dismissed as it would be&nbsp;beyond the<strong> period of limitation.</strong></p>\n<p>Option C - <strong>Contributory negligence</strong> is the absence of ordinary care on the part of the patient or his personal attendant along with the doctor's negligence contributing to the injury without which the injury would not have occurred. It acts as a <strong>partial defense</strong> against negligence for the doctor. In the given scenario, the patient was nil per os, indicating that there was no provision for foreign body consumption and suggesting there is no contributory negligence by the patient.</p>\n<p>Option D - <strong>Medical maloccurrence</strong>&nbsp;occurs when the patient does not respond properly or faces adverse effects in spite of good attention and care by the doctor.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/be9fd77660de4aa7a5c109eee006333c.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "According to the Warning Notice published by the Medical Council of India, a registered medical practitioner has been found guilty under the provision of advertising. Which of the following instances may not amount to professional misconduct under this provision?",
    "choices": [
      {
        "id": 1,
        "text": "Putting up a signboard at a pharmacy where he does not work"
      },
      {
        "id": 2,
        "text": "Notifying the media twice that he is resuming his practice"
      },
      {
        "id": 3,
        "text": "Giving interviews about illnesses in an attempt to promote oneself"
      },
      {
        "id": 4,
        "text": "Indirectly promoting oneself through manufacturing firms"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p style=\"color: #252525;\"><span style=\"font-family: arial, helvetica, sans-serif;\">A registered medical practitioner who intends to resume his practice is only permitted to <strong>notify the media twice.</strong> If he repeats it <strong>more</strong> than two times, he will face charges of <strong>professional misconduct.</strong></span></p>\n<p class=\"p1\"><span style=\"font-family: arial, helvetica, sans-serif;\">The Medical Council of India and other State Medical Councils have published a <strong>Code of Medical Ethics,</strong> which specifies certain rules of conduct that a registered medical practitioner must adhere to.</span></p>\n<p class=\"p1\"><span style=\"font-family: arial, helvetica, sans-serif;\">Any person found guilty of any of the acts of commission or omissions listed in the Medical Council of India's <strong>Warning Notice</strong> will be considered to have engaged in professional misconduct and will be subjected to disciplinary action.</span></p>\n<p class=\"p1\"><span style=\"font-family: arial, helvetica, sans-serif;\">The important offences may be described as \"the 6 A's\". (1) <strong>Adultery</strong> arising out of professional relationship (2) <strong>Advertising</strong> (3) <strong>Abortion</strong> (unlawful) (4) <strong>Association</strong> with unqualified persons in professional matters (5) <strong>Addiction</strong> (6) <strong>Alcohol.</strong></span></p>\n<p class=\"p1\"><span style=\"font-family: arial, helvetica, sans-serif;\">Offences under advertising include:\u00a0</span></p>\n<ul>\n<li class=\"p1\"><span style=\"font-family: arial, helvetica, sans-serif;\">A physician should not contribute to the lay press articles and give <strong>interviews</strong> regarding illnesses and treatments in an attempt to <strong>promote oneself.</strong> (option C)</span></li>\n<li class=\"p1\"><span style=\"font-family: arial, helvetica, sans-serif;\">He should not advertise himself through <strong>manufacturing firms directly</strong> or <strong>indirectly.</strong> (option D)</span></li>\n<li class=\"p1\"><span style=\"font-family: arial, helvetica, sans-serif;\">He should not put up a signboard at a pharmacy where <strong>he doesn't work. </strong>(option A)</span></li>\n<li class=\"p1\"><span style=\"font-family: arial, helvetica, sans-serif;\">It is illegal for a physician to use an <strong>unusually large signboard</strong> and write anything other than his name, qualifications, his speciality and registration number, including the name of the State Medical Council under which he is registered. His <strong>prescription papers</strong> should also have the same information.</span></li>\n<li class=\"p1\"><span style=\"font-family: arial, helvetica, sans-serif;\">A physician may <strong>notify</strong> the <strong>public</strong> or <strong>professional press</strong> of the beginning of his practice, the stoppage or resuming of it after a long period, or a change of address, but such a notification may appear <strong>no more than twice.</strong></span></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old recently married woman committed suicide because of dowry torture by her husband's family. Under which of the following sections is this incident covered?",
    "choices": [
      {
        "id": 1,
        "text": "BNS Section 63 [IPC 375]"
      },
      {
        "id": 2,
        "text": "BNS Section 80 [IPC 304B]"
      },
      {
        "id": 3,
        "text": "BNS Section 72 [IPC 228A]"
      },
      {
        "id": 4,
        "text": "BNS Section 100 [IPC 299]"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This incident can be considered a <strong>dowry death. </strong>Dowry death is defined under section <strong>304B IPC.</strong></p>\n<p>According to this, if the husband or his relative subjects the woman to cruelty or harassment in demand of dowry <strong>within 7 years</strong> of marriage; they shall be deemed to have caused her death. The punishment for such cases is imprisonment for<strong> not less than 7 years,</strong> but may be extended to life imprisonment.</p>\n<p>Option A: Section <strong>63</strong> (IPC 375) deals with <strong>rape</strong>.</p>\n<p>Option C: Section <strong>72</strong> (IPC 228A) deals with imprisonment for up to 2 years and a fine for <strong>disclosure</strong> of the <strong>identity of a rape victim</strong>.</p>\n<p>Option D: Section <strong>100</strong> (IPC 299) deals with <strong>culpable homicide</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An alleged female convict is arrested for a crime she did not commit. She was tortured by the investigating officer and was raped by him in police custody. Under which section will the inquest be done in this scenario?",
    "choices": [
      {
        "id": 1,
        "text": "BNS Section 63 (375 IPC )"
      },
      {
        "id": 2,
        "text": "BNS Section 68 (376-C IPC)"
      },
      {
        "id": 3,
        "text": "BNSS Section 196 (176 CrPC)"
      },
      {
        "id": 4,
        "text": "BNSS Section 194 (174 CrpC)"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario is indicative of <strong>custodial rape.\u00a0</strong>A <strong>magistrate inquest\u00a0</strong>is done under <strong>BNSS Section 196</strong> <strong>(Section</strong> <strong>176 CrPC)</strong>.</p>\n<p><strong>Custodial rape</strong> is defined as the offence committed by persons who are in supervisory positions indulging in sexual intercourse with women in their custody by inducing or seducing the woman by taking advantage of his official position.</p>\n<p><strong>BNSS 196 (Section 176 CrPC)</strong>\u00a0deals with magistrate inquest in which the cause of death is not under natural circumstances. Magistrate inquest may be conducted by the District Magistrate, Sub-Divisional Magistrate, Tahsildar, or any other Executive Magistrate empowered by the State Government.</p>\n<p>Indications for Magistrate Inquest:</p>\n<ul>\n<li><strong>Custodial rape</strong></li>\n<li>Death in police custody or police interrogation</li>\n<li>Death in police firing</li>\n<li>Death in prison, reformatories, Borstal school</li>\n<li>Death in a psychiatric hospital</li>\n<li>Dowry death</li>\n<li>Cases of exhumation.</li>\n</ul>\n<p>Other options:</p>\n<p>Option A- <strong>BNS Section 63</strong> <strong>(Section 375 IPC)</strong>deals with the <strong>definition</strong> of <strong>rape</strong>. In BNS 63, the Age of Consent of 15 years is replaced by 18 years in BNS. Exception 2 of Section 63 states that \u201csexual intercourse or acts by a man with his wife, the wife not being under 18 years of age, is not rape\u201d.</p>\n<p>Option B- <strong>BNS Section 68</strong> <strong>(Section 376 IPC) </strong>deals with the <strong>punishment</strong> of<strong> rape</strong> by a person in authority. It is termed custodial rape.</p>\n<p>Option D- <strong>BNSS Section 194</strong> <strong>(Section 174 CrPC)</strong> deals with the<strong> police inquest</strong>. It is done in suicide, homicide, killing by any animal or machinery or accident, and death under circumstances that raise suspicion of another person committing the offence.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A pregnant lady was awarded a death sentence for committing murder by the session's court. However, her death sentence was converted to life imprisonment by the High Court. Which of the following sections describes this procedure?",
    "choices": [
      {
        "id": 1,
        "text": "BNS Section 88"
      },
      {
        "id": 2,
        "text": "BNS Section 94"
      },
      {
        "id": 3,
        "text": "BNSS Section 455"
      },
      {
        "id": 4,
        "text": "BNSS Section 456"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>BNSS Section 456: Commutation of capital sentence on pregnant woman </strong>i.e. If a woman sentenced to death is found to be pregnant, the High Court shall commute the sentence to imprisonment for life.</p>\n<p>Other options:</p>\n<div class=\"page\" title=\"Page 401\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Option A:<strong> Section 88</strong> of BNS<strong> </strong>states that <strong>miscarriage</strong> induced <strong>not</strong> for the purpose of <strong>saving</strong> the <strong>life/good</strong> of the <strong>woman,</strong> be punished with imprisonment for 3 years. If the woman is \u201cquick with child\u201d the period is extended for 7 years more.</p>\n<p>Option B:<strong> Section 94</strong> of BNS \u2013 <strong>concealment</strong> of <strong>birth</strong> and <strong>secret disposal</strong> of the <strong>fetus</strong> are punishable.</p>\n<p>Option C: <strong>BNSS Section 455 </strong>deals with the <strong>Commutation of death sentence</strong> in case of <strong>appeal to the Supreme Court</strong>.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Medical Jurisprudence Mini Test - -Tmt';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2024-25"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>