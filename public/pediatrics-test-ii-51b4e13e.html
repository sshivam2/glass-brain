<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pediatrics Test Ii - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A first-time mother rushes to the OPD with her 4-day old infant and worriedly points to the rash that appears as shown below. You reassure her of its harmless, transient nature.  On microscopic examination, these papular lesions on an erythematous base will reveal ________",
    "choices": [
      {
        "id": 1,
        "text": "Eosinophils"
      },
      {
        "id": 2,
        "text": "Neutrophils"
      },
      {
        "id": 3,
        "text": "Giant Cells"
      },
      {
        "id": 4,
        "text": "Lymphocytes"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical complex describes a case of&nbsp;<strong>erythema neonatorum</strong>.&nbsp;<strong>Wright stained smear</strong>&nbsp;of the contents of the pustule will show an&nbsp;<strong>abundance of eosinophils</strong>.</p>\n<p>They are papular lesions on an erythematous base, distributed over the trunk and face predominantly. They are seen 1-3 days after birth and may persist for up to a week, after which they resolve spontaneously.</p>\n<p>Neutrophils are seen in pustular melanosis.&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e5f7bf29f101411f88018fd06cb0c233.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Ayesha is a 9th standard girl who presented with a neck swelling, which began more than a year ago. Her mother says she is embarrassed about it and always covers her neck with a shawl when she goes to school. Her menstrual cycles have also become irregular as of late. Blood tests reveal slightly elevated TSH levels and the presence of thyroid peroxidase antibodies.  Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Iodine deficiency"
      },
      {
        "id": 2,
        "text": "Congenital hypothyroidism"
      },
      {
        "id": 3,
        "text": "Graves disease"
      },
      {
        "id": 4,
        "text": "Chronic lymphocytic thyroiditis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The presence of thyroid peroxidase antibodies (TPO-Abs) and elevated thyroid-stimulating hormone (TSH) level in a child with a goitre is&nbsp;suggestive of <strong>chronic lymphocytic (Hashimoto) thyroiditis.</strong></p>\n<p><strong>Chronic lymphocytic (Hashimoto) thyroiditis </strong>is an autoimmune disease. Clinical presentation can include goitre, growth retardation, and other features of hypothyroidism. The thyroid&nbsp;is diffusely enlarged, firm, and non-tender.</p>\n<p>TSH is moderately elevated and&nbsp;TPO-Abs and anti-thyroglobulin antibodies (anti-Tg Abs) can be detected.</p>\n<p>The image given below shows goitre due to Hashimoto's thyroiditis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fe0bbd97a21d4d95bd3dc29fd8bf4dd6x800x598.JPEG"
    ]
  },
  {
    "text": "A pregnant female arrives at your hospital for her antenatal check-up. As an intern, you were required to draw her family pedigree chart while taking history. She has previously delivered full-term healthy dizygotic twins 5 years back. Which of the following symbol will you use to denote dizygotic twins in a pedigree chart?",
    "choices": [
      {
        "id": 1,
        "text": "Option A"
      },
      {
        "id": 2,
        "text": "Option B"
      },
      {
        "id": 3,
        "text": "Option C"
      },
      {
        "id": 4,
        "text": "Option D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Pedigree charts</strong> are graphical representations of a person's family tree and are useful for identifying the <strong>pattern of inheritance of genetic disorders</strong>. Thus, they are vital in the history-taking of patients, especially in pregnancy.&nbsp;<strong>Option B</strong> is the symbol denoting <strong>dizygotic twins</strong> in a pedigree chart.</p>\n<p>Option A denotes monozygotic twins in the pedigree chart.<br />Option C denotes offsprings.<br />Option D denotes consanguineous marriage.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7dc9d614587044a3b5703f9e76759084.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A child developed dark coloured urine and flank pain 2 days after an upper respiratory tract infection. The physician suspects IgA nephropathy. What is the location of cellular injury in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Epithelial cell"
      },
      {
        "id": 2,
        "text": "Basement membrane"
      },
      {
        "id": 3,
        "text": "Endothelial cell"
      },
      {
        "id": 4,
        "text": "Mesangial cell"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The location of cellular injury in&nbsp;<strong>IgA nephropathy</strong> (Berger nephropathy) is the deposition of IgA antibodies in the&nbsp;<strong>mesangial cell</strong>.</p>\n<p>Mesangial cells are directly exposed to the circulation; therefore, they are affected in diseases characterized by the deposition of immune complexes.</p>\n<p><strong>Mesangial cell diseases:</strong></p>\n<ul>\n<li>IgA nephropathy</li>\n<li>IgM nephropathy</li>\n<li>Mesangioproliferative glomerulonephritis</li>\n<li>Class II lupus nephritis</li>\n<li>Diabetic nephropathy</li>\n</ul>\n<p>Note: In <strong>IgA nephropathy</strong> gross hematuria often occurs within <strong>1-2 days</strong> of onset of an upper respiratory or gastrointestinal infection. In contrast, a longer latency period of about <strong>1-2 weeks</strong> is observed in acute <strong>postinfectious glomerulonephritis.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are assisting on a left partial nephrectomy in a child with Wilms tumor. Intraoperatively, a small mass is noted on the right kidney as well. Frozen section reveals it to be a Wilms tumor. What is the stage of Wilm's tumor in this child?",
    "choices": [
      {
        "id": 1,
        "text": "Stage 2"
      },
      {
        "id": 2,
        "text": "Stage 3"
      },
      {
        "id": 3,
        "text": "Stage 4"
      },
      {
        "id": 4,
        "text": "Stage 5"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Wilms tumor with <strong>involvement</strong> of<strong> both kidneys</strong>&nbsp;is <strong>stage 5.</strong></p>\n<h2><span style=\"font-size: 10pt;\">Children&rsquo;s Oncology Group (COG) Staging System</span></h2>\n<table>\n<tbody>\n<tr>\n<td width=\"94\">\n<p>Stage I</p>\n</td>\n<td width=\"357\">\n<p>Tumor confined to the kidney and completely resected with negative lymph nodes.</p>\n</td>\n</tr>\n<tr>\n<td width=\"94\">\n<p>Stage II</p>\n</td>\n<td width=\"357\">\n<p>Tumor extends beyond the kidney but is completely resected with negative margins and lymph nodes.</p>\n</td>\n</tr>\n<tr>\n<td width=\"94\">\n<p>Stage III</p>\n</td>\n<td width=\"357\">\n<p>Residual tumor present following surgery confined to the abdomen, including gross or microscopic tumor.</p>\n</td>\n</tr>\n<tr>\n<td width=\"94\">\n<p>Stage IV</p>\n</td>\n<td width=\"357\">\n<p>Hematogenous metastases (lung, liver, bone, brain, etc.)</p>\n<p>or lymph node metastases outside the abdominopelvic&nbsp;region</p>\n</td>\n</tr>\n<tr>\n<td width=\"94\">\n<p><strong>Stage V</strong></p>\n</td>\n<td width=\"357\">\n<p><strong>Metastasis to opposite kidney (bilateral renal involvement)</strong></p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Reena, a 34-year-old lady with gestation diabetes mellitus delivers an LGA baby at 37 weeks. What would the birth weight of this child be?",
    "choices": [
      {
        "id": 1,
        "text": ">75th Percentile"
      },
      {
        "id": 2,
        "text": ">97th Percentile"
      },
      {
        "id": 3,
        "text": ">90th Percentile"
      },
      {
        "id": 4,
        "text": ">95th Percentile"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Infants with birth weight&nbsp;<strong>greater than&nbsp;the 90th</strong>&nbsp;<strong>percentile</strong> for their gestational age are called large for gestational age (<strong>LGA</strong>) babies.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7cdc009d15114f5389f9a0ba7ad06baax1280x1908.JPEG"
    ]
  },
  {
    "text": "You are asked to review an article titled, 'Childhood cancers- a menace'. Which of the following statements is wrong and needs to be edited out?",
    "choices": [
      {
        "id": 1,
        "text": "Acute lymphoblastic leukemia is the most common type of leukemia in children with Down syndrome."
      },
      {
        "id": 2,
        "text": "The most common intra-abdominal malignancy is Wilm\u2019s tumor."
      },
      {
        "id": 3,
        "text": "The most common extracranial solid malignancy is neuroblastoma."
      },
      {
        "id": 4,
        "text": "The most common brain tumors in children are infratentorial."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>most common intraabdominal malignancy</strong> in children is <strong>neuroblastoma</strong>.&nbsp;</p>\n<ul>\n<li>The most common leukemias&nbsp;seen in <strong>Down&rsquo;s syndrome</strong>: acute lymphoblastic leukemia <strong>(ALL) &gt;&nbsp;</strong>acute myeloid leukemia <strong>(AML)</strong></li>\n<li>The most common site of a brain tumor in children:<strong>&nbsp;Infratentorium</strong></li>\n<li>The most common <strong>extra-cranial</strong> solid neoplasm in children:&nbsp;<strong>Neuroblastoma </strong></li>\n<li>The most common <strong>intra-abdominal</strong> neoplasm in children:&nbsp;<strong>Neuroblastoma </strong></li>\n<li>The most common <strong>primary neoplasm of renal tissue</strong> in children:<strong> Wilm&rsquo;s tumor</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Anwesha, an orator preparing for her international debate finale presents to your clinic with lesions on her lower lip as shown below. She is concerned as these lesions are painful, recurrent and hamper the flow of her speech. Which of the following points about this condition is incorrect?",
    "choices": [
      {
        "id": 1,
        "text": "These  are due to stress"
      },
      {
        "id": 2,
        "text": "These are contagious"
      },
      {
        "id": 3,
        "text": "They heal without scarring"
      },
      {
        "id": 4,
        "text": "They are seen in Gluten-sensitive enteropathy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The lesions given in the above image are <strong>aphthous ulcers</strong>, and they are not<strong> contagious</strong>. All the other points are true.&nbsp;</p>\n<p>Aphthous ulcers are painful, recurrent, and <strong>non-contagious</strong> oral lesions. They are well-circumscribed, ulcerative lesions with a white necrotic base surrounded by a red halo. They heal in 10&ndash;14 days <strong>without scarring</strong>. Their aetiology is unclear but the following factors have been implicated:</p>\n<ul>\n<ol>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Allergic or immunologic reactions</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Emotional stress</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Genetics</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Injury to soft tissues in the mouth</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Inflammatory bowel disease</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Gluten-sensitive enteropathy</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Behcet disease</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Sweet syndrome</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Human immunodeficiency virus (HIV) infection</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Cyclical neutropenia</li>\n</ol>\n</ul>\n<p>Treatment generally includes local anaesthetic to relieve pain and B-complex supplementation to enhance healing.</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dc9452a43dd74b1da418dfe7402c26bd.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "An anxious new mother feeding her child with expressed breastmilk (EBM) feels that the consistency and colour of her milk have changed recently. She adds that when she expresses breastmilk, the colour and consistency of the first portion and the ending portion is completely different and that she is worried about the same.  Which statement is not true about different breast milk?",
    "choices": [
      {
        "id": 1,
        "text": "Preterm milk has more proteins"
      },
      {
        "id": 2,
        "text": "Mature milk is thicker with all the essential nutrients for growth"
      },
      {
        "id": 3,
        "text": "Foremilk is watery and is rich in proteins and sugar"
      },
      {
        "id": 4,
        "text": "Hindmilk is richer in fat and provides more energy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Mature milk&nbsp;</strong>is <strong>thinner</strong> (not thicker) with all essential nutrients for growth.</p>\n<p><strong>Various transitional forms of breastmilk:</strong></p>\n<p><strong>Colostrum</strong></p>\n<ul>\n<li>In the initial 3 to 4 days</li>\n<li>Small quantity, thick, and yellow in colour</li>\n<li>A large number of <strong>antibodies</strong>,<strong>&nbsp;</strong>immune component cells; and vitamins A, D, E,&nbsp;and K.</li>\n</ul>\n<p><strong>Transitional milk</strong></p>\n<ul>\n<li>Secreted after 3 to 4 days until 2 weeks</li>\n<li>Immunoglobulin and protein content decreases, while the fat and sugar content increases.</li>\n</ul>\n<p><strong>Mature milk</strong></p>\n<ul>\n<li>Follows transitional milk.</li>\n<li><strong>Thinner</strong> and more watery.</li>\n<li>Contains all the nutrients essential for the optimal growth of the baby.&nbsp;</li>\n</ul>\n<p><strong>Foremilk</strong></p>\n<ul>\n<li>Secreted at the start of the feed</li>\n<li>Watery and rich in proteins, sugar, vitamins, minerals, and water that quenches the baby&rsquo;s thirst.</li>\n</ul>\n<p><strong>Hindmilk&nbsp;</strong></p>\n<ul>\n<li>Comes towards the&nbsp;end of the feed</li>\n<li>Provides <strong>more energy</strong> and a sense of satiety and&nbsp;it is richer in <strong>fat</strong>.</li>\n</ul>\n<p><strong>Preterm milk&nbsp;</strong></p>\n<ul>\n<li>Milk of mother who delivers before 37 weeks.</li>\n<li>Contains more proteins, sodium, iron, immunoglobins,&nbsp;and calories as per the requirement of the preterm infant.</li>\n</ul>\n<p>The given image shows watery foremilk and hindmilk which is rich in fat.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/944f94e4e04a4e3db1ce9b423f52f4bex1280x569.7755610972569.PNG"
    ]
  },
  {
    "text": "You are reading an article titled, ' Dark age vampires or our patients', which describes an 18-year-old man who has had an intolerance to sunshine since the age of 6. When playing cricket he suffered intense burning, redness, swelling, and crusting of knees unprotected by shorts, with similar changes on cheeks and bridge of the nose. His labs showed elevated concentrations of total erythrocyte protoporphyrin. Which of the following enzyme deficiencies can explain this boy's condition?",
    "choices": [
      {
        "id": 1,
        "text": "\u03b4-Aminolevulinate synthase 2 (ALAS2)"
      },
      {
        "id": 2,
        "text": "\u03b4-Aminolevulinic acid dehydratase (ALAD)"
      },
      {
        "id": 3,
        "text": "Porphobilinogen deaminase (PBGD)"
      },
      {
        "id": 4,
        "text": "Ferrochelatase (FECH)"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Symptoms of<strong> cutaneous photosensitivity</strong> beginning in childhood and&nbsp;a substantially<strong> elevated concentration of total erythrocyte protoporphyrin</strong> supports a diagnosis of&nbsp;<strong>erythropoietic protoporphyria</strong>. The enzyme deficient in erythropoietic protoporphyria is <strong>ferrochelatase (FECH).</strong></p>\n<p>Symptoms consist of acute pain and itching often occurring within minutes of sunlight exposure and followed by redness and swelling with continued exposure. Swelling may resemble angioneurotic edema and <strong>solar urticaria.</strong> Symptoms are usually worse in&nbsp;the spring and summer. Chronic changes may include lichenification, leathery pseudovesicles, labial grooving, and nail changes, but changes in pigmentation and pronounced scarring are unusual.</p>\n<p>Life-threatening<strong> protoporphyric hepatopathy</strong> is characterized by greater increases in erythrocyte and plasma protoporphyrin levels, increased photosensitivity, and either chronically abnormal liver function tests or rapidly progressive hepatic failure.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 4-year-old girl, a known case of celiac disease, presented to the pediatric endocrine clinic with a history of neck swelling, tremor, and weight loss. On evaluation, she was found to have Graves\u2019 disease. Other conditions that need to be screened in this patient include all of the following except __________.",
    "choices": [
      {
        "id": 1,
        "text": "Vitiligo"
      },
      {
        "id": 2,
        "text": "Pernicious anemia"
      },
      {
        "id": 3,
        "text": "Diabetes mellitus type 2"
      },
      {
        "id": 4,
        "text": "Addison disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Type 2 Diabetes mellitus</strong> is <strong>not</strong> associated with Grave's disease.</p>\n<p><strong>Conditions associated with Grave's disease (autoimmune diseases)</strong>:&nbsp;</p>\n<ul>\n<li>Diabetes mellitus type 1</li>\n<li>Pernicious anaemia</li>\n<li>Celiac disease</li>\n<li>Vitiligo</li>\n<li>Addison disease</li>\n<li>Alopecia areata</li>\n<li>Myasthenia gravis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child with CAH having cortisol deficiency is treated with glucocorticoids. How should the dose of glucocorticoids be altered during an inter-current infection?",
    "choices": [
      {
        "id": 1,
        "text": "Dose should remain unchanged"
      },
      {
        "id": 2,
        "text": "Dose should be tapered and stopped"
      },
      {
        "id": 3,
        "text": "Dose should be doubled or tripled"
      },
      {
        "id": 4,
        "text": "Glucocorticoids should be withdrawn until the infection resolves"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Cortisol deficiency in CAH is treated with <strong>glucocorticoids</strong>.</p>\n<p><strong>Double or triple doses are indicated during periods of stress</strong>, such as an infection or surgery. This is because, during periods of stress, the requirement for cortisol is higher.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Gelastic seizures are associated with",
    "choices": [
      {
        "id": 1,
        "text": "Tuberculous meningitis"
      },
      {
        "id": 2,
        "text": "Craniopharyngioma"
      },
      {
        "id": 3,
        "text": "Hypothalamic hamartoma"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Gelastic seizures</strong> are characteristically associated with <strong>hypothalamic hamartoma.</strong></p>\n<p><strong>Gelastic seizures :</strong></p>\n<ul>\n<li>Epileptic events characterised by <strong>bouts of laughter.</strong></li>\n<li><strong>Autonomic features</strong> are present.</li>\n<li>Hypothalamic hamartomas present with triad of :\n<ul>\n<li>Gelastic epilepsy</li>\n<li>Precocious puberty</li>\n<li>Developmental delay</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 1 year old child presents with features of hypotonia. On examination , he has tongue fasciculations, normal intelligence , keeps his body in a frog like position. The most likely diagnosis would be",
    "choices": [
      {
        "id": 1,
        "text": "Limb girdle dystrophy"
      },
      {
        "id": 2,
        "text": "Down\u2019s syndrome"
      },
      {
        "id": 3,
        "text": "Spinal muscular atrophy"
      },
      {
        "id": 4,
        "text": "Guillian Barre syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical situation suggests <strong>Floppy Infant syndrome.</strong></p>\n<div class=\"page\" title=\"Page 741\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Spinal muscular atrophy is a genetic disease characterized by progressive degeneration of anterior horn cells, which results in weakness.</p>\n</div>\n</div>\n</div>\n</div>\n<p>Among the causes of Floppy Infant syndrome, <strong>Spinal muscular atrophy</strong> is the best choice as:</p>\n<ul>\n<li>Intelligence is normal</li>\n<li>Tongue fasciculations</li>\n</ul>\n<p><strong>Other options :</strong></p>\n<ul>\n<li><strong>Down&rsquo;s syndrtome</strong> &ndash; Intelligence impaired</li>\n<li><strong>Guillian barre </strong>&ndash; Acute condition with history of fever or viral infections.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are used in diagnosis of HIV in a 2 month old child except",
    "choices": [
      {
        "id": 1,
        "text": "HIV ELISA"
      },
      {
        "id": 2,
        "text": "p24 antigen assay"
      },
      {
        "id": 3,
        "text": "DNA PCR"
      },
      {
        "id": 4,
        "text": "Viral culture"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>HIV ELISA <strong>cannot </strong>be used in diagnosis of HIV in a child upto <strong>18 months of age.</strong></p>\n<ul>\n<li>This is because all neonates born to HIV infected mothers <strong>will have IgG antibody</strong> in their blood<strong> regardless of their infection status</strong>.</li>\n<li>So up until 18 months of age they will continue to test positive. Hence HIV ELISA should not be used.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Sandifer syndrome due to GERD in infants is most often confused with ?",
    "choices": [
      {
        "id": 1,
        "text": "Acute otitis media"
      },
      {
        "id": 2,
        "text": "Recurrent vomiting"
      },
      {
        "id": 3,
        "text": "Seizures"
      },
      {
        "id": 4,
        "text": "Sinusitis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Abnormal or Dystonic neck posturing in <strong>Sandifer syndrome</strong> is most often confused with <strong>Seizures. </strong></li>\n<li>Posturing in Sandifer syndrome occurs <strong>1 hour after feeding</strong>, and babies frequently have a <strong>history of vomiting</strong>, failure to thrive and repeated chest infections.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Test done  to diagnose syphilis in newborn if mother is syphilitic is",
    "choices": [
      {
        "id": 1,
        "text": "ZN staining"
      },
      {
        "id": 2,
        "text": "Detection of IgG"
      },
      {
        "id": 3,
        "text": "Fluorescent antigen test"
      },
      {
        "id": 4,
        "text": "Syphilis captia M test"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Syphilis captia M test</strong> is an <strong>Enzyme immunoassay</strong> used to detect syphilis in newborn if the mother is syphilitic.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "First sign of puberty in a female is",
    "choices": [
      {
        "id": 1,
        "text": "Tanner stage 1"
      },
      {
        "id": 2,
        "text": "Pubic hair"
      },
      {
        "id": 3,
        "text": "Tanner stage 2"
      },
      {
        "id": 4,
        "text": "Axillary hair"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Thelarche</strong> is the first sign of puberty in girls.</p>\n<ul>\n<li><strong>Beginning of secondary breast development</strong> at onset of puberty</li>\n<li><strong>Tanner stage 2</strong></li>\n<li>Due to increased levels of <strong>Estradiol</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Automatism is seen in all except",
    "choices": [
      {
        "id": 1,
        "text": "Complex Partial seizures"
      },
      {
        "id": 2,
        "text": "Infantile spasm"
      },
      {
        "id": 3,
        "text": "Landau\u2013Kleffner syndrome"
      },
      {
        "id": 4,
        "text": "Absence seizures"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Infantile spasm doesn't present with automatism</li>\n<li>Automatism are the characteristic feature of <strong>Complex partial seizures.</strong></li>\n<li>Automatisms are <strong>automatic semi purposeful</strong> movements of mouth (oral,alimentary such as chewing) or of the extremities (eg.manipulation of sheets/walking).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which one of the following is not a feature in cerebral palsy?",
    "choices": [
      {
        "id": 1,
        "text": "Hypotonia"
      },
      {
        "id": 2,
        "text": "Microcephaly"
      },
      {
        "id": 3,
        "text": "Ataxia"
      },
      {
        "id": 4,
        "text": "Flaccid paralysis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Flaccid paralysis </strong>is <strong>not</strong> a feature of cerebral palsy (CP).&nbsp;</p>\n<p>CP is an <strong>upper motor neuron disease </strong>characterized by <strong>rigidity</strong> and <strong>scissoring gait</strong>.<strong>&nbsp;</strong><strong>Flaccid paralysis</strong> would be seen in&nbsp;<strong>lower motor neuron disease</strong>.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A: <strong>Hypotonia</strong> is a characteristic feature of <strong>athetoid CP.&nbsp;</strong>These infants generally have poor head control.&nbsp;</p>\n<p>Option B:<strong>&nbsp;Microcephaly</strong><strong>&nbsp;</strong>can be seen in CP due to perinatal insults to the developing brain.&nbsp;</p>\n<p>Option C: <strong>Ataxia&nbsp;</strong>is a common feature of <strong>extrapyramidal&nbsp;CP</strong>.</p>\n<p>The <strong>subtypes</strong> of cerebral palsy are given in the table below:&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cd480ee47cc947ccb1c31d18bad0e6aax510x520.GIF"
    ]
  },
  {
    "text": "In a child with Tetralogy of Fallot, with fever and diarrhoea, which is the surest sign of a cyanotic spell?",
    "choices": [
      {
        "id": 1,
        "text": "Hepatomegaly"
      },
      {
        "id": 2,
        "text": "Absence of murmur"
      },
      {
        "id": 3,
        "text": "S3 gallop rhythm"
      },
      {
        "id": 4,
        "text": "Arterial oxygen saturation less than 75 %"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>The absence of murmur</strong> can be considered as <strong>a sure sign</strong> of Cyanotic spell.</p>\n<p>There is a <strong>characteristic temporary decrease</strong> or absence of systolic murmur during a cyanotic spell because <strong>of decreased flow across the right ventricular outflow tract.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 3-year-old child presents with an upper limb deformity as given in the image below. He has had recurrent respiratory infections and is breathless while walking. You hear a wide split and fixed second heart sound through all phases of respiration. Identify the heart disease likely to be present in this child.",
    "choices": [
      {
        "id": 1,
        "text": "Atrial septal defect"
      },
      {
        "id": 2,
        "text": "Transposition of great vessels (TGV)"
      },
      {
        "id": 3,
        "text": "Patent ductus arteriosus (PDA)"
      },
      {
        "id": 4,
        "text": "Total anomalous pulmonary venous connection (TAPVC)"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The heart disease likely to be present in this child is an&nbsp;<strong>atrial septal defect (ASD).</strong></p>\n<p>The given clinical history along with the image is suggestive of <strong>Holt Oram syndrome</strong>. The syndrome is characterized by hypoplasia of the thumb, phocomelia, atrial septal defect, and triphalangism.&nbsp;</p>\n<p><strong>Clinical features of ASD</strong>&nbsp;include&nbsp;<strong>exercise intolerance</strong> and <strong>failure to thrive</strong> although many children are asymptomatic. On auscultation, there is a&nbsp;<strong>widely split </strong>and<strong> fixed second heart sound</strong> in all phases of respiration, along with an <strong>ejection systolic murmur</strong>. Occasionally an ejection click is heard over the pulmonary area.</p>\n<p>Chest X-ray shows <strong>enlarged right atrium and right ventricle</strong>. The diagnosis can be further affirmed in ECG which interprets <strong>right ventricular volume overload</strong> with normal peripheral vascular resistance. The location and size of the ASD can be confirmed in <strong>2D scanning of the defect</strong>. Treatment involves <strong>closure</strong> of the defect either by surgery or by percutaneous catheter device insertion over the defect.&nbsp;</p>\n<p>Other options:</p>\n<p>Option B:&nbsp;<strong>Transposition of great vessels (TGV)</strong> - ejection systolic murmur of grade 1 or 2 with features of cyanosis and failure to thrive.</p>\n<p>Option C:&nbsp;<strong>Patent ductus arteriosus (PDA)</strong> - continuous murmur is distinctly heard on auscultation due to systolic and diastolic overloading of the pulmonary artery.&nbsp;</p>\n<p>Option D <strong>Total anomalous pulmonary venous connection (TAPVC</strong>)&nbsp;- pulmonary ejection systolic murmur with a tricuspid flow murmur.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8bea1f12248440ad8659c8784adb5d3a.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The treatment of choice for a primary grade 5 VUR involving both kidneys in a 6 month old boy is",
    "choices": [
      {
        "id": 1,
        "text": "Antibiotic prophylaxis"
      },
      {
        "id": 2,
        "text": "Ureteric reimplantation"
      },
      {
        "id": 3,
        "text": "Bilateral ureterostomies"
      },
      {
        "id": 4,
        "text": "Cystoscopy followed by subureteric injection of Teflon"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Treatment of choice\u00a0</strong>of <strong>Grade 5 Vesico Ureteric Reflux</strong> :</p>\n<ul>\n<li>Less than 1 year \u2013 Antibiotic prophylaxis</li>\n<li>1-5 years \u2013 Unilateral - Antibiotic prophylaxis</li>\n<li>1-5 years \u2013 Bilateral \u2013 Surgery</li>\n<li>1-5 years with scarring \u2013 Surgery</li>\n<li>Above 5 years \u2013 Surgery</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A newborn is being evaluated for anuria. Imaging reveals renal agenesis and pulmonary hypoplasia. The delivery was complicated due to oligohydramnios. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Potter sequence"
      },
      {
        "id": 2,
        "text": "Pierre Robin syndrome"
      },
      {
        "id": 3,
        "text": "Congenital diaphragmatic hernia"
      },
      {
        "id": 4,
        "text": "CHARGE syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>A newborn infant with anuria, renal agenesis, and pulmonary hypoplasia, with a&nbsp;history of oligohydramnios, is suggestive of <strong>Potter's sequence</strong></p>\n<p>Potter's sequence is characterized by the triad of:</p>\n<ul>\n<li><strong>Renal agenesis</strong></li>\n<li><strong>Oligohydramnios</strong></li>\n<li><strong>Pulmonary hypoplasia</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/41d0c61174554bb389fbcfdb9f26423fx1280x2156.5021156558532.JPEG"
    ]
  },
  {
    "text": "A male infant born at 34 weeks of gestation by emergency LSCS was found to have the following finding on histopathological examination of his umbilical cord. Anomalies of which of the following systems are most likely to be found in this infant?",
    "choices": [
      {
        "id": 1,
        "text": "Renal system"
      },
      {
        "id": 2,
        "text": "Central nervous system"
      },
      {
        "id": 3,
        "text": "Gastro-intestinal system"
      },
      {
        "id": 4,
        "text": "Endocrine system"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows the presence of a&nbsp;<strong> single umbilical artery</strong>&nbsp;which is associated with an increased risk for an <strong>occult</strong>&nbsp;<strong>renal anomaly.</strong></p>\n<p>The histopathological image of the cross-section of the umbilical cord shows 2 vessels as marked, a <strong>thin-walled</strong> umbilical<strong> vein</strong> and a <strong>thicker-walled</strong> umbilical<strong> artery.</strong>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5a420f2e6e164a8896b87fcd0a1cadc3.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/10827f5c9c9c4555b6b49ad310524ff4x1280x1530.0423131170662.JPEG"
    ]
  },
  {
    "text": "In the pediatric wards, you notice a baby, totally occupied with his little game and a mother trying hard to spoonfeed him. He is busy stacking toy cubes on top of each other and starts gleefully clapping once he makes a tower of 6. What is the likely age that this milestone corresponds to?",
    "choices": [
      {
        "id": 1,
        "text": "15 months"
      },
      {
        "id": 2,
        "text": "24 months"
      },
      {
        "id": 3,
        "text": "18 months"
      },
      {
        "id": 4,
        "text": "36 months"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A child can usually make a<strong> tower of 6</strong> blocks by <strong>24 months.</strong></p>\n<p>A child makes a tower of:</p>\n<ul>\n<li>2 blocks by 15 months</li>\n<li>3 blocks by 18 months</li>\n<li><strong>6 blocks by 2 years</strong></li>\n<li>9 blocks by 3 years</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 4-year old child presented with low-grade fever, headache, and mild upper respiratory tract infection. He also developed an erythematous rash on the cheek which progressed to the extremities the following day as shown below. The most likely diagnosis is:",
    "choices": [
      {
        "id": 1,
        "text": "Scarlet fever"
      },
      {
        "id": 2,
        "text": "Systemic lupus erythematosus"
      },
      {
        "id": 3,
        "text": "Kawasaki disease"
      },
      {
        "id": 4,
        "text": "Erythema infectiosum"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The most common manifestation of parvovirus B19 infection is <strong>erythema infectiosum</strong>, also known as the <strong>fifth disease</strong>, which is a <strong>benign, self-limited exanthematous illness </strong>of childhood. Affected children are afebrile or have a mild fever and <strong>do not appear ill</strong>. ( as in this child)</p>\n<ul>\n<li>The hallmark of erythema infectiosum is the <strong>characteristic rash</strong>, which occurs in <strong>3 stages</strong>\n<ul>\n<li>The initial stage is <strong>erythematous facial flushing</strong>, often described as a <strong>&ldquo;slapped cheek&rdquo; appearance</strong></li>\n<li>The rash spreads rapidly or concurrently to the <strong>trunk and proximal extremities as diffuse macular erythema</strong> in the 2nd stage</li>\n<li><strong>Central clearing of macular lesions</strong> occurs promptly, giving the rash a <strong>lacy, reticulated appearance </strong></li>\n</ul>\n</li>\n<li>The rash tends to be <strong>more prominent on extensor surfaces</strong>, <strong>sparing the palms and soles.</strong></li>\n</ul>\n<p>&nbsp;</p>\n<p>B19 and HBoV (human bocavirus) are the only 2 parvoviruses known to be pathogenic in humans.</p>\n<p>&nbsp;</p>\n<p>Other options:</p>\n<p>Fever is characteristically high with Scarlet fever and Kawasaki disease (unlike in this patient)</p>\n<p>The malar rash which is pathognomonic of SLE involves the cheek, bridge of nose and lower eyelids; Discoid lesions are rare in childhood; photosensitivity rash may be present</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2a442a71fb624e90b4f02e163f043afa.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "In phenylketonuria, the following phenylketones are excreted in urine:",
    "choices": [
      {
        "id": 1,
        "text": "Phenylalanine"
      },
      {
        "id": 2,
        "text": "Phenylpyruvate"
      },
      {
        "id": 3,
        "text": "Acetoacetate"
      },
      {
        "id": 4,
        "text": "Both b and c"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>In phenylketonuria (PKU), excess phenylalanine is metabolized to <strong>phenylketones</strong> &ndash; <strong>phenylpyruvate and phenylacetate</strong>; that are excreted in urine, giving rise to the term phenylketonuria (PKU).</li>\n<li>Acetoacetate and beta hydroxybutyrate are keto acids but are not phenylketones.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An infant comes to a paediatrician and on examination there is a coarse systolic murmur in the mitral area with mild exercise intolerance. On echocardiogram there is a small muscular VSD. What is the appropriate management?",
    "choices": [
      {
        "id": 1,
        "text": "Immediate surgical closure"
      },
      {
        "id": 2,
        "text": "Wait and watch till 2 years then operate"
      },
      {
        "id": 3,
        "text": "Restrict physical activity and operate when weight is more than 15 kgs"
      },
      {
        "id": 4,
        "text": "Reassure about the benign nature of the disease and advice about dental hygiene"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Reassure the parents about the benign nature of the disease and the dental hygiene to be carefully maintained as they are at high risk for infective endocarditis.</p>\n<ul>\n<li>In patients with small VSDs\n<ul>\n<li>Parents should be reassured of the <strong>benign nature</strong> of the lesion</li>\n<li>They should be encouraged to live a normal life</li>\n<li><strong>No restrictions on physical activity</strong></li>\n<li><strong>Surgical repair is not recommended</strong></li>\n</ul>\n</li>\n<li>Small muscular VSDs are more likely to close (up to 80%) than membranous VSDs (up to 35%)</li>\n<li>They only have a <strong>long-term risk for infective endocarditis</strong> so as a protection against infective endocarditis, <strong>the integrity of primary and permanent teeth should be carefully maintained.</strong></li>\n<li>The latest revision of the American Heart Association guidelines states:&nbsp;\n<ul>\n<li>Antibiotic prophylaxis is no longer recommended for dental visits or surgical procedures.</li>\n<li>Patients can be monitored by a combination of clinical examination and non-invasive laboratory tests until the VSD has closed spontaneously.</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which one of the following is the main factor for the ductal closure postnatally?",
    "choices": [
      {
        "id": 1,
        "text": "Increase in paO2"
      },
      {
        "id": 2,
        "text": "Functional"
      },
      {
        "id": 3,
        "text": "Reflex constriction"
      },
      {
        "id": 4,
        "text": "Decrease in pulmonary venous resistance"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Oxygen is the most important factor controlling ductal closure</p>\n<p>After birth:</p>\n<ul>\n<li>The pulmonary vascular resistance decreases</li>\n<li>The aortic pressure increases due to increased venous return from the lungs.</li>\n<li>The blood flow through the ductus reverses</li>\n<li>Highly oxygenated blood flows from the aorta through the ductus which creates a stimulus for the muscular spasm and subsequent closure.</li>\n<li>Thus, in a full-term neonate, <strong>oxygen is the most important factor controlling ductal closure.</strong></li>\n<li>When the Po2 of the blood passing through the ductus reaches about 50 mm Hg, the ductal wall begins to constrict.</li>\n<li>The <strong>effects of oxygen on ductal smooth muscle </strong>may be direct or mediated by its effects on prostaglandin synthesis.</li>\n<li>Gestational age also appears to play an important role; the <strong>ductus of a premature infant is less responsive to oxygen</strong>, even though its musculature is developed.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Trans fats should account for ____ % of total daily energy in children",
    "choices": [
      {
        "id": 1,
        "text": "2"
      },
      {
        "id": 2,
        "text": "< 10"
      },
      {
        "id": 3,
        "text": "< 5"
      },
      {
        "id": 4,
        "text": "0"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The current dietary guidelines for children and adolescents recommend that:</p>\n<ul>\n<li>Total fat should account for &lt;30% of total daily energy</li>\n<li>Saturated fat less than 10% of total daily energy</li>\n<li>Dietary cholesterol &lt;300 mg/day</li>\n<li>No trans-fat</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 2 week old baby suspected to have congenital adrenal hyperplasia; the investigation of choice to confirm the diagnosis is:",
    "choices": [
      {
        "id": 1,
        "text": "21 hydroxylase"
      },
      {
        "id": 2,
        "text": "17-hydroxyprogesterone"
      },
      {
        "id": 3,
        "text": "17\u03b1-Hydroxylase"
      },
      {
        "id": 4,
        "text": "11\u03b2-Hydroxylase"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Diagnosis of congenital adrenal hyperplasia (21-hydroxylase deficiency) is most reliably established by measuring <strong>17-hydroxyprogesterone.</strong></li>\n<li>Measurements are taken before and 30 or 60 min after an intravenous bolus of 0.125-0.25 mg of cosyntropin (ACTH 1-24).</li>\n<li>Nomograms exist that readily distinguish normal and patients with non-classic and classic 21-hydroxylase deficiency.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Oculocutaneous tyrosinemia is caused by deficiency of",
    "choices": [
      {
        "id": 1,
        "text": "Tyrosine hydroxylase"
      },
      {
        "id": 2,
        "text": "Tyrosine aminotransferase"
      },
      {
        "id": 3,
        "text": "4-HPPD"
      },
      {
        "id": 4,
        "text": "Fumarylacetoacetate hydrolase"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Oculocutaneous tyrosinemia (Tyrosinemia type 2</strong>) is caused by deficiency of<strong> tyrosine aminotransferase.</strong></p>\n<table>\n<tbody>\n<tr>\n<td><strong>Disease</strong></td>\n<td><strong>Enzyme deficient</strong></td>\n</tr>\n<tr>\n<td>Tyrosinemia type 1 (Hepatorenal, hereditary tyrosinemia, Tyrosinosis)</td>\n<td>Fumarylacetoacetate hydrolase (FAAH)</td>\n</tr>\n<tr>\n<td><strong>Tyrosinemia type 2 (Oculocutaneous)</strong></td>\n<td><strong>Tyrosine aminotransferase</strong></td>\n</tr>\n<tr>\n<td>Tyrosinemia type 3</td>\n<td>4-Hydroxyphenylpyruvate dioxygenase [4-HPPD]</td>\n</tr>\n<tr>\n<td>Hawkinsinuria</td>\n<td>Missense mutations in the gene for 4-HPPD</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A preterm, extremely low birth weight baby, delivered by emergency caesarian section was admitted to the NICU and treated for respiratory distress syndrome. She responded to treatment and was discharged. At 6 months of age, she is still having recurrent respiratory distress and requires supplemental oxygen at home. The baby was diagnosed with bronchopulmonary dysplasia. Which of the following does not cause this clinical complication?",
    "choices": [
      {
        "id": 1,
        "text": "Oxygen therapy in the NICU"
      },
      {
        "id": 2,
        "text": "Mechanical trauma to the lungs"
      },
      {
        "id": 3,
        "text": "Inhalation of nitrous oxide"
      },
      {
        "id": 4,
        "text": "Patent Ductus Arteriosus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Inhalation of nitrous oxide (N2O)&nbsp;</strong>is <strong>not associated</strong> with bronchopulmonary dysplasia (BPD). Inhaled NO is a pulmonary vasodilator approved for the treatment of hypoxic respiratory failure in term and near-term infants with pulmonary hypertension. It may have a role in preventing BPD.</p>\n<p>BPD is a pathologic process leading to clinical features of chronic lung disease that originates in the neonatal period and is defined by an oxygen requirement for 28 days postnatally. Inflammatory injury to the developing lungs due to&nbsp;<strong>barotrauma</strong> and <strong>oxygen toxicity </strong>resulting&nbsp;from<strong> prolonged mechanical ventilation </strong>is the key factor driving the pathogenesis of BPD. Together with other antenatal and postnatal factors, it results in aberrant tissue repair, dysregulated vascular and arrested alveolar development, which is the basis of the pathology seen in BPD.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e9363aa9487641e1a00373c13bfe65a3x1280x1784.5980253878702.JPEG"
    ]
  },
  {
    "text": "An 18-month-old child presents to the pediatric OPD with complaints of fever and rashes for the past 1 week after extensive workup gets diagnosed as Juvenile chronic myeloid leukemia. Which of the following findings is not consistent with this baby\u2019s diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "The genetic study may reveal NF-1 mutation"
      },
      {
        "id": 2,
        "text": "The presence of Philadelphia chromosome on FISH"
      },
      {
        "id": 3,
        "text": "The bone marrow shows a myelodysplastic pattern with <20% blasts."
      },
      {
        "id": 4,
        "text": "The peripheral smear reveals nucleated RBCs"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Patients with juvenile myelomonocytic leukemia do not have the Philadelphia chromosome.</p>\n<p>Formerly termed <strong>juvenile chronic myeloid leukemia (CML)</strong>, it is a clonal proliferation of hematopoietic stem cells that typically affects <strong>children younger than 2 years </strong>of age. Patients with JMML present with rashes, lymphadenopathy, splenomegaly, and hemorrhagic manifestations.</p>\n<p>Patients with this disease <strong>do not have the Philadelphia chromosome</strong> (the Philadelphia chromosome is characteristic of CML). The peripheral blood smear shows an elevated leukocyte count with increased monocytes, thrombocytopenia, and anemia with the <strong>presence of erythroblasts</strong>. Bone marrow shows a myelodysplastic pattern, with blasts accounting for &lt;20% of cells. Patients with <strong>neurofibromatosis type 1 </strong>and <strong>Noonan syndrome</strong> have a predilection for this type of leukemia.</p>\n<p>JMML in the <strong>setting of Noonan syndrome</strong> is unique, with most patients having a <strong>spontaneous resolution.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "False positive low APGAR score is seen in all except __________.",
    "choices": [
      {
        "id": 1,
        "text": "Maternal acidosis"
      },
      {
        "id": 2,
        "text": "Maternal sedative administration"
      },
      {
        "id": 3,
        "text": "Prematurity"
      },
      {
        "id": 4,
        "text": "Choanal atresia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>False positive low APGAR score is seen in all of the above except Maternal acidosis.</p>\n<p>Maternal acidosis is associated with fetal acidosis and a normal APGAR score i.e. <strong>False-negative</strong> APGAR.</p>\n<p><strong>False positive </strong>low Apgar scores i.e no fetal acidosis but low Apgar score is seen in:</p>\n<ul>\n<li>Prematurity</li>\n<li>Drugs - <strong>analgesics, narcotics</strong>, sedatives, magnesium sulphate</li>\n<li>Acute cerebral edema</li>\n<li>Spinal cord trauma</li>\n<li><strong>Diaphragmatic hernia</strong></li>\n<li>Choanal atresia</li>\n<li><strong>Congenital pneumonia and sepsis</strong></li>\n<li>Congenital myopathy/neuropathy</li>\n<li>Hemorrhage / hypovolemia</li>\n<li>Precipitous delivery</li>\n</ul>\n<p><strong>False-negative</strong> APGAR i.e. Normal Apgar score with fetal acidosis is&nbsp;seen in:</p>\n<ul>\n<li>Maternal acidosis</li>\n<li><strong>High fetal catecholamine levels</strong></li>\n<li>Some full-term infants</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most characteristic finding of HIV in children is _________",
    "choices": [
      {
        "id": 1,
        "text": "Gastrointestinal infections"
      },
      {
        "id": 2,
        "text": "Persistent lymphadenopathy"
      },
      {
        "id": 3,
        "text": "Chronic cough"
      },
      {
        "id": 4,
        "text": "Failure to thrive"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li><strong>Failure to thrive</strong> is the <strong>universal characteristic</strong> finding in HIV children.</li>\n<li>Most common AIDS-<strong>defining illness</strong> in children is <strong><em>P. carinii pneumonia</em></strong>.</li>\n<li>Most common <strong>fungal infection</strong> <strong>of HIV children</strong> is <strong>oral candidiasis</strong>.</li>\n<li>Most common <strong>GI disease is chronic or recurrent diarrhea with malabsorption</strong>.</li>\n<li>Most common <strong>hematological manifestation is anemia</strong>.</li>\n<li>Most common <strong>renal disease is nephrotic syndrome</strong>.</li>\n<li>Most common <strong>neoplasms</strong> are <strong>non-Hodgkin\u2019s lymphoma, primary CNS lymphoma and leiomyosacomas</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 8-year-old  child is brought with complaints of pain in the neck and right shoulder with a restricted range of motion. He also experiences difficulty walking. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Facioscapulohumeral dystrophy"
      },
      {
        "id": 2,
        "text": "Long thoracic nerve palsy"
      },
      {
        "id": 3,
        "text": "Klippel Feil syndrome"
      },
      {
        "id": 4,
        "text": "Subacute combined degeneration"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical history of a child with pain in the <strong>neck</strong> and right <strong>shoulder</strong> with a restricted range of motion and <strong>difficulty </strong>in<strong> walking</strong> with the clinical image showing <strong>winging of the right scapula</strong> suggests a diagnosis of<strong> </strong><strong>facioscapulohumeral dystrophy.</strong>\u00a0</p>\n<p>Facioscapulohumeral dystrophy is an <strong>autosomal dominant disorder</strong> with weakness of <strong>facial </strong>and <strong>shoulder girdle</strong> muscles as the <strong>earliest</strong> and most severe manifestation. Facial weakness causes rounded and puckered lips and the inability to close eyes while sleeping. <strong>Scapular winging</strong> is a prominent feature even in infants. There is flattening of the deltoid contour and wasting of the triceps and biceps. There is gradual <strong>weakness</strong> of muscles of the <strong>hip girdle</strong> and <strong>thighs, </strong>which eventually undergo <strong>atrophy,</strong> leading to <strong>Gower's</strong> sign and <strong>Trendelenburg</strong> gait. Lumbar lordosis and kyphoscoliosis are common complications.</p>\n<p>Other options:</p>\n<p>Option B<strong>-</strong> <strong>Long thoracic nerve palsy </strong>can cause scapular winging, most- commonly medial winging, due to <strong>traumatic</strong> injuries and <strong>nontraumatic</strong> events due to dysfunction of the <strong>serratus anterior</strong>.</p>\n<p>Option C- <strong>Klippel Feil syndrome</strong> consists of a triad of <strong>low posterior hairline</strong>, <strong>short neck</strong> and <strong>decreased </strong>cervical range of <strong>motion.</strong></p>\n<p>Option D-<strong>Subacute combined degeneration (SACD)</strong> is due to the <strong>deficiency</strong> of <strong>vitamin B12</strong>. Pernicious anemia, partial gastrectomy, and <em><strong>Diphyllobothrium latum </strong></em>infestation can lead to this condition. The most severely affected regions in SACD are the<strong> posterior columns</strong> at the <strong>cervical</strong> and <strong>upper thoracic levels</strong> as well as the <strong>lateral corticospinal tracts</strong> and the <strong>cerebral cortex</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/261bca7ed0c749fd8364ef398b313501.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient of VSD with CCF develops clubbing with no cyanosis. The diagnosis is:",
    "choices": [
      {
        "id": 1,
        "text": "Right to left shunt"
      },
      {
        "id": 2,
        "text": "Left to right shunt"
      },
      {
        "id": 3,
        "text": "Subacute bacterial endocarditis"
      },
      {
        "id": 4,
        "text": "Pulmonary edema"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>VSD is the commonest congenital lesion complicated by infective endocarditis</strong>. This patient with CCF and clubbing is exhibiting clinical features correlating to endocarditis</p>\n<ul>\n<li>Some features of infective endocarditis indicating the <strong>involvement of the cardiovascular system</strong> include appearance of <strong>right or left heart failure</strong> (as seen in this patient) or development of a new murmur.</li>\n<li>Features of <strong>immunological response</strong> include <strong>clubbing</strong> (as seen in this patient), myalgia, splenomegaly and microscopic hematuria.</li>\n<li>Clubbing and splenomegaly tend to appear 3 weeks after the onset of endocarditis.</li>\n</ul>\n<p>Other options:</p>\n<ul>\n<li>Right to left shunt would give rise to Cyanosis (which is absent in this patient).</li>\n<li>Large left to right shunts can develop CCF as a complication but they will not have clubbing (as seen in this patient).</li>\n<li>Pulmonary edema is unlikely to cause clubbing.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Anika, a 6-year-old girl good at sprint events, has been avoiding her track practices over the recent few weeks. Her mother informs that she skips her classes owing to her knee pain. Her X-ray reveals subperiosteal haemorrhages. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin C deficiency"
      },
      {
        "id": 2,
        "text": "Vitamin B6 deficiency"
      },
      {
        "id": 3,
        "text": "Vitamin B1 deficiency"
      },
      {
        "id": 4,
        "text": "Vitamin B3  deficiency"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical vignette is suggestive of <strong>pseudoparalysis&nbsp;</strong>which&nbsp;is a feature of <strong>scurvy -&nbsp;</strong>vitamin C deficiency</p>\n<p>The <strong>subperiosteal haemorrhages</strong> in the lower limb bones can cause acute swelling and pain; the condition might mimic acute osteomyelitis or arthritis. The&nbsp;<strong>child refuses to walk </strong>because of the pain;&nbsp;hence, it is called pseudoparalysis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Deficiency of the enzyme porphobilinogen deaminase causes _____________",
    "choices": [
      {
        "id": 1,
        "text": "Porphyria cutanea tarda"
      },
      {
        "id": 2,
        "text": "Acute intermittent porphyria"
      },
      {
        "id": 3,
        "text": "Variegate porphyria"
      },
      {
        "id": 4,
        "text": "X-Linked protoporphyria"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Deficiency of the enzyme <strong>porphobilinogen deaminase</strong> causes <strong>acute intermittent porphyria</strong>.</p>\n<p>Other options:</p>\n<ul>\n<li>Porphyria cutanea tarda: Deficiency of Uroporphyrinogen decarboxylase (UROD)</li>\n<li>Variegate porphyria: Deficiency of Protoporphyrinogen oxidase (PPOX)</li>\n<li>&nbsp;X-Linked protoporphyria: Gain of function mutation of &delta;-aminolevulinate synthase 2 (ALAS2)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 3-year-old child is rushed to the emergency department because of an episode of fits associated with uprolling of eyes and high fever. Kernig\u2019s sign is negative and there are no post-ictal neurological deficits. There is a history of a similar episode when the child had a fever due to gastroenteritis. Which of the following is false regarding this type of seizures?",
    "choices": [
      {
        "id": 1,
        "text": "Likelihood of developing epilepsy is low"
      },
      {
        "id": 2,
        "text": "Associated with temperature of 38\u00b0C or higher"
      },
      {
        "id": 3,
        "text": "Antipyretics reduce the risk of recurrent febrile convulsions"
      },
      {
        "id": 4,
        "text": "Absence of having a developmental delay"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This is a probable case of <strong>febrile seizures</strong> due to the presence of high fever, no post-ictal deficits and a negative Kernig's sign ruling out meningitis.&nbsp;<strong>Antipyretics</strong> do not reduce the risk of recurrent febrile seizure, as the seizure often occurs as the temperature is rising or falling abruptly.</p>\n<p>Febrile seizures are seizures that-</p>\n<ul>\n<li>Occur between the age of <strong>6 months and 5 years</strong></li>\n<li>Occur at a temperature of 38&deg;C <strong>(100.4&deg;F) </strong>or<strong> higher</strong></li>\n<li>Are not due to any CNS infection or any metabolic imbalance</li>\n<li>Occur without a history of prior afebrile seizures</li>\n<li>Occur with <strong>no post-ictal neurological deficit</strong>.</li>\n</ul>\n<p><strong>Types of febrile seizures:</strong></p>\n<table style=\"width: 446px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 220px; text-align: center;\"><strong>Simple febrile seizures</strong></td>\n<td style=\"width: 218px; text-align: center;\"><strong>Complex (atypical) febrile seizures</strong></td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Occurs within 24 hours of the onset of fever</td>\n<td style=\"width: 218px; text-align: center;\">Can occur at any time during a fever</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Generalized seizures</td>\n<td style=\"width: 218px; text-align: center;\">Focal seizures</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Duration is &lt;15 min</td>\n<td style=\"width: 218px; text-align: center;\">Prolonged</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">No recurrence within 24 hrs of seizures</td>\n<td style=\"width: 218px; text-align: center;\">Recurrent</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Chances of going into epilepsy 1%</td>\n<td style=\"width: 218px; text-align: center;\">Chances of going into epilepsy 6%</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Investigations:</strong></p>\n<ul>\n<li>Lumbar puncture should be performed in the <strong>first episode</strong> of seizures with fever, for all infants <strong>&lt;6 months</strong> age (to exclude meningitis).</li>\n<li>EEG and neuroimaging are advised for children with atypical febrile seizures.</li>\n</ul>\n<p><strong>Treatment:</strong></p>\n<p>Antipyretics and proper hydration. Midazolam or diazepam (rectal) can be used if seizures present.</p>\n<p><strong>Prophylaxis:</strong></p>\n<ul>\n<li><strong>Intermittent prophylaxis:</strong> If the febrile seizures are 3 or more in 6 months, or 4 or more seizures in 1 year, oral <strong>clobazam</strong> (1mg/kg/day) for 3 days during the fever episode.</li>\n<li><strong>Continuous prophylaxis: </strong>If intermittent prophylaxis fails or in recurrent atypical febrile seizures, sodium valproate and phenobarbitone can be used.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child comes with cyanotic spells and chest Xray was as shown below; What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Tetralogy of Fallot"
      },
      {
        "id": 2,
        "text": "Tricuspid atresia"
      },
      {
        "id": 3,
        "text": "Pulmonary atresia with intact ventricular septum"
      },
      {
        "id": 4,
        "text": "TAPVC"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The typical radiologic configuration as shown in the anteroposterior view above is that of TOF and consists of:</p>\n<ul>\n<li>A narrow base.</li>\n<li>Concavity of the left heart border in the area usually occupied by the pulmonary artery.</li>\n<li>Normal overall heart size.</li>\n<li>The <strong>hypertrophied right ventricle</strong> causes the rounded apical shadow to be <strong>uptilted</strong> so that it is situated higher above the diaphragm than normal and pointing horizontally to the left chest wall. The <strong>cardiac silhouette has been likened to that of a boot (&ldquo;coeur en sabot&rdquo;).</strong></li>\n<li>The hilar areas and lung fields are relatively clear because of <strong>diminished pulmonary blood flow</strong> or the small size of the pulmonary arteries.</li>\n<li>The aorta is usually large.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4c7300ea4c0a4728935f5b3a186137f1.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Following a term Caesarean delivery, a newborn presents with fast breathing. On examination, respiratory rate is 68/min and the chest is clear. A chest X-ray shows fluid in the intralobar fissures and perihilar pulmonary vascular markings. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hyaline membrane disease"
      },
      {
        "id": 2,
        "text": "Meconium aspiration syndrome"
      },
      {
        "id": 3,
        "text": "Transient tachypnea of newborn"
      },
      {
        "id": 4,
        "text": "Congenital diaphragmatic hernia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most prominent diagnosis in a newborn with tachypnea, clear chest, and given X-ray findings of intralobar fluid and perihilar pulmonary vascular markings is <strong>transient tachypnea of the newborn (TTN). </strong></p>\n<p>TTN is a self-limited cause of tachypnea associated with delayed absorption of fetal lung fluid.\u00a0It is characterized by early-onset tachypnea that is relieved by minimal oxygen supplementation (&lt;40%). There maybe retractions, expiratory grunting, or cyanosis which also resolves with oxygen. On examination, the\u00a0<strong>chest is clear</strong> without crackles or wheeze.</p>\n<p>The chest X-ray shows prominent pulmonary vascular markings, <strong>fluid in the intralobar fissures</strong>, and, rarely, small pleural effusions.</p>\n<p>Most infants recover usually within 3 days with supportive care.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Hyaline membrane disease</strong>- Radiographic findings like hypoaeration, <strong>diffuse reticulo-granular pattern</strong>, and air bronchograms will be seen.</p>\n<p>Option B:\u00a0<strong>Meconium aspiration syndrome</strong> occurs in term or <strong>post-term infants.</strong>\u00a0The infants are meconium-stained and may be depressed and require resuscitation at birth; The typical chest radiograph is characterized by <strong>patchy infiltrates, coarse streaking</strong> of both lung fields, and <strong>hyperinflation</strong>.</p>\n<p>Option D: <strong>Congenital diaphragmatic hernia</strong> presents with respiratory distress, scaphoid abdomen, and <strong>bowel sounds</strong> heard in the <strong>chest</strong> wall.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As a part of the Anemia Mukt Bharat program, you screen preschool children for anemia. What Hb values would prompt you to diagnose anemia in this age group?",
    "choices": [
      {
        "id": 1,
        "text": "< 13 g/dL"
      },
      {
        "id": 2,
        "text": "<12 g/dL"
      },
      {
        "id": 3,
        "text": "<11.5 g/dL"
      },
      {
        "id": 4,
        "text": "<11 g/dL"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Anaemia in a <strong>preschool child</strong> is defined as a hemoglobin level of <strong>&lt;11 g/dL.</strong></p>\n<p>Preschool age is defined as 2 to 5 years.</p>\n<p>WHO cut-offs for the diagnosis of anaemia:</p>\n<table style=\"height: 178px; width: 235.111px;\">\n<tbody>\n<tr>\n<td style=\"width: 144px;\"><strong>Age</strong></td>\n<td style=\"width: 79.1111px;\"><strong>Hemoglobin (g/dL)</strong></td>\n</tr>\n<tr>\n<td style=\"width: 144px;\"><strong>6 months to 5years</strong></td>\n<td style=\"width: 79.1111px;\"><strong>&lt;11&nbsp;</strong></td>\n</tr>\n<tr>\n<td style=\"width: 144px;\">5 to 11 years</td>\n<td style=\"width: 79.1111px;\">&lt;11.5</td>\n</tr>\n<tr>\n<td style=\"width: 144px;\">12 to<strong>&nbsp;</strong>14 years</td>\n<td style=\"width: 79.1111px;\">&lt;12</td>\n</tr>\n<tr>\n<td style=\"width: 144px;\">Non-pregnant women (&ge;15 years)</td>\n<td style=\"width: 79.1111px;\">&lt;12</td>\n</tr>\n<tr>\n<td style=\"width: 144px;\">Pregnant women</td>\n<td style=\"width: 79.1111px;\">&lt;11</td>\n</tr>\n<tr>\n<td style=\"width: 144px;\">Men (&ge;15 years)</td>\n<td style=\"width: 79.1111px;\">&lt;13</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are evaluating JIA patients in a pediatric rheumatology clinic. As per the ILAR criteria, which of the following patients would you not include under JIA?",
    "choices": [
      {
        "id": 1,
        "text": "A 3-year-old girl with Psoriatic arthritis"
      },
      {
        "id": 2,
        "text": "A 10-year-old boy with Enthesitis-related arthritis"
      },
      {
        "id": 3,
        "text": "A 18-year-old with RF negative Polyarthritis first diagnosed 3 years back"
      },
      {
        "id": 4,
        "text": "A 14-year-old female with Reactive arthritis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Reactive arthritis</strong> is <strong>not</strong> a subtype of Juvenile Idiopathic Arthritis(<strong>JIA</strong>) so you would not include this subset of patients under your evaluation.</p>\n<p>ILAR (International League of Associations for Rheumatology) defines <strong>JIA</strong> as arthritis&nbsp;of one or more joints with <strong>onset below 16 years</strong> of age and persisting <strong>for at least 6 weeks</strong>.</p>\n<p>The subtypes of Juvenile Idiopathic Arthritis (JIA):-</p>\n<ol>\n<li>Oligoarthritis (4 or lesser joints) <strong>(Most common type)</strong></li>\n<li>Polyarthritis (5 or more joints)\n<ol>\n<li>RF Positive</li>\n<li>RF Negative</li>\n</ol>\n</li>\n<li>Systemic JIA</li>\n<li>Psoriatic arthritis</li>\n<li>Enthesitis-related arthritis</li>\n<li>Undifferentiated</li>\n</ol>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A small baby who was being evaluated for multiple bone fractures with minor trauma is found to have brittle bone disease. Which of the following is false regarding this disease?",
    "choices": [
      {
        "id": 1,
        "text": "It is caused by defects in type 2 collagen."
      },
      {
        "id": 2,
        "text": "Predominantly autosomal-dominant inheritance is seen."
      },
      {
        "id": 3,
        "text": "Blue sclerae and deafness may be associated."
      },
      {
        "id": 4,
        "text": "Biphosphonates are useful in the treatment."
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Brittle bone disease is another name for <strong>osteogenesis imperfecta (OI)</strong>. It is due to <strong>defects in type 1 collagen</strong>, not type 2 collagen.</p>\n<p>There are 12 types of OI, with type 1 being the most common. Triad of <strong>fragile bones,</strong> <strong>blue sclera,</strong> and <strong>deafness</strong> is known as <strong>van der Hoeve syndrome</strong>. Treatment includes bisphosphonate therapy and orthopedic rehabilitation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A neonate with trisomy 21 has anemia, petechiae, hepatosplenomegaly, and no life-threatening complications on examination.CBC reveals high leucocyte count and peripheral smear shows numerous myeloblasts. The genetic makeup of blast cells when studied reveals GATA-1 mutations. At 3 months of age, his CBC counts come back to normal and there are no blast cells in his peripheral smear. As his treating physician, what would you recommend?",
    "choices": [
      {
        "id": 1,
        "text": "Chemotherapy"
      },
      {
        "id": 2,
        "text": "Radiotherapy"
      },
      {
        "id": 3,
        "text": "Bone marrow transplant"
      },
      {
        "id": 4,
        "text": "A close follow-up"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This infant has a&nbsp;<strong>transient myeloproliferative disease,</strong> which usually <strong>resolves spontaneously</strong> in the first&nbsp;3 months of life, and <strong>they require close-follow up because</strong>&nbsp;20&ndash;30% will develop typical leukemia (<strong>acute megakaryocytic leukemia</strong>) by 3 years of life.</p>\n<p>Approximately 10% of neonates with Down syndrome develop transient leukemia or myeloproliferative disorder characterized by high leukocyte counts, blast cells in the peripheral blood, and associated anemia, thrombocytopenia, and hepatosplenomegaly. These features usually resolve within the first 3 months of life. Although these neonates can require temporary transfusion support, they do not require chemotherapy unless there is evidence of life-threatening complications.</p>\n<p>As only 20-30% of such children develop acute megakaryocytic leukemia a bone marrow transplant would be a drastic step in our case.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 6-year-old boy is brought with complaints of abdominal distension, fatigue, and night sweats for the past 4 months. He also has a 2-month history of postprandial fullness and recurrent non-bilious vomiting. On examination, he is pale, has hepatosplenomegaly and shifting dullness. A CT scan shows mesenteric and retroperitoneal lymph node enlargement. A biopsy specimen of the mesenteric lymph node reveals tumor cells with high mitotic index and starry sky pattern. The cytogenetic study revealed t(8;14).To stage the disease, which of the following systems would you use?",
    "choices": [
      {
        "id": 1,
        "text": "Ann-Arbor staging"
      },
      {
        "id": 2,
        "text": "Binet staging"
      },
      {
        "id": 3,
        "text": "St Jude staging"
      },
      {
        "id": 4,
        "text": "RAI staging"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Retroperitoneal and mesenteric lymphadenopathy</strong> with hepatosplenomegaly, anemia, and short duration of disease, point towards a diagnosis of lymphoid neoplasms.The classic translocation of <strong>t(8;14)</strong> and <strong>starry sky appearance</strong> with a high mitotic index on HPE point toward a diagnosis of <strong>Burkitt lymphoma</strong>. Burkitt&rsquo;s lymphoma is the <strong>most common type of Non-Hodgkin lymphoma</strong> worldwide. <strong>St Jude system of staging</strong> is used for staging childhood non-Hodgkin lymphoma.</p>\n<table style=\"height: 202px; width: 448.3958435058594px;\">\n<tbody>\n<tr>\n<td style=\"width: 229px;\">\n<p><strong>Disease</strong></p>\n</td>\n<td style=\"width: 218.39584350585938px;\">\n<p><strong>System of staging</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 229px;\">\n<p>Hodgkin lymphoma</p>\n</td>\n<td style=\"width: 218.39584350585938px;\">\n<p>Ann&ndash;Arbor staging</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 229px;\">\n<p><strong>Non-Hodgkin Lymphoma</strong></p>\n</td>\n<td style=\"width: 218.39584350585938px;\">\n<p><strong>St Jude(Murphy) staging<br /></strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 229px;\">\n<p>Chronic lymphoid leukemia</p>\n</td>\n<td style=\"width: 218.39584350585938px;\">\n<p>Rai staging<br />Binet staging</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>The current revised staging system used for NHL is the <strong>International Pediatric Non-Hodgkin Lymphoma Staging System (IPNHLSS)</strong> which reflects our increasing ability to diagnose lower levels of organ involvement with disease. For instance, the older staging system (St. Jude/Murphy classification) did not account for molecular or flow cytometry involvement of bone marrow, which is now reflected in the new system.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are causes of normal anion gap metabolic acidosis, except ______",
    "choices": [
      {
        "id": 1,
        "text": "Renal tubular acidosis"
      },
      {
        "id": 2,
        "text": "Diarrhea"
      },
      {
        "id": 3,
        "text": "Acidosis due to intestinal bacterial overgrowth"
      },
      {
        "id": 4,
        "text": "Urinary tract diversions"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Acidosis due to intestinal bacterial overgrowth causes high anion gap metabolic acidosis because of excessive bacterial metabolism of glucose into lactic acid.</p>\n<p><strong>Anion gap</strong></p>\n<p>Normally, in the serum, the total number of cations is equal to the total number of anions. But,&nbsp;<strong>few of the anions</strong> (lactate, phosphate, and&nbsp;sulphate) <strong>cannot be measured</strong> and this is called an anion gap.</p>\n<p><strong>Anion gap = [Na<sup>+</sup>] &minus;([Cl<sup>-</sup>]+[HCO3<sup>-</sup>])</strong></p>\n<p><strong>Metabolic acidosis</strong></p>\n<p>Metabolic acidosis is of two types:</p>\n<p><strong>(1) Normal anion gap metabolic acidosis (NAGMA)</strong></p>\n<ul>\n<li>Diarrhea (Loss of bicarbonate is compensated by chloride reabsorption)</li>\n<li>Renal tubular acidosis</li>\n<li>Urinary tract diversions (reabsorption of ammonium and hydrogen by the bowel)</li>\n</ul>\n<p><strong>(2) High anion-gap metabolic acidosis (HAGMA)</strong></p>\n<ul>\n<li>Lactic acidosis (hypoxia, malignancy)</li>\n<li>Ketoacidosis (diabetic, starvation)</li>\n<li>Poisoning (ethylene glycol, methanol, salicylate)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/be1f9a8882884dfeb3347484be25f488x1280x1137.JPEG"
    ]
  }
];
        let quizName = 'Pediatrics Test Ii';
        const quizFilename = 'pediatrics-test-ii-51b4e13e.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>