<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>237 Surgery Neet 2023 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Surgery
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">27</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 55-year-old male presented with verrucous carcinoma around the glans of the penis. Examination reveals that the inguinal lymph nodes are not enlarged. What is the appropriate management for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Total penectomy."
      },
      {
        "id": 2,
        "text": "CO2 laser excision"
      },
      {
        "id": 3,
        "text": "Topical 5-fluorouracil"
      },
      {
        "id": 4,
        "text": "Partial penectomy."
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The most appropriate management for this patient\u00a0with verrucous carcinoma around the <strong>glans</strong> of the penis is <strong>partial penectomy</strong>.</p>\n<div class=\"page\" title=\"Page 1573\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Carcinoma of the penis is commonly a <strong>squamous</strong> cell carcinoma. It arises from the skin of the <strong>glans penis</strong> or the <strong>prepuce</strong>. The lesion can be flat or warty in appearance.</p>\n<ul>\n<li>T1-\u00a0confined to the <strong>skin</strong></li>\n<li>T2-\u00a0invades the <strong>corpus spongiosum</strong> or <strong>cavernosum</strong>.</li>\n<li>T3-\u00a0invades the <strong>urethra</strong></li>\n<li>T4-\u00a0invades adjacent structures.</li>\n</ul>\n<p>The <strong>first lymph node</strong> to be involved is the <strong>superficial inguinal lymph node</strong> and thus, the <strong>sentinel lymph node biopsy </strong>(SLNB) is helpful for evaluating the spread of penile cancer.</p>\n<p>Tumors of low-grade and low-stage are managed by <strong>Mohs\u2019</strong> surgery. Tumors involving the <strong>glans</strong> penis require <strong>glansectomy,</strong> and in advanced cases require <strong>partial penectomy</strong>.</p>\n<p>Other options:</p>\n<p>Option A: In penile carcinoma, <strong>total amputation</strong> of the penis is done if the <strong>stump </strong>is<strong> &lt; 2cm </strong>after resection of the tumor.</p>\n<p>Options B, and C: <strong>Topical 5-fluorouracil</strong> cream and <strong>CO<sub>2</sub> laser ablation</strong> are preferred in case of penile intraepithelial neoplasia.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/df5cd4c78b6c4028b94b7174c6300637.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2008d88e432f4db0b71ec4f33d005f18x1280x2304.JPEG"
    ]
  },
  {
    "text": "Identify the procedure being performed in the image given below.",
    "choices": [
      {
        "id": 1,
        "text": "Intraosseous cannula for pain relief"
      },
      {
        "id": 2,
        "text": "Bone marrow aspiration"
      },
      {
        "id": 3,
        "text": "Intraosseous route access for giving IV fluids"
      },
      {
        "id": 4,
        "text": "Intraosseous abscess drainage"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The procedure being performed in the above image is&nbsp;<strong>intraosseous route access for transfusing IV fluids&nbsp;</strong>in the anterior proximal tibia.</p>\n<p>The intraosseous route is an alternative to the intravenous (IV) route in the transfusion of fluids in shock. The marrow of long bones has a rich network of vessels that drain into a central venous canal, emissary veins, and ultimately the central circulation. So, the bone marrow functions as a <strong>non-collapsible</strong> venous access route.</p>\n<p>Intraosseous cannulation is recommended for patients in whom <strong>IV access</strong> proves <strong>difficult</strong> or unattainable. (e.g., in&nbsp;<strong>cardiopulmonary arrest</strong>). In such a case, if venous access is not available within 1 min,&nbsp;an intraosseous needle should be placed in the anterior proximal tibia.&nbsp;During a resuscitation procedure, all anesthetic drugs and fluids can be administered through&nbsp;intraosseous cannulae.</p>\n<p><strong>Insertion sites</strong> for intraosseous infusion:&nbsp;</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">In the <strong>proximal tibia</strong>, 1-2 cm anteromedial from the tibial tuberosity</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Distal tibia</strong> at the junction of the medial malleolus and the shaft of the tibia</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Distal one-third</strong> of the <strong>femur</strong></li>\n</ul>\n<div class=\"page\" title=\"Page 707\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The response time to drug administration in&nbsp;intraosseous infusion<strong>&nbsp;</strong>is close to the IV route. Fluids should be given as boluses using a 50 mL syringe.</p>\n<p>The image below shows the procedure of intraosseous cannulation.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5643fcb7d9d645f1bb5a87876d642627.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/db2eb2bf3be34415997390fd7b265b31x1280x1352.JPEG"
    ]
  },
  {
    "text": "A diabetic patient presents with sudden-onset perineal pain. On examination, foul-smelling discharge, and necrotic tissue as seen in the image is noted. Which of the following is true about the given condition?",
    "choices": [
      {
        "id": 1,
        "text": "Anti-gas gangrene serum indicated for all cases"
      },
      {
        "id": 2,
        "text": "Urinary diversion is the next step"
      },
      {
        "id": 3,
        "text": "Bilateral orchidectomy must be done"
      },
      {
        "id": 4,
        "text": "Mixed aerobic and anaerobic infection"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given condition is likely to be <strong>Fournier gangrene.&nbsp;</strong>It is a<strong> mixed flora aerobic</strong> and <strong>anaerobic infection</strong>.</p>\n<p><strong>Fournier's gangrene</strong>&nbsp;is a polymicrobial infection and a type of necrotizing fasciitis of the perineum, external genitalia, and perianal region.&nbsp;<strong>Risk factors</strong>&nbsp;include immunocompromised states such as&nbsp;<strong>HIV, alcoholism, </strong>and<strong> diabetes</strong>.&nbsp;The infection may be precipitated by minor procedures in the perineal area, such as a bruise, scratch, urethral dilatation, injection of hemorrhoids, or opening of a periurethral abscess. The infection spreads along the&nbsp;<strong>dartos, Scarpa, and&nbsp;Colles fascia</strong>.</p>\n<p>The sequence of events that lead to the development of gangrene are as follows: A mixed infection of the&nbsp;<strong>aerobic and anaerobic bacteria&nbsp; &rarr;</strong>&nbsp;fulminating inflammation of&nbsp;<strong>subcutaneous</strong>&nbsp;tissue&nbsp;&rarr;&nbsp;<strong>obliterative arteritis</strong>&nbsp;of the arterioles that supply the scrotal skin&nbsp;&rarr; gangrene.&nbsp;</p>\n<p>Clinical features of Fournier gangrene are scrotal pain, fever, prostration, and pallor. Cellulitis spreads rapidly and may be associated with&nbsp;eschars, necrosis, flaking skin, and crepitus. The&nbsp;<strong>testis</strong>&nbsp;is usually&nbsp;<strong>not affected.</strong></p>\n<p><strong>Diagnosis</strong>&nbsp;is majorly&nbsp;<strong>clinical</strong>&nbsp;and very rarely made by laboratory or imaging findings.&nbsp;</p>\n<p>The steps in the management of this condition:</p>\n<ol>\n<li><strong>IV fluids</strong></li>\n<li><strong>IV antibiotics</strong></li>\n<li>Urgent surgical<strong>&nbsp;excision followed</strong>&nbsp;by<strong>&nbsp;skin grafting</strong>&nbsp;in later stages.<strong>&nbsp;Wide surgical excision </strong>is often necessary.<strong>&nbsp;</strong></li>\n</ol>\n<p>&nbsp;When the infection has been controlled, a&nbsp;<strong>vacuum-assisted dressing</strong>&nbsp;may be helpful. Skin grafting is essential for a patient surviving an acute episode.&nbsp;Despite the best therapy, mortality rates are around 50%.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A: Anti-gas gangrene serum is a treatment for gas gangrene that is of historical importance and is no longer used. Treatment of gas gangrene is now done with antibiotics.&nbsp;</p>\n<p>Option B: While urinary diversion and other supportive measures are useful in the management of the condition, it is not the next best step.</p>\n<p>Option C: The blood supply of the testes is separate from that of the overlying skin, and hence, testes can be preserved during debridement.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8cdd42c24d6540e7a62d40fbfd9eb97a.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most common complication following ligation of the first vessel during abdominoperineal resection for rectal carcinoma?",
    "choices": [
      {
        "id": 1,
        "text": "Parasympathetic - bladder dysfunction and retrograde ejaculation."
      },
      {
        "id": 2,
        "text": "Sympathetic - bladder dysfunction and impotence."
      },
      {
        "id": 3,
        "text": "Sympathetic -  retrograde ejaculation and  bladder dysfunction."
      },
      {
        "id": 4,
        "text": "Sympathetic - Impotence and loss of cutaneous sensation in perineal region"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: justify;\">The <strong>first vessel</strong> that is usually ligated during abdominoperineal resection (APR) is the <strong>inferior mesenteric artery</strong> (IMA). A high&nbsp;<strong>inferior mesenteric artery</strong> <strong>ligation</strong> during&nbsp;abdominoperineal resection can injure the <strong>superior hypogastric nerve,</strong> resulting in <strong>sympathetic dysfunction </strong>and&nbsp;leading to <strong>retrograde ejaculation and bladder dysfunction.</strong></p>\n<p style=\"text-align: justify;\">Abdominoperineal resection is the <strong>complete excision</strong> of the <strong>rectum</strong>, <strong>anal</strong> <strong>canal,</strong> and <strong>sphincter</strong> apparatus. This is done with the creation of a <strong>permanent colostomy.&nbsp;</strong>This is commonly preferred in <strong>elderly patients</strong> with <strong>distal rectal cancer</strong> with poor sphincter function. In these patients, the end colostomy offers a better quality of life.</p>\n<p style=\"text-align: justify;\">Complications:</p>\n<div class=\"page\" title=\"Page 1426\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li><strong>Higher recurrence rates</strong> compared to low anterior resection.</li>\n<li>Anastomotic leaks or dehiscences</li>\n<li>Necrosis of the transposed colon</li>\n<li>Bleeding</li>\n<li>Strictures&nbsp;&nbsp;</li>\n</ul>\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The <strong>sympathetic innervation</strong> of the rectum is from <strong>L1, L2, and L3,</strong>&nbsp;which together form the <strong>superior hypogastric plexus</strong>. They divide into left and right hypogastric nerves at the level of the sacral promontory supplying the <strong>rectum and the genitourinary system.&nbsp;</strong>A high IMA ligation during surgery can result in sympathetic dysfunction causing&nbsp;retrograde ejaculation.</p>\n<p>Injury to the <strong>pelvic plexus</strong> and nervi erigentes, during the division along the pelvic side wall, can cause <strong>erectile dysfunction, impotence, and atonic bladder</strong>. Injury to the <strong>periprostatic plexus</strong> can lead to sexual and bladder dysfunction.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 1427\">&nbsp;</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents to the clinic with the lesion given in the image. He had a traumatic injury to the chest one year ago. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hemangioma"
      },
      {
        "id": 2,
        "text": "Hypertrophic scar"
      },
      {
        "id": 3,
        "text": "Keloid"
      },
      {
        "id": 4,
        "text": "Neurofibroma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image showing a large area of scar tissue is suggestive of a <strong>keloid</strong>.</p>\n<p>A keloid refers to <strong>excess accumulation of collagen</strong> at the scar site with <strong>growth of the scar tissue beyond the boundaries</strong> of the original wound. It does <strong>not regress.</strong> The patient's history of traumatic injury to the chest one year ago, followed by the development of an expanding scar, is suggestive of a keloid.&nbsp;The keloid is often glossy in appearance and rubbery in texture. They are composed of thick bundles of collagen.</p>\n<p>Treatment of keloids usually involves <strong>intralesional injections of triamcinolone</strong>. Multiple doses are required at intervals over several weeks and may result in flattening but rarely does the wound narrow.</p>\n<p>Option A:<strong>&nbsp;</strong>A hemangioma is a vascular tumor that arises from the endothelium. They typically present as red or pinkish macules or raised lesions.</p>\n<p>Option B: Hypertrophic scars, unlike keloids, remain within the boundaries of the original wound and tend to regress over time. Since this scar has failed to regress over 1 year and has grown beyond the original wound margins, it is more likely to be a keloid.</p>\n<p>Option D: Neurofibromas are benign tumors arising from Schwann cells. They usually present as soft, flesh-colored nodules, often in association with neurofibromatosis type 1, a genetic disorder. The patient's history of chest trauma and the appearance of the lesion make neurofibroma an unlikely diagnosis in this case.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5e764ec763fc4f34a69926767cfb8463.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old male underwent bilateral laparoscopic hernia repair for inguinal hernia. Postoperatively, he complained of pain in the right  thigh. Which of the following nerve entrapment leads to this symptom?",
    "choices": [
      {
        "id": 1,
        "text": "Ilioinguinal nerve"
      },
      {
        "id": 2,
        "text": "Iliohypogastric nerve"
      },
      {
        "id": 3,
        "text": "Femoral nerve"
      },
      {
        "id": 4,
        "text": "Lateral cutaneous nerve of thigh"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Entrapment of the <strong>lateral cutaneous nerve </strong>of the<strong> thigh</strong>&nbsp;is the most likely cause of pain in this patient with history of&nbsp;<strong data-stringify-type=\"bold\">laparoscopic </strong>hernia repair.&nbsp;</p>\n<div class=\"page\" title=\"Page 1640\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The<strong data-stringify-type=\"bold\"> laparoscopic&nbsp;</strong>approach is preferred for <strong>bilateral</strong> or <strong>recurrent</strong> inguinal hernias. Transabdominal preperitoneal (TAPP) repair and total extraperitoneal (TEP) repair are the methods commonly used.</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 1647\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The nerves commonly injured in laparoscopic repair are the <strong>genitofemoral</strong> and lateral femoral cutaneous nerves of the thigh. Patients present with <strong>acute neuropathic pain</strong> along the dermatomal distribution. Injury to the <strong>lateral femoral cutaneous</strong> nerve results in <strong>meralgia paresthetica</strong>.</p>\n<p>Treatment consists of rest, ice, NSAIDs, physical therapy, and possible local corticosteroid and anesthetic injection. Drugs like <strong>gabapentin</strong> can be used.</p>\n<p>In laparoscopic TAPP repair, to reduce the chances of nerve injury during mesh placement, tacks are ideally placed&nbsp;<strong data-stringify-type=\"bold\">above the iliopubic tract</strong>&nbsp;to avoid nerve injury.</p>\n<p>Other options:</p>\n</div>\n</div>\n</div>\n</div>\n<p>Option A: <strong>Ilioinguinal nerve</strong>&nbsp;may be commonly injured during&nbsp;<strong>open hernia repair.</strong> It&nbsp;leads to sensory disturbances and pain over the skin of the genitalia and upper medial thigh.</p>\n<p>Option B:&nbsp;<strong>Iliohypogastric nerve&nbsp;</strong>can be injured while making an incision in the <strong>right iliac fossa</strong> during hernia surgery.</p>\n<div class=\"page\" title=\"Page 1123\">Option C: <strong>Femoral nerve</strong> can be compressed&nbsp;by <strong>retroperitoneal tumors</strong> or hemorrhage in patients on anticoagulants or bleeding diathesis. It presents as&nbsp;wasting and weakness of the <strong>quadriceps femoris</strong> muscle making the patient difficult to walk.&nbsp;Pain and paraesthesia are seen along the region of the distribution of the nerve.</div>\n<div class=\"page\" title=\"Page 1123\">&nbsp;</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient was brought to the ER following a road traffic accident. On examination, the patient opens his eyes to a painful stimulus, speaks inappropriately, and withdraws his limbs to a painful stimulus. What is his GCS score?",
    "choices": [
      {
        "id": 1,
        "text": "E2V2M3"
      },
      {
        "id": 2,
        "text": "E3V3M3"
      },
      {
        "id": 3,
        "text": "E2V3M4"
      },
      {
        "id": 4,
        "text": "E3V2M2"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The GCS score of this patient: <strong>E2V3M4</strong></p>\n<ul>\n<li>He opens his eyes to a painful stimulus -\u00a0<strong>E2</strong></li>\n<li>He produces inappropriate words only -\u00a0<strong>V3</strong></li>\n<li>He withdraws his limbs -\u00a0<strong>M4</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with fever and abdominal pain with jaundice. Investigations showed the given findings. Which of the following statements is true regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Surgery is mandatory"
      },
      {
        "id": 2,
        "text": "Fine-needle aspiration cytology is diagnostic"
      },
      {
        "id": 3,
        "text": "Angioembolization is the treatment of choice"
      },
      {
        "id": 4,
        "text": "Echinococcus species is involved in etiology"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Option C: Angioembolization has no role in the treatment of hydatid cyst.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b3d1f7aaf18f4727b85a8ca921c07fa5.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4cb42f25b46e4274a4c77b4be802654dx720x477.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/57aca12fd6bb49ee979afe66750bf842x232x282.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/66b5132aaa314a67b19fb4145f1bb0e0x1280x817.PNG"
    ]
  },
  {
    "text": "A 40-year-old male patient presents with a swelling that has been slowly growing in the past 2 years. On examination, it was variable in consistency and fully mobile. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Dermoid cyst"
      },
      {
        "id": 2,
        "text": "Parotid tumor"
      },
      {
        "id": 3,
        "text": "Sebaceous cyst"
      },
      {
        "id": 4,
        "text": "Cervical lymph node"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Dermoid cysts</strong>&nbsp;are slow-growing benign lesions. They are mostly seen on the scalp and skull. It is made of hair, teeth, cartilage, and skin glands. Other common sites are the forehead, postauricular, and lateral part of the eyebrow.</p>\n<p>A <strong>sebaceous cyst</strong> is derived from hair follicle infundibulum or traumatic inclusion. The most common site of a sebaceous cyst is the&nbsp;<strong>postauricular sulcus</strong>&nbsp;or below and behind the ear lobule. Malignancy is rare.&nbsp;</p>\n<p><strong>Clinical features</strong>&nbsp;of a sebaceous cyst include:</p>\n<ul>\n<li aria-level=\"1\"><strong>Benign</strong>&nbsp;swelling that is&nbsp;<strong>mobile, fluctuant,&nbsp;</strong>and&nbsp;<strong>fixed</strong>&nbsp;to the skin. It presents with a&nbsp;<strong>central punctum</strong>&nbsp;in about 70% of cases.&nbsp;</li>\n<li aria-level=\"1\">It is generally an asymptomatic,&nbsp;<strong>non-tender</strong>&nbsp;swelling. It can be&nbsp;<strong>painful&nbsp;</strong>and&nbsp;<strong>red&nbsp;</strong>if&nbsp;<strong>inflamed.</strong></li>\n<li aria-level=\"1\">It may ooze out a&nbsp;<strong>foul-smelling, cheese-like discharge.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8f7d5b44e80b44d1936d67e55d2cb014.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/457365b8c7714479bbfceb1a1dce5271x727x464.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3604446229474001bf2310794258f1eex600x452.JPEG"
    ]
  },
  {
    "text": "A patient who is a known case of alcohol dependence syndrome presents with sudden and unintentional weight loss. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hepatic adenoma"
      },
      {
        "id": 2,
        "text": "Cholangiocarcinoma"
      },
      {
        "id": 3,
        "text": "Hepatocellular carcinoma"
      },
      {
        "id": 4,
        "text": "Alcoholic hepatitis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most likely diagnosis in this patient with a history of alcohol dependence, sudden unintentional weight loss, and <strong>raised AFP</strong> is <strong>hepatocellular carcinoma</strong> (HCC).</p>\n<div class=\"page\" title=\"Page 624\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>HCC</strong> is the <strong>most common cause of primary liver cancer</strong>. It is more commonly seen in males, and the peak age group is between 65-70 years. The <strong>main risk factor</strong> for HCC is <strong>cirrhosis</strong> and associated chronic liver damage due to chronic infection by hepatitis B or C virus (HBV or HCV), <strong>alcohol abuse</strong>, metabolic syndrome, or hemochromatosis. The<strong> incidence </strong>of<strong> HCC</strong> is <strong>increasing</strong> worldwide. This is contributed by the increase in HCV and HBV infections, along with lifestyle disorders like obesity.&nbsp;Obesity is associated with non-alcoholic fatty liver disease (NAFLD). This progresses on to non-alcoholic steatohepatitis (NASH) causing cirrhosis and hepatocellular carcinoma. Thus,&nbsp;NASH and NAFLD are risk factors for HCC.&nbsp;</p>\n<p>Regular surveillance, including liver imaging and monitoring of alpha-fetoprotein levels, is recommended for high-risk populations, such as those with liver cirrhosis, chronic hepatitis B or C infection, or significant alcohol consumption. Early detection of HCC can improve treatment outcomes and overall prognosis.</p>\n</div>\n</div>\n</div>\n</div>\n<p>Very early HCC is treated by ablation. Early HCC with a single nodule is resected, but when there are multiple nodules over 3 cm, ablation or transplantation are considered.&nbsp;Intermediate-stage HCC is treated by chemoembolization.&nbsp;Transarterial chemoembolization (<strong>TACE</strong>) is used for multinodular lesions. &nbsp;</p>\n<p>Other Options:</p>\n<p>Option A: <strong>Hepatic adenomas</strong> are <strong>benign liver tumors</strong> that are often <strong>associated with oral contraceptive use</strong> and <strong>anabolic steroid use</strong>.&nbsp;The patient's history of alcohol dependence and high alpha-fetoprotein levels are not consistent with hepatic adenoma. Additionally, hepatic adenomas are usually <strong>asymptomatic</strong> and do not present with sudden unintentional weight loss.</p>\n<p>Option B: Cholangiocarcinoma&nbsp;is a cancer that arises from the bile ducts within the liver. While patients with alcohol dependence may have an increased risk of cholangiocarcinoma, the <strong>elevated alpha-fetoprotein levels are not typical</strong> for this type of cancer. Cholangiocarcinomas usually <strong>present with jaundice, pruritus, and abdominal pain</strong>, but sudden weight loss is less characteristic.</p>\n<p>Option D: <strong>Alcoholic hepatitis</strong> is an inflammation of the liver caused by excessive alcohol consumption. It usually presents with jaundice, fever, and abdominal pain. While the patient's history of alcohol dependence might suggest alcoholic hepatitis, elevated alpha-fetoprotein levels and unintentional weight loss are not typical for this condition. Moreover, the AST/ALT ratio is usually greater than 2 in alcoholic hepatitis, but it is 0.5 in this case.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with features of chronic pancreatitis with recurrent attacks and has a 10 mm dilatation of the pancreatic duct with intraductal calculi present. Which of the following is the surgery of choice?",
    "choices": [
      {
        "id": 1,
        "text": "Pancreaticoduodenectomy"
      },
      {
        "id": 2,
        "text": "Longitudinal pancreaticojejunostomy"
      },
      {
        "id": 3,
        "text": "ERCP and sphincterotomy"
      },
      {
        "id": 4,
        "text": "Coring of pancreas head"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In this case of <strong>chronic pancreatitis with recurrent attacks</strong>, 10 mm <strong>dilatation</strong> of the pancreatic <strong>duct</strong>, and <strong>intraductal calculi</strong>, <strong>longitudinal pancreaticojejunostomy</strong> (also known as Puestow procedure or lateral pancreaticojejunostomy) is the <strong>surgery of choice</strong>. This procedure involves opening the pancreatic duct along its length and connecting it to a loop of the jejunum, which helps to drain the obstructed pancreatic duct and alleviate pain.</p>\n<p>Patients with chronic pancreatitis mainly experience pain due to ductal hypertension or parenchymal inflammation. Acute exacerbations in duct pressure lead to recurrent acute attacks.&nbsp;The pancreatic duct dilation observed on pancreatography for chronic pancreatitis is classically described as a <strong>chain of lakes</strong>, which reflects the presence of <strong>multiple dilations and stenoses</strong>. Response to treatment has been found to be dependent upon the degree of preoperative pancreatic fibrosis.</p>\n<p><strong>Longitudinal pancreaticojejunostomy</strong>, also known as the <strong>Puestow procedure or lateral pancreaticojejunostomy</strong>, is a surgical treatment primarily used for chronic pancreatitis with a dilated main pancreatic duct and intraductal calculi.&nbsp;</p>\n<p>In longitudinal pancreaticojejunostomy, a <strong>longitudinal incision</strong> is made along the length of the main pancreatic duct, typically from the tail to the head of the pancreas. The dilated pancreatic duct is then opened, and any <strong>intraductal calculi or obstructions are removed</strong>. The opened duct is then <strong>connected to a loop of the jejunum</strong>&nbsp;to create a <strong>side-to-side anastomosis</strong>. This allows for the drainage of pancreatic secretions directly into the jejunum, bypassing any narrowed or obstructed areas of the duct.</p>\n<p>This procedure can effectively relieve pain and improve the quality of life for patients with chronic pancreatitis. However, it is important to note that it may not reverse the underlying pathology of chronic pancreatitis or prevent the progression of the disease. It is also not suitable for all patients with chronic pancreatitis, particularly those with a non-dilated pancreatic duct or isolated head involvement.</p>\n<p>Other Options:</p>\n<p><strong>Pancreaticoduodenectomy</strong>:&nbsp;This procedure, also known as Whipple procedure, involves removing the head of the pancreas, duodenum, gallbladder, and part of the bile duct. It is typically performed for pancreatic cancer or tumors in the head of the pancreas, not for chronic pancreatitis with ductal obstruction and intraductal calculi.</p>\n<p><strong>ERCP and sphincterotomy</strong>: Endoscopic retrograde cholangiopancreatography (ERCP) with sphincterotomy is a procedure that involves opening the sphincter of Oddi to facilitate the drainage of bile and pancreatic secretions. Although it may provide temporary relief, it is not a definitive treatment for chronic pancreatitis with large ductal dilatation and intraductal calculi. ERCP with sphincterotomy may be useful in some cases of chronic pancreatitis for the removal of small pancreatic duct stones, but for large ductal dilatation and intraductal calculi, longitudinal pancreaticojejunostomy is more appropriate.</p>\n<p><strong>Coring of pancreas head</strong>: Coring of the pancreas head, also known as pancreatic head resection or Beger procedure, is a surgical technique used to treat chronic pancreatitis, particularly when the inflammation and fibrosis predominantly affect the head of the pancreas. The procedure involves removing the inflamed and fibrotic tissue from the head of the pancreas while preserving the duodenum, bile duct, and the main pancreatic duct. Longitudinal pancreaticojejunostomy is a more targeted and effective treatment for this patient's condition.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman presented with a BIRADS-5 breast lesion. Which of the following is a good prognostic factor for this lesion?",
    "choices": [
      {
        "id": 1,
        "text": "BRCA-1 positive"
      },
      {
        "id": 2,
        "text": "p53 positive"
      },
      {
        "id": 3,
        "text": "ER positive"
      },
      {
        "id": 4,
        "text": "High Ki-67"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>ER positivity</strong> is a<strong> good prognostic factor </strong>in breast cancer<strong>.</strong></p>\n<p>The <strong>ER </strong>and<strong> PR</strong> are two steroid hormone receptors present in breast cancer. The expression of these receptors indicates a <strong>favorable prognosis</strong> and response to hormonal therapy.</p>\n<p>Other options:</p>\n<p>Option A: The mutations in <em><strong>BRCA1</strong></em> gene account for up to 40% of <strong>familial breast cancer</strong>s. These tumors are high-grade, hormone receptor&ndash;negative, and aneuploid and do not have a good prognosis.</p>\n<p>Option B: <strong>p53</strong> is a <strong>tumor suppressor gene,</strong> which on mutation acts as an oncogene.&nbsp;p53 positivity is associated with&nbsp;<strong>highly malignant</strong> breast cancers and has<strong> poor survival.</strong></p>\n<p>Option D:&nbsp;<strong>Ki-67</strong> is used to access the <strong>proliferative index&nbsp;</strong>(activity) of the tumor. High Ki-67 indicates a <strong>poor prognosis.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with sudden onset of chest pain shooting to the neck and interscapular region. X-ray shows widened mediastinum. BP is 110/90 mmHg in the right upper limb and 160/100 mmHg in the left upper limb. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Acute coronary syndrome"
      },
      {
        "id": 2,
        "text": "Acute pulmonary embolism"
      },
      {
        "id": 3,
        "text": "Acute aortic dissection"
      },
      {
        "id": 4,
        "text": "Esophageal rupture"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The illustration given below shows the flowchart for the management algorithm for aortic dissection:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/867f02e1159040d9b1e0a8d4dfbaa4eax1280x1241.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cad709e639e54b339288645a4d248222x1280x1042.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ebc832840d954b53be7f9da4a4615e75x1280x3028.JPEG"
    ]
  },
  {
    "text": "A patient presented with right hypochondriac pain. He had an episode of diarrhea 1 week prior. CT scan of the abdomen reveals a liver abscess of around 25 ccs. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "PAIR"
      },
      {
        "id": 2,
        "text": "Surgery"
      },
      {
        "id": 3,
        "text": "Medical therapy"
      },
      {
        "id": 4,
        "text": "Percutaneous drainage"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This patient with an abscess in the liver with a history of diarrhea most likely has an&nbsp;<strong>amebic liver abscess.</strong> The <strong>initial treatment</strong> of choice for an amebic liver abscess is <strong>medical therapy</strong> with&nbsp;<strong>metronidazole</strong>.</p>\n<p>Ingestion of <em>Entamoeba histolytica</em>&nbsp;cysts causes intestinal diseases like diarrhea. Following this, the trophozoites reach the liver mostly through the portal venous system and cause&nbsp;<strong>amebic liver abscess</strong>.&nbsp;The common presenting features are <strong>right upper quadrant pain</strong>, <strong>tenderness</strong>, fever, <strong>hepatomegaly,</strong> and <strong>diarrhea.</strong></p>\n<p>CT abdomen is helpful in differentiating amebic from a pyogenic abscess. A rim enhancement is noted in case of a pyogenic abscess.</p>\n<div class=\"page\" title=\"Page 1501\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The mainstay of treatment for amebic abscesses is<strong> metronidazole,</strong> which is curative in more than 90% of patients. Luminal agents such as iodoquinol, paromomycin, or diloxanide furoate can be administered to treat the carrier state.</p>\n<div class=\"page\" title=\"Page 1501\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Aspiration</strong> of abscess is recommended in case of</p>\n<ul>\n<li>Diagnostic uncertainty</li>\n<li>Failure to respond to metronidazole therapy</li>\n<li>Abscesses larger than 5 cm in diameter and in the left liver, since they are thought to carry a high risk of rupture</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old patient with a history of trauma one week back presents with confusion and ataxia. He is on treatment for alcohol dependence and his last intake was 2 weeks back. CT scan reveals the following finding. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Extradural hemorrhage"
      },
      {
        "id": 2,
        "text": "Subdural hemorrhage"
      },
      {
        "id": 3,
        "text": "Intra-parenchymal hemorrhage"
      },
      {
        "id": 4,
        "text": "Subarachnoid hemorrhage"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario and the plain CT scan showing a&nbsp;<strong>concavo-convex-shaped hematoma</strong>&nbsp;on the left side with a midline shift to the right is suggestive of&nbsp;<strong>subdural hematoma (SDH)</strong>.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p>An&nbsp;<strong>acute SDH</strong>&nbsp;is the result of the accumulation of blood between the&nbsp;<strong>arachnoid membrane and the dura</strong>. It is usually due to the rupture of&nbsp;<strong>bridging veins</strong>&nbsp;running from the cerebral cortex to the dural sinuses. The level of consciousness is usually impaired at presentation and may deteriorate further as the hematoma expands.&nbsp;<strong>Elderly</strong>&nbsp;and&nbsp;<strong>alcoholic</strong>&nbsp;patients are at a higher risk of acute SDH formation after head trauma due to brain atrophy.&nbsp;On CT scan, acute SDH appears as a <strong>hyperdense, crescent-shaped</strong> (concavo-convex) lesion.</p>\n<p><strong>Open craniotomy</strong>&nbsp;for the evacuation of acute SDH is indicated for the following:</p>\n<ul>\n<li aria-level=\"1\">Thickness &gt;1 cm</li>\n<li aria-level=\"1\">Midline shift &gt;5 mm</li>\n<li aria-level=\"1\">Glasgow Coma Scale (GCS) score drops by two or more points from the time of injury to hospitalization.</li>\n</ul>\n<p><strong>Chronic</strong> subdural hematoma results from a hematoma that expands over <strong>days or weeks</strong> by osmosis, ultimately producing symptoms of raised ICP or focal deficits. On a CT scan,&nbsp;diffuse <strong>hypodensity</strong> overlying the brain surface would be seen.</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/aa3390e292a2448aa98008f8343c3a2c.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false about the given condition?",
    "choices": [
      {
        "id": 1,
        "text": "Repeated radical surgery every 24 hours may be required to adequately manage this condition"
      },
      {
        "id": 2,
        "text": "This is a case of Meleney's gangrene"
      },
      {
        "id": 3,
        "text": "The condition is caused by beta hemolytic streptococcus and may sometimes be polymicrobial"
      },
      {
        "id": 4,
        "text": "Hyperbaric oxygen has no role in the treatment of this condition"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image is likely that of <strong>Meleney's gangrene</strong>. <strong>Hyperbaric oxygen</strong> has been shown to <strong>reduce mortality</strong> in patients with Meleney's gangrene and therefore plays a significant role in the management of this condition.</p>\n<p>Necrotizing fasciitis of the abdominal wall is known as Meleney's gangrene. It presents with <strong>extensive necrosis of the abdominal wall</strong>, <strong>thrombosis</strong> of the <strong>microvasculature</strong>, and an <strong>acute inflammatory infiltrate</strong>. Bullae develop on the abdominal wall, which progress to <strong>overt cutaneous gangrene</strong>.&nbsp;The affected area is often painful, erythematous, and edematous, with possible systemic signs of infection such as fever and malaise. Early recognition and aggressive treatment are essential for a favorable outcome.</p>\n<p>Management includes <strong>prompt surgical debridement</strong> of the necrotic tissue,<strong> broad-spectrum antibiotics</strong> to cover the polymicrobial nature of the infection, and supportive measures such as fluid resuscitation and correction of electrolyte imbalances. In some cases, <strong>hyperbaric oxygen therapy</strong> may be utilized as an<strong> adjunctive treatment</strong> to improve tissue oxygenation and enhance the healing process.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A: Surgical excision of necrotic tissue is often required daily as the infection tends to spread beyond the borders of the debridement wound.</p>\n<p>Option C: Meleney's gangrene is caused by beta-hemolytic streptococci or&nbsp;<em>Staphylococcus aureus</em>&nbsp;and may also be polymicrobial.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9037cdefdf2a48b2a39c4cb5ca9be816.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient presents with a swelling in the groin region and it is diagnosed as a direct inguinal hernia. Weakness in which of the following structures is most likely to cause this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Pectineal ligament"
      },
      {
        "id": 2,
        "text": "Conjoint tendon"
      },
      {
        "id": 3,
        "text": "Reflected part of inguinal ligament"
      },
      {
        "id": 4,
        "text": "Lacunar ligament"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Other options:</p>\n<p>Option A:&nbsp;Pectineal ligament also known as <strong>Cooper's</strong>&nbsp;<strong>ligament</strong>&nbsp;is a strong fibrous band that <strong>extends </strong>laterally along the pectineal line from the <strong>pectineal attachment</strong> of the <strong>lacunar ligament.</strong></p>\n<p>Option C:<strong>&nbsp;</strong>The inguinal ligament is external oblique aponeurosis that extends between the anterior superior iliac spine and the pubic tubercle. On the point of attachment to the pubic tubercle, some fibers pass upwards behind the superficial inguinal ring and external oblique aponeurosis to join the&nbsp;rectus sheath and linea alba. These form the <strong>reflected part of the inguinal ligament.</strong></p>\n<div class=\"page\" title=\"Page 1498\">Option D:<strong> Lacunar ligament</strong> is formed from the fibers of the medial end of the <strong>inguinal ligament</strong> and the fibers from the <strong>fascia lata</strong> of the thigh.&nbsp;It forms the <strong>medial wall</strong> of the<strong> femoral canal.</strong></div>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/54eb9a3fdd984ab2be0791a692711d9ax1280x1423.JPEG"
    ]
  },
  {
    "text": "A patient presents with sudden onset of hematemesis. He has been taking aspirin for his arthritis and drinks alcohol occasionally. He gives a history of occasional abdominal pain. On examination, there is no abdominal mass or tenderness. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Mallory-Weiss tear"
      },
      {
        "id": 2,
        "text": "Esophagitis"
      },
      {
        "id": 3,
        "text": "Peptic ulcer"
      },
      {
        "id": 4,
        "text": "Esophageal varices"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This patient with a history of aspirin use, now presenting with abdominal pain and a sudden onset of hematemesis most likely has a bleeding <strong>peptic ulcer.</strong></p>\n<div class=\"page\" title=\"Page 1192\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Peptic ulcer disease (PUD) accounts for around 2/3<sup>rd</sup> of upper gastrointestinal bleeding. The major causative factors are <strong><em>Helicobacter pylori</em></strong> and <strong>NSAIDs.&nbsp;</strong><strong>Prostaglandins</strong> protect gastric and duodenal mucosa from acid and pepsin. They <strong>increase mucin</strong> and<strong> bicarbonate</strong> secretion and&nbsp;<strong>increase mucosal blood flow. </strong>They also promote <strong>epithelial cell proliferation</strong>. NSAIDs like <strong>aspirin</strong> disrupt these naturally protective mechanisms and increase the risk of peptic ulcer formation in the stomach and the duodenum.</p>\n<p>They present with abdominal pain, bleeding, or signs of peritonitis due to perforation.&nbsp;Significant hemorrhage occurs when duodenal or gastric ulcers penetrate branches of the gastroduodenal or left gastric arteries, respectively.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Mallory-Weiss tears</strong> are <strong>partial-thickness</strong> tears of the mucosa and submucosa occurring near the <strong>gastroesophageal junction.&nbsp;</strong>They occur in patients with a history of <strong>repeated emesis</strong> and are classical in alcoholic patients after a period of<strong> intense retching </strong>and<strong> vomiting</strong> following binge drinking.</p>\n<p>Option B:<strong> Esophagitis</strong>&nbsp;commonly occurs due to repeated exposure of mucosa to the acidic gastric secretions in gastroesophageal reflux disease. It results in <strong>chronic blood loss</strong> and&nbsp;commonly presents as <strong>anemia</strong> or <strong>guaiac-positive stools</strong>. Ulcerations of superficial mucosa due to esophagitis generally <strong>do not bleed acutely.</strong></p>\n<p>Option D:<strong>&nbsp;Esophageal varices</strong>&nbsp;commonly occur&nbsp;due to portal hypertension in patients with cirrhosis. A history of liver disease or the<strong> stigmata of portal hypertension </strong>and<strong> cirrhosis</strong>&nbsp;would suggest&nbsp;variceal bleeding.</p>\n</div>\n</div>\n</div>\n</div>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A construction worker came to the OPD complaining of white fingers. He has been working in the cement and concrete industry and has been working on heavy machinery drills, wood, and furniture polishing for 20 years. What is the most likely etiology for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Candidal infection of the fingers due to continuous exposure to water"
      },
      {
        "id": 2,
        "text": "Exposure to thinners and paints"
      },
      {
        "id": 3,
        "text": "Continuous exposure to cement and concrete"
      },
      {
        "id": 4,
        "text": "Continuous exposure to drills and machines"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The clinical vignette suggests the diagnosis of <strong>Raynaud's syndrome</strong>&nbsp;due to <strong>chronic exposure to drills and machines&nbsp;</strong>(vibrating tools)<strong>.</strong></p>\n<p>Raynaud's syndrome occurs due to <strong>peripheral vasospasm,&nbsp;</strong>and it is more common in the <strong>upper extremities.&nbsp;</strong>It may occur&nbsp;due to exposure to various stimuli, including <strong>cold temperatures</strong>, tobacco, or emotional stress, and certain occupational groups, such as those who use <strong>vibrating tools,&nbsp;</strong>or it can be secondary to scleroderma, systemic lupus erythematosus, Sjogren's syndrome, and antiphospholipid syndrome.</p>\n<p>The pathophysiology behind Raynaud's syndrome is believed to be due to <strong>increased levels of &alpha;2-adrenergic receptors</strong> and their hypersensitivity and also due to an <strong>abnormal thermoregulatory response</strong> by the sympathetic nervous system.</p>\n<p>A Raynaud's phenomenon&nbsp;attack is sudden, and it ranges from <strong>intense pallor&nbsp;</strong>(white attack) to<strong> cyanosis&nbsp;</strong>(blue attack), followed by<strong> reactive hyperemia</strong> due to subsequent relaxation of blood vessels. It typically affects <strong>fingers </strong>(distal areas), and the <strong>thumb is usually spared. </strong>If the thumb is involved, it may indicate underlying secondary etiology. Other common complaints include&nbsp;pin and needles sensation, numbness, or finger aches or pain. In severe attacks, <strong>digital ulcerations</strong> and <strong>gangrene</strong> may develop.</p>\n<p><strong>Diagnosis</strong> is primarily based on the<strong> clinical history</strong> and <strong>physical examination</strong>. Nail fold capillary microscopy can be helpful, particularly for identifying secondary Raynaud's phenomenon associated with connective tissue diseases. <strong>Angiography</strong> can be done for patients with <strong>digital ulcerations</strong> and<strong> gangrene.</strong></p>\n<p>Management is mainly<strong>&nbsp;c</strong><strong>onservative,</strong> and it includes wearing gloves, use of electric or chemically activated hand warmers, avoiding occupational exposure to vibratory tools, abstinence from tobacco, and relocating to a warmer, dryer climate.</p>\n<p>Other management options:</p>\n<ul>\n<li>Calcium channel&ndash;blockers such as <strong>diltiazem</strong> and <strong>nifedipine</strong> are the <strong>drugs of choice</strong>.</li>\n<li><strong>Fluoxetine</strong> has been shown to reduce the frequency and duration of vasospastic episodes.</li>\n<li><strong>Prostaglandins</strong> can be used in patients with severe symptoms.</li>\n</ul>\n<p>Complications, including<strong>&nbsp;digital ulcerations</strong> and <strong>gangrene,</strong>&nbsp;can be surgically treated by <strong>debridement</strong> and <strong>amputation,</strong> respectively.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5-year-old child was admitted to the hospital for prolapsing rectal mass and painless rectal bleeding. Histopathological examination reveals enlarged and inflamed glands filled with mucin. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Adenoma"
      },
      {
        "id": 2,
        "text": "Choristoma"
      },
      {
        "id": 3,
        "text": "Hamartoma"
      },
      {
        "id": 4,
        "text": "Carcinoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Adenoma: Adenomas are benign tumors that arise from glandular tissue. While they may present with rectal bleeding, they are not commonly seen in young children and are not typically pedunculated like juvenile polyps.</p>\n<p>Choristoma: Choristomas are non-neoplastic masses that arise from heterotopic tissue, i.e., tissues found in abnormal locations. They are not associated with juvenile polyps.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fa36be8a481e42f3a4b4338176349872x1280x1146.JPEG"
    ]
  },
  {
    "text": "Identify the given condition.",
    "choices": [
      {
        "id": 1,
        "text": "Venous ulcer"
      },
      {
        "id": 2,
        "text": "Malignant ulcer"
      },
      {
        "id": 3,
        "text": "Arterial ulcer"
      },
      {
        "id": 4,
        "text": "Trophic ulcer"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Option C) The following is an image of an arterial ulcer</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ab27542be9694df6966f39881dbdcbd6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/05cd84aa9c6b4ba4b8a703203b56ca84x1280x956.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a277163d01f14377a0caac15cdb27804x648x432.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1f0c315db1d94698b862516e1b06e8bfx900x1200.JPEG"
    ]
  },
  {
    "text": "A patient with varicose veins comes with complaints of eczema over the same region. What is the stage of the clinical classification according to the CEAP guidelines?",
    "choices": [
      {
        "id": 1,
        "text": "C2"
      },
      {
        "id": 2,
        "text": "C3"
      },
      {
        "id": 3,
        "text": "C4a"
      },
      {
        "id": 4,
        "text": "C4b"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A patient with <strong>varicose veins</strong> and overlying&nbsp;<strong>eczema&nbsp;</strong>is classified as<strong> C4a&nbsp;</strong>under CEAP guidelines.</p>\n<p>The Clinical-Etiology-Anatomy-Pathophysiology (<strong>CEAP</strong>) classification system is used to classify <strong>chronic lower extremity venous disease.</strong></p>\n<p>The clinical class of C4 under CEAP includes changes in skin and subcutaneous tissue secondary to chronic venous disease. It is further classified as follows:</p>\n<ul>\n<li><strong>C4a&nbsp;</strong>- Pigmentation or eczema</li>\n<li><strong>C4b&nbsp;</strong>- Lipodermatosclerosis or atrophie blanche</li>\n<li><strong>C4c&nbsp;</strong>- Corona phlebectatica</li>\n</ul>\n<p>Image A shows tortuous dilated veins&nbsp;- C2, image B shows atrophie blanche - C4b, and image C shows fan-shaped telangiectasia - C4c.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/765d6f29f03f4743814e40f3da616f91.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cef521a31bad4b1da4f19831d8fc50b8x464x1513.PNG"
    ]
  },
  {
    "text": "A patient comes to the casualty with a severe headache. His BP was found to be 160/100 mmHg. CT scan revealed a subarachnoid hemorrhage. What is the next best step in the management of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Nimodipine"
      },
      {
        "id": 2,
        "text": "Angiography"
      },
      {
        "id": 3,
        "text": "Surgery"
      },
      {
        "id": 4,
        "text": "Fibrinolytic therapy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In this patient with subarachnoid hemorrhage (SAH), the next step is to do an <strong>angiography&nbsp;</strong>to see the vascular anatomy and&nbsp;identify the site of bleed.</p>\n<p>Trauma is the commonest cause of subarachnoid hemorrhage. Spontaneous SAH usually results from the rupture of an aneurysm or an arterio-venous malformation (AVM).&nbsp;Patients present with a<strong>&nbsp;sudden</strong> and <strong>severe headache</strong> which is different from any headache they have experienced before. This is described as a&nbsp;<strong>thunderclap headache. </strong>Other symptoms include meningitic features like neck rigidity and photophobia, impaired consciousness, intraocular hemorrhages, with or without focal neurological deficits. Compression from a posterior communicating artery aneurysm would result in third nerve palsy.</p>\n<p><strong>Non-contrast CT</strong> head is the first imaging to be done in a suspected case, which would confirm bleeding in more than 98% of cases.&nbsp;In patients with high suspicion and a <strong>negative CT</strong>, <strong>lumbar puncture</strong> is done to detect hemoglobin breakdown products like oxyhemoglobin and bilirubin. <strong>After confirming the diagnosis</strong>,&nbsp;<strong>CT or MR angiography</strong> is done to locate the aneurysms or AVM. <strong>Digital subtraction angiography</strong>&nbsp;remains the&nbsp;<strong>gold standard</strong>&nbsp;investigation.</p>\n<p>The definitive management of&nbsp;<strong>subarachnoid hemorrhage (</strong><strong>SAH)</strong>&nbsp;is done surgically by craniotomy and <strong>clipping</strong> or by <strong>endovascular embolization</strong> known as <strong>coiling. </strong>This prevents<strong> rebleeding</strong> of the aneurysm.&nbsp;</p>\n<p>Patients with subarachnoid hemorrhage are at risk of developing complications such as rebleeding, cerebral vasospasm, hydrocephalus, seizures, and hyponatremia. Early recognition and management of these complications are essential to improve outcomes. In addition to surgery and nimodipine, other management strategies for SAH include strict blood pressure control, analgesia for headache, antiemetics, and anticonvulsants if seizures occur. Maintaining a close monitoring of the patient's neurological status, intracranial pressure, and electrolytes is also crucial.</p>\n<p>Other Options</p>\n<p><strong>Nimodipine</strong>: Although it is used to prevent cerebral vasospasm and delayed ischemic neurological deficits, it is not the immediate next step in the management of SAH. Angiography is needed first to locate the aneurysms or AVM. It is administered after the procedure.<br /><strong>Surgery</strong>: Although surgery is an important management option for SAH, it is not the immediate next step. Angiography must be done first to identify the site of the bleed and plan for the appropriate surgical or endovascular intervention.<br /><strong>Fibrinolytic therapy</strong>: This option is not appropriate for the management of SAH as it may exacerbate the bleeding. Fibrinolytic therapy is used in the treatment of ischemic stroke, not hemorrhagic stroke.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old female patient consumed a cleaning product containing 90% sodium hydroxide. She is having complete dysphagia. What is the best step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Esophagojejunostomy"
      },
      {
        "id": 2,
        "text": "Stent placement"
      },
      {
        "id": 3,
        "text": "Feeding jejunostomy"
      },
      {
        "id": 4,
        "text": "Gastrojejunostomy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This patient with a <strong>corrosive esophageal injury</strong> with <strong>complete dysphagia </strong>requires a<strong>&nbsp;feeding jejunostomy</strong> for enteral feeding.</p>\n<p>The injury caused by <strong>alkali</strong> ingestion is <strong>deeper due to</strong> the process of <strong>saponification</strong> of fats and dehydration. The <strong>injury</strong> caused <strong>by acids</strong> is <strong>more superficial</strong> <strong>because</strong> they cause <strong>coagulative necrosis</strong> with eschar formation, which prevents the deeper penetration of the acid.</p>\n<p>Severe corrosive injury may lead to esophageal perforation, bleeding, stricture, and death. Patients can develop dysphagia or&nbsp;odynophagia, which implies esophagal damage.&nbsp;</p>\n<div class=\"page\" title=\"Page 1095\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 1095\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Minor injuries cause mucosal edema that resolves rapidly with no late sequelae and these patients can be safely fed. In case of <strong>severe injuries</strong>, a <strong>feeding jejunostomy</strong> may be appropriate until the patient can swallow saliva satisfactorily.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<p>Management of corrosive esophagitis:</p>\n<ul>\n<li><strong>Hemodynamic stabilization</strong> and management of patient's airway</li>\n<li><strong>Endoscopic evaluation</strong> of injuries</li>\n<li>Surgical management includes <strong><strong>laparotomy&nbsp;</strong></strong>for bleeding or perforation. Esophageal replacement is done for very long or multiple strictures.</li>\n</ul>\n<p><strong>Stenting</strong> is used in&nbsp;patients who do not respond to repeated dilatations for <strong>esophageal strictures</strong>. They are not used as a treatment in acute settings.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 23-year-old male patient presents with midline swelling in the neck.  The swelling moves with deglutition and protrusion of the tongue. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Brachial cyst"
      },
      {
        "id": 2,
        "text": "Thyroglossal cyst"
      },
      {
        "id": 3,
        "text": "Plunging ranula"
      },
      {
        "id": 4,
        "text": "Dermoid cyst"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of a <strong>thyroglossal cyst.&nbsp;</strong>It moves with deglutition, protrusion of the tongue, and <strong>side-to-side movement</strong> is also possible.</p>\n<p>A thyroglossal duct cyst is a <strong>congenital midline neck swelling </strong>that typically presents during childhood often noticed after an upper respiratory infection.</p>\n<p>A thyroglossal cyst<strong>&nbsp;</strong>represents the&nbsp;<strong>persistence</strong>&nbsp;of the <strong>track</strong> of the<strong>&nbsp;thyroid gland&nbsp;</strong>and can be found adjacent to the<strong>&nbsp;midline.&nbsp;</strong>The thyroid gland descends early in fetal life from the base of the tongue towards its position in the lower neck. At the time of descent, the hyoid bone has not been formed and the track of the thyroid gland is variable, passing in front, through, or behind the eventual position of the hyoid body.&nbsp;</p>\n<p>It can occur anywhere along the migratory course of the duct:</p>\n<ul>\n<ul>\n<li><strong>Infrahyoid</strong> (most common site)</li>\n<li>Region of thyroid cartilage</li>\n<li>Suprahyoid</li>\n<li>Floor of mouth</li>\n<li>Beneath foramen cecum</li>\n</ul>\n</ul>\n<p><img class=\"ng-scope\" src=\"https://dhmbxeygs57ff.cloudfront.net/uploads/baaef1d7a80f42eab32b820d3c6b9191x1280x1297.JPEG\" width=\"251\" height=\"254\" /></p>\n<p>Clinical features of thyroglossal cyst:</p>\n<ul>\n<li>Classically the cyst <strong>moves upwards</strong> on <strong>swallowing</strong> and on<strong> tongue protrusion.</strong>&nbsp;This indicates <strong>attachment to the hyoid bone</strong>.&nbsp;</li>\n<li>Swelling is smooth, soft, fluctuant (cystic), nontender, mobile, and shows transillumination.</li>\n<li>Thyroid fossa is empty, if there is no thyroid in the normal location.</li>\n</ul>\n<div class=\"page\" title=\"Page 467\">\n<p>Complications of thyroglossal cyst:</p>\n<ul>\n<li>The most common complication is&nbsp;<strong>infection.</strong></li>\n<li>Thyroglossal&nbsp;<strong>fistula</strong>&nbsp;is an acquired condition that either follows&nbsp;<strong>infection</strong>&nbsp;of the cyst which&nbsp;<strong>bursts open or</strong>&nbsp;due to&nbsp;<strong>inadequate removal</strong>&nbsp;of the cyst.</li>\n<li>1% of thyroglossal duct cysts are found to be malignant of which the most common type of&nbsp;<strong>cancer</strong>&nbsp;is&nbsp;<strong>papillary</strong>&nbsp;(85%).</li>\n</ul>\n</div>\n<p>However, only the <strong>thyroglossal cyst</strong>&nbsp;<strong>moves</strong>&nbsp;with<strong>&nbsp;tongue protrusion</strong>. This is because the duct extends from the foramen cecum of the tongue to the isthmus of the gland.&nbsp;</p>\n<p><strong>Sistrunk&rsquo;s operation&nbsp;</strong>is performed to excise the cyst and prevent a recurrence. It involves&nbsp;<strong>excision&nbsp;</strong>of the&nbsp;<strong>whole thyroglossal tract,</strong>&nbsp;involving removal of the&nbsp;<strong>body of the hyoid bone</strong>, and&nbsp;<strong>suprahyoid tract</strong>&nbsp;through the tongue base to the vallecula at the site of the primitive foramen cecum along with the core of tissue on either side.</p>\n<p>Features of hoarseness of voice, cough, neck swelling that<strong> increases</strong> in<strong> size</strong> on coughing/<strong>Valsalva maneuver,</strong> and a <strong>gurgling sound</strong> heard on pressing the swelling are suggestive of&nbsp;<strong>laryngocele.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a7e0542ebb724f978e6cd49358048f9c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 54-year-old woman presents with cervical cancer stage 2A. It is decided to give neoadjuvant chemotherapy. What does neoadjuvant chemotherapy mean?",
    "choices": [
      {
        "id": 1,
        "text": "Chemotherapy given along with radiation"
      },
      {
        "id": 2,
        "text": "Chemotherapy given during surgery"
      },
      {
        "id": 3,
        "text": "Chemotherapy given before radical surgery to reduce bulk of tumor"
      },
      {
        "id": 4,
        "text": "Chemotherapy given after radical surgery for micrometastases"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<div class=\"page\" title=\"Page 900\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Neoadjuvant chemotherapy</strong> is defined as chemotherapy given <strong>before the definitive treatment</strong> (usually surgery) to <strong>reduce the bulk</strong> of the tumor.&nbsp;</p>\n<p>Neoadjuvant therapy is a type of <strong>induction therapy </strong>that is given<strong> before </strong>the definitive surgery to<strong>&nbsp;d</strong><strong>ownstage the tumor,</strong> reduce the morbidity of treatment, know the in vivo response of the tumor to therapy, and increase its chances of success.&nbsp;<strong>Chemotherapy, radiotherapy, or hormonal therapy </strong>can be given as neoadjuvant therapy.</p>\n<p>Option A: Treatment that involves the administration of <strong>chemotherapy along with radiation</strong> is called&nbsp;<strong>chemoradiation</strong>.</p>\n<p>Option B: <strong>Hyperthermic i<span tabindex=\"0\" role=\"tooltip\"><span class=\"c5aZPb\" tabindex=\"0\" role=\"button\" data-enable-toggle-animation=\"true\" data-extra-container-classes=\"ZLo7Eb\" data-hover-hide-delay=\"1000\" data-hover-open-delay=\"500\" data-send-open-event=\"true\" data-theme=\"0\" data-width=\"250\" data-ved=\"2ahUKEwia1tDp39_9AhX1cGwGHbz4B9UQmpgGegQIGBAD\"><span class=\"JPfdse\" data-bubble-link=\"\" data-segment-text=\"Intraperitoneal\">ntraperitoneal</span></span></span>&nbsp;chemotherapy </strong>(HIPEC)&nbsp;is used <strong>during surgery</strong> in which a hyperthermic solution of anticancer drugs is infused directly into the <strong>abdominal cavity</strong> after the definitive surgery to kill any residual tumor cells. It is often used to treat cancers that have spread to the <strong>peritoneum</strong>.</p>\n<div id=\"_Uq0SZJrlLvXhseMPvPGfqA0_12\">Option D: Treatment given after surgical resection of the tumor <strong>to reduce the risk of recurrence and micrometastasis</strong> is called <strong>adjuvant therapy</strong>. Adjuvant therapy can be&nbsp;<strong>chemotherapy</strong>, radiation therapy, hormone therapy, targeted therapy, or biological therapy.&nbsp;</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young patient is admitted with a history of fever for 5 days. BP is 90/60 mmHg, PR-120 bpm, RR-24 breaths/min, GCS score-10; laboratory tests show leucocytosis with neutrophilia and serum creatinine level of 2.6 mg/dL. An intern doctor wants to calculate the qSOFA score to predict prognosis and hospitalization duration. Which of the following comprises the qSOFA score?",
    "choices": [
      {
        "id": 1,
        "text": "BP, RR and  CBC"
      },
      {
        "id": 2,
        "text": "Creatinine, PR, BP"
      },
      {
        "id": 3,
        "text": "RR, Body temperature, PR"
      },
      {
        "id": 4,
        "text": "SBP, RR, GCS score"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>qSOFA&nbsp;score </strong>comprises of&nbsp;<strong>SBP, RR, and GCS.</strong></p>\n<p><strong>qSOFA</strong>&nbsp;score (quickSOFA) is a bedside prompt that may identify patients with suspected infection who are at greater risk for a poor outcome outside the intensive care unit (ICU).</p>\n<p>It uses three criteria, assigning <strong>one point</strong> each for</p>\n<ul>\n<li>low blood pressure (SBP&le;100 mmHg),</li>\n<li>high respiratory rate (&ge;22 breaths/min),</li>\n<li>altered mentation (GCS score, &lt;15).</li>\n</ul>\n<p>The score ranges from 0 to 3 points. The presence of 2 or more qSOFA points is a simple prompt to identify infected patients outside the ICU who are likely to develop sepsis. This is a simplified derivative of SOFA score. The primary method to evaluate the risk of organ dysfunction (sepsis) in patients with suspected infection is by determining the&nbsp;<strong>Sequential</strong>&nbsp;(<strong>sepsis-related) Organ Failure Assessment (SOFA) score,</strong>&nbsp;which includes assessment of:</p>\n<ul>\n<li>Circulation - Systolic BP and need for vasopressors; platelet count</li>\n<li>Respiration - PaO<sub>2</sub>/FiO<sub>2</sub>&nbsp;and need for mechanical ventilation</li>\n<li>Mentation - Glasgow Coma Scale score&nbsp;</li>\n<li>Hepatic function - Bilirubin level</li>\n<li>Renal function - Creatinine level</li>\n</ul>\n<p><strong>Organ dysfunction</strong>&nbsp;is defined by a&nbsp;<strong>SOFA score of&nbsp;&ge;2</strong>.</p>\n<p>The SOFA score is limited by its requirement of multiple laboratory tests which makes it complex and time-consuming. In order to simplify the scoring process, the \"Sepsis - 3\" task force recommended the<strong>&nbsp;quick sepsis-related organ dysfunction assessment \"qSOFA\" score</strong>.</p>\n<p><strong>SOFA vs. qSOFA:</strong></p>\n<ul>\n<li><strong>SOFA</strong>&nbsp;is a more comprehensive and accurate scoring system, which is&nbsp;<strong>particularly superior to&nbsp;qSOFA in the ICU setting.</strong>&nbsp;</li>\n<li><strong>qSOFA</strong>&nbsp;is a simplified derivative of SOFA for bedside assessment of individuals at risk for sepsis,&nbsp;particularly<strong> useful outside the ICU setting&nbsp;</strong>(i.e. ward/emergency department). However, note that it was originally designed as a predictive tool that calculates the risk of death from sepsis rather than a diagnostic tool.</li>\n</ul>\n<p>Thereby, the best description of sepsis based on \"Sepsis-3\" task force recommendations would be as follows:</p>\n<ul>\n<li>Suspected or documented infection with SOFA score of &ge;2&nbsp; <strong>or</strong></li>\n<li>Suspected or documented infection with qSOFA score of &ge;2</li>\n</ul>\n<p>Another score that has been used is the National Early Warning Score (NEWS). It ranges from 0 to 20 and is based on respiratory rate, oxygen saturation, use of supplemental O<sub>2</sub>, temperature, systolic blood pressure, pulse rate, and level of consciousness.&nbsp;&ge;5 out of 20 is considered a positive score.&nbsp;</p>\n<p><span class=\"s3\">Other scoring systems for sepsis:</span></p>\n<p class=\"p2\"><span class=\"s3\">The </span><span class=\"s4\">Systemic Inflammatory Response Syndrome (<strong>SIRS</strong>)</span><span class=\"s3\"> score is no longer recommended as is it <strong>not specific to infection.</strong></span></p>\n<p class=\"p2\"><span class=\"s3\">The </span><span class=\"s4\">Logistic Organ Dysfunction System (<strong>LODS</strong>)</span><span class=\"s3\"> score is not recommended as it is <strong>complex</strong> and has too many variables.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '237 Surgery Neet 2023';
        let hierarchy = ["Marrow", "PYQs", "Surgery"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>