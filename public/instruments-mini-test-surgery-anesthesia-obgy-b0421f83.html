<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instruments Mini Test - Surgery, Anesthesia, Obgy - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2024-25
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "What is the use of this instrument?",
    "choices": [
      {
        "id": 1,
        "text": "Myomectomy"
      },
      {
        "id": 2,
        "text": "Hysterosalpingography"
      },
      {
        "id": 3,
        "text": "Endometrial biopsy"
      },
      {
        "id": 4,
        "text": "Conization of cervix"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image is that of a <strong>Leech-Wilkinson cannula</strong>. It is used to inject dye in hysterosalpingography.\u00a0</p>\n<p>The following images show the cannula placed in the cervix for the procedure:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e50b4c0d35c1493fb06e4b745858b53e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/76b798460e8a464da293cd9735367361x829x385.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c134d974cb2d485eacfa4f6d9b54d9bex562x224.JPEG"
    ]
  },
  {
    "text": "Identify the true statements about the device shown in the image when compared to endotracheal intubation.",
    "choices": [
      {
        "id": 1,
        "text": "A, D & E"
      },
      {
        "id": 2,
        "text": "A, B, D & E"
      },
      {
        "id": 3,
        "text": "B, D & E"
      },
      {
        "id": 4,
        "text": "All"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>given image</strong> shows a&nbsp;<strong>laryngeal mask airway (LMA),&nbsp;</strong>which is&nbsp;<strong>indicated</strong>&nbsp;in cases with&nbsp;<strong>difficult</strong>&nbsp;<strong>airways</strong>. LMA is a l<strong>ess secure airway</strong> when compared to endotracheal intubation and it <strong>does not require muscle relaxants.</strong></p>\n<p><strong>LMA&nbsp;</strong>is used for airway management as a <strong>temporary, life-saving measure</strong> in patients with difficult ventilation. Difficult ventilation can be either due to difficult airways, unavailability, or difficulty in mask ventilation and intubation.</p>\n<p><strong>Advantages</strong> of LMA:</p>\n<ul>\n<li><strong>Less invasive</strong> as compared to tracheal tubes.</li>\n<li>Lesser bronchospasm as compared to tracheal tubes&nbsp;</li>\n<li>It partially protects the larynx from pharyngeal secretions.</li>\n<li>Useful in difficult intubations</li>\n<li>Less trauma to teeth and pharynx</li>\n<li><strong>Muscle relaxation is not required</strong></li>\n<li><strong>Neck mobility is not required</strong>&nbsp;</li>\n</ul>\n<p><strong>Disadvantages:</strong></p>\n<ul>\n<li><strong>Increased risk of gastrointestinal aspiration</strong></li>\n<li>Less safe in prone or jack-knife positions</li>\n<li><strong>Less secure airway</strong></li>\n<li>Greater risk of a gas leak and pollution</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/40d33884e1694062945742ea4f511abf.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4a3052813ed544f886a0b6fa5d686a5ex1279x1428.JPEG"
    ]
  },
  {
    "text": "Identify the gas represented by the pin index shown in the image below.",
    "choices": [
      {
        "id": 1,
        "text": "Nitrous oxide"
      },
      {
        "id": 2,
        "text": "Oxygen"
      },
      {
        "id": 3,
        "text": "Air"
      },
      {
        "id": 4,
        "text": "< 7.5% CO2 mixed with O2"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The pin index of <strong>2,5</strong> is specific for <strong>oxygen</strong>.</p>\n<p>Pin Index Safety System (PISS) is a safety measure to prevent incorrect cylinder attachment.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8171a85e4fb64d6b8df280a86c318831.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the instrument shown in the image and the site at which it is used for taking samples.",
    "choices": [
      {
        "id": 1,
        "text": "Ayre's spatula used at the squamocolumnar junction"
      },
      {
        "id": 2,
        "text": "Ayre's spatula used at the endocervix"
      },
      {
        "id": 3,
        "text": "Cytobrush used at the endocervix"
      },
      {
        "id": 4,
        "text": "Cytobrush used at the squamocolumnar junction"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The instrument in the given image is a\u00a0<strong>cytobrush</strong> which is used to take samples from the <strong>endocervix </strong>for<strong>\u00a0</strong>a<strong> Pap smear</strong>.\u00a0<strong>Ayre\u2019s spatula</strong> is used to take samples from\u00a0the <strong>squamocolumnar junction</strong>.</p>\n<p>The instruments used for a pap smear are summarized in the image below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ed1551c09eb04e89839305de3dee3e1b.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/99726eb5aa7043c9bbf1fc7687c260e1x1280x4698.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9e86b6ffcf38479392619e6daa03fd1ax1280x4766.JPEG"
    ]
  },
  {
    "text": "Identify the following instrument.",
    "choices": [
      {
        "id": 1,
        "text": "Harmonic scalpel"
      },
      {
        "id": 2,
        "text": "Bipolar cautery"
      },
      {
        "id": 3,
        "text": "Unipolar cautery"
      },
      {
        "id": 4,
        "text": "LigaSure"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The instrument shown is a\u00a0<strong>harmonic scalpel.\u00a0</strong>It is an instrument that uses\u00a0<strong>ultrasonic</strong>\u00a0<strong>energy</strong>\u00a0to\u00a0<strong>cut</strong>\u00a0tissues while simultaneously\u00a0<strong>coagulating</strong>\u00a0them.</p>\n<p>The scalpel vibrates in the 20000\u201350000 Hz range and cuts through tissues, achieving hemostasis by sealing vessels and tissues by means of protein denaturation using vibration rather than heat.</p>\n<p>The different modes of electrosurgery are as follows:</p>\n<ul>\n<li><strong>Cutting</strong>\u00a0is a mode of diathermy/electrosurgery.\u00a0The cut current is a\u00a0<strong>low-voltage</strong>,\u00a0<strong>continuous waveform</strong>.\u00a0Cutting occurs when sufficient heat is applied to the tissue to cause cell water to explode into steam.</li>\n<li><strong>Coagulation\u00a0</strong>is<strong>\u00a0</strong>the\u00a0<strong>sealing</strong>\u00a0of blood vessels. In coagulation, a heating effect leads to cell death by<strong>\u00a0dehydration\u00a0</strong>and<strong>\u00a0protein denaturation</strong>.</li>\n<li>A<strong>\u00a0blend</strong>\u00a0is a combination of\u00a0<strong>cutting</strong>\u00a0and<strong>\u00a0coagulation.</strong></li>\n<li><strong>Fulguration</strong>\u00a0refers to the\u00a0<strong>destructive coagulation\u00a0</strong>of tissues with\u00a0<strong>charring.\u00a0</strong>The diathermy matching is set to coagulation and a higher effective voltage is used to make larger sparks jump an air gap thus fulgurating the tissues.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d81c4d45762e47fa8fe68c7d13b1a4ef.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/654a4e1b00464eec885a99eaf02876acx720x827.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/74ed992a61ef498a8309022346b666e6x210x151.PNG"
    ]
  },
  {
    "text": "A 45-year-old male patient with COVID-19 infection develops shortness of breath and is brought to the hospital. His SpO2 increases from 81% to 83% on administering oxygen via facemask at 10 L/min. The decision to deliver oxygen using the device shown below is made. What is its oxygen delivery rate?",
    "choices": [
      {
        "id": 1,
        "text": "1-6 L/min"
      },
      {
        "id": 2,
        "text": "2-15 L/min"
      },
      {
        "id": 3,
        "text": "10-15 L/min"
      },
      {
        "id": 4,
        "text": "40-60 L/min"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The equipment shown in the image is <strong>high-flow nasal cannula</strong>. It delivers oxygen at 40-60 L/min.\u00a0This patient has\u00a0<strong>persistent hypoxia</strong>\u00a0after an adequate trial of standard oxygen therapy and should be started on\u00a0<strong>high-flow nasal cannula oxygen therapy.\u00a0</strong></p>\n<p><strong>High flow nasal cannula</strong> is a mode of respiratory support used in the management of acute respiratory failure. It delivers <strong>humidified gas</strong> via the nasal cannula at high flow rates.</p>\n<ul>\n<li>HFNC can deliver oxygen at 40 L/min, 37\u00b0C, and 99.9% relative humidity.</li>\n<li>The <strong>high-flow oxygen</strong> is delivered directly to the nasopharynx. This produces <strong>FiO<sub>2</sub></strong> equal to that delivered by traditional mask devices.</li>\n<li>The benefits of HFNC include <strong>reduced work</strong> of breathing, <strong>improved gas exchange</strong> by nasopharyngeal dead-space washout, and <strong>decreased</strong>\u00a0<strong>energy</strong> required to <strong>humidify</strong> and <strong>heat</strong> respiratory gases.</li>\n</ul>\n<p>The HFNC equipment shown in the image below uses a heated humidifier (named PMH200), a nasal cannula (No. 2), and a ventilator (brand: vivo30).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2c59e9d848f14caab96b7e72d5defc07.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3aebb44bf51947339bd67c0ef0bc717ex512x525.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/830ff59bb60643dd907d3b8157545fe2x1280x1280.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2d9a526f186649dabbf96fed3f12c658x720x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e9e6523971b7493b9ef0d7937aec36c9x1279x1173.JPEG"
    ]
  },
  {
    "text": "The Sengstaken-Blakemore tube used in the management of bleeding esophageal varices consists of all of the following, except ______.",
    "choices": [
      {
        "id": 1,
        "text": "Gastric balloon port"
      },
      {
        "id": 2,
        "text": "Esophageal balloon port"
      },
      {
        "id": 3,
        "text": "Gastric aspiration port"
      },
      {
        "id": 4,
        "text": "Esophageal aspiration port"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The<strong> Sengstaken-Blakemore tube</strong> consists of<strong> 3 channels</strong>&nbsp;the&nbsp;<strong>esophageal balloon</strong> channel, a <strong>gastric balloon</strong> channel, and a <strong>gastric aspiration</strong> channel.</p>\n<p>The <strong>gastric balloon</strong> is <strong>inflated</strong> and tension is applied to the <strong>gastroesophageal junction.</strong> If this does not control the hemorrhage, the <strong>esophageal balloon</strong> is <strong>inflated</strong> as well, compressing the lower oesophageal&nbsp;<strong>venous plexus</strong> between them. Only <strong>gastric contents</strong> can be <strong>aspirated.</strong></p>\n<p>Sengstaken-Blakemore tube is thus used to provide <strong>mechanical tamponade</strong> for <strong>temporary</strong> stoppage of bleeding in acute variceal bleed setting.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dd94045327d24b0285a5272ae4add814x1280x1825.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f5a97141678e41ed84faaff618813879x720x548.PNG"
    ]
  },
  {
    "text": "Identify the function of the instrument shown in the image below:",
    "choices": [
      {
        "id": 1,
        "text": "Drainage of urine"
      },
      {
        "id": 2,
        "text": "Dilation of cervix"
      },
      {
        "id": 3,
        "text": "Measurement of cervical length"
      },
      {
        "id": 4,
        "text": "Insufflation of dye in hysterosalpingography"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The instrument shown is a Hegar\u2019s double ended dilator that is used to dilate the cervix in procedures such as dilatation and curettage.</p>\n<p><strong>Other options</strong>:</p>\n<p>Metal catheter used to drain urine is shown below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9a57e5cfae91482f8a9ea51083ac9d96.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1a5758db0d6b492ba8268bf9d1b7ad93x360x270.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a4516c2212874dc1812236e41ee60a32x360x220.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1a5226c19436405ea5bd7dbd5dc0c4dax360x145.JPEG"
    ]
  },
  {
    "text": "Which of the following is the use and the number of the blade shown in the image?",
    "choices": [
      {
        "id": 1,
        "text": "Suture cutting, 11"
      },
      {
        "id": 2,
        "text": "Suture cutting, 12"
      },
      {
        "id": 3,
        "text": "Skin incision, 11"
      },
      {
        "id": 4,
        "text": "Skin incision, 12"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The size of the surgical blade shown is the <strong>12-size blade</strong> which is a <strong>small, pointed, crescent-shaped blade</strong> used typically as a <strong>suture cutter. </strong>It is <strong>most sharp</strong> on the <strong>inside edge</strong> of its <strong>curve.</strong></p>\n<p>Uses of the 11-size blade:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Incision and drainage <strong>(I &amp; D)</strong> of an abscess</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Insertion of<strong> </strong>drains and arteriotomy</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Wound debridement</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5b7dc540377e4e969662f1c7f5fcfae2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6c73199ec3b44fe9aa18a905f79a1b53x1280x1666.JPEG"
    ]
  },
  {
    "text": "The image given shows a maneuver used during labor. Which of the following forceps can be used instead of this maneuver?",
    "choices": [
      {
        "id": 1,
        "text": "Kielland Forceps"
      },
      {
        "id": 2,
        "text": "Tucker Mclane forceps"
      },
      {
        "id": 3,
        "text": "Pipers forceps"
      },
      {
        "id": 4,
        "text": "Wrigley's forceps"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shows <strong>Burns-Marshall</strong> technique used in the delivery of the <strong>aftercoming head</strong> in breech delivery. <strong>Piper\u2019s</strong> forceps can be used to deliver the <strong>aftercoming head</strong> in <strong>breech</strong> instead of this <strong>maneuver.</strong></p>\n<p><strong>Piper's</strong> forceps, identified by its <strong>distinct perineal curve,</strong> is used to assist the <strong>delivery</strong> of the after-coming head in breech.</p>\n<p>It has a <strong>cephalic</strong> curve, <strong>reverse pelvic</strong> curve, and <strong>long parallel shanks</strong> that permit the <strong>baby\u2019s body</strong> to <strong>rest</strong> against it during <strong>head delivery.</strong> It may be <strong>applied electively</strong> or when the Mauriceau maneuver cannot be accomplished easily.</p>\n<p>The image below shows Pipers forceps:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e08745fa55694817bae44616669e5232.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e43ad9cf0a0047e89da1b2b462011078x1062x312.PNG"
    ]
  },
  {
    "text": "While on rounds in the post-operative ward,  you observe your senior teaching a patient who has undergone an open cholecystectomy two days ago, to use this device. What is the main purpose of using this device?",
    "choices": [
      {
        "id": 1,
        "text": "Prevent collection of mucous"
      },
      {
        "id": 2,
        "text": "Promote oxygenation"
      },
      {
        "id": 3,
        "text": "Prevent atelectasis"
      },
      {
        "id": 4,
        "text": "Prevent hypercarbia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The purpose of\u00a0<strong>incentive spirometry</strong> in a post-operative patient is to <strong>prevent pulmonary atelectasis.</strong></p>\n<p>Atelectasis, especially of the lower lobes, is the <strong>most common respiratory complication</strong> in a post-operative patient and can be prevented by <strong>sitting the patient</strong> or <strong>inclining the bed</strong>, <strong>early mobilization, deep breathing exercises </strong>with<strong> incentive spirometry, </strong>and <strong>chest physiotherapy.\u00a0</strong>Patients who are not fully awake may require <strong>non-invasive mechanical ventilation</strong> with <strong>PEEP</strong>. Correct manner of performing incentive spirometry is by taking <strong>sequential deep breaths</strong> so that all the balls or marker in the tube <strong>rise to the top</strong>, holding the breath for <strong>5-6 seconds</strong>, and then exhaling.\u00a0</p>\n<p>The primary pathophysiology of is <strong>inadequate expansion</strong> of the <strong>alveoli</strong> leading to their<strong> collapse</strong>. The factors predisposing to atelectasis are <strong>general anesthesia</strong>, <strong>upper abdominal</strong>\u00a0and <strong>thoracic surgery</strong>. In the post-operative period,<strong> inadequate pain control</strong> may lead to <strong>poor inspiratory effort </strong>and and <strong>reduced diaphragm contraction</strong> in the patient's attempt to avoid experiencing pain,\u00a0 may also contribute to the development of atelectasis. On the other hand, <strong>overuse of opioid analgesics</strong> or sedatives may also favour development of atelectasis due to respiratory depression causing collection of secretions. Other causes include lack of mobilization (bed-bound patients) or positional change.</p>\n<p>Patients present with <strong>tachypnoea</strong> and decreased oxygen saturation and on examination, the breath sounds are <strong>bronchial</strong> in nature and <strong>reduced</strong> in intensity. Chest X-ray may show <strong>diminished lung volume</strong>, linear opacities, and elevation of the diaphragm on the affected side.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4e3acce4203c4da990781ce6c7e22e1b.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements describe the similarities between Foley's and Malecot's catheters?",
    "choices": [
      {
        "id": 1,
        "text": "1 and 3"
      },
      {
        "id": 2,
        "text": "1 and 5"
      },
      {
        "id": 3,
        "text": "2 and 3"
      },
      {
        "id": 4,
        "text": "2 and 4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Both Foley's and Malecot's</strong> catheters are <strong>self-retaining </strong>(Option 1) and <strong>sized in the \u2018French\u2019 scale </strong>(Option 5).</p>\n<p>However, a <strong>Foley's</strong> catheter is <strong>color coded for size</strong> (Option 2), can be introduced<strong> per-urethra</strong> (Option 3) and may have a <strong>double lumen</strong> (Option 4), none of which are true for a Malecot catheter.</p>\n<p>A Foley catheter is a <strong>self-retaining</strong> sterile, latex tube with a <strong>straight tip </strong>that is used to drain urine and may be introduced <strong>per urethra</strong>. The key feature is the presence of a <strong>balloon</strong> at the tip which is inflatable, making the catheter retained at the neck of the bladder. The size of the Foley catheter is based on the <strong>outer diameter in mm</strong> according to the <strong>\u2018French\u2019</strong> scale (1 Fr = 0.3mm) according to which the catheter is color coded. Foley catheters have one <strong>lumen</strong> for <strong>draining urine</strong>, and one for<strong> instilling sterile water</strong> for bladder inflation in the case of two-way Foley, while a three-way Foley also has another lumen for <strong>irrigation.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/792ec065b903458b91ca988c98812d96x1280x1995.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5bfa2e4e5f4b4feea2b0db9c1844ebb0x1280x1337.JPEG"
    ]
  },
  {
    "text": "A patient in the ICU, who was in a comatose condition, was shifted onto the ventilator for assisted ventilation. Which of the following circuits will be used in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Image 2"
      },
      {
        "id": 2,
        "text": "Image 1"
      },
      {
        "id": 3,
        "text": "Image 4"
      },
      {
        "id": 4,
        "text": "Image 3"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The patient in the given case scenario would be put on <strong>controlled ventilation</strong>. The most appropriate circuit to be used in this case is the\u00a0<strong>Mapleson D circuit </strong>which is depicted in\u00a0<strong>image 2,\u00a0</strong>since it is one of the <strong>most efficacious</strong> circuits for controlled ventilation. <strong>M</strong><strong>odification </strong>of<strong> Mapleson D </strong>is known as the<strong> Bain</strong> circuit.</p>\n<p class=\"p1\">The <strong>order of efficiency</strong> for <strong>controlled</strong> ventilation amongst Mapleson circuits is <strong>DFE&gt;BC&gt;A.</strong></p>\n<p class=\"p1\">Image 2 is identified as the Mapleson D circuit due to the following observations:</p>\n<ul>\n<li class=\"p1\"><strong>Fresh gas flow</strong> (blue) is <strong>near</strong> the <strong>patient's mouth</strong></li>\n<li class=\"p1\"><strong>APL</strong> valve(red) is <strong>away</strong> from the <strong>patient's mouth</strong></li>\n<li class=\"p1\">Presence of a <strong>reservoir bag distal</strong> to APL valve.</li>\n</ul>\n<p class=\"p1\">The Mapleson D circuit is efficient during controlled ventilation since it has a very low requirement of fresh gas flow in terms of minute ventilation (only 1-2 times the minute ventilation). In this circuit, the fresh gas flow forces alveolar air away\u00a0from the patient and toward the APL valve.\u00a0</p>\n<p class=\"p1\">The <strong>Bain</strong> <strong>circuit</strong> is a <strong>coaxial version</strong> of the Mapleson D system that incorporates the <strong>fresh gas inlet tubing inside </strong>the<strong> breathing tube</strong>. This modification decreases the circuit\u2019s bulk and <strong>retains heat</strong> and humidity better than a conventional Mapleson D circuit as a result of partial warming of the inspiratory gas by <strong>countercurrent</strong> <strong>exchange</strong> with the warmer expired gases.</p>\n<p class=\"p1\">The <strong>order of efficiency</strong> for <strong>spontaneous</strong>\u00a0ventilation amongst Mapleson circuits is <strong>A&gt;DFE&gt; CB.</strong></p>\n<p>Other options:\u00a0</p>\n<p>Option B - Image 1 is identified as\u00a0<strong>Mapleson A.\u00a0</strong>It is the most efficacious for use in <strong>spontaneous ventilation.</strong></p>\n<p>Option C - Image 4 is identified as <strong>Mapleson B.\u00a0</strong>This circuit is less efficacious than Mapleson D in controlled ventilation.</p>\n<p>Option D - Image 3 is identified as\u00a0<strong>Mapleson F. </strong>This circuit is less efficacious than Mapleson D in controlled ventilation<strong>.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/09ae77e9e18641dd82e6824c9471ca7a.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4c19ee713333475ba9ac3daf99034045x1280x4494.JPEG"
    ]
  },
  {
    "text": "Which of the following retractors is best suited for retracting the skin flap during sebaceous cyst excision?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A <strong>double hook retractor</strong> (<strong>Image 3</strong>)\u00a0 is best suited for retracting the<strong> skin flap</strong> during <strong>sebaceous cyst excision</strong>.</p>\n<p><strong>Uses</strong> of a double hook retractor (shown below):</p>\n<ul>\n<li>To retract skin flap during <strong>sebaceous cyst excision.\u00a0</strong></li>\n<li>Skin retraction during <strong>venesection</strong>.\u00a0</li>\n<li>Skin and thyroid isthmus retraction during<strong> tracheostomy.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/02da14306d6e4ab9b36dc501edcd5667.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e6d4587eb7ef4b3fb3c27b68db8552a2x1279x859.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/36a219f34df84a099cba994da557e2e8x720x397.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3840c874d5ec4cfaa3a0b88ed7e362bcx1279x745.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ade53f6ddfa84b2db84b46f9a9a0cbe0x720x526.JPEG"
    ]
  },
  {
    "text": "A 28-year-old primigravida who was admitted to the labor room at 40 weeks of gestation was planned for induction of labor using the device shown below. Which of the following medications is present in this device?",
    "choices": [
      {
        "id": 1,
        "text": "10 mg of misoprostol"
      },
      {
        "id": 2,
        "text": "10 mg of dinoprostone"
      },
      {
        "id": 3,
        "text": "5 mg of misoprostol"
      },
      {
        "id": 4,
        "text": "5 mg of dinoprostone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\"><span class=\"s1\">The obstetric device shown in the above image is of <strong>cervidil vaginal insert.</strong>&nbsp;<span data-dobid=\"hdw\">It contains <strong>10 mg </strong>of <strong>dinoprostone</strong>.</span></span></p>\n<p class=\"p1\"><span class=\"s1\">A cervidil vaginal insert&nbsp;</span><span class=\"s1\">is a thin, flat, rectangular polymeric wafer held within a small, white mesh polyester sac.&nbsp;</span><span class=\"s1\">It contains 10 mg of dinoprostone (PGE2) released at a rate of 0.3 mg/hour.&nbsp;</span>The sac has a long attached tail to allow easy removal from the vagina.</p>\n<p class=\"p1\">Following insertion, the woman should remain recumbent for at least 2 hours. The insert is removed after 12 hours or with labor onset and at least 30 minutes before the administration of oxytocin.</p>\n<p class=\"p1\">It is used for cervical ripening prior to induction. A possible side effect of dinoprostone is uterine tachysystole.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c9d171425dd54359bac561c8ddc064aa.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "What is the best position for the patient to be in while inserting the given tube for enteral feeds?",
    "choices": [
      {
        "id": 1,
        "text": "Supine with neck flexion"
      },
      {
        "id": 2,
        "text": "Supine with neck extension"
      },
      {
        "id": 3,
        "text": "Sitting with neck flexion"
      },
      {
        "id": 4,
        "text": "Sitting with neck extension"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image is <strong>Ryle's tube.</strong> The best position for this patient during the insertion of Ryle's tube is&nbsp;<strong>sitting </strong>with <strong>neck flexion.</strong></p>\n<p>Nasogastric tube/ Ryle's tube is used to provide <strong>enteral feeds.</strong> It is also used to <strong>diagnose</strong> the<strong> patency</strong> of the esophagus in conditions like tracheoesophageal fistula.&nbsp;If enteral feeds are continued for more than a week then a fine bore tube is used.&nbsp;</p>\n<p>It is inserted by standing perpendicular to the patient and the distance is <strong>calculated</strong> using the NEX method.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">NEX method:</div>\n</div>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<ul>\n<li>The<strong>&nbsp;tip of the nose&nbsp;</strong>to<strong>&nbsp;ear&nbsp;</strong>to<strong>&nbsp;xiphisternum</strong>.</li>\n<li>The tube length should be estimated before insertion.</li>\n<li>Place the exit port of the tube at the&nbsp;<strong>tip of the nose</strong>. Extend tube to the&nbsp;<strong>earlobe</strong>, and then to&nbsp;<strong>xiphisternum</strong>.</li>\n</ul>\n</div>\n</div>\n<p><strong>Confirmation</strong> of the<strong> correct position</strong> is done by <strong>auscultation</strong> in the epigastric area while injecting a bolus of air and X-ray chest.&nbsp;</p>\n<p>Approximate length: 120-125&nbsp;cm</p>\n<p>Markings&nbsp;indicating traversing of the tube through various parts of the stomach:</p>\n<p>1) 40 cm - Traversed cardia of the stomach</p>\n<p>2) 50 cm - Traversed body of stomach</p>\n<p>3) 60 cm - Traversed pylorus</p>\n<p>4) 70 cm - Tube has traversed Duodenum</p>\n<p><strong>Indications</strong>&nbsp;for NG tube:</p>\n<ul>\n<li>Aspiration of gastric fluid</li>\n<li>Gastric decompression in cases of&nbsp;intestinal obstruction&nbsp;and&nbsp;paralytic ileus.</li>\n<li>Zollinger-Ellison syndrome is characterized by hypersecretion of gastrin resulting in acid-induced diarrhea that is controlled by&nbsp;nasogastric aspiration of gastric secretions&nbsp;</li>\n<li>Feeding</li>\n<li>Administration of medication</li>\n<li>Bowel irrigation</li>\n</ul>\n<p><strong>Contraindications</strong>&nbsp;for NG tube:</p>\n<ul>\n<li>Absolute:\n<ul>\n<li>Severe midface trauma</li>\n<li>Recent nasal surgery</li>\n<li>Basilar skull fractures</li>\n</ul>\n</li>\n<li>Relative:\n<ul>\n<li>Coagulation abnormality</li>\n<li>Caustic ingestion</li>\n<li>Esophageal trauma/ obstruction</li>\n<li>Esophageal varices</li>\n<li>Recent banding of esophageal varices</li>\n<li>Anastomoses in the stomach and esophagus</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/63f31c9bb6a84d829f1b05f85162c966.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/740f844dea3c45dca08649ddaa7c94b0x1280x1602.JPEG"
    ]
  },
  {
    "text": "Identify the instrument.",
    "choices": [
      {
        "id": 1,
        "text": "Babcock forceps"
      },
      {
        "id": 2,
        "text": "Kocher forceps"
      },
      {
        "id": 3,
        "text": "Lane forceps"
      },
      {
        "id": 4,
        "text": "Lister sinus forceps"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image is that of\u00a0<strong>Kocher forceps. </strong>It can be identified by the presence of <strong>serrations</strong> in the blade and <strong>apposing tooth</strong> in the tips.</p>\n<p>It is used to hold the gauze for blunt dissection, to hold the resected bowel, and to hold the ribs during rib resection.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ccb757353b7041b6bff945bf1c4eb5bd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bd20695864e04a3a8fec5f7fde62a9ffx1279x916.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/49359139514a4cc78210dfc7bfa7d928x1280x1431.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/45c6c202eda441ad80a51e620e0a1029x1280x948.JPEG"
    ]
  },
  {
    "text": "Identify the instrument given below. Which of the following structures is not cut during the procedure most commonly carried out by this instrument?",
    "choices": [
      {
        "id": 1,
        "text": "Transverse perineal  muscles"
      },
      {
        "id": 2,
        "text": "Obturator muscle"
      },
      {
        "id": 3,
        "text": "Bulbospongiosus"
      },
      {
        "id": 4,
        "text": "Transverse perineal branches of pudendal  nerves"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The instrument in the given image is an <strong>episiotomy scissors.</strong> The <strong>obturator muscle</strong> is not cut during <strong>mediolateral episiotomy</strong> which is the most commonly done procedure using this instrument.</p>\n<p>A surgically planned incision on the perineum and the posterior vaginal wall during&nbsp;the second stage of labour is called an episiotomy. In mediolateral episiotomy,<em>&nbsp;</em>the incision is made downwards and outwards from the midpoint of the fourchette&nbsp;either to the right or to the left.</p>\n<p><strong>Structures cut</strong> in mediolateral&nbsp;episiotomy:</p>\n<ul>\n<li>Posterior vaginal wall</li>\n<li>Superficial and deep transverse perineal muscles</li>\n<li>Bulbospongiosus and part of levator ani</li>\n<li>Fascia covering these muscles</li>\n<li>Transverse perineal branches of&nbsp;pudendal vessels and nerves</li>\n<li>Subcutaneous tissue and skin</li>\n</ul>\n<p>The other types of episiotomy include median, lateral, and J shaped episiotomy.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6874b5e67a884ab1bc0ee3b13c20a40a.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true regarding the procedure performed with the given instrument?",
    "choices": [
      {
        "id": 1,
        "text": "Used during injection sclerotherapy for hemorrhoids"
      },
      {
        "id": 2,
        "text": "Can be done without prior digital rectal examination"
      },
      {
        "id": 3,
        "text": "Can be done in a patient with acute anal fissure"
      },
      {
        "id": 4,
        "text": "Lower part of sigmoid colon can be visualised"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows a <strong>proctoscope</strong>, used for performing <strong>proctoscopy</strong>. One of the therapeutic indications of proctoscopy is performing <strong>injection sclerotherapy</strong> of hemorrhoids.</p>\n<p>Proctoscopy can be used to inspect the <strong>anus</strong>, <strong>anorectal</strong> <strong>junction</strong> and the <strong>lower part of the rectum&nbsp;</strong>(option D). Most commonly the patient is examined in the <strong>left lateral (Sims) position</strong> with the buttocks overlying the edge of the examination couch. Alternatively in younger patients, prone jack-knife or knee-elbow positions may be used. A <strong>digital rectal examination is mandatory</strong> before performing a proctoscopy (option B). Minor procedures such as <strong>injection sclerotherapy</strong> or <strong>banding</strong> of hemorrhoids and <strong>biopsy</strong> of suspected neoplasms can also be carried out in conjunction with proctoscopy (option A). <strong>Acute anal fissure</strong> is a <strong>contraindication</strong> for doing proctoscopy (option C) because it is extremely painful for the patient.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/20f239d886e44864a9ddb9fb7cbb1385.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "When asked to give the Sims curette, you would pick:",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "3"
      },
      {
        "id": 3,
        "text": "4"
      },
      {
        "id": 4,
        "text": "5"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The instrument marked as 1 in the image is\u00a0<strong>Sims curette.</strong>\u00a0It is a\u00a0<strong>single-ended</strong>\u00a0uterine curette used for\u00a0<strong>dilatation and curettage</strong>.</p>\n<p>It is designed\u00a0to remove tough tissue from the lining of the uterus for biopsy or excision. The curette features a\u00a0<strong>sharp loop tip</strong>\u00a0to aid in the removal of uterine tissue.</p>\n<p><strong>Dilatation and curettage:</strong></p>\n<p>Instruments used in D&amp;C:</p>\n<ul>\n<li>Sims speculum: It retracts the posterior vaginal wall to expose the cervix</li>\n<li>Anterior vaginal wall retractor: Retracts the anterior vaginal wall to expose the cervix</li>\n<li>Vulsellum or Allis forceps: To hold the anterior lip of the cervix</li>\n<li>Uterine sound:\u00a0Simpson's uterine sound is a 30 cm long angulated instrument with a handle at one end and a rounded blunt tip at the other<br />It is used to measure the length of the uterus. It can be identified by the markings used for measurement</li>\n<li>Cervical dilators:\u00a0\n<ul>\n<li>Hegar dilator is a<strong>\u00a0</strong>double-ended dilator used to dilate the cervix.</li>\n<li>Hawkins\u2019 single-ended dilator\u00a0</li>\n<li>Fenton\u2019s dilator</li>\n</ul>\n</li>\n<li>Curette:\n<ul>\n<li>Sims curette is a single-ended curette</li>\n<li>Blake's curette is a double-ended curette</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a6099f7ea94849ba802f0782562aa6c8.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f43ef09913f84d1ea305f3ed8d18770ex720x585.JPEG"
    ]
  }
];
        let quizName = 'Instruments Mini Test - Surgery, Anesthesia, Obgy';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2024-25"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>