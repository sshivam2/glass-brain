<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 19 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2023
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 22-year-old woman presents to the emergency department with a 3-day history of dark urine and abdominal distension. On examination, she has an icterus but normal mental status. Laboratory findings include a hematocrit of 26%, reticulocyte count of 5%, platelets at 130,000, ALP of 30 IU/L, ALT of 110 IU/L, AST of 220 IU/L, total bilirubin of 13 mg/dL, negative HBsAg, and a negative urine drug screen. An abdominal ultrasound shows a nodular liver and an enlarged spleen. What is the most likely clinical diagnosis for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Acetaminophen intoxication"
      },
      {
        "id": 2,
        "text": "Acute viral hepatitis"
      },
      {
        "id": 3,
        "text": "Primary biliary cirrhosis"
      },
      {
        "id": 4,
        "text": "Wilson's disease"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario with lab findings of low hematocrit value, <strong>elevated</strong> <strong>reticulocyte count</strong>, and increased <strong>indirect bilirubin </strong>may point to <strong>copper-induced hemolysis</strong>, which is indicative of<strong> Wilson's disease.</strong></p>\n<p><strong>Wilson's disease </strong>is an <strong>autosomal recessive</strong> disorder caused by mutations in the <strong>ATP7B gene</strong>, which encodes a <strong>copper-transporting ATPase </strong>found in cell membranes. Clinical manifestations include <strong>hepatitis, cirrhosis,</strong> behavioural changes, <strong>wing-beating tremors,</strong> and ophthalmic features such as copper deposition in the posterior lens capsule, leading to <strong>sunflower cataracts</strong> and the presence of <strong>Kayser-Fleischer rings</strong>.</p>\n<p>The <strong>laboratory findings</strong> of Wilson\u2019s disease include:</p>\n<ul>\n<li>Low <strong>hematocrit </strong>value, increased <strong>reticulocyte</strong> \u2013 Indicative of <strong>hemolytic anaemia.</strong></li>\n<li><strong>Unconjugated jaundice</strong> \u2013 Hemolytic anaemia and defective conjugation in the liver.</li>\n<li>Mild elevation in the level of <strong>aminotransferase.</strong></li>\n<li><strong>Nodular liver </strong>\u2013 Indicating a chronic condition.</li>\n</ul>\n<p>Diagnosis is made by the presence of <strong>KF rings</strong>, decreased <strong>serum ceruloplasmin</strong> (copper-containing enzyme/ferroxidase) levels, <strong>liver biopsy</strong> and increased <strong>24-hour urine copper excretion.</strong></p>\n<p><strong>Trientine</strong> and <strong>Zinc</strong> are the first choice of drug regimen to be used for treating mild hepatic decompensation in<strong> Wilson\u2019s disease.\u00a0</strong></p>\n<p>Other options :</p>\n<p>Option A: <strong>Acetaminophen intoxication</strong> is ruled out since the <strong>Urinary screen </strong>is <strong>negative.</strong></p>\n<p>Option B: <strong>Acute viral hepatitis</strong> can be ruled out since there is a <strong>nodular liver </strong>indicative of <strong>cirrhosis</strong> and an<strong> enlarged spleen</strong> which implies chronicity. <strong>Aminotransferases</strong> are not grossly elevated.</p>\n<p>Option C: <strong>Primary biliary cirrhosis </strong>(PBC) can also be ruled out since <strong>Alkaline phosphatase</strong> activity is <strong>normal</strong>. Additionally, there is no mention of mitochondrial antibody screening. History is not a characteristic of PBC.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Criteria for weaning a patient on mechanical ventilation include all except_____",
    "choices": [
      {
        "id": 1,
        "text": "Tidal volume of 5 ml/kg"
      },
      {
        "id": 2,
        "text": "Vital capacity of  5 ml/kg"
      },
      {
        "id": 3,
        "text": "Minute ventilation of 10L/min"
      },
      {
        "id": 4,
        "text": "Inspiratory pressure of \u221225 cm H 2 O"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Weaning off mechanical ventilation is indicated when vital capacity is&nbsp;&gt;10 mL/kg.</p>\n<p>All the other options are correct.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A neonate presented with mild intermittent upper abdominal pain. On examination, the infant has a scaphoid abdomen and breath sounds are decreased on both sides. X-ray is given below. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Bochdalek hernia"
      },
      {
        "id": 2,
        "text": "Pneumonia"
      },
      {
        "id": 3,
        "text": "Morgagni hernia"
      },
      {
        "id": 4,
        "text": "Eventration of diaphragm"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical picture of respiratory distress, intermittent abdominal pain, scaphoid abdomen, absent breath sounds in both sides of the chest, and an X-ray image showing bowel loops in the thoracic cavity is diagnostic of <strong>congenital diaphragmatic hernia</strong> (CDH), the most common variant being <strong>Bochdalek hernia</strong>.</p>\n<p>If the defect is posterolateral it is called&nbsp;<strong>Bochdalek hernia&nbsp;</strong>and if it's anteromedial it is called<strong>&nbsp;Morgagni hernia.&nbsp;</strong></p>\n<p>Clinical features :</p>\n<ul>\n<li><strong>Respiratory distress</strong>&nbsp;is a cardinal sign in infants with a congenital diaphragmatic hernia (CDH).</li>\n<li><strong>Early respiratory distress, within 6 hr after birth, is thought to be a poor prognostic sign</strong>.</li>\n<li>Children with CDH may also have a&nbsp;<strong>scaphoid abdomen and increased chest wall diameter.</strong></li>\n<li>Bowel sounds may also be heard in the chest, with a&nbsp;<strong>bilateral&nbsp;decrease in breath sounds.</strong></li>\n<li>The point of maximal cardiac impulse may be displaced away from the side of a hernia if a&nbsp;<strong>mediastinal shift</strong>&nbsp;has occurred.</li>\n<li><strong>Retroperitoneal fat, left kidney, spleen&nbsp;</strong>or only the omentum commonly herniates through the defect. If the defect is large, most abdominal contents including the stomach may herniate.</li>\n</ul>\n<p><strong>Diagnosis:</strong></p>\n<ul>\n<li>Chest radiography and passage of a nasal gastric tube confirm the diagnosis.</li>\n<li>CDH can be diagnosed on&nbsp;<strong>prenatal ultrasonography (between 16 and 24 weeks of gestation)</strong></li>\n<li>High-speed fetal magnetic resonance imaging (MRI) can further define the lesion.</li>\n</ul>\n<p><strong>Treatment:</strong></p>\n<p>Variable period of time (24-72 hours) to allow for stabilization before surgical repair. Immediate respiratory support should be provided, including<strong> rapid endotracheal intubation</strong> and sedation.&nbsp;</p>\n<p>Bag and Mask Ventilation&nbsp;is&nbsp;<strong>contraindicated&nbsp;</strong>in newborns with congenital diaphragmatic hernia because it&nbsp;causes&nbsp;<strong>distension of the stomach</strong>&nbsp;which in turn may limit the expansion of the already&nbsp;<strong>hypoplastic lung</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a39fb585526240acaeb6749d390c97b9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9d01b2e105de478fabb683ccb45bc149x1280x1660.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/448fd8ec71d248589903394fe7a95637x720x664.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/97213a6b824346bebf418955ba37f97fx512x402.PNG"
    ]
  },
  {
    "text": "A 28-year-old woman gave birth to a child with the features shown in the given image. On examination, the child had brittle bones, and x-ray scans revealed stippled epiphyses. Which of the following drugs is most likely to be implicated in causing this teratogenic condition?",
    "choices": [
      {
        "id": 1,
        "text": "Alcohol"
      },
      {
        "id": 2,
        "text": "Topiramate"
      },
      {
        "id": 3,
        "text": "Warfarin"
      },
      {
        "id": 4,
        "text": "Lithium"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><span data-preserver-spaces=\"true\">The given image shows a depressed nasal bridge (saddle nose). This image along with the stippling of bone epiphyses points to <strong>fetal warfarin syndrome </strong>or<strong> warfarin embryopathy</strong>.&nbsp;</span></p>\n<p><strong><span data-preserver-spaces=\"true\">Features:</span></strong></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Repeated abortions</span></li>\n<li><span data-preserver-spaces=\"true\">CNS abnormalities</span></li>\n<li><span data-preserver-spaces=\"true\">Depressed nasal bridge/absent nasal bone/saddle nose at birth</span></li>\n<li><span data-preserver-spaces=\"true\">Bleeding diathesis at birth</span></li>\n<li><span data-preserver-spaces=\"true\">Growth retardation - hypoplasia of nose, eye sockets, and long bones with stippling of epiphyses&nbsp;</span></li>\n</ul>\n<p><span data-preserver-spaces=\"true\"><strong>Anticoagulation in pregnancy:</strong></span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Warfarin: Although safe for the mother, it can lead to&nbsp;</span><strong><span data-preserver-spaces=\"true\">warfarin embryopathy</span></strong><span data-preserver-spaces=\"true\">, miscarriage, IUGR, and stillbirths.</span></li>\n<li><span data-preserver-spaces=\"true\">Heparin: It is safe for the fetus</span><span data-preserver-spaces=\"true\">&nbsp;but is less effective than warfarin.</span></li>\n<li><span data-preserver-spaces=\"true\">LMWH: It is inadequate, and ACOG does not recommend its use in pregnant women with prosthetic heart valves.</span></li>\n</ul>\n<table class=\"t1\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\"><strong>Period of gestation</strong></p>\n</td>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\"><strong>Anticoagulant</strong></p>\n</td>\n</tr>\n<tr>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">Till 12 completed weeks</p>\n</td>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">LMWH or UFH</p>\n</td>\n</tr>\n<tr>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">13 to 36 weeks</p>\n</td>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">Warfarin</p>\n</td>\n</tr>\n<tr>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">36 weeks to 6 hours before delivery</p>\n</td>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">LMWH or UFH</p>\n</td>\n</tr>\n<tr>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">6 hours after vaginal and 24 hours after cesarian section</p>\n</td>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">LMWH or UFH (ACOG recommendation)</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><span data-preserver-spaces=\"true\">If delivery occurs while the anticoagulant is still effective, and excessive bleeding happens, then <strong>protamine sulfate</strong> is given intravenously.&nbsp;</span></p>\n<p><span data-preserver-spaces=\"true\">Anticoagulation of pregnant women:</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">The patient taking warfarin should discontinue it as soon as pregnancy is diagnosed and replace it with&nbsp;</span><strong><span data-preserver-spaces=\"true\">heparin 5,000 units twice daily subcutaneously up to the 12th week of gestation</span></strong><span data-preserver-spaces=\"true\">.&nbsp;</span></li>\n<li><span data-preserver-spaces=\"true\">Heparin is then replaced by&nbsp;</span><strong><span data-preserver-spaces=\"true\">a warfarin tablet of 3 mg daily</span></strong><span data-preserver-spaces=\"true\">&nbsp;to be taken at the same time each day and continued&nbsp;</span><strong><span data-preserver-spaces=\"true\">up to 36 weeks </span></strong>in patients with a high risk of thrombosis.</li>\n<li><span data-preserver-spaces=\"true\">Thereafter, warfarin is replaced by&nbsp;</span><strong><span data-preserver-spaces=\"true\">heparin, which is discontinued 6 hours</span></strong><span data-preserver-spaces=\"true\">&nbsp;just before delivery.</span></li>\n<li><span data-preserver-spaces=\"true\">Heparin (unfractionated or LMWH) is restarted 6 hours after vaginal delivery and 24 hours after the cesarean section.</span></li>\n<li><span data-preserver-spaces=\"true\">Unfractionated heparin (UFH), LMWH, and warfarin therapy are&nbsp;</span><strong><span data-preserver-spaces=\"true\">not contraindicated</span></strong><span data-preserver-spaces=\"true\">&nbsp;in breastfeeding.</span></li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a62c3ac562af45468086387959c3bfa1.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0d669e35bc1e4139bd255e4387c48c61x1280x1476.JPEG"
    ]
  },
  {
    "text": "A 56-year-old man suffering from diabetes mellitus for 10 years came for a routine checkup. His lipid profile revealed increased TG (triacylglycerol) and VLDL (very low-density lipoprotein). What is the cause of this abnormal lipid profile?",
    "choices": [
      {
        "id": 1,
        "text": "Increased activity of lipoprotein lipase and decreased activity of hormone sensitive lipase"
      },
      {
        "id": 2,
        "text": "Increased activity of hormone sensitive lipase and decreased lipoprotein lipase activity"
      },
      {
        "id": 3,
        "text": "Increase in peripheral function of LDL receptors"
      },
      {
        "id": 4,
        "text": "Increased in activity of hepatic lipase"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In chronic diabetes, the value of TG and VLDL are increased due to an <strong>increase in hormone-sensitive lipase and a decrease in lipoprotein lipase.</strong> <br /><br />Insulin has an inhibitory effect on hormone-sensitive lipase (HSL). In diabetes, <strong>low insulin</strong> corresponds to an increase in HSL activity. This promotes the <strong>breakdown of lipids and a release of TG</strong> and free fatty acids from the adipose tissue.<br /><br />Insulin induces the activity of lipoprotein lipase (LPL) which is present on the <strong>capillary walls.</strong> LPL promotes hydrolysis of TG and the degradation of the transport proteins, VLDL and chylomicrons. In diabetes, <strong>low insulin</strong> leads to <strong>decreased LPL</strong> activity which corresponds to an <strong>increase in VLDL and TG.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/930c5ce53b9a48df908e15bf24113255x800x552.JPEG"
    ]
  },
  {
    "text": "Which of the following is the best imaging modality to diagnose neuroendocrine tumours(NETs)?",
    "choices": [
      {
        "id": 1,
        "text": "USG"
      },
      {
        "id": 2,
        "text": "CT"
      },
      {
        "id": 3,
        "text": "MRI"
      },
      {
        "id": 4,
        "text": "PET"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p class=\"p1\">Positron emission tomography (PET) is the best modality to diagnose Neuroendocrine tumors(NETs).</p>\n<p class=\"p1\">The <strong>initial imaging</strong> investigation is standard cross-sectional imaging with <strong>computed tomography (CT) or magnetic resonance imaging (MRI)</strong>. In patients of suspected NETs, CTs of the chest, abdomen, and pelvis are done for staging, and consideration of an MRI of the liver or pancreas in cases where further definition is required.</p>\n<p class=\"p1\">PET scans with&nbsp;<strong><sup>111</sup>In (indium) labeled pentetreotide somatostatin</strong> and&nbsp;<strong><sup>68</sup>Ga (gallium) linked somatostatin analogues</strong> take advantage of the overexpression of somatostatin receptors commonly seen in NETs. These radiolabeled somatostatin analogues localized with PET scan are the best imaging modality for NETs.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 14-year-old boy presents with acute onset of pain in his scrotum. Vital signs are within normal limits. Physical examination shows a swollen erythematous scrotum and the right testis has gone up. Cremasteric reflex is absent. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Right sided hydrocele"
      },
      {
        "id": 2,
        "text": "Strangulated inguinal hernia"
      },
      {
        "id": 3,
        "text": "Right testicular torsion"
      },
      {
        "id": 4,
        "text": "Right epididymorchitis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><span data-preserver-spaces=\"true\">The given clinical vignette along with <strong>negative cremasteric reflex</strong> and <strong>positive Deming's sign </strong>(right testes gone up) is suggestive of </span><strong><span data-preserver-spaces=\"true\">testicular torsion.</span></strong></p>\n<p><span data-preserver-spaces=\"true\">Etiology and risk factors-\u00a0</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">High investment of the tunica vaginalis(like a clapper in a bell). Most common cause.</span></li>\n<li><span data-preserver-spaces=\"true\">Inversion of the testis.</span></li>\n<li><span data-preserver-spaces=\"true\">Separation of the epididymis from the body of the testis.</span></li>\n</ul>\n<p><span data-preserver-spaces=\"true\">Clinical features of testicular torsion are - scrotal pain and swelling, erythema, negative cremasteric reflex, nausea, and vomiting, testis seems high in the scrotum and twisted cord can sometimes be palpated.</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\"><strong>Prehn\u2019s Sign</strong>\u00a0is used to<strong> differentiate the torsion of testis from acute epididymo orchitis</strong>. In the case of acute epididymo orchitis, the pain gets relieved on the elevation of the testis but not in torsion of testes.</span></li>\n<li><span data-preserver-spaces=\"true\"><strong>Deming\u2019s sign</strong>: Spasm of the cremaster muscle and the cord twisting cause the <strong>affected testis to be positioned higher in torsion testes</strong>.</span></li>\n</ul>\n<p><strong><span data-preserver-spaces=\"true\">Doppler ultrasound</span></strong><span data-preserver-spaces=\"true\"> scanning can confirm the absence of the blood supply to the affected testis, but the false-positives are high. </span></p>\n<p><strong><span data-preserver-spaces=\"true\">Urgent scrotal exploration</span></strong><span data-preserver-spaces=\"true\"> in case of doubtful diagnosis.\u00a0 A transverse scrotal incision is taken. If the testis is viable, twisting is prevented by fixation with three non-absorbable sutures between the tunica albuginea of the testis and the scrotal raphe.</span></p>\n<p><span data-preserver-spaces=\"true\">Differential diagnosis -</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Epididymo-orchitis - Here dysuria associated with the accompanying urinary infection is commonly present. In epididymo-orchitis elevation of the testis reduces the pain while it makes it worse in torsion.\u00a0</span></li>\n<li><span data-preserver-spaces=\"true\">Torsion of a testicular appendage - Here the most common structure to twist is the appendix of the testis, which can be visible as a small dark spot. In most cases, it is indistinguishable from torsion testis. Hence in cases of doubt surgical exploration is done.</span></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old male was diagnosed with achalasia cardia. High-resolution manometry revealed massive, simultaneous, high-pressure contractions of the distal oesophagus. According to the \u200bChicago classification, the patient has which type of achalasia?",
    "choices": [
      {
        "id": 1,
        "text": "Type II"
      },
      {
        "id": 2,
        "text": "Type I"
      },
      {
        "id": 3,
        "text": "Type IV"
      },
      {
        "id": 4,
        "text": "Type III"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given features are suggestive of <strong>type III achalasia cardia.</strong></p>\n<p><strong>Chicago classification of oesophageal motility&nbsp;</strong>describes the criteria for <strong>three types</strong> of achalasia cardia and other disorders associated with EGJ obstruction.</p>\n<p><strong>Chicago type I (Classic achalasia):</strong> It is characterised by hypomotile esophageal body. The criteria include:</p>\n<div class=\"page\" title=\"Page 1117\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Elevated median IRP (&gt;15 mmHg).</li>\n<li>100% failed peristalsis (DCI &lt;100 mmHg&middot;s&middot;cm).</li>\n<li><strong>Premature contractions</strong> with DCI values &lt;450 mmHg&middot;s&middot;cm satisfy criteria for failed peristalsis.</li>\n</ul>\n<p><strong>Chicago type II (with oesophageal compression): </strong>It is characterised by simultaneous tonic contraction after swallowing. The criteria include:</p>\n<div class=\"page\" title=\"Page 1117\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Elevated median IRP (&gt;15 mmHg).</li>\n<li>100% failed peristalsis.</li>\n<li><strong>Panoesophageal pressurisation</strong> with &ge;20% of swallows.</li>\n<li>Contractions may be masked by oesophageal pressurisation and DCI should not be calculated.</li>\n</ul>\n<p><strong>Chicago type III (spastic achalasia): </strong>It is characterised by massive, <strong>simultaneous</strong>, <strong>high-pressure contractions</strong> of the <strong>distal esophagus.</strong> The criteria include:</p>\n<div class=\"page\" title=\"Page 1117\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Elevated median IRP (&gt;15 mmHg).</li>\n<li><strong>No normal peristalsis.</strong></li>\n<li><strong>Premature (spastic) contractions</strong> with DCI &gt;450 mmHg&middot;s&middot;cm with &ge;20% of swallows.</li>\n<li>May be mixed with panoesophageal pressurisation.</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A corpse is brought for evaluation. On post-mortem examination, a ligature that was completely encircling the neck, horizontal, and below the level of the thyroid was seen. There was no dribbling of saliva. What is the cause of death?",
    "choices": [
      {
        "id": 1,
        "text": "Throttling"
      },
      {
        "id": 2,
        "text": "Ligature stangulation"
      },
      {
        "id": 3,
        "text": "Gagging"
      },
      {
        "id": 4,
        "text": "Hanging"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The most likely cause of death in a case where the ligature is <strong>completely encircling</strong> the neck, <strong>horizontal</strong>, and <strong>below</strong> the level of the <strong>thyroid,\u00a0</strong>with <strong>no saliva dribbling</strong>,\u00a0is\u00a0<strong>ligature strangulation.</strong></p>\n<p>Strangulation is a type of asphyxia where there is neck constriction without suspension of the body. The pressure on the neck is applied either by bare hands, a ligature, or by any other instrument.</p>\n<div class=\"page\" title=\"Page 227\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>When strangulation is done by using a ligature like a constricting band or rope, it is called ligature strangulation. The constricting band is tightened by a force other than the victim's body weight. It is characterized by the\u00a0<strong>ligature mark</strong>,\u00a0which is <strong>transverse</strong> and completely encircles the neck below the thyroid cartilage. There is\u00a0<strong>no dribbling</strong> of saliva. Bleeding may be present in the ears, nose, and mouth.</p>\n<p>Ligature and manual strangulations are mostly homicidal. Marks of violence are usually seen on other parts of the body.</p>\n</div>\n</div>\n</div>\n<p>Other options:</p>\n<p>Option A: <strong>Throttling</strong> or manual strangulation occurs due to compression of the neck by humans leading to asphyxia. Thumb impression and finger marks may be seen over the victim's neck.</p>\n<p>Option C: <strong>Gagging </strong>is a type of asphyxia due to forcible closure of the mouth by a cloth or closing the mouth and nose and is tied around the head.\u00a0</p>\n<p>Option D: <strong>Hanging</strong> is characterized by an incomplete and oblique ligature mark on the neck. It is usually seen higher, between the chin and larynx. Saliva often dribbles from the mouth.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 16-year-old male presented with swelling and tenderness over right leg after sports-related trauma. On examination, there is sensory loss and foot drop suggestive of injury to the common peroneal nerve. Fracture at which of the following sites is likely to cause the given condition?",
    "choices": [
      {
        "id": 1,
        "text": "Shaft of tibia"
      },
      {
        "id": 2,
        "text": "Shaft of fibula"
      },
      {
        "id": 3,
        "text": "Neck of fibula"
      },
      {
        "id": 4,
        "text": "Tibial tuberosity"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient is likely to have fracture involving the<strong> neck of the fibula,&nbsp;</strong>which is closely related to the<strong> common peroneal nerve.</strong></p>\n<p>The common peroneal nerve can be rolled against the neck of the fibula. This nerve is commonly injured here.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4f6425c0efb24a28b82418dc4dd71ebfx1280x1592.JPEG"
    ]
  },
  {
    "text": "A 35-year-old man was admitted following a crush injury to his left leg. Two days later, his urine/plasma creatinine levels are < 20. What is the likely cause?",
    "choices": [
      {
        "id": 1,
        "text": "Rhabdomyolysis"
      },
      {
        "id": 2,
        "text": "Congestive heart failure"
      },
      {
        "id": 3,
        "text": "Hepatorenal syndrome"
      },
      {
        "id": 4,
        "text": "Hypovolemia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This clinical scenario and urine/ plasma creatinine ratio of <strong>&lt;20</strong> is suggestive of&nbsp;<strong>renal AKI</strong>&nbsp;due to <strong>rhabdomyolysis</strong>-induced acute tubular necrosis.</p>\n<p>Rhabdomyolysis is a serious complication of crush injuries. It leads to <strong>muscle breakdown</strong>, releasing a high amount of myoglobin in the blood. Myoglobinuria can lead to acute kidney injury&nbsp;by the following mechanisms:</p>\n<ul>\n<li>Direct toxic effect of myoglobin and heme on the PCT</li>\n<li>Tubular obstruction by precipitation of pigmented casts</li>\n<li>Renal vasoconstriction can cause FeNa &lt; 1 (unlike other renal causes of AKI)</li>\n</ul>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<table style=\"width: 657.46875px;\">\n<tbody>\n<tr>\n<td style=\"width: 278px;\"><strong>Indices</strong></td>\n<td style=\"width: 151px;\"><strong>Prerenal</strong></td>\n<td style=\"width: 216.46875px;\"><strong>Renal</strong></td>\n</tr>\n<tr>\n<td style=\"width: 278px;\">Spot urine sodium (mEq/L)</td>\n<td style=\"width: 151px;\">&lt;20</td>\n<td style=\"width: 216.46875px;\">&gt;40</td>\n</tr>\n<tr>\n<td style=\"width: 278px;\">Fractional excretion of sodium (FENa)</td>\n<td style=\"width: 151px;\">&lt;1%</td>\n<td style=\"width: 216.46875px;\">&gt;2%</td>\n</tr>\n<tr>\n<td style=\"width: 278px;\">Fractional excretion of urea (FEUrea)</td>\n<td style=\"width: 151px;\">&lt;35%</td>\n<td style=\"width: 216.46875px;\">&gt;35%</td>\n</tr>\n<tr>\n<td style=\"width: 278px;\">Urine osmolality (mOsm/kg)</td>\n<td style=\"width: 151px;\">&gt;500</td>\n<td style=\"width: 216.46875px;\">&lt;350</td>\n</tr>\n<tr>\n<td style=\"width: 278px;\">BUN to serum creatinine ratio</td>\n<td style=\"width: 151px;\">&gt;20:1</td>\n<td style=\"width: 216.46875px;\">&lt;10:1</td>\n</tr>\n<tr>\n<td style=\"width: 278px;\">Urine creatinine/plasma creatinine</td>\n<td style=\"width: 151px;\">&gt;40:1</td>\n<td style=\"width: 216.46875px;\">&lt;20:1</td>\n</tr>\n<tr>\n<td style=\"width: 278px;\">Urinary sediment</td>\n<td style=\"width: 151px;\">Nil or hyaline casts only</td>\n<td style=\"width: 216.46875px;\">Renal tubular epithelial casts, muddy brown granular casts</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6bedd3c2ca6e4c58b056a4ea49e4feb8x1200x2480.JPEG"
    ]
  },
  {
    "text": "A 55-year-old multiparous woman who presented with chronic lower abdominal pain has been diagnosed with chronic PID. What is the appropriate treatment of choice for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Salpingectomy"
      },
      {
        "id": 2,
        "text": "Salpingo-oophorectomy"
      },
      {
        "id": 3,
        "text": "Hysterectomy with bilateral salpingo-oophorectomy"
      },
      {
        "id": 4,
        "text": "Both a and b"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Treatment of choice for multiparous women of older age with chronic PID is Hysterectomy with bilateral salpingo-oophorectomy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The incidence of a disease is 4 per 1000 of population with the average duration of 2 years. The prevalence is ________.",
    "choices": [
      {
        "id": 1,
        "text": "8/100"
      },
      {
        "id": 2,
        "text": "2/1000"
      },
      {
        "id": 3,
        "text": "4/1000"
      },
      {
        "id": 4,
        "text": "8/1000"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Prevalence = 4/1000 (Incidence) x 2 (Mean Duration of Disease)= 8/1000 population</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the effect on membrane when extracellular concentration of K+ is decreased?",
    "choices": [
      {
        "id": 1,
        "text": "Increased positivity of the membrane"
      },
      {
        "id": 2,
        "text": "Increased  negativity of RMP"
      },
      {
        "id": 3,
        "text": "Decreased fluctuations in RMP"
      },
      {
        "id": 4,
        "text": "Decreased negativity of membrane"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>When the extracellular concentration of K+ is decreased (hypokalemia), there is increased negativity of RMP.</p>\n<p><strong>RMP</strong> predominantly depends on the <strong>diffusion of K<sup>+</sup> from inside to outside</strong> the cell. This diffusion depends on the concentration gradient with the inside of the cell having a larger concentration of K<sup>+</sup> ions. When the <strong>extracellular concentration of K<sup>+</sup> decreases</strong>, the <strong>concentration gradient for K<sup>+</sup> rises</strong>. Therefore, <strong>more K<sup>+</sup> ions diffuse out</strong> of the cell. This leaves the <strong>inside of the cell more negative</strong> relative to the extracellular space. This increases the negativity of the RMP, leaving the membrane <strong>hyperpolarised.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are true about the fracture shown below, except:",
    "choices": [
      {
        "id": 1,
        "text": "It is an extra-articular fracture"
      },
      {
        "id": 2,
        "text": "Strength of grip is significantly affected"
      },
      {
        "id": 3,
        "text": "It is caused by fall on outstretched hand"
      },
      {
        "id": 4,
        "text": "Cast is applied in James position"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image shows an <strong>extra-articular</strong> fracture of the <strong>fifth metacarpal neck</strong> i.e.<strong>&nbsp;Boxer's fracture</strong>. It is caused by <strong>striking an object </strong>with a closed fist, as seen in boxing, or occasionally by a direct injury.</p>\n<p>The <strong>strength of grip decreases</strong> in this fracture as the fourth and fifth fingers are responsible for the power grip of the hand.</p>\n<p><strong style=\"font-weight: 400;\">The POP cast is applied in </strong><strong>James' position</strong><strong style=\"font-weight: 400;\">/the position of safe immobilization for </strong><strong>metacarpal fractures.</strong><strong style=\"font-weight: 400;\">&nbsp;This prevents stiffness and contractures as the ligaments are at their longest in this position.</strong></p>\n<p>Position of safe immobilization:</p>\n<ul>\n<li style=\"font-weight: 400;\">wrist slightly extended</li>\n<li style=\"font-weight: 400;\">the MCP joints in full flexion and the IP joints extended&nbsp;</li>\n<li style=\"font-weight: 400;\">the thumb in abduction</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/df9425b5491c4698875372abc836d5ac.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ad631f4b8d0b4237a3b23b7673e10432x1280x1300.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1b28b50b16804deab12985d5f692d212x1280x1179.JPEG"
    ]
  },
  {
    "text": "Which of the following diseases is an example of point mutation?",
    "choices": [
      {
        "id": 1,
        "text": "Hemoglobin Lepore"
      },
      {
        "id": 2,
        "text": "\u03b2-Thalassemia type III"
      },
      {
        "id": 3,
        "text": "Hereditary Spherocytosis"
      },
      {
        "id": 4,
        "text": "Sickle cell disease"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>The <strong>classic example</strong><strong>&nbsp;of point mutation is</strong> <strong>sickle-cell disease</strong>.</li>\n<li>This is a <strong>T-to-A</strong> DNA substitution, which in turn results in an A-to-U change in the mRNA corresponding to the <strong>sixth codon</strong> of the <strong>&beta;-globin gene&nbsp;</strong>(Glutamic acid being replaced by valine).</li>\n<li>Defective production of &beta;-globin results in a variety of diseases and is due to many different lesions in and around the &beta;-globin gene.</li>\n</ul>\n<p>A&nbsp;<strong>point mutation</strong>&nbsp;is a change in which a single base is substituted with a different base. These are of two types:</p>\n<ol>\n<li><strong>Missense mutations</strong></li>\n<li><strong>Non-sense mutations</strong></li>\n</ol>\n<p><strong>1. Missense mutations:&nbsp;</strong>These mutations may involve&nbsp;<strong>alteration of a single base in a triplet of bases</strong>&nbsp;and lead to the&nbsp;<strong>replacement of one amino acid by another in the gene product.</strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Based on the substituted amino acid coded, the missense mutations are again of two types:</p>\n<p>a)&nbsp;<strong>Conservative missense mutation:&nbsp;</strong>The substituted amino acid is biochemically similar to the original. It typically causes little change.</p>\n<p>b)&nbsp;<strong>Non-conservative missense mutation:&nbsp;</strong>This type of mutation replaces the normal amino acid with a biochemically different one. An example of this type of mutation is&nbsp;<strong>sickle-cell anemia.</strong></p>\n<p><strong>2. Nonsense mutations:&nbsp;</strong>It is a point mutation in a sequence of DNA that results in a premature stop codon. For example,&nbsp;<strong>&beta;<sup>0</sup>&nbsp;t</strong><strong>halassemia.</strong></p>\n<p>Other options:</p>\n<p><strong>Hereditary spherocytosis (HS)</strong>&nbsp;is an inherited disorder caused by intrinsic defects in the red cell membrane skeleton that render red cells spheroid less deformable and vulnerable to splenic sequestration and destruction.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A neonate at birth falls in the 85th percentile when the weight is plotted on a standard intrauterine growth. This is called:",
    "choices": [
      {
        "id": 1,
        "text": "Appropriate for gestational age"
      },
      {
        "id": 2,
        "text": "Small for gestational age"
      },
      {
        "id": 3,
        "text": "Large for gestational age"
      },
      {
        "id": 4,
        "text": "Very large for gestational age"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>A neonate whose weight falls in the 85th percentile<strong> </strong>on a standard intrauterine growth curve is termed as <strong>appropriate for gestational age</strong>.</p>\n<p>The <strong>standard intrauterine growth curve</strong> plots the birth weight on the y-axis against the gestational age on the x-axis. Based on the graph below, newborns are classified as:</p>\n<ul>\n<li><strong>Appropriate for gestational age (AGA):\u00a0</strong>10th to 90th percentile</li>\n<li><strong>Small for gestational age (SGA): </strong>&lt;10th percentile\u00a0</li>\n<li><strong>Large for gestational age (LGA:\u00a0 </strong>&gt;\u00a090th percentile\u00a0</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/def382e5ddc441079fc328a826d53019x729x677.JPEG"
    ]
  },
  {
    "text": "In which stage of the demographic cycle does the death rate start declining?",
    "choices": [
      {
        "id": 1,
        "text": "Stage 2"
      },
      {
        "id": 2,
        "text": "Stage 3"
      },
      {
        "id": 3,
        "text": "Stage 4"
      },
      {
        "id": 4,
        "text": "Stage 5"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The death rate starts declining in stage 2 of the demographic cycle (early expanding phase).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 44-year-old female cook presents with a 1-year history of dyspnea, episodic cough, wheeze, shortness of breath, and chest tightness.  What is the best way to diagnose bronchial asthma in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Wheeze"
      },
      {
        "id": 2,
        "text": "Dyspnoea"
      },
      {
        "id": 3,
        "text": "FEV1 values"
      },
      {
        "id": 4,
        "text": "Demonstration of reversible obstruction"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The best way to diagnose bronchial asthma is by the&nbsp;<strong>demonstration of reversible obstruction of the airways.</strong></p>\n<p>Wheeze, dyspnoea, and reduced FEV1 values are <strong>nonspecific</strong> indicators of airway obstruction and are seen in any of the obstructive pathologies (i.e. asthma, COPD, and bronchiectasis). Therefore, they do <strong>not</strong>&nbsp;independently diagnose asthma.</p>\n<p>Whereas, the administration of an inhaled beta 2 agonist can differentiate between Asthma and COPD as follows:</p>\n<ul>\n<li><strong>&gt;12%</strong> (200ml) increase in the FEV1 demonstrates the <strong>reversibility</strong> of airway obstruction which is diagnostic of bronchial <strong>asthma</strong>.</li>\n<li><strong>&lt;12% or no increase</strong> in FEV1 demonstrates the <strong>irreversibility </strong>component of airway obstruction indicating <strong>COPD</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with bilateral nasal obstruction. On anterior rhinoscopy, multiple smooth pale glistening masses are found bilaterally suggestive of ethmoidal polyps. The surgeon plans functional endoscopic sinus surgery to remove them. Which of the following structures shown in the image given below is removed during infundibulotomy?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image above shows the <strong>computed tomography (CT) scan of the ostiomeatal complex</strong> in the coronal plane. The structure marked as<strong> 1 </strong>is the<strong> uncinate process</strong> which is removed in<strong> infundibulotomy.</strong></p>\n<p><strong>Infundibulotomy,\u00a0</strong>also known as<strong> uncinectomy,</strong> is the first surgical step in functional endoscopic sinus surgery (FESS). FESS is the treatment of choice for ethmoidal polyps, which this patient has.</p>\n<p>The structure marked as <strong>2</strong> is the <strong>ethmoidal bulla</strong>, and is removed in bullectomy.</p>\n<p>The structure marked as <strong>3</strong> is the <strong>middle turbinate</strong></p>\n<p>The structure marked as <strong>4\u00a0</strong>is the <strong>medial wall of the maxillary sinus.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5a92c24a1d4c48508eb4dd14c0d646ca.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6cee32eb2b0f4c5da5e281bc53f332ecx1280x1096.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/49049a0dc0e44418960900a6c4896c49x1280x2558.JPEG"
    ]
  },
  {
    "text": "A mother brings her 6-year-old kid with complaint that the child wakes up at night sweating and terrified, but is unable to recall the episode. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Narcolepsy"
      },
      {
        "id": 2,
        "text": "Nightmares"
      },
      {
        "id": 3,
        "text": "Night terrors"
      },
      {
        "id": 4,
        "text": "Somnambulism"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario points towards a diagnosis of night terrors.&nbsp;</p>\n<p><strong>Night terrors&nbsp;</strong>(pavor nocturnus)<strong> is characterized by the following</strong>:&nbsp;</p>\n<ul>\n<li>Repetitive experiences of fright in which a person screams in fear during sleep (Usually normal in children). The person cannot be awakened.</li>\n<li><strong>Autonomic disturbances</strong> may be present.</li>\n<li>The person has <strong>no memory of having a dream</strong>.</li>\n<li>Occurs during <strong>delta sleep</strong></li>\n<li>Onset in adolescence may indicate temporal lobe epilepsy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the MRI image.",
    "choices": [
      {
        "id": 1,
        "text": "T1 weighted image"
      },
      {
        "id": 2,
        "text": "T2 weighted image"
      },
      {
        "id": 3,
        "text": "FLAIR"
      },
      {
        "id": 4,
        "text": "STIR"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given MRI is a <strong>T2 weighted image</strong> as the <strong>CSF</strong> appears&nbsp;<strong>bright</strong>/hyperintense and <strong>white matter</strong> appears&nbsp;<strong>dark</strong>.&nbsp;</p>\n<p>In T1 images CSF is dark/hypointense, white matter is white and grey matter is dark.</p>\n<p>Many pulse sequence techniques are used in MRI, of which the most classic are T1 and T2 weighted images.</p>\n<p><strong>FLAIR</strong>&nbsp;(fluid-attenuated inversion recovery) is an inversion recovery technique that nulls fluid from T2. As a result, <strong>CSF is dark.&nbsp;</strong>However,&nbsp;white matter is dark and grey matter is bright similar to T2 imaging.</p>\n<p><strong>STIR</strong>&nbsp;(short tau inversion recovery) is an inversion recovery technique that nulls fat from T2. So,<strong> fat is dark.</strong>&nbsp;It is done to detect bone marrow edema in body part scans.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f560b454be3343c1ad7d4a1e8dac7e03.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/02a0b4ddc300404a883f372a042e3c06x668x692.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9170f642b45a41fc88ae14ed1739b025x682x682.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e3b41f67550140e5ab37b7936cbf54a4x676x676.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b47d42d43c5d4548b5021b465550c8fax806x942.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/69f31eed0ddb491bb7f438bf5b72f783x802x938.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6f3a7bdb71424ebab8f4fc58cbbfbb61x798x1034.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8db6978a3fd94e2aa9e1f887976fb044x802x922.PNG"
    ]
  },
  {
    "text": "What is the size of the cannula shown in the below image?",
    "choices": [
      {
        "id": 1,
        "text": "16 G"
      },
      {
        "id": 2,
        "text": "18 G"
      },
      {
        "id": 3,
        "text": "20 G"
      },
      {
        "id": 4,
        "text": "22 G"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given cannula is&nbsp;<strong>20</strong><strong>&nbsp;gauge IV cannula</strong>&nbsp;as its color code is <strong>Pink</strong><strong>.</strong></p>\n<p>The flow rate in cannula of this gauge is <strong>67</strong><strong>mL/minute</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d991e474a60b42c395335bccd156cc6f.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "You are an intern posted in the labor room assisting the delivery of a primigravida at 38 weeks in labor.  The obstetrician planned for a ventuse delivery because of maternal exhaustion.  She asked you to place the ventuse cup over the flexion point at the fetal scalp.  You locate the flexion point on______",
    "choices": [
      {
        "id": 1,
        "text": "Sagittal suture 3 cm in front of posterior fontanelle"
      },
      {
        "id": 2,
        "text": "Sagittal suture 3 cm behind of anterior  fontanelle"
      },
      {
        "id": 3,
        "text": "Coronal suture 6 cm away from posterior fontanelle"
      },
      {
        "id": 4,
        "text": "Coronal suture 6 cm away from anterior fontanelle"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>An important step in vacuum extraction is proper cup placement over the flexion point, which is a point on the<strong> sagittal suture </strong>that lies <strong>3 cm in front</strong> of the <strong>posterior fontanelle.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1fc152b1a4e84a09a7421068afbefc23x1279x1319.JPEG"
    ]
  },
  {
    "text": "Which is the most common organism implicated in the condition depicted below?",
    "choices": [
      {
        "id": 1,
        "text": "Human papillomavirus-10"
      },
      {
        "id": 2,
        "text": "Human papillomavirus-6"
      },
      {
        "id": 3,
        "text": "Human papillomavirus-3"
      },
      {
        "id": 4,
        "text": "Human papillomavirus-11"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image shows<strong> rough finger-like growth </strong>over the <strong>vulva</strong> which is suggestive of<strong>&nbsp;condyloma acuminata. </strong>It is caused by&nbsp;human papillomavirus<strong> (HPV-6 &gt; HPV-11).</strong></p>\n<p>It is also called&nbsp;genital/venereal warts and has<strong> high infectivity. </strong>It is acquired most commonly after sexual contact but may also occur non-sexually.</p>\n<p><strong>Imiquimod </strong>and <strong>p</strong><strong>odophyllotoxin </strong>are both the first-line drugs used in the treatment of genital warts.<strong><br /></strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/98e78c50b5e14e0295a60215df53f4fb.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "What is the likely diagnosis of the given condition?",
    "choices": [
      {
        "id": 1,
        "text": "Congestive glaucoma"
      },
      {
        "id": 2,
        "text": "Anterior uveitis"
      },
      {
        "id": 3,
        "text": "Conjunctivitis"
      },
      {
        "id": 4,
        "text": "Keratoconus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The likely diagnosis is <strong>anterior uveitis</strong>. The image shows <strong>keratic precipitates</strong> in the cornea and <strong>festooned\u00a0pupil\u00a0</strong>which are characteristic of <strong>anterior uveitis.</strong></p>\n<p>Anterior uveitis is the\u00a0<strong>inflammation</strong>\u00a0of the anterior portion of the uveal tract consisting of the iris and anterior ciliary body.</p>\n<p>Anterior uveitis is characterized by:\u00a0</p>\n<ul>\n<li><strong>Koeppe</strong>\u00a0nodules - lymphocytic infiltrates at the pupillary margin</li>\n<li><strong>Busacca</strong>\u00a0nodules - lymphocytic infiltrates at collarette\u00a0</li>\n<li><strong>Keratic precipitates (KP)\u00a0</strong>-\u00a0proteinaceous deposits on the corneal endothelium. These are\u00a0<strong>pathognomonic</strong>\u00a0for anterior uveitis. Types of KP's include -\u00a0\n<ul>\n<li><strong>Mutton fat type</strong> - seen in granulomatous uveitis</li>\n<li><strong>Granular type</strong> - seen in non-granulomatous uveitis</li>\n</ul>\n</li>\n<li><strong>Aqueous flare\u00a0</strong>-\u00a0diffuse inflammation with exudates in the anterior chamber. It is the\u00a0<strong>earliest sign</strong>\u00a0of non-granulomatous uveitis</li>\n</ul>\n<p>The exudates can also pour out into the posterior chamber causing the iris to adhere posteriorly to the lens. When the adhesions organize to become fibrous, it becomes firm and is known as\u00a0<strong>posterior synechiae</strong>.\u00a0</p>\n<p>A <strong>festooned pupil</strong> is an<strong>\u00a0irregularly shaped pupil</strong>\u00a0that is seen when <strong>segmental posterior synechiae</strong> are formed. When mydiatrics are administered in this condition, there is\u00a0<strong>dilatation</strong>\u00a0of the pupillary portions that have not yet adhered to the lens, leading to festooned pupil.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/98e9b58b8c8b4e4f90811644b57295b1.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/80e933d6c3544177868ef281f06ba5c3x1280x1113.JPEG"
    ]
  },
  {
    "text": "NIH swab test is used in the diagnosis of which of the following parasites?",
    "choices": [
      {
        "id": 1,
        "text": "Pinworm"
      },
      {
        "id": 2,
        "text": "Round worm"
      },
      {
        "id": 3,
        "text": "Hook worm"
      },
      {
        "id": 4,
        "text": "Whipworm"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>NIH swab test</strong> is used in the diagnosis of&nbsp;<strong>pinworm</strong>&nbsp;a.k.a&nbsp;<em><strong>Enterobius vermicularis</strong>. </em>Since pinworms are usually not released in feces, the fecal examination is not useful in the diagnosis. <strong>NIH swab method</strong> and <strong>Scotch tape method</strong> are used for the <strong>collection of specimens</strong>.&nbsp;</p>\n<p>Man acquires&nbsp;<em>Enterobius vermicularis&nbsp;</em>infection by&nbsp;<strong>ingesting&nbsp;embryonated eggs</strong>&nbsp;containing larva through<strong>&nbsp;contaminated fingers</strong>&nbsp;and by&nbsp;<strong>autoinfection</strong>. Infection presents as <strong>itching</strong> (pruritus) and restless sleep (due to <strong>nocturnal</strong> perianal or perineal pruritus).</p>\n<p>At night, the gravid female worm <strong>comes out&nbsp;</strong>through the <strong>anus</strong> and crawls about on the <strong>perianal </strong>and<strong>&nbsp;perineal skin</strong> to lay its <strong>sticky eggs</strong>. This&nbsp;leads to <strong>pruritus</strong>, especially at<strong> night</strong>&nbsp;and&nbsp;the patient scratches the affected perianal area.&nbsp;The worm can crawl into the vulva and vagina causing&nbsp;irritation and a mucoid discharge. It can also cause&nbsp;chronic salpingitis, cervicitis,&nbsp;peritonitis, recurrent urinary tract infections, and&nbsp;appendicitis.</p>\n<div class=\"page\" title=\"Page 2471\">\n<p>The&nbsp;<strong>NIH swab</strong>&nbsp;(National Institutes of Health,&nbsp;USA) consists&nbsp;of a glass rod with a piece of transparent cellophane is attached at one end with a rubber band. The cellophane part is used for swabbing by rolling over the perianal area. The cellophane piece is spread over a glass side and examined microscopically. The image given below shows the NIH swab.</p>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e2dacbd4b7bd41a69f4bfa2256959700x600x936.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8eeeb4b68b6249c2927e8d8794517143x1279x1309.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6c4af44140d643fcbd73bf84254c6e3ax435x497.GIF"
    ]
  },
  {
    "text": "Ashermans syndrome was diagnosed in a woman who presented with secondary amenorrhea. The hysteroscopic evaluation revealed 30% adhesion of the endometrial surfaces, but no agglutination of the uterine wall. It is classified as___",
    "choices": [
      {
        "id": 1,
        "text": "Mild Ashermans"
      },
      {
        "id": 2,
        "text": "Moderate Ashermans"
      },
      {
        "id": 3,
        "text": "Severe Ashermans"
      },
      {
        "id": 4,
        "text": "Cannot be classified with the given information"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>30% adhesion is classified as moderate Asherman syndrome.</p>\n<p>Asherman syndrome (<strong>uterine synechiae</strong>) is classified as follows:</p>\n<ul>\n<li>Minimal: &lt;25% adhesion involves the uterine cavity, flimsy adhesions involving the fundus and tubal ostia.</li>\n<li>Moderate: 25&ndash;70% adhesion of the endometrial surfaces, but no agglutination of the uterine wall.</li>\n<li>Severe: 75% adhesions with agglutination and thick adhesions.</li>\n</ul>\n<p>Asherman syndrome can be caused by the following:</p>\n<ul>\n<li><strong>Dilatation and curettage (D&amp;C)</strong></li>\n<li>Medical termination of pregnancy <strong>(MTP)</strong>, spontaneous abortions, recurrent abortions</li>\n<li>Uterine packing in postpartum haemorrhage</li>\n<li>Uterine infection</li>\n<li>Tubercular endometritis</li>\n</ul>\n<p>It causes secondary amenorrhoea, oligomenorrhoea, dysmenorrhoea, habitual abortion and infertility depending upon the extent of uterine cavity obliteration.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old man comes to the emergency room with complaints of sudden onset chest pain that radiates to the left arm and jaw. He is profusely sweating. An ECG was taken immediately. Interpret his ECG.",
    "choices": [
      {
        "id": 1,
        "text": "Right ventricular hypertrophy"
      },
      {
        "id": 2,
        "text": "Right bundle-branch block"
      },
      {
        "id": 3,
        "text": "Left bundle-branch block"
      },
      {
        "id": 4,
        "text": "Ventricular tachycardia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient has a myocardial infarction (<strong>MI</strong>) with ECG changes of a&nbsp;<strong>left bundle-branch block (LBBB)</strong>,<strong>&nbsp;</strong>which can be identified by the following classical features:</p>\n<ul>\n<li>Wide QRS&nbsp;complex- QRS &ge;120 ms&nbsp;</li>\n<li>Predominantly negative (QS) complexes in lead V<span class=\"s1\">1 </span>and entirely positive (R) complexes in lead V<span class=\"s1\">6</span>.</li>\n<li>M pattern seen in&nbsp;left chest leads (V5, V6)&nbsp;</li>\n</ul>\n<div class=\"page\" title=\"Page 1922\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>MI can have the following ECG changes:</p>\n<ul>\n<li>ST-segment elevation- zone of injury</li>\n<li>T wave depression</li>\n<li>Deep Q waves- late sign to develop</li>\n<li>New left bundle branch block (LBBB)</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d08806d1ab16485f9bc7f7eb2616ab71.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0e6306d001434620bdba7c39df33bf02x1280x810.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/96faff1fdae6488e944b880304724ac9x528x329.PNG"
    ]
  },
  {
    "text": "An entomologist was studying a vector and the pathogen it transmits. He found that the pathogen underwent changes in number and morphology in the vector. What is this type of biological transmission called?",
    "choices": [
      {
        "id": 1,
        "text": "Propagative"
      },
      {
        "id": 2,
        "text": "Cyclo-developmental"
      },
      {
        "id": 3,
        "text": "Cyclo-propagative"
      },
      {
        "id": 4,
        "text": "Developmental"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This type of biological transmission where a pathogen undergoes a\u00a0<strong>change in number</strong> and <strong>morphology</strong> in a vector is called <strong>cyclo-propagative </strong>transmission.</p>\n<p><strong>Malaria\u00a0</strong>is a disease whose causative organism (<em>Plasmodium sp.</em>) undergoes cyclo-propagative transmission.\u00a0In malaria, the parasite undergoes <strong>both developmental </strong>changes and <strong>multiplication\u00a0</strong>in the\u00a0<strong>Anopheles</strong> <strong>mosquito</strong> (vector).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Fmge Mini Test - 19';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2023"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>