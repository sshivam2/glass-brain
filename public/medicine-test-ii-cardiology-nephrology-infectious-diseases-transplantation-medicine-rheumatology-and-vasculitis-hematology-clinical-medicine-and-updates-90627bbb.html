<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medicine Test Ii (Cardiology, Nephrology, Infectious Diseases, Transplantation Medicine, Rheumatology And Vasculitis, Hematology, Clinical Medicine And Updates) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following is the JVP finding in constrictive pericarditis?",
    "choices": [
      {
        "id": 1,
        "text": "Prominent x and y descents"
      },
      {
        "id": 2,
        "text": "Prominent x descent and absent y descent with normal pressure"
      },
      {
        "id": 3,
        "text": "Absent x and y descents with elevated pressures"
      },
      {
        "id": 4,
        "text": "Absent x descent and prominent y descent with elevated pressure"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>x and y descents are prominent in constructive pericarditis (blue arrows). Constrictive pericarditis is a disorder in which the pericardium is abnormal and inelastic. This thickened and rigid pericardium limits the complete filling of the ventricles in diastole by restricting the normal diastolic ventricular expansion. The pressures in all the chambers of the heart are elevated due to this external compression. The JVP is elevated as it reflects the right atrial pressures. Normally,</p>\n<p><strong>X-descent: Occurs due to relaxation of the right atrium during atrial diastole</strong>, it follows the 'a' wave which coincides with atrial contraction.</p>\n<p><strong>Y-descent: Occurs due to right ventricular filling</strong>; As blood moves from the right atrium to the ventricle, right atrial pressure drops.</p>\n<p><strong>Friedrich's sign</strong> describes a steep x/y descent seen in Pericarditis (although, in reality at the bedside, the waves are hard to discern)</p>\n<p>Constrictive pericarditis has a chronic pathophysiology and develops slowly allowing the heart to develop compensatory mechanisms allowing 70-80% of the normal ventricular diastolic filing to occur in 25-30% of the diastolic duration leading to the rapid y descent. Although, rapid x descents occur in both constrictive pericarditis and cardiac tamponade, y-descent is not prominent in cardiac tamponade because tamponade occurs rapidly and impedes ventricular filing almost completely. It is a fatal condition requiring immediate treatment.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/0a36ab60f5e44641a78607aa4aa49d6fx750x262.PNG"
    ]
  },
  {
    "text": "All the following are absolute contraindications for liver transplantation EXCEPT",
    "choices": [
      {
        "id": 1,
        "text": "Active substance or alcohol abuse"
      },
      {
        "id": 2,
        "text": "AIDS"
      },
      {
        "id": 3,
        "text": "Intrahepatic sepsis"
      },
      {
        "id": 4,
        "text": "Advanced cardiopulmonary disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Intrahepatic sepsis is a relative contraindication, not an absolute contraindication. It can be confused with uncontrolled extra-hepatobiliary infection which is an absolute contraindication. Contraindications for liver transplantation are:</p>\n<p><strong>Absolute contraindications</strong></p>\n<ul>\n<li>Uncontrolled extrahepatobiliary infection</li>\n<li>Active, untreated sepsis</li>\n<li>Uncorrectable, life-limiting congenital anomalies</li>\n<li>Active substance or alcohol abuse</li>\n<li>Advanced cardiopulmonary disease</li>\n<li>Extrahepatobiliary malignancy (not including nonmelanoma malignancy skin cancer)</li>\n<li>Metastatic malignancy to the liver</li>\n<li>Metastatic malignancy to the liver</li>\n<li>AIDS</li>\n<li>Life-threatening systemic diseases</li>\n</ul>\n<p><strong>Relative contraindications</strong></p>\n<ul>\n<li>Age &gt;70</li>\n<li>Prior extensive hepatobiliary surgery</li>\n<li>Portal vein thrombosis</li>\n<li>Renal failure not attributable to liver disease</li>\n<li>Previous extrahepatic malignancy (not including nonmelanoma skin cancer)</li>\n<li>Severe obesity</li>\n<li>Severe malnutrition/wasting</li>\n<li>Medical noncompliance</li>\n<li>HIV seropositivity with failure to control HIV viremia or CD4 &lt;100/&mu;L</li>\n<li>Intrahepatic sepsis</li>\n<li>Severe hypoxemia secondary to right-to-left intrapulmonary shunts (PO<sub>2</sub> &lt;50 mmHg)</li>\n<li>Severe pulmonary hypertension (mean pulmonary artery pressure &gt;35 mmHg)</li>\n<li>Uncontrolled psychiatric disorder</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with hyponatremia caused due to SIADH has which of the following features?",
    "choices": [
      {
        "id": 1,
        "text": "Euvolemia, UNa< 40 mmol/L and Uosm< 100 mOsm/kg"
      },
      {
        "id": 2,
        "text": "Hypovolemia, UNa> 40 mmol/L and Uosm< 100 mOsm/kg"
      },
      {
        "id": 3,
        "text": "Euvolemia, UNa >40 mmol/L and Uosm >100 mOsm/kg"
      },
      {
        "id": 4,
        "text": "Hypovolemia, UNa <40 mmol/L and Uosm >100 mOsm/kg"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A patient with hyponatremia caused due to SIADH has euvolemia with UNa &gt;40 mmol/L and Uosm &gt;100 mOsm/kg.&nbsp;</p>\n<p><strong>SIADH</strong> (Syndrome of inappropriate antidiuretic hormone secretion) is the most common cause of<strong> euvolemic hyponatremia</strong>. Excessive ADH acts on renal V<sub>2</sub> receptors to increase free water retention, therefore only H<sub>2</sub>O is reabsorbed and not solutes making the urine concentrated (<strong>U<sub>Na</sub> &gt;40</strong> and <strong>U<sub>osm </sub>&gt;100</strong>) and the serum dilute producing hyponatremia.</p>\n<p><strong>SIADH</strong>&nbsp;is a condition where there is an inappropriate release of antidiuretic hormone or arginine vasopressin (AVP) from&nbsp;ectopic production of AVP. This may be from lung cancer and other neoplasms, increased release induced by various diseases, drugs, or exogenous administration of AVP.&nbsp;It is characterized by&nbsp;<strong>impaired water excretion</strong>&nbsp;leading to&nbsp;<strong>hyponatremia</strong>&nbsp;<strong>with euvolemia or hypervolemia.&nbsp;</strong></p>\n<p>ADH promotes the reabsorption of water and not the solutes resulting in&nbsp;<strong>concentrated urine.</strong>&nbsp;This is depicted as&nbsp;<strong>high urine osmolality</strong>.</p>\n<p>Patients usually present with hyponatremia with a euvolemic status. If hyponatremia develops acutely, signs and symptoms may include mild headache, confusion, anorexia, nausea, vomiting, coma, and convulsions.&nbsp;Chronic hyponatremia allows cerebral adaptation, and the patients are asymptomatic despite the hyponatremia.</p>\n<p>Laboratory findings in SIADH include:</p>\n<ul>\n<li>Hyponatremia:&nbsp;<strong>serum Na<sup>+</sup>&lt;135 mEq/L</strong></li>\n<li><strong>Urinary loss of Na<sup>+&nbsp;</sup>&gt;25 mEq per day or &gt;40 mEq/L</strong>&nbsp;</li>\n<li><strong>Urinary osmolality is &gt;100 mOsm/kg</strong></li>\n<li>Blood urea nitrogen (BUN) levels are low, usually &lt;10 mg/dL</li>\n<li>Serum K<sup>+</sup>&nbsp;and serum bicarbonate are normal</li>\n</ul>\n<p>Treatment: Hyponatremia should be corrected gradually. Restriction of the total fluid intake.&nbsp;Sodium levels can be corrected using&nbsp;<strong>hypertonic saline.</strong>&nbsp;Tolvaptan and conivaptan are&nbsp;<strong>vasopressin receptor-2 antagonists</strong>&nbsp;that block the action of anti-diuretic hormones. Other drugs which are useful in the management are&nbsp;<strong>demeclocycline</strong>&nbsp;and&nbsp;<strong>fludrocortisone.</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In the hexaxial represenation of ECG leads, normal P wave is along which of the following directions",
    "choices": [
      {
        "id": 1,
        "text": "30\u00b0"
      },
      {
        "id": 2,
        "text": "45\u00b0"
      },
      {
        "id": 3,
        "text": "60\u00b0"
      },
      {
        "id": 4,
        "text": "90\u00b0"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The combined vector of the normal p wave is in the direction of Lead II which is 60&deg;. The normal P wave is caused by depolarization of the atria arising from the sinus node. The direction of depolarization is towards the left and downward.</p>\n<p>The P wave is therefore positive in Lead I, Lead II, Lead aVF and V<sub>4</sub> to V<sub>6.&nbsp;</sub></p>\n<p>The P wave is negative in lead aVR and biphasic in lead V1.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/8f74df12afc84bd785526d8b6d8b815dx650x750.PNG"
    ]
  },
  {
    "text": "Which of the following newer biomarkers can be used for determining the prognosis of heart failure patients?\n1.\tGalectin-3\n2.\tNGAL\n3.\tSoluble ST-2\n4.\tIL-18",
    "choices": [
      {
        "id": 1,
        "text": "1 and 4"
      },
      {
        "id": 2,
        "text": "1, 2 and 4"
      },
      {
        "id": 3,
        "text": "2 and 4"
      },
      {
        "id": 4,
        "text": "1 and 3"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Soluble ST &ndash;2</strong> and <strong>Galectin &ndash; 3</strong> are newer biomarkers that can be used for determining the prognosis of HF patients. NGAL (Neutrophil gelatinase associated lipocalin) and IL-18 are novel biomarkers of acute kidney injury.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Anticoagulation is recommended for which of the following patients with atrial fibrillation",
    "choices": [
      {
        "id": 1,
        "text": "70-year-old male"
      },
      {
        "id": 2,
        "text": "70-year-old female"
      },
      {
        "id": 3,
        "text": "50-year-old male with diabetes"
      },
      {
        "id": 4,
        "text": "45-year-old male with hypertension"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Option B is the most appropriate answer in this scenario.</p>\n<p>To answer this question correctly, we need to know about CHA<sub>2</sub>DS<sub>2</sub>-VASc score. The 2012 ESC guidelines and 2014 ACC/AHA/HRS guidelines recommended the use of CHA<sub>2</sub>DS<sub>2</sub>-VASc score to access the risk of stroke in patients with atrial fibrillation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Necrotizing vasculitis is classically seen in\n1.\tPAN\n2.\tChrug-Strauss syndrome\n3.\tGranulomatosis with polyangiitis\n4.\tMicroscopic polyangiitis\n5.\tIgA vasculitis",
    "choices": [
      {
        "id": 1,
        "text": "Only 1 and 3"
      },
      {
        "id": 2,
        "text": "1, 3 and 5"
      },
      {
        "id": 3,
        "text": "1, 2, 3 and 4"
      },
      {
        "id": 4,
        "text": "1, 3 and 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Necrotizing vasculitis is a feature of ANCA(Anti-neutrophil cytoplasmic Antibody) associated vasculitis. <strong>Chrug-Strauss syndrome(</strong><strong>Eosinophilic granulomatosis with polyangiitis), microscopic polyangiitis and granulomatosis with polyangiitis(Wegener's granulomatosis) are all called ANCA associated vasculitis.</strong> Poly arteritis nodosa which is associated with hepatitis B infection and p-ANCA shows necrotizing vasculitis on microscopic examination.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are risk factors for avascular necrosis of the hip except:",
    "choices": [
      {
        "id": 1,
        "text": "Antiphospholipid antibody syndrome"
      },
      {
        "id": 2,
        "text": "Osteoarthritis of the hip"
      },
      {
        "id": 3,
        "text": "Sickle cell disease"
      },
      {
        "id": 4,
        "text": "Alcoholism"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Avascular necrosis (AVN) can affect almost any bone, but the <strong>head of the femur is by far the most commonly</strong> involved site. <strong>AVN can lead to cortical collapse of bone</strong>, with resultant accelerated osteoarthritis (OA) of the adjoining joint. Thus, OA is the result (not a cause) of AVN (Answer B). <strong>Pain is almost always the presenting complaint</strong>, but many cases can be entirely asymptomatic and discovered incidentally. The other conditions listed all increase the risk of AVN. Additional risk factors include</p>\n<ul>\n<li>Gaucher's disease</li>\n<li>High-dose corticosteroid therapy</li>\n<li>Radiation</li>\n<li>Trauma</li>\n<li>Systemic lupus erythematosus (SLE)</li>\n<li>Human immunodeficiency virus (HIV) infection</li>\n<li>Decompression (Caisson&rsquo;s) disease</li>\n<li>Transplantation</li>\n<li>Legg-Calve-Perthe disease</li>\n<li>Slipped capital femoral epiphysis (SCFE) syndrome</li>\n<li></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following histopathology slide of the kidney is seen in all of the following except",
    "choices": [
      {
        "id": 1,
        "text": "HIV"
      },
      {
        "id": 2,
        "text": "Cocaine abuse"
      },
      {
        "id": 3,
        "text": "Sickle cell disease"
      },
      {
        "id": 4,
        "text": "Hepatitis C"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The glomeruli are affected focally and segmentally. Hence this is a slide of <strong>focal segmental glomerulosclerosis</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/901e40a0d20c4c8d93aeffed5068e407.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Tocilizumab is used in all of the following except",
    "choices": [
      {
        "id": 1,
        "text": "Ankylosing spondylosis with uveitis"
      },
      {
        "id": 2,
        "text": "Giant cell arteritis"
      },
      {
        "id": 3,
        "text": "Rheumatoid arthritis"
      },
      {
        "id": 4,
        "text": "Polyarticular Juvenile idiopathic arthritis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Tocilizumab is not used in ankylosing spondylosis with uveitis.</p>\n<p>Tocilizumab is an IL-6 antagonist. It is used for</p>\n<ul>\n<li><strong>Cytokine release syndrome, severe or life-threatening:</strong> Treatment of chimeric antigen receptor (CAR) T cell-induced severe or life-threatening cytokine release syndrome in patients &ge;2 years of age</li>\n<li><strong>Giant cell arteritis:</strong> Treatment of giant cell arteritis (GCA) in adult patients</li>\n<li><strong>Polyarticular juvenile idiopathic arthritis:</strong> Treatment of active polyarticular juvenile idiopathic arthritis (pJIA) in patients &ge;2 years of age</li>\n<li><strong>Rheumatoid arthritis:</strong> Treatment of adults with moderately to severely active rheumatoid arthritis (RA) who have had an inadequate response to one or more disease-modifying antirheumatic drugs (DMARDs)</li>\n<li><strong>Systemic juvenile idiopathic arthritis:</strong> Treatment of active systemic juvenile idiopathic arthritis (SJIA) in patients &ge;2 years of age</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following reduces the risk for developing ventilator-associated pneumonia (VAP)?",
    "choices": [
      {
        "id": 1,
        "text": "Elevation of the head of the bed to 15 degrees to prevent aspiration"
      },
      {
        "id": 2,
        "text": "Suctioning of subglottic secretions"
      },
      {
        "id": 3,
        "text": "Twenty-four hours of prophylactic systemic antibiotics, especially if the intubation was emergent"
      },
      {
        "id": 4,
        "text": "Daily changing of the ventilatory circuit"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Frequent suctioning of the subglottic secretion reduces the risk of developing VAP.&nbsp;</p>\n<ul>\n<li>The strategies that can help reduce the risk of ventilator-associated pneumonia in an intubated patient usually focus around preventing aspiration, reducing colonization of the airway and digestive tract, and minimizing contamination of the ventilatory circuit.</li>\n<li>To prevent aspiration, the head of the bead should be maintained in a semirecumbent position (<strong>elevated 30&ndash;45 degrees</strong>) rather than in a fully recumbent position.</li>\n<li>Cuffed endotracheal tube with cuff pressure set at &ge;20 cm H<sub>2</sub>O with <strong>subglottic secretion drainage</strong> is to be used.</li>\n<li>Routine use of oral or intravenous <strong>antibiotics for prophylaxis is not recommended</strong>.</li>\n<li>To minimize contamination of the ventilatory circuit, the tubing should only be changed when visibly soiled or malfunctioning.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Riociguat has therapeutic benefit in which of the following conditions",
    "choices": [
      {
        "id": 1,
        "text": "HIV/AIDS"
      },
      {
        "id": 2,
        "text": "Pulmonary hypertension"
      },
      {
        "id": 3,
        "text": "Ulcerative colitis"
      },
      {
        "id": 4,
        "text": "Ankylosing spondylosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Riociguat has therapeutic benefit in pulmonary arterial hypertension (PAH)</strong> (WHO group 1) to improve exercise capacity, improve WHO functional class and to delay clinical worsening in adults.</li>\n<li><strong>Riociguat has therapeutic benefit in pulmonary arterial hypertension (PAH)</strong> (WHO group 1) to improve exercise capacity, improve WHO functional class and to delay clinical worsening in adults.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Mr. X aged 40 years has a blood pressure of 138/84 mmHg on repeated measurements. Blood pressure in this case will be classified as",
    "choices": [
      {
        "id": 1,
        "text": "Normal"
      },
      {
        "id": 2,
        "text": "Elevated"
      },
      {
        "id": 3,
        "text": "Stage 1 hypertension"
      },
      {
        "id": 4,
        "text": "Stage 2 hypertension"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>According to 2017 AHA/ACC guidelines :</strong></p>\n<ul>\n<li><strong>Normal blood pressure</strong> &ndash; Systolic &lt;120 mmHg and diastolic &lt;80 mmHg</li>\n<li><strong>Elevated blood pressure</strong> &ndash; Systolic 120 to 129 mmHg and diastolic &lt;80 mmHg</li>\n<li><strong>Hypertension</strong>:\n<ul>\n<li><strong>Stage 1 </strong>&ndash; Systolic 130 to 139 mmHg or diastolic 80 to 89 mmHg</li>\n<li><strong>Stage 2 &ndash;</strong> Systolic at least 140 mmHg or diastolic at least 90 mmHg</li>\n</ul>\n</li>\n</ul>\n<p><strong>If there is a disparity in category between the systolic and diastolic pressures, the higher value determines the stage.</strong></p>\n<p><strong>In this question patient has a higher diastolic blood pressure and is therefore classified as Stage 1 hypertension</strong></p>\n<p>Isolated systolic hypertension is defined as a blood pressure &ge;130/&lt;80 mmHg, and isolated diastolic hypertension is defined as a blood pressure &lt;130/&ge;80 mmHg. Patients with a blood pressure &ge;130/&ge;80 mmHg are considered to have mixed systolic/diastolic hypertension.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Risk of Scleroderma renal crisis is increased with all of the following except",
    "choices": [
      {
        "id": 1,
        "text": "Anti-RNA polymerase III antibodies"
      },
      {
        "id": 2,
        "text": "Male sex"
      },
      {
        "id": 3,
        "text": "Diffuse or progressive skin involvement"
      },
      {
        "id": 4,
        "text": "Anti-centromere antibodies"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Anti-centromere antibodies do not increase the risk of scleroderma renal crisis.</p>\n<p>Scleroderma renal crisis presents with accelerated hypertension accompanied by acute kidney injury and progressive failure. This <strong>acute life-threatening complication of SSc</strong> occurs in 10&ndash;15% of patients. Risk factors for scleroderma renal crisis include <strong>African-American race, male sex, and diffuse or progressive skin involvement</strong>. Up to 50% of patients with scleroderma renal crisis have <strong>anti-RNA polymerase III antibodies</strong>, whereas patients with anti-centromere antibodies appear to be protected from this complication.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Ustekinumab is an antibody which acts against",
    "choices": [
      {
        "id": 1,
        "text": "JAK"
      },
      {
        "id": 2,
        "text": "IL-6"
      },
      {
        "id": 3,
        "text": "IL-17"
      },
      {
        "id": 4,
        "text": "IL-12"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Ustekinumab</strong> is a human monoclonal antibody that binds to and interferes with the proinflammatory cytokines,<strong> interleukin (IL)-12 and IL-23</strong>. Biological effects of IL-12 and IL-23 include natural killer (NK) cell activation, CD4+ T-cell differentiation and activation. Ustekinumab also interferes with the expression of monocyte chemotactic protein-1 (<strong>MCP-1</strong>), tumor necrosis factor-alpha (<strong>TNF-&alpha;</strong>), interferon-inducible protein-10 (<strong>IP-10</strong>), and interleukin-8 (<strong>IL-8</strong>). Significant clinical improvement in <strong>psoriasis and psoriatic arthritis </strong>patients is seen in association with reduction of these proinflammatory signalers.</p>\n<p>JAK inhibitors-Tofacitinib, Baricitinib</p>\n<p>Anti<strong>-</strong>IL-6 Antibody- Tocilizumab</p>\n<p>Anti-IL-17 Antibody- Secukinumab and Brodalumab</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The B blood group antigen is structurally",
    "choices": [
      {
        "id": 1,
        "text": "Galactose attached to H substance"
      },
      {
        "id": 2,
        "text": "Glucose attached to H substance"
      },
      {
        "id": 3,
        "text": "N acetyl galactosamine attached to H substance"
      },
      {
        "id": 4,
        "text": "N acetyl glucosamine attached to H substance"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The B blood group antigen is structurally&nbsp;Galactose attached to H substance.</p>\n<p>A and B antigens are present on RBCs. These antigens are carbohydrates attached to a precursor backbone, may be found on the cellular membrane either as glycosphingolipids or glycoproteins, and are secreted into plasma and body fluids as glycoproteins. H substance is the immediate precursor on which the A and B antigens are added. This H substance is formed by the addition of fucose to the glycolipid or glycoprotein backbone. The subsequent addition of <em>N</em>-acetylgalactosamine creates the A antigen, whereas the addition of galactose produces the B antigen.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following conditions is the pulse in the given image seen?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 5"
      },
      {
        "id": 2,
        "text": "2, 3, 4"
      },
      {
        "id": 3,
        "text": "1, 4, 5"
      },
      {
        "id": 4,
        "text": "1, 2, 3"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above image shows a&nbsp;<strong>water-hammer pulse (Corrigan&rsquo;s pulse) </strong>which is seen in</p>\n<ul>\n<li>Aortic regurgitation</li>\n<li>Persistent ductus arteriosus</li>\n<li>Arteriovenous fistula</li>\n<li>Rupture of sinus of Valsalva</li>\n</ul>\n<p>It is characterized by a rapid upstroke and a rapid downstroke. The rapid downstroke is due to the rapid run-off of blood into</p>\n<ul>\n<li>the cavity of the left ventricle in <strong>AR</strong></li>\n<li>the pulmonary artery in <strong>PDA&nbsp; </strong></li>\n<li>the veins in the case of <strong>AV fistula</strong></li>\n</ul>\n<p>&nbsp;The rapid upstroke is due to increased stroke volume secondary to the hyperdynamic state.</p>\n<p>Other options:</p>\n<ul>\n<li><strong>Aortic stenosis</strong> presents with <strong>pulsus parvus et tardus</strong>. It is seen as a low amplitude pulse that rises slowly and has a late peak.</li>\n<li><strong>HOCM&nbsp;</strong>presents with a<strong> bisferiens pulse.&nbsp;</strong>It is seen with a rapid upstroke to the first peak and a slower rise to the second peak.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7964549df8cc4e6a898682c58183f595.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient has the following the ECG in his medical records, now the patient has developed atrial fibrillation with a BP of 90/60 mmHg. Which of the following is the best treatment",
    "choices": [
      {
        "id": 1,
        "text": "Vagal maneuvers"
      },
      {
        "id": 2,
        "text": "Adenosine"
      },
      {
        "id": 3,
        "text": "DC cardioversion"
      },
      {
        "id": 4,
        "text": "Defibrillation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>DC cardioversion is the best treatment modality for the given ECG.</p>\n<p>The ECG shows a wide QRS complex with a very short PR segment - Delta wave(black arrows).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/af36098e03ba45b0a8e134265023003d.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cf5eb96f081c49d989086f39e82c831cx640x300.PNG"
    ]
  },
  {
    "text": "All of the following are AIDS defining illnesses except:",
    "choices": [
      {
        "id": 1,
        "text": "Encephalopathy attributed to HIV"
      },
      {
        "id": 2,
        "text": "Invasive cervical cancer"
      },
      {
        "id": 3,
        "text": "Mycobacterium tuberculosis of any site"
      },
      {
        "id": 4,
        "text": "Oral candidiasis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Oral candidiasis</strong>, although seen in AIDS patients, is <strong>not</strong> an <strong>AIDS-defining</strong> illness. <strong>Candidiasis</strong> of the <strong>esophagus</strong>, <strong>trachea</strong>, <strong>bronchi,</strong> and <strong>lungs</strong> are AIDS-defining illnesses.&nbsp;</p>\n<p>AIDS-defining illnesses are specific <strong>opportunistic</strong> illnesses in patients with <strong>AIDS</strong>, which signify an advanced stage of illness (<strong>Stage 3</strong>).</p>\n<p>A case of HIV can be classified into five stages as per current CDC guidelines (0, 1, 2, 3, and unknown).</p>\n<table style=\"border-collapse: collapse; width: 100.025%; height: 166.368px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3924px;\">\n<td style=\"width: 32.2899%; height: 22.3924px;\">\n<p><strong>Stage</strong></p>\n</td>\n<td style=\"width: 32.2899%; height: 22.3924px;\"><strong>Criteria</strong></td>\n<td style=\"width: 32.2906%; height: 22.3924px;\"><strong>CD4+ count (&gt;5 years)</strong></td>\n</tr>\n<tr style=\"height: 54.3924px;\">\n<td style=\"width: 32.2899%; height: 54.3924px;\">\n<p>0</p>\n</td>\n<td style=\"width: 32.2899%; height: 54.3924px;\">A negative HIV test within 6 months of first diagnosis</td>\n<td style=\"width: 32.2906%; height: 54.3924px;\">NA</td>\n</tr>\n<tr style=\"height: 22.3958px;\">\n<td style=\"width: 32.2899%; height: 22.3958px;\">1</td>\n<td style=\"width: 32.2899%; height: 22.3958px;\">Based on CD4+ count</td>\n<td style=\"width: 32.2906%; height: 22.3958px;\">&gt;=500</td>\n</tr>\n<tr style=\"height: 22.3958px;\">\n<td style=\"width: 32.2899%; height: 22.3958px;\">2</td>\n<td style=\"width: 32.2899%; height: 22.3958px;\">Based on CD4+ count</td>\n<td style=\"width: 32.2906%; height: 22.3958px;\">200-499</td>\n</tr>\n<tr style=\"height: 22.3958px;\">\n<td style=\"width: 32.2899%; height: 22.3958px;\">3</td>\n<td style=\"width: 32.2899%; height: 22.3958px;\"><strong>AIDS-defining opportunistic illness</strong></td>\n<td style=\"width: 32.2906%; height: 22.3958px;\">&lt;200</td>\n</tr>\n<tr style=\"height: 22.3958px;\">\n<td style=\"width: 32.2899%; height: 22.3958px;\">unknown</td>\n<td style=\"width: 32.2899%; height: 22.3958px;\">Unavailable CD4+ counts</td>\n<td style=\"width: 32.2906%; height: 22.3958px;\">unknown</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with anxiety disorder is brought into the emergency room. The patient has a BP of 130/80 mm Hg, HR of 130 beats/min and a respiratory rate of 30 cycles/min. His ABG is likely to show which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Low pH"
      },
      {
        "id": 2,
        "text": "Low PaCO2"
      },
      {
        "id": 3,
        "text": "High pCO2"
      },
      {
        "id": 4,
        "text": "Decrease in HCO3/PaCO2 ratio"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Low PaCO2</strong> is most likely to be seen in the patient's ABG.</p>\n<p>The patient is <strong>hyperventilating</strong> with a respiratory rate of 30 cycles/min. Alveolar hyperventilation <strong>decreases PaCO2</strong> and <strong>increases the HCO3/PaCO2 ratio</strong>, thus <strong>increasing pH</strong> and producing respiratory alkalosis. Anxiety disorders are often associated with <strong>respiratory alkalosis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true about pathology of Sjogren\u2019s syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Low levels of C4 complement is an adverse predictor of lymphoma development"
      },
      {
        "id": 2,
        "text": "T cell predominate in severe lesions of exocrine glands"
      },
      {
        "id": 3,
        "text": "Macrophages negative for IL-18 for correlated with parotid enlargement"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Low levels of C4 complement is an adverse predictor of lymphoma development.</p>\n<p>Sj\u00f6gren's syndrome is characterized by both lymphocytic infiltration of the exocrine glands and B lymphocyte hyperreactivity. The major infiltrating cells in the affected exocrine glands are activated T and B lymphocytes. T cells predominate in mild lesions, whereas B cells are dominant in more severe lesions. Macrophages and dendritic cells also are found.<strong> The number of macrophages positive for interleukin (IL) 18 has been shown to correlate with parotid gland enlargement and low levels of the C4 component of complement, both of which are adverse predictors for lymphoma development.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are true about TTP except",
    "choices": [
      {
        "id": 1,
        "text": "More common in women than men"
      },
      {
        "id": 2,
        "text": "Is associated with low levels of ADAMTS13"
      },
      {
        "id": 3,
        "text": "vWF secretion is low"
      },
      {
        "id": 4,
        "text": "Increased LDH and reticulocyte count"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>The pathogenesis of TTP is related to a deficiency of, or antibodies to, the metalloprotease ADAMTS13, which cleaves VWF. <strong>VWF is normally secreted as ultra-large multimers</strong>, which are then cleaved by ADAMTS13. <strong>The persistence of ultra-large VWF molecules is thought to contribute to pathogenic platelet adhesion and aggregation.</strong></li>\n<li>Idiopathic TTP appears to be more common in women than in men.</li>\n<li>TTP is more common in patients with HIV infection and in pregnant women.</li>\n<li>Findings to support the TTP diagnosis include an increased lactate dehydrogenase and indirect bilirubin, decreased haptoglobin, and increased reticulocyte count, with a negative direct antiglobulin test.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true about HIT(Heparin induced thrombocytopenia)",
    "choices": [
      {
        "id": 1,
        "text": "Doesnt occur with the use of lower molecular weight heaprin"
      },
      {
        "id": 2,
        "text": "Upper GI bleeding occurs and is more common than lower GI bleeding"
      },
      {
        "id": 3,
        "text": "Arterial and venous thrombosis can occur"
      },
      {
        "id": 4,
        "text": "Life-threatening thrombocytopenia can occur"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Both arterial and venous thrombosis can occur in HIT.</p>\n<ul>\n<li>Heparin-induced thrombocytopenia (HIT) is a life-threatening complication of exposure to heparin (ie,unfractionated heparin, low molecular weight [LMW] heparin).</li>\n<li><strong>HIT results from an autoantibody directed against endogenous platelet factor 4 (PF4) </strong>in complex with heparin. <strong>This antibody activates platelets and can cause catastrophic arterial and venous thrombosis</strong> with a mortality rate as high as 20 percent.</li>\n<li>The thrombocytopenia is not usually severe, with nadir counts rarely &lt;20,000/&mu;L.</li>\n<li><strong>Heparin-induced thrombocytopenia (HIT) is not associated with bleeding</strong> and, in fact, markedly increases the risk of thrombosis.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Lymphoplasmacytic lymphoma is associated with which of the following",
    "choices": [
      {
        "id": 1,
        "text": "Hepatitis C virus"
      },
      {
        "id": 2,
        "text": "HIV"
      },
      {
        "id": 3,
        "text": "Epstein-Barr virus"
      },
      {
        "id": 4,
        "text": "HTLV-1"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Lymphoplasmacytic lymphoma is associated with Hepatitis C virus. Other infectious agents associated with development of lymphoid malignancies are</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "AML with which of the following mutations has an adverse prognosis",
    "choices": [
      {
        "id": 1,
        "text": "t(8;21)(q22;q22); RUNX1-RUNX1T1"
      },
      {
        "id": 2,
        "text": "t(6;9)(p23;q34); DEK-NUP214"
      },
      {
        "id": 3,
        "text": "inv(16)(p13.1q22)"
      },
      {
        "id": 4,
        "text": "Mutated CEBPA"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>AML with t(6;9)(p23;q34); DEK-NUP214 mutation has adverse prognosis. All the other options have a favorable prognosis.</p>\n<p>AML genetics and prognosis</p>\n<table style=\"width: 393px;\">\n<tbody>\n<tr>\n<td style=\"width: 98px;\">Genetic Group</td>\n<td style=\"width: 283px;\">Subsets</td>\n</tr>\n<tr>\n<td style=\"width: 98px;\">Favorable</td>\n<td style=\"width: 283px;\"><strong>t(8;21)(q22;q22); RUNX1-RUNX1T1 </strong> <strong>inv(16)(p13.1q22) </strong>or t(16;16)(p13.1;q22); CBFB-MYH11 Mutated NPM1 without FLT3-ITD (normal karyotype) Mutated CEBPA (normal karyotype)</td>\n</tr>\n<tr>\n<td style=\"width: 98px;\">Intermediate-I</td>\n<td style=\"width: 283px;\">Mutated NPM1 and FLT3-ITD (normal karyotype) Wild-type NPM1 and FLT3-ITD (normal karyotype) Wild-type NPM1 without FLT3-ITD (normal karyotype)</td>\n</tr>\n<tr>\n<td style=\"width: 98px;\">Intermediate-II</td>\n<td style=\"width: 283px;\">t(9;11)(p22;q23); MLLT3-MLLCytogenetic abnormalities not classified as favorable or adverse</td>\n</tr>\n<tr>\n<td style=\"width: 98px;\">Adverse</td>\n<td style=\"width: 283px;\">inv(3)(q21q26.2) or t(3;3)(q21;q26.2); RPN1-EVI1 <strong>t(6;9)(p23;q34); DEK-NUP214 </strong> t(v;11)(v;q23); MLL rearranged <strong>&ndash;5 or del(5q); &ndash;7; abn(17p)</strong>; complex karyotype (&ge;3 abnormalities)</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are true about ADPKD except",
    "choices": [
      {
        "id": 1,
        "text": "Caused by mutations in PKD1 and PKD2"
      },
      {
        "id": 2,
        "text": "Most common stones are composed of uric acid"
      },
      {
        "id": 3,
        "text": "Increased incidence of renal cell carcinoma"
      },
      {
        "id": 4,
        "text": "Cardiovascular complications are the major cause of mortality"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Renal cell carcinoma is a rare complication of ADPKD with no apparent increased frequency compared to the general population.</p>\n<p><strong>ADPKD is inherited as an autosomal dominant trait</strong> with complete penetrance but variable expressivity. <strong>ADPKD is caused by mutations in PKD1 and PKD2</strong>, which, respectively, code for polycystin-1 (PC1) and polycystin-2 (PC2). It is characterized by the progressive bilateral formation of renal cysts. Many patients are asymptomatic until the fourth to fifth decade of life. Kidney stones occur in ~20% of patients with ADPKD. Different from the general population, <strong>more than half of the stones in patients with ADPKD are composed of uric acid</strong>, with the remainder due to calcium oxalate. Cardiovascular complications are the major cause of mortality in these patients followed by infections. <strong>Intracranial aneurysm (ICA) occurs four to five times more frequently in ADPKD patients</strong> than in the general population and causes high mortality.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Mesangial proliferation is defined as ________ class of lupus nephritis according to International Society of Nephrology-Renal Pathology Society Study group",
    "choices": [
      {
        "id": 1,
        "text": "Class II"
      },
      {
        "id": 2,
        "text": "Class III"
      },
      {
        "id": 3,
        "text": "Class IV"
      },
      {
        "id": 4,
        "text": "Class V"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Lupus Nephritis is classified into 6 classes, which are</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient develops prosthetic valve endocarditis 2 years after valve replacement surgery. Which of the following organism is the most likely cause?",
    "choices": [
      {
        "id": 1,
        "text": "Streptococci"
      },
      {
        "id": 2,
        "text": "Staphylococcus aureus"
      },
      {
        "id": 3,
        "text": "Coagulase negative staphylococci"
      },
      {
        "id": 4,
        "text": "HACEK organisms"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Patient developing endocarditis 2 years after prosthetic valve surgery suggests <strong>late-onset endocarditis</strong>. In such cases, the most common causative organism is <strong>streptococci.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are true about contrast nephropathy except",
    "choices": [
      {
        "id": 1,
        "text": "Saline hydration reduces the risk"
      },
      {
        "id": 2,
        "text": "Risk is higher with solitary kidney and diabetic nephropathy"
      },
      {
        "id": 3,
        "text": "Fractional excretion of Na < 1%"
      },
      {
        "id": 4,
        "text": "S. creatinine begins to fall 48 hrs after exposure"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In contrast nephropathy, S. creatinine starts to <strong>rise at 24-48 hours</strong> peaks on<strong> day 5</strong> and returns to baseline usually by <strong>1-2 weeks.</strong></p>\n<p>Contrast nephropathy is defined as a&nbsp;rise in serum creatinine of at least 85 &mu;mol/L (1 mg/dL) within 48 h of contrast administration. The prognosis is usually favorable. Risk factors for contrast nephropathy include advanced age (&gt;80 years), preexisting renal disease (serum creatinine exceeding 2 mg/dL), solitary kidney, diabetes mellitus, dehydration, paraproteinemia, concurrent use of nephrotoxic medication or chemotherapeutic agents, and high contrast dose.</p>\n<p>The risk of contrast nephropathy increases in patients with an eGFR &lt;60 mL/min/1.73 m2; however, the majority of these patients will only have a temporary rise in creatinine.&nbsp; If contrast must be administered to a patient with an eGFR below 45 mL/min/1.73 m2, the patient should be <strong>well hydrated</strong>, and a reduction in the dose of contrast should be considered.</p>\n<p>Note : Several causes of ischemia-associated and nephrotoxin-associated AKI can present with FeNa &lt;1%, including sepsis (often early in the course), rhabdomyolysis, and contrast nephropathy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Oliguria is defined as urine output less than",
    "choices": [
      {
        "id": 1,
        "text": "100ml/day"
      },
      {
        "id": 2,
        "text": "200ml/day"
      },
      {
        "id": 3,
        "text": "400ml/day"
      },
      {
        "id": 4,
        "text": "500ml/day"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Oliguria</strong> is defined as urine output less than <strong>400ml/day</strong></p>\n<p><strong>Anuria</strong> is defined as urine output less than <strong>100ml/day</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true about calcium oxalate stones",
    "choices": [
      {
        "id": 1,
        "text": "Diet low in calcium is advised"
      },
      {
        "id": 2,
        "text": "Diet low in sodium is advised"
      },
      {
        "id": 3,
        "text": "Bisphosphonates are indicated"
      },
      {
        "id": 4,
        "text": "High dose vitamin C has some benefit"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Calcium oxalate stones are the most common renal calculi.</strong></li>\n<li>Risk factors for calcium oxalate stones include higher urine calcium, higher urine oxalate, and lower urine citrate. This stone type is insensitive to pH in the physiologic range.</li>\n<li><strong>Dietary calcium restriction is not beneficial and, in fact, is likely to be harmful.</strong></li>\n<li>Reducing sodium intake to &lt;2.5 g/d is advised as it may decrease urinary excretion of calcium.</li>\n<li>High-dose vitamin C supplements should be avoided, as vit c is excreted in the oxalate form and hence increased risk for stone formation .</li>\n<li>While bisphosphonates may reduce urine calcium excretion in some individuals, there are no data on whether this class of medication can reduce stone formation; therefore, bisphosphonates cannot be recommended solely for stone prevention at present.</li>\n<li>A thiazide diuretic, in doses higher than those used to treat hypertension, can substantially lower urine calcium excretion and can prevent calcium oxalate stones.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are true about hepatorenal syndrome except",
    "choices": [
      {
        "id": 1,
        "text": "Systemic vascular resistance is low"
      },
      {
        "id": 2,
        "text": "In Type 1 HRS there is significant reduction in creatinine clearance within 1\u20132 weeks of presentation"
      },
      {
        "id": 3,
        "text": "Type 2 HRS is associated with a better outcome than that of type 1 HRS"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>The hepatorenal syndrome (HRS) is a form of functional<strong> renal failure without renal pathology </strong>that occurs in about 10% of patients with advanced cirrhosis or acute liver failure. There are marked disturbances in the arterial renal circulation in patients with HRS; these include an increase in vascular resistance (renal vasoconstriction) accompanied by a reduction in systemic vascular resistance.</li>\n<li>Based upon the rapidity of the decline in kidney function, two forms of hepatorenal syndrome have been described</li>\n<li>Type 1 hepatorenal syndrome \u2013 Type 1 hepatorenal syndrome is the more serious type; it is defined as at least a twofold increase in serum creatinine (reflecting a 50 percent reduction in creatinine clearance) to a level greater than 2.5 mg/dL (221 micromol/L) during a period of less than two weeks.</li>\n<li>Type 2 hepatorenal syndrome \u2013 Type 2 hepatorenal syndrome is defined as renal impairment that is less severe than that observed with type 1 disease. The major clinical feature in patients with type 2 hepatorenal syndrome is ascites that is resistant to diuretics.</li>\n<li>Patients are treated with midodrine, an \u03b1-agonist, along with octreotide and intravenous albumin.</li>\n<li><strong>The best therapy for HRS is liver transplantation;</strong> recovery of renal function is typical in this setting.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following Neuraminidase inhibitors used as treatment for influenza is administered by inhalation",
    "choices": [
      {
        "id": 1,
        "text": "Oseltamivir"
      },
      {
        "id": 2,
        "text": "Zanamivir"
      },
      {
        "id": 3,
        "text": "Peramivir"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>All the options are&nbsp; Neuraminidase inhibitors used as treatment for influenza.</p>\n<ul>\n<li><strong>Zanamivir is administered by inhalation</strong> and is well tolerated, but may result in bronchospasm and should be avoided in susceptible patients, such as those with asthma or COPD</li>\n<li><strong>Oseltamivir is administered orally</strong></li>\n<li><strong>Peramivir is given by injection</strong> and is FDA (United States Food and Drug Administration) approved as a single dose for uncomplicated influenza.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are components of CURB-65 score used to access indications for hospitalization in patients with suspected community acquired pneumonia EXCEPT",
    "choices": [
      {
        "id": 1,
        "text": "Confusion"
      },
      {
        "id": 2,
        "text": "Age>65"
      },
      {
        "id": 3,
        "text": "Respiratory rate\u226520 cycles/min"
      },
      {
        "id": 4,
        "text": "Blood urea \u22657 mmol/L"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>CURB-65 score used to access indications for hospitalization in patients with suspected community acquired pneumonia. Respiratory rate &ge; 30 cycles/min is given one point not &ge; 20.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4324420f53a4434a822228191ae68d80x495x639.PNG"
    ]
  },
  {
    "text": "All of the following are true about polycythemia vera rubra except",
    "choices": [
      {
        "id": 1,
        "text": "RBC morphology is normal"
      },
      {
        "id": 2,
        "text": "Basophilia and eosinophilla are frequently present"
      },
      {
        "id": 3,
        "text": "Normal EPO level"
      },
      {
        "id": 4,
        "text": "Vitamin B12 is elevated"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>Polycythemia vera</strong> is an acquired myeloproliferative disorder that causes overproduction of <strong>all three hematopoietic cell lines</strong>, most prominently the red blood cells.</li>\n<li><strong>According to the WHO 2017 criteria, the hallmark of polycythemia vera is a hematocrit (at sea level) that exceeds 49% in males or 48% in females.</strong></li>\n<li>Erythroid production is independent of erythropoietin, and the <strong>serum erythropoietin level is low</strong>. RBC morphology is normal.</li>\n<li><strong><em>JAK2 (V617F)</em> mutation</strong> has been demonstrated in 95% of cases.</li>\n<li>Usually elevated white blood count and platelet count. <strong>Basophilia and eosinophilia are frequently present.</strong></li>\n<li><strong>Thrombosis is the most common complication of polycythemia vera and the major cause of morbidity and death in this disorder. </strong></li>\n<li>Vitamin B12 levels are strikingly elevated because of increased levels of transcobalamin III (secreted by white blood cells). Overproduction of uric acid may lead to hyperuricemia.</li>\n<li>The treatment of choice is phlebotomy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following does not respond to normal bicarbonate therapy",
    "choices": [
      {
        "id": 1,
        "text": "Renal tubular acidosis I"
      },
      {
        "id": 2,
        "text": "Renal tubular acidosis II"
      },
      {
        "id": 3,
        "text": "Renal tubular acidosis IV"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Type 2 renal tubular acidosis is a <strong>proximal renal tubular defect in HCO3 resorption</strong> leading to a mild acidosis. Administration of NaHCO3 results in alkaline urine despite systemic acidosis because adequate renal HCO3 resorption does not occur.</p>\n<p>Characteristics of Renal tubular acidosis are:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the target hemoglobin concentration in CKD",
    "choices": [
      {
        "id": 1,
        "text": "12-14.5 g/dl"
      },
      {
        "id": 2,
        "text": "10-11.5 g/dl"
      },
      {
        "id": 3,
        "text": "11.5-12 g/dl"
      },
      {
        "id": 4,
        "text": "13-15 g/dl"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Current practice is to target a hemoglobin concentration of 10.0&ndash;11.5 g/dL in CKD. </strong>A <strong>normocytic, normochromic anemia</strong> is observed in CKD. The primary cause of anemia is insufficient production of erythropoietin (EPO). There has been an indication that the <strong>use of ESA(erythropoietin stimulating agents) in CKD may be associated with an increased risk of stroke in those with type 2 diabetes, an increase in thromboembolic events, and perhaps a faster progression to the need for dialysis</strong>. Therefore, any benefit in terms of improvement of anemic symptoms needs to be balanced against the potential cardiovascular risk. Complete normalization of the hemoglobin concentration has not been demonstrated to be of incremental benefit to CKD patients.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "BASDAI scoring system is used in which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Polymyositis"
      },
      {
        "id": 2,
        "text": "JIA"
      },
      {
        "id": 3,
        "text": "Ankylosing Spondylosis"
      },
      {
        "id": 4,
        "text": "Sjogren\u2019s syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Bath Ankylosing Spondylitis Disease Activity Index&nbsp;</strong>(BASDAI) is a disease activity score used to monitor response to treatment to ankylosing spondylosis. <strong>Ankylosing Spondylitis Disease Activity Score</strong> (ASDAS) is another scoring system that is also used.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Argatroban is a",
    "choices": [
      {
        "id": 1,
        "text": "Parentral Direct thrombin inhibitor"
      },
      {
        "id": 2,
        "text": "Oral Indirect thrombin inhibitor"
      },
      {
        "id": 3,
        "text": "Oral Direct factor Xa inhibitor"
      },
      {
        "id": 4,
        "text": "Parentral Indirect factor Xa inhibitor"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Argatroban is a parentral direct thrombin inhibitor</p>\n<p>Direct thrombin inhibitors inactivate circulating and clot-bound thrombin (factor IIa).</p>\n<p><strong>Parenteral direct thrombin inhibitors</strong></p>\n<ul>\n<li>Bivalirudin</li>\n<li>Argatroban</li>\n<li>Desirud</li>\n</ul>\n<p><strong>Oral direct thrombin inhibitor</strong>&mdash;Dabigatran is the only oral direct thrombin inhibitor available for clinical use.</p>\n<p><strong>Direct factor Xa inhibitors</strong></p>\n<ul>\n<li>Rivaroxaban</li>\n<li>Apixaban</li>\n<li>Edoxaban</li>\n<li>Betrixaban</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 18-year-old man presents with acute kidney injury 3 days after an upper respiratory tract infection, with a rise in creatinine from 0.9 to 1.6 mg/dL. The patient\u2019s urinalysis reveals 2+ blood and 2+ protein. C3 and C4 are normal. Serologic workup is negative for ANCA and anti-GBM. SPEP and UPEP are within normal limits. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "IgA nephropathy"
      },
      {
        "id": 2,
        "text": "Postinfectious glomerulonephritis"
      },
      {
        "id": 3,
        "text": "Thin basement membrane disease"
      },
      {
        "id": 4,
        "text": "Alport syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>IgA nephropathy can present as a <strong>rapidly progressing glomerulonephritis (biopsy with crescentic IgA nephropathy)</strong>, as a latent finding of hematuria and proteinuria, or in the setting of an upper respiratory tract infection (<strong>\u201csynpharyngitic hematuria\u201d</strong>), as is the case in this patient. <strong>IgA nephropathy typically occurs 1\u20133 days after an upper respiratory tract infection</strong>, as opposed to postinfectious GN, which occurs 7\u201321 days after an infection.<strong> The presence of normal complements also helps to distinguish IgA nephropathy from postinfectious GN</strong>. Thin basement membrane disease can be associated with some hematuria but does not fit the clinical picture. Alport syndrome can be associated with proteinuria, hearing loss, and progression to ESRD, but it does not fit the clinical picture. Granulomatous polyangiitis (formerly known as Wegener\u2019s granulomatosis) is unlikely with a negative ANCA.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true about the auscultatory finding of a fourth heart sound (S 4) on physical examination?",
    "choices": [
      {
        "id": 1,
        "text": "Often associated with hypertension"
      },
      {
        "id": 2,
        "text": "Normal in young children"
      },
      {
        "id": 3,
        "text": "Normal in athletes"
      },
      {
        "id": 4,
        "text": "A hallmark of the onset of atrial fibrillation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>An S4 indicates increased left ventricular stiffness and is commonly heard in adults with hypertension. It is caused by the increased filling in late diastole during atrial contraction. An S4 is never normal. S4 is absent in atrial fibrillation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which statement is false regarding serum brain natriuretic peptide (BNP) levels?",
    "choices": [
      {
        "id": 1,
        "text": "Serum BNP levels may be in the reference range in patients with advanced heart failure"
      },
      {
        "id": 2,
        "text": "A persistently elevated serum BNP level despite optimal medical therapy is a marker of poor prognosis in heart failure"
      },
      {
        "id": 3,
        "text": "Optimization of medical therapy based on serum BNP levels decreases hospitalizations in heart failure"
      },
      {
        "id": 4,
        "text": "The serum BNP level is frequently elevated in idiopathic constrictive pericarditis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Although serum BNP levels correlate with clinical severity, <strong>some patients with advanced heart failure have normal BNP levels</strong>. Several large clinical trials have shown that a persistently elevated BNP level despite ongoing medical therapy is a marker of poor prognosis. A BNP-guided approach to titrate medical therapy has been shown to decrease hospitalizations compared with standard therapy.<strong> Although the serum BNP level is frequently elevated in constrictive pericarditis due to cardiac surgery or radiotherapy, it is frequently within the normal range in patients with idiopathic constrictive pericarditis.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true regarding clostridium difficile infection?",
    "choices": [
      {
        "id": 1,
        "text": "Vancomycin is less effective than metronidazole for treating severe disease"
      },
      {
        "id": 2,
        "text": "Most relapses are due to antibiotic resistance"
      },
      {
        "id": 3,
        "text": "VRE colonization occurs more frequently with oral vancomycin than metronidazole"
      },
      {
        "id": 4,
        "text": "Single episode of reinfection increases likelihood of relapses"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The true statement about C<em>lostridium difficile</em> from the above-mentioned options is that a<strong> single </strong>episode of <strong>reinfection increases </strong>the likelihood of<strong> further relapses.</strong></p>\n<p><em>Clostridium difficile</em> is an <strong>obligate anaerobe</strong>. It is the <strong>most common cause</strong> of infectious diarrhea in <strong>hospitalized</strong> patients<strong>.</strong>&nbsp;Clostridium <strong>toxins</strong> are produced by <strong>inhibition</strong> of <strong>protein synthesis.</strong> Those who have 1 episode are predisposed to recurrences and those with 2 or more episodes are at highest risk for multiple relapses. The infection is strongly associated with prior use of antibiotics. The most common manifestation of Clostridium difficile infection is diarrhea. Other less common features are abdominal pain and paralytic ileus. Complications include sepsis and toxic megacolon. Investigation modalities include stool culture, endocscopy and PCR.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A:&nbsp;<strong>Oral vancomycin</strong> is<strong> more effective </strong>than <strong>metronidazole</strong> for the treatment of severe disease<strong>.</strong></p>\n<p>Option B: <strong>Most relapses</strong> result from <strong>reinfection</strong> or germination of spores,<strong> not</strong> from antibiotic <strong>resistance</strong>.</p>\n<p>Option C: <strong>VRE</strong>(Vancomycin-resistant enterococcal)<strong> colonization</strong> often occurs in similar populations of patients who have received broad-spectrum antibiotics; however, there is <strong>no difference</strong> in VRE colonization whether patients receive <strong>vancomycin</strong> or <strong>metronidazole</strong> for the treatment of <em>C. difficile</em> infection. Fllow-up stool toxin assays to test for cure should be avoided because stool toxin assays may remain positive during and after successful treatment.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the goal with allopurinol therapy in the treatment of hyperuricemia in gout patients?",
    "choices": [
      {
        "id": 1,
        "text": "Decrease the uric acid level to 8.0 mg/dL or less"
      },
      {
        "id": 2,
        "text": "Prevent further gout attacks without regard to uric acid level"
      },
      {
        "id": 3,
        "text": "Decrease the uric acid level to less than 6.0 mg/dL"
      },
      {
        "id": 4,
        "text": "Decrease urinary uric acid excretion to normal"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The goal of allopurinol therapy in the treatment of gout is to decrease the uric acid level to less than 6.0 mg/dL. The solubility quotient of uric acid is 6.8 mg/dL. Therefore, decreasing the uric acid level to less than 6.0 mg/dL promotes shrinkage of tophi and results in better clinical efficacy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are true about peripartum cardiomyopathy except",
    "choices": [
      {
        "id": 1,
        "text": "LVEF <50%"
      },
      {
        "id": 2,
        "text": "Malnutrition is a risk factor"
      },
      {
        "id": 3,
        "text": "Tocolytic therapy is a risk factor"
      },
      {
        "id": 4,
        "text": "Endomyocardial biopsy is not useful"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>PPCM is defined as newly diagnosed systolic cardiomyopathy (LVEF &lt; 45% or fractional shortening &lt; 30%) without a reversible cause, presenting between the last month of gestation and 5 months postpartum</strong>(Harrison&rsquo;s says 6 months) most commonly in the first month postpartum) in a woman without known CVD.</p>\n<p>Risk factors include</p>\n<ul>\n<li>Multiparity</li>\n<li>Multiple gestation</li>\n<li>Diabetes</li>\n<li>Family history</li>\n<li>Race/ethnicity (eg, African American)</li>\n<li>Smoking</li>\n<li>Cocaine use</li>\n<li>Long-term (&gt; 4 weeks) use of beta-adrenergic tocolytic therapy (eg, terbutaline)</li>\n<li>Hypertension, and preeclampsia</li>\n</ul>\n<p>Endomyocardial biopsy usually does not add useful information that warrants the risk of the procedure and shows tissue edema, myocardial hypertrophy, and varying degrees of fibrosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 47-year-old man with a diagnosis of acute myeloid leukemia with a blood type O negative blood group presents to the transplant clinic to discuss proceeding with an allogeneic stem cell transplant. Which of the following would be an optimal donor?",
    "choices": [
      {
        "id": 1,
        "text": "His identical twin brother"
      },
      {
        "id": 2,
        "text": "Umbilical cord transplant"
      },
      {
        "id": 3,
        "text": "His HLA identical 50-year-old brother who is otherwise healthy and is blood type O+"
      },
      {
        "id": 4,
        "text": "An HLA identical matched unrelated donor who is blood type O\u2013"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the case of acute myeloid leukemia (AML), <strong>allogeneic</strong> stem cell transplants are the <strong>treatment of choice</strong>. His<strong> HLA identical 50-year-old brother</strong> who is blood type <strong>O positive</strong> would be the <strong>best choice</strong>.</p>\n<p>Other options:</p>\n<p>Option A: An <strong>identical twin brother</strong> would <strong>not</strong> be the donor of choice. The therapeutic benefit of stem cell transplant in hematological malignancies is due to the <strong>graft-versus-leukemia (GvL)</strong>. Donor T lymphocytes attack malignant hematopoietic stem cells of the recipient that remain after high-dose chemotherapy. Despite having a <strong>low rate of graft versus host disease</strong> (GvHD), stem cells from an identical twin <strong>do not have</strong> a desirable degree of <strong>GvL effect</strong>, leading to <strong>higher</strong> rates of <strong>recurrence</strong> post-transplant.&nbsp;</p>\n<p>Option B: <strong>Autologous</strong> (umbilical cord transplant) is <strong>not recommended</strong> as <strong>higher</strong> rates of <strong>relapse</strong> have been reported.</p>\n<p>Option D: An <strong>HLA identical sibling</strong> is <strong>preferred over</strong> an <strong>unrelated HLA identical donor </strong>because there is a greater chance of matching for <strong>minor histocompatibility complex</strong> (mHC). This <strong>reduces</strong> the risk of <strong>GvHD</strong>. ABO compatibility is also important to consider, but a minor ABO mismatch (Rh mismatch) doesn't have any impact on hemolysis, graft-versus-host disease, or survival.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 64-year-old man is noted to have an extra heart sound shortly after S2. Which of the following is not a possible cause of that sound?",
    "choices": [
      {
        "id": 1,
        "text": "Opening snap"
      },
      {
        "id": 2,
        "text": "Third heart sound"
      },
      {
        "id": 3,
        "text": "Ejection click"
      },
      {
        "id": 4,
        "text": "Pericardial knock"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>S2 coincides with closure of the aortic and pulmonic valves.</p>\n<p><strong>Option A: Opening snap</strong> of mitral stenosis is a high frequency sound that occurs shortly after S2. It is generated when the superior bowing of the anterior mitral leaflet during systole rapidly reverses direction toward the left ventricle in early diastole, owing to the high left atrial (LA) pressure.</p>\n<p><strong>Option B: Third heart sound </strong>is a low-frequency sound that is thought to be caused by sudden limitation of LV expansion during brisk early diastolic filling.</p>\n<p><strong>Option C: Ejection click</strong> is an early systolic sound(occurs between S1 and S2) that represents opening of an abnormal semilunar valve, characteristically a bicuspid aortic valve.</p>\n<p><strong>Option D:</strong> In constrictive pericarditis, a <strong>pericardial &ldquo;knock&rdquo;</strong> may be heard during the rapid filling phase of early diastole as the high-pressure atria rapidly decompress into relatively noncompliant ventricles.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following regarding the effect of the potassium concentration on the ECG is TRUE?",
    "choices": [
      {
        "id": 1,
        "text": "The earliest electrocardiographic sign of hyperkalemia is a reduction in P wave amplitude"
      },
      {
        "id": 2,
        "text": "Hyperkalemia predisposes to digitalis-induced tachyarrhythmias"
      },
      {
        "id": 3,
        "text": "Prominent U waves are a characteristic feature of hyperkalemia"
      },
      {
        "id": 4,
        "text": "QRS complex widening is common in severe hyperkalemia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Hyperkalemia is associated with a distinctive sequence of electrocardiographic abnormalities, beginning with <strong>narrowing and peaking (tenting) of the T wave, with a shortened QT interval. </strong>Progressive hyperkalemia reduces atrial and ventricular resting membrane potentials, which inactivates sodium channels and decreases conduction velocity. At that stage, the QRS complex begins to widen and the P wave amplitude decreases. Complete loss of observed P waves may occur. In that situation, sinus rhythm typically persists but the P wave amplitude is so small that it is not recorded on the surface ECG. Very marked hyperkalemia leads to asystole, sometimes preceded by a slow undulatory (sinusoidal wave) pattern on the ECG caused by marked QRS widening.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9d4668f408a54cdb82ac1b1bd0627630x491x360.PNG"
    ]
  },
  {
    "text": "The incidence of transfusion-related acute lung injury (TRALI) is greatest with transfusion of which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Fresh frozen plasma"
      },
      {
        "id": 2,
        "text": "Packed red blood cells"
      },
      {
        "id": 3,
        "text": "Pooled platelets"
      },
      {
        "id": 4,
        "text": "Single-donor platelets"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Transfusion-related acute lung injury (TRALI) is the most common cause of transfusion related fatalities. TRALI usually results from the transfusion of donor plasma that contains high-titer anti-HLA class II antibodies that bind recipient leukocytes.</p>\n<p>The risk of TRALI is related to the potential number of exposures to plasma from different sources. The greatest risk occurs when multiple pooled sources are used, as in platelet transfusions. The transfusion of pooled products from women, in particular fresh frozen plasma, has also been associated with an increased risk of TRALI.</p>\n<p>The recipient develops symptoms of hypoxia (Pao2/FIo2 &lt;300 mmHg) and signs of noncardiogenic pulmonary edema, including bilateral interstitial infiltrates on chest x-ray, either during or within 6 h of transfusion. Treatment is supportive, and patients usually recover without sequelae.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements about peripheral edema in heart failure is correct?",
    "choices": [
      {
        "id": 1,
        "text": "Edema in heart failure correlates well with the level of systemic venous pressure"
      },
      {
        "id": 2,
        "text": "Peripheral edema may be detected when extracellular fluid volume has increased by as little as 1 to 2 liters"
      },
      {
        "id": 3,
        "text": "Rupture of the skin with extravasation of fluid is more likely to occur with chronic volume overload than with the sudden development of edema"
      },
      {
        "id": 4,
        "text": "In patients with hemiplegia due to a cerebrovascular accident, edema is usually more apparent on the paralyzed side"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Edema is usually more marked on the paralyzed side of patients with hemiplegia; unilateral edema may also result from venous obstruction.</p>\n<p>Although peripheral edema is a common and important physical finding in congestive heart failure, its presence does not correlate well with the level of systemic venous pressure. <strong>The excess volume of extracellular fluid is a more important determinant of edema. </strong>In adults, <strong>a minimum of 4 liters of excess extracellular fluid </strong>volume usually must accumulate before peripheral edema develops<strong>. </strong>In patients with chronic left ventricular failure and low cardiac output, peripheral edema may develop in the presence of normal or minimally elevated systemic venous pressure because of a gradual but persistent accumulation of extracellular fluid volume.</p>\n<p>In rare instances, especially when edema develops suddenly and severely, frank rupture of the skin with extravasation of fluid may result.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Medicine Test Ii (Cardiology, Nephrology, Infectious Diseases, Transplantation Medicine, Rheumatology And Vasculitis, Hematology, Clinical Medicine And Updates)';
        const quizFilename = 'medicine-test-ii-cardiology-nephrology-infectious-diseases-transplantation-medicine-rheumatology-and-vasculitis-hematology-clinical-medicine-and-updates-90627bbb.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>