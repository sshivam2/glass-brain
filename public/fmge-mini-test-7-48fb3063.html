<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 7 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following radioisotopes is used in a PET-CT scan?",
    "choices": [
      {
        "id": 1,
        "text": "16F-FDG"
      },
      {
        "id": 2,
        "text": "18F-FDG"
      },
      {
        "id": 3,
        "text": "Iodine 131"
      },
      {
        "id": 4,
        "text": "Radium"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>18F-FDG</strong> is the radioisotope used in a PET-CT scan.</p>\n<p><strong>Positron emission tomography - CT (PET-CT):</strong></p>\n<ul>\n<li>PET imaging is based on the detection of an injected <strong>positron-emitting radioactive tracer.</strong></li>\n<li>It relies on the&nbsp;<strong>coincidence detection of the annihilation photons (&gamma;)</strong>, which are released when a positron combines with an electron.</li>\n<li>A glucose analog called&nbsp;<strong>FDG (fluorodeoxyglucose)</strong>&nbsp;is used in PET imaging. FDG is taken up by metabolically active cells, where it undergoes phosphorylation to form&nbsp;<strong>FDG-6-phosphate</strong>. Unlike glucose, FDG-6-phosphate cannot undergo further metabolism and becomes trapped within the cell.</li>\n<li>The trapped FDG-6-phosphate is detected by the PET scanner.</li>\n<li>The combination of PET imaging with CT (PET-CT)&nbsp;<strong>combines the metabolic information</strong>&nbsp;(PET) with the<strong>&nbsp;cross-sectional anatomic information</strong>&nbsp;(CT).</li>\n</ul>\n<p><strong>Indications of PET-CT:</strong></p>\n<ul>\n<li>PET-CT&nbsp;is used in oncology imaging to detect&nbsp;<strong>malignant cells</strong>&nbsp;as they demonstrate&nbsp;<strong>increased glucose metabolism</strong>&nbsp;relative to normal tissues.</li>\n<li>It is indicated for the&nbsp;<strong>differentiation</strong>&nbsp;of a&nbsp;<strong>malignant</strong>&nbsp;from a&nbsp;<strong>benign</strong>&nbsp;lesion.</li>\n<li>It is indicated in&nbsp;<strong>tumor staging</strong>&nbsp;and evaluation of<strong>&nbsp;tumor recurrence.</strong></li>\n</ul>\n<p><strong>Technique</strong>:</p>\n<ul>\n<li>The patient must&nbsp;<strong>fast </strong>for<strong> 4-6 hrs</strong>&nbsp;prior to imaging.</li>\n<li><strong>Strenuous activity must be avoided</strong>&nbsp;prior to imaging and after radioisotope injection&nbsp;to avoid physiological muscle FDG uptake.</li>\n<li><strong>Bladder catheterization</strong>&nbsp;or voiding prior to imaging, bowel opacification, or IV contrast medium is optional.</li>\n<li>Before injecting FDG, the&nbsp;<strong>blood glucose level</strong>&nbsp;should be measured. It should be &lt;&nbsp;<strong>150 mg/dL.</strong>&nbsp;Good blood glucose control is essential as FDG uptake is competitively inhibited by glucose.</li>\n<li>Imaging is<strong>&nbsp;started 60 minutes following FDG injection.</strong></li>\n<li>An enhanced&nbsp;<strong>whole-body CT study</strong>&nbsp;is done, which takes&nbsp;<strong>60-70 seconds</strong>. Following this, a&nbsp;<strong>whole-body PET imaging</strong>, takes about&nbsp;<strong>30-45 minutes&nbsp;</strong>to complete.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An exclusively breastfed newborn was brought with vomiting and diarrhea that developed since birth. On examination, the baby is jaundiced, hypotonic, and has hepatomegaly. Urine was positive for Benedict's test, blood glucose was low and erythrocyte galactose-1-phosphate was elevated. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Fructosuria"
      },
      {
        "id": 2,
        "text": "Von Gierke's disease"
      },
      {
        "id": 3,
        "text": "Classical galactosemia"
      },
      {
        "id": 4,
        "text": "Hereditary fructose intolerance"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical scenario of an exclusively breastfed infant with vomiting, diarrhea, jaundice, hypotonia, and hepatomegaly with elevated erythrocyte galactose-1-phosphate is suggestive of <strong>classical galactosemia.</strong></p>\n<p><strong>Classical galactosemia&nbsp;</strong>is an&nbsp;autosomal recessive disorder.<strong>&nbsp;</strong>The enzyme deficient here is&nbsp;<strong>galactose-1-phosphate uridyl transferase (GALT)</strong>.<strong>&nbsp;</strong>Normally, newborns receive up to 40% of their intake as lactose (glucose + galactose). Without GALT, the infant can't metabolize <strong>galactose 1-phosphate </strong>which&nbsp;accumulates and causes injury to the kidney, liver, and brain.</p>\n<p>Clinical features include <strong>vomiting, hypoglycemia,</strong> hepatomegaly, jaundice, congenital cataracts, aminoaciduria, and&nbsp;<strong>failure to thrive</strong>. There is an increased incidence of&nbsp;<em>Escherichia coli</em> neonatal <strong>sepsis</strong>. Long-term <strong>complications</strong> include speech delays, learning impairment, motor dysfunction, and hypergonadotrophic hypogonadism (in females)</p>\n<div class=\"page\" title=\"Page 136\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The presence of galactose in urine (Positive benedict's test), elevated blood galactose, and elevated&nbsp;erythrocyte galactose-1-phosphate help in confirming the diagnosis.</p>\n</div>\n</div>\n</div>\n<p>Treatment is a <strong>galactose-free diet</strong>. Supportive therapy and prevention of complications is important.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/273ae933e27941edbdbe9e4f99d5dbe6x1280x1129.JPEG"
    ]
  },
  {
    "text": "Which of the following sites is most commonly involved in Crohn\u2019s disease?",
    "choices": [
      {
        "id": 1,
        "text": "Terminal ileum"
      },
      {
        "id": 2,
        "text": "Rectosigmoid colon"
      },
      {
        "id": 3,
        "text": "Transverse colon"
      },
      {
        "id": 4,
        "text": "Proximal duodenum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The&nbsp;most commonly affected site in <strong>Crohn's disease </strong>is the<strong> terminal ileum.&nbsp;</strong></p>\n<p>Other commonly affected sites in Crohn's disease include the small intestine and the colon.&nbsp;Although it can affect any part of the GI tract from mouth to anus, the <strong>rectum</strong> is usually <strong>spared.</strong></p>\n<p>On the other hand, the <strong>rectum</strong> is almost always<strong> involved</strong> in <strong>ulcerative colitis.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "During the evaluation of a patient with recurrent urinary tract infections, the following urographic finding was observed. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Horseshoe kidney"
      },
      {
        "id": 2,
        "text": "Medullary sponge kidney"
      },
      {
        "id": 3,
        "text": "Duplicated collecting system"
      },
      {
        "id": 4,
        "text": "Retrocaval ureter"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image shows the <strong>inferolateral displacement</strong> of the opacified lower pole due to an obstructed (and unopacified) upper pole. This is called the\u00a0<strong>drooping lily sign</strong>\u00a0and is observed in patients with a <strong>duplicated collecting system</strong><strong>.</strong>\u00a0</p>\n<p>This condition is characterized by an <strong>incomplete fusion </strong>of upper and lower pole moieties resulting in a variety of complete or incomplete duplications of the collecting system.</p>\n<p>Duplex collecting systems may also be complicated by vesicoureteric reflux, obstruction, or ureterocoele.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e6a35ae67ce2410c8fc898cef94dae3e.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 33-year-old lady complained of increased sensitivity to certain odors. Which of the following nerves is unlikely to be involved?",
    "choices": [
      {
        "id": 1,
        "text": "Trigeminal nerve"
      },
      {
        "id": 2,
        "text": "Vagus nerve"
      },
      {
        "id": 3,
        "text": "Glossopharyngeal nerve"
      },
      {
        "id": 4,
        "text": "Hypoglossal nerve"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>hypoglossal</strong> nerve is a&nbsp;<strong>purely motor</strong> cranial nerve and is <strong>not</strong> involved in <strong>olfaction.</strong></p>\n<p>The other three cranial nerves&mdash; <strong>trigeminal, glossopharyngeal,</strong> and <strong>vagus</strong> nerves&mdash;are <strong>mixed cranial</strong> <strong>nerves</strong> and contribute to olfaction.</p>\n<p>Vagal nerve stimulation modifies the electrical activity of the olfactory bulb.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following is not a cause of gradual painless defective vision?",
    "choices": [
      {
        "id": 1,
        "text": "Senile cataract"
      },
      {
        "id": 2,
        "text": "Corneal dystrophy"
      },
      {
        "id": 3,
        "text": "Refractive error"
      },
      {
        "id": 4,
        "text": "Methyl alcohol amblyopia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Methyl alcohol amblyopia</strong> causes<strong> sudden painless</strong> onset of defective vision.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In judicial hanging , the knot is placed at____________",
    "choices": [
      {
        "id": 1,
        "text": "Below the chin"
      },
      {
        "id": 2,
        "text": "Angle of jaw"
      },
      {
        "id": 3,
        "text": "The back of the neck"
      },
      {
        "id": 4,
        "text": "Choice of hangman"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In judicial hanging ,the knot is placed at angle of jaw.</p>\n<p>Judicial hanging</p>\n<ul>\n<li>Face of the person is covered with dark mask ,he is made to stand on a platform above trapdoors ,which open downwards when blot is drawn.</li>\n<li>Rope is looped around the <strong>neck</strong> and person is allowed to drop for <strong>5-7 meters</strong> according to weight, age and build.</li>\n<li>Sudden stop usually causes fracture dislocation at level <strong>C-2, C-3 or C-3&nbsp; C-4</strong> vertebra and rupture of brainstem between pons and medulla (<strong>hangman fracture</strong>).</li>\n<li>Death is instantaneous but <strong>heartbeat</strong> may continue for <strong>15-20 minutes</strong> and <strong>spasmodic muscle jerking</strong> may occur for considerable time.</li>\n<li><strong>Asphyxial signs</strong> are <strong>not seen</strong> in correctly performed judicial hangings.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Q.\u2002You are working as an intern in the ENT department. A child is brought to you with complaints of noisy breathing. On examination, you notice biphasic stridor in the child. Which of the following conditions can be ruled out in this child?",
    "choices": [
      {
        "id": 1,
        "text": "Vocal cord paralysis"
      },
      {
        "id": 2,
        "text": "Subglottic stenosis"
      },
      {
        "id": 3,
        "text": "Laryngeal papilloma"
      },
      {
        "id": 4,
        "text": "Laryngomalacia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Laryngomalacia</strong> causes<strong> inspiratory stridor</strong>. Hence, it is not considered as part of the differential diagnosis for biphasic stridor.</p>\n<p>Stridor is noisy respiration produced by turbulent airflow\u00a0through the narrowed air passages. It may be heard during\u00a0inspiration, expiration, or both.</p>\n<ul>\n<li><strong>Inspiratory stridor</strong> is often produced in obstructive lesions of supraglottis or pharynx, e.g. laryngomalacia or retropharyngeal abscess.</li>\n<li><strong>Biphasic stridor </strong>is seen in lesions of the glottis, subglottis, and cervical trachea, e.g. laryngeal papillomas, vocal cord paralysis, and subglottic stenosis.</li>\n<li><strong>Expiratory stridor</strong> is produced in lesions of thoracic trachea,\u00a0primary and secondary bronchi, e.g. bronchial\u00a0foreign body, and tracheal stenosis.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/74b4c98abb59427c8564c3236d75b224x1280x1826.JPEG"
    ]
  },
  {
    "text": "A 40-year-old patient presented to the emergency department following a road traffic accident. The radiograph of his pelvis is shown below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Central dislocation of the hip"
      },
      {
        "id": 2,
        "text": "Fracture shaft of femur"
      },
      {
        "id": 3,
        "text": "Posterior dislocation of the hip"
      },
      {
        "id": 4,
        "text": "Anterior dislocation of the hip"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The likely diagnosis of the condition given in the picture is <strong>posterior dislocation </strong>of left hip joint.</p>\n<p>The radiograph shows the following findings:</p>\n<ul>\n<li>The femoral head is displaced <strong>superiorly</strong> and <strong>laterally</strong></li>\n<li>The left femoral head appears slightly smaller than the right femoral head</li>\n<li>The limb is <strong>adducted</strong> and <strong>internally rotated</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1c36d82fb0d74935aea1963242f5e8b8.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a component of the quadruple screening test?",
    "choices": [
      {
        "id": 1,
        "text": "Inhibin B"
      },
      {
        "id": 2,
        "text": "Unconjugated Estriol (E3)"
      },
      {
        "id": 3,
        "text": "AFP"
      },
      {
        "id": 4,
        "text": "hCG"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Inhibin B&nbsp;</strong>is not a component assayed under the quad-screening test. <strong>Dimeric inhibin-A</strong> is evaluated in this screening test.</p>\n<p><strong>Quadruple testing</strong>&nbsp;is done in the&nbsp;<strong>second trimester&nbsp;</strong>between<strong>&nbsp;15-21 weeks&nbsp;</strong>of gestation.&nbsp;It comprises:</p>\n<ul>\n<li>Maternal serum AFP</li>\n<li>Human chorionic gonadotropin</li>\n<li>Unconjugated estriol (E3)</li>\n<li>Dimeric inhibin A</li>\n</ul>\n<p>The following table summarizes the findings of the quad-screening test in various conditions.</p>\n<table>\n<tbody>\n<tr>\n<td><strong>Parameter</strong></td>\n<td><strong>Trisomy 21</strong></td>\n<td><strong>Trisomy 18</strong></td>\n<td><strong>Neural tube defect or abdominal wall defect</strong>&nbsp;</td>\n</tr>\n<tr>\n<td><strong>MSAFP</strong></td>\n<td>Low</td>\n<td>Low</td>\n<td>High</td>\n</tr>\n<tr>\n<td><strong>&beta; hCG</strong></td>\n<td>High</td>\n<td>Low</td>\n<td>Normal</td>\n</tr>\n<tr>\n<td><strong>Unconjugated estriol</strong></td>\n<td>Low</td>\n<td>Low</td>\n<td>Normal</td>\n</tr>\n<tr>\n<td><strong>Inhibin A</strong></td>\n<td>High</td>\n<td>Normal/Low</td>\n<td>Normal</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young patient presents to the dermatology OPD with a history of itchy hypopigmented patches over her chest for 6 months. A KOH mount is prepared with the skin scraping sample, which on microscopy reveals a characteristic appearance as shown in the image. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pityriasis alba"
      },
      {
        "id": 2,
        "text": "Candidiasis"
      },
      {
        "id": 3,
        "text": "Tinea corporis"
      },
      {
        "id": 4,
        "text": "Pityriasis versicolor"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical picture and the KOH mount preparation showing the <strong>spaghetti and meatball</strong> appearance suggest <strong>pityriasis versicolor.</strong></p>\n<p>Pityriasis Versicolor<strong>&nbsp;</strong>is a<strong>&nbsp;chronic superficial</strong>&nbsp;<strong>infection</strong> of the stratum corneum caused by&nbsp;<em><strong>Malassezia globosa</strong></em> and <em><strong>Malassezia</strong>&nbsp;<strong>furfur</strong></em><strong>.</strong> The most common site involves the neck, chest, back, and&nbsp;upper arms. The lesions often appear as hypopigmented areas.</p>\n<p>The&nbsp;KOH mount reveals fungal hyphae that are short and thick (like spaghetti or banana) and many variously sized spores (like&nbsp;meatballs&nbsp;or grapes) referred to as spaghetti and meatballs&nbsp;or <strong>bananas and grapes appearance.</strong></p>\n<p>Treatment includes topical azoles or <strong>terbinafine</strong> for 2 weeks.</p>\n<p>The image below shows the <strong>hypopigmented lesions</strong> of P. versicolor over the chest.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/57d009f9aef54d88925b78d44637eee8.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/21a3f5d5d1934772b732f28d27605bb9x1280x913.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dcb871f7f5854320b77c9e2609ebb09bx1220x1128.JPEG"
    ]
  },
  {
    "text": "A pregnant woman in her 30th week of pregnancy undergoes a pulmonary function test. Assuming there is no respiratory abnormality, which of the following would be decreased?",
    "choices": [
      {
        "id": 1,
        "text": "Respiratory rate"
      },
      {
        "id": 2,
        "text": "Vital capacity"
      },
      {
        "id": 3,
        "text": "Functional residual capacity"
      },
      {
        "id": 4,
        "text": "Inspiratory capacity"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Functional residual capacity</strong>&nbsp;decreases in pregnancy.</p>\n<p>The&nbsp;<strong>changes in the respiratory system</strong>&nbsp;during pregnancy are:</p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">\n<p><strong>Increase</strong></p>\n</td>\n<td style=\"text-align: center;\">\n<p><strong>Decrease</strong></p>\n</td>\n<td style=\"text-align: center;\">\n<p><strong>Unaffected</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<ul>\n<li>Tidal volume</li>\n<li>Inspiratory capacity</li>\n<li>Minute O<sub>2</sub> uptake</li>\n<li>Minute ventilation</li>\n</ul>\n</td>\n<td>\n<ul>\n<li>Functional residual capacity</li>\n<li>Expiratory reserve volume</li>\n<li>Residual volume</li>\n<li>Total lung capacity</li>\n</ul>\n</td>\n<td>\n<ul>\n<li>Respiratory rate</li>\n<li>Vital capacity</li>\n<li>Inspiratory reserve volume&nbsp;</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>(Mnemonic: TIMM increases in pregnancy)</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6d19e95a28124de0aa90384c7448d269x1279x973.JPEG"
    ]
  },
  {
    "text": "A 33-year old P3L3 woman complained of intermenstrual bleeding. On speculum examination, a polypoid lesion was visualized in the cervix, which was confirmed with the ultrasound shown below. What is the most appropriate management?",
    "choices": [
      {
        "id": 1,
        "text": "Wait and watch with serial sonograms"
      },
      {
        "id": 2,
        "text": "Removal with ring forceps"
      },
      {
        "id": 3,
        "text": "Oral contraceptive pills"
      },
      {
        "id": 4,
        "text": "Embolization of feeding vessel"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\">The above ultrasound image shows the presence of an <strong>endocervical polyp</strong>. The most appropriate treatment is <strong>avulsion using ring forceps</strong>.</p>\n<p class=\"p1\">Endocervical polyps are overgrowths of benign endocervical stroma covered by mucinous columnar epithelium. They appear as single, red, smooth elongated masses arising from the endocervical canal. Polyps range from a few millimeters to 2-3 cm in size and are more frequently seen in multiparas.</p>\n<p class=\"p1\">Endocervical polyps are usually <strong>asymptomatic</strong>, but also cause <strong>intermenstrual</strong> or <strong>postcoital</strong> bleeding or vaginal discharge. They are identified by inspection during a pelvic examination or&nbsp;during transvaginal sonography if they are located higher up.</p>\n<p class=\"p1\">They are typically <strong>benign</strong>. Premalignant or malignant transformation is rare. However, cervical cancer can also present as polypoid masses and can mimic these benign lesions.</p>\n<p class=\"p1\">Treatment:</p>\n<ul>\n<li class=\"p1\">Asymptomatic polyps usually don't need any intervention</li>\n<li class=\"p1\">Symptomatic:\n<ul>\n<li class=\"p1\"><strong>Removal with ring forceps</strong>: The polyp is twisted repeatedly about the base of its stalk to strangulate its feeding vessels. With a repeated twisting, the base will narrow and avulse.</li>\n<li class=\"p1\"><strong>Removal with punch biopsy forceps</strong> for smaller polyps</li>\n<li class=\"p1\"><strong>Electrosurgical excision or hysteroscopic removal</strong> for polyps with thick stalks</li>\n</ul>\n</li>\n</ul>\n<p>After the removal of polyps, the base can be cauterized to prevent bleeding and recurrence rate. Every excised polyp should be sent for further histological examination to rule out malignancy.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b73367762ab54ceba5cde9da294bc6bf.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Antigen binding to MHC class I activates which of the following cells?",
    "choices": [
      {
        "id": 1,
        "text": "Cytotoxic T cells"
      },
      {
        "id": 2,
        "text": "B cells"
      },
      {
        "id": 3,
        "text": "NK cells"
      },
      {
        "id": 4,
        "text": "Helper cells"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Antigen binding to <strong>major histocompatibility complex</strong> (MHC) <strong>class I</strong> activates <strong>cytotoxic T cells</strong>.</p>\n<p>The major histocompatibility complex (MHC), is a genetic locus that encodes a group of antigens. The MHC molecules also bind peptide antigens and present them to the T cells. The human MHC is called the <strong>human leukocyte antigen</strong> (HLA) complex.</p>\n<p>The <strong>MHC class I</strong> proteins present their antigens to <strong>CD8 T cells (cytotoxic T cells)</strong>. The antigens bound to <strong>MHC class II</strong> proteins activate the <strong>CD4 T cells( T helper cells)</strong>. There is no cross recognition between the T cells and MHC classes. This is known as <strong>MHC restriction</strong>. For example, a CD4 T cell would recognize an antigen presented by a macrophage only if it's bound to MHC class II molecules.&nbsp;</p>\n<p>Other options:</p>\n<p>Option B - <strong>B cells</strong> interact with an antigen based on the immunoglobulin surface receptors on the B cell. The receptor along with the antigen is embodied and degraded and the peptides produced are returned to the cell surface. It is then bound to the <strong>MHC class II</strong> molecules present on the cell surface. This is then recognized by <strong>CD4 T cells</strong>. Ultimately, the B cells are stimulated to proliferate and differentiate into <strong>plasma cells</strong> which secrete <strong>antibodies</strong>.&nbsp;</p>\n<p>Option C - <strong>Natural killer</strong> (NK) cells are granular lymphocytes that confer <strong>innate immunity</strong> by protecting against viruses and <strong>intracellular</strong> pathogens.&nbsp;</p>\n<p>Option D - <strong>T helper cells</strong> are responsible for the production of <strong>cytokines</strong> which activate the humoral and cell-mediated branches of immunity. These cells will recognize only those antigens that are presented along with <strong>MCH class II</strong> molecules on APC such as macrophages and B lymphocytes.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young man presented to the emergency department one hour after spilling hot oil on his hands while cooking. On examination, multiple blisters are present on his right hand. The injuries are extremely painful when touched with gloves and capillary refilling is normal.  Which layers of skin are involved in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Only epidermis"
      },
      {
        "id": 2,
        "text": "Epidermis and papillary dermis"
      },
      {
        "id": 3,
        "text": "Epidermis and reticular dermis"
      },
      {
        "id": 4,
        "text": "Epidermis, dermis and subcutaneous tissue"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This patient with multiple <strong>blisters</strong>, <strong>tenderness</strong> over the injured skin, and <strong>normal capillary refilling</strong> time has&nbsp;<strong>second-degree superficial burns</strong>. The layers of skin involved here are the<strong> epidermis&nbsp;and papillary dermis</strong> (the upper part of the dermis).</p>\n<p>According to the depth and the extent of tissue damage, burn injuries can be classified as follows:</p>\n<ul>\n<li><strong>First-degree</strong> burns: In this, there is damage to the <strong>epidermis</strong>. These injuries are extremely<strong> painful</strong> but<strong> do not blister.</strong> They have a <strong>normal</strong> <strong>capillary refilling</strong> time.</li>\n<li><strong>Second</strong>-<strong>degree</strong> burns (partial-thickness burns): In this, there is damage to the <strong>epidermis and dermis</strong>. Depending on the extent of the dermal involvement, they can further be divided into superficial or deep.\n<ul>\n<li><strong>Superficial partial-thickness</strong> burns: They involve the <strong>epidermis</strong> and <strong>upper</strong> part of the <strong>dermis</strong> (papillary). These injuries are red, moist, and extremely<strong> painful</strong> and <strong>blisters</strong> are present. The <strong>capillary return</strong> is&nbsp;<strong>visible</strong> when the injured skin is blanched<strong>.</strong></li>\n<li><strong>Deep partial-thickness</strong> burns: They involve the <strong>epidermis</strong> and the <strong>deeper dermis</strong>. These injuries are <strong>less painful </strong>and<strong> some sensation </strong>is preserved. The capillaries <strong>do not blanch</strong> on pressure.</li>\n</ul>\n</li>\n<li><strong>Third-degree</strong> burns:&nbsp; In this degree, there is damage to the <strong>epidermis</strong>, <strong>dermis</strong>, and <strong>subcutaneous</strong> tissue. The injuries have a <strong>hard leathery </strong>feel with the <strong>absence</strong> of <strong>sensation</strong>.</li>\n<li><strong>Fourth-degree</strong> burns: In this degree, there is damage to the underlying <strong>soft tissues</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child presents with lesions as shown in the image below. He also complained of decreased vision at night. Which of the following dose of vitamin A prophylaxis given to children under the vitamin A distribution scheme in India could have prevented this condition?",
    "choices": [
      {
        "id": 1,
        "text": "2,00,000 IU  given yearly between the ages 1-6 years"
      },
      {
        "id": 2,
        "text": "1,00,000 IU  given yearly between the ages 1-6 years"
      },
      {
        "id": 3,
        "text": "1,00,000 IU  given 6-monthly between the ages 1-6 years"
      },
      {
        "id": 4,
        "text": "2,00,000 IU given 6-monthly between the ages 1-6 years"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image above showing&nbsp;<strong>phrynoderma&nbsp;</strong>along with the history of decreased vision at the night suggests a likely diagnosis of&nbsp;<strong>vitamin A deficiency</strong>. Under the <strong>vitamin-A distribution scheme </strong>in <strong>India</strong>, <strong>200,000 IU </strong>of vitamin A are given orally at<strong> 6-monthly intervals </strong>between the ages<strong>&nbsp;of 1 to 6 years</strong>.</p>\n<div class=\"page\" title=\"Page 1656\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 1656\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Vitamin A deficiency</strong> is a major preventable cause of blindness in children<strong>. </strong>It&nbsp;can lead to mucocutaneous disease and result in various ocular complications, including blindness. The <strong>earliest sign</strong> of vitamin A deficiency is defective <strong>dark adaptation</strong> and <strong>night blindness (nyctalopia)</strong>. Xerosis and scaling are commonly present in cutaneous findings.<strong> Phrynoderma</strong>, which is characterized by the presence of <strong>keratotic follicular papules</strong> over anterolateral thighs and <strong>posterolateral upper arms</strong> is also seen.</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 1657\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Treatment</strong> is done by administering <strong>50,000&ndash;2,00,000 IU of daily vitamin A supplementation</strong> until clinical signs and symptoms resolve and serum retinol levels normalize.&nbsp;</p>\n<p>The image below shows a Bitot's spot(due to Vitamin A deficiency) seen as a foamy appearance on the surface of the conjunctiva.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5f13278df72a4d4b8a5a5fa737545d91.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e6afff1d0a2943f2b9be1fda9a8f900fx720x449.PNG"
    ]
  },
  {
    "text": "A 6-year-old boy presents to the ER with colicky abdominal pain. His mother tells you that he refuses to walk due to knee pain. On examination, palpable purpura is noted. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Henoch Schonlein purpura"
      },
      {
        "id": 2,
        "text": "Hemolytic uremic syndrome"
      },
      {
        "id": 3,
        "text": "Juvenile Idiopathic arthritis"
      },
      {
        "id": 4,
        "text": "IgA nephropathy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical presentation of palpable purpura, colicky abdominal pain, and arthritis, point towards a diagnosis of <strong>Henoch Schonlein purpura</strong>&nbsp;(HSP) also known as <strong>IgA vasculitis</strong>.</p>\n<p>It is a <strong>small vessel vasculitis</strong> that occurs due to IgA immune complex deposition within the wall of the blood vessels. It is commonly seen in <strong>children</strong> and is characterized by:</p>\n<ul>\n<li><strong>Palpable purpura </strong>without thrombocytopenia and coagulopathy.</li>\n<li><strong>Arthralgia-&nbsp;</strong>commonly affecting&nbsp;hip, knee, or ankle joints.</li>\n<li><strong>Abdominal pain</strong></li>\n<li><strong>Glomerulonephritis:&nbsp;</strong>proteinuria, microscopic hematuria, RBC casts in urine.</li>\n</ul>\n<p>The skin biopsy will show small vessel vasculitis, with <strong>IgA </strong>and <strong>C3 deposition </strong>in the affected organs<strong>&nbsp;</strong>by immunofluorescence.</p>\n<p>Option B: <strong>Hemolytic uremic syndrome</strong> is characterized by a <strong>triad</strong> of&nbsp;<span data-preserver-spaces=\"true\">microangiopathic hemolytic anemia, thrombocytopenia, and acute kidney injury.</span></p>\n<p><span data-preserver-spaces=\"true\">Option C: <strong>Juvenile idiopathic arthritis</strong> (<strong>JIA</strong>) is characterized by fever of at least 2 weeks duration associated with arthritis, evanescent erythematous <strong>rash</strong>, hepatosplenomegaly, generalized lymphadenopathy, and serositis.</span></p>\n<p><span data-preserver-spaces=\"true\">Option D:&nbsp;Patients with <strong>IgA nephropathy</strong> or <strong>Berger's disease</strong> present with gross hematuria, often associated with a preceding or ongoing viral infection of the upper respiratory tract (<strong>synpharyngitic presentation</strong>).</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false about port wine stain:",
    "choices": [
      {
        "id": 1,
        "text": "Fades away with time"
      },
      {
        "id": 2,
        "text": "Associated with Sturge-Weber syndrome"
      },
      {
        "id": 3,
        "text": "Special form of nevus flammeus"
      },
      {
        "id": 4,
        "text": "Grows during childhood"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Port wine stain</strong> is a congenital low-flow vascular malformation that does not fade away with time.</p>\n<p>Port wine stains are <strong>congenital lesions</strong> that may occur anywhere in the body. Visually they appear as partially or completely blanchable, <strong>pink to red</strong> or reddish brown patches.</p>\n<p>Commonly they occur as isolated skin lesions but in rare cases, they are part of certain complex syndromes.</p>\n<p>This lesion is associated with syndromes such as <strong>Sturge-Weber</strong> syndrome and <strong>occult spinal dysraphism</strong>. Port-wine stain occurring in the distribution of the trigeminal nerve is associated with Sturge-Weber syndrome.</p>\n<p>Features of port wine stain:</p>\n<ul>\n<li>Does not fade with time</li>\n<li>Special form of nevus flammeus</li>\n<li>Tends to grow during childhood</li>\n<li>Thicken the skin surface</li>\n</ul>\n<p>Given below is an image of port-wine stain:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/806813ab03c14d8486f78161c0055bdex1280x960.JPEG"
    ]
  },
  {
    "text": "From the following epidemic curve, identify the type of epidemic depicted.",
    "choices": [
      {
        "id": 1,
        "text": "Point-source epidemic"
      },
      {
        "id": 2,
        "text": "Continuous epidemic"
      },
      {
        "id": 3,
        "text": "Slow epidemic"
      },
      {
        "id": 4,
        "text": "Propagated epidemic"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Point-source epidemic</strong> is depicted in the given image.</p>\n<p>In the epidemic curve for a point-source epidemic, there is a <strong>sharp rise and fall</strong> of the curve with <strong>no secondary waves.&nbsp;</strong>It tends to be <strong>explosive</strong> as all the cases are <strong>clustered</strong> in a narrow period of time and they occur within one <strong>incubation period </strong>of the disease.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ef30827ead1444dea3ba1b34421f9553.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "An infant who is diagnosed with congenital hypothyroidism presents with the following hernia. Which of the following statements is false regarding the management of this child?",
    "choices": [
      {
        "id": 1,
        "text": "The hernia may spontaneously resolve by 2 years of age"
      },
      {
        "id": 2,
        "text": "Surgical repair is indicated if the hernia persists for more than 5 years of age"
      },
      {
        "id": 3,
        "text": "Strangulation is a common complication associated with this type of hernia"
      },
      {
        "id": 4,
        "text": "Mayo\u2019s procedure or mesh repair can be done for this hernia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical history of <strong>congenital hypothyroidism</strong> and the image showing a mass protruding out of the umbilicus is indicative of an <strong>umbilical hernia. Obstruction</strong> and <strong>strangulation</strong> are <strong>uncommon</strong> below the age of 3 years.</p>\n<p><strong>Congenital hypothyroidism</strong>&nbsp;is a condition caused by an embryological defect in the thyroid gland or thyroid hormone synthesis.</p>\n<p>Congenital hypothyroidism is commonly associated with other features such as:</p>\n<ul>\n<li>Myxedematous facies</li>\n<li>Large fontanelles</li>\n<li>Macroglossia</li>\n<li>Umbilical hernia</li>\n<li>Hypotonia</li>\n</ul>\n<p><strong>Mayo&rsquo;s operation</strong> is done for an&nbsp;<strong>umbilical hernia.&nbsp;</strong>Indications for surgery in umbilical hernia are:</p>\n<ul>\n<li>Defect size <strong>&gt;2cm</strong></li>\n<li>Persisting <strong>beyond 5 years</strong></li>\n<li>Progressively enlarging after 2 years of age (usually regresses spontaneously by 2 years of age)</li>\n<li>Symptomatic</li>\n<li>Strangulated</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bdb7a36e794c4ed89dab4c3ddad4f610.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Preoperative fasting recommendation is _________",
    "choices": [
      {
        "id": 1,
        "text": "4 hours for solids in adults"
      },
      {
        "id": 2,
        "text": "2 hours for clear liquids in adults"
      },
      {
        "id": 3,
        "text": "2 hours for breast milk in infants"
      },
      {
        "id": 4,
        "text": "4 hours for solids in infants"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Preoperative fasting recommendation is <strong>2 hours for liquids in adults</strong>.</p>\n<p><strong>Recommended Preoperative Fasting period</strong>:</p>\n<ul>\n<li>For neonates and infants:\n<ul>\n<li>2 hours for clear fluids</li>\n<li>4 hours for breast milk</li>\n<li>6 hours for solids and infant formula</li>\n</ul>\n</li>\n<li>For all above 1 year of age:\n<ul>\n<li>2 hours for clear fluids</li>\n<li>6 hours for a light meal</li>\n<li>8 hours if the meal contains fried, fatty food</li>\n</ul>\n</li>\n</ul>\n<p>Preoperative fasting is intended to reduce the risk of pulmonary aspiration.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true about the given dose-response curve:",
    "choices": [
      {
        "id": 1,
        "text": "Drug B is the most potent"
      },
      {
        "id": 2,
        "text": "Drug B is the most efficacious"
      },
      {
        "id": 3,
        "text": "Drug C is more efficacious than drug D"
      },
      {
        "id": 4,
        "text": "Drug B is more efficacious than drug A"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The more the <strong>curve</strong> is to the<strong> left</strong>, the <strong>more</strong> is its <strong>potency</strong>. Hence <strong>drug B </strong>is the <strong>most potent&nbsp;</strong>on the given dose-response curve (DRC).</p>\n<p><strong>Potency</strong></p>\n<ul>\n<li>It is defined as the <strong>amount of drug</strong> needed to produce a given response.</li>\n<li>The more the curve is on the left side, the more is its potency.</li>\n<li>Hence in the given DRC <strong>drug B</strong> is <strong>most </strong>potent and <strong>drug D</strong> is the<strong> least</strong> potent.</li>\n</ul>\n<p><strong>Efficacy</strong></p>\n<ul>\n<li>It is defined as the <strong>maximum effect</strong> produced by the drug and is determined by the peak of the curve.</li>\n</ul>\n<p>Hence in the given DRC, <strong>drug B has the least efficacy,</strong> and drugs A, C &amp; D are equally efficacious.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8a1d51a037e64ae498722fe1669b3cf6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/29a1326c91ea4e47bb57387a171d1677x1280x938.JPEG"
    ]
  },
  {
    "text": "In which of the following conditions is normal peristalsis not seen?",
    "choices": [
      {
        "id": 1,
        "text": "Achalasia cardia"
      },
      {
        "id": 2,
        "text": "Esophageal carcinoma"
      },
      {
        "id": 3,
        "text": "Nutcracker esophagus"
      },
      {
        "id": 4,
        "text": "Hypertensive lower esophageal sphincter"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Achalasia cardia <strong>does not show&nbsp;</strong>normal peristalsis.</p>\n<p>Manometric features of achalasia cardia are as follows:</p>\n<ul>\n<li>Incomplete lower esophageal sphincter relaxation</li>\n<li><strong>Aperistalsis </strong>of the esophageal body</li>\n<li><strong>Elevated LES pressure</strong></li>\n</ul>\n<p><strong>Diffuse esophageal spasm</strong> is characterized by simultaneous <strong>multi-peaked contractions of the esophagus.</strong> The contractions are spontaneous and may be of abnormally high amplitude (&gt;120 mmHg) or long duration. <strong>Intermittent normal peristalsis is seen.</strong></p>\n<p><strong>Nutcracker esophagus</strong> is characterized by<strong> high amplitude (&ge;180 mmHg) contractions</strong> with an increased mean duration. The peristaltic sequence is normal.</p>\n<p><strong>Hypertensive lower esophageal sphincter</strong> is characterized by <strong>elevated LES pressure (&ge;26 mmHg).</strong> Normal peristalsis is seen in the body of the esophagus.</p>\n<p><strong>Esophageal carcinoma</strong> will not have any issues with the motility or peristalsis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 55-year-old male patient presented after an episode of acute gastroenteritis and was infused with fluids. A while later, after fluid infusion, his heart rate rose to 122 bpm and he complained of palpitations. The presence of tachycardia can be explained by which of the following mechanisms?",
    "choices": [
      {
        "id": 1,
        "text": "Bezold-Jarisch reflex"
      },
      {
        "id": 2,
        "text": "Pulmonary chemoreflex"
      },
      {
        "id": 3,
        "text": "Bainbridge reflex"
      },
      {
        "id": 4,
        "text": "Cushing's reflex"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The presence of tachycardia can be explained by the\u00a0<strong>Bainbridge</strong> <strong>reflex.</strong></p>\n<p>It is a compensatory cardiac reflex where\u00a0there is an\u00a0<strong>increase\u00a0in the\u00a0heart rate\u00a0</strong>in response to <strong>raised atrial stretch. </strong></p>\n<p>In fluid overload states, commonly after <strong>excessive fluid infusion</strong>, there is <strong>distension of the atria</strong> due to increased blood volume. This <strong>distension</strong> activates the atrial stretch receptors which transmit the afferent signals to the medulla via the vagus nerve.\u00a0The efferent signals are then transmitted back through vagal\u00a0and sympathetic nerves. This leads to an increase in\u00a0the strength\u00a0of contraction of the heart and\u00a0<strong>tachycardia.</strong>\u00a0This reflex helps in preventing excess accumulation of blood in the atria, veins, and in the pulmonary circulation.</p>\n<p>Other options -\u00a0</p>\n<p>Option A:\u00a0<strong>Bezold-Jarisch reflex</strong> is due to the activation of <strong>chemosensitive vagal C fibers</strong>\u00a0in the cardiopulmonary region. They can be elicited after administering certain irritants like <strong>capsaicin</strong> or serotonin. It can also be activated during myocardial infarction and on exposure to radioactive dyes during coronary angiography. This reflex is characterized by <strong>profound\u00a0brady\u00adcardia, hypotension</strong>, and a brief period of <strong>apnea</strong> followed by <strong>rapid shallow breathing</strong>.\u00a0</p>\n<p>Option B<strong>: Pulmonary chemoreflex</strong> is due to the stimulation of the <strong>J-receptors</strong> (C receptors/juxta-pulmonary capillary receptors) which are stimulated when there is hyperinflation of the lung. This produces\u00a0reflex <strong>apnea</strong> followed by a <strong>rapid increase in breathing rate</strong>, <strong>bradycardia,</strong> and <strong>hypotension</strong>.</p>\n<p>Option D:<strong> Cushing's reflex </strong>is seen when the\u00a0<strong>intracranial\u00a0pressure\u00a0</strong>is<strong> raised </strong>where the blood supply to ventrolateral medulla neurons is compromised.\u00a0The local hypoxia and hypercapnia stimulate the neurons producing <strong>hypertension, bradycardia</strong>, and<strong> irregular respiration</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The sign given below is seen in which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Marfan\u2019s syndrome"
      },
      {
        "id": 2,
        "text": "Ehlers-Danlos syndrome"
      },
      {
        "id": 3,
        "text": "Osteogenesis imperfecta"
      },
      {
        "id": 4,
        "text": "Pseudoxanthoma elasticum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image has the&nbsp;characteristic<strong> wrist sign</strong> i.e. the distal phalange of the first and fifth fingers of the hand overlaps when wrapped around the opposite wrist. This is seen in <strong>Marfan's syndrome.&nbsp;</strong>This happens as their fingers and hands are long and slender and have a spider-like appearance (<strong>arachnodactyly</strong>).&nbsp;</p>\n<p>Marfan's syndrome is an&nbsp;<strong>inherited connective tissue disorder</strong>&nbsp;that is caused by a mutation in a gene that codes for an&nbsp;<strong>extracellular matrix protein-fibrillin-1</strong>&nbsp;(FBN1).&nbsp;The&nbsp;<strong>FBN1 locus</strong>&nbsp;is on the long arm of&nbsp;<strong>chromosome 15</strong>. It is a&nbsp;<strong>clinical diagnosis</strong>&nbsp;based on skeletal, cardiovascular, and ocular manifestations.&nbsp;</p>\n<p>Skeletal manifestations:&nbsp;</p>\n<ul>\n<li><strong>Overgrowth of long bones</strong>&nbsp;(dolichostenomelia) with an<strong>&nbsp;arm span to height</strong>&nbsp;ratio of&nbsp;<strong>more than 1.05</strong></li>\n<li>Pectus carinatum or pectus excavatum</li>\n<li>Long and slender fingers (<strong>arachnodactyly</strong>), contracture of fingers (<strong>camptodactyly</strong>)</li>\n<li>Malar hypoplasia</li>\n<li>Joint laxity&nbsp;</li>\n</ul>\n<p>Cardiovascular manifestations:</p>\n<ul>\n<li><strong>Thickened</strong>&nbsp;atrioventricular&nbsp;<strong>valves</strong>,&nbsp;<strong>valvular</strong>&nbsp;<strong>prolapse</strong>&nbsp;(mitral regurgitation)&nbsp;</li>\n<li>Aortic valve dysfunction due to&nbsp;<strong>aortic root aneurysm</strong></li>\n<li>Aortic dissection and rupture due to&nbsp;<strong>cystic medial necrosis</strong>&nbsp;of the aorta</li>\n</ul>\n<p>Ocular manifestations:</p>\n<ul>\n<li><strong>ectopia lentis</strong></li>\n<li>myopia</li>\n<li>flat cornea</li>\n<li>retinal detachments</li>\n<li>early cataracts and glaucoma</li>\n</ul>\n<p>Other systemic manifestations:&nbsp;</p>\n<ul>\n<li>thoracic&nbsp;<strong>scoliosis</strong></li>\n<li>spontaneous pneumothorax</li>\n<li>striae atrophicae in the skin</li>\n</ul>\n<p>Image (a) shows&nbsp;<strong>Walker-Murdoch (wrist) sign</strong>&nbsp;- the&nbsp;ability to join the thumb and fifth finger around the wrist. Image (b) shows&nbsp;<strong>Steinberg (thumb) sign&nbsp;</strong>-&nbsp;thumb tip extends from the palm of the hand in a closed fist&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/821dc3d694c9418d9d345dfe2895a58e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/93ed4d495be0468587568c63c2bfd355x512x354.PNG"
    ]
  },
  {
    "text": "The following conditions are commonly associated with Cushing\u2019s syndrome except",
    "choices": [
      {
        "id": 1,
        "text": "Hypokalemia"
      },
      {
        "id": 2,
        "text": "Hypoglycemia"
      },
      {
        "id": 3,
        "text": "Frank psychosis"
      },
      {
        "id": 4,
        "text": "Hypertension"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Cushing&rsquo;s syndrome leads to <strong>impaired glucose tolerance</strong> and <strong>hyperglycemia</strong>.</p>\n<ul>\n<li>Excess<strong> mineralocorticoid production </strong>may<strong>&nbsp;</strong>lead to<strong> hypertension and hypokalemia</strong></li>\n<li><strong>Frank psychosis </strong>may also be observed in Cushing&rsquo;s syndrome</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a component of MEN2 syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Pituitary adenoma"
      },
      {
        "id": 2,
        "text": "Parathyroid adenoma"
      },
      {
        "id": 3,
        "text": "Medullary thyroid cancer"
      },
      {
        "id": 4,
        "text": "Pheochromocytoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Pituitary adenoma&nbsp;</strong>is not a characteristic feature<strong>&nbsp;</strong>of<strong>&nbsp;</strong>the symptom complex of MEN2 and its variants, but it is&nbsp;observed in <strong>MEN1</strong><strong>&nbsp;syndrome.</strong></p>\n<p><strong>Multiple Endocrine Neoplasia</strong>&nbsp;(MEN) refers to a group of inherited syndromes including various benign and malignant tumors of endocrine glands. There are four types - MEN 1-4. They have an&nbsp;<strong>autosomal dominant</strong>&nbsp;pattern of inheritance and can also be sporadic.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 15 year old girl comes with itchy lesions on her elbows as shown. Her family history is positive for asthma. What could be the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Seborrhoeic dermatitis"
      },
      {
        "id": 2,
        "text": "Atopic dermatitis"
      },
      {
        "id": 3,
        "text": "Allergic contact dermatitis"
      },
      {
        "id": 4,
        "text": "Erysipelas"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This is a case of atopic dermatitis.</p>\n<p><strong>Atopic dermatitis (AD) is the cutaneous expression of the atopic state</strong>, characterised by a family history of asthma, allergic rhinitis or eczema.</p>\n<p>A characteristic defect is impaired epidermal barrier. In many patients a <strong>mutation in gene encoding filaggrin</strong>, a structural protein in the stratum corneum is responsible. The lesions are distributed in the flexural aspects.(as shown in the image).</p>\n<p>Patients may display many immunoregulatory abnormalities, including increased IgE synthesis, increased serum IgE levels, delayed type hypersensitivity reactions.</p>\n<p>Clinical features:</p>\n<ul>\n<li>Pruritus and scratching</li>\n<li>Course marked by exacerbations and remissions</li>\n<li>Lesions typical of eczematous dermatitis</li>\n<li>Personal or family history of atopy (asthma, allergic rhinitis, food allergy, eczema)</li>\n<li>Clinical course more than 6 weeks</li>\n<li>Lichenification of skin</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c0eae6ec4e304011af192c672bcbd000.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Pseudodementia is associated with which of the following conditions",
    "choices": [
      {
        "id": 1,
        "text": "Alzheimer's disease"
      },
      {
        "id": 2,
        "text": "Delirium"
      },
      {
        "id": 3,
        "text": "Mania"
      },
      {
        "id": 4,
        "text": "Depression"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Pseudodementia is a condition characterized by cognitive and functional impairment secondary to <strong>depression.</strong></p>\n<ul>\n<li><strong>Dementia</strong> is defined as a disease process, which is marked by progressive cognitive impairment in clear consciousness. Ex: Dementia in&nbsp;<strong>Alzheimer's disease.</strong></li>\n<li><strong>Pseudodementia</strong> occurs in <strong>depressed</strong> people who complain of impaired memory but, in fact, have a <strong>depressive disorder.</strong></li>\n</ul>\n<p>The following table shows differentiating clinical features between dementia and pseudodementia:</p>\n<table style=\"height: 1177px;\" width=\"551\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 276px;\" valign=\"top\">\n<p><strong>Dementia</strong></p>\n</td>\n<td style=\"height: 46px; width: 269px;\" valign=\"top\">\n<p><strong>Pseudodementia</strong></p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 276px;\" valign=\"top\">\n<p><strong>Clinical Course and History</strong></p>\n</td>\n<td style=\"height: 46px; width: 269px;\" valign=\"top\">\n<p>&nbsp;</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 276px;\" valign=\"top\">\n<p>Onset can be dated only within broad limits</p>\n</td>\n<td style=\"height: 46px; width: 269px;\" valign=\"top\">\n<p>Onset can be dated precisely</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 276px;\" valign=\"top\">\n<p>Long duration and <strong>slow progression</strong> of symptoms</p>\n</td>\n<td style=\"height: 46px; width: 269px;\" valign=\"top\">\n<p>Short duration and rapid progression of symptoms</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 276px;\" valign=\"top\">\n<p>Usually, there is no history of previous psychiatric dysfunction</p>\n</td>\n<td style=\"height: 46px; width: 269px;\" valign=\"top\">\n<p>There is a&nbsp;history of previous psychiatric dysfunction.</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 276px;\" valign=\"top\">\n<p>Family is not aware of the patient's dysfunction and severity</p>\n</td>\n<td style=\"height: 46px; width: 269px;\" valign=\"top\">\n<p>Family is aware of the patient's dysfunction and severity</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 547px;\" colspan=\"2\" valign=\"top\">\n<p><strong>Complaints and clinical behaviour</strong></p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 276px;\" valign=\"top\">\n<p>The patients complain little of cognitive loss, and the complaints are often vague</p>\n</td>\n<td style=\"height: 46px; width: 269px;\" valign=\"top\">\n<p>The patients complain much of cognitive loss, and the complaints are detailed.</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 276px;\" valign=\"top\">\n<div class=\"page\" title=\"Page 35\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Usually labile affect</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"height: 46px; width: 269px;\" valign=\"top\">&nbsp;\n<p><strong>Severe depression</strong> on examination</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 276px;\" valign=\"top\">\n<p>Disability is concealed by the patient</p>\n</td>\n<td style=\"height: 46px; width: 269px;\" valign=\"top\">\n<p>Disability is emphasized by the patient</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 276px;\" valign=\"top\">\n<p>Patient highlights accomplishments</p>\n</td>\n<td style=\"height: 46px; width: 269px;\" valign=\"top\">\n<p>Patient highlights failures</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 276px;\" valign=\"top\">\n<p>They struggle to perform simple tasks and rely on notes or calendars etc.</p>\n</td>\n<td style=\"height: 46px; width: 269px;\" valign=\"top\">\n<div class=\"page\" title=\"Page 734\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>They make little effort to perform even simple tasks</p>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"height: 46px; width: 276px;\" valign=\"top\">\n<p>Social skills are often retained</p>\n</td>\n<td style=\"height: 46px; width: 269px;\" valign=\"top\">\n<p>Loss of social skills often early and prominent</p>\n</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"height: 18px; width: 276px;\" valign=\"top\">Behaviour is compatible with the severity of cognitive dysfunction</td>\n<td style=\"height: 18px; width: 269px;\" valign=\"top\">Behaviour is incongruent with the severity of cognitive dysfunction</td>\n</tr>\n<tr style=\"height: 26.66668701171875px;\">\n<td style=\"height: 26.6667px; width: 276px;\" valign=\"top\">Nocturnal accentuation of dysfunction common</td>\n<td style=\"height: 26.6667px; width: 269px;\" valign=\"top\">Nocturnal accentuation of dysfunction uncommon</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"height: 18px; width: 547px;\" colspan=\"2\" valign=\"top\">\n<p><strong>Clinical Features Related to Memory, Cognitive, and Intellectual Dysfunctions</strong></p>\n</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"height: 18px; width: 276px;\" valign=\"top\">\n<p>Patient makes errors on cognitive examination</p>\n</td>\n<td style=\"height: 18px; width: 269px;\" valign=\"top\">\n<p>&lsquo;Do not know&rsquo; answers are more frequent</p>\n</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"height: 18px; width: 276px;\" valign=\"top\">\n<p>Attention and concentration usually faulty</p>\n</td>\n<td style=\"height: 18px; width: 269px;\" valign=\"top\">Attention and concentration often well preserved</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"height: 18px; width: 276px;\" valign=\"top\">\n<p><strong>Memory loss for recent events</strong> usually more severe than for remote events</p>\n</td>\n<td style=\"height: 18px; width: 269px;\" valign=\"top\">&nbsp;\n<p>Memory loss for recent and remote events usually severe</p>\n</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"height: 18px; width: 276px;\" valign=\"top\">\n<p>Memory gaps for specific periods unusual. <strong>Confabulation</strong> may be present.</p>\n</td>\n<td style=\"height: 18px; width: 269px;\" valign=\"top\">&nbsp;Memory gaps are usually present. Confabulation is rare.</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman is planning a trip to Morocco, which is endemic for yellow fever. As per travel regulations, she receives the yellow fever vaccine. After how many days following vaccination is she eligible to travel?",
    "choices": [
      {
        "id": 1,
        "text": "5"
      },
      {
        "id": 2,
        "text": "10"
      },
      {
        "id": 3,
        "text": "15"
      },
      {
        "id": 4,
        "text": "7"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This woman is eligible to travel to the endemic area <strong>10 days</strong> after being <strong>vaccinated</strong> for <strong>yellow fever</strong>. This period is required for the majority of vaccine recipients to <strong>develop immunity</strong>.</p>\n<p>The&nbsp;<strong>17D vaccine</strong>&nbsp;is a&nbsp;<strong>live attenuated</strong>&nbsp;vaccine, administered <strong>subcutaneously</strong>.&nbsp;&nbsp;It is valid for a&nbsp;<strong>lifetime</strong>&nbsp;beginning 10 days after vaccination.&nbsp; The incubation period of yellow fever is&nbsp;<strong>3&ndash;6 days</strong>. Unvaccinated people are required to remain&nbsp;<strong>quarantined </strong>for<strong> 6 days&nbsp;</strong>(maximum period of incubation).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Fmge Mini Test - 7';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>