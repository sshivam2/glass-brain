<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 11 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A female patient presents with complaints of pain over the anterolateral aspect of thigh after normal vaginal delivery. Which is the nerve injured in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Femoral nerve"
      },
      {
        "id": 2,
        "text": "Lateral cutaneous nerve"
      },
      {
        "id": 3,
        "text": "Obturator nerve"
      },
      {
        "id": 4,
        "text": "Gluteal nerve"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span data-preserver-spaces=\"true\">The given clinical scenario of a patient with symptoms of<strong> pain</strong>\u00a0over the <strong>anterolateral aspect of the thigh</strong> is suggestive of <strong>meralgia paresthetica.</strong> It is due to <strong>compression</strong> neuropathy or neuroma of the <strong>lateral femoral cutaneous</strong> <strong>nerve</strong> of the <strong>thigh</strong>.\u00a0</span></p>\n<p><span data-preserver-spaces=\"true\">The lateral cutaneous nerve of the thigh\u00a0arises from the <strong>posterior divisions</strong> of the ventral rami of L2 and L3, and it supplies the skin of the <strong>anterior</strong> and <strong>lateral surfaces</strong> of the<strong> thigh up to the knee.</strong></span></p>\n<p><span data-preserver-spaces=\"true\">It is prone to injury especially as it leaves the pelvis deep to the inguinal ligament just medial to the anterior superior iliac spine.\u00a0</span>The angulation of the nerve <strong>as it crosses the iliac crest</strong> makes it vulnerable to compression during hip extension which may increase angulation and tension on the nerve. This leads to impaired sensation, pain and paraesthesia on the anterolateral aspect of thigh, in the distal end of the cutaneous distribution of this nerve. The symptoms don't cross the midline, nor extend below knee or behind hamstrings laterally</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/953656d28b6f4070bf7fdc199d55efb2x1280x1540.JPEG"
    ]
  },
  {
    "text": "In the cardiac muscle, the inhibition of Na+K+ATPase results in __?",
    "choices": [
      {
        "id": 1,
        "text": "Hyperpolarisation and then Depolarisation"
      },
      {
        "id": 2,
        "text": "Depolarisation"
      },
      {
        "id": 3,
        "text": "Hyperpolarisation"
      },
      {
        "id": 4,
        "text": "Repolarisation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>inhibition of Na+K+-ATPase</strong> results in <strong>depolarisation</strong>.</p>\n<p>An energy (ATP)-dependent pump system (Na+/K+-ATPase), is located on the sarcolemma, which pumps Na+ out and K+ into the cell.The Na+/K+-ATPase pump is electrogenic because it <strong>extrudes three Na+</strong> for <strong>every two K+ entering the cell</strong>. By pumping more positive charges out of the cell than into it, the pump <strong>creates a</strong> <strong>negative potential</strong> within the cell. This electrogenic potential may be up to &minus;10 mV.</p>\n<p>If this <strong>pump&nbsp;stops working</strong> (such as when ATP is lost under hypoxic conditions), or if the activity of the pump is inhibited by cardiac glycosides such as digoxin, Na+ accumulates within the cell and intracellular K+ falls,resulting in a <strong>less negative (more depolarized)</strong> resting membrane potential.</p>\n<p>Inhibition of this pump, therefore, causes <strong>depolarization</strong> resulting from changes in Na+ and K+ concentration gradients and from the loss of an electrogenic component of the membrane potential.</p>\n<p>Action potential of myocardium:</p>\n<ul>\n<li><strong>Phase 0:&nbsp;</strong><strong>Depolarisation: </strong>Influx of Na+ into myocyte.</li>\n<li><strong>Phase 1:&nbsp;Early repolarization: </strong>Efflux of&nbsp;K+ from myocyte.</li>\n<li><strong>Phase 2:&nbsp;</strong><strong>Plateau:&nbsp;</strong>Ca2+ enters myocardial cells via voltage regulated L-type Ca2+ channels.</li>\n<li><strong>Phase 3: Repolarisation:&nbsp;</strong>Efflux of K+.</li>\n<li><strong>Phase 4: Restoration of RMP:&nbsp;</strong>Restoration of Na+ and K+ by Na-K ATPase.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8131866d467043559cf746a65cd83fd8x800x600.GIF"
    ]
  },
  {
    "text": "Match the following with their rate-limiting enzymes:",
    "choices": [
      {
        "id": 1,
        "text": "1-e, 2-a, 3-b, 4-c"
      },
      {
        "id": 2,
        "text": "1-c, 2-a, 3-b, 4-e"
      },
      {
        "id": 3,
        "text": "1-c, 2-e, 3-a, 4-b"
      },
      {
        "id": 4,
        "text": "1-d, 2-b, 3-a, 4-e"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Correct option is 1-c, 2-a, 3-b, 4-e.</p>\n<table style=\"height: 88px;\" width=\"603\">\n<tbody>\n<tr>\n<td style=\"width: 293.5px;\">Heme synthesis</td>\n<td style=\"width: 293.5px;\">ALA synthase</td>\n</tr>\n<tr>\n<td style=\"width: 293.5px;\">Cholesterol synthesis</td>\n<td style=\"width: 293.5px;\">HMG CoA reductase</td>\n</tr>\n<tr>\n<td style=\"width: 293.5px;\">Glycolysis</td>\n<td style=\"width: 293.5px;\">Phosphofructokinase</td>\n</tr>\n<tr>\n<td style=\"width: 293.5px;\">Niacin syntheses</td>\n<td style=\"width: 293.5px;\">Quinolinate phosphoribosyl transferase</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Heme</strong> is synthesized in the normoblasts except matures erythrocytes. Heme synthesis is partly mitochondrial and partly cytoplasmic. It starts with the condensation of succinyl CoA and glycine by <strong>ALA synthase</strong> in the presence of <strong>pyridoxal phosphate</strong> to form <strong>delta-aminolevulinic acid</strong> (ALA). ALA synthase is the <strong>rate-limiting enzyme</strong> and is located in <strong>mitochondria</strong>.\u00a0</p>\n<p>All nucleated cells including the arterial wall can <strong>synthesize cholestero</strong>l and the liver, adrenal cortex, testis, ovaries, and intestines are the major sites of cholesterol synthesis. It occurs partly in the endoplasmic reticulum and cytoplasm. it starts with the condensation of two molecules of acetyl CoA to form acetoacetyl CoA synthase.\u00a0</p>\n<p>The reduction of HMG CoA to mevalonate catalyzed by <strong>HMG CoA reductase</strong> is the <strong>rate-limiting step</strong>. it is the<strong> rate-limiting enzyme</strong> and is located in the <strong>endoplasmic reticulum</strong>.\u00a0</p>\n<p><strong>Statin</strong> group of drugs like lovastatin are <strong>competitive inhibitors of HMG CoA reductase</strong> and can be used in clinical practice to reduce cholesterol levels in the blood.\u00a0</p>\n<p><strong>Glycolysis</strong> converts glucose to pyruvate (aerobic condition) or lactate (anaerobic condition) with the production of a small quantity of energy. It takes place in all cells of the body.\u00a0<strong>Phosphofructokinase</strong> is the <strong>rate-limiting enzyme</strong> that converts fructose-6-phosphate to fructose-1-6-bisphosphate.</p>\n<p>The rate-limiting enzyme of synthesis of <strong>niacin from tryptophan</strong> is <strong>quinolinate phosphoribosyltransferase</strong>. It converts niacin or nicotinic acid to nicotinate mononucelotide.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with ascites and edema. On examination, JVP was elevated. Gross examination finding of the tissue biopsy is shown. What is the most likely cause of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "A-V congestion"
      },
      {
        "id": 2,
        "text": "Cirrhosis"
      },
      {
        "id": 3,
        "text": "HBV infection"
      },
      {
        "id": 4,
        "text": "Carcinoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical vignette of<strong> ascites, and edema </strong>with<strong> elevated JVP </strong>points towards<strong>\u00a0congestive hepatopathy.</strong> The image shows a <strong>nutmeg liver</strong> and <strong>chronic passive congestion</strong> of the liver.\u00a0it\u00a0usually occurs due to <strong>congestive</strong> <strong>heart</strong> <strong>failure.</strong></p>\n<p>Pathogenesis<strong>:</strong></p>\n<ul>\n<li>It is seen in patients with chronic cardiac lesions, especially those affecting the right heart (e.g., <strong>right-sided heart failure</strong>), which causes the blood to be damped back into the inferior vena cava and then into the hepatic veins.</li>\n<li>This leads to increased pressure in the sublobular branches of the hepatic veins, which causes an engorgement of venous blood.</li>\n</ul>\n<p>Gross appearance<strong>:</strong></p>\n<ul>\n<li>In chronic passive hepatic congestion due to heart failure, the <strong>centrilobular regions</strong> are <strong>grossly red-brown </strong>due to congestion and <strong>slightly depressed</strong> (because of cell death) and are accentuated against the <strong>surrounding zones </strong>of<strong> uncongested tan liver</strong> (nutmeg liver).</li>\n<li>The appearance is called the nutmeg liver pattern due to its close resemblance with the cut surface of the nutmeg seed.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d01d4025cab74e28bfdc0a8cf036f652.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a983344e8e17453ea0bc448e2f4aacfbx600x386.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/28429b0280d24d37856714e10193707ax481x322.PNG"
    ]
  },
  {
    "text": "A patient was infected by Bacillus anthracis. Under which of the following bioterrorism categories does this organism fall into:",
    "choices": [
      {
        "id": 1,
        "text": "Category A"
      },
      {
        "id": 2,
        "text": "Category B"
      },
      {
        "id": 3,
        "text": "Category C"
      },
      {
        "id": 4,
        "text": "Category D"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Bacillus anthracis</strong>\u00a0which causes anthrax is categorized under\u00a0<strong>category A</strong>\u00a0<strong>bioterrorism\u00a0agent.</strong></p>\n<p><strong>Bioterrorism</strong>\u00a0is the deliberate\u00a0release of an agent by attackers\u00a0that causes one or\u00a0more of a variety of different diseases. The agents of bioterrorism are classified into 3 categories:</p>\n<ul>\n<li><strong>Category A</strong>\u00a0bioterrorism agents are those which are\u00a0<strong>easily transmitted</strong>\u00a0from one person to the other and are associated with\u00a0<strong>high mortality</strong>\u00a0rates and thus have the potential to cause major public health impacts. Examples include\u00a0<em><strong>Bacillus anthracis, Clostridium botulinum,</strong></em>\u00a0and\u00a0<em><strong>Yersinia pestis</strong>.</em></li>\n<li><strong>Category B</strong>\u00a0bioterrorism agents are those which are moderately easy to disseminate and are associated with\u00a0<strong>moderate morbidity</strong>\u00a0and\u00a0<strong>low mortality rates</strong>. Examples include\u00a0<em><strong>Coxiella burnetti</strong></em>\u00a0and<em><strong>\u00a0Brucella</strong>.</em></li>\n<li><strong>Category C\u00a0</strong>bioterrorism agents are those which are emerging pathogens that could be engineered for mass dissemination in the future due to ease of availability, high mortality and morbidity rates, and ease of production and dissemination. Examples include\u00a0<em><strong>Nipah</strong></em>\u00a0and <em><strong>Hanta viruses</strong></em>.\u00a0</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with a history of multiple episodes of vomiting. He was given an intravenous drug, and later, he developed abnormal movements. Which of the following can be used to treat him?",
    "choices": [
      {
        "id": 1,
        "text": "Hyoscine"
      },
      {
        "id": 2,
        "text": "Cyproheptadine"
      },
      {
        "id": 3,
        "text": "Levodopa"
      },
      {
        "id": 4,
        "text": "Benzhexol"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The development of abnormal movements following an anti-emetic injection suggests that the antiemetic used in this case is probably <strong>metoclopramide</strong>. <strong>Benzhexol </strong>should be used in the management of this patient.\u00a0</p>\n<p>Metoclopramide is a <strong>dopamine receptor antagonist</strong> used as a prokinetic and anti-emetic agent. It can produce <strong>extrapyramidal side effects</strong> and <strong>dystonia</strong> is seen acutely following intravenous injections. <strong>Anticholinergics </strong>like<strong> benzhexol (trihexyphenidyl)</strong> are used in the management of these side effects. Benzhexol is a\u00a0<strong>centrally-acting</strong> anticholinergic\u00a0agent. It acts by restoring the cholinergic balance in the striatal interneurons.</p>\n<p><strong>Acute dystonia </strong>is a movement disorder characterized by <strong>sudden, involuntary, and sustained muscle contractions</strong>, often leading to abnormal postures or repetitive movements.\u00a0 It occurs after intravenous administration, while <strong>Parkinsonian-like symptoms</strong> develop weeks after therapy. It is managed with the discontinuation of metoclopramide and with <strong>anticholinergics</strong> or <strong>antihistaminics</strong>. Irreversible tardive dyskinesia can occur with chronic treatment.</p>\n<p>Other adverse effects:</p>\n<p>It can cause <strong>galactorrhea</strong> by its dopamine antagonism. Methemoglobinemia can occur if used in infants.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Hyoscine</strong> (scopolamine) is a muscarinic receptor antagonist used in the management of <strong>motion sickness</strong> and vomiting.</p>\n<p>Option B: <strong>Cyproheptadine</strong> is an H1 receptor antagonist used in the management of various allergy-related conditions like allergic rhinitis, anaphylaxis, urticaria, etc.</p>\n<p>Option C: <strong>Levodopa</strong> is the precursor of dopamine and it is given in combination with carbidopa for the management of <strong>parkinsonism.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A male was brought with the following injury in a gunshot incident. What is the possible range from which the weapon inflicted injury?",
    "choices": [
      {
        "id": 1,
        "text": "Contact shot"
      },
      {
        "id": 2,
        "text": "Close shot"
      },
      {
        "id": 3,
        "text": "Near shot"
      },
      {
        "id": 4,
        "text": "Distant shot"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><span data-preserver-spaces=\"true\">In the given scenario, based on the <strong>stellate-shaped</strong> wound seen, it seems to be a\u00a0</span><strong><span data-preserver-spaces=\"true\">contact shot</span></strong><span data-preserver-spaces=\"true\">\u00a0entry wound.</span></p>\n<p><span data-preserver-spaces=\"true\">A contact shot entry wound on the skull typically has a stellate shape due to high-energy impact.\u00a0</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Firearm wounds are fundamental of two main types: <strong>wounds of entry</strong> and <strong>wounds of exit</strong>. The wound of entry is the wound through which the bullet or pellets enter the body, and the wound of exit is the wound through which the bullet emerges out of the body.</span></li>\n<li><span data-preserver-spaces=\"true\">To determine the range of firing, the following parameters are used:</span></li>\n<ul>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">The entry wound <strong>size and shape</strong></span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\"><strong>Blast effect:</strong>\u00a0Muzzle end imprint and edge eversion</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Blackening, tattooing, singeing of hair, abrasion collar, and grease collar</span></li>\n<li class=\"ql-indent-1\">Hair should be preserved to determine the range of firing which can be examined for carbonization/desiccation<span data-preserver-spaces=\"true\"> at close range, and also from lead deposition around the wound to assess the range of firing.</span></li>\n</ul>\n</ul>\n<table style=\"width: 578.8px;\">\n<tbody>\n<tr>\n<td style=\"width: 134px;\"><strong>Characteristics</strong></td>\n<td style=\"width: 128px;\"><strong>Contact shot</strong></td>\n<td style=\"width: 83px;\"><strong>Close Shot</strong></td>\n<td style=\"width: 78px;\"><strong>Near Shot</strong></td>\n<td style=\"width: 123.8px;\"><strong>Distant Shot</strong></td>\n</tr>\n<tr>\n<td style=\"width: 134px;\">Range\u00a0</td>\n<td style=\"width: 128px;\">In-touch with skin</td>\n<td style=\"width: 83px;\">2.5-7.5 cm</td>\n<td style=\"width: 78px;\">30-60 cm</td>\n<td style=\"width: 123.8px;\">&gt;60 cm</td>\n</tr>\n<tr>\n<td style=\"width: 134px;\">Size</td>\n<td style=\"width: 128px;\">Largest size</td>\n<td style=\"width: 83px;\">Bullet size</td>\n<td style=\"width: 78px;\">Smaller</td>\n<td style=\"width: 123.8px;\">Smallest</td>\n</tr>\n<tr>\n<td style=\"width: 134px;\">Shape</td>\n<td style=\"width: 128px;\">Stellate</td>\n<td style=\"width: 83px;\">Circular</td>\n<td style=\"width: 78px;\">Circular</td>\n<td style=\"width: 123.8px;\">Circular</td>\n</tr>\n<tr>\n<td style=\"width: 134px;\">Blast effect</td>\n</tr>\n<tr>\n<td style=\"width: 134px;\">Muzzle end imprint</td>\n<td style=\"width: 128px;\">+ve</td>\n<td style=\"width: 83px;\">-ve</td>\n<td style=\"width: 78px;\">-ve</td>\n<td style=\"width: 123.8px;\">-ve</td>\n</tr>\n<tr>\n<td style=\"width: 134px;\">Edge eversion</td>\n<td style=\"width: 128px;\">+ve</td>\n<td style=\"width: 83px;\">-ve</td>\n<td style=\"width: 78px;\">-ve</td>\n<td style=\"width: 123.8px;\">-ve</td>\n</tr>\n<tr>\n<td style=\"width: 134px;\"><strong>Other findings</strong></td>\n</tr>\n<tr>\n<td style=\"width: 134px;\">Blackening</td>\n<td style=\"width: 128px;\">-ve</td>\n<td style=\"width: 83px;\">+ve</td>\n<td style=\"width: 78px;\">-ve</td>\n<td style=\"width: 123.8px;\">-ve</td>\n</tr>\n<tr>\n<td style=\"width: 134px;\">Tattooing</td>\n<td style=\"width: 128px;\">-ve</td>\n<td style=\"width: 83px;\">+ve</td>\n<td style=\"width: 78px;\">+ve</td>\n<td style=\"width: 123.8px;\">-ve</td>\n</tr>\n<tr>\n<td style=\"width: 134px;\">Singeing</td>\n<td style=\"width: 128px;\">-ve</td>\n<td style=\"width: 83px;\">+ve</td>\n<td style=\"width: 78px;\">-ve</td>\n<td style=\"width: 123.8px;\">-ve</td>\n</tr>\n<tr>\n<td style=\"width: 134px;\">Abrasion collar</td>\n<td style=\"width: 128px;\">-ve</td>\n<td style=\"width: 83px;\">+ve</td>\n<td style=\"width: 78px;\">+ve</td>\n<td style=\"width: 123.8px;\">+ve</td>\n</tr>\n<tr>\n<td style=\"width: 134px;\">Grease collar</td>\n<td style=\"width: 128px;\">-ve</td>\n<td style=\"width: 83px;\">+ve</td>\n<td style=\"width: 78px;\">+ve</td>\n<td style=\"width: 123.8px;\">+ve</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4e265449c771479dbdd05f8559524204.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 12-year-old boy with recurrent attacks of tonsillitis and speech difficulties was posted for a tonsillectomy procedure. Which of the following position is used in this surgery?",
    "choices": [
      {
        "id": 1,
        "text": "Sniffing position"
      },
      {
        "id": 2,
        "text": "Semi Fowler\u2019s position"
      },
      {
        "id": 3,
        "text": "Reverse Trendelenburg position"
      },
      {
        "id": 4,
        "text": "Rose position"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Rose position</strong>&nbsp;is used in tonsillectomy surgery.&nbsp;</p>\n<p>In Rose's position, the patient is&nbsp;<strong>supine</strong>, with their&nbsp;<strong>head extended.</strong>&nbsp;A&nbsp;<strong>rubber ring</strong>&nbsp;is placed under the&nbsp;<strong>head</strong>&nbsp;to stabilize it and a&nbsp;<strong>pillow</strong>&nbsp;is placed under the&nbsp;shoulders<strong>&nbsp;to extend the head.&nbsp;</strong>Rose's position is also used in<strong>&nbsp;adenoidectomy&nbsp;</strong>and<strong>&nbsp;tracheostomy.</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d587d8c5059a410cac1998ddcc876179x1280x1210.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/421260be9c4146de8a7751f28e5131fbx720x700.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a9978ae3c5c14271b58923953c4f84fdx1280x986.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4347db97f57444059ae7e3fd791f5f23x1280x1074.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/34e4d7b2f30e444fa253f7c4ed54f61fx600x2602.JPEG"
    ]
  },
  {
    "text": "A hypertensive patient comes to the OPD with complaints of visual disturbances. On fundoscopy, multiple flame-shaped hemorrhages , cotton wool spots, and disc edema were found. What is the grade of hypertensive retinopathy in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Grade I"
      },
      {
        "id": 2,
        "text": "Grade II"
      },
      {
        "id": 3,
        "text": "Grade III"
      },
      {
        "id": 4,
        "text": "Grade IV"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Cotton wool\u00a0</strong>spots and flame shaped hemorrage with disc edema is seen in grade IV of hypertensive retinopathy.\u00a0</p>\n<p><strong>Grading of hypertensive retinopathy:</strong></p>\n<ul>\n<li>Grade 1: Mild generalized retinal arteriolar <strong>narrowing</strong>\u00a0</li>\n<li>Grade 2: Focal arteriolar narrowing and arteriovenous <strong>nipping</strong>.</li>\n<li>Grade 3: Grade 2 plus retinal hemorrhages (dot, blot, flame) or exudates (chronic retinal edema may result in the deposition of hard exudates around the fovea as a \u2018<strong>macular star</strong>\u2019 and cotton wool spots; may also be associated with banking of veins distal to arteriovenous crossings <strong>(Bonnet sign)</strong>, tapering of veins on either side of the crossings <strong>(Gunn sign); copper-wire appearance; </strong>more prominent arteriovenous compression.<strong><br /></strong></li>\n<li>Grade 4: Severe grade 3 plus<strong> optic disc swelling</strong> (a marker of malignant hypertension) and\u00a0<strong>silver-wiring</strong> of arterioles.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/62563135004e40b7b0e0436d9f467688x1200x2876.JPEG"
    ]
  },
  {
    "text": "In a 10-year-old school child, which of the following vaccines is given as a part of the immunization programme?",
    "choices": [
      {
        "id": 1,
        "text": "BCG"
      },
      {
        "id": 2,
        "text": "MMR"
      },
      {
        "id": 3,
        "text": "TT/Td"
      },
      {
        "id": 4,
        "text": "DPT"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given scenario, a ten-year-old schoolchild will be administered the <strong>TT/Td vaccine</strong> according to the National Immunization Schedule.</p>\n<p>The Tetanus and adult diphtheria (Td) vaccine is a combination of tetanus and diphtheria with a lower concentration of diphtheria antigen (d) as recommended for older children and adults. The MoHFW recommends the replacement of TT vaccine with Td vaccine for all age groups, including pregnant women. A dose of 0.5ml is administered in the intramuscular route in the upper arm.</p>\n<p>Scheduled to be administered at <strong>10 and 16 years of age</strong>.</p>\n<p>For pregnant women :</p>\n<ul>\n<li>Td-1: early in pregnancy</li>\n<li>Td-2: 4 weeks after Td-1</li>\n<li>Td (Booster): if pregnancy occurs within 3 years of last pregnancy and 2 Td doses were received.</li>\n</ul>\n<p>Other options:</p>\n<p>Option A - According to the National Immunization Schedule,&nbsp;<strong>BCG</strong>&nbsp;should be given at&nbsp;<strong>birth</strong>&nbsp;or as early as possible&nbsp;up to<strong>&nbsp;1 year of age</strong>. It&nbsp;provides&nbsp;<strong>protection against CNS and disseminated TB. </strong>A dose of<strong>&nbsp;</strong>0.1 ml is administered&nbsp;intradermally&nbsp;in the left upper arm.</p>\n<p>Option B -&nbsp;Measles/MR is given at 9 completed months (1st dose) and a second dose is given at 16-24 months.&nbsp;<strong>Measles</strong>&nbsp;can be given&nbsp;till <strong>5 years</strong>&nbsp;of age. A dose of 0.5ml is administered subcutaneously in the right upper arm.</p>\n<p>Option D -&nbsp;<strong>DPT</strong>&nbsp;vaccine is administered as a part of the pentavalent vaccine at the 6th, 10th and 14th weeks of life. DPT booster doses are administered at 16-24 months (first booster) and 5-6 years (second booster). It can be administered&nbsp;until <strong>7 years</strong>&nbsp;of age (with booster doses). A dose of 0.5ml is administered in the anterolateral aspect of the mid-thigh. The 2nd booster dose can be administered in the upper arm.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is an example of disability limitation?",
    "choices": [
      {
        "id": 1,
        "text": "Prescribing spectacles for refractive error"
      },
      {
        "id": 2,
        "text": "Starting a patient on anti-tuberculous therapy"
      },
      {
        "id": 3,
        "text": "Abstinence from  smoking"
      },
      {
        "id": 4,
        "text": "Early fixation of fractures"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Prescribing spectacles</strong> for refractive error is an example of <strong>disability limitation </strong>which is a component of <strong>tertiary prevention</strong>. This mode of intervention is applicable when the patient presents late in the pathogenesis phase.&nbsp;</p>\n<p>The objective of this intervention is to<strong> prevent</strong> or halt the transition of the disease process from <strong>impairment</strong> <strong>to</strong> <strong>handicap</strong>.</p>\n<p>Option B: Starting a patient on <strong>anti-tuberculous therapy</strong> is <strong>secondary </strong>prevention as it is a part of treatment.</p>\n<p>Option C: <strong>Abstinence</strong> from <strong>smoking</strong> is a modification of the risk factor. Hence it is an example of <strong>primary </strong>prevention.</p>\n<p>Option D: <strong>Early fixation</strong> of <strong>fractures</strong> will prevent disability.&nbsp;Hence, it is an example of <strong>secondary</strong> prevention.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Chemical waste is disposed in _____ bags.",
    "choices": [
      {
        "id": 1,
        "text": "Yellow"
      },
      {
        "id": 2,
        "text": "White"
      },
      {
        "id": 3,
        "text": "Red"
      },
      {
        "id": 4,
        "text": "Green"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Chemical</strong> <strong>waste</strong> is disposed of in <strong>yellow-colored</strong>\u00a0containers or non-chlorinated plastic bags.</p>\n<p>It is later treated by:</p>\n<ul>\n<li>Incineration - A technique using high temperatures and dry oxidation</li>\n<li>Plasma pyrolysis - A technique that uses the heat generated by the plasma to dispose of the waste</li>\n<li>Encapsulation\u00a0- Packing and sealing the waste in containers made of impervious and non-reactive material</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drugs do not reduce mortality in a patient with heart failure?",
    "choices": [
      {
        "id": 1,
        "text": "Metoprolol"
      },
      {
        "id": 2,
        "text": "Furosemide"
      },
      {
        "id": 3,
        "text": "Spironolactone"
      },
      {
        "id": 4,
        "text": "Telmisartan"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The drug that does not reduce mortality in a patient with heart failure is <strong>furosemide</strong>.</p>\n<p>The drugs which reduce mortality in patients with heart failure are :</p>\n<ul>\n<li><strong>ACE inhibitors</strong></li>\n<li>Angiotensin receptor blockers (ARBs)</li>\n<li>Angiotensin receptor neprilysin inhibitor (ARNI)</li>\n<li><strong>Beta-blockers</strong></li>\n<li>Mineralocorticoid receptor antagonists\n<ul>\n<li><strong>Spironolactone</strong></li>\n<li>Eplerenone</li>\n</ul>\n</li>\n<li>Hydralazine + isosorbide dinitrate.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old woman presents with amenorrhea, headache,  vomiting, loss of libido, and galactorrhea from 3 months. On examination, her vitals are within range but her eye examination shows bitemporal hemianopia. Which of the following drug is preferred in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Thyroxine"
      },
      {
        "id": 2,
        "text": "Estradiol"
      },
      {
        "id": 3,
        "text": "Cabergoline"
      },
      {
        "id": 4,
        "text": "Somatostatin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical vignette is suggestive of <strong>prolactinoma of the pituitary</strong><strong>.\u00a0</strong>Among the given options, <strong>cabergoline</strong> is the <strong>preferred drug </strong>for this patient.</p>\n<p><strong>Prolactinoma:\u00a0</strong>Prolactin-secreting lactotroph adenomas are the most frequent type of <strong>hyperfunctioning pituitary adenomas</strong>. The symptoms include</p>\n<ul>\n<li>Headache and vomiting</li>\n<li>Bitemporal hemianopia suggestive of a local mass effect</li>\n<li>Increased intracranial pressure due to a pituitary tumor</li>\n<li>In females-\u00a0amenorrhea, galactorrhea, loss of libido, and infertility</li>\n<li>In males-\u00a0impotence, loss of libido, and gynecomastia</li>\n</ul>\n<p>The diagnosis of prolactinoma is most likely to be associated with a <strong>prolactin level &gt;200 \u03bcg/L</strong>.</p>\n<p>Treatment is only required in symptomatic cases as microadenomas rarely progress to macroadenomas. The mainstay of treatment is medical management.\u00a0Dopamine and dopamine agonists are used and they act as inhibitory signals to prolactin secretion in the pituitary.\u00a0</p>\n<p><strong>Cabergoline </strong>is a\u00a0<strong>long-acting</strong>\u00a0dopamine receptor agonist with high <strong>D<sub>2</sub>\u00a0receptor</strong> affinity and is the preferred drug for the treatment of hyperprolactinemia because of its greater efficacy and lower side effects.\u00a0It effectively suppresses prolactin secretion for &gt;14 days after a single oral dose.\u00a0At higher doses, it is used in some patients with\u00a0<strong>acromegaly</strong>, alone or along with somatostatin analogs.</p>\n<p>Another drug used in prolactinoma is <strong>bromocriptine</strong>.\u00a0It<strong>\u00a0</strong>is shorter-acting when compared with cabergoline. The adverse effects of bromocriptine include hypotension and nausea.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old woman presented with fever, cough, dyspnea, arthralgia, and a painful rash on the lower limbs suggestive of erythema nodosum. A chest X-ray was taken and the findings are shown in the image below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Lobar pneumonia"
      },
      {
        "id": 2,
        "text": "Sarcoidosis"
      },
      {
        "id": 3,
        "text": "Miliary tuberculosis"
      },
      {
        "id": 4,
        "text": "Metastatic lung cancer"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The chest X-ray showing <strong>bilateral hilar lymphadenopathy</strong>, together with the presence of <strong>erythema nodosum</strong>, suggests the diagnosis of\u00a0<strong>sarcoidosis</strong>.</p>\n<p><strong>Sarcoidosis</strong> is a granulomatous disorder of unknown etiology that is characterized by the presence of non-caseating granulomas.</p>\n<p>In acute cases, patients may typically present with\u00a0<strong>Lofgren\u2019s</strong> <strong>syndrome</strong>, consisting of<strong> arthritis, erythema nodosum</strong>\u00a0(as shown below),<strong>\u00a0</strong>uveitis,<strong>\u00a0bilateral hilar lymphadenopathy,\u00a0</strong>lethargy, and occasional fever. Patients may also present with insidious onset of cough, exertional breathlessness, and radiographic infiltrates.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/32839757fa894c7587e96d4012d468ec.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8b098e52e20b45e08292af0d4c50459ax600x458.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/94fbca659bc449d8a82c3de283776d77x1280x1262.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5d60129932c443e78c3360339a02370fx754x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1a07af5588274dff81e1b840fe2376f8x653x599.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7b1b994175e147e697d028bc166b5ea6x512x496.PNG"
    ]
  },
  {
    "text": "A 28-year-old man with a history of diarrhea and abdominal pain since 6 months comes to the clinic with worsening abdominal pain. Endoscopy is performed. All of the following endoscopic findings are associated with the condition shown in the image below except:",
    "choices": [
      {
        "id": 1,
        "text": "Aphthous ulcer"
      },
      {
        "id": 2,
        "text": "Longitudinal ulcers"
      },
      {
        "id": 3,
        "text": "Fine granular mucosa"
      },
      {
        "id": 4,
        "text": "Stricture"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The endoscopic image showing\u00a0<strong>cobblestone appearance</strong>\u00a0along with the clinical scenario is suggestive of\u00a0<strong>Crohn's disease</strong>. <strong>Fine granular mucosa</strong> is seen in <strong>ulcerative colitis</strong>.</p>\n<p>Endoscopic findings in Crohn's disease include:</p>\n<ul>\n<li>Aphthous ulcers- Small, shallow ulcers surrounded by erythema</li>\n<li>Longitudinal ulcers- Linear or serpiginous deep ulcers\u00a0</li>\n<li>Cobblestone appearance- Deep, longitudinal ulcerations interlaced with intervening normal mucosa</li>\n<li>Strictures\u00a0</li>\n<li>Fistulas.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cc55ac2bda98498a83057db8dee6c6cf.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient presented with the following finding after accidentally spilling hydrofluoric acid over his hand. What is the preferred initial treatment for his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Local wound care only"
      },
      {
        "id": 2,
        "text": "Injection of sodium bicarbonate"
      },
      {
        "id": 3,
        "text": "Split skin grafts"
      },
      {
        "id": 4,
        "text": "Application of calcium carbonate gel"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The initial treatment of <strong>hydrofluoric acid</strong> skin <strong>burns</strong> is with the\u00a0application of<strong> calcium carbonate gel</strong>.</p>\n<p>Immediate first aid to help prevent severe injuries from a chemical burn include:</p>\n<ul>\n<li>Carefully <strong>remove</strong> the <strong>chemical</strong> and any <strong>contaminated clothing</strong>\n<ul>\n<li>Remove the chemical and contaminated clothing from contact with the skin and eyes</li>\n<li>Do not wipe the skin as this may spread contamination</li>\n<li>If the chemical is dry, brush it off the skin</li>\n<li>Use gloves or other protective materials to cover hands and, if possible, carefully cut away clothing such as T-shirts, rather than pulling them off over the head</li>\n</ul>\n</li>\n<li><strong>Rinse the affected area</strong> using as much <strong>clean water</strong> as possible\n<ul>\n<li>Rinse the affected area continuously with clean water as soon as possible</li>\n<li>Try to make sure the water can run off the affected area without pooling on the skin</li>\n<li>Only use water\u2013 do not rub or wipe the area</li>\n</ul>\n</li>\n</ul>\n<p>In very few cases initial management by<strong> lavage with water is not useful</strong>. Ex: <strong>Phosphorous</strong> used in some military devices and <strong>elemental sodium</strong> seen in laboratory explosions.</p>\n<p>In hydrofluoric acid burns, initially, calcium gluconate gel is applied topically.\u00a0<strong>Severe burns</strong> or<strong> burns to large areas </strong>of the hand can be subsequently treated with <strong>Bier\u2019s blocks containing calcium gluconate 10 % gel. </strong>If the burn is with a concentration of greater than 50 %, then <strong>acute early excision </strong>is indicated due to the chance of hypocalcemia and arrhythmias. <strong>Split skin graft application</strong>\u00a0to a hydrofluoric acid wound should be<strong> delayed</strong> and must not be done initially.\u00a0<br /><br />Note - Although topical calcium gluconate is usually preferred, topical <strong>calcium carbonate</strong> gels may also be<strong> used </strong>for treating burns as they are also effective in providing calcium ions to complex the\u00a0 free fluoride ions to prevent further toxicity.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f2bc41441f8f422ea1a8efd1102ee0da.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "What nutrient deficiency is commonly associated with delayed wound healing following minor surgery?",
    "choices": [
      {
        "id": 1,
        "text": "Zinc"
      },
      {
        "id": 2,
        "text": "Magnesium"
      },
      {
        "id": 3,
        "text": "Niacin"
      },
      {
        "id": 4,
        "text": "Vitamin C"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Delayed wound healing after minor surgery can be attributed to a deficiency in <strong>v</strong><strong>itamin C</strong>.</p>\n<p>Vitamin C, also known as ascorbic acid, plays a crucial role in collagen synthesis, a protein that is essential for wound healing and tissue repair. <strong>C</strong><strong>ollagen</strong> provides structural support to the skin, blood vessels, and other connective tissues. A deficiency in <strong>v</strong><strong>itamin C</strong> can lead to impaired collagen formation, weakening of blood vessels, and delayed wound healing.</p>\n<p>Factors influencing healing:</p>\n<ul>\n<li><strong>Infection:</strong>\u00a0one of the most important causes of delay in healing; prolongs inflammation; increases the local tissue injury</li>\n<li><strong>Diabetes:\u00a0</strong>most important systemic cause of abnormal wound healing</li>\n<li><strong>Nutritional status:\u00a0</strong>protein deficiency and vitamin C deficiency inhibit collagen synthesis and retard healing.</li>\n<li><strong>Glucocorticoids (steroids):</strong>\u00a0anti-inflammatory effects; results in weakness of the scar due to inhibition of TGF-\u03b2 production and diminished fibrosis</li>\n<li><strong>Mechanical factors:\u00a0</strong>such as\u00a0increased local pressure or torsion; may cause wounds to pull apart or dehisce</li>\n<li><strong>Poor perfusion:\u00a0</strong>due to arteriosclerosis, diabetes, or obstructed venous drainage; also impairs healing</li>\n<li><strong>Foreign bodies:\u00a0</strong>such as fragments of steel, glass, or even bone; impede healing</li>\n<li><strong>Type and extent of tissue injury:\u00a0</strong>affect subsequent repair;</li>\n<li><strong>Location of the injury\u00a0</strong>and the\u00a0<strong>character</strong>\u00a0of the injured<strong>\u00a0tissue:</strong>\u00a0also important</li>\n</ul>\n<p>Even though zinc also causes poor wound healing, Vitamin C is more commonly implicated.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a contraindication for breast conservative surgery?",
    "choices": [
      {
        "id": 1,
        "text": "Tumor size < 4cm, with N1 axillary metastasis"
      },
      {
        "id": 2,
        "text": "Tumor more than the size of the breast"
      },
      {
        "id": 3,
        "text": "Prior chest irradiation"
      },
      {
        "id": 4,
        "text": "Multifocal tumors"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Tumor size &lt; 4cm, with N1 axillary metastasis</strong> is not a contraindication for breast conservative surgery.</p>\n<p><strong>Breast conservative therapy </strong>(BCT) involves resection of primary breast cancer with adequate normal breast tissue, adjuvant radiotherapy, and assessment of regional lymph nodes via a separate incision in the axilla. Removal of primary breast cancer is also called lumpectomy/ tylectomy/ partial mastectomy/ wide local excision.</p>\n<p><strong>Absolute contraindications of BCT:</strong></p>\n<ul>\n<li>Pregnancy</li>\n<li>Persistently positive margin (2 microscopy shows positive margins)</li>\n<li>Multicentric lumps</li>\n<li>Diffuse microcalcification</li>\n<li class=\"half_rhythm\">\n<div>Extensive ductal carcinoma in situ (DCIS)</div>\n</li>\n<li class=\"half_rhythm\">\n<div>Inflammatory breast cancer</div>\n</li>\n</ul>\n<p><strong>Relative contraindications of BCT:</strong></p>\n<ul>\n<li aria-level=\"1\">Active SLE (systemic lupus erythematosus), scleroderma\u00a0\u00a0</li>\n<li aria-level=\"1\"><strong>Large lump-to-breast ratio</strong> (&gt;5 cm size lump)</li>\n<li aria-level=\"1\">Known or suspected genetic predisposition to breast cancer (i.e., BRCA1, BRCA2), Li-Fraumeni syndrome (p53 mutation)</li>\n<li aria-level=\"1\"><strong>Multifocal disease</strong></li>\n<li aria-level=\"1\"><strong>Prior radiation therapy</strong> to the chest wall or breast</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient is brought in to the casualty with maxillofacial trauma after an RTA. He is unconscious with a dropping SpO2. The ER doctor decides to intubate him. What is the preferred method of securing airway for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Mask ventilation"
      },
      {
        "id": 2,
        "text": "Laryngeal mask airway (LMA)"
      },
      {
        "id": 3,
        "text": "Tracheostomy"
      },
      {
        "id": 4,
        "text": "Nasotracheal intubation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Patients with severe maxillofacial trauma are very likely to experience severe airway compromise or obstruction. Hence to maintain airway competency, intubation is necessary and in the above case, the presence of facial trauma, <strong>tracheostomy</strong>\u00a0is ideal.</p>\n<p>Tracheostomy involves making an\u00a0<strong>opening</strong>\u00a0and\u00a0<strong>placing a</strong>\u00a0<strong>stoma</strong>\u00a0in the anterior wall of the trachea.\u00a0</p>\n<p>Functions:\u00a0</p>\n<ol>\n<li>Provides an\u00a0<strong>alternative pathway for breathing</strong>\u00a0by bypassing the obstruction.</li>\n<li><strong>Improves alveolar ventilation</strong>\u00a0by reducing dead space by 30-50% and reducing airway resistance</li>\n<li>Uses a cuff to\u00a0<strong>protect the airways</strong>\u00a0from secretions and blood</li>\n<li>Allows\u00a0<strong>suction of secretions</strong>\u00a0in the setting of the impaired cough reflex.</li>\n<li>Allows\u00a0<strong>positive pressure respiration</strong></li>\n<li>Allows\u00a0<strong>administration of anesthesia</strong></li>\n</ol>\n<p>Indications:\u00a0</p>\n<ol>\n<li><strong>Respiratory obstruction</strong>\u00a0due to\u00a0\n<ol>\n<li>Infections (laryngo-tracheo-bronchitis, epiglottitis, diphtheria)</li>\n<li>Trauma due to external injury, mandibular or maxillofacial fractures</li>\n<li>Neoplasms</li>\n<li>Foreign bodies or edema</li>\n<li>Bilateral abductor paralysis</li>\n<li>Congenital anomalies</li>\n</ol>\n</li>\n<li><strong>Retained secretions</strong>\n<ol>\n<li>Inability to cough due to coma, spasm, or paralysis of respiratory muscles</li>\n<li>Aspiration of pharyngeal secretions</li>\n<li>Painful cough</li>\n</ol>\n</li>\n<li><strong>Respiratory insufficiency</strong>\u00a0due to emphysema, chronic bronchitis</li>\n</ol>\n<p><strong>Other options:</strong></p>\n<p><strong>Option A </strong>and<strong> B: Mask ventilation </strong>and<strong> LMA</strong> are not enough as the patient has severe airway compromise.</p>\n<p><strong>Option D:</strong>\u00a0 Nasotracheal intubation is contraindicated in the presence of facial trauma because if there is an undiscovered fracture at the base of the skull, the tube could be forced through it and into the brain.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A genital examination is being performed on a patient with perineal laceration post-vaginal delivery. The tear extends into the fascia and the musculature of the perineal body but the anal sphincter muscles remain intact.  Which of the following grades of perineal laceration does this correspond to?",
    "choices": [
      {
        "id": 1,
        "text": "FIrst Degree"
      },
      {
        "id": 2,
        "text": "Second Degree"
      },
      {
        "id": 3,
        "text": "Third degree"
      },
      {
        "id": 4,
        "text": "Fourth Degree"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>As the tear extends into the fascia and musculature of the perineal body and the anal sphincter muscles remain intact, this is a <strong>second-degree perineal tear.</strong></p>\n<p>The perineal tear is more common in <strong>primigravida</strong> and <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">results from <strong>over-stretching</strong> or <strong>sudden stretching</strong> of the perineum during childbirth. Trauma to the perineum can also result in perineal tears.</span></p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Clinical features include the <strong>inability</strong> to <strong>hold</strong> the <strong>flatus</strong> and <strong>feces. Soreness</strong> over the <strong>peri-anal region</strong> can be seen due to constant irritation by stool. <strong>Palpation</strong> reveals the decreased/absence of a sphincteric grip depending on the degree of tear.</span></p>\n<p>All recent tears should be&nbsp;<strong>repaired immediately</strong>. If there is a&nbsp;<strong>delay of 24 hours</strong>, the repair has to be&nbsp;<strong>withheld</strong>&nbsp;and the patient has to be started on<strong>&nbsp;antibiotics</strong>&nbsp;to prevent infection.&nbsp;<strong>Complete perineal tears</strong>&nbsp;that were not repaired in the first 24 hours should be operated on between<strong> 3-6 months after delivery.&nbsp;</strong>In 3 months of time, any local infection that might have been present would subside, and the general condition of the patient will also improve. However, if the perineal tear is untreated for <strong>more than 6 months</strong>, dense&nbsp;<strong>scar</strong> tissue forms making the&nbsp;<strong>surgery difficult.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A girl presented with complaints of irregular periods, acne, and increased facial hair growth.USG revealed multiple ovarian follicles. Which of the following would be increased in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Sex hormone binding globulin levels"
      },
      {
        "id": 2,
        "text": "Serum testosterone"
      },
      {
        "id": 3,
        "text": "FSH levels"
      },
      {
        "id": 4,
        "text": "FSH/LH ratio"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In<strong>\u00a0</strong>the given clinical scenario history of irregular periods, acne, increased facial hair growth, and USG showing multiple ovarian follicles is suggestive of <strong>polycystic ovarian disease(PCOD). </strong>In PCOD, <strong>serum testosterone</strong> would be <strong>elevated</strong>.</p>\n<p><strong>Insulin induces LH </strong>to cause theca-cell hyperplasia and <strong>secrete androgens</strong>, testosterone, and epiandrostenedione which are <strong>converted to estrogen in the granulosa cells.</strong> Epi-androstenedione is <strong>converted </strong>in the peripheral fat<strong> to</strong> <strong>oestrone</strong>. This leads to rise in estrogen and inhibin levels. These in turn cause high LH surge. While the oestrone level increases,<strong> the oestradiol level remains normal</strong> which raises the Oestrone: Oestradiol ratio.</p>\n<p><strong>Endocrinological changes</strong> of PCOD:</p>\n<div id=\"cdk-accordion-child-168\" class=\"mat-expansion-panel-content ng-tns-c147-340 ng-trigger ng-trigger-bodyExpansion\" role=\"region\" aria-labelledby=\"mat-expansion-panel-header-168\">\n<div class=\"mat-expansion-panel-body ng-tns-c147-340\">\n<div class=\"ng-star-inserted\">\n<ol>\n<li>Elevated Estrone/E1 levels.</li>\n<li>LH level is raised over 10 IU/mL. FSH level remains normal to low, but<strong>\u00a0FSH/LH ratio falls.</strong></li>\n<li>Testosterone and epi-androstenedione levels rise.<br />\n<ul>\n<li><strong>Testosterone elevated but &lt; 200 ng/dL\u00a0</strong>(normal range 20 - 70 ng/dL)</li>\n<li>Testosterone &gt; 200 ng/dL suggests androgen-secreting ovarian tumor</li>\n<li>DHEA-S values may be normal or slightly elevated</li>\n<li>DHEA &gt;700 ng/mL suggests adrenal tumour</li>\n</ul>\n</li>\n<li>Serum SHBG is reduced.</li>\n<li><strong>Triglyceride level &gt;150 mg/dL</strong>-hyperlipidaemia HDL &lt;50 mg/dL.</li>\n<li>Fasting blood glucose/fasting insulin &lt;4.5 suggests insulin resistance</li>\n<li>Prolactin is mildly raised in 15% cases</li>\n<li><strong>Fasting insulin is more than 10 mIU/L in PCOS in 50\u201370%cases</strong></li>\n<li>Thyroid function tests may be abnormal (hypothyroidism)</li>\n<li>17-a-hydroxyprogesterone in the follicular phase &gt;300 ng/dL suggests adrenal hyperplasia due to 21-hydroxylase deficiency.</li>\n<li><strong>Urinary cortisol &lt;50 \u03bcg/24 h.</strong></li>\n</ol>\n</div>\n</div>\n</div>\n<p><strong>Polycystic ovarian syndrome</strong>\u00a0</p>\n<p>Important clinical features of PCOS are <strong>Menstrual abnormalities </strong>(70%) - oligomenorrhea, amenorrhea, obesity, <strong>hirsutism</strong>, acne, and alopecia due to hyperandrogenism, <strong>acanthosis nigricans</strong> due to insulin resistance, and <strong>infertility.</strong></p>\n<p><strong>Rotterdam criterion</strong>\u00a0is used to diagnose PCOS. The presence of\u00a0<strong>any two of the three</strong>\u00a0components of this criteria establishes the diagnosis of PCOS.</p>\n<div class=\"page\" title=\"Page 326\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Oligo/ amenorrhoea, anovulation, infertility</li>\n<li>Hirsutism/ acne</li>\n<li>Ultrasound findings-</li>\n</ul>\n<p><strong>Investigations</strong></p>\n<ul>\n<li>Enlarged ovaries with ovarian volume will be <strong>more than 10 mm<sup>3</sup></strong></li>\n<li><strong>12 or more </strong>small follicles each <strong>2-9 mm</strong> in size placed peripherally.</li>\n</ul>\n</div>\n</div>\n</div>\n<p>Hormonal studies</p>\n<ul>\n<li>USG is diagnostic of PCOS - it shows enlarged ovaries with multiple follicles in the periphery. It also rules out other pathologies like ovarian tumors, endometrial hyperplasia.</li>\n<li>Laparoscopy (therapeutic). It reveals bilateral enlarged ovarian cysts.</li>\n</ul>\n<p><strong>The ultrasound</strong> image below shows an <strong>enlarged ovary with multiple follicles</strong> in the periphery.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/452854eb73d749aea3e9504878fdbb01x533x400.JPEG"
    ]
  },
  {
    "text": "Identify the maneuver shown in the image below:",
    "choices": [
      {
        "id": 1,
        "text": "Ritgen\u2019s manoeuvre"
      },
      {
        "id": 2,
        "text": "Pinard\u2019s manoeuvre"
      },
      {
        "id": 3,
        "text": "Lovset\u2019s manoeuvre"
      },
      {
        "id": 4,
        "text": "Zavanelli manoeuvre"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above image depicts <strong>Ritgen\u2019s manoeuvre, </strong>a technique used during the second stage of labor to assist in the <strong>controlled delivery of the fetal head,</strong> reducing the risk of perineal tears and trauma.</p>\n<p>Steps in Ritgen\u2019s Maneuver:</p>\n<ul>\n<li>The right hand is draped with a sterile towel.</li>\n<li>The <strong>fingers of the right hand </strong>pressing posterior to the rectum exerts <strong>upward</strong> <strong>pressure</strong> to the chin and <strong>extends</strong> <strong>the</strong> <strong>head</strong>. The extension of the head prevents the head from slipping back in between the contractions.</li>\n<li>The <strong>left hand</strong> placed over the <strong>occiput</strong> exerts a <strong>downward counterpressure</strong> to prevent the rapid extension of the head</li>\n<li>The ritgen\u2019s manoeuvre thus helps in the <strong>controlled delivery of the head</strong> of the fetus.</li>\n</ul>\n<p><strong>Other options:</strong></p>\n<p>Option B:<strong> Pinard\u2019s manoeuvre </strong>is used to facilitate the delivery of legs in case of frank breech presentation.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fc3cb0df178042279eccff3cc983816c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a26a500601164ef58a256fa47f04be01x1280x4970.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/227df13c80054e72b442a5db98eadea7x200x433.JPEG"
    ]
  },
  {
    "text": "Which of the following is incorrect about breast milk jaundice?",
    "choices": [
      {
        "id": 1,
        "text": "It occurs due to the presence of\u00a0glucuronidase"
      },
      {
        "id": 2,
        "text": "Phototherapy is not required in all cases"
      },
      {
        "id": 3,
        "text": "It occurs due to decreased milk intake"
      },
      {
        "id": 4,
        "text": "Breastfeeding is to be continued"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Breast milk jaundice is not\u00a0<strong>due to decreased milk intake. </strong>It is<strong>\u00a0</strong>due to the presence of\u00a0<strong>glucuronidase</strong>\u00a0in breast milk.</p>\n<p>Breast Milk jaundice is seen in about 2<strong>\u2013</strong>4 % of <strong>exclusively breastfed</strong> babies. There is significant <strong>unconjugated hyperbilirubinemia</strong> after the 7<sup>th</sup> day and may last for 2\u20133 weeks<strong>. </strong>This may be caused by the breast milk that might contain <strong>\u03b2-glucuronidase</strong>, which deconjugates intestinal bilirubin and promotes its absorption and other inhibitors of glucuronyl transferase. Persistently high bilirubin levels may require changing from breast milk to <strong>infant formula for 24\u201348 h</strong> and/or treatment with <strong>phototherapy,</strong> without cessation of breastfeeding.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p><strong>Breastfeeding jaundice (BFJ)</strong></p>\n<ul>\n<li><strong>Early-onset</strong>, unconjugated hyperbilirubinemia of breastfed infants.</li>\n<li>Occurs in the<strong>\u00a01st week after birth\u00a0</strong>(usually<strong>\u00a0appears after 24 - 72 hours\u00a0</strong>of birth)\u00a0</li>\n<li>Due to decreased milk intake with dehydration and/or reduced caloric intake. (<strong>Breastfeeding\u00a0failure jaundice)</strong></li>\n<li>Treatment:\u00a0Continue breastfeeding and supplementation with formula feeds if needed.</li>\n</ul>\n<p><strong>Breast milk jaundice (BMJ)</strong></p>\n<ul>\n<li><strong>Late-onset</strong>, unconjugated hyperbilirubinemia of breastfed infants.</li>\n<li>Occurs<strong>\u00a0after the 7<sup>th</sup>\u00a0day</strong>\u00a0with maximal concentrations as high as 10\u201330 mg/dl reached during the 2<sup>nd</sup>-3<sup>rd</sup>\u00a0week</li>\n<li>Due to the presence of\u00a0<strong>glucuronidase</strong>\u00a0in breast milk (etiology not entirely clear).</li>\n<li>Treatment:<strong>\u00a0Continue breastfeeding</strong>\u00a0and the bilirubin gradually decreases but\u00a0<strong>may persist for 3-10 weeks</strong>\u00a0at lower levels; phototherapy may be of benefit in some cases.</li>\n</ul>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which test is being performed to detect fixed flexion deformity at hip?",
    "choices": [
      {
        "id": 1,
        "text": "Trendelenburg test"
      },
      {
        "id": 2,
        "text": "Thomas test"
      },
      {
        "id": 3,
        "text": "Telescopic test"
      },
      {
        "id": 4,
        "text": "Ober's test"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Thomas test\u00a0is used to detect\u00a0<strong>fixed flexion deformity of the hip.\u00a0</strong></p>\n<p>Flexion deformity is seen in the\u00a0initial stages\u00a0of the disease. The patient keeps the hip in flexion as this is the position of ease and maximum joint capacity.\u00a0Soft tissue contractures convert this into a fixed flexion deformity, making locomotion impossible.</p>\n<p>In an effort to bring the limb on the ground and to make locomotion possible, the\u00a0lumbar <strong>spine</strong> undergoes <strong>exaggerated</strong> <strong>lordosis</strong>\u00a0and thus\u00a0conceals the fixed flexion deformity. This is <strong>revealed</strong> by the <strong>Thomas</strong> <strong>test</strong>. The\u00a0easy passage of the examiner's hand between the bed and the back of the patient is considered as a positive test\u00a0as normally this is not possible.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/335be190e42748019e813f48478aac28x472x335.JPEG"
    ]
  },
  {
    "text": "A patient stopped alcohol consumption for 3 days and presented with irritability, disorientation, paranoid delusions, agitation, visual hallucinations, and altered sensorium. What is the likely diagnosis in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Delirium tremens"
      },
      {
        "id": 2,
        "text": "Wernicke's encephalopathy"
      },
      {
        "id": 3,
        "text": "Korsakoff psychosis"
      },
      {
        "id": 4,
        "text": "Alcohol-induced psychosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario of a patient who has not consumed alcohol for the past 3 days presenting with <strong>disorientation, paranoid delusions, visual hallucinations</strong>, and <strong>altered sensorium</strong> is suggestive of <strong>delirium tremens.</strong></p>\n<p><strong>Delirium tremens</strong> is a medical <strong>emergency</strong> that occurs during <strong>alcohol withdrawal</strong>. It is an <strong>acute condition</strong> and usually develops within 72 hours after the last drink. It has symptoms of both delirium and alcohol withdrawal.</p>\n<p>The clinical features of delirium tremens are as follows:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Altered sensorium</strong> with <strong>disorientation</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Perceptual distortions, most frequently tactile or <strong>visual hallucinations</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Autonomic hyperactivity with tachycardia, fever, anxiety, insomnia, hypertension, and sweating</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Fluctuating levels of psychomotor activity, ranging from <strong>agitation</strong> to lethargy</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Altered sleep-wake cycle</li>\n</ul>\n<p>Other options:</p>\n<p>Option B: <strong>Wernicke\u2019s encephalopathy (alcoholic encephalopathy)</strong>\u00a0is associated with\u00a0<strong>thiamine deficiency.</strong> Alcohol abuse may lead to thiamine deficiency because of poor nutritional habits or malabsorption.</p>\n<p>It is an<strong> acute neurological disorder</strong> characterized by</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Global confusion</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Ocular abnormalities like horizontal nystagmus, gaze palsy, anisocoria, and sluggish pupillary reflex</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Ataxia - mainly affecting the gait</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Vestibular dysfunction</li>\n</ul>\n<p>It may resolve with thiamine therapy or progress to Korsakoff's syndrome.</p>\n<p>Option C:<strong>\u00a0Korsakoff\u2019s psychosis</strong> can follow Wernicke\u2019s encephalopathy due to <strong>thiamine deficiency.</strong> It is a<strong> chronic amnestic syndrome</strong> that is characterized by the following clinical symptoms in an intact and responsive patient:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Impaired mental syndrome, especially recent memory</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">A<strong style=\"font-weight: 400;\">nterograde amnesia</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Confabulation</strong></li>\n</ul>\n<p>Option D: <strong>Alcohol-induced psychosis</strong> is characterized by the development of auditory hallucinations or paranoid delusions in the context of heavy drinking or alcohol withdrawal. These patients have a clear sensorium, unlike the patients having delirium tremens.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 18-year-old boy is rushed to the ER after having choked on a bone while eating. He is responsive but unable to speak. What is to be done next?",
    "choices": [
      {
        "id": 1,
        "text": "Bag and mask ventilation"
      },
      {
        "id": 2,
        "text": "Endoscopic removal"
      },
      {
        "id": 3,
        "text": "Deliver 5 backslaps and 5 chest compressions"
      },
      {
        "id": 4,
        "text": "Perform Heimlich maneuver"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In a choking <strong>child</strong> (more than 1 year old) or an <strong>adult,</strong> the first step to be done is to perform <strong>Heimlich</strong> maneuver, which involves delivering <strong>abdominal thrusts.</strong></p>\n<p>The rescuer should stand or kneel behind the patient and wrap his arms around the patient&rsquo;s waist. A fist is made with one hand and using the other hand, the fist is driven into the patient&rsquo;s abdomen with a rapid, forceful upward thrust so as to dislodge the foreign body. This is continued until the foreign body is expelled or if the patient becomes unresponsive.</p>\n<p>If the patient becomes <strong>unresponsive</strong>, immediately <strong>start</strong> <strong>CPR</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7c96e24d3b1f4fafab682fe5a100eebex510x442.GIF",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/57c9eca4b253477f9ff24c5f75ec611cx510x441.GIF",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ca6f508c65294819b123227c5c04f7b2x510x437.GIF"
    ]
  },
  {
    "text": "A 20-year-old man presents with burning pain on passing urine. He reluctantly admits that he had unprotected sexual intercourse 3 days ago. The following examination findings are seen. Which of the following is the likely causative organism?",
    "choices": [
      {
        "id": 1,
        "text": "Chlamydia trachomatis"
      },
      {
        "id": 2,
        "text": "Treponema palladium"
      },
      {
        "id": 3,
        "text": "Herpes simplex virus"
      },
      {
        "id": 4,
        "text": "Neisseria gonorrhoeae"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The symptoms of this patient occurring 3 days after unprotected sex point to <strong>urethritis</strong> caused by <strong><em>Neisseria gonorrhoeae</em>,</strong> as its <strong>incubation</strong> <strong>period</strong> is <strong>1-5 days.</strong></p>\n<p>The most common presentation of gonococcal infection in <strong>men</strong> is <strong>acute</strong> <strong>urethritis</strong> with <strong>dysuria </strong>and profuse <strong>purulent\u00a0</strong><strong>discharge</strong>. Pharyngeal and rectal infections can also occur depending on the type of sexual contact.</p>\n<p>The primary site of infection in<strong> women </strong>is the <strong>cervix</strong> but the urethra, rectum, and pharynx may be involved. Symptoms include excessive <strong>vaginal</strong> <strong>discharge</strong>, <strong>dysuria</strong>, deep dyspareunia, <strong>postcoital</strong> and <strong>intermenstrual</strong> <strong>bleeding</strong>.</p>\n<p>Other options:</p>\n<p>Option A:<strong> </strong>The most common cause of <strong>non-gonococcal urethritis (NGU)</strong> is <strong>Chlamydia</strong>, which has an incubation period of 1-3 weeks. It usually presents with dysuria alone, but mucopurulent discharge can occur.</p>\n<p>Option B:<strong> Syphilis</strong>\u00a0is primarily a sexually transmitted disease caused by\u00a0<strong><em>Treponema palladium</em>\u00a0</strong>but vertical transmission is also possible. It commonly presents as a\u00a0<strong>hard, painless genital ulcer with induration,</strong>\u00a0followed by the development of\u00a0<strong>rubbery</strong>\u00a0enlargement of\u00a0<strong>inguinal lymph nodes</strong>.</p>\n<p>Option C: <strong>Herpes genitalis</strong> is an infection of the genital skin or mucosa with <strong>herpes simplex virus HSV 1</strong> and <strong>HSV 2.</strong> It presents as painful genital ulcers and dysuria. It is usually preceded by a prodrome of general malaise.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c90ed527248c41be95bc0d1dccbf7da8.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the rib highlighted in the X-ray.",
    "choices": [
      {
        "id": 1,
        "text": "3rd rib anterior part"
      },
      {
        "id": 2,
        "text": "3rd rib posterior part"
      },
      {
        "id": 3,
        "text": "4th rib anterior part"
      },
      {
        "id": 4,
        "text": "4th rib posterior part"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above-marked area in the chest X-ray shows the<strong> posterior part of the 4th rib.</strong></p>\n<p>In the chest X-ray, ribs appear as <strong>light grey strips</strong>. The <strong>anterior part</strong> of the rib is <strong>more oblique</strong> and the medial part cannot be demonstrable as it ends with costal cartilage. The <strong>posterior part</strong> of the rib is <strong>more horizontal</strong> and the attachment of the rib with the vertebra can be easily made out.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/311c993c0e034825ad279acf5c4f494e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/317b19d8c2dc4522ae34b1c5147a2a57x1280x1048.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c85f3d8ef39e40e79450d617c29849d5x1280x1169.JPEG"
    ]
  },
  {
    "text": "All are causes of high RAIU (radioactive iodine uptake) except:",
    "choices": [
      {
        "id": 1,
        "text": "Graves\u2019 Disease"
      },
      {
        "id": 2,
        "text": "Endemic Iodine deficiency"
      },
      {
        "id": 3,
        "text": "Subacute thyroiditis"
      },
      {
        "id": 4,
        "text": "HCG induced thyrotoxicosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Subacute thyroiditis</strong> shows <strong>low uptake</strong> of radioactive iodine as it involves destruction and inflammation of the thyroid follicles, which also accounts for the thyrotoxic symptoms due to exocytosis of the hormone.</p>\n<p>The other three are classical examples of high RAIU.</p>\n<p><strong>Radioactive Iodine Scan</strong>:</p>\n<ul>\n<li>Nonpregnant, hyperthyroid patients with physical examination suggesting nodular thyroid disease, radioactive iodine should be the initial test to determine the aetiology of hyperthyroidism.</li>\n<li><strong>Pregnancy and breastfeeding</strong> are <strong>absolute contraindications</strong> to radionuclide imaging.</li>\n<li>Hyperthyroidism with a <strong>high</strong> (or normal) radioiodine uptake indicates <strong>de-novo synthesis of the hormone</strong>.</li>\n<li>Hyperthyroidism with a <strong>low</strong> (nearly absent) radioiodine uptake indicates either <strong>inflammation</strong> and <strong>destruction of thyroid tissue</strong> with release of <strong>preformed hormone</strong> into the circulation or an <strong>extrathyroidal source</strong> of thyroid hormone, such as in patients with <strong>factitious thyrotoxicosis</strong> and in patients with <strong>struma ovari</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Fmge Mini Test - 11';
        const quizFilename = 'fmge-mini-test-11-352f70f4.html';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>