<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neet 2021 Mini Test 4  (20 Questions) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2020-21
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 68-year-old man came with complaints of long-standing arthralgia in the knee. On examination, bluish-black scleral patches were seen as shown. On further inquiry, he says that the urine turns black on exposure to air. Accumulation of which of the following compounds caused this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Benzoquinone acetate"
      },
      {
        "id": 2,
        "text": "Methyl malonyl CoA"
      },
      {
        "id": 3,
        "text": "Orotic acid"
      },
      {
        "id": 4,
        "text": "Sulfogalactosylceramide"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This clinical vignette is strongly suggestive of <strong>alkaptonuria\u00a0</strong>and the pathological discoloration shown in the image is <strong>ochronosis. Accumulation\u00a0</strong>of the compound\u00a0<strong>benzoquinone acetate </strong>has caused this condition.</p>\n<p>Alkaptonuria is an <strong>autosomal recessive</strong> disorder of <strong>tyrosine</strong> metabolism, that develops due to the <strong>defect </strong>in<strong> homogentisate oxidase</strong>, the enzyme which\u00a0oxidizes homogentisate to maleylacetoacetate. The defect in this enzyme will lead to the accumulation of homogentisic acid that\u00a0 oxidizes into benzoquinone acetate. Later, benzoquinone acetate polymerizes and binds to tissues (especially collagen fibres).</p>\n<p>This oxidation process produces free radicals that cause tissue damage and incite inflammation. Additionally, the excess homogentisic acid is excreted in the urine.\u00a0This results in the classical clinical features of alkaptonuria such as-\u00a0</p>\n<ul>\n<li><strong>Homogentisic aciduria</strong>-\u00a0<strong>Black discoloration </strong>of<strong> urine</strong> on prolonged <strong>exposure </strong>to<strong> air</strong> caused due to oxidation of the excreted homogentisate.\u00a0</li>\n<li><strong>Ochronosis</strong>- <strong>Bluish-black discoloration</strong> of tissues mostly involving ear cartilage, ocular tissue, the skin of the eyelids, forehead, cheeks, and hands, nail beds, and even deeper structures such as the larynx and tendons.</li>\n<li><strong>Arthropathy</strong>- <strong>Debilitating arthralgia</strong> or arthritis that may be seen after the fourth or fifth decade.</li>\n</ul>\n<p>Other options-</p>\n<p>Option B- <strong>Methyl malonyl-CoA is </strong>seen in urine <strong>(methylmalonic aciduria) </strong>due to deficiency of<strong> methylmalonyl Co A</strong>\u00a0<strong>mutase</strong>\u00a0which is a vitamin b12 dependent enzyme.</p>\n<p>Option C- Increased <strong>orotic acid</strong> in the blood and urine is seen in <strong>ornithine transcarbamylase</strong> deficiency.</p>\n<p>Option D- <strong>Sulfogalactosylceramide</strong>\u00a0is accumulated in <strong>metachromatic leukodystrophy</strong> due to deficiency of Aryl-sulfatase A.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4b015c9fb0714bdd99bfe9f2af3ab6b8.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old obese woman presented with a low-grade fever and colicky pain in the right hypochondrium. Scleral icterus and tenderness in the right hypochondrium were noted. Ultrasound showed the following finding in the enlarged common bile duct (measuring 9 mm). Investigations reveal deranged liver function tests. Which of the following would be best suited for her management?",
    "choices": [
      {
        "id": 1,
        "text": "CT"
      },
      {
        "id": 2,
        "text": "Percutaneous transhepatic cholangiography (PTC)"
      },
      {
        "id": 3,
        "text": "Magnetic resonance cholangiopancreatography"
      },
      {
        "id": 4,
        "text": "Endoscopic retrograde cholangiopancreatography"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario and the ultrasonograph indicate a diagnosis of&nbsp;<strong>choledocholithiasis.</strong> The next best step in the management of this patient is <strong>endoscopic retrograde cholangiopancreatography (ERCP).</strong></p>\n<p>Symptoms of fever and obstructive jaundice symptoms such as scleral icterus, light-colored stools, and dark-colored urine point toward a diagnosis of <strong>choledocholithiasis</strong>.</p>\n<p>The first investigation, in this case, is a USG to look for biliary duct dilation and determine whether it is intra- or extrahepatic. Once this is confirmed, <strong>ERCP</strong> can be done as it can <strong>remove the stone</strong> without operative intervention.&nbsp;</p>\n<div class=\"page\" title=\"Page 249\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Common indications for ERCP:</p>\n<ul>\n<li>Relief of biliary obstruction due to <strong>gallstone disease</strong> (can present as unexplained jaundice)</li>\n<li>Biliary <strong>drainage</strong></li>\n<li>Biliary <strong>stenting</strong> for strictures and leakage</li>\n<li>Biliary or pancreatic ductal system tissue sampling</li>\n<li>Balloon dilation of the duodenal papilla or ductal strictures</li>\n<li><strong>Sphincterotomy</strong></li>\n<li>Sphincter of Oddi manometry</li>\n</ul>\n<p><strong>ERCP</strong> utilizes a side-viewing endoscope through which it identifies and is able to cannulate the Ampulla of Vater. A water-soluble contrast is then injected into the common bile duct. It helps in identifying stones or strictures.</p>\n<div class=\"page\" title=\"Page 307\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Percutaneous transhepatic cholangiography (PTC) is used in case of unsuccessful ERCP or anatomical difficulty for ER\u0327CP.</p>\n</div>\n</div>\n</div>\n</div>\n<p>The below image shows a schematic diagram of ERCP:</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e8753b416344430fa46a5885be41ace3.jpg"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f163b760cec04f03aaac5e7ddb6641e3x375x328.PNG"
    ]
  },
  {
    "text": "Which of the following pairs of drugs act on the same receptor but have opposite effects?",
    "choices": [
      {
        "id": 1,
        "text": "Somatostatin and octreotide"
      },
      {
        "id": 2,
        "text": "Thioridazine and haloperidol"
      },
      {
        "id": 3,
        "text": "Pioglitazone and gemfibrozil"
      },
      {
        "id": 4,
        "text": "Diazoxide and nateglinide"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Diazoxide and nateglinide act on <strong>K-ATP</strong> channels (potassium-ATP channels) on the beta cells of pancreas. <strong>Nateglinide</strong> causes these channels to <strong>close</strong>, while <strong>diazoxide</strong> keeps them <strong>open</strong>.</p>\n<p><strong>Closure</strong> of these channels eventually results in <strong>insulin release</strong>, hence <strong>nateglinide</strong> is used in <strong>diabetics</strong>. <strong>Diazoxide</strong> is used in <strong>insulinomas</strong>, because it <strong>inhibits insulin</strong> release by keeping these <strong>channels open</strong>.</p>\n<p>Other options:</p>\n<p>Option A: Octreotide is a synthetic surrogate of somatostatin. They both <strong>inhibit growth</strong> <strong>hormone</strong> release. Since octreotide is more potent and with increased duration of action, it is preferred for use in acromegaly and secretory diarrheas.</p>\n<p>Option B: Thioridazine and haloperidol are <strong>D2 </strong>(dopamine) <strong>receptor blockers</strong>. These are typical antipsychotics and used to treat schizophrenia and similar psychotic conditions.</p>\n<p>Option C: Pioglitazone is a <strong>PPAR gamma</strong> agonist used in diabetes, while gemfibrozil is a <strong>PPAR alpha</strong> agonist, used in hyperlipidemia. (PPAR: peroxisome proliferator-activated receptor).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old female patient came to dermatology OPD with the clinical features shown in the image below. The likely diagnosis is ______.",
    "choices": [
      {
        "id": 1,
        "text": "Nevus of Ito"
      },
      {
        "id": 2,
        "text": "Compound nevus"
      },
      {
        "id": 3,
        "text": "Nevus of Ota"
      },
      {
        "id": 4,
        "text": "Hypomelanosis of Ito"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image shows bluish patchy skin lesions on the <strong>face</strong> in the region of the first and second branches of the <strong>trigeminal nerve</strong> and <strong>sclera</strong> which are suggestive of <strong>nevus of Ota</strong>.</p>\n<p>Nevus of Ota&nbsp;is an extensive, bluish, patchy, dermal melanocytosis. A large number of <strong>elongated dendritic melanocytes</strong> can be seen scattered among collagen bundles mainly of the superficial dermis.</p>\n<p>It affects the<strong> sclera </strong>and the <strong>skin adjacent</strong> to the<strong> eye</strong>. Distributed along with the <strong>first and the second branches of the trigeminal nerve</strong>.</p>\n<p>Most lesions are present at birth or develop during the first year of life, increasing in size and number in subsequent years. Lesions are more common in females and in Asians.</p>\n<p><strong>Q\u2010switched laser</strong> systems are the first-line treatment, as they achieve higher rates of pigment clearing.</p>\n<p>Other options:</p>\n<p>Option A-<strong>&nbsp;Nevus of Ito</strong> appears as a&nbsp; unilateral,<strong> blue\u2010greyish macular discoloration</strong> location in the area innervated by the<strong> posterior supraclavicular</strong> and<strong> lateral cutaneous brachial nerves- acromioclavicular region.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b8d232f1f06f4b5fbbc0d95f43e049c5.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4854e9b966f245018ac96a650424baaax1279x1170.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0b6a5fe3ee9d4364bbb0f9377a9fa176x1280x1369.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2c168af795624ad29bf03e76bfe43014x1279x1734.JPEG"
    ]
  },
  {
    "text": "A 14-year-old girl is brought to your clinic with complaints of pain in her right knee for the past month. She is the sports captain at her school and has been recently practicing for her state-level basketball tournament. She says that the pain increases while playing but there is no pain at rest. Her pulse rate is 80 beats per minute, BP is 100/78 mm of Hg and her temperature is 98.3F. On examination, there is a swelling distal to the right knee joint line. There is pain on active extension against resistance. Her blood-work is normal. You order an X-ray to further investigate. Which among the following X-ray findings are you most likely to see in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Horizontal fracture line across the patella"
      },
      {
        "id": 2,
        "text": "Traction injury of the tibial tuberosity"
      },
      {
        "id": 3,
        "text": "Soft tissue swelling with abnormal downward angulation of patella"
      },
      {
        "id": 4,
        "text": "Central area of radiolucency with a surrounding thick rim of reactive bone sclerosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The X-ray image will show a<strong>&nbsp;traction injury of the tibial tuberosity</strong>, at the site where the <strong>patellar</strong> <strong>tendon</strong> is inserted, which is characteristic of <strong>Osgood-Schlatter Disease</strong>, also known as <strong>apophysitis of the tibial tuberosity</strong>.</p>\n<p>The condition is usually seen in <strong>young</strong> <strong>adolescents</strong> and may not be associated with any injury.</p>\n<p>The presenting feature is a <strong>painful</strong> <strong>lump</strong> below the knee joint. On examination, the lump is <strong>tender</strong> and its situation <strong>over the tibial tuberosity</strong> is diagnostic of the disease.</p>\n<p>It is usually treated conservatively, with rest and restriction of activity or cast immobilization for 3-6 weeks.&nbsp;</p>\n<p>Osgood-Schlatter Disease-</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dc4ea9f6fc2f48ca9d51f084ad1aeeaax720x900.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d277823563604501a90dc40d9aedaba5x429x600.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2d7184417a854fb09de9fd99aa6f3813x800x599.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d9222fd119bd464a8897beb50a623112x450x600.JPEG"
    ]
  },
  {
    "text": "A 26-year-old female has a history of sudden unpredictable episodes of sweating, palpitations, and chest tightness with an impending sense of doom. She often avoids social situations and public forums due to fear of these symptoms. She was recently made to stand-in for the team-lead at her work. During one of her presentations, she develops palpitations and dizziness. She is immediately brought to the emergency room. Her pulse rate is 120 beats/minute and her respiratory rate is 26/min. Which of the following will be seen on arterial blood gas analysis in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>A pH of 7.49,\u00a0PaCO<sub>2</sub> of\u00a028 mm of Hg, and HCO<sub>3</sub><sup>-</sup> of\u00a020 mEq/L signifies\u00a0<strong>respiratory alkalosis</strong>\u00a0which will be seen in this patient with <strong>hyperventilation</strong> on arterial blood gas analysis.\u00a0</p>\n<p>In respiratory alkalosis, the primary change is a <strong>decrease in PaCO<sub>2</sub></strong> due to <strong>alveolar hyperventilation.</strong>\u00a0</p>\n<p>The patient's symptoms of episodes of sudden palpitations, sweating, chest tightness, shortness of breath, and an impending sense of doom are suggestive of panic disorder. <strong>Hyperventilation</strong> associated with anxiety and panic disorder causes <strong>carbon dioxide washout.</strong> This results in decreased PaCO<sub>2<sup>.</sup></sub>\u00a0In acute respiratory alkalosis like anxiety-induced hyperventilation,\u00a0HCO<sub>3</sub><sup>-\u00a0</sup>levels remain normal due to delayed metabolic compensation. This increases the\u00a0HCO<sub>3</sub><sup>-</sup>/PaCO<sub>2\u00a0</sub>thus increasing the <strong>arterial pH</strong>.</p>\n<p>Other causes of respiratory alkalosis include:</p>\n<ul>\n<li>Central nervous system stimulation - pain, fever, encephalitis, tumor, trauma</li>\n<li>Hypoxemia or tissue hypoxia - High altitude, pneumonia, pulmonary edema, aspiration, and severe anemia</li>\n<li>Drugs: Salicylates</li>\n<li>Stimulation of chest receptors - Hemothorax, flail chest, cardiac failure, pulmonary embolism</li>\n<li>Others: Pregnancy, mechanical hyperventilation, heat exposure</li>\n</ul>\n<p>Other options:</p>\n<p>Option B: A pH of 7.52,\u00a0PaCO<sub>2</sub> of\u00a044 of Hg, HCO<sub>3</sub><sup>-</sup> of\u00a030 mEq/L signifies\u00a0<strong>metabolic alkalosis. </strong>There is <strong>increased blood arterial pH</strong>, as a result of a <strong>net gain of HCO<sub>3</sub><sup>-</sup></strong>\u00a0or a <strong>loss of nonvolatile acid</strong> from the extracellular fluid. Compensatory alveolar hypoventilation occurs and causes an increase in\u00a0PaCO<sub>2</sub>. Common examples include vomiting, gastric aspiration, diuretic use, and milk-alkali syndrome.</p>\n<p>Option C: A pH of 7.32,\u00a0PaCO<sub>2</sub> of\u00a050mm of Hg, HCO<sub>3</sub><sup>-</sup> of\u00a020 mEq/L signifies\u00a0<strong>respiratory acidosis. </strong>There is <strong>decreased blood arterial pH</strong> as a result of an\u00a0<strong>increase in\u00a0PaCO</strong><sub><strong>2</strong>\u00a0</sub>following <strong>alveolar hypoventilation</strong>. In acute respiratory acidosis, HCO<sub>3</sub><sup>-\u00a0</sup>levels remain normal due to delayed metabolic compensation.\u00a0Examples include opioid overdose, severe sepsis, airway obstruction, ARDS, and respiratory muscle fatigue (polio, myasthenia)</p>\n<p>Option D: A pH of 7.32,\u00a0PaCO<sub>2</sub> of\u00a037 mm of Hg, HCO<sub>3</sub><sup>-</sup> of\u00a018 mEq/L signifies\u00a0<strong>metabolic acidosis.</strong>\u00a0There is <strong>decreased blood arterial pH</strong> because of an increase in endogenous acid production (Example: Diabetic ketoacidosis, increased lactate in sepsis), <strong>loss of\u00a0HCO<sub>3</sub><sup>-</sup> </strong>(Example: diarrhea), or low excretion of net acid by kidneys (Example: chronic kidney disease). Respiratory compensation (alveolar hyperventilation) occurs causing a decrease in\u00a0PaCO<sub>2</sub>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The v-wave of the jugular venous pressure (JVP) waveform is due to-",
    "choices": [
      {
        "id": 1,
        "text": "Atrial contraction"
      },
      {
        "id": 2,
        "text": "Venous filling of the right atrium"
      },
      {
        "id": 3,
        "text": "Passive emptying of the right atrium"
      },
      {
        "id": 4,
        "text": "Bulging of tricuspid valve into right atrium"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong> v-wave</strong> of the jugular venous pressure (JVP) waveform is due to the <strong>venous filling of the right atrium</strong>.</p>\n<p>The JVP is<strong>&nbsp;</strong>ideally examined in the&nbsp;<strong>internal jugular vein </strong>(IJV). IJV lies anteriorly to the sternocleidomastoid muscle and it should be examined in good lighting at a 45&deg; angle. It reflects the right atrial pressure.&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a7171ae2655c4936853ebb5754cf5b2cx741x600.PNG"
    ]
  },
  {
    "text": "A woman from rural South America presents with shortness of breath and palpitations. Examination of the eye is shown in the image given below. Echocardiography reveals biventricular dilatation with massive cardiac enlargement. Which vector is most likely responsible for transmitting this patient's disease?",
    "choices": [
      {
        "id": 1,
        "text": "Dermacentor tick"
      },
      {
        "id": 2,
        "text": "Soft tick"
      },
      {
        "id": 3,
        "text": "Reduviid bug"
      },
      {
        "id": 4,
        "text": "Tsetse fly"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above clinical scenario, along with an image showing <span data-preserver-spaces=\"true\"><strong>Romana\u2019s sign</strong></span> and echo findings of <strong>dilated cardiomyopathy,</strong> are suggestive of <strong>Chagas disease</strong>.\u00a0It is caused by <em><strong>Trypanosoma cruzi</strong></em>, transmitted by the <strong>reduviid bug.</strong></p>\n<p><strong>Chagas disease</strong> is a zoonotic disease caused by the protozoa <em><strong>Trypanosoma cruzi</strong></em>. It is endemic to <strong>n</strong><strong>orth, central, </strong>and <strong>south America. </strong>It is transmitted by the bite of a<strong> reduviid bug</strong>/ kissing bug<strong>.</strong></p>\n<p><em>Trypanosoma cruzi</em> exists in three forms:</p>\n<ul>\n<li><strong>Epimastigotes</strong>- in the reduviid bug</li>\n<li><strong>Trypomastigotes-</strong> in the bloodstream</li>\n<li><strong>Amastigotes-\u00a0</strong>intracellular replicating form</li>\n</ul>\n<p>Clinically, the infection course of Chagas disease is divided into acute and chronic phases.</p>\n<p>In the acute phase, the majority of the patients will be asymptomatic.\u00a0Fever, regional lymphadenitis, <strong>chagoma</strong> (localised subcutaneous nodule at the bite site), and the <strong>Roma\u00f1a's sign</strong> (unilateral swelling of the eyelids) may be seen in the acute phase.\u00a0</p>\n<p>The chronic phase is characterised by the following findings:</p>\n<ul>\n<li><strong>Chagasic dilated cardiomyopathy</strong> with\u00a0marked <strong>bilateral ventricular enlargement.</strong> This leads to leading to congestive heart failure, presenting as <strong>shortness of breath.</strong> Endomyocardial biopsy shows fibrosis and the presence of intracellular parasites.</li>\n<li><strong>Megaesophagus</strong> and <strong>megacolon</strong>.\u00a0</li>\n</ul>\n<div class=\"page\" title=\"Page 728\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Diagnosis is confirmed by demonstrating trypomastigotes on microscopy of blood smears or polymerase chain reactions during the acute phase. In the chronic phase, detection of <em>anti-T. cruzi </em>IgG or endomyocardial biopsy is helpful.</p>\n</div>\n<div class=\"column\">\n<p>Treatment<span data-preserver-spaces=\"true\">\u00a0of Chagas disease is most effective when administered\u00a0</span><strong><span data-preserver-spaces=\"true\">early</span></strong><span data-preserver-spaces=\"true\">\u00a0in the course of infection</span><span data-preserver-spaces=\"true\">\u00a0and has a lesser efficacy in chronic Chagas.\u00a0</span><strong>Benznidazole</strong> and<strong>\u00a0nifurtimox</strong> can be used for the treatment.</p>\n</div>\n</div>\n</div>\n</div>\n<p>The image given below shows a reduviid bug.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c2c67379b29641b19bcc3b6f32bd2035.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5ea8930a1605410294bf509bdbfcf7fbx600x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d342af277a324a33b0b3042b2baf21c9x800x450.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/21155649b31c4c3fbc660c7cc860de0cx564x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/41202a7328ba48d6b616ec99482a88c1x720x480.JPEG"
    ]
  },
  {
    "text": "Which of the following is the most common extracranial solid tumor in the pediatric age group?",
    "choices": [
      {
        "id": 1,
        "text": "Malignant bone tumors"
      },
      {
        "id": 2,
        "text": "Wilms tumor"
      },
      {
        "id": 3,
        "text": "Retinoblastoma"
      },
      {
        "id": 4,
        "text": "Neuroblastoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Neuroblastoma </strong>is the <strong>most common extracranial solid tumor</strong> in children and the most commonly diagnosed malignancy in infants. It is an embryonal cancer of the peripheral nervous system.</p>\n<p>The signs and symptoms depend on the location of the tumor and the extent of the disease. Neuroblastomas originating from the superior cervical ganglion can present with <strong>Horner syndrome</strong>.</p>\n<p><strong>Metastatic disease</strong>&nbsp;can cause a variety of signs and symptoms, including the following</p>\n<div class=\"ng-scope\">\n<ul>\n<li>Fever</li>\n<li>Irritability</li>\n<li>Failure to thrive</li>\n<li>Bone pain</li>\n<li>Cytopenia</li>\n<li>Bluish subcutaneous nodules</li>\n<li><strong>Orbital proptosis, and periorbital ecchymoses</strong></li>\n</ul>\n<p>Rapid dancing<strong>&nbsp;eye movements</strong>&nbsp;(opsoclonus), rhythmic&nbsp;<strong>jerking of limbs/trunk</strong>&nbsp;(myoclonus), and<strong>&nbsp;ataxia</strong>&nbsp;are characteristic of the&nbsp;<strong>opsoclonus-myoclonus-ataxia syndrome</strong>&nbsp;(OMA).&nbsp;It is a&nbsp;<strong>paraneoplastic syndrome</strong>&nbsp;of autoimmune origin with a strong association with&nbsp;<strong>neuroblastomas</strong>.</p>\n<p>Some neuroblastomas may undergo <strong>spontaneous regression</strong>,&nbsp;whereas some may be unresponsive to therapy and run a very aggressive course.</p>\n<table style=\"height: 172px; width: 401px;\">\n<tbody>\n<tr>\n<td style=\"width: 209px;\">&nbsp;</td>\n<td style=\"width: 99.734375px;\"><strong>Neuroblastoma</strong></td>\n<td style=\"width: 149.265625px;\"><strong>Wilm's tumor (nephroblastoma)</strong></td>\n</tr>\n<tr>\n<td style=\"width: 209px;\">Age group</td>\n<td style=\"width: 99.734375px;\">&lt;2 years of age</td>\n<td style=\"width: 149.265625px;\">Peaks at 3-4 years of age</td>\n</tr>\n<tr>\n<td style=\"width: 209px;\">Calcifications</td>\n<td style=\"width: 99.734375px;\">Very common (90%)</td>\n<td style=\"width: 149.265625px;\">Uncommon (10-15%)</td>\n</tr>\n<tr>\n<td style=\"width: 209px;\">Margins</td>\n<td style=\"width: 99.734375px;\">\n<p>Poorly marginated</p>\n</td>\n<td style=\"width: 149.265625px;\">\n<p>Well circumscribed</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 209px;\">Vascular invasion</td>\n<td style=\"width: 99.734375px;\">\n<p>Encases vascular structures but does not invade them</p>\n</td>\n<td style=\"width: 149.265625px;\">\n<p>Extends into the IVC and renal vein</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 209px;\">Relation with surrounding structures</td>\n<td style=\"width: 99.734375px;\">\n<p>Elevates the aorta away from the vertebral column</p>\n<p>Commonly crosses the midline, especially behind the aorta</p>\n</td>\n<td style=\"width: 149.265625px;\">\n<p>Displaces adjacent structures without insinuating between them</p>\n<p>Forms the claw sign with the kidney</p>\n</td>\n</tr>\n</tbody>\n</table>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 43-year-old chronic alcoholic patient is brought to the emergency with an altered sensorium after he had three episodes of vomiting bright red blood. On arrival, his pulse rate was 110 beats per minute and blood pressure was 80/50 mm of Hg. The patient was immediately intubated and stabilized with IV fluids. Intravenous octreotide was initiated. After the patient was stabilized, an endoscopy was performed which showed multiple bleeding esophageal varices. There was no evidence of esophageal tears or gastric and duodenal ulcers.  Band ligation therapy was performed on endoscopy. Abdominal ultrasound was done and showed a shrunken, nodular liver, splenomegaly, and moderate ascites. Which of the following medicines would be best suited in this patient to decrease the risk of recurrent variceal bleeding?",
    "choices": [
      {
        "id": 1,
        "text": "Tab Spironolactone 50 mg BD"
      },
      {
        "id": 2,
        "text": "Tab Menadione 100 mcg OD"
      },
      {
        "id": 3,
        "text": "Tab Rabeprazole 20 mg OD"
      },
      {
        "id": 4,
        "text": "Tab Propranolol 20 mg BD"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Non-selective beta-blockers, </strong>like <strong>Propranolol</strong>, can be used&nbsp;to reduce the <strong>risk of recurrent bleeding</strong> in patients with esophageal varices.</p>\n<p>Esophageal varices are a known complication of portal hypertension secondary to liver cirrhosis. Treatment for esophageal varices can be broadly divided into primary prophylaxis and prevention of rebleeding.</p>\n<p>Primary prophylaxis is used for patients who have not had acute bleeding but have evidence of esophageal varices on endoscopy. Prevention of rebleeding in patients who have already had an acute bleeding episode is called prevention of rebleeding or secondary prophylaxis.&nbsp;</p>\n<p>Prophylactic therapies to reduce recurrent variceal bleeding include:</p>\n<ul>\n<li>Non-selective beta-blockers like <strong>propranolol, nadolol</strong> - used in the medical prophylaxis of esophageal varices as they <strong>lower</strong> the pressure in the splanchnic system (<strong>portal venous pressure</strong>)</li>\n<li><strong>Endoscopic variceal ligation</strong> - indicated in patients with <strong>large varices</strong> and a high risk of bleeding</li>\n</ul>\n<p>In this patient with altered sensorium, intubation is done to reduce the risk of aspiration. IV fluids and blood products are started to stabilize the patient hemodynamically. Antibiotics must be started simultaneously as they are known to reduce the risk of infection, rebleeding, and mortality. Injection<strong> Octreotide </strong>(somatostatin analogue)&nbsp;or other vasoconstrictors like<strong> terlipressin</strong>&nbsp;(vasopressin analogue) is started through intravenous route for patients who are not stable to undergo endoscopy as it is known to reduce the portal venous pressure and control the bleeding. Balloon tamponade (image below) can be used in patients who are not able to undergo endoscopic therapy. Once the patient is stabilized, endoscopic band ligation is done to control the acute bleeding varices.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/296acb56045d4ce2b9ea3cd301ec1f4dx1279x1216.JPEG"
    ]
  },
  {
    "text": "Which of the following glands is involved in the chronic non-suppurative lipogranulomatous inflammatory condition that presents as shown below?",
    "choices": [
      {
        "id": 1,
        "text": "Gland of wolfring"
      },
      {
        "id": 2,
        "text": "Zeis gland"
      },
      {
        "id": 3,
        "text": "Meibomian gland"
      },
      {
        "id": 4,
        "text": "Gland of krause"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>chalazion, </strong>shown in the image above, is a <strong>chronic non-suppurative lipogranulomatous inflammation</strong> of the <strong>Meibomian gland</strong>.</p>\n<p>Retention of the meibomian gland secretions may sometimes lead to a granulomatous reaction in the same. Chalazion may be single or multiple. Although they may reduce in size over the course of few months, the complete spontaneous resolution does not occur, and therefore might require intervention.\u00a0</p>\n<p>Treatment of chalazion includes injection of intralesional triamcinolone or curettage.</p>\n<p>Sometimes, the chalazion may become secondarily infected and forms the <strong>h</strong><strong>ordeolum internum </strong>which\u00a0is an acute\u00a0<strong>suppurative</strong> inflammation of the <strong>meibomian gland,</strong> associated with blockage of the duct. It presents with a swelling similar to a chalazion, but more inflamed with pus pointing on the conjunctival surface. It can be treated conservatively with oral antibiotics and hot fomentation or with an incision and drainage.</p>\n<p>An image of hordeolum internum is shown below-\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/927eef0ca5e6462d91ded7b8f71a717a.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d406b4a37fc5483d891476245a4614b5x600x450.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/12f15e28f0174428a70faaae1c86bf87x548x448.PNG"
    ]
  },
  {
    "text": "A 17-year-old female patient has not attained menarche. Examination reveals short stature, webbed neck, low posterior hairline, widely spaced nipples, no axillary or pubic hair, and normal external genitalia. USG abdomen shows a small uterus and streak ovaries. FSH and LH are increased. What is the likely cause of amenorrhea?",
    "choices": [
      {
        "id": 1,
        "text": "Primary hypergonadotropic hypogonadism"
      },
      {
        "id": 2,
        "text": "Secondary hypergonadotropic hypogonadism"
      },
      {
        "id": 3,
        "text": "Inherited hypogonadotropic hypogonadism"
      },
      {
        "id": 4,
        "text": "Functional hypogonadotropic hypogonadism"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The likely cause of amenorrhea in this patient is <strong>primary</strong>&nbsp;<strong>hypergonadotropic hypogonadism</strong>.&nbsp;</p>\n<p><strong>Primary amenorrhea</strong> refers to the <strong>failure</strong> of <strong>onset</strong> of <strong>menstruation, beyond the age of 16 years</strong> regardless of the development of secondary sexual characteristics. This patient's clinical picture of amenorrhea, short stature, webbed neck,&nbsp;low posterior hairline, widely spaced nipples, and lack of secondary sexual characteristics is seen in <strong>Turner's syndrome.</strong> Turner's syndrome is a chromosomal abnormality with partial or complete monosomy of the X chromosome (45+XO).</p>\n<p>In Turner's syndrome, <strong>gonadal dysgenesis</strong> causes primary ovarian failure that is <strong>hypogonadism</strong>. The levels of follicle-stimulating hormone<strong> (FSH), </strong>and luteinizing hormone <strong>(LH)&nbsp;</strong>are indicative of the cause of hypogonadism. Increased levels of FSH and LH as seen in this patient are indicative of hypergonadotropic hypogonadism. Hypergonadotropic hypogonadism is defined as 1) a decrease or absence in ovarian function and 2) due to absent negative sex-steroid feedback.&nbsp;</p>\n<p>The pathophysiology in Turner's syndrome is<strong>&nbsp;</strong>primary hypergonadotropic hypogonadism where there is&nbsp;<strong>oocyte</strong>&nbsp;<strong>atresia</strong> and the replacement of ovaries by <strong>fibrous streaks.</strong> This causes a decrease in serum estrogen levels which by <strong>negative feedback</strong>&nbsp;causes a <strong>rise in g</strong>onadotropin-releasing hormone<strong> (GnRH), </strong><strong>FSH, </strong>and<strong>&nbsp;</strong><strong>LH </strong>(gonadotropic hormones)<strong>&nbsp;</strong>as seen in this patient. <strong>Hypogonadism with</strong> a <strong>rise</strong> in <strong>gonadotropic hormones</strong> is known as <strong>hypergonadotropic hypogonadism</strong>.</p>\n<p>Other options-</p>\n<p>Option (B): <strong>Secondary hypergonadotropic hypogonadism</strong>&nbsp;patients also present with primary ovarian failure with increased levels of FSH and LH. Secondary hypergonadotropic hypogonadism is seen in damage to the gonads as seen post-chemotherapy, radiation, infection, or in autoimmune disorders. This patient has no history suggestive of a secondary cause.</p>\n<p>Options (C and D):<strong> Hypogonadotropic hypogonadism</strong> results when there is a primary <strong>abnormality</strong> in the <strong>hypothalamic-pituitary axis</strong>. Loss of hypothalamic function causes a decrease in the production of GnRH or pituitary dysfunction causes <strong>decreased</strong> production of <strong>FSH and LH</strong> which results in decreased ovarian function and reduced serum estrogen levels. It can be divided into:</p>\n<ul>\n<li>Inherited hypothalamic abnormalities:&nbsp;<strong>Kallmann's syndrome</strong>&nbsp;(Option C)</li>\n<li>Acquired (functional) hypothalamic dysfunction:&nbsp;<strong>eating disorders</strong>, in patients who <strong>exercise excessively</strong>, and during <strong>periods of stress </strong>(Option D). Although this patient is an athlete, her FSH and LH levels are increased suggesting hypergonadotropism.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following findings is not suggestive of antemortem hanging?",
    "choices": [
      {
        "id": 1,
        "text": "Multiple bruises on neck with absence of vital reaction"
      },
      {
        "id": 2,
        "text": "Dilation of one eye and other eye being closed"
      },
      {
        "id": 3,
        "text": "Dribbling of saliva"
      },
      {
        "id": 4,
        "text": "Area of hypostasis limited to legs and hands with a pale face"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the case of <strong>antemortem</strong> <strong>hanging</strong>,<strong>&nbsp;injuries</strong> are associated with the<strong> presence</strong> of a <strong>vital reaction</strong>.&nbsp;</p>\n<p class=\"p1\"><strong>Eyes</strong> may show the following findings in <strong>antemortem hanging:</strong></p>\n<ul>\n<li class=\"p1\"><span style=\"font-size: 14px;\"><strong>La facies sympathique- </strong>in case of&nbsp;</span>hanging, one of the eyes may be opened with <strong>dilated pupil,</strong> while the other eye may be closed. This occurs due to the <strong>pressure</strong> of the ligature knot on the <strong>cervical sympathetic ganglia</strong> in the neck. Thus, on the side on which the ligature knot presses the cervical sympathetic ganglia, the eye remains open with dilatation of its pupil. It is a sign of antemortem hanging.</li>\n<li class=\"p1\">Subconjunctival <strong>hemorrhages</strong></li>\n<li class=\"p1\"><strong>Prominent</strong> eyeballs</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/be1d44c262434804aa43ece03b7548c6x1280x1320.JPEG"
    ]
  },
  {
    "text": "A 48-year-old man with a cold nodule on a radio-iodine scan was taken for thyroidectomy surgery. During the operation, the young surgeon accidentally cut the marked nerve on the left side. Postoperatively the patient develops hoarseness of voice. On examination, the affected vocal cord was in a paramedian position and did not move laterally during deep inspiration. The patient was advised speech therapy. This nerve injury had resulted in an impairment of the function of all of the following except?",
    "choices": [
      {
        "id": 1,
        "text": "Cricothyroid"
      },
      {
        "id": 2,
        "text": "Posterior cricoarytenoid"
      },
      {
        "id": 3,
        "text": "Interarytenoid"
      },
      {
        "id": 4,
        "text": "Lateral cricoarytenoid"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical history along with the gross image points towards a diagnosis of left\u00a0<strong>recurrent laryngeal nerve palsy</strong>. All laryngeal muscles are supplied by the<strong>\u00a0ipsilateral recurrent laryngeal nerve</strong> (RLN),\u00a0<strong>except cricothyroid </strong>which is supplied by the <strong>superior laryngeal nerve\u00a0</strong>(SLN). Both SLN and RLN are branches of the vagus nerve.</p>\n<p>The recurrent laryngeal nerves (RLN) on the right and the left side follow different courses-</p>\n<ul>\n<li><strong>Right RLN</strong> takes origin in the root of the neck, winds around the first part of the subclavian artery, and then ascends in the tracheoesophageal groove.\u00a0</li>\n<li><strong>Left RLN</strong> takes origin in the thorax, winds around the arch of the aorta, and then ascends in the tracheoesophageal groove. Since it has a longer course, it is more likely to be injured.</li>\n</ul>\n<p>In case of RLN injury during surgery, if both ends are identified, they should be reanastomosed. If a length of the nerve has been excised during surgery, anastomosis with ansa cervicalis maybe considered. This does not return the mobility of the vocal cords, however neurological input is maintained.</p>\n<p>In unilateral RLN palsy, the normal vocal cord crosses the midline and comes closer to the paralyzed one during speech output, as a compensatory measure. This improves the voice over time without any surgical intervention. However, in the case of a persistent defect after a wait of 6-12 months, a type 1 laryngoplasty maybe considered.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/47901e56e3744e8d8574becbebc614e3.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f12d10e47f6046789b4670c2db91dc7ex800x600.JPEG"
    ]
  },
  {
    "text": "A 70-year-old woman, Mrs. Veena, was brought to your office by her son for a routine check-up. On asking if they had any concerns, he says that his mother was previously very outgoing but has preferred being alone for the past few years. She has stopped attending social events with her friends, because she says that she cannot understand them anymore. She avoids interacting with people and only interacts with her son if he is speaking to her when they are alone. Even during such interactions, she asks him to repeat what he has said multiple times. There are no other complaints. On performing a quick tuning fork test, you find that the Rinne test is positive on both sides (AC>BC), and there is no lateralization on Weber's test. Audiometry results are pending. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Chronic suppurative otitis media"
      },
      {
        "id": 2,
        "text": "Impacted ear wax"
      },
      {
        "id": 3,
        "text": "Presbycusis"
      },
      {
        "id": 4,
        "text": "Otosclerosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This clinical vignette along with tuning fork test findings suggestive of sensorineural hearing loss points towards a diagnosis of <strong>presbycusis</strong>. It is a type of <strong>sensorineural hearing loss</strong> associated with the physiological aging process in the ear.</p>\n<p>The pathogenesis of Presbycusis includes-</p>\n<ul>\n<li>Degeneration of the organ of Corti</li>\n<li>Degeneration of the spiral ganglion</li>\n<li>Degeneration of the stria vascularis</li>\n<li>Stiffening of the basilar membrane.</li>\n</ul>\n<p>Clinically, it usually manifests in elderly adults over 65 years of age. It is <strong>gradually progressive</strong> and tends to affect the <strong>higher frequencies first</strong>. Characteristically, patients with presbycusis have significant <strong>difficulty hearing</strong> in the presence of <strong>background noise</strong>. Additionally, patients with presbycusis may also have a<strong> paradoxical hypersensitivity </strong>to <strong>loud sounds.</strong>&nbsp;This is due to the recruitment phenomenon. They may also have tinnitus.&nbsp;It significantly affects the quality of life and patients tend to present with <strong>progressive social withdrawal</strong>.&nbsp;</p>\n<div class=\"page\" title=\"Page 54\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>On examination, tuning fork tests will show a picture of symmetrical sensorineural hearing loss with</p>\n<ul>\n<li><strong>Positive Rinne's test</strong> in both ears, meaning the air conduction is better than bone conduction (AC&gt;BC) in both ears</li>\n<li><strong>Weber's test</strong> will show <strong>no lateralization</strong>, meaning the sound is heard equally on both sides.&nbsp;</li>\n</ul>\n<p>Diagnosis can be <strong>confirmed</strong> with <strong>audiometry</strong>. Treatment of presbycusis mainly includes using a hearing aid.&nbsp;</p>\n<p>Other options- All of the given options, except for presbycusis typically cause a <strong>conductive type</strong> of hearing loss. Tuning fork tests in a conductive hearing loss will show Rinne's negative i.e., BC&gt;AC. Weber's test will show lateralization to the diseased ear.&nbsp;</p>\n<p>Option A - Chronic suppurative otitis media will present with a history of ear discharge with a conductive type of hearing loss.</p>\n<p>Option B - Impacted ear wax completely occluding the external ear canal is a common cause of conductive hearing loss.</p>\n<p>Option D - Otosclerosis&nbsp;is a disease of the otic capsule that&nbsp;usually presents with bilateral progressive conductive hearing loss. Patients with otosclerosis characteristically hear better in noisy than in quiet surroundings (Paracusis Willisii).&nbsp;Tuning fork tests show&nbsp;negative Rinne's test i.e. BC &gt; AC. Weber's may be central as this is typically symmetrical.</p>\n<p>&nbsp;&nbsp;</p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 61-year-old daily wage laborer presented with complaints of abdominal discomfort for the past 2 months. He also complains of a decrease in weight and loss of appetite associated with early satiety. He feels bloated and is having vomiting almost daily for the past 4 days.  He is under treatment for acidity and retrosternal burning pain for the past 2 years. An upper GI endoscopy with biopsy is done to reveal the following changes in the specimen from the distal antrum.  Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Menetrier disease"
      },
      {
        "id": 2,
        "text": "Gastric adenocarcinoma"
      },
      {
        "id": 3,
        "text": "Gastric ulcer associated with resistant H. pylori"
      },
      {
        "id": 4,
        "text": "Gastric antral vascular ectasia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical history along with endoscopic biopsy findings showing signet ring cells is suggestive of <strong>diffuse</strong> <strong>gastric</strong> <strong>adenocarcinoma</strong>.</p>\n<p><strong>Gastric</strong> <strong>adenocarcinoma</strong> is the most common malignancy of the stomach and constitutes more than 90% of all gastric cancers. Based on the gross appearance, the gastric adenoma is classified into two types:</p>\n<ul>\n<li><strong>Diffuse</strong> <strong>type</strong>, which is characterized by infiltrates and thickening of the gastric wall.</li>\n<li><strong>Intestinal</strong> <strong>type</strong>, which is characterized by bulky masses</li>\n</ul>\n<p><strong>Diffuse adenocarcinoma</strong>:</p>\n<p>In diffuse gastric adenocarcinoma, the wall of the stomach is thickened and firm, accounting for the radiologic <strong>\u201cleather bottle\u201d appearance </strong>as shown in the image below<strong>.</strong> When the entire stomach is involved, the term <strong>linitis</strong> <strong>plastica</strong> is applied.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b8c1545c0f3b42e1a43bbc6b8d1acd16.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a88e7682449d4649bfc1158adcaa0ba9x347x360.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3dcdc4c2bdce4d39938e19aa9e76decax360x207.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/586165c337e64998a2c4796294cfb023x375x470.PNG"
    ]
  },
  {
    "text": "Shanti is a 26-year-old homemaker. She is pregnant for the first time and very cautious about her and her baby's health. She is currently in her 6th month of gestation and presented for TT immunization. On examination, there are no danger signs of pregnancy, fetal growth is adequate and her vitals are within the normal range.  You should advise the following regarding her nutrition except?",
    "choices": [
      {
        "id": 1,
        "text": "Take one extra meal daily to make up for increase in calories by 350 Kilo Calories per day"
      },
      {
        "id": 2,
        "text": "Salt restriction to be practised to prevent gestational hypertension"
      },
      {
        "id": 3,
        "text": "Take Iron, folic acid tablets once daily after meal and calcium tablets twice daily at different times"
      },
      {
        "id": 4,
        "text": "To take daal or eggs as per preference to increase protein intake by about 7g daily"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>No convincing evidence exists that dietary salt reduction helps in the prevention or management of hypertension during pregnancy. Salt intake should be continued as for a non-pregnant female (&lt;5g salt/&lt;2g Sodium).\u00a0</p>\n<p>In the given case of a pregnant lady in her second trimester, the following advice needs to be given-</p>\n<ul>\n<li>An addition of <strong>350</strong>\u00a0kcal/day is recommended during\u00a0pregnancy which can be done by taking nutrient-dense foods or by taking one extra meal daily</li>\n<li>Protein intake should be increased by 0.5g/day in 1st trimester, 9.5g/day in the 2<sup>nd</sup> trimester, and 22.7 g/day in 3<sup>rd</sup> trimester</li>\n<li>Visible fat intake should be increased to 30g/day</li>\n<li>To take seasonal fruits and vegetables to make up for micronutrients and dietary fiber</li>\n<li>8-12 glasses of water per day to prevent constipation</li>\n<li>Iron-Folic acid tablets to be taken once daily as prescribed. Oral chewable tablets containing 500mg calcium and 250IU vitamin D3 to be taken twice daily. Iron and calcium preparations to be taken at different times as calcium inhibits iron absorption.</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5-year-old boy was brought by his mother with a 2-month history of an enlarging scalp lesion associated with pain. There is associated generalized lymphadenopathy. There is no history of trauma to the head or scalp. An X-ray of the skull is done to reveal punched-out lytic lesions. A biopsy of the skull lesion is done and electron micrographic findings are shown below. The condition occurs due to the proliferation of a special type of immature dendritic cells, whose normal function is ________?",
    "choices": [
      {
        "id": 1,
        "text": "Production of immunoglobulins"
      },
      {
        "id": 2,
        "text": "Presentation of antigens"
      },
      {
        "id": 3,
        "text": "Secretion of histamine"
      },
      {
        "id": 4,
        "text": "Secretion of major basic protein"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario with the x-ray findings of&nbsp;<strong>punched out lytic lesion </strong>and<strong> Birbeck granules </strong>on Electron microscopy&nbsp;is suggestive of <strong>Langerhans cell histiocytosis</strong> (LCH). The condition occurs due to the proliferation of a special type of immature dendritic cells, called&nbsp;<strong>Langerhans cells&nbsp;</strong>whose normal function is to present antigens.</p>\n<p>LCH is a rare histiocytic disorder characterized by <strong>single or multiple osteolytic bone lesions</strong> that can infiltrate nearly every organ, most notably the skin (of the scalp), lungs, thymus, liver, spleen, bone marrow, or the central nervous system. LCH is so named because of its resemblance to the Langerhan&rsquo;s cells, which are specialized dendritic cells found in the skin and mucosa.</p>\n<p class=\"p1\">&nbsp;It can present as the following clinical entities:</p>\n<ul>\n<li class=\"p1\">Multifocal multisystem Langerhans cell histiocytosis (Letterer-Siwe disease)</li>\n<li class=\"p1\">Unifocal and multifocal uni system Langerhans cell histiocytosis (eosinophilic granuloma)</li>\n<li class=\"p1\">Pulmonary Langerhans cell histiocytosis</li>\n</ul>\n<p>Histopathologically,&nbsp;Langerhans cells have a single large nucleus with a characteristic folded or grooved nucleus (&ldquo;<strong>coffee-bean</strong>&rdquo; appearance) with small inconspicuous nucleoli. The&nbsp;specific markers for LCH are&nbsp;<strong>CD1a</strong>&nbsp;and&nbsp;<strong>langerin</strong>&nbsp;(CD207)</p>\n<p>On electron microscopy, the presence of&nbsp;<strong>Birbeck granules</strong>&nbsp;in the cytoplasm is characteristic. Birbeck granules are pentalaminar tubules, often with a dilated terminal end producing a&nbsp;<strong>tennis racket-like appearance</strong>, which contains the protein&nbsp;<strong>langerin (CD207).</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d3d79ccff0cd430d8d2080955f58d9de.jpg"
    ],
    "explanation_images": []
  },
  {
    "text": "An 18-year-old boy came to the OPD with a neck swelling. The boy is tall, with long slender fingers, a pigeon chest, and a high-arched palate. There were multiple sessile, painless swellings in the oral cavity. The patient's father has recently had episodes of throbbing headache, palpitations, and dizziness associated with a rise in blood pressure and was diagnosed with an adrenal tumor. The patient's paternal aunt died of thyroid malignancy. On examination, his pulse rate was 88 beats per minute and blood pressure was 128/72 mm of Hg. Neck examination revealed a  firm and mobile swelling extending from the midline to the anterior border of sternocleidomastoid and extending from 3 cm below the hyoid to 2 cm above the suprasternal notch.  Biopsy from the patient's thyroid gland was done under ultrasound guidance and is as shown below. What is the type of thyroid tumor?",
    "choices": [
      {
        "id": 1,
        "text": "Papillary carcinoma thyroid"
      },
      {
        "id": 2,
        "text": "Follicular cell carcinoma thyroid"
      },
      {
        "id": 3,
        "text": "Medullary carcinoma thyroid"
      },
      {
        "id": 4,
        "text": "Anaplastic carcinoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given histopathology picture shows the presence of\u00a0<strong>amyloid-rich stroma</strong>\u00a0(pinkish material) and nests of polygonal cells which is characteristic of\u00a0<strong>medullary thyroid carcinoma\u00a0</strong>(MTC).</p>\n<p>Medullary carcinoma tumors of the thyroid are neuroendocrine tumors that are derived from parafollicular C cells, that secrete calcitonin.</p>\n<p>Histopathology shows <strong>polygonal to spindle-shaped cells</strong> which form nests, trabeculae, or follicles. <strong>Amyloid deposits</strong> that are derived from the <strong>altered calcitonin</strong> molecules are present in the stroma. Calcitonin in the tumor cells and stroma is easily demonstratable by immunohistochemistry.</p>\n<p>Most of the MTCs occur sporadically<strong>.</strong> However, around a quarter of the cancers are associated with familial multiple endocrine neoplasia (MEN) syndrome:\u00a0<strong>MEN 2A and MEN 2B.\u00a0</strong>Patients with sporadic MTC present at an older age, whereas patients with familial MTC usually present at a younger age. They frequently present as a\u00a0neck mass\u00a0that may be associated with cervical lymphadenopathy. With the enlargement of the nodule patients may have dysphagia and dyspnea.\u00a0</p>\n<p>In this patient with <strong>marfanoid habitus</strong> (increased height, long slender fingers, pigeon chest, crowded teeth, and high arch palate) and multiple oral <strong>mucosal neuromas</strong> (sessile painless swellings), a medullary carcinoma thyroid rises a suspicion of MEN 2B syndrome. This is supported by the <strong>family history of pheochromocytoma</strong> (repeated history of episodic headaches, palpitations, and rise in blood pressure) in the father and malignant thyroid cancer (probably medullary carcinoma) in paternal aunt supports the diagnosis of MEN 2B. MEN 2B is inherited in an <strong>autosomal dominant</strong> pattern and due to a mutation in <strong>RET oncogene.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/18e6966e37014ba09288281d4de63305.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f3e7f4c328fc4886935084a2aa2aa9b3x796x599.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/42d38c5efaab46d69c615394c4a6dad7x800x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9b23da2dd6f44c3ebae4bd6284c5df33x1280x853.JPEG"
    ]
  },
  {
    "text": "A 45-year-old obese lady with diabetes presented to you for a routine checkup. She brings along reports of HbA1C which is 6.5 and lipid profile which shows TG-250mg/dl, LDL-160mg/dl, and HDL-45mg/dl. She is maintaining well on Metformin 500mg and Glibenclamide 5mg and Atorvastatin 20mg. On examination, she has a pulse of 70bpm and a BP of 160/90mmHg. You start her on Telmisartan 20mg for her hypertension and ask her to follow up after 1 month. She however presented one week later with complaints of anxiety, sweating, palpitation, weakness. Her BP is 150/90mmHg and her pulse is 90bpm. Her blood glucose was measured to be 50mg/dl. Prompt administration of glucose solution was done which relived the symptoms. A history revealed she had started taking aspirin for her toothache on the advice of a local chemist. Which of the following is responsible for her symptoms?",
    "choices": [
      {
        "id": 1,
        "text": "Aspirin decreases the antihypertensive effect of telmisartan resulting in symptoms of anxiety and palpitations"
      },
      {
        "id": 2,
        "text": "Telmisartan predisposes to statin toxicity resulting in the current symptoms"
      },
      {
        "id": 3,
        "text": "Combination of statins and aspirin causes cardiovascular potentiation and resulted in anxiety and palpitations"
      },
      {
        "id": 4,
        "text": "Aspirin potentiates the action of glibenclamide causing hypoglycemia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The clinical history of this patient on multiple medications including sulfonylureas(glibenclamide) presenting with hypoglycemia, points towards potentiation of its action, most likely due to aspirin. Aspirin is known to displace sulfonylureas out of plasma protein binding, resulting in toxicity-like features of glibenclamide.</p>\n<p>Antidiabetic Drugs that pose a risk of leading to hypoglycemia (<strong>insulin secretagogue</strong>):</p>\n<ul>\n<li><strong>Sulfonylureas</strong></li>\n<li>Meglitinides: Nateglinide, Repaglinide</li>\n</ul>\n<p>Sulfonylureas are known to interact with multiple medications as given below:</p>\n<p>Drugs that <strong>increase</strong> the action of sulfonylureas</p>\n<ul>\n<li>Displace from <strong>protein binding</strong>: Phenylbutazone, sulfinpyrazone, salicylates, sulfonamides.</li>\n<li><strong>Inhibit metabolism</strong>/excretion: Cimetidine, ketoconazole, sulfonamides, warfarin, chloramphenicol, acute alcohol intake (also synergizes by causing hypoglycemia).</li>\n<li><strong>Synergize</strong> with or prolong pharmacodynamic action: Salicylates, propranolol (cardioselective \u03b21 blockers are less liable), lithium, theophylline, alcohol (by inhibiting gluconeogenesis).</li>\n</ul>\n<p>Drugs that <strong>decrease</strong> the function of Sulfonylureas (worsen diabetes)</p>\n<ul>\n<li><strong>Induce metabolism</strong>: Phenobarbitone, phenytoin, rifampicin, chronic alcoholism.</li>\n<li><strong>Opposite action</strong> suppresses insulin release: Corticosteroids. thiazides, furosemide, oral contraceptives.</li>\n</ul>\n<p>Other options</p>\n<p>Aspirin might decrease the antihypertensive effect of ACE inhibitors or ARBs. However, these symptoms are known to be warning signs of hypoglycemia. Hence this interaction is less likely.</p>\n<p>No interaction between telmisartan and atorvastatin resulting in increased toxicity of statin is known.</p>\n<p>Aspirin is combined with statin without any interaction causing cardiovascular potentiation.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Neet 2021 Mini Test 4  (20 Questions)';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2020-21"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>