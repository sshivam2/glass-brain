<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>115 Forensic Medicine Ini-Cet 2022 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Forensic Medicine
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">28</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Sagar was being tried in a  court for the murder of Mohan in the park. Shikhar appeared in court and said he saw Sagar carrying a knife in his hand while in the park. What is this evidence known as?",
    "choices": [
      {
        "id": 1,
        "text": "Direct"
      },
      {
        "id": 2,
        "text": "Indirect"
      },
      {
        "id": 3,
        "text": "Hostile"
      },
      {
        "id": 4,
        "text": "Hearsay"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This evidence is known as <strong>indirect</strong> evidence. Indirect evidence is also known as circumstantial evidence.&nbsp;It is not the direct testimony of an eyewitness. It has an effect on other facts and subsidiary facts which are depended upon as consistent.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A: <strong>Direct</strong> evidence is the evidence of a fact that is actually in issue. Eg: The witness saw A shooting B, prescription, consent form</p>\n<p>Option C:&nbsp;<strong>Hostile </strong>evidence is given by someone who is supposed to have some interest or motive for hiding part of the truth. He might give completely false evidence too.&nbsp;</p>\n<p>Option D: <strong>Hearsay</strong>&nbsp;evidence is given by someone&nbsp;about something that he did not personally witness. Sometimes it might be obtained from a third party. It is presented in the court to claim&nbsp;that the facts contained in the statement are true.&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Fingerprint first develops in how many weeks of intrauterine life?",
    "choices": [
      {
        "id": 1,
        "text": "12-16"
      },
      {
        "id": 2,
        "text": "20-24"
      },
      {
        "id": 3,
        "text": "28-32"
      },
      {
        "id": 4,
        "text": "32-36"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Changes might occur in fingerprints in certain conditions, some of them are given below:&nbsp;</p>\n<table style=\"width: 578px;\">\n<tbody>\n<tr style=\"height: 55.7812px;\">\n<td style=\"width: 272.188px; text-align: left; height: 55.7812px;\">\n<p>Fingerprint changes</p>\n</td>\n<td style=\"width: 307.812px; text-align: left; height: 55.7812px;\">\n<p>Condition</p>\n</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 272.188px; text-align: left; height: 18px;\">&nbsp;Incomplete atrophy of ridges</td>\n<td style=\"width: 307.812px; text-align: left; height: 18px;\">Dermatitis</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 272.188px; text-align: left; height: 18px;\">Loss of pattern with ridge atrophy</td>\n<td style=\"width: 307.812px; text-align: left; height: 18px;\">Celiac disease</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 272.188px; text-align: left; height: 18px;\">Altered ridges</td>\n<td style=\"width: 307.812px; text-align: left; height: 18px;\">Scleroderma</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 272.188px; text-align: left; height: 18px;\">&nbsp;Permanent loss of fingerprints</td>\n<td style=\"width: 307.812px; text-align: left; height: 18px;\">Radiation</td>\n</tr>\n<tr style=\"height: 36px;\">\n<td style=\"width: 272.188px; text-align: left; height: 36px;\">Distance between ridges changed but pattern is retained</td>\n<td style=\"width: 307.812px; text-align: left; height: 36px;\">Acromegaly&nbsp;</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b5a8635b5d7b44aea71489014dc37f27x1280x2223.PNG"
    ]
  },
  {
    "text": "Identify the given plant.",
    "choices": [
      {
        "id": 1,
        "text": "Datura alba"
      },
      {
        "id": 2,
        "text": "Argemone mexicana"
      },
      {
        "id": 3,
        "text": "Nerium odorum"
      },
      {
        "id": 4,
        "text": "Papaver somniferum"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>&nbsp;</p>\n<p>Option D:&nbsp;<strong>Papaver somniferum</strong> -<strong>&nbsp;</strong>The flowers are white in color. <strong>Opium</strong> is the dry juice of this plant. <strong>Morphine</strong> is isolated from opium. The clinical features include&nbsp;<strong>euphoric</strong> feeling in the&nbsp;stage of excitement followed by headache, giddiness, and a tendency to sleep in the&nbsp;stage of stupor.&nbsp;The <strong>stage&nbsp;of narcosis</strong> is characterized by a patient in a deep coma, who cannot be aroused.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5c191840e19d470ca836757969f016a2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2f00129988684ddd9ebe2ad376f8c657x300x168.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7d6c92f1ac5245d39e1bec8113207b03x1024x768.JPEG"
    ]
  },
  {
    "text": "A male patient was presented with a history of consumption of an unknown substance.  He had increased sweating, lacrimation, diarrhea, muscle weakness, and bradycardia. What's the management?",
    "choices": [
      {
        "id": 1,
        "text": "Atropine"
      },
      {
        "id": 2,
        "text": "Calcium gluconate"
      },
      {
        "id": 3,
        "text": "Pralidoxime"
      },
      {
        "id": 4,
        "text": "Obidoxime"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Other options:</p>\n<p>Option B: <strong>Calcium gluconate&nbsp;</strong>is used as the antidote for <strong>oxalic acid</strong> poisoning.&nbsp;</p>\n<p>Option C: <strong>Pralidoxime&nbsp;</strong>is also used in organophosphate poisoning which is used to counter the <strong>nicotinic</strong> effects of organophosphates.&nbsp;</p>\n<p>Option D:&nbsp;<strong>Obidoxime&nbsp;</strong>is used in&nbsp;organophosphate poisoning if pralidoxime is not available.&nbsp;</p>\n<p>&nbsp;</p>\n<p>Note:&nbsp;In OP poisoning, the frequency of occurrence is Muscarinic --&gt; CNS --&gt; Nicotinic signs and symptoms. The definitive treatment, however, is atropine.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f8c7a953045b4866a3ccb2eb3a0996afx1280x2559.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a feature of cocaine intoxication?",
    "choices": [
      {
        "id": 1,
        "text": "Tingling and numbness of hands and feet"
      },
      {
        "id": 2,
        "text": "Constricted pupils and bradycardia"
      },
      {
        "id": 3,
        "text": "Hypertension"
      },
      {
        "id": 4,
        "text": "Hyperthermia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Constricted pupils and bradycardia are not a feature of cocaine intoxication<strong>. Dilated pupils&nbsp;</strong>and<strong> rapid pulse</strong> are seen in <strong>cocaine intoxication.</strong></p>\n<p>Cocaine is obtained from the leaves of <em>Erythroxylum coca. </em>Cocaine can be administered&nbsp;by&nbsp;<strong>snorting,</strong>&nbsp;<strong>intravenous route,</strong>&nbsp;or&nbsp;<strong>smoking.</strong></p>\n<p>The manifestations of cocaine intoxication occur in two stages- the&nbsp;stage of excitement and the stage of depression.</p>\n<p>In the stage of excitement, the features seen are dry mouth, dysphagia, <strong>tachycardia</strong>, <strong>tachypnea</strong>, <strong>hypertension</strong>,&nbsp;<strong>dilated pupils</strong>, and&nbsp;<strong>increased temperature.</strong> There may be a feeling of well-being, and the patient may be excited, restless, and talkative. This progresses into a calm, dull state.&nbsp;Neurological manifestations include&nbsp;exaggerated reflexes, tremors or convulsions, hallucinations, <strong>tingling</strong>, and&nbsp;<strong>numbness</strong> in the hands and feet.</p>\n<p>The stage of depression is characterized by feeble respiration, excessive sweating, collapse, convulsions, and death.&nbsp;</p>\n<p>The<strong> fatal dose </strong>of cocaine<strong>&nbsp;</strong>is <strong>1g </strong>when taken <strong>orally.&nbsp;</strong>The fatal period ranges from&nbsp;a few minutes to hours.&nbsp;</p>\n<p>Chronic cocaine users may have the feeling of <strong>insects crawling</strong> on their skin or the presence of grains of sand under the skin. This is known as&nbsp;<strong>cocaine bugs</strong> or <strong>Magnan's symptom. </strong>Ulceration of the<strong> nasal septum</strong> may be seen in chronic abusers who sniff cocaine.&nbsp;</p>\n<p>Treatment includes <strong>gastric lavage</strong> with warm water containing potassium permanganate, charcoal, or tannic acid if taken&nbsp;<strong>orally.</strong> When it is through the nose or throat, a&nbsp;<strong>wash with water</strong> is done. In&nbsp;case of <strong>intravenous</strong> intoxication, a<strong>&nbsp;ligature</strong> is applied above the site of the injection.</p>\n<p>The antidote for cocaine intoxication is <strong>inhalational amyl nitrite.&nbsp;</strong>Other measures include control of convulsions, airway and circulatory stabilization, administration of iv thiamine, and naloxone.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following are seen in patients with chronic arsenic poisoning?",
    "choices": [
      {
        "id": 1,
        "text": "1,2,3 are correct"
      },
      {
        "id": 2,
        "text": "2,3 are correct"
      },
      {
        "id": 3,
        "text": "1,4 are correct"
      },
      {
        "id": 4,
        "text": "Only 1 is correct"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Among the given options,<strong> raindrop pigmentation, peripheral neuritis</strong>, and&nbsp;<strong>mees line&nbsp;</strong>are seen in patients with chronic arsenic poisoning.&nbsp;<strong>Luminous vomit&nbsp;</strong>is a feature of<strong>&nbsp;yellow phosphorous poisoning.</strong>&nbsp;</p>\n<p>Arsenic is an odorless, tasteless, metallic poison. Gastrointestinal features of <strong>acute</strong> arsenic poisoning include nausea and vomiting, colicky abdominal pain, and profuse diarrhea with <strong>rice water stools</strong>.</p>\n<p>In <strong>chronic</strong>&nbsp;arsenic poisoning, skin symptoms include erythematous lesions, flushing, and can also lead to hyperkeratotic skin and desquamation. Pigmentation is patchy and resembles <strong>raindrops</strong> on a dusty road. In the distal parts of the body, hyperkeratosis is present.&nbsp; <strong>Mees lines</strong> are transverse white striae of the fingernails, called striate leukonychia. Renal manifestations include chronic <strong>nephritis</strong> and urine contains albumin, casts, etc.&nbsp;</p>\n<p>Arsenic can be detected in the bones for prolonged periods<strong>. </strong>Hence it can be found even in&nbsp;<strong>skeletonized remains</strong> of the body<strong>.&nbsp;Dimercaprol</strong>&nbsp;is the treatment of choice for acute arsenic poisoning.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/74c69ede1931425db6f9c4192891ec35x1280x4902.JPEG"
    ]
  },
  {
    "text": "Post-mortem examination of a patient reveals the following. What is this finding known as?",
    "choices": [
      {
        "id": 1,
        "text": "Hesitation cuts"
      },
      {
        "id": 2,
        "text": "Grazed abrasion"
      },
      {
        "id": 3,
        "text": "Laceration"
      },
      {
        "id": 4,
        "text": "Patterned bruise"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Option D: In&nbsp;<strong>Patterned</strong> bruise, it <strong>mirrors&nbsp;</strong>the pattern of the object used. The tissue is crushed if heavier objects are used and will produce a solid contusion pattern.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/781e54f179f746b1ba789debcc726f4e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/47b52f61d4e7415b9084290de8960490x1109x900.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b83762c197334d5d8a012054cefa9e1fx800x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/307af8ff44e2410b84bae322c7934100x600x782.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a24dc5d87b3b46e6933860d6e2b64c62x1024x768.JPEG"
    ]
  },
  {
    "text": "Poisoning with which of the following agents would cause hypertension?",
    "choices": [
      {
        "id": 1,
        "text": "Organophosphorus"
      },
      {
        "id": 2,
        "text": "Paracetamol"
      },
      {
        "id": 3,
        "text": "Arsenic"
      },
      {
        "id": 4,
        "text": "Cocaine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Other options:</p>\n<p>Option A: <strong>Organophosphorous</strong> poisoning produces autonomic instability. Both tachycardia and bradycardia can be seen, however, usually it is the parasympathetic effects which predominate.</p>\n<p>Option B: <strong>Paracetamol</strong> poisoning causes hypotension, tachycardia, diaphoresis, etc.\u00a0</p>\n<p>Option C: <strong>Arsenic</strong> poisoning causes vasodilation, ventricular tachycardia, ventricular fibrillation, etc.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/eb3a0783dd944158b22a353db4dc45c4x675x900.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2d11259792b9479db228cde7eb8835fcx1280x960.JPEG"
    ]
  },
  {
    "text": "Treatment of choice for acute arsenic poisoning is :",
    "choices": [
      {
        "id": 1,
        "text": "Ipecac"
      },
      {
        "id": 2,
        "text": "Penicillamine"
      },
      {
        "id": 3,
        "text": "Activated charcoal"
      },
      {
        "id": 4,
        "text": "Dimercaprol"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Dimercaprol</strong> is the treatment of choice for acute arsenic poisoning.</p>\n<p>Arsenic is an odorless, tasteless, metallic poison. Gastrointestinal features of&nbsp;<strong>acute</strong>&nbsp;arsenic poisoning include nausea and vomiting, colicky abdominal pain, and profuse diarrhea with&nbsp;<strong>rice water stools</strong>.</p>\n<p>In&nbsp;<strong>chronic</strong>&nbsp;arsenic poisoning, skin symptoms include erythematous lesions, and flushing and can also lead to hyperkeratotic skin and desquamation. Pigmentation is patchy and resembles&nbsp;<strong>raindrops</strong>&nbsp;on a dusty road. In the distal parts of the body, hyperkeratosis is present.&nbsp;&nbsp;<strong>Mees lines</strong>&nbsp;are transverse white striae of the fingernails, called striate leukonychia. Renal manifestations include chronic&nbsp;<strong>nephritis</strong>&nbsp;and urine contains albumin, casts, etc.&nbsp;</p>\n<p>Arsenic can be detected in the bones for prolonged periods<strong>.&nbsp;</strong>Hence it can be found even in&nbsp;<strong>skeletonized remains</strong>&nbsp;of the body<strong>.</strong></p>\n<p>Other options:</p>\n<p>Option A: <strong>Ipecac</strong> is an emetic used in ergot and hydrocarbon poisoning.</p>\n<p>Option B:&nbsp;<strong>Penicillamine&nbsp;</strong>is used in lead poisoning as a chelating agent.&nbsp;</p>\n<p>Option C: <strong>Activated charcoal </strong>acts as an adsorbing agent in many poisonings like aspirin, phenobarbital poisoning, etc.&nbsp;</p>\n<div class=\"h-400-scroll\">&nbsp;</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c7a048ca4dce410aba23f19e275579d6x1280x4902.JPEG"
    ]
  },
  {
    "text": "To detect vaginal cells on a person who is accused of rape,  which test will you use?",
    "choices": [
      {
        "id": 1,
        "text": "Florence"
      },
      {
        "id": 2,
        "text": "Barberio"
      },
      {
        "id": 3,
        "text": "Lugol's"
      },
      {
        "id": 4,
        "text": "Precipitin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Lugol's </strong>iodine\u00a0test will be used to detect the <strong>vaginal cells</strong> present on the penis of a rape accused. It shows <strong>brown</strong> color on filter paper due to the presence of <strong>glycogen</strong> in epithelial cells of the vagina.\u00a0</p>\n<p>Other options:</p>\n<p>Option A:\u00a0<strong>Florence test\u00a0</strong>is used to detect choline in\u00a0that originates from seminal vesicles. It produces dark <strong>brown</strong>, <strong>rhombic</strong>,<strong>\u00a0</strong>or<strong> needle</strong>-shaped<strong> crystals</strong> of choline iodide if <strong>semen</strong> is present.\u00a0</p>\n<p>Option B:<strong> Barberio test\u00a0</strong>is used to detect spermatic fluid. It produces <strong>yellow rhombic crystals </strong>of spermine picrate when picric acid is added to spermatic fluid.<strong>\u00a0</strong></p>\n<p>Option D:\u00a0<strong>Precipitin test\u00a0</strong>is used for <strong>species</strong> identification of semen stain. A positive test will confirm human origin.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of these is not a cardiac poison?",
    "choices": [
      {
        "id": 1,
        "text": "Aconite"
      },
      {
        "id": 2,
        "text": "Cerbera thevetia"
      },
      {
        "id": 3,
        "text": "Nicotiana tabacum"
      },
      {
        "id": 4,
        "text": "Atropa belladonna"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Option C: Nicotine is a plant alkaloid derived from the\u00a0<em><strong>Nicotiana tabacum</strong></em>\u00a0plant, shown in the image below. It is a\u00a0<strong>cardiac poison.</strong></p>\n<p>All components of this plant are poisonous except its ripe seeds. It is a<strong>\u00a0cardiac poison</strong>\u00a0that initially stimulates the <strong>autonomic ganglia</strong> to produce symptoms of acute intoxication (tachycardia, hypotension, tachypnea, nausea, vomiting, abdominal pain, and headache). These symptoms later subside to give way to respiratory depression and collapse.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/162b32f25421420fb41b967796b7c80bx720x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1c83d81d3afb402fb26fbff0f213423dx1280x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/571d363484444f6183d0442f9361c933x1024x768.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cc539217a3d0476f88b84af768b25327x720x962.JPEG"
    ]
  },
  {
    "text": "The image given below is a type of _______.",
    "choices": [
      {
        "id": 1,
        "text": "Contusion"
      },
      {
        "id": 2,
        "text": "Abrasion"
      },
      {
        "id": 3,
        "text": "Laceration"
      },
      {
        "id": 4,
        "text": "Stab wound"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Other options:</p>\n<p>Option B:&nbsp;<strong>Abrasion,</strong> also known as&nbsp;<strong>gravel rash,</strong> is the&nbsp;destruction of&nbsp;<strong>superficial layer</strong>s of the epidermis. It is caused by&nbsp;<strong>friction</strong> against a rough surface or by compression. It is of four types:</p>\n<ul>\n<li>Scratches</li>\n<li>Grazes</li>\n<li>Pressure abrasions</li>\n<li>Impact abrasions</li>\n</ul>\n<p>Option C:<strong>&nbsp;Laceration</strong> refers to a<strong> tear</strong> or <strong>split</strong> of the&nbsp;skin, mucous membranes, muscle, or internal organs. It is due to the application of <strong>blunt force</strong> to a broad area of the body.&nbsp;They are also called tears or ruptures.&nbsp;The laceration may indicate the <strong>cause</strong> of the injury and the shape of the blunt weapon. The <strong>age</strong> of the injury can also be determined.</p>\n<p>Option D: A <strong>stab wound</strong> is formed&nbsp;when force is delivered along the <strong>long axis</strong> of a narrow or pointed object. The object can be a&nbsp;knife, sword, chisel, scissors, or needle. It is&nbsp;<strong>deeper</strong> than its length and width on the surface of the skin. The edges are <strong>clean-cut</strong> and <strong>inverted</strong>.</p>\n<div class=\"page\" title=\"Page 210\">&nbsp;</div>\n<div class=\"page\" title=\"Page 190\">&nbsp;</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7aaf5f1416ea433dbfea90362829463f.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Match the following:",
    "choices": [
      {
        "id": 1,
        "text": "A-1, B-3, C-2, D-4"
      },
      {
        "id": 2,
        "text": "A-3, B-4, C-1, D-2"
      },
      {
        "id": 3,
        "text": "A-3, B-2, C-1, D-4"
      },
      {
        "id": 4,
        "text": "A-2, B-3, C-4, D-1"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The correct option is Option C: A-3, B-2, C-1, D-4.</p>\n<p>The time of emergence of secondary dentition or permanent teeth:</p>\n<table width=\"383\">\n<tbody>\n<tr>\n<td><strong>Tooth</strong></td>\n<td><strong>Emergence</strong></td>\n</tr>\n<tr>\n<td>First molar</td>\n<td><strong>6-7 years</strong></td>\n</tr>\n<tr>\n<td>Central incisors</td>\n<td>6-8 years</td>\n</tr>\n<tr>\n<td>Lateral incisors</td>\n<td><strong>7-9 years</strong></td>\n</tr>\n<tr>\n<td>First premolar</td>\n<td>9-11 years</td>\n</tr>\n<tr>\n<td>Second premolar</td>\n<td>10-12 years</td>\n</tr>\n<tr>\n<td>Canine</td>\n<td><strong>11-12 years</strong></td>\n</tr>\n<tr>\n<td>Second molar</td>\n<td>12-14 years</td>\n</tr>\n<tr>\n<td>Third molar</td>\n<td><strong>17-25 years</strong></td>\n</tr>\n</tbody>\n</table>\n<p>The time of emergence of primary dentition or temporary teeth:</p>\n<table width=\"383\">\n<tbody>\n<tr>\n<td><strong>Tooth</strong></td>\n<td><strong>Emergence</strong></td>\n</tr>\n<tr>\n<td>Mandibular central incisor</td>\n<td>6-8 months</td>\n</tr>\n<tr>\n<td>Maxillary central incisor</td>\n<td>7-9 months</td>\n</tr>\n<tr>\n<td>Maxillary lateral incisor</td>\n<td>7-9 months</td>\n</tr>\n<tr>\n<td>Mandibular lateral incisor</td>\n<td>10-12 months</td>\n</tr>\n<tr>\n<td>First molar</td>\n<td>12-14 months</td>\n</tr>\n<tr>\n<td>Canine</td>\n<td>17-18 months</td>\n</tr>\n<tr>\n<td>Second molar</td>\n<td>20-30 months</td>\n</tr>\n</tbody>\n</table>\n<p>The\u00a0deciduous teeth all emerge into the mouth by\u00a0<strong>2.5-3 years</strong>.</p>\n<p>Note:\u00a0<strong>6</strong><strong>-13\u00a0</strong>years is the age of<strong>\u00a0mixed dentition. The first</strong>\u00a0molar emerges at 6-7 years. The second molar emerges at 12 years, and the third molar emerges beyond 18 years of age.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following plant poisons with their active principles.",
    "choices": [
      {
        "id": 1,
        "text": "1-b,2-c,3-d,4-a."
      },
      {
        "id": 2,
        "text": "1-a,2-c,3-b,4-d."
      },
      {
        "id": 3,
        "text": "1-a,2-b,3-c,4-d."
      },
      {
        "id": 4,
        "text": "1-c,2-b,3-a,4-d."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correct match is&nbsp;1-a,2-c,3-b,4-d.</p>\n<p>The active ingredients of<em>&nbsp;<strong>D</strong></em><strong><em>atura</em>&nbsp;</strong>include the anticholinergic alkaloids <strong>atropine</strong>, scopolamine, and hyoscyamine. The seeds or other parts of the plant can be ingested or smoked.&nbsp;</p>\n<p><strong>Manifestations of <em>Datura </em>toxicity:</strong></p>\n<ul>\n<li><strong>D</strong>ry hot skin (Temperature rises up to 42 C, a scarlet rash may also be appreciated).</li>\n<li><strong>D</strong>ilatation of pupils along with loss of accommodation</li>\n<li><strong>D</strong>iplopia</li>\n<li><strong>D</strong>ryness of the mouth and throat, unquenchable thirst</li>\n<li><strong>D</strong>ysphagia</li>\n<li><strong>D</strong>ilatation of cutaneous blood vessels</li>\n<li><strong>D</strong>ysarthria (Difficulty in talking)</li>\n<li><strong>D</strong>runken gait</li>\n<li><strong>D</strong>elirium</li>\n<li><strong>D</strong>rowsiness</li>\n<li><strong>D</strong>eath due to respiratory or cardiac failure</li>\n</ul>\n<p>Morphine, codeine, and <strong>thebaine</strong> are natural <strong>opioids</strong> derived from poppy&nbsp;<em>Papaver somniferum</em>.</p>\n<p><strong>Abrin</strong>&nbsp;is a toxalbumin of the plant&nbsp;<em><strong>Abrus precatorius</strong>,<strong>&nbsp;</strong></em>and it acts by&nbsp;<strong>inhibiting protein synthesis.</strong></p>\n<p><strong>Toxic principles</strong>&nbsp;of&nbsp;<em>Abrus precatorius</em>:</p>\n<ul>\n<li>Abrin (a toxalbumen)</li>\n<li>Abrine (an amino acid)</li>\n<li>Abralin (a glucoside)</li>\n</ul>\n<p>Abrin acts by inhibiting protein synthesis, thereby, resulting in cell death. The clinical features after oral ingestion of these seeds include abdominal pain, nausea, vomiting, bloody diarrhea, and miosis. Faintness, dyspnea, and convulsions can also occur.</p>\n<p>The poison obtained from <strong><em>Strychnos nux-vomica&nbsp;</em></strong>seeds is&nbsp;<strong>strychnine.</strong>&nbsp;Strychnine acts at the&nbsp;<strong>ventral horn</strong>&nbsp;by&nbsp;<strong>blocking</strong>&nbsp;the postganglionic&nbsp;<strong>glycine receptor</strong>&nbsp;sites in the&nbsp;<strong>spinal cord&nbsp;</strong>and<strong>&nbsp;brainstem.&nbsp;</strong><strong>Glycine</strong>&nbsp;is an<strong>&nbsp;inhibitory</strong>&nbsp;<strong>neurotransmitter</strong>&nbsp;that acts at the&nbsp;<strong>postsynaptic membranes of ventral horn</strong>&nbsp;motor neurons. Hence, the blockade of these receptors results in unopposed muscle contraction, resulting in the classical clinical features:</p>\n<ul>\n<li>Tonic-clonic seizures</li>\n<li>Opisthotonus (body arched in hyperextension)</li>\n<li>Risus sardonicus</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The dead body of a child was recovered from a river with froth around his mouth, which reappeared even after wiping it off. Which postmortem finding is not seen in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Voluminous and ballooned out lungs"
      },
      {
        "id": 2,
        "text": "High concentration of arsenic from shaft of hair"
      },
      {
        "id": 3,
        "text": "Paltauf's hemorrhage in sub pleura"
      },
      {
        "id": 4,
        "text": "Cadaveric spasm with mud in closed fist"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above case scenario with frothing is suggestive of <strong>antemortem drowning</strong>.&nbsp;High concentration of arsenic in the shaft of hair is seen in patients with chronic arsenic poisoning.</p>\n<p>&nbsp;Given below are the features of antemortem drowning.</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Froth&nbsp;</strong>- The presence of copious amounts of <strong>fine, shaving-lather-like froth</strong> at the mouth and the nostrils is the most characteristic finding of antemortem drowning. It is caused by the vigorous <strong>agitation of the tracheal and bronchial mucous secretions</strong>, edema fluid, and alveolar surfactant during respiratory efforts.&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Cutis anserina&nbsp;- The contraction of the erector pilorum muscles causes puckering and a grainy appearance of the skin. This resembles goose skin;&nbsp;hence, it is called cutis anserina.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Washerwoman&rsquo;s hand</strong>&nbsp;- Maceration of the skin on the palms and soles gives a wrinkled, sodden, and bleached appearance due to submersion.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Cadaveric spasm&nbsp;</strong>- Gravel, weed, soil, grass, etc. is firmly held in the <strong>clenched hands</strong> due to cadaveric spasm. This is a <strong>vital sign</strong> of antemortem drowning. The material also indicates the place of submersion.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Rigor mortis - This appears early in cases of a violent antemortem struggle.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Face - It is bloated and discolored, with cyanosis.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Eyes - Conjunctiva are suffused and pupils dilated.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Tongue - It may be swollen and protruded.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Antemortem injuries - These may be sustained by striking objects, such as rocks, during the fall into the water body. Examination for such injuries must be performed only after the body is dry.</li>\n</ul>\n<p>Internal findings:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Lungs - They appear <strong>voluminous and distended show ballooning.</strong> The cut section will exude copious amounts of frothy, bloodstained fluid.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Larynx, trachea, and bronchioles - The presence of sand, silt, and aquatic vegetation in the trachea and lower respiratory tract are characteristic findings of antemortem drowning.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Heart and blood vessels- <strong>Gettler test</strong> can be done to estimate the chloride content in the right and left sides of the heart to differentiate between freshwater and saltwater drowning.&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Diatom test</strong>- Diatoms are microscopic algae. Their presence in the organs, particularly in the bone marrow, is suggestive of antemortem drowning.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Stomach and small intestines- These organs may contain water in some cases. Water present in the small intestine is positive evidence of death by drowning.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Middle ear - The presence of water in the middle ear is highly suggestive of antemortem drowning.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Brain - It is congested, and edematous, with loss of gray-white junction.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f394ec8d65c94aada9b503a3743a72f6.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Spanish windlass is a type of which strangulation method?",
    "choices": [
      {
        "id": 1,
        "text": "Bansdola"
      },
      {
        "id": 2,
        "text": "Garrotting"
      },
      {
        "id": 3,
        "text": "Mugging"
      },
      {
        "id": 4,
        "text": "Throttling"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Option D: <strong>Throttling</strong>&nbsp;or manual strangulation occurs due to compression of the neck by humans leading to asphyxia. Thumb impression and finger marks may be seen over the victim's neck.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/876f9fa1c88c40268312a48f51d641e9x1280x1091.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/008ba281d8de4dd59f9d0e27ccf8f29ax1280x1713.JPEG"
    ]
  },
  {
    "text": "A person of eonism  derives pleasure from __________.",
    "choices": [
      {
        "id": 1,
        "text": "Wearing clothes of opposite sex"
      },
      {
        "id": 2,
        "text": "Kissing  and licking of anus by a sexual partner"
      },
      {
        "id": 3,
        "text": "Underclothing  of  female"
      },
      {
        "id": 4,
        "text": "Seeing a female undressing"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>A person of <strong>eonism (transvestism)</strong> derives pleasure from wearing clothes of the opposite sex. It is usually found in males. His dress, manner, occupational interests, and associations are all designed to increase his feeling of being a woman.</p>\n<p>Other options:</p>\n<p>Sexual pleasure from</p>\n<ul>\n<li>Kissing and licking of anus by a sexual partner - Anilingus</li>\n<li>Sexual interest in nonliving objects that are used to generate sexual excitement.\u00a0 -Fetichism</li>\n<li>Seeing a female undressing - Voyeurism or scoptophilia</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A lady underwent cholecystectomy and now she presents with abdominal pain, one month later. An erect abdomen x-ray was taken, and the image is given below.  The following offense comes under _______.",
    "choices": [
      {
        "id": 1,
        "text": "Novus actus interveniens"
      },
      {
        "id": 2,
        "text": "Res ipsa loquitur"
      },
      {
        "id": 3,
        "text": "Res judicata"
      },
      {
        "id": 4,
        "text": "Respondeat superior"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The x-ray shows a pair of surgical scissors left behind in the abdomen after surgery. The offense comes under <strong>res ipsa loquitur</strong>. It is obvious evidence of the negligent act committed.</p>\n<p>\"<strong>Res ipsa loquitur\"</strong>\u00a0means \"<strong>the thing or fact speaks for itself.\"</strong>\u00a0The negligent act is so <strong>obvious</strong> that the patient <strong>need not prove</strong> the negligence. He has to merely state what according to him was the negligent act.</p>\n<p>This doctrine applies to both civil and criminal negligence. All of the following conditions should be fulfilled for this doctrine:</p>\n<ul>\n<li>In the absence of negligence, there would not have been any injury usually</li>\n<li>The doctor had complete control over the injury-producing instrument or treatment.</li>\n<li>The patient was not a part of contributory negligence.</li>\n</ul>\n<p>Other options:</p>\n<p>Option A:\u00a0<strong>Novus actus interveniens</strong>: A person is responsible not only for his actions but also for the logical consequences of those actions. This principle applies to cases of assault and accidental injury.</p>\n<p>Option C:\u00a0<strong>Res judicata\u00a0</strong>(Section <strong>337</strong>, BNSS) -If a question of negligence against a doctor has already been decided by a court in a dispute between the doctor and his patient, the patient will not be allowed to contest the same in another legal proceeding, based on the same set of facts. Multiple appeals cannot be made.\u00a0</p>\n<p>Option D:\u00a0The principle of <strong>respondeat superior</strong>\u00a0is used to explain vicarious liability, which explains that the employer is responsible for his employees\u2019 negligence if such an act occurs in the course of the employment and within its scope.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d5d19093f524421abd8a5229d2cc4036.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Tattooing around the entry wound of a bullet is due to?",
    "choices": [
      {
        "id": 1,
        "text": "Unburnt particles"
      },
      {
        "id": 2,
        "text": "Smoke"
      },
      {
        "id": 3,
        "text": "Flame"
      },
      {
        "id": 4,
        "text": "Muzzle impression"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Tattooing&nbsp;</strong>around the entry wound of a bullet is due to&nbsp;the deposition of <strong>unburnt powder particles</strong>. These are difficult to remove. They are also called stippling or peppering. This is seen <strong>up to 50 cm</strong> of firing</p>\n<p>When the distance between the firing and the victim is between 30-50 cm (in the case of pistols and revolvers), it is a <strong>near-shot wound</strong>. The victim is <strong>within</strong> the range of <strong>powder deposition</strong>, so there is some amount of <strong>tattooing present</strong>. But it is outside the range of flame, so there will not be any burning or singeing. There will not be any blackening, as it is outside the range of smoke as well.</p>\n<p>The injuries related to firearms are:</p>\n<ul>\n<li><strong>Burn injuries&nbsp;</strong>- occur due to <strong>flame</strong> released during the firing. It is seen in <strong>contact shot</strong> wounds or distances <strong>up to 5-8 cm</strong>. Singeing of hair is caused due to burns</li>\n<li><strong>Blackening&nbsp;</strong>- occurs due to the deposit of <strong>smoke</strong>. It can be <strong>removed</strong> with a wet cloth. This can be seen <strong>up to around 15 cm</strong> of firing</li>\n<li><strong>Tattooing&nbsp;</strong>- occurs due to the deposition of <strong>unburnt powder particles</strong>. These are difficult to remove. They are also called stippling or peppering. This is seen <strong>up to 50 cm</strong> of firing</li>\n<li><strong>Greasing </strong>and <strong>collaring</strong>&nbsp;- occur due to the deposition of the lubricant of the bullet in the tissues, during its penetration. It can be found in <strong>contact, near-shot,</strong> or <strong>distant shot wounds</strong>.&nbsp;</li>\n</ul>\n<p>In a firm <strong>contact shot,&nbsp;</strong>the imprint of the <strong>muzzle</strong> of the gun is seen on the skin around the wound. The victim is <strong>within</strong> the range of <strong>flame</strong>, hence <strong>singeing</strong> of the hair will be <strong>present</strong>. Tattooing begins only when the muzzle-to-target distance is &gt;1cm, like in a loose contact shot.</p>\n<p>When the distance between the victim and the firing is <strong>5-8cm</strong>, it is called a <strong>close shot</strong>. The victim is <strong>within</strong> the range of the <strong>flame</strong>, hence, features related to flame, <strong>smoke</strong>, and powder deposition will be seen. <strong>Singeing, burning, blackening </strong>and<strong> tattooing</strong> will be <strong>present</strong>.</p>\n<p>When the distance between the victim and the firing is <strong>&gt;50 cm</strong>, it is a <strong>distant shot</strong>. The victim lies <strong>outside</strong> the range of <strong>flame</strong> and <strong>powder</strong> <strong>deposition</strong>. Hence, features related to flame, smoke, and powder deposition are absent. <strong>Burning, blackening</strong>, and <strong>tattooing</strong> are <strong>absent</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Pick the mechanism of cold water drowning.",
    "choices": [
      {
        "id": 1,
        "text": "Asphyxia"
      },
      {
        "id": 2,
        "text": "Laryngeal spasm"
      },
      {
        "id": 3,
        "text": "Vagal inhibition"
      },
      {
        "id": 4,
        "text": "Cardiac arrest"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In <strong>cold water drowning</strong> or <strong>immersion syndrome</strong> or hydrocution, death occurs due to <strong>vagal inhibition</strong>, leading to <strong>cardiac arrest</strong>.</p>\n<p>Hydrocution/ immersion syndrome refers to <strong>sudden death</strong>,<strong> following immersion</strong> in cold water. Death results from <strong>vagal inhibition</strong>&nbsp;of the heart, i.e. cardiac arrest occurring due to increased stimulation of the vagus nerve.</p>\n<p>Vagus stimulation occurs due to the following mechanisms:</p>\n<ul>\n<li class=\"p1\">Sudden entry of water into the nasopharynx or larynx</li>\n<li class=\"p1\">Falling or diving into the water in a manner, so that it suddenly strikes the abdomen, especially the epigastric region</li>\n<li class=\"p1\">Sudden in-rush of cold water into the ears</li>\n</ul>\n<p><strong>Types</strong> <strong>of drowning</strong>:</p>\n<ul>\n<li>Wet drowning/ typical drowning</li>\n<li>Atypical drowning/dry drowning\n<ul>\n<li>Immersion syndrome/ hydrocution</li>\n<li>Post-immersion syndrome/ secondary drowning/ near-drowning&nbsp;</li>\n<li>Submersion of the unconscious/ shallow-water drowning</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the pattern of abrasion shown in the image below.",
    "choices": [
      {
        "id": 1,
        "text": "Ligature mark"
      },
      {
        "id": 2,
        "text": "Graze abrasion"
      },
      {
        "id": 3,
        "text": "Pressure abrasion"
      },
      {
        "id": 4,
        "text": "Imprint abrasion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image shows an abrasion due to ligature mark, which is a\u00a0<strong>pressure abrasion</strong>.</p>\n<p><strong>Abrasions</strong> are superficial wounds produced due to\u00a0<strong>injury </strong>to\u00a0the <strong>epidermis</strong>. They are usually caused by friction against a rough surface or by compression.\u00a0</p>\n<p>Types of abrasions:</p>\n<ul>\n<li><strong>Linear</strong>\u00a0abrasions (scratches): Caused by relative movement of a pointed object on the skin\n<ul>\n<li>Examples: nail, thorn, the point of sword or knife</li>\n</ul>\n</li>\n<li><strong>Grazed</strong>\u00a0abrasions (sliding /scrapping/grinding abrasion)<strong>: </strong>Caused by relative movement of a rough surface on a wide area of skin\n<ul>\n<li>brush burns- tangential rubbing over the surface, usually the ground\u00a0</li>\n<li>friction burns are extensive excoriated areas without bleeding</li>\n<li>Examples: fall, a victim being dragged on the ground, road traffic accidents</li>\n</ul>\n</li>\n<li><strong>Imprint</strong>\u00a0abrasions (patterned abrasions): Caused by the impact of a rigid hard rough surface over a localized area of the skin without any movement; usually show the pattern of the object causing them\n<ul>\n<li>Examples: tire,\u00a0grills, bicycle chain, bite marks</li>\n</ul>\n</li>\n<li><strong>Pressure</strong> abrasions (pressure abrasion): Caused by crushing of the superficial layers of the epidermis\n<ul>\n<li>Examples: ligature marks around the neck in hanging</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3aef9574757c4698b5b075f5cb76cc07.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Gas shadow is present in the great vessels of a fetus in the case of intrauterine demise. What is this sign called?",
    "choices": [
      {
        "id": 1,
        "text": "Roberts sign"
      },
      {
        "id": 2,
        "text": "Spalding sign"
      },
      {
        "id": 3,
        "text": "Ball sign"
      },
      {
        "id": 4,
        "text": "Halo sign"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Gas shadow in the great vessels of a fetus in intrauterine death is called the&nbsp;<strong>Roberts sign</strong>. It is the <strong>earliest sign </strong>and is<strong>&nbsp;</strong>seen within <strong>12 hours of death</strong>. The gas shadow may be present within the chambers of the heart or in large vessels of the fetus.</p>\n<p>Signs of intrauterine death:</p>\n<ul>\n<li><strong>Earliest sign</strong>&nbsp;- reddening of the skin with peeling in&nbsp;<strong>12 hours</strong></li>\n<li><strong>Robert's sign&nbsp;</strong>-&nbsp;radiographic finding showing<strong>&nbsp;</strong>gas in the great vessels like the aorta in&nbsp;<strong>12 hours</strong></li>\n<li><strong>Large blebs</strong>&nbsp;containing a&nbsp;<strong>red serous</strong>&nbsp;or&nbsp;<strong>serosanguineous fluid</strong>&nbsp;appear at around&nbsp;<strong>24 hours</strong>&nbsp;</li>\n<li>Serous cavities may contain a turbid reddish fluid after<strong>&nbsp;48 hours</strong></li>\n<li><strong>Spalding's sign </strong>(Option B) radiographic finding is seen as a&nbsp;<strong>loss</strong>&nbsp;of&nbsp;<strong>alignment</strong>&nbsp;and&nbsp;<strong>over-riding</strong>&nbsp;of&nbsp;<strong>bones</strong>&nbsp;of<strong>&nbsp;</strong>the<strong>&nbsp;cranial vault</strong>. This occurs&nbsp;due to shrinkage of the brain after death. It is&nbsp;seen&nbsp;<strong>7 days after</strong>&nbsp;<strong>fetal death</strong>.</li>\n<li>A&nbsp;<strong>sweetish</strong>&nbsp;and&nbsp;<strong>disagreeable odor</strong></li>\n<li><strong>Sodden</strong>&nbsp;and<strong>&nbsp;coppery red/purplish skin</strong>&nbsp;(never greenish as with putrefaction) with blisters, and cuticle peeling.&nbsp;The skin detaches easily and leaves moist and greasy areas</li>\n<li><strong>Distended abdomen</strong>&nbsp;and thick, red, and soft umbilical cord</li>\n<li>Abnormally mobile or flexible joints</li>\n<li>Soft, edematous, and loss of morphology of the organs or viscera (lungs and uterus remain unaffected for long period)</li>\n<li>The body is soft and pliable and flattens out when placed on an even surface</li>\n</ul>\n<p>Option C: <strong>Ball sign </strong>is<strong>&nbsp;</strong>hyperflexion of the spine with crowding of ribs seen in&nbsp;intrauterine death.</p>\n<p>Option D: <strong>Halo sign</strong>&nbsp;is a radiological sign of&nbsp;intrauterine fetal death showing an&nbsp;<strong>increase in soft tissue width</strong> between subcutaneous fat and the cranial vault.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A man was brought to the emergency department with a history of assault by a mob using heavy blunt objects and sharp objects. On examination, crushing of the hair bulb was seen. Identify the type of wound.",
    "choices": [
      {
        "id": 1,
        "text": "Clean cut incised wound"
      },
      {
        "id": 2,
        "text": "Lacerated wound"
      },
      {
        "id": 3,
        "text": "Chop wound"
      },
      {
        "id": 4,
        "text": "Avulsion injury"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Option D:\u00a0<strong>Avulsion or shearing laceration\u00a0</strong>is a lesion where the\u00a0<strong>skin separates</strong>\u00a0or peels off by tearing from the underlying tissues. It is due to shearing force delivered at an acute angle. Commonly seen in <strong>road traffic accidents.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ebbd9a32d60542b780b56aece574db43.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/09a3a04f1a774e659ead81c64546724cx1280x1269.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/edbad496490f4f2fb3367fb0cb5627b8x512x236.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2910e2278bef45f5b5e49a4007bbbedfx720x740.JPEG"
    ]
  },
  {
    "text": "Identify the postmortem change given in the image.",
    "choices": [
      {
        "id": 1,
        "text": "Marbling"
      },
      {
        "id": 2,
        "text": "Tattooing"
      },
      {
        "id": 3,
        "text": "Lividity"
      },
      {
        "id": 4,
        "text": "Filigree burns"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Other options:</p>\n<p>Option B:&nbsp;<strong>Tattooing&nbsp;</strong>around the entry wound of a bullet is due to&nbsp;the deposition of&nbsp;<strong>unburnt powder particles</strong>. These are difficult to remove. They are also called stippling or peppering. This is seen&nbsp;<strong>up to 50 cm</strong>&nbsp;of firing</p>\n<p>Option C:&nbsp;<strong>Postmortem hypostasis/Postmortem staining/Postmortem lividity/Livor mortis/Suggilation</strong>&nbsp;refers to bluish-purple or reddish-purple discoloration&nbsp;of the superficial layers of the dermis.&nbsp;It is an&nbsp;<strong>early</strong>&nbsp;postmortem change that occurs due to<strong>&nbsp;</strong>the <strong>stagnation of blood </strong>in the&nbsp;vessels of the<strong> dependent parts</strong>&nbsp;due to the effect of gravity.&nbsp;</p>\n<p>Option D:&nbsp;<strong>Filigree burns </strong>also known as<strong>&nbsp;Lichtenberg's flowers </strong>are&nbsp;superficial, thin, irregular, and tortuous markings on the skin indicative of a&nbsp;<strong>lightning strike.</strong>&nbsp;They resemble the branches of a tree and are usually found over the skin of the shoulders or the flanks.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f08c958e1aac4d3db862f87d08cad628.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A male patient working in the matchbox industry for the past 20 years reports to the dentist with multiple sinuses and fistulae in and around his jaw with foul-smelling discharge. Which of the following chemicals are responsible for this?",
    "choices": [
      {
        "id": 1,
        "text": "Bromine"
      },
      {
        "id": 2,
        "text": "Antimony"
      },
      {
        "id": 3,
        "text": "Fluorine"
      },
      {
        "id": 4,
        "text": "Phosphorus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The clinical scenario is suggestive of a <strong>phossy jaw</strong>, which occurs due to chronic <strong>phosphorus</strong> poisoning. Phossy jaw refers to osteomyelitis and necrosis of the jaw, with<strong> foul-smelling pus discharging multiple sinuses.</strong></p>\n<p>Frequent inhalation of phosphorus fumes causes <strong>necrosis</strong> of the lower jaw in the region of a decayed tooth. Patients initially present with <strong>toothache</strong>, followed by <strong>swelling</strong> of the jaw, loosening of the teeth, <strong>necrosis</strong> of gums, and <strong>sequestration</strong> of the bone in the mandible producing considerable facial disfigurement.&nbsp;</p>\n<p>Chronic phosphorus poisoning is common among the workers of phosphorus industries (matchbox factories), who have had <strong>chronic exposure</strong> to phosphorus <strong>fumes</strong> for months to years. It is managed surgically and by prevention of further exposure to the poison.&nbsp;</p>\n<p><strong>Phosphorus </strong>is a non-metallic, inorganic irritant poison that affects cellular oxidation. It exists in two forms, <strong>white phosphorus</strong>, a highly toxic form, and <strong>red phosphorus</strong>, the non-toxic form.&nbsp;</p>\n<p><strong>Fulminant poisoning</strong> is seen when more than one gram is consumed, and death occurs within 12 hours due to <strong>peripheral vascular collapse</strong>. In acute poisoning, they present with pain in the throat and abdomen, with intense thirst, nausea, diarrhea, and severe abdominal pain. System toxicity occurs after 2&ndash;3 days and results in hematemesis, enlarged tender liver, jaundice, pruritus, and hemorrhages. The gastric and intestinal content have <strong>garlic</strong> odor and are<strong> luminous.</strong></p>\n<p>Gastric lavage with <strong>potassium permanganate</strong> oxidizes phosphorus into phosphoric acid and phosphates. <strong>Activated charcoal</strong> can be used to adsorb the poison.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A: <strong>Bromine</strong>&nbsp;is a&nbsp;<strong>corrosive substance</strong>&nbsp;that causes necrosis of skin and tissues.</p>\n<p>Option B: The symptoms of <strong>antimony</strong> poisoning, both acute and chronic are <strong>similar to that of arsenic. </strong>Inhalation of fumes causes a flu-like illness called metal fume fever. In cases of <strong>chronic poisoning</strong> with heavy metals such as lead, <strong>arsenic</strong>, mercury, <strong>antimony</strong>, copper, etc.,&nbsp;the shaft of a long bone, strands of scalp hair, fingernails or toenails, and a wedge of the quadriceps muscle should be taken for sampling.&nbsp;</p>\n<p>Option C: Prolonged ingestion of <strong>fluorides</strong> results in the <strong>mottling of teeth</strong>, an <strong>increase in the density of bones</strong>,&nbsp;lipping of bony margins of vertebrae, which sometimes produce pressure on the spinal cord leading to paraplegia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following rules of law are associated with insanity?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3 and 4"
      },
      {
        "id": 2,
        "text": "2, 3, 4 only"
      },
      {
        "id": 3,
        "text": "1, 2 only"
      },
      {
        "id": 4,
        "text": "3, 4 only"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Durham's rule</strong> and <strong>Curren's rule</strong> are laws associated with insanity.</p>\n<p><strong>Durhams's rule</strong> states that an accused person is not criminally responsible if his unlawful act is the product of mental disease or mental defect.</p>\n<p><strong>Curren\u2019s rule</strong> states that an accused person is not criminally responsible if, at the time of committing the act, he did not have the capacity to regulate his conduct to the requirements of the law as a result of mental disease or defect.</p>\n<p>In India, the law of Criminal responsibility is under <strong>BNS Section 22 (Section 84 IPC) </strong>It\u00a0states that \"Nothing is an offense which is done by a person who, at the time of doing it, by reason of unsoundness of mind, is incapable of knowing the nature of the act, or what he is doing is either wrong or contrary to the law\u201d. This is slightly different from\u00a0McNaghten's rule followed in Britain.</p>\n<p><strong>M'Naghten's rule</strong>\u00a0states that every man is to be presumed to be sane, and possesses a sufficient degree of reason to be responsible for his crimes until the contrary is proved.</p>\n<p>Other rules to assess the criminal responsibility of insane persons:</p>\n<ul>\n<li>The Irresistible Impulse</li>\n<li>Federal rule or American Law Institute test (ALT)</li>\n<li>The Brawner rule</li>\n</ul>\n<p>Note:<strong> Ashley's rule</strong> is used to differentiate males and females based on the combined length of the manubrium and sternum. It is considered to be a\u00a0<strong>male</strong> sternum when the combined length is <strong>&gt;149 mm</strong>, while if the combined length is\u00a0<strong>&lt;149 mm</strong>, then it is considered <strong>female</strong>.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The steps in the management of snake bite include:",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3, 4, and 5"
      },
      {
        "id": 2,
        "text": "1, 2, and 4"
      },
      {
        "id": 3,
        "text": "4 only"
      },
      {
        "id": 4,
        "text": "4 and 5"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>management</strong> of <strong>snakebites</strong> includes <strong>immobilization</strong>&nbsp;and <strong>administration</strong>&nbsp;of&nbsp;anti-snake venom (<strong>ASV</strong>)<strong>&nbsp;</strong>after hospitalization.</p>\n<p><strong>Immobilization</strong> is done to minimize the spread of the venom.&nbsp;<strong>Hospitalization,</strong> followed by <strong>ASV</strong>&nbsp;administration is the definitive management of snake bites.</p>\n<p>Measures that <strong>can be taken</strong>&nbsp;in the case of snakebite:</p>\n<ul>\n<li>Apply firm pressure over the bitten area, which delays the absorption of venom</li>\n<li>Pressure immobilization is recommended for elapid and sea-snake bites, but not for viper bites as it may cause local necrosis</li>\n<li>Immediately apply a broad firm bandage (Sutherland wrap) on the bitten area and around the limb. As much of the limb should be bandaged as possible. It should be tight enough to occlude the superficial venous and lymphatic return, but not the arterial or deep venous flow. A pressure of 50 to 70 mm Hg is maintained.</li>\n<li>In bites on the trunk, head, or neck, apply firm pressure over the bitten area</li>\n<li>Immobilize the limb, as movement can accelerate the spread of venom</li>\n<li>Make the patient lie on one side in the recovery position so that the airway is clear, in case of vomiting or fainting.</li>\n</ul>\n<p>Measures<strong> contraindicated</strong> in the case of <strong>snakebite:</strong></p>\n<ul>\n<li><strong>Suction</strong> and<strong> incision</strong> of the wound</li>\n<li>Electric shock treatment of wound site</li>\n<li><strong>Application of tourniquets</strong>&nbsp;because they obstruct arterial flow and cause ischemia</li>\n<li><strong>Ice water immersion</strong> of the bitten limb&nbsp;</li>\n<li>Do not attempt to kill or catch the snake as it may be dangerous.</li>\n<li>Administration of ASV locally at the wound site.</li>\n<li>Herbal/local remedies</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Hooch tragedy is related to:",
    "choices": [
      {
        "id": 1,
        "text": "Phosphorus"
      },
      {
        "id": 2,
        "text": "Mercury"
      },
      {
        "id": 3,
        "text": "Ethanol"
      },
      {
        "id": 4,
        "text": "Methanol"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Hooch tragedy </strong>is&nbsp;due to the&nbsp;<strong>consumption</strong> of cheap<strong> illicit liquor</strong> containing <strong>methanol</strong>, particularly by the lower socio-<span class=\"s2\">economic&nbsp;</span>classes.</p>\n<p>The central organ for metabolism is the <strong>liver</strong>. Methanol or methyl alcohol is first oxidized to <strong>formaldehyde</strong> with the help of alcohol dehydrogenase. It is further metabolized to <strong>formic acid</strong> via aldehyde dehydrogenase.&nbsp;These metabolites are responsible for the adverse effects of intoxication.</p>\n<p>Features seen are <strong>ophthalmological complications</strong> such as blindness, and optic neuropathy. Brain edema, <strong>acute renal failure</strong>, and severe metabolic derangement are also seen.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '115 Forensic Medicine Ini-Cet 2022';
        let hierarchy = ["Marrow", "PYQs", "Forensic Medicine"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>