<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>014 Anatomy Ini-Cet 2024 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Anatomy
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">24</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following joints is not formed by the structure shown in the picture?",
    "choices": [
      {
        "id": 1,
        "text": "Synchondrosis"
      },
      {
        "id": 2,
        "text": "Syndesmosis"
      },
      {
        "id": 3,
        "text": "Symphysis"
      },
      {
        "id": 4,
        "text": "Plane synovial joint"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The provided image depicts a thoracic vertebra, which does not participate in forming a <strong>synchondrosis-type</strong> joint. The example for a synchondrosis is the <strong>costochondral join</strong>t formed between the<strong> ribs </strong>and the <strong>costal cartilage</strong>.</p>\n<p>A vertebral bone participates in the following joints :</p>\n<ol>\n<li><strong>Intervertebral joint</strong> - secondary cartilaginous joint ( symphysis type )</li>\n<li><strong>Costovertebral joint</strong> - plane synovial joint</li>\n<li><strong>costotransverse\u00a0 joint</strong> - plane synovial joint\u00a0</li>\n<li><strong>Facet joint</strong>s or zygapophysial joints - synovial joint</li>\n</ol>\n<p>A <strong>syndesmosis</strong> is a type of <strong>complex fibrous joint</strong> between two bones connected by ligaments and a strong membrane[1] with slight movement allowed.The vertebra is connected by a anterior and posterior ligament where some degree of syndesmosis type of joint is seen.</p>\n<p>Structurally, joints are classified as fibrous joints, cartilaginous joints, and synovial joints.\u00a0</p>\n<table style=\"border-collapse: collapse; width: 39.2015%; height: 156.789px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 25.9861%; height: 22.3984px;\">Type</td>\n<td style=\"width: 74.0139%; height: 22.3984px;\">Subtypes</td>\n</tr>\n<tr style=\"height: 67.1953px;\">\n<td style=\"width: 25.9861%; height: 67.1953px;\">Fibrous joints</td>\n<td style=\"width: 74.0139%; height: 67.1953px;\">\n<ul>\n<li>Sutures</li>\n<li>Syndesmosis</li>\n<li>Gomphosis</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 25.9861%; height: 22.3984px;\">Cartilaginous joints</td>\n<td style=\"width: 74.0139%; height: 22.3984px;\">\n<ul>\n<li>Primary cartilaginous (synchondrosis)</li>\n<li>Secondary cartilaginous (symphysis)</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 25.9861%; height: 22.3984px;\">Synovial joints</td>\n<td style=\"width: 74.0139%; height: 22.3984px;\">\n<ul>\n<li>Ball-and-socket or spheroidal joints</li>\n<li>Sellar or saddle joints</li>\n<li>Condylar or bicondylar joints</li>\n<li>Ellipsoid joints</li>\n<li>Hinge joints</li>\n<li>Pivot or trochoid joints</li>\n<li>Plane joints</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4baede240e1a4604834e262e2c673418.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The spinal sensory nucleus of the trigeminal nerve has 2nd order neurons to carry which sensation?",
    "choices": [
      {
        "id": 1,
        "text": "Proprioception"
      },
      {
        "id": 2,
        "text": "Two point discrimination"
      },
      {
        "id": 3,
        "text": "Pain"
      },
      {
        "id": 4,
        "text": "Vibration"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The trigeminal nerve (cranial nerve V) is responsible for sensory input from the face, as well as motor functions such as chewing. Its sensory pathway involves three branches: the <strong>ophthalmic (V1),</strong> maxillary (V2), and mandibular (V3) divisions. The first-order neurons for each division originate from different sensory ganglia:</p>\n<p style=\"padding-left: 40px;\">1.<strong>Ophthalmic Division</strong> (V1):<br />\u00a0 \u00a0First-order neurons: Cell bodies are located in the trigeminal ganglion (also called the semilunar or Gasserian ganglion).</p>\n<p style=\"padding-left: 40px;\">2. <strong>Maxillary Division</strong> (V2):<br />\u00a0 \u00a0First-order neurons: Cell bodies are located in the trigeminal ganglion.</p>\n<p style=\"padding-left: 40px;\">3. <strong>Mandibular Division</strong> (V3):<br />\u00a0 \u00a0First-order neurons: Cell bodies are located in the trigeminal ganglion.</p>\n<p>These first-order neurons carry sensory information from the face to the brainstem. Upon entering the brainstem, the fibers synapse with second-order neurons in specific nuclei:</p>\n<p style=\"padding-left: 40px;\">1. Principal Sensory Nucleus (<strong>Main Sensory Nucleus</strong>):<br />\u00a0 \u00a0 a.Receives input from all three divisions of the trigeminal nerve.<br />\u00a0 \u00a0 b.Located in the pons.<br />\u00a0 \u00a0 c.Second-order neurons here carry discriminative <strong>touch</strong> and<strong> proprioceptive information</strong>.</p>\n<p style=\"padding-left: 40px;\">2. Spinal Trigeminal Nucleus (<strong>Spinal Nucleus of Trigeminal</strong>):<br />\u00a0 \u00a0a.Receives input mainly from the maxillary and mandibular divisions.<br />\u00a0 \u00a0b.Located in the medulla.<br />\u00a0 \u00a0c.Second-order neurons here carry<strong> pain </strong>and <strong>temperature </strong>sensations.</p>\n<p>After synapsing in these nuclei, the sensory information is further relayed to higher brain centers for processing and perception.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not seen in the floor of the inferior horn of the lateral ventricle?",
    "choices": [
      {
        "id": 1,
        "text": "Fimbria"
      },
      {
        "id": 2,
        "text": "Collateral eminence"
      },
      {
        "id": 3,
        "text": "Hippocampus"
      },
      {
        "id": 4,
        "text": "Tail of caudate nucleus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The anterior horn extends from the genu of the corpus callosum up to the interventricular foramen. The relations of the anterior horn are:\u00a0</p>\n<ul>\n<li>Anteriorly - Genu and rostrum of the corpus callosum</li>\n<li>Roof - Anterior part of the body of the corpus callosum</li>\n<li>Floor and lateral wall - Caudate nucleus</li>\n<li>Medial wall - Septum pellucidum and anterior column of fornix</li>\n</ul>\n<p>The body or central part extends from the interventricular foramen to the splenium of the corpus callosum. The relations of the body are:\u00a0</p>\n<ul>\n<li>Roof - Body of the corpus callosum</li>\n<li>Medial wall - Septum pellucidum</li>\n<li>Floor (from lateral to medial) - Caudate nucleus, stria terminalis, thalamostriate vein, thalamus, choroid plexus, and body of the fornix</li>\n</ul>\n<p>The posterior horn extends from the splenium to the occipital pole. The relations are:\u00a0</p>\n<ul>\n<li>Roof and lateral wall - Tapetum of corpus callosum</li>\n<li>Medial wall - Forceps major and calcar avis (calcarine sulcus</li>\n</ul>\n<p>Note: There is no lateral wall for the lateral ventricle.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/48c8c1cd501f464a9f88b774d8b3efcex600x678.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4701c78bf6fb4fcfa4e7ea8c83d802dcx600x649.JPEG"
    ]
  },
  {
    "text": "Which of the following marked areas in the histopathological specimen shows calcification?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given specimen is that of an epiphyseal cartilage, where <strong>zone 3</strong> corresponds to the <strong>zone of calcification</strong>.</p>\n<p><strong>Epiphyseal cartilage</strong> is divided into <strong>five</strong> zones :</p>\n<ul>\n<li>The<strong> resting zone</strong> consists of <strong>hyaline cartilage</strong> without morphological changes in the cells (option 1)</li>\n<li>In the <strong>proliferative zone</strong>, chondrocytes divide rapidly and form <strong>columns of stacked cells</strong> parallel to the long axis of the bone (option 2)</li>\n<li>The <strong>hypertrophic cartilage zone</strong> contains large chondrocytes whose cytoplasm has accumulated <strong>glycogen</strong>. The resorbed matrix is reduced to thin septa between the chondrocytes.</li>\n<li>Simultaneous with the <strong>death</strong> of chondrocytes in the <strong>calcified cartilage zone</strong>, the thin septa of cartilage matrix become calcified by the deposit of <strong>hydroxyapatite</strong>.</li>\n<li>In the<strong> ossification zone</strong>, <strong>endochondral </strong>bone tissue appears (option 4). <strong>Blood capillaries</strong> and <strong>osteoprogenitor cells</strong> formed by mitosis of cells originating from the periosteum invade the cavities left by the chondrocytes. The osteoprogenitor cells form <strong>osteoblasts</strong>, which are distributed in a discontinuous layer over the septa of the calcified cartilage matrix. Ultimately, the osteoblasts deposit <strong>bone matrix</strong> over the three-dimensional calcified cartilage matrix.</li>\n</ul>\n<p>The epiphyseal cartilage is responsible for the <strong>growth in the length of bone</strong> and it disappears in adults, which is why bone growth ceases in adulthood.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/36905a8c343742e2b4d599c944e93619.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fc1fc78c5cab4fcfae289498615a402bx1280x1287.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/902096881b7b497b9aace754d035345ex785x944.JPEG"
    ]
  },
  {
    "text": "What are the structures passing between the muscles marked as 1 and 2?",
    "choices": [
      {
        "id": 1,
        "text": "Recurrent laryngeal nerve and inferior thyroid vessels"
      },
      {
        "id": 2,
        "text": "Internal laryngeal nerve and superior laryngeal artery"
      },
      {
        "id": 3,
        "text": "Auditory tube and levator palitini"
      },
      {
        "id": 4,
        "text": "Glossopharyngeal nerve and stylopharyngeus muscle"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The structures passing in between the <strong>superior constrictor </strong>muscle ( structure 1 ) and <strong>middle constrictor</strong> muscle ( structure 2) are <strong>glossopharyngeal nerve </strong>and<strong> stylopharyngeus muscle.</strong></p>\n<p>The structures passing in between pharyngeal muscles are as follows:</p>\n<p>1. Sinus of Morgagni - It is a semilunar space that exists between the upper concave border of the superior constrictor and the skull base. It is closed off by the upper sturdy portion of the pharyngobasilar fascia. Structures passing through this space include:\u00a0<br />\u00a0 \u00a0a. The <strong>auditory tube</strong><br />\u00a0 \u00a0b. The <strong>levator veli palatini</strong> muscle (Option C)<br />\u00a0 \u00a0c. The ascending palatine artery<br />\u00a0 \u00a0d. Palatine branch of the ascending pharyngeal artery.</p>\n<p>2. Between the superior and middle constrictors -\u00a0 the <strong>stylopharyngeus muscle </strong>and the <strong>glossopharyngeal nerve</strong>.</p>\n<p>3. Between the middle and inferior constrictors -the <strong>internal laryngeal nerve</strong> and the <strong>superior laryngeal vessels</strong> penetrate the thyrohyoid membrane (Option B).</p>\n<p>4.\u00a0 Between the lower border of the inferior constrictor and the esophagus - The <strong>recurrent laryngeal nerve </strong>and the <strong>inferior laryngeal vessels.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a6bb2fe732a24ee2b7a35a5cc3a06a90.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "At what vertebral level does the part marked in the image lie in a normal anatomical position?",
    "choices": [
      {
        "id": 1,
        "text": "S3 spine"
      },
      {
        "id": 2,
        "text": "Upper border of L5"
      },
      {
        "id": 3,
        "text": "Tip of coccyx"
      },
      {
        "id": 4,
        "text": "Disc space between L4 and L5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the right pelvic bone given above the marked structure is the <strong>ischial spine</strong> which lies approximately at the level of the <strong>fifth sacral vertebrae</strong> in a normal anatomical position. As <strong>the tip of the coccyx </strong>is the closest option relating to the spine , it can be the most appropriate answer.</p>\n<p>The ischial spine is a bony prominence found on the<strong> ischium</strong>, one of the three bones that make up the hip bone.\u00a0The<strong> ischial spine\u00a0</strong>forms a part of the plane of least pelvic dimensions or narrow pelvic plane which comprises of :</p>\n<ul>\n<li>lower border of the symphysis pubis</li>\n<li>the tip of ischial spines</li>\n<li>fifth sacral vertebra</li>\n</ul>\n<p>The interspinous distance is the distance between the tip of two ischial spines. ( Bispinous diameter = 10.5 cm or 4.5\" )</p>\n<p>The important events occurring at the narrowest plane in the pelvis :</p>\n<ul>\n<li>It corresponds roughly to the origin of levator ani muscles.</li>\n<li>The internal rotation of the fetal head occurs during labour at this plane.</li>\n<li>It marks the beginning of the forward curve of the pelvic axis</li>\n<li>This level of ischial spines indicates station \u2018O\u2019\u00a0</li>\n<li>When the fetal head station is at \u2018O\u2019, the head is considered to be engaged.</li>\n<li>Deep transverse arrest occurs at this plane.</li>\n<li>The ischial spine can serve as a landmark in pudendal anaesthesia, as the pudendal nerve lies close to the ischial spine</li>\n</ul>\n<p>The image given below highlights the interspinous distance seen through the pelvic inlet.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/43201ff7385d458c8b8a5e464e9dfa93.JPEG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/db285732270b479cb859610543c375c8.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0c02a8af1f7447f7b3870e36b9c21ca1x1280x1700.JPEG"
    ]
  },
  {
    "text": "The nerve related to the area marked in the picture has its root value from?",
    "choices": [
      {
        "id": 1,
        "text": "Ventral horn of C4"
      },
      {
        "id": 2,
        "text": "Intermediate Horn of T2-T6"
      },
      {
        "id": 3,
        "text": "Open part of Medulla Oblongata"
      },
      {
        "id": 4,
        "text": "Dorsal root ganglia of T1 and T2"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above is an image of the <strong>left lung </strong>with the arrow pointing at the nerve passing <strong>anterior</strong> to the <strong>left hilum</strong>. The <strong>phrenic nerve</strong> passes in front of the left hilum and has its root value from the <strong>ventral horn of C4</strong>.</p>\n<p>In the given image, the left lung is identified by the <strong>vertical sequence </strong>of structures at the left hilum - <strong>pulmonary artery</strong>, principal (hyparterial) <strong>bronchus</strong>, and<strong> inferior pulmonary vein</strong>. The image also shows an<strong> oblique fissure </strong>dividing the lung into superior and inferior lobes.</p>\n<p>The phrenic nerve, originating from the <strong>cervical nerves C3\u2013C5</strong>, is a <strong>mixed nerve</strong> that carries motor fibres to the diaphragm and sensory fibres from the mediastinal pleura, pericardium, and a portion of the peritoneum.</p>\n<p>The course of the <strong>left phrenic nerve</strong>:</p>\n<p><strong>Cervical region</strong> - both phrenic nerves pass, Anterior to scalenus anterior muscle<br />Posterior to sternocleidomastoid and inferior belly of omohyoid<br />Posterior to internal jugular vein, transverse cervical artery, and suprascapular artery<br />Posterior to the thoracic duct on the left</p>\n<p><strong>Root of the neck </strong>- It lies <strong>medial to</strong> the trunks of the <strong>brachial plexus </strong>in the neck. At the root of the neck, it runs <strong>anterior</strong> to the <strong>second part</strong> of the <strong>subclavian artery </strong>and posterior to the subclavian vein.\u00a0</p>\n<p><strong>Thorax</strong> - The phrenic nerve enters the thorax by crossing <strong>medially</strong> in front of the <strong>internal thoracic artery</strong>. Within the thorax, the phrenic nerve descends <strong>anterior</strong> to the <strong>pulmonary hilum </strong>between the fibrous pericardium and mediastinal pleura, accompanied by the pericardiacophrenic vessels.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b91bd51efe5844239853b8984017a591.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a19e57540547467a88c5a58de59eaf7dx1280x1887.JPEG"
    ]
  },
  {
    "text": "The area marked by the arrow is supplied by which of the following arteries?",
    "choices": [
      {
        "id": 1,
        "text": "Diagonal artery"
      },
      {
        "id": 2,
        "text": "Right Marginal artery"
      },
      {
        "id": 3,
        "text": "Anterior interventricular artery"
      },
      {
        "id": 4,
        "text": "Left circumflex artery"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The marked structure represents the<strong> interventricular septum</strong>, which is supplied by the <strong>anterior interventricular artery</strong>.</p>\n<p>Blood Supply to the ventricular septum is as follows :</p>\n<ul>\n<li>Septal branch from <strong>posterior interventricular artery</strong> - Posterior <strong>one-third </strong>of the ventricular septum</li>\n<li>Septal branch from <strong>anterior interventricular artery</strong> - Anterior <strong>two-thirds</strong> of ventricular septum</li>\n</ul>\n<p>Blood Supply of Heart :</p>\n<table style=\"border-collapse: collapse; width: 51.6334%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 13.0725%;\">\u00a0</td>\n<td style=\"width: 40.8516%; text-align: center;\"><strong>Right coronary artery</strong></td>\n<td style=\"width: 46.0262%; text-align: center;\"><strong>Left coronary artery</strong></td>\n</tr>\n<tr>\n<td style=\"width: 13.0725%;\">Origin</td>\n<td style=\"width: 40.8516%;\">Anterior aortic sinus of ascending aorta, diameter less than left coronary artery</td>\n<td style=\"width: 46.0262%;\">Left posterior aortic sinus of ascending aorta. (Right posterior aortic sinus \u2013 noncoronary sinus)</td>\n</tr>\n<tr>\n<td style=\"width: 13.0725%;\">Branches</td>\n<td style=\"width: 40.8516%;\">\n<p>Right conus artery (third coronary artery)</p>\n<p>Right anterior ventricular artery \u2013 supplies sternocostal surface of right ventricle.</p>\n<p>Atrial rami \u2013 supplies right atrium.</p>\n<p>Posterior interventricular artery \u2013 supplies diaphragmatic surface of right and left ventricle.</p>\n<p>Right posterior atrial and ventricular rami</p>\n</td>\n<td style=\"width: 46.0262%;\">\n<p>Anterior interventricular artery</p>\n<p>Anterior ventricular rami</p>\n<p>Circumflex artery</p>\n<p>SA nodal branch arise from this in 35% of subjects</p>\n<p>Single Left marginal (obtuse )artery</p>\n<p>Atrial branch</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 13.0725%;\">Areas of distribution</td>\n<td style=\"width: 40.8516%;\">\n<p>The whole of right atrium</p>\n<p>Most of the right ventricle except a strip along the anterior interventricular groove</p>\n<p>Part left ventricle adjoining posterior interventricular groove</p>\n</td>\n<td style=\"width: 46.0262%;\">\n<p>Most of the left atrium</p>\n<p>Most of the left ventricle except area adjoining the posterior interventricular groove</p>\n<p>A small part of right ventricle along anterior interventricular groove</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Other options :</p>\n<p>Option A - Diagonal artery supplies the left ventricle.</p>\n<p>Option B - Right marginal artery supplies the right ventricle and the apex of the heart.</p>\n<p>Option D - Left circumflex artery supplies the left atrium and the left ventricle.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1c9a846698c340f9b663d40cfc86ac44.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/faa9137e16d047b694d48f675cc60245x1280x2059.JPEG"
    ]
  },
  {
    "text": "What level of the vertebral column does the given cross-sectional image correspond to?",
    "choices": [
      {
        "id": 1,
        "text": "T12"
      },
      {
        "id": 2,
        "text": "T9"
      },
      {
        "id": 3,
        "text": "T10"
      },
      {
        "id": 4,
        "text": "T11"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above cross-sectional picture is denoted to be T10 because ,</p>\n<p>At the level of the T10 vertebra, we observe:</p>\n<ul>\n<li>The <strong>esophagus</strong> enters the abdomen through the diaphragm (at the level of T10), connecting shortly afterward to the stomach at the cardiac orifice. In this image, the esophagus is positioned slightly <strong>left to the midline </strong>and is surrounded by the crura of the diaphragm.</li>\n<li>Adipose tissue around the stomach representing greater omentum</li>\n<li>Nearby structures include the <strong>spleen posteriorly</strong>, and the right and anterior left lobes of the liver.</li>\n<li>The inferior vena cava <strong>(IVC)</strong>, slightly <strong>right of midline</strong>, is mostly surrounded by the liver.\u00a0</li>\n<li>The descending aorta, azygos vein, and thoracic duct are within the thorax.</li>\n<li>A small portion of the left and right<strong> lung </strong>are still visible.</li>\n<li>Small cross-sectional <strong>area of the sternum</strong> and the costal cartilages of the 7th ribs. The 7th ribs are the last true ribs with costal cartilages articulating with the sternum</li>\n<li>Predominance of thoracic and upper limb musculature.</li>\n<li>Diaphragm encircling the abdominal cavity, still positioned deep to the thoracic wall.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9d40379e7fb94176ace9881b059f6e07.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The structure marked as 'X' in image A has a direct connection with which of the following structures marked in image B?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Image A shows a section of the <strong>cerebellum</strong> and image B shows a section of the<strong> midbrain</strong>. The structure labeled as 'X' represents the <strong>dentate nucleus</strong> of the cerebellum, which has a direct connection with the structure marked as '1', which is the <strong>red nucleus</strong>.</p>\n<p>The dentate nucleus is the largest of the cerebellar nuclei. It has the shape of a crumpled bag with the opening facing medially. The interior of the bag is filled with white matter made up of <strong>efferent fibers</strong> that leave the nucleus through the opening to form a large part of the <strong>superior cerebellar peduncle</strong>.</p>\n<p>The efferent pathways from the dentate nucleus connect to the <strong>thalamus</strong> and the <strong>red nucleus</strong>, via the <strong>dentato- rubro -thalamic </strong>pathway.</p>\n<p>Other structures in the image B :</p>\n<p>2 - Represents <strong>superior colliculus</strong>, which receives afferents from the retina and the occipital cortex.</p>\n<p>3 - Represents <strong>substantia nigra</strong>, which receives afferents mainly from the caudate nucleus</p>\n<p>4 - Represents the <strong>crus cerebri</strong>, which contains fibers from the cerebral cortex.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/115c8b4fd64a4dec89b360bb12cff60e.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true concerning the anatomy of the breast?",
    "choices": [
      {
        "id": 1,
        "text": "Inner quadrants contain most breast tissue"
      },
      {
        "id": 2,
        "text": "Ligaments of cooper are found only in lower quadrants"
      },
      {
        "id": 3,
        "text": "Tail of Spence extends across anterior axillary fold"
      },
      {
        "id": 4,
        "text": "Breast is made of 10 lobes"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>The tail of Spence extends across the anterior axillary fold</strong>\u00a0and is a small extension of the upper lateral quadrant of the breast.</p>\n<p>The <strong>breast</strong> lies in the <strong>superficial fascia </strong>of the pectoral region. It is divided into <strong>four</strong> quadrants, i.e. upper medial, upper lateral, lower medial and lower lateral.\u00a0</p>\n<p>Vertically, it extends from the <strong>second</strong> to the <strong>sixth</strong> ribs. Horizontally, it extends from the lateral border of the sternum to the midaxillary line. A small extension of the upper lateral quadrant, called the axillary tail of Spence, passes through an opening in the deep fascia and lies in the axilla. The opening is called the<strong> foramen of Langer</strong>.\u00a0</p>\n<p>The breast lies on the <strong>deep pectoral fascia</strong> covering the <strong>pectoralis major</strong> and <strong>serratus anterior</strong> superiorly, the <strong>external abdominal</strong> <strong>oblique</strong> and its aponeurosis inferiorly, and the <strong>clavipectoral fascia</strong> laterally. Fibrous strands or sheets consisting of condensations of connective tissue extend between the posterior lamina of the superficial fascia and the dermis. These suspensory ligaments (retinacula or <strong>Cooper\u2019s ligaments</strong>) are often well-developed in the <strong>superior parts</strong> of the breast and support the breast tissue, helping to minimize drooping.</p>\n<p>The breasts normally comprise up to <strong>20 discrete lobes </strong>that contain ductal-glandular tissue consisting of branching ducts and terminal secretory lobules in a connective tissue stroma. Each lobe is derived by branching from <strong>one central lactiferous duct</strong> in the nipple. The <strong>terminal duct lobular unit</strong> (TDLU or<strong> lobule</strong>) is the <strong>functional milk secretory component</strong> of the breast.\u00a0</p>\n<p>The <strong>upper outer quadrant </strong>of the breast contains a <strong>greater volume </strong>of tissue than the other quadrants. This is the reason for the majority of the <strong>carcinomas</strong> arising in the upper outer quadrant.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/339c0e7eae7d4db580f75c010ba0efaex1200x1406.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e11af15b67c34f36b33a6108cd61a097x1280x1278.JPEG"
    ]
  },
  {
    "text": "A professor underwent a left parotidectomy. Post surgery she complains of left lower lip paralysis. Which structure is involved?",
    "choices": [
      {
        "id": 1,
        "text": "Facial nerve - Main trunk"
      },
      {
        "id": 2,
        "text": "Facial nerve- Cervical branch"
      },
      {
        "id": 3,
        "text": "Facial nerve-Temporal branch"
      },
      {
        "id": 4,
        "text": "Parotid duct"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Lower lip paralysis</strong> is caused by damage to the <strong>cervical branch</strong> of the <strong>facial nerve.</strong></p>\n<p>The <strong>cervical branch</strong> of the facial nerve is responsible for <strong>innervating</strong> the <strong>platysma</strong> muscle, which is one of the muscles involved in the <strong>movements</strong> of the <strong>lower</strong> lip. Damage to this nerve can potentially lead to <strong>paralysis</strong> of the <strong>lower lip.</strong></p>\n<p>The<strong> facial nerve</strong> is the motor nerve of the face. Its<strong> five terminal branches</strong> emerge from the <strong>parotid gland </strong>and diverge to supply the various facial muscles as follows :\u00a0</p>\n<ul>\n<li><strong>Temporal </strong>\u2014 frontalis, auricular muscles, orbicularis oculi</li>\n<li><strong>Zygomatic </strong>\u2014 orbicularis oculi (lower eyelid part)</li>\n<li><strong>Buccal </strong>\u2014 muscles of the cheek and upper lip</li>\n<li><strong>Marginal mandibular </strong>\u2014 muscles of the lower lip</li>\n<li><strong>Cervical </strong>\u2014 platysma</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d4ffcb5845ea43c7a6f63cf5256a75c0x600x624.JPEG"
    ]
  },
  {
    "text": "Identify the normal anatomical variation given in the following CT image.",
    "choices": [
      {
        "id": 1,
        "text": "Tracheal diverticulum"
      },
      {
        "id": 2,
        "text": "Esophageal duplication"
      },
      {
        "id": 3,
        "text": "Aberrant right subclavian artery"
      },
      {
        "id": 4,
        "text": "Right aortic arch"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The CT finding in the image is suggestive of an <strong>aberrant right subclavian artery.</strong></p>\n<p>An aberrant right subclavian artery occurs when the <strong>right fourth aortic arch</strong> and right dorsal aorta involute cranial to the seventh intersegmental artery.</p>\n<p>This artery arises <strong>distal to the left subclavian artery</strong> and crosses the midline<strong> posterior </strong>to the esophagus. Because of the absence of a normal right subclavian-carotid junction to pull down the right recurrent laryngeal nerve (RLN) during embryologic development, the right RLN follows a straight path from the vagus to the larynx and is called a <strong>non-recurrent right laryngeal nerve</strong>.</p>\n<p>Most patients with this anomaly are asymptomatic, and the aberrant subclavian artery is of no clinical consequence. Dysphagia caused by compression of the esophagus by an abnormal subclavian artery is called <strong>dysphagia lusoria</strong>.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/56b1ef71e79f4c64bfdbaa2f29473ba0.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/00f86db621094550b23baaffe2ed7c76x1200x1324.JPEG"
    ]
  },
  {
    "text": "Identify the marked structure",
    "choices": [
      {
        "id": 1,
        "text": "Superficial temporal artery"
      },
      {
        "id": 2,
        "text": "Posterior auricular artery"
      },
      {
        "id": 3,
        "text": "Middle meningeal artery"
      },
      {
        "id": 4,
        "text": "Occipital artery"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Other Options:</p>\n<p><strong>Option B:</strong> The <strong>posterior auricular artery is smaller</strong> and located <strong>posterior to the ear.</strong></p>\n<p><strong>Option C: </strong>The <strong>middle meningeal artery </strong>is <strong>deep </strong>within the cranial cavity and supplies the meninges.</p>\n<p><strong>Option D: </strong>The <strong>occipital artery </strong>lies posteriorly and supplies the scalp at the <strong>back of the head.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d3d562488c5f4e9a844c94419c31ba7f.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0207b9b42ce4484e8ed4a35313cafb5ex926x936.JPEG"
    ]
  },
  {
    "text": "The marked structure serves as a surface landmark for which anatomical structure?",
    "choices": [
      {
        "id": 1,
        "text": "Pineal gland"
      },
      {
        "id": 2,
        "text": "Wenicke's area"
      },
      {
        "id": 3,
        "text": "Stem of the lateral sulcus"
      },
      {
        "id": 4,
        "text": "Internal carotid artery siphon"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Pterion marks as a surface <strong>landmark</strong> for the following structures:</p>\n<ul>\n<li><strong>Middle meningeal artery and vein</strong>: fractures in this area can rupture the middle meningeal artery, leading to an epidural hematoma.</li>\n<li><strong>Broca\u2019s area</strong>: Located in the dominant hemisphere (usually left) in the inferior frontal gyrus, it lies in proximity to the pterion</li>\n<li>The<strong> insular cortex </strong>and parts of the basal ganglia, such as the putamen, are located deep to the pterion, beneath the lateral sulcus.</li>\n<li><strong>Stem of the lateral sulcus</strong>, also called the Sylvian fissure. It houses the middle cerebral artery and its branches, playing a crucial role in brain vascularization and cortical organization.</li>\n</ul>\n<p>During surgeries, the pterion is a common site for<strong> trephining</strong> (making a hole in the skull).</p>\n<p><strong>Other Options:</strong></p>\n<p><strong>Option A: </strong>The <strong>pineal gland </strong>is located in the posterior aspect of the cranial fossa in the brain. It is located deep in the brain, near the midline.</p>\n<p><strong>Option B:</strong> <strong>Wenicke's area </strong>is in the superior temporal gyrus in the dominant cerebral hemisphere. It is found in the posterior part of the superior temporal gyrus.</p>\n<p><strong>Option D: </strong>The <strong>internal carotid artery siphon</strong> is a part of the internal carotid artery's course. Characterized by its S-shaped curvature as it traverses the cavernous sinus and enters the cranial cavity. This configuration helps dissipate pulsatile energy, reducing stress on cerebral vessels, and allows adaptability to cranial movements while maintaining cerebral perfusion.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d659905ea0cf4ae9931698ab18c843a6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/db914d64495347cb812f205c82995993x678x808.JPEG"
    ]
  },
  {
    "text": "A 60-year-old male recovering from facial nerve palsy complains of food getting stuck between the cheek and teeth while eating. What is the muscle affected in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Buccinator"
      },
      {
        "id": 2,
        "text": "Levator labii superioris"
      },
      {
        "id": 3,
        "text": "Zygomaticus major"
      },
      {
        "id": 4,
        "text": "Orbicularis oris"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This patient, recovering from facial nerve palsy, getting food stuck between the cheek and teeth while eating, is because of the <strong>buccinator</strong> being affected.</p>\n<p>The <strong>buccinator</strong> is a muscle of facial expression. It is innervated by the <strong>facial nerve</strong>. It is known as the <strong>whistling muscle.</strong></p>\n<p>The buccinator muscle is primarily responsible for keeping food between the teeth during mastication by pressing the cheek against the teeth (involved in flattening the cheeks against the gums and teeth).</p>\n<p>In facial nerve palsy, paralysis of the buccinator muscle can lead to food accumulating in the cheek pouch, as the muscle is unable to contract properly.</p>\n<p>Other options:</p>\n<p><strong>Option B: Levator Labii Superioris: </strong>This muscle <strong>elevates the upper lip</strong> and contributes to facial expressions like showing the upper teeth and dilates the nostrils. It is not involved in keeping food in place during chewing.</p>\n<p><strong>Option C : Zygomaticus Major: </strong>Responsible for <strong>pulling the corner of the mouth</strong> upward and outward, contributing to smiling. It does not influence food placement during mastication.</p>\n<p><strong>Option D : Orbicularis Oris:</strong> Encircles the mouth and helps in <strong>closing the lips</strong>. While it is involved in mastication and speech, its paralysis would not cause food to accumulate in the cheek.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a derivative of neural crest cells?",
    "choices": [
      {
        "id": 1,
        "text": "Ciliary muscles"
      },
      {
        "id": 2,
        "text": "Retinal pigment epithelium"
      },
      {
        "id": 3,
        "text": "Ciliary ganglion"
      },
      {
        "id": 4,
        "text": "Melanocytes"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Retinal pigment epithelium is not a derivative of neural crest cells.</p>\n<p><strong>Retinal pigment epithelium (RPE) </strong>is derived from the <strong>neuroectoderm.</strong> The RPE develops from the <strong>outer layer</strong> of the <strong>optic cup</strong>, a structure that arises from the neural tube (neuroectodermal origin), not from neural crest cells.</p>\n<p><strong>Neural crest cells </strong>are a group of cells that migrate during embryonic development and give rise to various structures, including parts of the nervous system, face, and heart.</p>\n<p>Neural crest cells (NCC) are present adjacent to the <strong>neural tube</strong> and are sometimes referred to as the <strong>fourth germ layer. </strong>It contributes to the formation of many organs and tissues:</p>\n<p>In the trunk region, they form:\u00a0</p>\n<ul>\n<li><strong>Melanocytes (Option D)</strong></li>\n<li>Sensory ganglia</li>\n<li>Sympathetic and enteric neurons</li>\n<li>Schwann cells\u00a0</li>\n<li>Adrenal medulla cells</li>\n</ul>\n<p>In the cranial region, they contribute to the:\u00a0</p>\n<ul>\n<li>Craniofacial skeleton</li>\n<li><strong>Neurons for cranial ganglia-Ciliary ganglion \u00a0(Option C)</strong></li>\n<li><strong>Ciliary muscles \u00a0(Option A)</strong></li>\n<li>Satellite glial cells</li>\n<li>Melanocytes</li>\n</ul>\n<p>Some of the other neural crest derivatives are:</p>\n<ul>\n<li>C cells of the thyroid gland</li>\n<li>Conotruncal septum in the heart</li>\n<li>Odontoblasts</li>\n<li>Smooth muscle cells to blood vessels to the face and forebrain.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The cranial component of the neural crest cells leads to the formation of?",
    "choices": [
      {
        "id": 1,
        "text": "SA node"
      },
      {
        "id": 2,
        "text": "AV cushion"
      },
      {
        "id": 3,
        "text": "Conotruncal septum"
      },
      {
        "id": 4,
        "text": "Chordae tendinae"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The cranial component of neural crest cells (NCC) leads to the formation of <strong>Conotruncal septum.</strong></p>\n<p>The conotruncal septum is also known as the <strong>aortopulmonary septum</strong>. The formation of the aortopulmonary septum in the truncus arteriosus <strong>divides the outflow channel </strong>of the heart into the ventral aorta and the pulmonary trunk. Persistent truncus arteriosus results when the conotruncal ridges fail to form.\u00a0</p>\n<p>The development of the heart begins in the third week of embryogenesis with the formation of the <strong>cardiogenic mesoderm.</strong> The heart tube forms through fusion of <strong>paired endocardial tubes</strong>, which then undergo looping and septation to establish the four chambers. By the end of the <strong>eighth week</strong>, the heart achieves its definitive structure, with separate atria, ventricles, and major vessels.</p>\n<p>The heart develops from mesodermal origins, with different parts deriving from specific embryonic structures:</p>\n<ul>\n<li><strong>First Heart Field (Primary Heart Field)</strong>: Forms the <strong>left ventricle</strong> and part of the atria.</li>\n<li><strong>Second Heart Field</strong>: Contributes to the <strong>right ventricle, outflow tract</strong> (conus arteriosus and truncus arteriosus), and part of the <strong>atria.</strong></li>\n<li><strong>Neural Crest Cells</strong>: Contribute to the septation of the outflow tract and the formation of the <strong>aorticopulmonary septum.</strong></li>\n<li><strong>Proepicardium (Epicardial Cells)</strong>: Forms the <strong>epicardium</strong> and contributes to <strong>coronary vessels.</strong></li>\n<li><strong>Sinus Venosus</strong>: Forms part of the <strong>right atrium</strong> (sinus venarum) and the coronary sinus.</li>\n<li><strong>Endocardial Cushions</strong>: Form the <strong>atrioventricular valves</strong> and contribute to septation.</li>\n</ul>\n<p><strong>Other options:</strong></p>\n<p><strong>Option A: SA node </strong>is derived from the primary heart field - <strong>sinus venosus.</strong></p>\n<p><strong>Option B: AV cushions</strong> are derived from adjacent endocardial cells. The<strong> endocardial cells </strong>along with the <strong>epicardium</strong> and mesenchyme, form the AV cushions.</p>\n<p><strong>Option D: Chordae tendineae</strong> are formed from <strong>mesenchymal tissue </strong>within the heart.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/45642cf3d7a6453c8a97bb9d62a4f0c8x806x696.JPEG"
    ]
  },
  {
    "text": "A 15-year-old boy underwent splenectomy for immune thrombocytopenic purpura. During the procedure, the surgeon noticed bleeding while separating the spleen from the stomach. Which vessels are most likely implicated in this bleeding?",
    "choices": [
      {
        "id": 1,
        "text": "Left gastric vessels"
      },
      {
        "id": 2,
        "text": "Short gastric vessels"
      },
      {
        "id": 3,
        "text": "Right gastro-epiploic vessels"
      },
      {
        "id": 4,
        "text": "Splenic vessels"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Contents </strong>of the gastrosplenic ligament include:</p>\n<ul>\n<li><strong>Short gastric vessels</strong></li>\n<li><strong>Left gastroepiploic vessels</strong></li>\n</ul>\n<p>Hence, while separating the spleen from the stomach, there are maximum chances of bleeding if there is injury to the short gastric vessels.</p>\n<p><strong>Other Options:</strong></p>\n<p><strong>Option A: Left gastric vessels</strong>: Left gastric vessels run along the <strong>lesser curvature</strong> of the stomach. It is unlikely to be the source of bleeding in this case.</p>\n<p><strong>Option C: Right gastro-epiploic vessels:</strong> The right gastroepiploic vessels run along the pylorus and inferior region of the greater curvature of the stomach. It is not a part of the gastrosplenic ligament.</p>\n<p><strong>Option D: Splenic vessels: </strong>The splenic artery and vein run along the <strong>superior border of the pancreas</strong>. They are not directly involved in the separation of the spleen from the stomach.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/77aa541b4d2b4ea987aef61cd0d9a5ccx424x576.JPEG"
    ]
  },
  {
    "text": "Identify the marked structure",
    "choices": [
      {
        "id": 1,
        "text": "Primitive streak"
      },
      {
        "id": 2,
        "text": "Notochord"
      },
      {
        "id": 3,
        "text": "Neural groove"
      },
      {
        "id": 4,
        "text": "Secondary neural plate"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Option C: Neural Groove: </strong>A depression in the ectoderm that forms during neurulation, leading to the development of the neural tube. It appears after the primitive streak.</p>\n<p><strong>Option D: Secondary Neural Plate:</strong> Part of the neural plate involved in the later stages of neural tube development. It is not directly related to the primitive streak.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7215bc8c0e1541258f427ac06c80f9a3.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/de73ad9ff97b4b2fb3c18ce2f76ed1a9x556x626.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c3dbfba02a9e4be4af5586c0d5d66afcx846x936.JPEG"
    ]
  },
  {
    "text": "Which of the following is the first to be formed by the migration of the epiblast along the primitive streak?",
    "choices": [
      {
        "id": 1,
        "text": "Endoderm"
      },
      {
        "id": 2,
        "text": "Cardiac mesoderm"
      },
      {
        "id": 3,
        "text": "Epidermis"
      },
      {
        "id": 4,
        "text": "Neural groove"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Other Options:</p>\n<p>Option B:<strong> Cardiac Mesoderm: </strong>The mesoderm forms <strong>after the endoderm</strong> and differentiates later into subtypes, including the cardiac mesoderm.</p>\n<p>Option C:<strong> Epidermis: </strong>The epidermis arises from the <strong>ectoderm</strong>, which forms <strong>after</strong> both the <strong>endoderm and mesoderm.</strong></p>\n<p>Option D: <strong>Neural Groove: </strong>The neural groove is part of the <strong>ectoderm </strong>and forms during <strong>neurulation</strong>, which occurs much <strong>later</strong> <strong>than</strong> the formation of the <strong>endoderm.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f199e247ce2844329eda917bd1ed212ax656x724.JPEG"
    ]
  },
  {
    "text": "During walking, the hip bone on the side of the suspended leg is raised by the action of which muscle present in the supporting leg?",
    "choices": [
      {
        "id": 1,
        "text": "Gluteus Medius"
      },
      {
        "id": 2,
        "text": "Gluteus Maximus"
      },
      {
        "id": 3,
        "text": "Obdurator Internus"
      },
      {
        "id": 4,
        "text": "Quadratus Femoris"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Option B: Gluteus Maximus: </strong>Extends and <strong>externally rotates</strong> the hip; key for <strong>climbing stairs</strong> and <strong>rising from sitting</strong>. Weakness causes difficulty in hip extension, affecting activities like standing up or climbing.</p>\n<p><strong>Option C: Obturator Internus:</strong>\u00a0<strong>Externally rotates</strong> and stabilizes the hip joint; <strong>abducts</strong> the <strong>thigh</strong> when the hip is flexed. Dysfunction can impair hip rotation, commonly affected in pelvic injuries.</p>\n<p><strong>Option D: Quadratus Femoris: </strong><strong>Externally rotates</strong> and adducts the hip. Injury or entrapment of the nerve to quadratus femoris can cause <strong>deep hip pain </strong>and <strong>weakness in rotation</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a1f3c14668fa4f8699daee5a7d5e9fa0x320x1074.JPEG"
    ]
  },
  {
    "text": "Identify the marked structure?",
    "choices": [
      {
        "id": 1,
        "text": "Oculomotor nerve"
      },
      {
        "id": 2,
        "text": "Abducens nerve"
      },
      {
        "id": 3,
        "text": "Trochlear nerve"
      },
      {
        "id": 4,
        "text": "Ophthalmic division"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Option B:</strong> The <strong>abducens nerve (CN VI)</strong> also passes through the cavernous sinus and superior orbital fissure. However, it is located more <strong>medially </strong>in the sinus and the fissure compared to the oculomotor nerve.</p>\n<p><strong>Option C:</strong> The <strong>trochlear nerve (CN IV)</strong> passes through the superior orbital fissure as well, but it is the smallest cranial nerve and follows a <strong>higher </strong>and more <strong>lateral </strong>path than the oculomotor nerve.</p>\n<p><strong>Option D: </strong>The <strong>ophthalmic division</strong> of the <strong>trigeminal nerve</strong> enters the lateral wall of the cavernous sinus, <strong>below</strong> the oculomotor nerve and trochlear nerve.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bd976de858a640a2ac7c7fd6d501c5ef.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8d39333395934f2bb431d82caf73d540x728x952.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/feb9bbb08b404fe6bc8f81d36f6841e4x746x808.JPEG"
    ]
  },
  {
    "text": "Injury to the posterior interosseous nerve leads to?",
    "choices": [
      {
        "id": 1,
        "text": "Loss of extension of digits"
      },
      {
        "id": 2,
        "text": "Loss of extension of the wrist"
      },
      {
        "id": 3,
        "text": "Loss of supination"
      },
      {
        "id": 4,
        "text": "Wrist drop"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><br />Injury to the <strong>posterior interosseous nerve</strong> leads to <strong>loss of extension of digits</strong>.</p>\n<p>The <strong>posterior interosseous nerve (PIN)</strong> is a continuation of the deep branch of the <strong>radial nerve</strong>. It originates from the radial nerve in the cubital fossa, near the lateral epicondyle of the humerus. After passing through the supinator muscle, it transitions into the PIN.</p>\n<p>The PIN is <strong>purely a motor nerve</strong> and supplies the posterior compartment of the forearm.</p>\n<p><strong>Clinical correlation</strong> based on location of lesion:</p>\n<table style=\"border-collapse: collapse; width: 100%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 24.9773%;\"><strong>\u00a0 \u00a0 Level of lesion</strong></td>\n<td style=\"width: 24.9773%;\"><strong>Nerve affected\u00a0</strong></td>\n<td style=\"width: 24.9773%;\"><strong>Cause</strong></td>\n<td style=\"width: 24.9773%;\"><strong>Clinical feature</strong></td>\n</tr>\n<tr>\n<td style=\"width: 24.9773%;\"><strong>Low\u00a0</strong></td>\n<td style=\"width: 24.9773%;\"><strong>Posterior interosseous nerve</strong> and Superficial Cutaneous\u00a0</td>\n<td style=\"width: 24.9773%;\">\n<p>Fracture or dislocations of the elbow.\u00a0</p>\n<p>- Commonly seen in Monteggia fracture</p>\n</td>\n<td style=\"width: 24.9773%;\">\n<p><strong>Cannot extend the MCP joint (digits)</strong> <strong>(Option A)</strong>.\u00a0</p>\n<p>Weakness in the extension of the thumb. Radial deviation of the wrist.</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 24.9773%;\"><strong>High\u00a0</strong></td>\n<td style=\"width: 24.9773%;\">Radial nerve in spiral groove</td>\n<td style=\"width: 24.9773%;\">Humerus fracture.</td>\n<td style=\"width: 24.9773%;\"><strong>Wrist drop (Option D)</strong><br />\"Saturday night palsy\" due to compression of the radial nerve\u00a0<br />Thumb drop, finger drop</td>\n</tr>\n<tr>\n<td style=\"width: 24.9773%;\"><strong>Very High\u00a0</strong></td>\n<td style=\"width: 24.9773%;\">Radial nerve proper</td>\n<td style=\"width: 24.9773%;\">Lesions around the shoulder joint &amp; axilla and crutch palsy</td>\n<td style=\"width: 24.9773%;\"><strong>Loss of extension of the wrist and hand.</strong> <strong>(Option B)</strong><br />Inability to extend elbow</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Monteggia fracture </strong>involves a fracture of the proximal ulna with a dislocation of the radial head. The radial nerve, especially its posterior interosseous branch, is at risk due to its proximity to the fracture site and leads to loss of extension of digits.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '014 Anatomy Ini-Cet 2024';
        let hierarchy = ["Marrow", "PYQs", "Anatomy"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>