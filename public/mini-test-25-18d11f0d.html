<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Test- 25 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A cadaveric specimen of the circle of Willis is given below. Which of the following marked structures represents the superior cerebellar artery?",
    "choices": [
      {
        "id": 1,
        "text": "4"
      },
      {
        "id": 2,
        "text": "3"
      },
      {
        "id": 3,
        "text": "2"
      },
      {
        "id": 4,
        "text": "1"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given cadaveric image is of the vascular structures(<strong>Circle of Willis</strong>) at the base of the brain. The structure marked as '<strong>A'</strong> can be identified as the\u00a0<strong>superior cerebellar artery </strong>as it arises from the distal portion of the basilar artery, immediately before the formation of the posterior cerebral arteries(marked as B).</p>\n<p>The superior cerebellar artery supplies the pons, pineal body, superior medullary velum and tela choroidea of the third ventricle.</p>\n<p><strong>Circle of Willis or circulus arteriosus </strong>is a large arterial anastomosis that unites the <strong>internal carotid </strong>and <strong>vertebrobasilar </strong>systems. It lies in the subarachnoid space within the basal cisterns that surround the optic chiasma and infundibulum. The branches from this anastomosis supply diffrent parts of the brain.</p>\n<p>The posterior communicating artery forms the link between the internal carotid and vertebrobasilar systems by connecting the posterior cerebral arteries (terminal branches of the basilar artery) with the internal carotid arteries. The anterior communicating artery connects the anterior cerebral arteries of the two sides (branches of the internal carotid artery).</p>\n<p>\u00a0</p>\n<p>\u00a0</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f66ecf29f22f4b06b8688745e8be980d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/db3679b2f0b64183a2a75da7a17eaedax1279x965.JPEG"
    ]
  },
  {
    "text": "A patient with salicylic acid poisoning has the following arterial blood gas analysis report : pH = 7.1, pCO2 =18mmHg, HCO3-=12mmol/L. The acid-base disorder here is_____",
    "choices": [
      {
        "id": 1,
        "text": "Metabolic acidosis with respiratory alkalosis"
      },
      {
        "id": 2,
        "text": "Respiratory acidosis with compensatory metabolic alkalosis"
      },
      {
        "id": 3,
        "text": "Metabolic acidosis with uncompensated respiratory alkalosis"
      },
      {
        "id": 4,
        "text": "Respiratory acidosis with metabolic alkalosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The acid-base disorder here is a&nbsp;mixed disorder of&nbsp;<strong>metabolic acidosis and respiratory alkalosis</strong>.&nbsp;</p>\n<p>It should not be confused with metabolic acidosis with uncompensated respiratory alkalosis. This can be understood by the following calculation:</p>\n<p><strong>Step 1</strong>: The pH in this patient is 7.1 (pH &lt;7.35) which indicates <strong>acidosis</strong></p>\n<p><strong>Step 2</strong>: HCO<sub>3</sub><sup>- </sup>is 12 mmol/L (Normal HCO<sub>3</sub><sup>-</sup>&nbsp;- 22&ndash;30 mmol/L). In metabolic acidosis, HCO<sub>3</sub><sup>-</sup>&nbsp;levels decrease.</p>\n<p>Hence, this is a case of <strong>metabolic acidosis.</strong></p>\n<p><strong>Step 3</strong>: As per <strong>Winter's formula</strong>, the expected respiratory compensation in metabolic acidosis can be calculated using,</p>\n<p>&nbsp; &nbsp; &nbsp;&nbsp;<strong>pCO<sub>2 </sub>=( 1.5 x [HCO<sub>3</sub><sup>-</sup>] ) +8&nbsp;&plusmn; 2</strong></p>\n<p>In this case, Expected&nbsp;pCO<sub>2</sub>&nbsp;= ( 1.5 x [12] )&nbsp;+8&nbsp;&plusmn; 2</p>\n<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 26 &plusmn; 2</p>\n<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 24 - 28 mmHg</p>\n<p>The pCO<sub>2</sub> in this patient is 18 mmHg, which implies there is an overcompensation of pCO<sub>2</sub>. This <strong>overcompensation can happen only if there is an additional component of respiratory alkalosis contributing to reduced pCO<sub>2</sub></strong>.</p>\n<p>Hence, this patient has a <strong>mixed disorder - metabolic acidosis and respiratory alkalosis.&nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 34-year-old male whose staple diet primarily consisted of only maize presents with diarrhea, dementia, and photosensitive dermatitis in sun-exposed areas. Which vitamin is most likely deficient in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Niacin"
      },
      {
        "id": 2,
        "text": "Vitamin B6"
      },
      {
        "id": 3,
        "text": "Ascorbic acid"
      },
      {
        "id": 4,
        "text": "Biotin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above history and clinical features suggest<strong>\u00a0niacin/vitamin B3</strong> deficiency.</p>\n<p>Excessive consumption of maize-based diets can cause\u00a0niacin/vitamin B3 deficiency. Maize contains niacin in bound form and is unavailable for absorption.\u00a0Jowar has high leucine content which inhibits QPRTase, an enzyme in the synthesis of niacin.</p>\n<p>Niacin deficiency leads to a disease called <strong>pellagra</strong> which is characterized by</p>\n<ul>\n<li>Diarrhea</li>\n<li>Dermatitis</li>\n<li>Dementia</li>\n</ul>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p class=\"ng-binding\"><strong>Casal\u2019s necklace pattern</strong>\u00a0classically seen in pellagra is an\u00a0erythematous\u00a0pigmented skin rash in the distribution of a broad collar.</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8c0a9800de0f40f5b25c42b0b81bcecfx720x521.JPEG"
    ]
  },
  {
    "text": "Identify the pathological red blood cell form shown in the image below",
    "choices": [
      {
        "id": 1,
        "text": "Dacrocyte"
      },
      {
        "id": 2,
        "text": "Acanthocyte"
      },
      {
        "id": 3,
        "text": "Echinocyte"
      },
      {
        "id": 4,
        "text": "Schistocyte"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The pathological red blood cell form seen in the peripheral smear is an <strong>acanthocyte.</strong></p>\n<p><strong>Acanthocytes&nbsp;</strong>are red blood cells with <strong>spicules</strong> of various sizes at regular intervals on the cell surface.</p>\n<p>Conditions with acanthocytes include-</p>\n<ul>\n<li>Renal disease</li>\n<li>Abetalipoproteinemia</li>\n<li>Post splenectomy/ hyposplenism.</li>\n</ul>\n<p>Other options-&nbsp;</p>\n<p>Option A: <strong>Dacrocytes or tear-drop cells</strong> are seen in myelofibrosis, myelodysplastic syndromes, hemolytic anemias, and thalassemias.&nbsp;&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/93567bf85f0849ae9f86abd652e25d4c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9bfae20e671545e5bc375ecc532f1a97x1242x932.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/03b451c1478440f39623e83890486c6cx750x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9e9925a2a99848149d1dbbd8251c02b9x750x600.JPEG"
    ]
  },
  {
    "text": "The serological profile of a patient is as follows: HBsAg: + ve; HBeAg: + ve; Anti HBc: IgM: + ve;  Anti HBs: - ve; Anti HBe: - ve. What is your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Acute HBV infection with high infectivity"
      },
      {
        "id": 2,
        "text": "HBV vaccination"
      },
      {
        "id": 3,
        "text": "Chronic HBV infection"
      },
      {
        "id": 4,
        "text": "Acute HBV infection with low infectivity"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>HBsAg</strong> and <strong>IgM Anti-HBc</strong> is positive, indicating an acute hepatitis B infection. <strong>HBeAg positive</strong> indicates that the patient is highly infectious.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following is not an indication for the use of corticosteroids in the treatment of rheumatoid arthritis?",
    "choices": [
      {
        "id": 1,
        "text": "Management of acute disease flares while on therapy with DMARDs"
      },
      {
        "id": 2,
        "text": "As bridging therapy initially, till DMARDs take effect"
      },
      {
        "id": 3,
        "text": "Chronic therapy in cases that cannot be controlled with DMARDs"
      },
      {
        "id": 4,
        "text": "As monotherapy for the treatment of rheumatoid arthritis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p class=\"p1\"><strong>Glucocorticoids</strong> are not used as monotherapy for the treatment of rheumatoid arthritis (RA).</p>\n<p class=\"p1\">They may be administered as <strong>bridging therapy</strong> initially to achieve rapid disease control till Disease-Modifying Anti-Rheumatoid Drugs (DMARDs) take effect. DMARDs take several weeks or even months to show full effect. (Option B)</p>\n<p class=\"p1\">A <strong>burst</strong> of glucocorticoids for 1-2 weeks may be prescribed to manage <strong>acute disease flares</strong>. (Option A)</p>\n<p class=\"p1\"><strong>Chronic therapy</strong> with low doses may be needed to control the disease in patients with an <strong>inadequate response to DMARD</strong> therapy. (Option C)</p>\n<p class=\"p1\"><strong> High doses </strong>of glucocorticoids may be needed to treat <strong>severe extraarticular manifestations</strong> of RA.</p>\n<p class=\"p1\"><strong>Intraarticular injection</strong> of <strong>triamcinolone</strong> can be considered for one/few actively inflamed joints.</p>\n<p class=\"p1\">&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following IPC sections deals with McNaughton's rule?",
    "choices": [
      {
        "id": 1,
        "text": "IPC 82"
      },
      {
        "id": 2,
        "text": "IPC 84"
      },
      {
        "id": 3,
        "text": "IPC 85"
      },
      {
        "id": 4,
        "text": "IPC 86"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>IPC section 84</strong> deals with<strong>\u00a0McNaughten\u2019s rule.</strong></p>\n<p><strong>McNaughten\u2019s rule:</strong></p>\n<ul>\n<li>It was formed by the Judges of McNaughten\u2019s case, to clarify the common law of insanity in England during 1843. It is similar to IPC 84 that states \u201cNothing is offence which is done by a person who at the time of doing it by reason of unsoundness of mind is incapable of knowing the nature of act, or that he is doing what is either wrong or contrary to law\u201d.</li>\n<li>This form the basis of the \u2018<strong>test</strong>\u2019 of insanity that the jury should be instructed to apply in each case of alleged insanity.</li>\n<li>The rules are:\n<ul>\n<li><strong>Every man is presumed to be sane</strong>\u00a0and to possess a sufficient degree of reason to be responsible for his crimes, u<strong>ntil the contrary be proved to their satisfaction</strong>.</li>\n<li>To establish\u00a0<strong>an insanity defence</strong>, it must be clearly proved that, at the\u00a0<strong>time of the committing of the act</strong>, the accused was laboring under \u2018<strong>such a defect of reason, from a disease of the mind</strong>, as not to know the nature and quality of the act he was doing; or if he did know it, that he did not know he was doing what was wrong\u2019.</li>\n</ul>\n</li>\n</ul>\n<p>McNaughten\u2019s rule now comes under <strong>Section 22</strong> of the <strong>Bharatiya Nyaya Sanhita</strong>, 2023.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with middle ear fluid accumulation is tested using tympanometry. What is the expected tympanogram finding seen in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Compliance is high at or near ambient air pressure"
      },
      {
        "id": 2,
        "text": "A flat or dome-shaped graph"
      },
      {
        "id": 3,
        "text": "Compliance is lower at or near ambient air pressure"
      },
      {
        "id": 4,
        "text": "Maximum compliance occurs with negative pressure"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\">In the given clinical scenario of <strong>middle ear fluid accumulation</strong>, the expected tympanogram finding would be a&nbsp;<strong>flat or dome-shaped graph</strong>.</p>\n<p class=\"p1\"><strong>Tympanometry:&nbsp;</strong>It is used in evaluating the <strong>status of the middle ear</strong> and the&nbsp;<strong>functioning of the eustachian tube</strong>.</p>\n<p class=\"p1\"><strong> Principle</strong>: When a sound wave strikes the tympanic membrane, some of the sound energy is absorbed while the rest is reflected. A stiffer tympanic membrane would reflect more sound energy than a compliant one.</p>\n<p class=\"p1\">By changing the pressures in a sealed external auditory canal and then measuring the reflected sound energy, it is possible to find the <strong>compliance</strong> or <strong>stiffness</strong> of the tympano-ossicular system and thus find the healthy or diseased status of the middle ear.</p>\n<p class=\"p1\">Tympanometry is also used in evaluating the <strong>patency of the grommet</strong> inserted in the tympanic membrane for treating serous otitis media.</p>\n<p class=\"p1\">By charting the compliance of the tympano-ossicular system against various pressure changes, different types of graphs called <strong>tympanograms</strong> are obtained. They are as follows:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b0ee955ecd78437ea4212f93c7082a5fx1280x2078.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/719f601b7d4440468dad6e106db99b8bx720x358.JPEG"
    ]
  },
  {
    "text": "An industrial worker was admitted to the hospital after an eye injury sustained while cutting stone with a hammer and iron chisel. A foreign body was suspected to be impacted in his eye. Which of the following is the best investigation for foreign body localization?",
    "choices": [
      {
        "id": 1,
        "text": "MRI"
      },
      {
        "id": 2,
        "text": "CT"
      },
      {
        "id": 3,
        "text": "X-ray"
      },
      {
        "id": 4,
        "text": "B mode scan"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>CT scan</strong> is the best method for&nbsp;<strong>intraocular foreign body (IOFB)</strong>&nbsp;localization.</p>\n<p>The foreign bodies most likely to penetrate and be retained in the eye are minute chips of iron or steel. While chipping stone with an iron chisel, the chip of the iron chisel is more likely to enter the eye than the stone. A foreign body entering the eye may cause damage by:</p>\n<ul>\n<li>mechanical effects</li>\n<li>introduction of infection</li>\n<li>reacting with the intraocular tissues</li>\n</ul>\n<p><strong>Anteroposterior</strong> and <strong>lateral</strong> view <strong>X-rays</strong> are recommended for locating an IOFB as most foreign bodies are <strong>radio-opaque</strong>. <strong>Ultrasonographic</strong> localization can tell the position of even <strong>non-radiopaque</strong> foreign bodies. <strong>CT scan</strong> is the <strong>best</strong> method of IOFB localization.</p>\n<p>MRI is contraindicated for metallic IOFB.<strong>MRI</strong> can be <strong>detrimental</strong>&nbsp;for a patient with a history of an <strong>intraocular foreign body (IOFB)</strong> after cutting stone with a hammer and chisel. It can cause further damage by producing movements of the foreign body if it is magnetic. The use of&nbsp;<strong>MRI</strong>&nbsp;is <strong>contraindicated</strong> for metallic (iron) foreign bodies and is not recommended as a screening procedure.</p>\n<p>Management: A foreign body should always be removed <strong>unless</strong>:</p>\n<ul>\n<li>it is inert and probably sterile</li>\n<li>little damage has been done to vision&nbsp;</li>\n<li>the process of removal will destroy sight</li>\n</ul>\n<p>&nbsp;</p>\n<p><strong>Siderosis bulbi</strong> refers to the ocular <strong>degenerative</strong> changes produced by an iron foreign body. It usually occurs <strong>2 months to 2 years</strong> after the injury.&nbsp;This condition is due to the <strong>electrolytic dissociation</strong> of the metal by an intrinsic resting current in the eye which disseminates the metal, combining it with cellular proteins and cause atrophy.</p>\n<p>Clinical features:</p>\n<ul>\n<li>Iris: first stained greenish and later turns reddish-brown, causing <strong>heterochromia iridis.</strong></li>\n<li>Pupil: iron deposition in sphincter leads to <strong>mydriasis</strong>.</li>\n<li>Lens: iron deposition in a radial fashion on the anterior capsule of the lens, leading to <strong>anterior capsular cataract.</strong></li>\n<li>Retina: <strong>pigmentary retinopathy</strong>; followed by atrophy of the retina and retinal pigmentary epithelium.</li>\n<li><strong>Secondary open-angle Glaucoma</strong>: due to damage to the trabecular meshwork.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A hypertensive patient with increased blood pressure has come to the outpatient department. He asks about lifestyle modifications and a DASH diet was suggested. How much does the systolic blood pressure drop by adopting the DASH diet?",
    "choices": [
      {
        "id": 1,
        "text": "2 - 4 mmHg"
      },
      {
        "id": 2,
        "text": "4 - 8 mmHg"
      },
      {
        "id": 3,
        "text": "8 - 14 mmHg"
      },
      {
        "id": 4,
        "text": "14 - 20 mmHg"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The systolic blood pressure drops by&nbsp;<strong>8-14 mmHg</strong> by adopting the<strong> DASH</strong>&nbsp;<strong>diet</strong>.</p>\n<p>DASH is a diet plan which involves consuming a diet rich in fruits, vegetables, and low-fat dairy products with reduced saturated and total fat content.&nbsp;</p>\n<p><strong>Lifestyle modifications</strong> to manage hypertension and the <strong>reduction</strong> in <strong>blood pressure</strong> are shown below.</p>\n<table style=\"height: 230px; width: 370px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 210.290771px;\"><strong>Modification</strong></td>\n<td style=\"width: 142.709229px; text-align: center;\"><strong>Impact on SBP</strong></td>\n</tr>\n<tr>\n<td style=\"width: 210.290771px;\">Weight reduction to maintain a normal body mass index</td>\n<td style=\"width: 142.709229px; text-align: center;\">&nbsp;5&ndash;20 mmHg per 10 &nbsp;kg weight loss</td>\n</tr>\n<tr>\n<td style=\"width: 210.290771px;\">DASH diet</td>\n<td style=\"width: 142.709229px; text-align: center;\">&nbsp;8&ndash;14 mmHg</td>\n</tr>\n<tr>\n<td style=\"width: 210.290771px;\">\n<p>Sodium intake reduction&nbsp;<br />(&lt; 6 grams of sodium chloride)</p>\n</td>\n<td style=\"width: 142.709229px; text-align: center;\">&nbsp;2&ndash;8 mmHg</td>\n</tr>\n<tr>\n<td style=\"width: 210.290771px;\">Physical activity: 30 minutes of a brisk walk per day</td>\n<td style=\"width: 142.709229px; text-align: center;\">&nbsp;4&ndash;9 mmHg</td>\n</tr>\n<tr>\n<td style=\"width: 210.290771px;\">Limit alcohol consumption<br />(&le;2 drinks/day)</td>\n<td style=\"width: 142.709229px; text-align: center;\">&nbsp;2-4 mmHg</td>\n</tr>\n</tbody>\n</table>\n<p>Hypertension is a <strong>non-communicable chronic condition</strong> that is a risk factor for coronary heart disease, stroke, and other vascular complications. It is known to be an <strong>iceberg disease. </strong>The&nbsp;<strong>rule of halves</strong>&nbsp;states that only about half of the hypertensive subjects in the general population are <strong>aware</strong> of the condition. Only half of those aware are being <strong>treated</strong> and only half of those being treated are considered to be <strong>adequately treated</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7de8d03d80e0483b9558f5e574ba1789x1279x1833.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a component of RCH program?",
    "choices": [
      {
        "id": 1,
        "text": "Safe motherhood"
      },
      {
        "id": 2,
        "text": "Women education and empowerment"
      },
      {
        "id": 3,
        "text": "Children and newborn care"
      },
      {
        "id": 4,
        "text": "Screening and treatment of STD/RTI"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>Reproductive and child health program(RCH)</strong> does not include <strong>women's education and empowerment\u00a0</strong>as a component.</p>\n<p>RCH program deals with the health status of young women and young children. The main objectives are <strong>reducing the total fertility rate, infant mortality rate and maternal mortality rate</strong>. It involves the following components:</p>\n<ul>\n<li><strong>Essential and emergency obstetric care</strong></li>\n<li><strong>Control of reproductive tract infections (RTI) and sexually transmitted diseases (STD)</strong></li>\n<li>Safe abortion services</li>\n<li>Full range of family planning services including laparoscopic services</li>\n<li><strong>Essential newborn care and immunization</strong></li>\n<li>Emergency care of sick children including diarrhoeal and acute respiratory disease</li>\n<li>Prevention and control of vitamin A deficiency and anaemia in children.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As a medical officer posted in rural service, you have been asked to supervise the various preventive measures being taken in your region against malaria. According to the program whose logo is shown below, you would be correct to advise all of the following except:",
    "choices": [
      {
        "id": 1,
        "text": "Two rounds of spraying with DDT should be done to provide protection during the entire transmission season."
      },
      {
        "id": 2,
        "text": "Long Lasting Insecticide Nets (LLIN) should be provided in areas with Annual Parasite Index\u00a0\u2265 5."
      },
      {
        "id": 3,
        "text": "Indoor Residual Sprays are not suitable for vector control in rural areas."
      },
      {
        "id": 4,
        "text": "In case of DDT resistance, 3 rounds of spraying with Malathion should be done to provide protection during the entire transmission season."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Under the Integrated vector management initiative,&nbsp;<strong>Indoor Residual Sprays</strong> are the <strong>main methods of vector control</strong> in <strong>rural</strong> <strong>areas.</strong>&nbsp;</p>\n<p>National Vector Borne Disease Control Programme (NVBDCP) is the nodal agency for the prevention of control of the following vector-borne diseases:</p>\n<ul>\n<li>Kala-azar (also called visceral leishmaniasis)</li>\n<li>Malaria</li>\n<li>Dengue</li>\n<li>Filariasis</li>\n<li>Japanese encephalitis</li>\n<li>Chikungunya.&nbsp;</li>\n</ul>\n<p>Integrated Vector Management:</p>\n<ul>\n<li><strong>For adult mosquitoes:</strong>\n<ul>\n<li>Indoor residual Sprays are used. It is the main method of vector control in rural areas.</li>\n<li>DDT is the insecticide of choice.</li>\n<li>Two rounds of spraying are done with DDT and in DDT-resistant areas, three rounds of spraying are done with Malathion (if DDT-resistant).</li>\n</ul>\n</li>\n<li><strong>For the larvae:&nbsp;</strong>Larvivorous fish and larvicides are used.&nbsp;This is the main method of vector control in <strong>urban areas.</strong></li>\n<li><strong>For personal protection:</strong>&nbsp;\n<ul>\n<li>Insecticide-treated bed nets are supplied in areas with Annual Parasite Index (API)&nbsp;&ge; 2.</li>\n<li>Long-Lasting Insecticide Nets (LLIN) are provided in areas with API&nbsp;&ge; 5.</li>\n</ul>\n</li>\n</ul>\n<p>The Drug distribution centers only dispense anti-malarial drugs under the NVBDCP for Malaria.&nbsp;</p>\n<p><strong>Important points about the organization for the anti-Malaria program:</strong></p>\n<ul>\n<li>Central Government: Supplies DDT and larvicides.</li>\n<li>State government: Procures the Indoor Residual Sprays (IRS) for the districts.</li>\n<li>District Malaria Office: Key unit for the implementation of the program.</li>\n<li>District Malaria Officer: Has direct responsibility for IRS spraying operations and is assisted by one Assistant Malaria Officer and Malaria Inspectors.&nbsp;</li>\n<li>Medical officer of the PHC:&nbsp; Has the overall responsibility for the surveillance and laboratory services.</li>\n<li>Multi-Purpose Workers and ASHAs: Carry out surveillance and case detection in the community.</li>\n<li>Drug Distribution Centres: Only&nbsp;dispensing anti-malarial drugs.</li>\n<li>Fever Treatment Depots: Dispense the anti-malarial drugs and collect the blood slides.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c7705b7815934c51a5e4745416f59cf3.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "All of the following are causes of RTA (renal tubular acidosis ) type II  except",
    "choices": [
      {
        "id": 1,
        "text": "Wilson's disease"
      },
      {
        "id": 2,
        "text": "Galactosemia"
      },
      {
        "id": 3,
        "text": "Hereditary fructose intolerance"
      },
      {
        "id": 4,
        "text": "Medullary sponge kidney"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Medullary sponge kidney causes RTA Type I&nbsp;</p>\n<p><strong>Causes of RTA type II</strong></p>\n<ul>\n<li>Amyloidosis</li>\n<li>Wilson's disease</li>\n<li>Galactosemia</li>\n<li>Hereditary fructose intolerance</li>\n<li>Cystinosis</li>\n</ul>\n<p><strong>Causes of RTA Type I</strong></p>\n<ul>\n<li>Autoimmune diseases like SLE, Sjogren Syndrome</li>\n<li>Drugs: amphotericin, lithium, aminoglycosides</li>\n<li>Medullary sponge kidney</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old man presented with the finding shown in the given image. Which among the following conditions is least likely to cause this presentation?",
    "choices": [
      {
        "id": 1,
        "text": "Endocarditis"
      },
      {
        "id": 2,
        "text": "Bronchiectasis"
      },
      {
        "id": 3,
        "text": "Tricuspid atresia"
      },
      {
        "id": 4,
        "text": "Aortic dissection"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image shows&nbsp;<strong>digital clubbing.</strong> Among the given options, aortic dissection is least likely to cause digital clubbing.</p>\n<p><strong>Clubbing</strong> is a&nbsp;selective <strong>bulbous enlargement</strong> of the distal segments of the fingers and toes due to the proliferation of connective tissue, particularly on the dorsal surface.</p>\n<p>Clubbing can occur secondary to:</p>\n<ul>\n<li>Pulmonary disease: Lung cancer, <strong>bronchiectasis</strong>, asbestosis, sarcoidosis, lung abscess, cystic fibrosis, tuberculosis, and mesothelioma</li>\n<li>Cardiac disease: <strong>Cyanotic congenital heart disease</strong>,\u202fother causes of right-to-left shunting, and <strong>bacterial endocarditis</strong>.</li>\n<li>Gastrointestinal disease: Ulcerative colitis, Crohn disease, primary biliary cirrhosis, cirrhosis of the liver.</li>\n<li>Skin disease: Palmoplantar keratoderma, and Fischer-Volavsek syndrome.</li>\n<li>Malignancies: Thyroid cancer, thymus cancer, Hodgkin disease, and disseminated chronic myeloid leukemia.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/37489bade9bd450ea12c5740c6174bf9.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 66-year-old man comes with complaints of tremor in his right hand. The tremor is most apparent at rest and improves with movement. He also says that he has difficulty initiating movements and his wife says his movements have been slow. On examination, rigidity is observed to passive arm movement and shuffling gait with a stooped posture is noticed.  Which of the following statements is false regarding the pathology of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Substantia nigra pars reticulata is unaffected by the disease process"
      },
      {
        "id": 2,
        "text": "Decreased striatal dopamine"
      },
      {
        "id": 3,
        "text": "Degeneration of dopaminergic neurons in the substantia nigra pars compacta"
      },
      {
        "id": 4,
        "text": "Lewy bodies which contain degenerated tau protein are seen"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario suggests a diagnosis of <strong>Parkinson's disease </strong>and<strong> Lewy bodies</strong>&nbsp;seen in Parkinson's disease do not contain tau protein. They contain the protein <strong>&alpha;-synuclein.</strong></p>\n<p>Pathologic hallmarks of Parkinson's disease :</p>\n<ul>\n<li>Degeneration of dopaminergic neurons in the <strong>substantia nigra pars compacta&nbsp;</strong>(SNc)</li>\n<li>Reduced striatal dopamine</li>\n<li>Intracytoplasmic proteinaceous inclusions called <strong>Lewy bodies,</strong> which contain the protein <strong>&alpha;-synuclein</strong></li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young sheep farmer presents to the OPD with pain in the right upper part of the abdomen. On examination, there is tenderness and enlargement of the liver. Blood investigations show eosinophilia, elevated liver enzymes, and abdominal ultrasound is as below. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Amoebic liver abscess"
      },
      {
        "id": 2,
        "text": "Hydatid cyst"
      },
      {
        "id": 3,
        "text": "Pyogenic liver abscess"
      },
      {
        "id": 4,
        "text": "Hepatocellular carcinoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical vignette along with the ultrasound image showing\u00a0multiple septations and rosette or <strong>honeycomb appearance</strong> is diagnostic of active hydatid cyst.</p>\n<p><strong>Hydatid cyst:</strong></p>\n<p><em>Echinococcus granulosus</em>\u00a0is the most common causative agent in hydatid cysts, while\u00a0<em>Echinococcus multilocularis</em>\u00a0and\u00a0<em>Echinococcus ligartus</em>\u00a0account for a small number of cases.</p>\n<p>The\u00a0<strong>hydatid cyst</strong>\u00a0usually develops<strong>\u00a0three weeks</strong>\u00a0after the infection. The cyst is surrounded by a fibrous capsule called the\u00a0<strong>pericyst</strong>\u00a0that is derived from the host tissue.</p>\n<p>The cyst wall is composed of two layers,\u00a0<strong>ectocyst</strong>\u00a0(outer gelatinous membrane), and\u00a0<strong>endocyst</strong>\u00a0(inner germinal membrane). Ectocyst is a laminated membrane, which is acellular. It helps in the passage of nutrients. The endocyst helps in producing the laminated membrane and scoleces.</p>\n<p>The\u00a0<strong>brood capsules</strong>\u00a0are cellular masses in the hydatid fluid which consists of\u00a0<strong>scoleces</strong>. In a definitive host, these scoleces develop into adult tapeworm while in the intermediate hosts these develop into new hydatid cysts. The brood capsules are attached to the endocyst by a pedicle or\u00a0<strong>stalk</strong>. The brood capsules may mature and detach from the mother cyst and become the\u00a0<strong>daughter cysts,\u00a0</strong>which are an exact replica of the mother\u00a0cysts.</p>\n<p>The freed brood capsules and scoleces present in the hydatid\u00a0fluid are called<strong>\u00a0hydatid sand</strong>.</p>\n<p>The image attached below shows the C.S of hydatid cyst.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f60ec97a9d5147a0b331649785186a3d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5f9306a33b68484dbb2aafa12757f768x1279x1548.JPEG"
    ]
  },
  {
    "text": "Given below instrument is used:",
    "choices": [
      {
        "id": 1,
        "text": "Post choledochotomy"
      },
      {
        "id": 2,
        "text": "Pleural effusion tapping"
      },
      {
        "id": 3,
        "text": "Nasogastric aspiration"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Image shows <strong>kehr&rsquo;s T tube </strong>with vertical and horizontal limb. <br />It is used<strong> after exploration of CBD </strong>i.e. horizontal limb is placed in CBD and vertical limb is brought out as drain.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7907ac378f0c4bb2a1fbb13a71cd8a9e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/45845900f3654f6e97fee2ec868a765ex1280x1390.JPEG"
    ]
  },
  {
    "text": "10 months old male baby presented with an empty scrotum. Ultrasonography revealed that the right testis was found in the right inguinal canal, while the left testis was found in the perineum.  Comment on the diagnosis of this baby.",
    "choices": [
      {
        "id": 1,
        "text": "Bilateral undescended testis"
      },
      {
        "id": 2,
        "text": "Bilateral ectopic testis"
      },
      {
        "id": 3,
        "text": "Right side undescended testis and left sided ectopic testis"
      },
      {
        "id": 4,
        "text": "Right side ectopic testis and left side undescended testis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Since the right testis is found in the inguinal canal which is along the <strong>normal path of descent</strong> it is called an <strong>undescended testis</strong>, while the left testis lies in the perineum which is an <strong>ectopic site of descent</strong> and is called an <strong>ectopic testis</strong>.</p>\n<p>Cryptorchidism is the&nbsp;<strong>failure</strong>&nbsp;of the descent of the intra-abdominal testes into the&nbsp;<strong>scrotal sac.</strong>&nbsp; It is the most common congenital abnormality of the genitourinary tract. The testes can<strong>&nbsp;arrest&nbsp;</strong>anywhere during descent, and the most common site is the<strong>&nbsp;inguinal region.</strong></p>\n<p>Phases of testicular descent:</p>\n<ul>\n<li><strong>Transabdominal phase:&nbsp;</strong>Testes come to lie in the lower abdomen or pelvis, and this descent is regulated by<strong>&nbsp;Mullerian-inhibiting substances.</strong></li>\n<li><strong>Inguinoscrotal phase:&nbsp;</strong>Testes descend along the inguinal canal and reach the scrotal sac, and this phase of the descent is regulated by<strong>androgen-induced calcitonin gene-related peptide from the genitofemoral nerve.</strong></li>\n</ul>\n<p>The exact pathogenesis remains unknown; however, deficiency in gonadotropins and Mullerian-inhibiting substance (MIS) and increased expression of estradiol in the placenta are thought to play a role.&nbsp;</p>\n<p>&nbsp;</p>\n<p>Ectopic testis is can be <strong>present anywhere along the normal path of descent</strong> from the abdomen to the scrotum. Other ectopic sites outside the normal path includes:&nbsp;</p>\n<ul>\n<li>Femoral triangle</li>\n<li>The root of the penis</li>\n<li>Perineum.</li>\n</ul>\n<p>An ectopic testis is usually treated with<strong>&nbsp;orchidopexy.</strong></p>\n<p>&nbsp;</p>\n<p>The image below shows the possible ectopic sites of the testes:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e2805d3da1f749519a5477bc1cf4816ex1280x1215.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/beaf0726148e42b786b130d6b3fab55dx1280x1611.JPEG"
    ]
  },
  {
    "text": "A 45-year-old woman comes to the OPD with a history of a lump in the left breast. On clinical examination, the size of the lump in the left breast is 9\u00d710 cm with the following appearance and no axillary lymphadenopathy. The histopathology of the biopsy from the lump shows increased stromal cellularity and typical leaflike architecture. What is your likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Phyllodes tumour"
      },
      {
        "id": 2,
        "text": "Giant fibroadenoma"
      },
      {
        "id": 3,
        "text": "Inflammatory carcinoma"
      },
      {
        "id": 4,
        "text": "Ductal carcinoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario and the image are suggestive of<strong> phyllodes tumour </strong>or<strong>&nbsp;cystosarcoma phyllodes</strong>&nbsp;of the breast.</p>\n<p><strong>Phyllodes tumour</strong>&nbsp;is also known as&nbsp;cystosarcoma phyllodes&nbsp;presents as a large tumour with an unevenly bosselated surface. The histopathology of the biopsy of the lump shows&nbsp;<strong>increased stromal cellularity</strong>, overgrowth, and&nbsp;<strong>typical leaflike architecture</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cd00838286d6462892c2bab582113dd2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/037d205b6a4640428f36be490ee4bdfdx720x540.JPEG"
    ]
  },
  {
    "text": "Given instrument is:",
    "choices": [
      {
        "id": 1,
        "text": "Sengstaken Blakemore tube"
      },
      {
        "id": 2,
        "text": "Minnesota tube"
      },
      {
        "id": 3,
        "text": "Linton nachlas tube"
      },
      {
        "id": 4,
        "text": "Ryle\u2019s tube"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Minnesota tube has 4 openings &ndash; 2 suction tubes and 2 inflation tubes.</p>\n<ul>\n<li>Suction tubes allows aspiration of both gastric and oesophageal contents.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f5f438b7b76d4ca49375927b08c15a83.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/9b3cfe1a102343d694b9bf0601dcb949x812x467.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/be14bb7e30a8421caca8aea0c97d9618x380x193.JPEG"
    ]
  },
  {
    "text": "A primi gravida mother in a 1st degree consanguineous marriage undergoes a quadruple screening test during the second trimester. The test results indicate a chromosomal anomaly of Trisomy 21.  Which of the following changes can be seen in the quadruple screening test?",
    "choices": [
      {
        "id": 1,
        "text": "Lower  \u03b2-hCG, Inhibin and elevated estriol, AFP"
      },
      {
        "id": 2,
        "text": "Elevated \u03b2-hCG, Inhibin and lower estriol, AFP"
      },
      {
        "id": 3,
        "text": "Elevated \u03b2-hCG, PAPP-A and lower estriol, AFP"
      },
      {
        "id": 4,
        "text": "Lower \u03b2-hCG, PAPP-A and elevated estriol, AFP"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Quadruple screening is a <strong>second trimester</strong> multiple marker screening test for the detection of chromosomal anomalies like trisomy 21-Down syndrome. &nbsp;</p>\n<p>Pregnancies with Down syndrome are characterized by<strong> elevated</strong> &beta;-hCG, Inhibin and <strong>lower</strong> estriol, AFP levels.&nbsp; It is performed from <strong>15 to 21 weeks</strong> of gestation.&nbsp;</p>\n<p><strong>First trimester aneuploidy screening</strong> combines two maternal serum analytes,</p>\n<ul>\n<li>Human chorionic gonadotropin <strong>(hCG)</strong> and</li>\n<li>Pregnancy-associated plasma protein A (<strong>PAPP-A</strong>),</li>\n<li>With the sonographic measurement of the <strong>nuchal translucency</strong> (NT).</li>\n</ul>\n<p>It is performed between <strong>11 and 14 weeks</strong>&rsquo; gestation.</p>\n<p>In cases of fetal Down syndrome, the first-trimester serum free <strong>&beta;-hCG level is higher </strong>and the <strong>PAPP-A level is lower</strong>.</p>\n<p>With trisomy 18 and trisomy 13, levels of both analytes are lower.</p>\n<p>The abnormalities seen on quadruple screen are tabulated below:</p>\n<table style=\"width: 410px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 105px;\"><strong>&nbsp;</strong></td>\n<td style=\"width: 93px;\"><strong>Trisomy 21</strong></td>\n<td style=\"width: 100px;\"><strong>Trisomy 18</strong></td>\n<td style=\"width: 94px;\"><strong>Neural tube defect or abdominal wall defect</strong></td>\n</tr>\n<tr>\n<td style=\"width: 105px;\"><strong>MSAFP</strong></td>\n<td style=\"width: 93px;\">Low</td>\n<td style=\"width: 100px;\">Low</td>\n<td style=\"width: 94px;\">High</td>\n</tr>\n<tr>\n<td style=\"width: 105px;\"><strong>&beta; hCG</strong></td>\n<td style=\"width: 93px;\">High</td>\n<td style=\"width: 100px;\">Low</td>\n<td style=\"width: 94px;\">Normal</td>\n</tr>\n<tr>\n<td style=\"width: 105px;\"><strong>Unconjugated estriol</strong></td>\n<td style=\"width: 93px;\">Low</td>\n<td style=\"width: 100px;\">Low</td>\n<td style=\"width: 94px;\">Normal</td>\n</tr>\n<tr>\n<td style=\"width: 105px;\"><strong>Inhibin A</strong></td>\n<td style=\"width: 93px;\">High</td>\n<td style=\"width: 100px;\">Low</td>\n<td style=\"width: 94px;\">Normal</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following image depicts _______",
    "choices": [
      {
        "id": 1,
        "text": "Footling"
      },
      {
        "id": 2,
        "text": "Complete breech"
      },
      {
        "id": 3,
        "text": "Flexed breech"
      },
      {
        "id": 4,
        "text": "Frank breech"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above image depicts <strong>frank breech.</strong></p>\n<p>Breech presentation can be divided into the following:</p>\n<ul>\n<li>Incomplete breech: Breech with extended legs, footling, knee presentation</li>\n<li>Complete: Breech with flexed legs</li>\n</ul>\n<table style=\"width: 945.094px;\">\n<tbody>\n<tr>\n<td style=\"width: 240px;\">Frank breech<br />(with extended legs)</td>\n<td style=\"width: 233px;\">Footling</td>\n<td style=\"width: 223px;\">Knee presentation</td>\n<td style=\"width: 225.094px;\">Complete/flexed</td>\n</tr>\n<tr>\n<td style=\"width: 240px;\"><strong>Thighs flexed</strong> on the&nbsp;trunk,&nbsp;<strong>legs extended</strong> at the&nbsp;knee joint.</td>\n<td style=\"width: 233px;\"><strong>Both</strong> thighs and legs are partially <strong>extended</strong></td>\n<td style=\"width: 223px;\">Thighs extended, Knee flexed</td>\n<td style=\"width: 225.094px;\"><strong>Both</strong> thighs and legs are <strong>flexed.</strong></td>\n</tr>\n<tr>\n<td style=\"width: 240px;\">Presenting part: Buttocks and genitalia</td>\n<td style=\"width: 233px;\">Foot</td>\n<td style=\"width: 223px;\">Knee</td>\n<td style=\"width: 225.094px;\">Buttocks, genitalia, foot</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6de047b750584dcba4debfe62ec13a8c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/46387b5e7474409e8d3263a576856a7cx1280x3531.JPEG"
    ]
  },
  {
    "text": "Which of the following peaks marked in the image below is responsible for ovulation?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The label marked 2 represents the <strong>LH surge</strong>&nbsp;,which is responsible for <strong>ovulation.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/23b82aece2b641228c0902d1d556aa63.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f47c76d509ec45949fa10c209e94afdfx1280x1742.JPEG"
    ]
  },
  {
    "text": "A baby assessed five minutes after birth is found to be blue with irregular gasping respiration. The heart rate is 50 beats/min, and a grimace is seen in response to stimulation with a catheter in the nostrils. On assessing the baby's muscle tone, you note that there is some flexion of the extremities. The APGAR score for this newborn is",
    "choices": [
      {
        "id": 1,
        "text": "0"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The APGAR score of this newborn is <strong>4</strong>.</p>\n<p>In this baby:</p>\n<ul>\n<li>Colour<strong> blue</strong> -&nbsp;score 0</li>\n<li>HR <strong>&lt; 60/min</strong> - score 1</li>\n<li><strong>Grimace</strong> - score 1</li>\n<li>Some <strong>flexion</strong> of extremities -&nbsp;score 1</li>\n<li><strong>Irregular respiration</strong> -&nbsp;score 1</li>\n</ul>\n<p>Thus total score in this patient is 4</p>\n<table>\n<tbody>\n<tr>\n<td>SIGN &nbsp;</td>\n<td>0</td>\n<td>1</td>\n<td>2</td>\n</tr>\n<tr>\n<td>Colour (A &ndash; appearance)</td>\n<td>Blue, pale</td>\n<td>Body pink, extremities blue</td>\n<td>Completely pink&nbsp;</td>\n</tr>\n<tr>\n<td>Heart rate (P &ndash; pulse)</td>\n<td>Absent</td>\n<td>Below 100</td>\n<td>Over 100</td>\n</tr>\n<tr>\n<td>Response to a catheter in nostril (G &ndash; grimace)(tested after oropharynx is clear)</td>\n<td>No response</td>\n<td>Grimace</td>\n<td>Cough or sneeze&nbsp;</td>\n</tr>\n<tr>\n<td>Muscle tone (A - activity)</td>\n<td>Limp</td>\n<td>Some flexion of extremities</td>\n<td>Active motion&nbsp;</td>\n</tr>\n<tr>\n<td>Respiratory effort (R) &nbsp;</td>\n<td>Absent&nbsp;</td>\n<td>Slow, irregular</td>\n<td>Good, crying</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A football player was brought to the hospital after he suffered an \u200binjury caused by a lateral blow to the knee joint. MRI revealed a medial collateral ligament injury. Which other structure is most commonly associated with this type of injury?",
    "choices": [
      {
        "id": 1,
        "text": "Lateral meniscus"
      },
      {
        "id": 2,
        "text": "Posterior cruciate ligament"
      },
      {
        "id": 3,
        "text": "Medial meniscus"
      },
      {
        "id": 4,
        "text": "Lateral collateral ligament"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>medial collateral ligament injury</strong> is commonly associated with&nbsp;<strong>medial meniscus injury&nbsp;</strong>as they are components of the&nbsp;<strong>unhappy triad of&nbsp;O'Donoghue's triad</strong>/ terrible triad/ horrible triangle.</p>\n<p class=\"p1\">The&nbsp;<strong>medial meniscus </strong>is <strong>less mobile than the lateral</strong>, and it cannot as easily accommodate to abnormal stresses. This is why meniscal lesions are more common on the medial side than on the lateral.</p>\n<p>The&nbsp;<strong>unhappy triad of O&rsquo;Donoghue&nbsp;</strong>consists of<strong>&nbsp;</strong>injury to</p>\n<ul>\n<li><strong>Anterior cruciate ligament</strong></li>\n<li><strong>Medial collateral ligament</strong></li>\n<li><strong>Medial meniscus</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/260d04fdf9804ecb9ae7b0c8747fc0c7x1279x1354.JPEG"
    ]
  },
  {
    "text": "The following are features of antisocial personality disorder except:",
    "choices": [
      {
        "id": 1,
        "text": "Failure to conform to social norms"
      },
      {
        "id": 2,
        "text": "Repeated lying"
      },
      {
        "id": 3,
        "text": "The individual is at least 15 years old"
      },
      {
        "id": 4,
        "text": "Lack of remorse"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The individual should be at least <strong>18 years old</strong> for <strong>diagnosing</strong> antisocial personality disorder.</p>\n<p><strong>DSM - 5 diagnostic criteria</strong> <strong>for antisocial personality disorder:</strong></p>\n<ul>\n<li>Three or more of the following, occurring <strong>since age 15 years :</strong>\n<ul>\n<li>Failure to conform to social norms.</li>\n<li>Deceitfulness, like repeated lying.</li>\n<li>lmpulsivity or failure to plan ahead.</li>\n<li>Irritability and aggressiveness.</li>\n<li>Reckless disregard for safety of self or others.</li>\n<li>Consistent irresponsibility.</li>\n<li>Lack of remorse.</li>\n</ul>\n</li>\n<li>The individual is <strong>at least age 18 years</strong>.</li>\n<li>There is evidence of conduct disorder with <strong>onset before age 15 years</strong>.</li>\n<li>The occurrence of antisocial behavior is not exclusively during schizophrenia or bipolar disorder.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is most suitable for intravenous regional anesthesia?",
    "choices": [
      {
        "id": 1,
        "text": "Bupivacaine"
      },
      {
        "id": 2,
        "text": "Mepivacaine"
      },
      {
        "id": 3,
        "text": "Procaine"
      },
      {
        "id": 4,
        "text": "Lidocaine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Lidocaine</strong>\u00a0is the most preferred drug for intravenous regional anesthesia.</p>\n<p><strong>Intravenous Regional Anesthesia </strong>or<strong> Bier\u2019s block:</strong></p>\n<ul>\n<li><strong>Intravenous</strong> administration of LA into a tourniquet-occluded limb.</li>\n<li>Anesthesia for <strong>short surgical procedures</strong> (&lt;45-60 minutes) on the limbs(such as the excision of soft tissue masses or carpal tunnel release)</li>\n<li>LA commonly used are <strong>Lidocaine\u00a0</strong>(most common), followed by <strong>Prilocaine</strong>, Mepivacaine, Chloroprocaine, Procaine, and Etidocaine.</li>\n<li>For upper limbs, 40 mL of 0.5% lidocaine without epinephrine is used.</li>\n<li>For lower limbs, 50 to 100 mL of 0.25% lidocaine\u00a0without epinephrine is used.</li>\n</ul>\n<p><strong>Complications</strong>\u00a0following Bier's block are\u00a0<strong>postoperative pain</strong>,\u00a0<strong>difficulty in providing bloodless field</strong>, and in rare cases may lead to<strong>\u00a0compartment syndrome</strong>\u00a0due to increased pressure applied. Premature deflation of the tourniquet or increased dose of local anesthesia may lead to systemic toxicity.</p>\n<p><strong>Bupivacaine</strong>\u00a0(Option A) is no longer used for Biers block. This is because Bupivacaine is the <strong>most cardiotoxic</strong> local anesthetic (LA). Accidental early deflation of the tourniquet can lead to massive systemic doses of bupivacaine resulting in cardiac arrhythmias and cardiovascular collapse.</p>\n<p>The image below shows Bier's block/ IVRA.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e83def7674094302913907a2863d39f4x753x515.PNG"
    ]
  },
  {
    "text": "A patient presents with joint pain which increases in the early morning when he wakes up and decreases with activity. Examination reveals the following picture (given below) along with inflammation of the wrist. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Psoriathic arthritis"
      },
      {
        "id": 2,
        "text": "Reactive arthritis"
      },
      {
        "id": 3,
        "text": "Pseudo gout"
      },
      {
        "id": 4,
        "text": "Osteoarthritis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The condition depicted in the above image with <strong>nail pitting </strong>and<strong> yellowing of the nails</strong>\u00a0and inflammation of the <strong>DIP joints,\u00a0</strong>point to a diagnosis of<strong> psoriatic arthritis.\u00a0</strong></p>\n<p>Psoriasis is a papulosquamous disease with joint and nail manifestations apart from the skin. It has <strong>silvery scales</strong>.</p>\n<p>The joint manifestations in psoriasis are referred to as psoriatic arthritis. It is a<strong> seronegative spondyloarthropathy</strong> and hence it is associated with <strong>HLA-B27</strong>. It is seen in 5-30% of patients with cutaneous manifestations. Nail involvement increases the risk of concomitant joint involvement.</p>\n<p><strong>Other features:</strong></p>\n<ul>\n<li><strong>Psoriatic nail changes</strong>\u00a0like yellowing and hypertrophy\u00a0</li>\n<li>Inflammation of the toes-\u00a0<strong>dactylitis</strong></li>\n<li>Shortening of toes-\u00a0<strong>telescoping\u00a0</strong>(because of osteolysis)</li>\n<li>Severe deformity- suggestive of\u00a0<strong>arthritis mutilans</strong></li>\n<li>Associated heel pain- suggestive of\u00a0<strong>enthesitis\u00a0</strong>(pain at the sites of ligament/tendon attachment)</li>\n</ul>\n<p>The x-ray shows <strong>'pencil in cup' deformity</strong> due to tapering of phalanges with cupping of proximal parts. Also all the bones of a single digit maybe involved refered to as <strong>ray deformity.</strong></p>\n<p>The drug of choice for different types of psoriasis is shown in the pearl below.</p>\n<p>The most likely diagnosis for this patient's joint pain, which <strong>worsens</strong> in the <strong>early morning</strong> and improves with activity, along with the given picture showing<strong> nail changes</strong> and inflammation of the <strong>distal interphalangeal (DIP)</strong> joints, is <strong>Psoriatic Arthritis</strong>.</p>\n<p>Psoriatic arthritis is a type of inflammatory arthritis associated with <strong>psoriasis</strong>. It is categorized under the <strong>seronegative spondyloarthropathies </strong>and is often linked to the presence of<strong> HLA-B27. </strong>It is seen in 5-30% of patients with cutaneous manifestations. Nail involvement increases the risk of concomitant joint involvement.\u00a0</p>\n<p>Some key features associated with psoriatic arthritis:</p>\n<ul>\n<li><strong>Psoriatic nail changes</strong>\u00a0like yellowing and hypertrophy\u00a0</li>\n<li>Inflammation of the toes - <strong>dactylitis </strong>(sausage appearance).</li>\n<li>Shortening of toes - <strong>telescoping\u00a0</strong>(because of osteolysis)</li>\n<li>Severe deformity - suggestive of <strong>arthritis mutilans</strong></li>\n<li>Associated heel pain - suggestive of <strong>enthesitis\u00a0</strong>(pain at the sites of ligament/tendon attachment)</li>\n<li>Radiographic findings, including the<strong> \"pencil-in-cup\" deformity, </strong>which results from the tapering of phalanges and cupping of proximal parts.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f3f7fe807e78430dbf0ebd4365783a10.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A newborn is seen to have an abnormal lump in the lower back. Identify the condition from the MRI given below.",
    "choices": [
      {
        "id": 1,
        "text": "Meningocele"
      },
      {
        "id": 2,
        "text": "Myelomeningocele"
      },
      {
        "id": 3,
        "text": "Spina bifida occulta"
      },
      {
        "id": 4,
        "text": "Lissencephaly"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The MRI demonstrates <strong>meningocele</strong>.</p>\n<p><strong>Meningocele&nbsp;</strong>is formed when meninges herniate through a defect in the posterior vertebral arches. Patients present with a fluctuant midline mass that is covered with <strong>skin. Transillumination </strong>through the swelling may be present.</p>\n<p>Other options:</p>\n<p>Option B: <strong>Myelomeningocele</strong> is a severe form of incomplete fusion of the vertebral column. Meninges and spinal cord herniate through the gap. Patients commonly present with a lumbosacral defect covered by a thin layer of epithelialized tissue. It is associated with flaccid paralysis of lower limbs.</p>\n<p>Option C: <strong>Spina bifida occulta</strong> is a midline defect of the vertebral bodies without protrusion of the spinal cord or meninges.</p>\n<p>Option D: <strong>Lissencephaly</strong> is a disorder characterized by a lack of cerebral convolutions.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4355c29f4b48434dbe20cbbb714e50b9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6d37b693df96409db258f055abd6a9aax500x254.JPEG"
    ]
  },
  {
    "text": "The device shown in the image given below is used in.",
    "choices": [
      {
        "id": 1,
        "text": "Tele therapy"
      },
      {
        "id": 2,
        "text": "Brachytherapy"
      },
      {
        "id": 3,
        "text": "Radioactive iodine therapy"
      },
      {
        "id": 4,
        "text": "Targeted therapy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The device shown in the image is a<strong> remote afterloader</strong>. Remote afterloading is related to <strong>brachytherapy</strong>.</p>\n<p><strong>Brachytherapy</strong> is a method of treatment in which sealed radioactive sources are used to deliver <strong>radiation</strong> at a <strong>short distance</strong> by interstitial, intracavitary, or surface application.</p>\n<p>The following isotopes are used in brachytherapy:</p>\n<ul>\n<li><strong>I-125</strong> and<strong>&nbsp;</strong><strong>Iridium-192 -&nbsp;</strong>used in low dose rate (LDR) brachytherapy.&nbsp;</li>\n<li><strong>Cobalt-60</strong> - is used for high dose rate (HDR) brachytherapy.</li>\n</ul>\n<p>Afterloading is the process of placing the radioactive material into the target region. This is either done manually by the oncologist, or by using remote afterloading devices.</p>\n<p><strong>Remote afterloading</strong> devices enable us to<strong> eliminate direct contact</strong> with <strong>radioactive</strong> sources while administration. It provides protection from radiation exposure to healthcare professionals by securing the radiation source in a <strong>shielded safe manner</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6b3562d31f734145bf466fdba0bbc03c.JPEG"
    ],
    "explanation_images": []
  }
];
        let quizName = 'Mini Test- 25';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>