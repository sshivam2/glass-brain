<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>283 Obstetrics And Gynecology Ini-Cet 2023 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Obstetrics & Gynecology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">28</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A lady on oral contraceptive pills presented with white discharge per vaginum. It is not associated with itching or foul smell and stains her underwear yellow in color. Examination of the discharge revealed normal lactobacilli and acidic pH. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Vaginal candidiasis"
      },
      {
        "id": 2,
        "text": "Increased normal vaginal discharge"
      },
      {
        "id": 3,
        "text": "Bacterial vaginosis"
      },
      {
        "id": 4,
        "text": "Chlamydial infection"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In the given clinical scenario history of vaginal discharge with no itching and foul smell along with normal lactobacilli count with acidic pH is suggestive of <strong>normal vaginal discharge.</strong></p>\n<div class=\"page\" title=\"Page 567\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Leucorrhea</strong> is defined as an<strong> excessive normal vaginal discharge</strong>.</p>\n<p>The term leucorrhea should fulfil the following <strong>criteria</strong>:</p>\n<div class=\"page\" title=\"Page 567\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 567\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>The excess secretion is evident from persistent vulval moistness or staining of the undergarments (brownish yellow on drying) or need to wear a vulval pad.</li>\n<li>It is nonpurulent and nonoffensive.</li>\n<li>It is nonirritant and never causes pruritus.</li>\n</ul>\n<p>The physiologic basis involved in normal vaginal secretion is dependent on the<strong> endogenous estrogen level</strong>. With the <strong>rising</strong> estrogen level, there is <strong>abundant secretory activity </strong>of the <strong>endocervical glands</strong> and the superficial vaginal epithelium becomes rich in glycogen\u00a0</p>\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 567\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 568\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The normal secretion is expected to increase in conditions when the estrogen levels become high. <strong>Such conditions are </strong>:</p>\n<div class=\"page\" title=\"Page 568\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 568\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li><strong>During puberty</strong>\u2014Increased levels of endogenous estrogen lead to marked overgrowth of the endo- cervical epithelium which may encroach onto the ectocervix producing congenital ectopy (erosion) \u2192 increased secretion.</li>\n<li><strong>During menstrual cycle</strong>\n<ul>\n<li>Around ovulation-Peak rise of estrogen \u2192 increase in secretory activity of the cervical glands.</li>\n<li>Premenstrual pelvic congestion and increased mucus secretion from the hypertrophied endometrial glands.\u00a0</li>\n</ul>\n</li>\n<li class=\"page\" title=\"Page 568\"><strong>Pregnancy-</strong>There is hyperestrinism with increased vascularity. This leads to increased vaginal transudate and cervical gland secretion.</li>\n<li class=\"page\" title=\"Page 568\">During <strong>sexual excitement</strong>, when there is an abundant secretion from the Bartholin\u2019s glands.</li>\n</ul>\n<p>Other options:</p>\n<div class=\"page\" title=\"Page 568\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 568\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 568\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Vaginal candidiasis: This condition generally presents with itching and a white, \"cottage cheese\"-like discharge. The absence of itching and the nature of the discharge described in the scenario rule out this option.</p>\n<p>Bacterial vaginosis: This condition is characterized by a thin, gray, foul-smelling discharge. The fact that the discharge in this case does not have a foul smell rules out this option.</p>\n<p>Chlamydial infection: Chlamydia infections can cause a range of symptoms, including abnormal vaginal discharge. However, many individuals with Chlamydia are asymptomatic, and the discharge associated with this condition does not typically stain underwear yellow.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common cause of puberty menorrhagia?",
    "choices": [
      {
        "id": 1,
        "text": "Anovulation"
      },
      {
        "id": 2,
        "text": "Endometriosis"
      },
      {
        "id": 3,
        "text": "Malignancy"
      },
      {
        "id": 4,
        "text": "Bleeding disorder"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most common cause of puberty menorrhagia is <strong>anovulatory cycles</strong>. <br />Anovulatory cycles &rarr; unopposed estrogen &rarr; endometrial hyperplasia &rarr; prolonged and heavy periods.</p>\n<p><strong>Other causes</strong></p>\n<div class=\"page\" title=\"Page 70\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 70\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Endocrine dysfunction:</p>\n<ul>\n<li>Polycystic ovary syndrome (PCOS &nbsp;</li>\n<li>Hypothyroidism or hyperthyroidism.</li>\n</ul>\n<p>Hematological:</p>\n<ul>\n<li>Idiopathic thrombocytopenic purpura</li>\n<li>Von-Willebrand&rsquo;s disease &nbsp;leukaemia.</li>\n</ul>\n<p>Pelvic tumors:</p>\n<ul>\n<li>Fibroid uterus &nbsp;</li>\n<li>Sarcoma botryroides &nbsp;</li>\n<li>Estrogen producing ovarian tumor</li>\n</ul>\n<p>Pregnancy complications (abortion)</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<p><strong>Treatment</strong>:</p>\n<div class=\"page\" title=\"Page 70\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Reassurance</strong> and psychological support. Rest and <strong>correction of anemia</strong> is done.In refractory cases, progestogens, such as <strong>medroxyprogesterone acetate</strong> or<strong> norethisterone </strong>5 mg thrice daily is given till bleed- ing stops. Usually, the bleeding is controlled within 3&ndash;7 days. Medication is continued for 21 days. The condition usually becomes normal following 2&ndash;3 courses and then normal cycles resume. In<strong> emergency,</strong>&nbsp;<strong>conjugated equine estrogen</strong> 20&ndash;40 mg IV is given every 6&ndash;8 hours. Once the bleeding is controlled, combined oral pills are started.</p>\n<div class=\"page\" title=\"Page 71\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Regular menstrual cycle</strong> will be established once the <strong>hypothalamo-pituitary-ovarian axis is matured.</strong></p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "SRY region is located in:",
    "choices": [
      {
        "id": 1,
        "text": "Short arm of Y chromosome"
      },
      {
        "id": 2,
        "text": "Short arm of X chromosome"
      },
      {
        "id": 3,
        "text": "Long arm of Y chromosome"
      },
      {
        "id": 4,
        "text": "Long arm of X chromosome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>SRY</strong> region is present on the<strong> short arm of the Y chromosome(Yp11).&nbsp;</strong></p>\n<p>SRY stands for the <strong>sex-determining region on Y</strong>. It contains the <strong>SRY gene</strong>, which&nbsp;produces the <strong>protein</strong> called the&nbsp;<strong>t</strong><strong>estis determining factor.&nbsp;</strong>This causes the gonads&nbsp;to develop into the testes<strong>. </strong>If the SRY gene or Y chromosome is&nbsp;absent, the gonads develop as ovaries.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 32 year old female presents with grey-white vaginal discharge and on gram stain of the discharge, clue cells are seen. Clue cells are",
    "choices": [
      {
        "id": 1,
        "text": "Degranulated neutrophils (pus)"
      },
      {
        "id": 2,
        "text": "Epithelial cells covered by bacteria"
      },
      {
        "id": 3,
        "text": "Gardenella vaginalis with Bacillin rods"
      },
      {
        "id": 4,
        "text": "Doderlein bacili in the macrophage"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Clue cells</strong>&nbsp;are&nbsp;epithelial cells with&nbsp;<span style=\"font-size: 14px;\">a fuzzy&nbsp;</span><span style=\"font-size: 14px;\">border </span>or<span class=\"Apple-converted-space\">&nbsp;</span>granular cytoplasm caused by small gram-negative bacilli adhering on their surface is characteristic of&nbsp;<strong>bacterial vaginosis</strong>.</p>\n<p>Bacterial vaginosis<strong>&nbsp;</strong>is a&nbsp;<strong>polymicrobial infection</strong> caused by&nbsp;<em><strong>Mobiluncus curtisii, Gardnerella vaginalis, Mycoplasma hominis,</strong> </em>and<strong><em> Haemophilus vaginalis</em></strong>. It has a malodorous (fishy smell) vaginal discharge with minimal vulval irritation<span style=\"font-size: 14px;\">.</span></p>\n<p>Amsel's Criteria is helpful in diagnosing bacterial vaginosis when 3 of the following 4 are present</p>\n<ul>\n<li>Thin, white homogenous vaginal discharge</li>\n<li>A pH of vaginal fluid <strong>&gt;4.5</strong></li>\n<li><strong>Fishy odor</strong> of discharge accentuated by adding 10% KOH-<strong>Whiff test</strong></li>\n<li>Presence of <strong>Clue cells</strong> on microscopy.&nbsp;</li>\n</ul>\n<p>Treatment is <strong>oral metronidazole</strong> 500 mg BD for 7 days. Alternatively, Ampicillin 500 mg or cephalosporin 500 mg bid for 7 days is also effective.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c864d1570e7343ae961f830a9baed2b7x800x533.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c611b4ab75c54756a5964f64b5f76d47x510x453.GIF"
    ]
  },
  {
    "text": "Which of the following is a true association with HRT?",
    "choices": [
      {
        "id": 1,
        "text": "Decreases risk of Colon cancer"
      },
      {
        "id": 2,
        "text": "Decreased risk of breast cancer"
      },
      {
        "id": 3,
        "text": "Decreased risk of endometrial cancer"
      },
      {
        "id": 4,
        "text": "Increases risk of osteoporosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>HRT decreases</strong> the <strong>risk of</strong> <strong>colon cancer</strong>.</p>\n<p>Indications of HRT:</p>\n<ul>\n<li>Therapeutic\n<ul>\n<li>Symptomatic women who suffer from estrogen deficiency</li>\n<li>Gonadal dysgenesis in adolescents</li>\n</ul>\n</li>\n<li>Prophylactic\n<ul>\n<li>High-risk cases for menopausal complications such as cardiovascular disease,<strong> osteoporosis</strong>(Option D), stroke, Alzheimer&rsquo;s disease, and <strong>colonic cancer</strong></li>\n<li>Premature menopause, spontaneous or following surgery&nbsp;</li>\n<li>Menopause caused by radiotherapy and chemotherapy for cancer, especially alkylating agents<span class=\"Apple-converted-space\">&nbsp;</span></li>\n<li>Women demanding HRT as prophylaxis</li>\n</ul>\n</li>\n</ul>\n<p>Contraindications of HRT:</p>\n<div class=\"page\" title=\"Page 2\">\n<ul>\n<li>Undiagnosed <strong>abnormal genital bleeding</strong></li>\n<li>Known, suspected, or history of <strong>breast cancer</strong></li>\n<li>Known or suspected <strong>estrogen-dependent neoplasia</strong></li>\n<li>Active or prior <strong>venous thromboembolism</strong></li>\n<li>Active or recent (e.g., within the past year) <strong>arterial thromboembolic disease</strong></li>\n<li><strong>Liver</strong> <strong>dysfunction</strong> or gallbladder disease</li>\n<li>Known <strong>hypersensitivity</strong> to the ingredients of the estrogen preparation</li>\n<li>Known or suspected <strong>pregnancy</strong></li>\n<li><strong>Uterine</strong> <strong>fibroids</strong> as the fibroids may enlarge in size.</li>\n</ul>\n</div>\n<p>Uses of HRT:</p>\n<ul>\n<li>Short term-hot flushes, vasomotor symptoms</li>\n<li>Dyspareunia, libido</li>\n<li>Urethral syndrome</li>\n<li>Long term-osteoporosis</li>\n<li>Cardiovascular disease</li>\n<li>Alzheimer&rsquo;s disease</li>\n</ul>\n<p><span class=\"Apple-converted-space\">Risks of HRT:</span></p>\n<ul>\n<li><strong>Endometrial cancer</strong>(Option C)</li>\n<li><strong>Breast cancer</strong>(Option B)</li>\n<li>Ovarian cancer</li>\n<li>Thromboembolism</li>\n<li>Lipid profile dysfunction</li>\n<li>Gall stones, liver dysfunction</li>\n</ul>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All the following can result in non-immune hydrops except",
    "choices": [
      {
        "id": 1,
        "text": "ABO incompatibility"
      },
      {
        "id": 2,
        "text": "Parvovirus B19"
      },
      {
        "id": 3,
        "text": "Chromosomal defect"
      },
      {
        "id": 4,
        "text": "Alpha thalassemia major"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<div class=\"page\" title=\"Page 375\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>ABO incompatibility</strong> is <strong>not</strong> a cause of <strong>nonimmune hydrops.</strong></p>\n<p>Hydrops is diagnosed by identifying two or more fetal effusions\u2014pleural, pericardial, or ascites\u2014or one effusion plus anasarca.\u00a0<strong>Hydrops</strong> can be seen in association with <strong>red cell auto immunization</strong>, which is termed <strong>immune hydrops</strong>. Otherwise, it is nonimmune. Pathogenesis of hydrops includes decreased colloid oncotic pressure, increased hydrostatic or central venous pressure, and enhanced vascular permeability.</p>\n<p><strong>Etiology of hydrops fetalis</strong></p>\n<div class=\"page\" title=\"Page 375\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Cardiovascular</strong></p>\n<ul style=\"list-style-type: circle;\">\n<li>Structural defects: Ebstein anomaly, tetralogy of Fallot with absent pulmonary valve, hypoplastic left or right heart, premature closure of ductus arteriosus, arteriovenous malformation (vein of Galen aneurysm)</li>\n<li>Cardiomyopathies</li>\n<li>Tachyarrhythmias</li>\n<li>Bradycardia, as may occur in heterotaxy syndrome with endocardial cushion defect or with anti-Ro/La antibodies</li>\n</ul>\n<p><strong>Chromosomal</strong></p>\n<ul style=\"list-style-type: circle;\">\n<li>Turner syndrome (45,X), triploidy, trisomies 21, 18, and 13</li>\n</ul>\n<p><strong>Hematological</strong></p>\n<ul style=\"list-style-type: circle;\">\n<li>Hemoglobinopathies, such as<strong> \u03b14 thalassemia</strong></li>\n<li>Erythrocyte enzyme and membrane disorders</li>\n<li>Erythrocyte aplasia/dyserythropoiesis</li>\n<li>Decreased erythrocyte production (myeloproliferative disorders)</li>\n<li>Fetomaternal hemorrhage</li>\n</ul>\n<p><strong>Lymphatic Abnormalities</strong></p>\n<ul style=\"list-style-type: circle;\">\n<li>Cystic hygroma, systemic lymphangiectasis, pulmonary lymphangiectasis</li>\n</ul>\n<p><strong>Infections</strong></p>\n<ul style=\"list-style-type: circle;\">\n<li><strong>Parvovirus B19,</strong> syphilis, cytomegalovirus, toxoplasmosis, rubella, enterovirus, varicella, herpes simplex, coxsackievirus, listeriosis, leptospirosis, Chagas disease, Lyme disease</li>\n</ul>\n<p><strong>Syndromic</strong></p>\n<ul style=\"list-style-type: circle;\">\n<li>Arthrogryposis multiplex congenita, lethal multiple pterygium, congenital lymphedema, myotonic dystrophy type I, Neu-Laxova, Noonan, and Pena-Shokeir syndromes</li>\n</ul>\n<p><strong>Thoracic Abnormalities</strong></p>\n<ul style=\"list-style-type: circle;\">\n<li>Cystic adenomatoid malformation</li>\n<li>Pulmonary sequestration</li>\n<li>Diaphragmatic hernia</li>\n<li>Hydro/chylothorax</li>\n<li>Congenital high airway obstruction sequence (CHAOS)</li>\n<li>Mediastinal tumors</li>\n<li>Skeletal dysplasia with very small thorax</li>\n</ul>\n<p><strong>Gastrointestinal \u00a0</strong></p>\n<ul style=\"list-style-type: circle;\">\n<li>Meconium peritonitis, gastrointestinal tract obstruction</li>\n</ul>\n<p><strong>Kidney and Urinary Tract</strong></p>\n<ul style=\"list-style-type: circle;\">\n<li>Kidney malformations</li>\n<li>Bladder outlet obstructions</li>\n<li>Congenital (Finnish) nephrosis, Bartter syndrome, mesoblastic nephroma</li>\n</ul>\n<p><strong>Placental, Twin, and Cord Abnormalities</strong></p>\n<ul style=\"list-style-type: circle;\">\n<li>Placental chorioangioma, twin-twin transfusion syndrome, twin reversed arterial perfusion sequence, twin anemia polycythemia sequence, cord vessel thrombosis</li>\n</ul>\n<p><strong>Other Rare Disorders</strong></p>\n<ul style=\"list-style-type: circle;\">\n<li>Inborn errors of metabolism: Gaucher disease, galactosialidosis, GM1 gangliosidosis, sialidosis, mucopolysaccharidoses, mucolipidoses</li>\n<li>Tumors: sacrococcygeal teratoma, hemangioendothelioma with Kasabach-Merritt syndrome</li>\n</ul>\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Idiopathic</strong></p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a 46XY female complete gonadal dysgenesis was noted. Complete gonadal dysgenesis is caused by what in the SRY gene?",
    "choices": [
      {
        "id": 1,
        "text": "Point mutation"
      },
      {
        "id": 2,
        "text": "Deletion of gene"
      },
      {
        "id": 3,
        "text": "Translocation"
      },
      {
        "id": 4,
        "text": "Inversion"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Amongst the given options,&nbsp;a<strong> point mutation</strong> in the <strong>SRY gene</strong>&nbsp;is most likely to result in <strong>complete gonadal dysgenesis</strong>&nbsp;but this answer remains controversial as some other sources mention SRY deletion is more commonly associated. The most common cause attributable to about 85% of cases is still idiopathic.&nbsp;</p>\n<div class=\"page\" title=\"Page 402\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>&nbsp;<strong>Pure gonadal dysgenesis</strong> results from a<strong> point mutation in SRY/ SRY deletion</strong> or point mutations in another gene with testis-determining effects (<strong>DAXJ, SF-1, CBX2</strong>). This leads to <strong>underdeveloped dysgenetic gonads</strong> that <strong>fail to produce androgens or AMH</strong>. This is characterized by a <strong>normal prepubertal female phenotype and a normal mullerian system </strong>due to absent AMH.</p>\n<div class=\"page\" title=\"Page 440\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The child usually presents with <strong>failure in the development of secondary sexual characteristics </strong>at puberty and <strong>amenorrhea</strong>. Investigations reveal the absence of estrogen production and they have <strong>elevated levels of FSH (&gt;40 miU/mL)</strong> and <strong>low oestradiol levels (&lt;25 pg/mL).</strong></p>\n<div class=\"page\" title=\"Page 155\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 155\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Women with streak ovaries are infertile, but they can bear children with <strong>oocyte donation</strong>. They must be treated with <strong>cyclic estrogen and progestogen </strong>to <strong>promote feminization and secondary sexual characteristics</strong> and <strong>prevent osteoporosis.</strong></p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements about primary dysmennorhea is true?",
    "choices": [
      {
        "id": 1,
        "text": "Pain begins after few hours after onset of periods and can last up to 48 hours"
      },
      {
        "id": 2,
        "text": "It is dependent on psychological factors"
      },
      {
        "id": 3,
        "text": "Pain begins 3 days prior to the onset of periods and is present upto the second day of the period"
      },
      {
        "id": 4,
        "text": "GnRH antagonists are the first line of treatment"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Primary dysm</strong><strong>enorrhea</strong> is <strong>dependent on psychological factors</strong> is the true statement.</p>\n<p><strong>Dysmenorrhea</strong> is defined as <strong>cramping pain</strong> that occurs<strong> during menstruation</strong>.&nbsp; Low social support, alexithymia, neuroticism trait, long menstrual bleeding, family history of dysmenorrhea, and high-caffeine diet are important<strong> risk factors</strong> for women with primary dysmenorrhea.&nbsp;It can be classified as:</p>\n<p>A. Etiological:</p>\n<ul>\n<li><strong> Primary dysmenorrhea</strong> is a type of dysmenorrhoea that is not associated with any pelvic pathology. It affects women in the age group of 18 to 25 years, with ovulatory cycles. It begins <strong>just before or with the onset of menstruation.</strong> (Not a few hours after as in Option A or not 3 days prior as in option C)</li>\n<li><strong>Secondary (Acquired) dysmenorrhea</strong>&nbsp;is associated with the presence of pelvic pathologies such as fibroids, adenomyosis, pelvic inflammatory disease (PID), and endometriosis.&nbsp;</li>\n</ul>\n<p>B.&nbsp; Clinical:</p>\n<ul>\n<li><strong>Spasmodic dysmenorrhea</strong>&nbsp;is the <strong>most common</strong>&nbsp;and is characterized by cramping pain on the first and second days of menstruation.&nbsp;</li>\n<li><strong>Congestive dysmenorrhea&nbsp;</strong>presents as worsening pelvic discomfort and pelvic pain, a&nbsp;<strong>few days before the onset of menses </strong>followed by relief of the symptoms. This is seen in PID, IUCD users, varicosities of pelvic veins, pelvic endometriosis, and fibroids.&nbsp;</li>\n<li><strong>Membranous dysmenorrhea </strong>is rare and is characterized by crampy pain that occurs with the passage of the endometrium as a cast at&nbsp;the time of menstruation.</li>\n</ul>\n<p>Primary dysmenorrhea can be managed with <strong>non-steroidal anti-inflammatory drugs (NSAIDs), combined oral contraceptive pills,(Option D),</strong> and progestin-only pills. GnRH agonists and androgens are also useful.&nbsp;Surgical management includes hysterectomy and is indicated if not responding to medical management. In secondary dysmenorrhea, treating the cause is needed.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following statements will you suspect primary amenorrhea",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3"
      },
      {
        "id": 2,
        "text": "1, 2, 3, 4"
      },
      {
        "id": 3,
        "text": "1, 2, 4"
      },
      {
        "id": 4,
        "text": "2, 3, 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Primary amenorrhea is suspected in patients who have <strong>not menstruated by age 15</strong> or<strong> within 3 years of thelarche</strong> or has not menstruated by age 14 and shows signs of hirsutism, excessive exercise, or eating disorder<strong>. The conventional</strong>&nbsp;definition of primary amenorrhea is a failure of the onset of menstruation beyond 16 years of age or <strong>failure to attain seconday sexual characteristics by 13 years of age.</strong></p>\n<div class=\"page\" title=\"Page 398\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Secondary amenorrhea is <strong>absence of menstruation for 3 months</strong> in a female who was previously menstruating normally.</p>\n<p><strong>Causes of primary amenorrhea:</strong></p>\n<ul>\n<li><strong>Hypogonadotropic hypogonadism</strong>\n<ul>\n<li>Hypothalamic and pituitary dysfunction&nbsp;</li>\n<li>Kallmann's syndrome</li>\n<li>CNS tumors - craniopharyngioma</li>\n<li>Delayed puberty</li>\n</ul>\n</li>\n<li><strong>Hypergonadotropic hypogonadism</strong>\n<ul>\n<li>Primary ovarian failure</li>\n<li>Resistant ovarian failure</li>\n<li>17-alpha-hydroxylase deficiency</li>\n</ul>\n</li>\n<li><strong>Chromosomal abnormalities</strong>\n<ul>\n<li>Turner's syndrome (45 X)</li>\n<li>Pure gonadal dysgenesis (46 XX or 46 XY)</li>\n<li>Androgen insensitivity syndrome (testicular&nbsp;feminization syndrome) (46 XY)</li>\n</ul>\n</li>\n<li><strong>Developmental defect of the genital tract</strong>\n<ul>\n<li>Imperforate hymen</li>\n<li>Transverse vaginal septum</li>\n<li>Vaginal atresia/cervical atresia</li>\n<li>Absent uterus in Mullerian agenesis (Mayer-Rokitansky-K&uuml;ster-Hauser syndrome)</li>\n</ul>\n</li>\n<li><strong>Others:</strong>\n<ul>\n<li>Uterine synechiae (congenital)</li>\n<li>Adrenogenital syndrome</li>\n<li>Cretinism</li>\n<li>Juvenile diabetes</li>\n<li>Malnutrition</li>\n<li>Anemia</li>\n<li>Weight loss</li>\n<li>Tuberculosis</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 38-year-old multi gravida presents with 2 years of infertility and dyspareunia and dysmenorrhea. She has a retroverted uterus and tenderness in the pouch of Douglas. What would be the next step of management?",
    "choices": [
      {
        "id": 1,
        "text": "Diagnostic laparoscopy"
      },
      {
        "id": 2,
        "text": "Laparotomy"
      },
      {
        "id": 3,
        "text": "HSG"
      },
      {
        "id": 4,
        "text": "TVS"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This patient presenting with symptoms of <strong>dyspareunia </strong>and<strong> dysmenorrhea with a&nbsp;</strong>retroverted uterus and tenderness in the pouch of Douglas is most likely suffering from <strong>endometriosis</strong>. The next best step in management is to <strong>perform TVS</strong>. Laparoscopy is the <strong>gold standard </strong>for the diagnosis of endometriosis but it is not done routinely for diagnostic purposes.</p>\n<p><strong>Endometriosis&nbsp;</strong>is a condition that is characterized by the presence of endometrial tissue in ectopic sites such as:</p>\n<ul>\n<li>Ovary (chocolate cysts- left/right lower quadrant pain)</li>\n<li>Pouch of Douglas (pain during defecation)</li>\n<li>Uterosacral ligaments (chronic pelvic pain &amp; infertility)</li>\n<li>Appendix (right lower quadrant pain)</li>\n<li>Lower segment cesarean section (LSCS) scar endometriosis</li>\n<li>Umbilicus</li>\n<li>Lung (cyclical hemoptysis)</li>\n</ul>\n<p>These extra-uterine sites of endometrial tissue are influenced by cyclical changes in the hormone levels which give rise to location-specific symptoms as mentioned above.</p>\n<p>Management:</p>\n<p>Investigations include:</p>\n<ul>\n<li>USG: <strong>TVS</strong> will show a chocolate cyst.</li>\n<li>MRI</li>\n<li>CA-125 more than 35 U/mL</li>\n<li><strong>Laparoscopy</strong>: <strong>Gold standard</strong> for the diagnosis and treatment of endometriosis. It is used to locate the sites, take a biopsy and surgically remove the deposits.</li>\n</ul>\n<p>Drugs used for symptom control include the following:</p>\n<ul>\n<li>Oral contraceptive pills</li>\n<li>Mirena IUD</li>\n<li>GnRH analogs</li>\n<li>Letrozole</li>\n</ul>\n<p>Surgical management includes:</p>\n<p><strong>Minimally invasive surgery</strong> may be used to destroy the tissue by cautery, laser vaporization, and lyse adhesions that have formed as a complication of endometriosis.</p>\n<p><strong>Major surgical measures</strong> include incision of chocolate cyst and removal of lining, salpingo-oophorectomy, hysterectomy, and unilateral or bilateral salpingo-oophorectomy.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 23-year-old female with 6 years of infertility, has a BMI of 33 and facial hair. Investigations reveal she has (PCOS) and spills from bilateral tubes. She and her husband are trying to conceive, what would be the best plan of management for this lady?",
    "choices": [
      {
        "id": 1,
        "text": "Weight loss + Metformin + induction of ovulation with urinary gonadotrophins"
      },
      {
        "id": 2,
        "text": "Weight loss + folic acid, Try for spontaneous induction, if failed move to induction of ovulation"
      },
      {
        "id": 3,
        "text": "Metformin + finasteride +  Induction of ovulation"
      },
      {
        "id": 4,
        "text": "Weight loss + Metformin + Induction of ovulation with clomiphene"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Note:</p>\n<p>PCOS in association with\u00a0diabetes, hypertension, hyperlipidemia and cardiovascular disease presenting in reproductive age group is known as \"<strong>X syndrome</strong>\".</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/452854eb73d749aea3e9504878fdbb01x533x400.JPEG"
    ]
  },
  {
    "text": "Which of the following drug is not given in endometrosis?",
    "choices": [
      {
        "id": 1,
        "text": "Medroxyprogesterone acetate"
      },
      {
        "id": 2,
        "text": "Cabergoline"
      },
      {
        "id": 3,
        "text": "Estradiol"
      },
      {
        "id": 4,
        "text": "Letrazole"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><span data-preserver-spaces=\"true\">Endometriosis is the presence of <strong>endometrial tissue</strong> (glands and stroma)<strong> outside the uterus.</strong></span></p>\n<p><strong><span data-preserver-spaces=\"true\">Risk factors</span></strong><span data-preserver-spaces=\"true\">&nbsp;for the development of endometriosis</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Family history</span></li>\n<li><span data-preserver-spaces=\"true\">Nulliparity</span></li>\n<li><span data-preserver-spaces=\"true\">Prolonged exposure to endogenous estrogen (e</span><span data-preserver-spaces=\"true\">arly menarche, l</span><span data-preserver-spaces=\"true\">ate menopause</span><span data-preserver-spaces=\"true\">)</span></li>\n<li><strong>Estrogen therapy</strong></li>\n<li><span data-preserver-spaces=\"true\">In utero exposure to diethylstilbesterol (DES)</span></li>\n</ul>\n<p><span data-preserver-spaces=\"true\">Key clinical features</span></p>\n<ul>\n<li><strong>Dysmenorrhea</strong></li>\n<li><span data-preserver-spaces=\"true\">Lower abdominal pain</span></li>\n<li><strong>Infertility</strong></li>\n<li><span data-preserver-spaces=\"true\">Pain during urination or defecation</span></li>\n<li><span data-preserver-spaces=\"true\">Constipation or diarrhea</span></li>\n<li><strong>Irregular bleeding</strong></li>\n</ul>\n<p><span data-preserver-spaces=\"true\">The gold standard for the diagnosis of endometriosis has been a visual inspection by <strong>laparoscopy,</strong> preferably with histological confirmation. Laparoscopy helps </span>detect and diagnose pelvic endometriosis, locate the site of endometriosis and staging, take a biopsy, and perform surgical ablation as a part of treatment.</p>\n<p>Other investigations:</p>\n<ul>\n<li><strong>CA-125</strong> levels: raised in endometriosis.</li>\n<li>Monocyte chemotactic protein (MCP-1) levels: raised in the peritoneal fluid</li>\n<li>MRI</li>\n<li>Color Doppler</li>\n<li>Anti-endometrial antibodies</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9b8855c72c1f4b3496542f08bb8c81aax1280x988.JPEG"
    ]
  },
  {
    "text": "Lady with 28 weeks of gestation presents with fever, acute pain abdomen, and mild leucocytosis. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Uterine torsion"
      },
      {
        "id": 2,
        "text": "Infection of fibroid"
      },
      {
        "id": 3,
        "text": "Red degeneration of fibroid"
      },
      {
        "id": 4,
        "text": "Preterm labor"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given scenario history of acute <strong>pain abdomen</strong> with <strong>fever</strong> and <strong>mild</strong> <strong>leukocytosis</strong>&nbsp;in a 28-week pregnant woman is suggestive of <strong>red degeneration of fibroid.</strong></p>\n<p>Red degeneration is the <strong>most common</strong> complication of fibroids in pregnancy. It is due to the breakdown of the fibroid resulting in ischemia and pain. Key clinical features in this condition are:</p>\n<ul>\n<li>Low-grade fever</li>\n<li>Tender uterus on palpation</li>\n<li>Elevated leukocytes</li>\n<li>Elevated ESR</li>\n</ul>\n<p>The diagnosis is confirmed with an <strong>ultrasound</strong>. It is usually self-limiting and can be managed with <strong>non-steroidal anti-inflammatory drugs.</strong></p>\n<p>Other options</p>\n<p><strong>Option A</strong> - Uterine torsion is defined as <strong>rotation of more than 45 degrees around the long axis of the uterus</strong>. The most usual symptoms of uterine torsion are birth obstruction, abdominal pain, <strong>vaginal bleeding, shock,</strong> and urinary and intestinal symptoms. The treatment in the<strong> earlier months </strong>of pregnancy is immediate laparotomy and <strong>detorsion</strong> of the uterus. Near-term or during labor cesarean section is carried out, and elimination of the possible etiologic factors.&nbsp;</p>\n<p><strong>Option B - Infection</strong> is common in submucous and myomatous polyps if they project into the cervical canal or the vagina. An infected polyp can cause blood-stained purulent discharge. Infection is more likely in the postpartum and postabortal state.</p>\n<p><strong>&nbsp;</strong><strong>Option D</strong> -<strong>Preterm labor</strong> is diagnosed with the help of the following criteria</p>\n<ul>\n<li>Regular uterine contractions with or without pain (at least one in every 10 minutes)</li>\n<li>Dilatation (&gt; 2 cm) and effacement (80%) of the cervix</li>\n<li>Length of the cervix (measured by TVS) &lt; 2.5 cm and funneling of the internal os</li>\n<li>Pelvic pressure, backache and/or vaginal discharge or bleeding.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Choose the incorrectly matched option.",
    "choices": [
      {
        "id": 1,
        "text": "Uterine prolapse - Vaginal hysterectomy"
      },
      {
        "id": 2,
        "text": "Vault prolapse - Sacrospinous ligament suspension"
      },
      {
        "id": 3,
        "text": "Cystocele - Colposuspension"
      },
      {
        "id": 4,
        "text": "Rectocele - Posterior colporrhaphy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<div class=\"page\" title=\"Page 238\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 239\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The incorrectly matched option is <strong>Cystocele-colposuspension</strong>. The surgery performed for cystocoele is <strong>anterior colporrhaphy.</strong></p>\n<div class=\"ng-star-inserted\">\n<div class=\"table-responsive font-weight-light answer-scroll ng-star-inserted\">\n<p>Various surgeries were performed for the management of uterovaginal prolapse:</p>\n<ol>\n<li><strong>Anterior colporrhaphy</strong>:&nbsp;This is done for <strong>cystocele</strong> or cystourethrocele.</li>\n<li><strong>Posterior colporrhaphy</strong>/ colpoperineorrhaphy:&nbsp;This is done for posterior defects like <strong>rectocele</strong> or rectal defects with perineal laxity.</li>\n<li><strong>Le Forte's repair</strong>:<strong>&nbsp;</strong>This is preferred only in <strong>elderly women</strong> with <strong>advanced prolapse</strong>, or those unfit for surgery. Women wanting an active sexual life are poor candidates for this procedure as it creates an adhesive area in the midline.</li>\n<li><strong>Abdominal sling surgeries:&nbsp;Young</strong> women desirous of <strong>retaining menstrual and reproductive</strong> functions are ideal candidates. These surgeries use tapes as slings to prevent organ descent. These include:\n<ol>\n<li><strong>Abdominal wall cervicopexy</strong> (<strong>modified by Purandare and Mathre</strong>) - sling attached to cervix posteriorly near&nbsp;uterosacral ligaments.<strong>&nbsp;</strong></li>\n<li><strong>Shirodkar's sling surgery</strong> - the sling fixes the cervix to the&nbsp;lumbosacral fascia<strong>.</strong></li>\n<li><strong>Khanna's sling surgery</strong> - sling fixed to the anterior superior iliac spine, strengthening the&nbsp;Mackenrodt's ligament.&nbsp;</li>\n</ol>\n</li>\n<li><strong>Fothergill surgery (Manchester operation):&nbsp;</strong>An anterior colporrhaphy is combined with amputation of the cervix. The Mackenrodt ligaments are then sutured in front of the cervix followed by a colpoperineorrhaphy. It is suitable for women <strong>&lt;40 years desiring reproductive function</strong>, but fertility may be reduced.</li>\n<li><strong>Ward-Mayo surgery</strong>:&nbsp;This is a combination of <strong>vaginal hysterectomy + pelvic floor repair</strong>. It is done in women &gt;40 years, not desiring reproductive function.</li>\n<li><strong>Moschowitz surgery:&nbsp;</strong>This is performed for&nbsp;<strong>enterocele repair</strong> where&nbsp;the&nbsp;pouch of Douglas is obliterated.</li>\n</ol>\n<p><strong>Management of Vault prolapse:</strong></p>\n<ul>\n<li>If the patient is fit for abdominal surgery:&nbsp;<strong>Transabdominal sacral colpopexy</strong>,&nbsp;i.e., suspending the vault to the sacral promontory extraperitoneally. It is <strong>best suited for younger women</strong> since coital difficulty following vaginal surgery is avoided</li>\n<li>If the patient is not fit for abdominal surgery: <strong>Right&nbsp;Transvaginal sacrospinous colpopexy. </strong>It is usually preferred<em>&nbsp;</em>in obese and elderly women, who are not fit for abdominal surgery.</li>\n<li><strong>Colpocleisis</strong> is permissible if <strong>sexual activity is not desired</strong></li>\n</ul>\n</div>\n</div>\n<div class=\"row mt-3\">\n<div class=\"col-auto\">&nbsp;</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Fructose is absent in the seminal fluid, which of the following statements is true regarding this:",
    "choices": [
      {
        "id": 1,
        "text": "Congenital absence of seminal vesicles"
      },
      {
        "id": 2,
        "text": "Obstruction in the ejaculatory duct"
      },
      {
        "id": 3,
        "text": "Both"
      },
      {
        "id": 4,
        "text": "None"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Fructose is absent in seminal fluid in case of\u00a0<strong>congenital absence of seminal vesicle and obstruction of the ejaculatory duct.</strong></p>\n<p>The ejaculatory duct is formed by the\u00a0<strong>fusion of the ductus deferens and the duct of the seminal vesicle</strong>. A major<strong>\u00a0portion</strong>\u00a0of the\u00a0<strong>semen</strong>\u00a0volume is\u00a0<strong>contributed</strong>\u00a0by the\u00a0<strong>seminal vesicles</strong>. Seminal fluid is\u00a0<strong>alkaline</strong>\u00a0and protects sperm from acidity in prostatic secretions and in the vagina. Seminal fluid also provides\u00a0<strong>fructose</strong>\u00a0as an energy source for sperm. If seminal vesicle is absent or if there is an obstruction at the level of the ejaculatory duct then semen analysis will reveal\u00a0<strong>low ejaculate volume, oligospermia or azoospermia, low pH, and absence of fructose.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 15-year-old female presents with primary amenorrhea and signs of virilization. She has prepubertal development of breasts and pubic hair and is tanner stage 2. She has a blind-ended vagina and clitoromegaly. She has normal male testosterone levels. Her genotype is 46XY. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "5 alpha reductase deficiency"
      },
      {
        "id": 2,
        "text": "17 alpha hydroxylase deficiency"
      },
      {
        "id": 3,
        "text": "Androgen insensitivity syndrome"
      },
      {
        "id": 4,
        "text": "Swyer syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario points towards the diagnosis of <strong>5 alpha-reductase deficiency.</strong></p>\n<p>The 5 alpha-reductase enzyme converts <strong>testosterone</strong> <strong>into</strong> a more potent form of the male sex hormone called<strong> dihydrotestosterone </strong>(DHT). <strong>Testosterone</strong> is required for the development of <strong>male internal genitalia</strong>, whereas<strong> DHT</strong> has a role in the development of <strong>male external genitalia</strong>. At puberty, testosterone is responsible for<strong> aggressive psychosexual behavior, deepening of the voice, increased muscle mass, and initiating spermatogenesis.</strong></p>\n<p>In 5 alpha reductase deficiency, there is a failure of conversion of testosterone to dihydrotestosterone. As <strong>testosterone levels are normal </strong>there is a normal development of Wolffian ducts and thus<strong> male internal genitalia are normal</strong>. However, some cases may have a <strong>blind-ending vagina.</strong></p>\n<p>As levels of DHT are low the child will have a <strong>female-looking external genitalia </strong>at <strong>birth</strong>. These children tend to be raised as females till <strong>puberty</strong>, by which they start exhibiting <strong>virilization&nbsp;</strong>which is caused by <strong>testosterone</strong>. Hence <strong>clitoromegaly</strong> is seen. There is a <strong>lack of breast development</strong> as testosterone is not converted to estrogen. <strong>Pubic hair is scanty</strong> as its development depends on both testosterone and dihydrotestosterone.</p>\n<p>Investigations reveal an<strong> increase in the ratio of testosterone to DHT</strong> after hCG administration.</p>\n<p>If the child<strong> wants to be raised as a female</strong>, then the <strong>testes </strong>have to be <strong>removed</strong> before the <strong>child attains puberty and virilization of the child.</strong> <strong>Estrogen therapy</strong> that is appropriate for inducing and maintaining feminization should be started at the time of usual pubertal maturation or immediately after gonadectomy is performed in an adult.<strong> </strong>Surgical correction in the form of <strong>vaginoplasty</strong> is performed<strong>. </strong>If the <strong>child is raised as a male</strong> corrective procedure include<strong> hypospadias correction, correction of chordee, and reconstruction of the urethra.</strong></p>\n<p>Other options</p>\n<p><strong>Option B</strong>: 17 alpha-hydroxylase deficiency results in <strong>decreased production of testosterone by </strong>adrenal glands. However, there will be normal testosterone production from the testes. Hence depending on the <strong>testosterone and dihydrotestosterone </strong>levels the child may have<strong> female-looking external genitalia or ambiguous genitalia at birth</strong>. 17 alpha-hydroxylase deficiency also results in a <strong>decrease in 17-OH progesterone levels and cortisol levels</strong>. Hence there is an <strong>increase in ACTH</strong> due to the loss of negative feedback which increases<strong>&nbsp;aldosterone</strong>. Due to an increase in aldosterone, the child will have <strong>hypertension and hypokalemia.</strong></p>\n<p><strong>Option C</strong>: Androgen insensitivity syndrome is an <strong>X-linked recessive</strong>&nbsp;disorder in which the&nbsp;<strong>androgen receptors</strong> are absent, scanty, or fail to respond to testosterone. Hence there will be <strong>no signs of virilization</strong>. The <strong>serum testosterone levels </strong>will be <strong>elevated</strong>. There will be <strong>normal breast development </strong>as testosterone is converted to estrogen.</p>\n<p><strong>Option D</strong>: Swyer syndrome results from a <strong>mutation in the SRY gene on the Y chromosome</strong>. This results in dysgenetic gonads. There is <strong>no production of AMH and testosterone</strong> and hence there is development of<strong>&nbsp;female internal and external genitalia</strong>. There will be<strong> no signs of virilization.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which one of the following is a virilising tumor of the ovary?",
    "choices": [
      {
        "id": 1,
        "text": "Arrhenoblastoma"
      },
      {
        "id": 2,
        "text": "Thecoma"
      },
      {
        "id": 3,
        "text": "Brenners tumor"
      },
      {
        "id": 4,
        "text": "Carcinoid tumor"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Other options:</p>\n<p>Option B: <strong>Thecomas</strong> typically produce estrogen (female sex hormone). Excess estrogen production can lead to symptoms such as abnormal uterine bleeding, endometrial hyperplasia, or endometrial cancer.</p>\n<p>Option C: <strong>Brenner</strong> tumor (transitional cell tumor) is a <strong>benign, epithelial, unilateral tumor,</strong> resembling a fibroma. Histologically, Walthard cell rests and coffee bean nuclei are seen. Brenner tumors represent only <strong>2-3%</strong> of all <strong>ovarian neoplasms,</strong> and &lt;2% of these tumors are malignant.\u00a0</p>\n<p>Option D: In <strong>carcinoid tumors,</strong> excessive levels of <strong>serotonin</strong> is produced which causes <strong>flushing, diarrhea, wheezing, damage</strong> to the tricuspid valve, etc. The levels of 5-OH indole acetic acid (serotonin metabolite) are elevated in the urine.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old primigravida with a low-risk pregnancy presents at 39 weeks + 6 days with labor pains. Her vitals are stable. On PV, her cervix is 3 cm dilated and 60% effaced. The fetal head is at -3 station and membranes are felt as a bag of worms beneath the head. What is the appropriate course of management?",
    "choices": [
      {
        "id": 1,
        "text": "Start oxytocin"
      },
      {
        "id": 2,
        "text": "Rupture of membranes and confirm cord prolapse"
      },
      {
        "id": 3,
        "text": "Emergency Caesarean section"
      },
      {
        "id": 4,
        "text": "Wait and watch"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Other options:</p>\n<p>Option A: Oxytocin should not be started as the <strong>patient should not be allowed to proceed to deliver via normal vaginal delivery</strong> due to the risk of <strong>cord prolapse and fetal death.</strong></p>\n<p>Option B: The <strong>membranes should not be ruptured </strong>as this would lead to an <strong>overt cord prolapse</strong> and complicate the situation further.\u00a0</p>\n<p>Option D: Cord presentation is an <strong>obstetric emergency</strong> requiring immediate action.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/775c094e466e45c8a7d14e02518f0bb5x310x190.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1c9d0b81ed434fa7bcbe1655a25cff42x1280x1870.JPEG"
    ]
  },
  {
    "text": "A 20-year-old woman visits the OPD with complaints of irregular menses since menarche and increased facial hair. Her BMI is 29 kg/m2 and her Ferriman-Gallwey score was 6. Her testosterone level was 0.36 ng/dl. Her mother is a diabetic on oral hypoglycemic agents. She should be advised the following, except?",
    "choices": [
      {
        "id": 1,
        "text": "OCPs"
      },
      {
        "id": 2,
        "text": "OCPs + Anti-androgens"
      },
      {
        "id": 3,
        "text": "Lifestyle modification"
      },
      {
        "id": 4,
        "text": "Counselled about risk of metabolic syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span data-preserver-spaces=\"true\">Patients with PCOS are at risk of developing<strong> metabolic syndrome (Syndrome X)</strong>, characterised by abdominal obesity, high blood pressure, impaired fasting glucose, high triglyceride levels, and low HDL cholesterol levels.\u00a0</span></p>\n<p><span data-preserver-spaces=\"true\">Treatment of PCOD:</span></p>\n<ul>\n<li>Lifestyle changes (Option C) such as <strong>weight reduction,</strong> <strong>smoking cessation</strong>, are recommended and most important in preventing metabolic syndrome (Option D).</li>\n<li>Fourth-generation\u00a0<strong>oral contraceptive pills</strong> (OCP) (Option A) containing ethinyl estradiol and drospirenone are used for treating <strong>menstrual abnormalities, reducing acne, and hirsutism.</strong></li>\n<li>OCP with\u00a0<strong>cyproterone acetate\u00a0</strong>is prescribed for PCOS patients with hirsutism.</li>\n<li>Patients with PCOD are prone to developing insulin resistance, which can be controlled with\u00a0<strong>metformin</strong>.\u00a0<strong>Acarbose </strong>can be used as an alternative if metformin is contraindicated.</li>\n<li>Infertility in PCOD patients is treated with\u00a0<strong>clomiphene</strong>\u00a0as the first-line drug for inducing ovulation.\u00a0<strong>Dexamethasone</strong>\u00a0is used in combination to improve fertility rates.\u00a0<strong>Letrozole</strong>\u00a0is used off-label in clomiphene-resistant cases.</li>\n</ul>\n<p>Surgical options include\u00a0<strong>laparoscopic ovarian drilling</strong>\u00a0or puncture of not more than four cysts in each ovary. This is done either by laser or by unipolar electrocautery. It restores endocrine levels and improves fertility. Surgery\u00a0is indicated only if:</p>\n<ul>\n<li class=\"p3\">Medical therapy fails</li>\n<li class=\"p3\">Hyperstimulation occurs</li>\n<li class=\"p3\">Infertile women</li>\n<li class=\"p3\">Previous pregnancy losses</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/452854eb73d749aea3e9504878fdbb01x533x400.JPEG"
    ]
  },
  {
    "text": "A 34-year-old woman at 30 weeks of gestation presents with complaints of bleeding PV and abdominal pain. She has drenched her clothes and has experienced decreased fetal movements. On examination, her cervix was 6cm dilated and 50% effaced. Her BP was 150/100mmHg, PR - 100 beats/min. Her abdomen corresponded to 34 weeks and she had a tense and tender uterus with regular contractions and no fetal heart sounds were heard. Her urine protein is 2+ and there is no active bleeding. What is the ideal management?",
    "choices": [
      {
        "id": 1,
        "text": "Antihypertensives + ARM (Artificial Rupture of Membranes)"
      },
      {
        "id": 2,
        "text": "Antihypertensives + emergency caesarean section"
      },
      {
        "id": 3,
        "text": "Antihypertensives + tocolytics"
      },
      {
        "id": 4,
        "text": "Observation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario of <strong>painful antepartum haemorrhage</strong> associated with <strong>pre-eclampsia (hypertension + proteinuria)</strong> and <strong>fetal death</strong> is suggestive of <strong>Grade 2 abruptio placentae</strong>. In this case, as there is fetal death and the patient is in labor, the best approach would be to administer <strong>antihypertensives</strong> and <strong>deliver the fetus vaginally.</strong></p>\n<p>Abruptio placenta is the <strong>partial/total placental separation</strong> from its implantation site <strong>before delivery</strong>. The bleeding may be:</p>\n<ul>\n<li><strong>Revealed</strong> - blood dissects downwards between membranes and uterine wall to escape through the cervix</li>\n<li><strong>Concealed</strong> - blood accumulates between the detached placenta and uterus, and the uterus is larger than expected for the period of gestation</li>\n<li><strong>Mixed -\u00a0</strong>features of both co-existing</li>\n</ul>\n<p><strong>Hypertension</strong> in pregnancy is the <strong>most important risk factor</strong> for abruptio placenta. Spasm of the decidual spiral artery leads to endothelial damage and extravasation of blood in the placental bed, leading to fetal distress.\u00a0 Patients often present with sudden onset <strong>abdominal pain, vaginal bleeding, uterine tenderness</strong>, and <strong>frequent contractions</strong>. Based on the degree of\u00a0 placental separation, patients are clinically graded as follows:</p>\n<ul>\n<li><strong>Grade 0</strong> \u2013 Asymptomatic, abruption is diagnosed only after delivery by the presence of retroplacental clots.</li>\n<li><strong>Grade 1</strong> \u2013 Vaginal bleeding, mild uterine tetani. No maternal and fetal complications.</li>\n<li><strong>Grade 2</strong> \u2013 <strong>With fetal distress or death</strong></li>\n<li><strong>Grade 3</strong> \u2013 With maternal complications like shock, renal failure, coagulopathy, or death.</li>\n</ul>\n<p>The management of abruption is based on whether the patient is in labor and the fetal status, with the goal being to expedite delivery and prevent complications such as shock and coagulopathy. Immediate management begins with the administration of<strong> IV crystalloids</strong> and arrangement of <strong>blood</strong> for the patient, along with<strong> BP control.</strong></p>\n<ul>\n<li>If the patient is<strong> in labor</strong> and the <strong>cervix is favourable</strong>, in case the <strong>fetal heart rate is reassuring</strong>, or in case the <strong>fetal has died - amniotomy and vaginal delivery.</strong></li>\n<li>If the patient is <strong>not in labor </strong>or fetal heart tracing indicate <strong>fetal distress - </strong>an <strong>emergency caesarean section</strong> is indicated. (Option B)</li>\n</ul>\n<p>Other Options:</p>\n<p>Options C and D: Abruption is considered an obstetric emergency and hence tocolytics or expectant management have no place in this situation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following vessels will serve as an alternate source of blood supply to prevent uterine ischaemia, in case the primary artery is ligated in the event of PPH?",
    "choices": [
      {
        "id": 1,
        "text": "Ovarian artery"
      },
      {
        "id": 2,
        "text": "Uterine artery"
      },
      {
        "id": 3,
        "text": "Arcuate Artery"
      },
      {
        "id": 4,
        "text": "Round Ligament Artery"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the event of postpartum haemorrhage (PPH), bleeding occurs from the <strong>uterine artery</strong> which is the <strong>primary vessel ligated</strong>, and the inflow from the <strong>ovarian artery compensates</strong> to prevent ischaemia.</p>\n<p>The arterial supply to the uterus is by two main arteries: the<strong> uterine artery</strong>, which is a branch of the <strong>anterior division</strong> of the<strong> internal iliac artery</strong>, and the <strong>ovarian artery</strong> which is a direct branch of the <strong>abdominal aorta.</strong> Ligating the uterine artery limits the supply from the internal iliac artery and hence the ovarian artery serves as the alternate blood supply.</p>\n<p>The uterine artery runs from its origin towards the cervix, crosses the ureter and then ascends with a tortuous course along the lateral aspect of the uterus up to ovary, where it anastomoses with the ovarian artery. \u00a0It is based on this anatomical relationship that the <strong>order of ligation</strong> of vessels to arrest bleeding in atonic postpartum haemorrhage\u00a0is the <strong>uterine artery &gt; ovarian artery &gt; internal iliac artery.</strong></p>\n<p>Other Options:</p>\n<p>Option C: The arcuate artery is a branch of the uterine artery itself.</p>\n<p>Option D: The artery to the round ligament artery is a branch from the ovarian artery.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/004374f4615c473fbcba3063344f45a0x1280x1448.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e2720674c69b418e8fc02346abbcc09bx1280x2569.JPEG"
    ]
  },
  {
    "text": "Which of the following are responsible for increased blood volume during pregnancy?",
    "choices": [
      {
        "id": 1,
        "text": "Action of estrogen and aldosterone"
      },
      {
        "id": 2,
        "text": "Increased fluid retention by the kidneys"
      },
      {
        "id": 3,
        "text": "Both A and B"
      },
      {
        "id": 4,
        "text": "Action of ADH and aldosterone"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Increased blood volume during pregnancy is due to estrogen and aldosterone, both of which cause increased fluid retention by the kidneys, hence both options A and B are correct.</p>\n<p>Increased <strong>estrogen</strong> during pregnancy<strong> directly causes fluid retention</strong> and also <strong>activates the RAAS pathway</strong> causing increased<strong> aldosterone</strong>, leading to <strong>fluid retention by the kidneys</strong>. Although there is a reset in the threshold for response to ADH, the <strong>levels of ADH remain unchanged.</strong></p>\n<p>Although all components of blood are increased during pregnancy, plasma volume is increased more than the RBC volume, leading to a <strong>relative hemodilution</strong>, responsible for what is termed as <strong>physiological anaemia of pregnancy</strong>. The increased plasma volume is<strong> beneficial </strong>as it <strong>reduces blood viscosity</strong>, allowing for effective gaseous exchange in placental and fetal circulation, it is <strong>protective</strong> against the <strong>possible adverse effects </strong>of change in posture causing <strong>vascular compression</strong>, and also against the possible<strong> blood loss during delivery</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not required to be a part of the consent for surgery in a patient who has an obstetric score of G6L1A3 with a history of two previous LSCS?",
    "choices": [
      {
        "id": 1,
        "text": "Risk of bladder injury during surgery due to PAS"
      },
      {
        "id": 2,
        "text": "Risk of bowel injury during surgery due to PAS"
      },
      {
        "id": 3,
        "text": "Possible need for hysterectomy during surgery due to PAS"
      },
      {
        "id": 4,
        "text": "Possible need for blood transfusion"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>PAS can be diagnosed in the antepartum period by ultrasound which will reveal loss of normal hypoechoic retroplacental zone between the placenta and uterus, placental vascular lacunae, bridging vessels, and placental bulging leading to distortion of the contour of the uterus. MRI can be performed when the ultrasound is inconclusive. However, ultrasound remains the modality of choice for diagnosis.</p>\n<p>Patients with PAS have a significant risk of <strong>haemorrhage</strong> and <strong>shock</strong>. Management of this condition therefore involves appropriate multidisciplinary efforts with adequate surgical, anesthetic, intensive care, and blood banking capabilities. Patients are recommended scheduled delivery between 34 0/7 to 35 6/7 weeks of gestation and the risk of hemorrhage necessitating <strong>paripartum hysterectomy</strong> and <strong>blood transufsion</strong>, or<strong> bladder injury</strong> in percreta must be properly communicated.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/84268612f965433bacb61fb002a017edx600x1200.PNG"
    ]
  },
  {
    "text": "A 30-year-old nulligravida is on DMPA and she comes 14 days past her due date for her next DMPA. What should be advised to her?",
    "choices": [
      {
        "id": 1,
        "text": "Administer DMPA in the next cycle"
      },
      {
        "id": 2,
        "text": "Take DMPA with back up for 7 days"
      },
      {
        "id": 3,
        "text": "Ask to do UPT before taking the DMPA"
      },
      {
        "id": 4,
        "text": "Take DMPA and no back up needed"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>DMPA</strong> can be given as a repeat dose<strong>\u00a0up to 4 weeks later from the scheduled date (within grace period)</strong>\u00a0after the previous dose. But if the patient is presenting later than that, she should be given a <strong>urine pregnancy test</strong> before the <strong>next</strong> dose of <strong>DMPA.\u00a0\u00a0</strong></p>\n<p>DMPA stands for <strong>Depot Medroxy Progesterone Acetate.</strong> It is an injectable progesterone formulation available for contraception. It <strong>acts by:</strong></p>\n<ul>\n<li>Bringing changes in the cervical mucus</li>\n<li>Making the endometrium hostile</li>\n<li>Preventing ovulation</li>\n</ul>\n<p><strong>Disadvantages</strong> include <strong>spotting</strong> and <strong>intermediate</strong>\u00a0per vaginal\u00a0<strong>bleeding</strong>.\u00a0</p>\n<p>DMPA guidelines:</p>\n<ul>\n<li>Injections to be provided every 3 months</li>\n<li>It can be given up to 2 weeks later without any other contraception.\u00a0</li>\n<li>DMPA can be given as a repeat dose up to up to 4 weeks later from the scheduled date (within grace period) after the previous dose.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/86bd1bc1e387428a871ff147a72ba92dx398x265.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/de9fec57e05b490e86a15552c7c8a07dx432x273.PNG"
    ]
  },
  {
    "text": "A 67-year-old female is brought to the OPD in a poor general condition. On examination, she was found to have a right ovarian mass. Her CT scan indicated peritoneal caking. Her CA-125 levels were 1200 IU/L. What would be the management in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Debulking surgery followed by chemotherapy"
      },
      {
        "id": 2,
        "text": "Chemotherapy followed by debulking surgery"
      },
      {
        "id": 3,
        "text": "Debulking surgery followed by radiotherapy"
      },
      {
        "id": 4,
        "text": "Staging laparotomy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In the given scenario, the patient presents with <strong>poor general condition</strong> and the presence of <strong>peritoneal metastases</strong> is suggestive of <strong>Stage III </strong>ovarian cancer. The preferred management would be to initiate <strong>neoadjuvant chemotherapy</strong> with three cycles of <strong>paclitaxel + carboplatin</strong> over three weeks, <strong>followed by debulking/cytoreductive surgery</strong>, and then continue another three cycles of chemotherapy.\u00a0</p>\n<p>Epithelial ovarian cancers are treated with a multimodality approach. The usual approach in <strong>Stage I and II disease </strong>where the patient is fit for surgery, is to perform <strong>cytoreductive surgery</strong>, which also helps in determining the extent of disease, followed by adjuvant chemotherapy (Option A). However, patients with<strong> advanced disease and poor general condition</strong> are <strong>unfit for anaesthesia and surgery </strong>at the time of presentation and have a higher operative risk, hence <strong>neoadjuvant chemotherapy</strong> prior to surgery is preferred and has been shown to reduce morbidity in such patients.</p>\n<p>Other options:</p>\n<p>Option C: <strong>Ovarian tumors</strong> are <strong>not radiosensitive</strong> and radiotherapy does not form part of the protocol for treatment of ovarian cancers.</p>\n<p>Option D: <strong>Staging laparotomy</strong> is the term used to describe the procedure of surgically exploring patients with <strong>early-stage disease</strong> and would not be the approach in a patient with advanced disease in whom chemotherapy followed by debulking surgery is indicated.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following leads to an increased risk for borderline ovarian tumors?",
    "choices": [
      {
        "id": 1,
        "text": "Polycystic Ovarian Syndrome (PCOS)"
      },
      {
        "id": 2,
        "text": "Low parity"
      },
      {
        "id": 3,
        "text": "Oral Contraceptive Pill (OCP) intake"
      },
      {
        "id": 4,
        "text": "Functional ovarian cysts"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Low parity is a risk factor for the development of borderline ovarian tumors.</p>\n<p>Borderline ovarian tumors are ovarian epithelial tumors of <strong>low malignant potential</strong>, defined histologically by <strong>atypical epithelial proliferation without stromal invasion</strong>. They are classified as either <strong>serous</strong> or<strong> mucinous</strong>. The following are the<strong> risk factors</strong> for their development:</p>\n<ul>\n<li><strong>low parity</strong> / unopposed estrogen</li>\n<li>infertility</li>\n<li>obesity</li>\n<li>smoking</li>\n</ul>\n<p>Clinically patients present with symptoms similar to that of a benign ovarian tumor such as a mass per abdomen, abdominal pain and alteration in menstrual cycles. Patients require similar investigations but the <strong>diagnosis</strong> of borderline ovarian tumor is <strong>based on biopsy</strong>. <strong>Conservative surgery</strong> is usually the preferred treatment approach especially in patients who wish to retain fertility. <strong>Appendectomy</strong> is usually <strong>recommended in the mucinous variety</strong> to prevent pseudomyxoma peritonei. Patients do not require chemotherapy or radiotherapy for treatment but these tumours<strong> tend to recur </strong>and hence <strong>regular follow-up</strong> is advised.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old multigravida comes to the emergency at night with an inversion of the uterus following the delivery of the baby when the nurse waited till the delivery of the placenta. Her BP is 110/70 mmHg. Pulse rate 90 beats/min. What should be the management in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Manually remove placenta and then reposition the uterus"
      },
      {
        "id": 2,
        "text": "Start oxytocin infusion"
      },
      {
        "id": 3,
        "text": "Reposition the uterus without removing placenta"
      },
      {
        "id": 4,
        "text": "Shift the patient to OT and reposition the uterus under anaesthesia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This patient with a <strong>uterine inversion</strong> with <strong>stable vitals</strong> should undergo <strong>manual reposition</strong> of the uterus <strong>without removing</strong> the <strong>placenta</strong></p>\n<p>Uterine inversion occurs when there is excessive traction leading to the loss of the uterine convexity and protrusion of the uterus outside the vaginal introitus.</p>\n<p>Risk factors for uterine inversion:</p>\n<ul>\n<li>Fundal attachment of the placenta</li>\n<li>Uterine atony</li>\n<li>Attempts at<strong> cord traction before placental delivery</strong></li>\n<li>Adherent placenta</li>\n</ul>\n<p>There are 3 degrees of uterine inversion:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>First-degree</strong> - the fundus of the uterus inverts into the uterine cavity</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Second-degree</strong> - the uterine fundus protrudes through the cervix and lies in the vagina</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Third-degree</strong> - the whole of the uterus is inverted and protrudes through the introitus</li>\n</ul>\n<p>Since <strong>uterine inversion</strong> presents\u00a0with <strong>profuse bleeding</strong> and a\u00a0severe degree of shock, it requires prompt diagnosis and management. It is managed by\u00a0<strong>promptly repositioning</strong> the uterus by exerting a firm and constant pressure on the inverted uterine fundus. The <strong>placenta</strong>\u00a0should <strong>not</strong> be <strong>removed</strong> until after the <strong>replacement</strong> of the <strong>uterus if</strong> it is <strong>still attached</strong> to the <strong>uterus.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The recombinant form of vaccine to prevent cervical cancer has which of the following proteins?",
    "choices": [
      {
        "id": 1,
        "text": "L1"
      },
      {
        "id": 2,
        "text": "E6 and E7"
      },
      {
        "id": 3,
        "text": "E1 and E2"
      },
      {
        "id": 4,
        "text": "L2"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<div class=\"row mt-3\">As per the\u00a0<strong data-stringify-type=\"bold\">December 2022 WHO\u00a0</strong>updated dose schedules on<strong data-stringify-type=\"bold\">\u00a0HPV vaccines,</strong>\u00a0the recommendations for different age groups are as follows:</div>\n<div class=\"row mt-3\">\n<div class=\"row mt-3\">\n<ul>\n<li><strong>1 or 2 doses</strong>\u00a0schedule<strong>\u00a0</strong>for the primary target of girls aged\u00a0<strong>9\u201314 years</strong>.</li>\n<li><strong>1 or 2 doses</strong>\u00a0schedule\u00a0for young women aged\u00a0<strong>15\u201320 years</strong>.</li>\n<li><strong>2</strong>\u00a0doses with a\u00a0<strong>6-month interval</strong>\u00a0for women\u00a0<strong>older than 21 years</strong>.</li>\n<li>\n<div class=\"p-rich_text_section\">A minimum of<strong data-stringify-type=\"bold\">\u00a02 doses</strong>\u00a0and when feasible <strong>3 doses</strong>\u00a0remain necessary for those known to be<strong data-stringify-type=\"bold\">\u00a0immunocompromised </strong>and/or<strong data-stringify-type=\"bold\"> HIV-infected</strong>.</div>\n</li>\n</ul>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '283 Obstetrics And Gynecology Ini-Cet 2023';
        let hierarchy = ["Marrow", "PYQs", "Obstetrics & Gynecology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>