<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Medicine Test Iii - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A case-control study was done among 500 lung cancer patients and 400 controls. The study groups had 400 and 50 smokers respectively. Calculate the odds ratio.",
    "choices": [
      {
        "id": 1,
        "text": "2.8"
      },
      {
        "id": 2,
        "text": "0.28"
      },
      {
        "id": 3,
        "text": "0.20"
      },
      {
        "id": 4,
        "text": "28"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In the given scenario, the odds ratio (<strong>OR</strong>) is <strong>28</strong>.</p>\n<p>The given data is represented as:&nbsp;</p>\n<table>\n<tbody>\n<tr>\n<td width=\"94\">&nbsp;</td>\n<td width=\"92\">\n<p><strong>Disease +</strong></p>\n</td>\n<td width=\"78\">\n<p><strong>Disease&nbsp; -</strong></p>\n</td>\n</tr>\n<tr>\n<td width=\"94\">\n<p><strong>Exposure +</strong></p>\n</td>\n<td width=\"92\">\n<p>400 (a)</p>\n</td>\n<td width=\"78\">\n<p>50 (b)</p>\n</td>\n</tr>\n<tr>\n<td width=\"94\">\n<p><strong>Exposure - </strong></p>\n</td>\n<td width=\"92\">\n<p>100 (c)</p>\n</td>\n<td width=\"78\">\n<p>350 (d)</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Odds Ratio</strong> = ad/bc</p>\n<p>= (400 x 350) / (50 x 100)</p>\n<p>= (4 x 35)/5</p>\n<p>= 4 x 7</p>\n<p>= <strong>28</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following disposal methods uses high temperature and dry oxidation?",
    "choices": [
      {
        "id": 1,
        "text": "Microwaving"
      },
      {
        "id": 2,
        "text": "Autoclaving"
      },
      {
        "id": 3,
        "text": "Incineration"
      },
      {
        "id": 4,
        "text": "Hydroclaving"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Incineration </strong>is a high-temperature dry oxidation process.</p>\n<p>Waste that is incinerated need not undergo any type of pre-treatment.&nbsp;It helps to <strong>reduce weight</strong> as well as <strong>volume</strong>.&nbsp;The temperature in the incinerator is&nbsp;<strong>800\u2070C </strong>in the<strong>&nbsp;</strong>primary chamber and&nbsp;<strong>1050\u2070C </strong>in the secondary chamber.</p>\n<p><strong>Types of incinerators:</strong></p>\n<ul>\n<li>Rotary kilns</li>\n<li>Single chamber pyrolytic</li>\n<li>Double chamber pyrolytic</li>\n</ul>\n<p>The heating systems used for the treatment and disposal of biomedical waste are:</p>\n<table>\n<tbody>\n<tr>\n<td><strong>Low-heat system</strong></td>\n<td><strong>High-heat system</strong></td>\n</tr>\n<tr>\n<td>\n<p><strong>Autoclaving:&nbsp;</strong>Uses steam. It is of two types-</p>\n<ol>\n<li>Gravity flow autoclave&nbsp;</li>\n<li>Vacuum autoclave</li>\n</ol>\n<p><strong>Microwaving:&nbsp;</strong>Uses&nbsp;moist heat and steam generated by microwave energy</p>\n</td>\n<td>\n<p><strong>Incineration:&nbsp;</strong>Waste is destroyed/denatured under high temperatures&nbsp;</p>\n<p><strong>Plasma pyrolysis:&nbsp;</strong>Waste is treated at high temperatures under controlled conditions to form gases that are subjected to combustion in the&nbsp;secondary chamber</p>\n<p><strong>Hydroclaving:&nbsp;</strong>The waste is subjected to indirect heating by applying steam&nbsp;to the outer jacket</p>\n<p><strong>Dry heat sterilization:&nbsp;</strong>Waste sharps are treated using dry heat at a temperature &gt;185 C for 150 minutes</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A new test for hepatitis C is performed on 200 patients with the biopsy-proven disease and 200 patients who are free of the disease. The test shows positive results on 180 of the patients with the disease and negative results on 150 of the patients without the disease. Which of the following is true?",
    "choices": [
      {
        "id": 1,
        "text": "Positive predictive value is 90%"
      },
      {
        "id": 2,
        "text": "Negative predictive value is 75%"
      },
      {
        "id": 3,
        "text": "Specificity is 75%"
      },
      {
        "id": 4,
        "text": "Sensitivity is 78%"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The<strong> specificity</strong> of the above screening test is <strong>75%.</strong></p>\n<p>The given data is represented below:</p>\n<table style=\"width: 407px;\">\n<tbody>\n<tr>\n<td style=\"width: 60px;\">\n<p>&nbsp;</p>\n</td>\n<td style=\"width: 123px;\">\n<p><strong>Hep C +</strong></p>\n</td>\n<td style=\"width: 115px;\">\n<p><strong>Hep C -</strong></p>\n</td>\n<td style=\"width: 81px;\">\n<p><strong>Total</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 60px;\">\n<p><strong>Test +</strong></p>\n</td>\n<td style=\"width: 123px;\">\n<p>180(TP)</p>\n</td>\n<td style=\"width: 115px;\">\n<p>50(FP)</p>\n</td>\n<td style=\"width: 81px;\">\n<p>230</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 60px;\">\n<p><strong>Test -</strong></p>\n</td>\n<td style=\"width: 123px;\">\n<p>20(FN)</p>\n</td>\n<td style=\"width: 115px;\">\n<p>150(TN)</p>\n</td>\n<td style=\"width: 81px;\">\n<p>170</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 60px;\">\n<p><strong>Total</strong></p>\n</td>\n<td style=\"width: 123px;\">\n<p>200(TP+FN)</p>\n</td>\n<td style=\"width: 115px;\">\n<p>200(FP+TN)</p>\n</td>\n<td style=\"width: 81px;\">\n<p>400</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>TP- true positive, FP- false positive, FN- false negative, TN- true negative</p>\n<p><strong>Specificity&nbsp;</strong>= TN/(FP + TN) x 100 = 150/200 = 75%</p>\n<p><strong>Sensitivity</strong>&nbsp;= TP/(TP + FN) x 100 = 180/200 = 90%</p>\n<p><strong>PPV</strong>=&nbsp;TP/(TP + FP) x 100 = 180/230 = 78%</p>\n<p><strong>NPV</strong>=TN/(FN + TN) x 100 = 150/170 = 88%</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a socio-economic determinant of health?",
    "choices": [
      {
        "id": 1,
        "text": "Lifestyle"
      },
      {
        "id": 2,
        "text": "Political system"
      },
      {
        "id": 3,
        "text": "Education"
      },
      {
        "id": 4,
        "text": "GNP per capita"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Lifestyle</strong> is a behavioural and\u00a0<strong>socio-cultural</strong> <strong>determinant</strong> of health. It is not a socio-economic determinant.</p>\n<p><strong>Socio-economic</strong> <strong>determinants</strong> of health are the following:</p>\n<ul>\n<li>Economic status (per capita GNP)</li>\n<li>Education</li>\n<li>Occupation</li>\n<li>Political system \u00a0</li>\n</ul>\n<p><strong>Lifestyle</strong> is simply the way people live. It reflects our social values, attitudes, and activities. It is <strong>composed of</strong>:\u00a0</p>\n<ul>\n<li>Cultural patterns (daily nutrition, superstitions)</li>\n<li>Behavioral patterns (personal hygiene, sedentary life)</li>\n<li>Lifelong personal habits (e.g. smoking, alcoholism)\u00a0</li>\n</ul>\n<p>Lifestyle is learned by <strong>social interaction</strong> with parents, siblings, friends, school, and mass media. \u00a0</p>\n<p>Our <strong>political system</strong> determines our health. It can help shape community health services with regards to resource allocation, manpower policy, choice of technology, and the degree to which these services are made available &amp; accessible to all segments of the society.</p>\n<p>The percentage of <strong>GDP</strong> spent on <strong>health</strong> is an indicator of political commitment. <strong>WHO</strong> recommends at least <strong>5%</strong> of GDP to be spent on health care.\u00a0<strong>India</strong> spends about <strong>2.1 % </strong>of its GDP on health(budget 2022-23). \u00a0\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Flannelgraphs, exhibits, and flipcharts are used to demonstrate the effect of injudicious use of antibiotics. What is this method of group communication known as?",
    "choices": [
      {
        "id": 1,
        "text": "Chalk and Talk"
      },
      {
        "id": 2,
        "text": "Symposium"
      },
      {
        "id": 3,
        "text": "Mass media"
      },
      {
        "id": 4,
        "text": "Demonstration"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Flannelgraphs, exhibits, and flipcharts belong to the <strong>chalk and talk method</strong> of group communication, in which the chalk is the visual component.</p>\n<p>It is also known as <strong>lectures</strong>. Flannelgraphs, flipcharts, exhibits, films, and charts come under this method. Disadvantages of lectures are:</p>\n<ul>\n<li>Minimum interaction</li>\n<li>Do not stimulate thinking or problem solving</li>\n<li>Comprehension is dependent on the individual</li>\n<li>Do not influence behavior directly</li>\n</ul>\n<table style=\"width: 516px;\">\n<tbody>\n<tr>\n<td style=\"width: 936px; text-align: center;\" colspan=\"3\">Methods of Health Communication\u00a0\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 217px; text-align: center;\"><strong>Individual approach</strong></td>\n<td style=\"width: 285.094px; text-align: center;\"><strong>Group approach</strong></td>\n<td style=\"width: 433.906px; text-align: center;\"><strong>Mass approach</strong></td>\n</tr>\n<tr>\n<td style=\"width: 217px;\">\n<ol>\n<li>Personal contact</li>\n<li>Home visits</li>\n<li>Personal letters</li>\n</ol>\n</td>\n<td style=\"width: 285.094px;\">\n<ol>\n<li>Lectures</li>\n<li>Demonstrations</li>\n<li>Discussion methods\n<ul>\n<li>Group discussions</li>\n<li>Panel discussion</li>\n<li>Symposium</li>\n<li>Workshop</li>\n<li>Conferences</li>\n<li>Seminars</li>\n<li>Role play</li>\n</ul>\n</li>\n</ol>\n</td>\n<td style=\"width: 433.906px;\">\n<ol>\n<li>TV</li>\n<li>Radio</li>\n<li>Newspaper</li>\n<li>Printed material</li>\n<li>Direct mailing</li>\n<li>Posters</li>\n<li>Health museums</li>\n<li>Health exhibitions</li>\n<li>Folk method</li>\n<li>Internet</li>\n</ol>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following states will the host not shed the infectious organism?",
    "choices": [
      {
        "id": 1,
        "text": "Latent infection"
      },
      {
        "id": 2,
        "text": "Convalescent carrier state"
      },
      {
        "id": 3,
        "text": "Subclinical infection"
      },
      {
        "id": 4,
        "text": "Healthy carrier state"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The host <strong>does not shed</strong> the infectious <strong>organism</strong> in case of a <strong>latent infection</strong>. This is defined as a state in which the host does not show signs and symptoms of the disease and does not shed the organism.</p>\n<p>It can be seen in conditions like&nbsp;herpes simplex, ancylostomiasis, infections due to slow viruses, Brill-Zinsser disease, etc.</p>\n<p><strong>Subclinical infection</strong> is a state where the host harbours the infectious agent<strong> without</strong> developing <strong>signs</strong> <strong>and</strong> <strong>symptoms</strong> but <strong>sheds</strong> the <strong>infectious agent</strong>. This state is seen in conditions like hepatitis A, rubella, mumps, etc.</p>\n<p><strong>Healthy carriers</strong> are those who had subclinical infections and later developed a carrier state without suffering from the overt disease. This state is seen in: (mnemonic:&nbsp;<strong>CM - DPT</strong>)</p>\n<ul>\n<li><strong>C</strong>holera</li>\n<li><strong>M</strong>eningitis</li>\n<li><strong>D</strong>iphtheria</li>\n<li><strong>P</strong>olio</li>\n<li><strong>T</strong>yphoid</li>\n</ul>\n<p><strong>Convalescent carriers</strong> are those which <strong>shed</strong> the infectious agent <strong>during</strong> the convalescent phase/<strong>recovery phase</strong>. Such carriers are seen in diphtheria, typhoid, cholera, pertussis, etc.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "5000 persons underwent screening for a disease. Out of 500 diseased, 350 tested positive, and out of healthy people, 3000 tested negative. Which of the following is true?",
    "choices": [
      {
        "id": 1,
        "text": "Sensitivity is 70% and Specificity is 80%"
      },
      {
        "id": 2,
        "text": "Specificity is 70% and Sensitivity is 80%"
      },
      {
        "id": 3,
        "text": "Specificity is 66.6% and Sensitivity is 70%"
      },
      {
        "id": 4,
        "text": "Sensitivity is 87.5% and Specificity is 66.6%"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The<strong> sensitivity</strong> of the above screening test is&nbsp;<strong>70%</strong> and<strong>&nbsp;Specificity</strong> is<strong> 66.6%.</strong></p>\n<p>The given data is represented below:</p>\n<table style=\"width: 343px;\">\n<tbody>\n<tr>\n<td style=\"width: 67px;\">\n<p>&nbsp;</p>\n</td>\n<td style=\"width: 96px;\">\n<p><strong>Disease +</strong></p>\n</td>\n<td style=\"width: 78px;\">\n<p><strong>Disease -</strong></p>\n</td>\n<td style=\"width: 74px;\">\n<p>Total</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 67px;\">\n<p><strong>Test +</strong></p>\n</td>\n<td style=\"width: 96px;\">\n<p>350(TP)</p>\n</td>\n<td style=\"width: 78px;\">\n<p>1500(FP)</p>\n</td>\n<td style=\"width: 74px;\">\n<p>1850</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 67px;\">\n<p><strong>Test -</strong></p>\n</td>\n<td style=\"width: 96px;\">\n<p>150(FN)</p>\n</td>\n<td style=\"width: 78px;\">\n<p>3000(TN)</p>\n</td>\n<td style=\"width: 74px;\">\n<p>3150</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 67px;\">\n<p>Total</p>\n</td>\n<td style=\"width: 96px;\">\n<p>500(TP+FN)</p>\n</td>\n<td style=\"width: 78px;\">\n<p>4500(TN+FP)</p>\n</td>\n<td style=\"width: 74px;\">\n<p>5000</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Sensitivity</strong>&nbsp;= TP/(TP + FN) x 100 = 350/500 = 0.7 = <strong>70%.</strong></p>\n<p><strong>Specificity&nbsp;</strong>= TN/(FP + TN) x 100 = 3000/4500 = 0.6666 = <strong>66.6%.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is not true about mass media?",
    "choices": [
      {
        "id": 1,
        "text": "It has increased influence only in below-average educated population"
      },
      {
        "id": 2,
        "text": "It gives greater support for concentrated programmes"
      },
      {
        "id": 3,
        "text": "Mass media alone is inadequate in changing human behavior"
      },
      {
        "id": 4,
        "text": "Mass media reaches the widest population"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The advantage of mass media includes that it has increased influence across all educational levels, <strong>especially</strong> in <strong>above-average </strong>educational level.</p>\n<p>Mass media includes <strong>TV, newspaper, radio</strong>, etc.</p>\n<ul>\n<li>Advantages:\n<ul>\n<li>It reaches people even in the most <strong>remote areas</strong>.</li>\n<li>It gets <strong>public\u00a0attention</strong>.</li>\n<li>It has increased influence across all educational levels, especially in above-average educational level.</li>\n<li>It gives greater support for <strong>concentrated programmes.</strong></li>\n</ul>\n</li>\n<li>Disadvantages:\n<ul>\n<li><strong>One-way</strong> communication</li>\n<li>Impersonal method and no face-to-face contact</li>\n<li><span class=\"fontstyle0\">Mass media alone is inadequate in changing human behavior.</span></li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which model of health education does internalization occur?",
    "choices": [
      {
        "id": 1,
        "text": "Medical model"
      },
      {
        "id": 2,
        "text": "Socio-environmental model"
      },
      {
        "id": 3,
        "text": "Motivation model"
      },
      {
        "id": 4,
        "text": "Service model"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Internalization</strong> belongs to the <strong>motivation</strong> model.</p>\n<p>There are <strong>three models </strong>of health education:</p>\n<ul>\n<li><strong>Medical</strong> model: transfer of proven medical information into education. It does<span class=\"fontstyle0\">&nbsp;not bridge the gap between knowledge and behavior.</span></li>\n<li><strong>Motivation</strong>&nbsp;model: creates&nbsp;<strong>awareness</strong>&nbsp;of health needs and problems. Awareness leads to&nbsp;<strong>motivation</strong>&nbsp;which&nbsp;includes stages of&nbsp;interest,&nbsp;evaluation, and&nbsp;decision-making. It is followed by acceptance of the new idea which becomes part of his existing values, known as&nbsp;<strong>internalization</strong>.</li>\n<li><strong>Social intervention</strong> model: focuses on changing the social environment which subsequently shapes the behavior of individual and the community.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Measures in sentinel surveillance do not aim at identifying:",
    "choices": [
      {
        "id": 1,
        "text": "Missing cases of the disease"
      },
      {
        "id": 2,
        "text": "Old cases of the disease"
      },
      {
        "id": 3,
        "text": "New cases of the disease"
      },
      {
        "id": 4,
        "text": "Cases free of disability"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Sentinel surveillance</strong> does not include identifying cases free of disability.</p>\n<p>Sentinel surveillance helps in <strong>identifying</strong> the <strong>missing </strong>cases, in addition to the <strong>already existing</strong> and <strong>new cases</strong>. It is used for&nbsp;supplementing routine notifications.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is called the committee on Integration of Health Services?",
    "choices": [
      {
        "id": 1,
        "text": "Jungalwalla committee"
      },
      {
        "id": 2,
        "text": "Krishnan committee"
      },
      {
        "id": 3,
        "text": "Shrivastav committee"
      },
      {
        "id": 4,
        "text": "Bhore committee"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>Jungalwalla</strong> Committee of 1967 is also known as the committee on <strong>Integration of Health Services</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "How many goals does the Sustainable Development Goals (SDG) comprise of?",
    "choices": [
      {
        "id": 1,
        "text": "17"
      },
      {
        "id": 2,
        "text": "28"
      },
      {
        "id": 3,
        "text": "8"
      },
      {
        "id": 4,
        "text": "14"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>Sustainable Development Goals </strong>(SDG) are comprised of <strong>17 goals</strong>.</p>\n<p>These were set&nbsp;as part of the official Sustainable Development Goals of the <strong>Agenda 2030</strong>.<strong>&nbsp;</strong> These goals consist of a total of&nbsp;<strong>169 targets</strong>.<strong>&nbsp;</strong>SDGs replaced the&nbsp;Millennium Development Goals on&nbsp;1st January 2016.&nbsp;</p>\n<p>The 2030 agenda consists of <strong>five P's</strong>:&nbsp;</p>\n<ul>\n<li>People</li>\n<li>Planet</li>\n<li>Prosperity</li>\n<li>Peace</li>\n<li>Partnership &nbsp;&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/99a118c8654241939d5ed5c38c8e0daex1280x904.JPEG"
    ]
  },
  {
    "text": "Which of the following is not an example of a randomised controlled trial?",
    "choices": [
      {
        "id": 1,
        "text": "Trial of aetiological agent"
      },
      {
        "id": 2,
        "text": "Before and after comparison studies"
      },
      {
        "id": 3,
        "text": "Preventive trials"
      },
      {
        "id": 4,
        "text": "Evaluation of health services"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Before and after </strong>comparison <strong>studies</strong> are a type of <strong>non-randomized trials</strong>.</p>\n<p>These are <strong>community trials</strong> and centre around <strong>comparing</strong> the <strong>incidence</strong> of disease before and after the introduction of a preventive measure. They are of <strong>two distinct types</strong>:</p>\n<ul>\n<li>Before and after comparison studies without control.</li>\n<li>Before and after comparison studies with control.</li>\n</ul>\n<p><strong>Non-randomized trials</strong> include:</p>\n<ul>\n<li>Before and after comparison studies.&nbsp;</li>\n<li>Uncontrolled trials.&nbsp;</li>\n<li>Natural experiments.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following should not be incinerated?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2 & 3"
      },
      {
        "id": 2,
        "text": "3, 4 & 5"
      },
      {
        "id": 3,
        "text": "1, 2 & 4"
      },
      {
        "id": 4,
        "text": "2 & 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Specimens of <strong>microorganisms</strong> and live or attenuated <strong>vaccines</strong> can be <strong>incinerated</strong>.</p>\n<p>Wastes that should not be incinerated are:</p>\n<ul>\n<li>Sharps</li>\n<li>Pressurized gas containers</li>\n<li>Reactive chemical waste</li>\n<li>Waste with heavy metals like mercury and cadmium</li>\n<li>PVC</li>\n<li>Photographic or radiographic waste</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What mode of prevention is disability prevention by appropriate treatment an example of?",
    "choices": [
      {
        "id": 1,
        "text": "Primordial prevention"
      },
      {
        "id": 2,
        "text": "Primary prevention"
      },
      {
        "id": 3,
        "text": "Secondary prevention"
      },
      {
        "id": 4,
        "text": "Tertiary prevention"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Disability prevention</strong> by appropriate treatment is an example of\u00a0<strong>secondary prevention</strong>. This is because disability has not occurred yet so correct treatment can stop it from developing.</p>\n<p>After the disability has set in, <strong>prevention</strong> of <strong>progression</strong> <strong>of disability</strong> from transitioning into a handicap is <strong>tertiary prevention</strong>. It is also called <strong>disability limitation</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a village of 5000 people, an outbreak of cholera led to 200 cases with 50 deaths. What is the case fatality rate?",
    "choices": [
      {
        "id": 1,
        "text": "1%"
      },
      {
        "id": 2,
        "text": "2.5%"
      },
      {
        "id": 3,
        "text": "10%"
      },
      {
        "id": 4,
        "text": "25%"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The case fatality rate is <strong>25%</strong>.</p>\n<p>Case fatality rate: (Total number of deaths due to a particular disease)/(Total number of cases due to the same disease)x 100</p>\n<p>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0: 50/200 * 100 = 25%</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is incorrect regarding Anganwadi workers?",
    "choices": [
      {
        "id": 1,
        "text": "One AWW serves a population of 5000"
      },
      {
        "id": 2,
        "text": "They are appointed under the ICDS scheme"
      },
      {
        "id": 3,
        "text": "They link the community with the health services"
      },
      {
        "id": 4,
        "text": "Their responsibilities include counsel for immunization, health education, and nutrition"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The norm is one Anganwadi worker (<strong>AWW</strong>) per <strong>400-800 population</strong>.</p>\n<p>Anganwadi workers (AWW) are allotted under the integrated child development services (<strong>ICDS</strong>). AWW are selected from the community they are to serve and act as <strong>links</strong> between the <strong>community</strong> and <strong>health services</strong>. They are mostly part-time workers.</p>\n<p>Responsibilities of an AWW include:</p>\n<ul>\n<li>Health checkups and growth chart maintenance</li>\n<li>Counsel women on birth preparedness, importance of safe delivery, <strong>immunization</strong> and contraception and prevention of common infections including STD and RTIs.</li>\n<li><strong>Nutrition</strong></li>\n<li><strong>Health education</strong></li>\n<li>Non-formal school education</li>\n<li>Referral services</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An outbreak of viral hepatitis A was reported from a town between June and September of a particular year. The peak of the outbreak occurred in July. What is this an example of?",
    "choices": [
      {
        "id": 1,
        "text": "Common source, multiple exposures"
      },
      {
        "id": 2,
        "text": "Common source, single exposure"
      },
      {
        "id": 3,
        "text": "Propogated epidemic, single exposure"
      },
      {
        "id": 4,
        "text": "Propogated epidemic, multiple exposure"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This outbreak of viral hepatitis A is an example&nbsp;of a <strong>common&nbsp;source, multiple exposure</strong>&nbsp;type of epidemic.</p>\n<p>The incubation period of hepatitis A is&nbsp;<strong>approximately 28 days</strong>&nbsp;(range 15 to 50 days).&nbsp;In this scenario, the cases of viral hepatitis A have occurred over a period from June to September (120 days) which is <strong>more than one&nbsp;incubation period </strong>of the disease. This is suggestive of multiple exposures from a <strong>common</strong> source.</p>\n<p>If the period of the outbreak falls <strong>within one incubation period</strong>, then the type of epidemic is <strong>common source</strong> ,<strong>single exposure or point source epidemic.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A shipyard worker is diagnosed with asbestosis. Which of the following is false about his condition?",
    "choices": [
      {
        "id": 1,
        "text": "The symptoms usually occur after 5-10 years of exposure"
      },
      {
        "id": 2,
        "text": "Sputum sample contains asbestos bodies"
      },
      {
        "id": 3,
        "text": "Peribronchial fibrosis is a characteristic finding"
      },
      {
        "id": 4,
        "text": "The most dangerous form of asbestos is chrysolite type"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Amphibole</strong> is the <strong>most dangerous</strong> form of asbestos. Chrysolite is a safer form of asbestos compared to amphibole.</p>\n<p>Asbestosis is a pneumoconiosis that occurs after <strong>5-10 years</strong> of <strong>exposure</strong> to asbestos. It progresses even after the removal of contact with asbestos. Asbestosis affects the <strong>basal part</strong> of the lung causing <strong>diffuse peribronchial fibrosis.</strong></p>\n<p>Sputum shows <strong>asbestos bodies</strong>,&nbsp;which are asbestos fibers coated with fibrin. The image given below shows asbestos bodies:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2db65260507346b7be8780ea770a4690x1279x896.JPEG"
    ]
  },
  {
    "text": "For what purpose were knowledge, attitude, and practice (KAP) studies first used in India?",
    "choices": [
      {
        "id": 1,
        "text": "HIV"
      },
      {
        "id": 2,
        "text": "Family planning"
      },
      {
        "id": 3,
        "text": "Diabetes mellitus"
      },
      {
        "id": 4,
        "text": "Malaria"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Knowledge, attitude and practice (<strong>KAP</strong>) <strong>studies</strong>&nbsp;were <strong>first used</strong> in India to study&nbsp;<strong>family planning</strong>.</p>\n<p>These studies help in evaluating the knowledge, attitude, and practices of a community. It also gives an <strong>educational diagnosis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A new drug was approved for the treatment of prostate cancer. It has been shown to prevent early deaths but not cure the cancer. What is expected to happen to the cases of prostate cancer over a period of time?",
    "choices": [
      {
        "id": 1,
        "text": "Increase in incidence, no change in prevalence"
      },
      {
        "id": 2,
        "text": "Decrease in incidence, increase in prevalence"
      },
      {
        "id": 3,
        "text": "Increase in incidence, decrease in prevalence"
      },
      {
        "id": 4,
        "text": "Increase in prevalence, no change in incidence"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>A new drug that prevents death yet does not cure the disease will cause an<strong> increase in prevalence</strong> but the <strong>incidence</strong> remains the <strong>same.</strong></p>\n<p>In the given scenario, the drug reduces early deaths but does not cure prostate cancer. Hence, there is a paradoxical increase in the prevalence while the incidence remains the same.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p class=\"ng-binding\">Prevalence depends on two factors, the incidence and duration of illness. If the population is stable and incidence and duration are unchanging, the relationship between incidence and prevalence can be expressed as:</p>\n<p>P = I X D</p>\n<p>(I - Incidence and D - Mean duration)</p>\n<p>This equation shows longer the duration&nbsp;of the disease, the greater the prevalence.</p>\n<p>Note:</p>\n<ul>\n<li>In chronic diseases like TB, prevalence will be&nbsp;<strong>higher</strong>&nbsp;than incidence.</li>\n<li>If a new treatment for a disease is effective, incidence does not change but&nbsp;<strong>prevalence decreases</strong>&nbsp;as the duration of disease decreases.</li>\n<li>If the treatment only prevents death but doesn&rsquo;t cure the disease, it may cause a&nbsp;<strong>paradoxical increase</strong>&nbsp;in prevalence.</li>\n</ul>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is Sullivan's index?",
    "choices": [
      {
        "id": 1,
        "text": "Life expectancy free from disability"
      },
      {
        "id": 2,
        "text": "Life adjusted with disease"
      },
      {
        "id": 3,
        "text": "Years of life lost due to premature death"
      },
      {
        "id": 4,
        "text": "Standard of living"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Sullivan's index</strong> measures<strong>&nbsp;</strong>life expectancy free from disability.&nbsp;Sullivan's index = Life expectancy - Years of disability</p>\n<p>It is the average number of years an individual is expected to live free of disability if the current pattern of mortality and disability continues to apply.</p>\n<p>It is also called <strong>disability-free life expectancy (DFLE)</strong> and <strong>active life expectancy.&nbsp;</strong>It doesn&rsquo;t take into account premature death.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not included in the Special Programme for Research and Training in Tropical Disease (TDR) strategy of the WHO?",
    "choices": [
      {
        "id": 1,
        "text": "Malaria"
      },
      {
        "id": 2,
        "text": "Lymphatic filariasis"
      },
      {
        "id": 3,
        "text": "Leishmaniasis"
      },
      {
        "id": 4,
        "text": "Tick-borne encephalitis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Tick-borne encephalitis\u00a0is not included in the <strong>Special Programme for Research and Training in Tropical Disease </strong>(TDR) strategy of the WHO. The diseases included under this programme are:</p>\n<ul>\n<li>Chagas disease</li>\n<li>Dengue</li>\n<li>Ebola</li>\n<li>Helminthiasis</li>\n<li><strong>Leishmaniasis</strong></li>\n<li>Leprosy</li>\n<li><strong>Lymphatic filariasis</strong></li>\n<li><strong>Malaria</strong></li>\n<li>Onchocerciasis</li>\n<li>Schistosomiasis</li>\n<li>Trypanosomiasis</li>\n<li>Tuberculosis</li>\n</ul>\n<p>The programme is sponsored by the WHO, UNICEF, UNDP, and World Bank.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is incorrect about systematic reviews?",
    "choices": [
      {
        "id": 1,
        "text": "Meta-analysis is always performed"
      },
      {
        "id": 2,
        "text": "Search for literature is compulsory"
      },
      {
        "id": 3,
        "text": "Critical appraisal is criteria based"
      },
      {
        "id": 4,
        "text": "Research question is always focused"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Meta-analysis is not always performed in systematic reviews.</p>\n<p>A <strong>systematic review</strong> is the process of <strong>locating and synthesizing</strong> the <strong>research</strong> on a particular question using organized, transparent, and replicable procedures. It ranks <strong>high</strong> in the hierarchy of <strong>evidence</strong> in medicine.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p>Steps of a systematic review:</p>\n</div>\n</div>\n<ul>\n<li>The research <strong>question</strong>&nbsp;is formulated. It is always <strong>focused</strong>.</li>\n<li>The <strong>literature </strong>on studies is always found and <strong>appraised</strong> after <strong>criteria of eligibility</strong> are <strong>established</strong>.</li>\n<li><strong>Meta-analysis</strong> is <strong>usually done</strong> in a systematic review for quantification but it is <strong>not compulsory</strong>.</li>\n</ul>\n<p>These steps are depicted in the diagram below.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e89ff57be7cc4eeb81732696a8307b88x1280x2148.JPEG"
    ]
  },
  {
    "text": "Specificity of a screening test is the ability of a test to detect:",
    "choices": [
      {
        "id": 1,
        "text": "True positives"
      },
      {
        "id": 2,
        "text": "False positives"
      },
      {
        "id": 3,
        "text": "True negatives"
      },
      {
        "id": 4,
        "text": "False negatives"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Specificity </strong>of a screening test is the ability of the test to identify correctly those who do not have the disease, i.e.&nbsp;<strong>true negative.</strong></p>\n<p><strong>Sensitivity&nbsp;</strong>of a screening test is the ability of the test to identify correctly those who have the disease,&nbsp;i.e.&nbsp;<strong>true positive.</strong></p>\n<p><strong>False-positive</strong> are those who don't have the disease but tested positive.</p>\n<p><strong>False-negative</strong> are those who have the disease but tested negative.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What are prevalence studies also known as?",
    "choices": [
      {
        "id": 1,
        "text": "Longitudinal studies"
      },
      {
        "id": 2,
        "text": "Cohort studies"
      },
      {
        "id": 3,
        "text": "Case-control studies"
      },
      {
        "id": 4,
        "text": "Cross-sectional studies"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Cross-sectional</strong> studies help in obtaining the&nbsp;<strong>prevalence</strong> of a disease. Hence, they are also known as <strong>prevalence studies.</strong></p>\n<p>Cross-sectional study is a type of <strong>observational study</strong> where a cross-section of a population is examined once at <strong>one point in time.&nbsp;</strong>It is more useful in studying&nbsp;<strong>chronic diseases </strong>than acute ones. They do not provide information on the natural history of disease or incidence and also do not establish the time sequence.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the provision of preventive, curative, and promotional health services to every individual called?",
    "choices": [
      {
        "id": 1,
        "text": "Appropriateness"
      },
      {
        "id": 2,
        "text": "Acceptability"
      },
      {
        "id": 3,
        "text": "Adequacy"
      },
      {
        "id": 4,
        "text": "Comprehensiveness"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Comprehensive health care</strong> as stated by the Bhore committee means giving <strong>integrated preventive, curative,</strong> and<strong> promotional</strong> health care to every individual, irrespective of their ability to pay.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "For which of the following purposes is age-specific death rates not used?",
    "choices": [
      {
        "id": 1,
        "text": "Identifying specific age groups at risk"
      },
      {
        "id": 2,
        "text": "Comparison for different causes within the same population"
      },
      {
        "id": 3,
        "text": "Comparison between different sexes in relation to accidents"
      },
      {
        "id": 4,
        "text": "Comparison between different age groups in relation to accidents"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Sex-specific death rates are used for the comparison between sexes and not age-specific death rates.</p>\n<p>Age-specific death rates are used for:</p>\n<ul>\n<li>Comparison for different causes within the same population.</li>\n<li>Comparison between different age groups in relation to a particular event.</li>\n<li>Identifying specific age groups at risk.</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A pathologist is examining the peripheral smear of a patient with anemia. Which of the following is incorrect about the epidemiology of this disease?",
    "choices": [
      {
        "id": 1,
        "text": "It is prevalent in areas with high frequency of malaria"
      },
      {
        "id": 2,
        "text": "It is an autosomal dominant disorder"
      },
      {
        "id": 3,
        "text": "Couples at risk can undergo prenatal testing and diagnosis"
      },
      {
        "id": 4,
        "text": "It manifests during the first year of life"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given peripheral smear shows sickling of RBCs, suggestive of <strong>sickle cell anemia.</strong> It is an <strong>autosomal recessive</strong> disorder.\u00a0</p>\n<p>The prevalence is high among Africans. This disorder usually has its onset during the first year of life. Couples at risk can opt for prenatal testing and diagnosis as well.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bab8781846044f4a8f3b90372cbb387f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a silent epidemic?",
    "choices": [
      {
        "id": 1,
        "text": "Bipolar disorders"
      },
      {
        "id": 2,
        "text": "Manic depressive disorder"
      },
      {
        "id": 3,
        "text": "Alzheimer\u2019s disease"
      },
      {
        "id": 4,
        "text": "Generalised anxiety disorder"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Alzheimer&rsquo;s disease</strong> is referred to as the <strong>silent epidemic </strong>of the century.</p>\n<p>Nearly 50 million people globally are living with this disease. Since it strikes so often, so arbitrarily, and with such little warning, many have dubbed it the silent epidemic.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following toxins acts by inhibiting protein synthesis?",
    "choices": [
      {
        "id": 1,
        "text": "Cholera toxin"
      },
      {
        "id": 2,
        "text": "Shiga toxin"
      },
      {
        "id": 3,
        "text": "Pertussis toxin"
      },
      {
        "id": 4,
        "text": "Labile toxin of ETEC"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Shiga toxin\u00a0</strong>acts by <strong>inhibiting protein synthesis</strong>.</p>\n<p>Shiga toxin or <strong>verotoxin</strong> is an exotoxin produced by <em>Shigella</em> species. It consists of two subunits A and B. The<strong> B subunit </strong>binds to <strong>globotriaosylceramide</strong> receptors on the target cell, and then, the A subunit gets internalized. The <strong>A subunit</strong> leads to <strong>inhibition</strong> of <strong>60S</strong> ribosome, leading to shut down of protein synthesis. Its site of action is in the endothelial cells of small blood vessels of GIT.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Following an outbreak of a disease, you are asked to calculate the secondary attack rate (SAR). What is the denominator you would use?",
    "choices": [
      {
        "id": 1,
        "text": "All people having history of contact with a case"
      },
      {
        "id": 2,
        "text": "All people susceptible in the entire area"
      },
      {
        "id": 3,
        "text": "All the people in contact with the primary case"
      },
      {
        "id": 4,
        "text": "All the close or exposed contacts those are susceptible"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>denominator</strong>&nbsp;used for calculating <strong>SAR</strong> is all&nbsp;the close or exposed<strong> contacts</strong> that are<strong> susceptible</strong>.</p>\n<p>The secondary attack rate is defined as the <strong>probability</strong> that <strong>infection</strong> will occur among <strong>susceptible</strong> persons following <strong>contact</strong> with an infectious person within the incubation period.</p>\n<p>It is calculated by the formula:</p>\n<p>Secondary attack rate (SAR) = (Number of exposed or susceptible persons developing the disease within the incubation period x 100)/(Total number of close or exposed contacts that are susceptible)</p>\n<p><strong>Primary cases</strong> are usually <strong>excluded</strong> from the numerator and denominator.</p>\n<p>Secondary attack rate measures the <strong>communicability</strong> of the disease.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following factors in a study will cause Berkesonian bias?",
    "choices": [
      {
        "id": 1,
        "text": "Interviewer asking leading questions to the subjects"
      },
      {
        "id": 2,
        "text": "Different rates of hospital admission of different diseases"
      },
      {
        "id": 3,
        "text": "Researcher's belief in the treatment changing the outcome of the study"
      },
      {
        "id": 4,
        "text": "Cases that are lost to follow-up"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Berkesonian</strong> bias occurs due to the different rates of <strong>hospital</strong> admission of people with different diseases. It is a type of <strong>selection bias&nbsp;</strong>termed after <strong> Joseph Berkeson</strong> who described it.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "One community health center (CHC) covers a population of:",
    "choices": [
      {
        "id": 1,
        "text": "30,000 to 50,000"
      },
      {
        "id": 2,
        "text": "40,000 to 60,000"
      },
      {
        "id": 3,
        "text": "80,000 to 1,20,000"
      },
      {
        "id": 4,
        "text": "1,00,000 to 2,00,000"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Each community (CHC) covers a population of <strong>80,000-1,20,000.</strong></p>\n<p>Services provided by CHC:</p>\n<ul>\n<li>Care of routine and emergency cases in medicine and surgery</li>\n<li>Maternal, newborn, and child health</li>\n<li>Family planning</li>\n<li>All the functions of national health programmes</li>\n<li>Physical medicine and rehabilitation</li>\n<li>Oral health</li>\n<li>School and adolescent health services</li>\n<li>Blood storage facility</li>\n<li>Diagnostic services</li>\n<li>Referral services</li>\n<li>Maternal death review (MDR)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following methods of management is the benefit measured in natural units?",
    "choices": [
      {
        "id": 1,
        "text": "Cost minimization analysis"
      },
      {
        "id": 2,
        "text": "Cost-benefit analysis"
      },
      {
        "id": 3,
        "text": "Cost accounting"
      },
      {
        "id": 4,
        "text": "Cost-effective analysis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In cost-effective analysis (<strong>CEA</strong>),&nbsp;<strong>benefits </strong>are measured in <strong>natural units&nbsp;</strong>of the outcomes of the programs.</p>\n<table style=\"height: 212px; width: 510.34375px;\">\n<tbody>\n<tr style=\"height: 35.0938px;\">\n<td style=\"width: 131px; height: 35.0938px;\">&nbsp;</td>\n<td style=\"width: 186px; height: 35.0938px;\"><strong>Cost-effective analysis</strong></td>\n<td style=\"width: 170.34375px; height: 35.0938px;\"><strong>Cost-benefit analysis</strong></td>\n</tr>\n<tr style=\"height: 35.0938px;\">\n<td style=\"width: 131px; height: 35.0938px;\">Cost measured in</td>\n<td style=\"width: 186px; height: 35.0938px;\">Health units</td>\n<td style=\"width: 170.34375px; height: 35.0938px;\">Monetary units</td>\n</tr>\n<tr style=\"height: 59px;\">\n<td style=\"width: 131px; height: 59px;\">Outcome measured in</td>\n<td style=\"width: 186px; height: 59px;\">\n<p>Natural (health) units like life-years gained, cases prevented, etc.</p>\n<p>Most comprehensive indicator -&nbsp;quality-adjusted life years (<strong>QALYs</strong>)</p>\n</td>\n<td style=\"width: 170.34375px; height: 59px;\">Monetary gain&nbsp;</td>\n</tr>\n<tr style=\"height: 59px;\">\n<td style=\"width: 131px; height: 59px;\">Uses</td>\n<td style=\"width: 186px; height: 59px;\">\n<p>Evaluation of activities under a programme and comparing clinical strategies to deliver the same</p>\n</td>\n<td style=\"width: 170.34375px; height: 59px;\">At executive level of government (eg, budgeting, etc.)</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are true about socialized medicine except:",
    "choices": [
      {
        "id": 1,
        "text": "Ensures social equity and universal coverage"
      },
      {
        "id": 2,
        "text": "Reduces competition among physicians"
      },
      {
        "id": 3,
        "text": "Use state funds for free medicine"
      },
      {
        "id": 4,
        "text": "Promotes utilization of health facilities"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Increasing the\u00a0utilization\u00a0of health services<strong>\u00a0</strong>is not a component of <strong>socialized medicine.</strong></p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p>It refers to the provision of medical service through the <strong>state funds</strong>; however, it is operated and regulated by professional groups.\u00a0Russia was the first to completely socialize medicine.</p>\n<p>It<strong>\u00a0eliminates competition</strong> among physicians as well as ensures <strong>social equity </strong>and\u00a0<strong>universal health coverage</strong>.</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Samuel Hahnemann is referred to as the founding father of:",
    "choices": [
      {
        "id": 1,
        "text": "Ayurveda"
      },
      {
        "id": 2,
        "text": "Homeopathy"
      },
      {
        "id": 3,
        "text": "Unani"
      },
      {
        "id": 4,
        "text": "Naturopathy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Samuel Hahnemann</strong>&nbsp;is the founding father of <strong>homeopathy</strong>. He was German.</p>\n<p>There are 3 principles in homeopathy:&nbsp;</p>\n<ol>\n<li><strong>Similia similibus curentur </strong>or human drug pathogenicity study:<strong>&nbsp;</strong>Treatment of disease using small amounts of drug that, in healthy people, would produce similar symptoms of the disease itself.</li>\n<li>A <strong>single medicine</strong>&nbsp;is used for the treatment.</li>\n<li>The&nbsp;<strong>minimum dose</strong>&nbsp;of the drug should be used.</li>\n</ol>\n<table>\n<tbody>\n<tr>\n<td width=\"169\">\n<p><strong>Scientist/ Doctor</strong></p>\n</td>\n<td width=\"469\">\n<p><strong>Achievements</strong>&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td width=\"169\">\n<p>Susruta</p>\n</td>\n<td width=\"469\">\n<p>Father of Indian Surgery</p>\n<p>Father of Plastic and Cosmetic Surgery</p>\n<p>Author of &ldquo;Susruta Samhita&rdquo;&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td width=\"169\">\n<p>Hippocrates</p>\n</td>\n<td width=\"469\">\n<p>First True Epidemiologist</p>\n<p>Father of Medicine</p>\n<p>Author of &ldquo;Airs, Water and Place&rdquo;&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td width=\"169\">\n<p>Charaka</p>\n</td>\n<td width=\"469\">\n<p>Father of Indian Medicine</p>\n<p>Author of &ldquo;Charaka Samhita&rdquo;&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td width=\"169\">\n<p>Avicenna</p>\n</td>\n<td width=\"469\">\n<p>Author of &ldquo;Canon of Medicine&rdquo; and &ldquo;The Book on Healing&rdquo;&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td width=\"169\">\n<p>Andreas Vesalius</p>\n</td>\n<td width=\"469\">\n<p>Father of Modern Anatomy</p>\n<p>Author of &ldquo;Fabrica&rdquo;&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td width=\"169\">\n<p>Hammurabi</p>\n</td>\n<td width=\"469\">\n<p>Author of &ldquo;Babylonian Code of Hammurabi&rdquo;</p>\n</td>\n</tr>\n<tr>\n<td width=\"169\">\n<p>John Snow</p>\n</td>\n<td width=\"469\">Father of Epidemiology\n<p>&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td width=\"169\">\n<p>Louis Pasteur Robert Koch / Ferdinand Cohn</p>\n</td>\n<td width=\"469\">\n<p>Father of Bacteriology&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td width=\"169\">\n<p>Samuel Hahnemann</p>\n<p>&nbsp;</p>\n</td>\n<td width=\"469\">\n<p>Father of Homeopathy</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/30ded3c89d624b9faaa4ac40111e5ebfx1280x643.PNG"
    ]
  },
  {
    "text": "While studying a disease, you find that it affects both humans and lower vertebrates and can be transmitted in either direction. How would you classify this disease?",
    "choices": [
      {
        "id": 1,
        "text": "Anthropozoonoses"
      },
      {
        "id": 2,
        "text": "Zooanthroponoses"
      },
      {
        "id": 3,
        "text": "Amphixenosis"
      },
      {
        "id": 4,
        "text": "Epizootic"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A disease that <strong>affects</strong> both <strong>humans</strong> and<strong> lower vertebrates</strong> and which can be <strong>transmitted</strong> in <strong>either direction</strong> is classified as <strong>amphixenosis</strong>. E.g,&nbsp;<em>Trypanosoma cruzi</em> and <em>Schistosoma japonicum</em>.</p>\n<p>It is a type of <strong>zoonoses</strong>. Zoonoses are diseases that are <strong>transmitted</strong> between <strong>vertebrate animals</strong> and <strong>humans</strong>.</p>\n<p>Other types of zoonoses include:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>\n<ul>\n<li>Anthropo<strong>zoonoses&nbsp;</strong>-&nbsp;infections that are transmitted to man <strong>from vertebrates</strong>. E.g., Rabies, plague etc.</li>\n<li>Zoo<strong>anthroponoses&nbsp;</strong>-&nbsp;infections that are transmitted to vertebrates <strong>from humans.</strong>&nbsp;E.g., Human tuberculosis in cattle.</li>\n</ul>\n<p><strong>Epizootic</strong> disease refers to an <strong>outbreak or epidemic</strong> of a disease in an <strong>animal population</strong>, often with the implication that it may also affect human populations. <strong>Enzootic</strong> disease is an <strong>endemic</strong> occurring in animals.</p>\n<p>Note:<strong> Epornithic</strong> diseases are those diseases which are epidemic in <strong>bird</strong> populations. E.g., Psittacosis.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "While collecting surveillance data for disease X, you find that the incidence of the disease is zero in your region. Which of the following statements best describes this scenario?",
    "choices": [
      {
        "id": 1,
        "text": "Disease is eliminated from the region."
      },
      {
        "id": 2,
        "text": "Disease is well controlled in the region."
      },
      {
        "id": 3,
        "text": "Disease is eradicated from the region."
      },
      {
        "id": 4,
        "text": "Disease shows iceberg phenomenon in the region."
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><span class=\"custom help\">In the given scenario, as the disease has<strong> zero incidence</strong>, we can say the disease has been <strong>eliminated</strong> from the region.</span></p>\n<p><span class=\"custom help\"><strong>Elimination&nbsp;</strong>is a&nbsp;<strong>reduction</strong>&nbsp;in the number of&nbsp;<strong>new cases</strong>&nbsp;of an infectious disease <strong>to</strong>&nbsp;<strong>zero</strong>&nbsp;(or a very low defined target rate) in a defined geographical area as a result of deliberate efforts. Continued measures to prevent re-establishment of transmission are required.</span></p>\n<p><strong>Eradication&nbsp;</strong>is a complete and&nbsp;<strong>permanent worldwide</strong>&nbsp;<strong>reduction</strong>&nbsp;to&nbsp;<strong>zero new cases</strong>&nbsp;of an infectious disease through deliberate efforts. No further control measures are required.</p>\n<p><strong>Control</strong>&nbsp;aims at&nbsp;<strong>decreasing</strong>&nbsp;the&nbsp;<strong>incidence</strong>,<strong>&nbsp;duration</strong>&nbsp;and&nbsp;<strong>transmission</strong>&nbsp;of the disease. It also aims at decreasing the physical and psychological&nbsp;<strong>complications</strong>&nbsp;of a disease.</p>\n<p>The&nbsp;<strong>iceberg phenomenon </strong>of disease&nbsp;is related to the spectrum of disease.&nbsp;The&nbsp;<strong>submerged portion </strong>of the iceberg<strong>&nbsp;</strong>represents the hidden mass of diseases like&nbsp;<strong>asymptomatic</strong>, <strong>latent</strong>,&nbsp;and<strong>&nbsp;undiagnosed cases</strong>.<strong>&nbsp;</strong>The&nbsp;<strong>clinical or diagnosed cases</strong>&nbsp;are represented by the&nbsp;<strong>floating tip</strong>&nbsp;of the iceberg and not the submerged portion. As disease incidence is zero here, there are no cases to form the iceberg.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A district in Andhra Pradesh reported severe drought. Which of the following vitamin deficiencies would you expect to see in this population?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin A deficiency"
      },
      {
        "id": 2,
        "text": "Vitamin B deficiency"
      },
      {
        "id": 3,
        "text": "Vitamin C deficiency"
      },
      {
        "id": 4,
        "text": "Vitamin D deficiency"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Vitamin A deficiency</strong>&nbsp;is the most common deficiency in areas of <strong>famines</strong> and <strong>droughts.</strong> It&nbsp;leads to&nbsp;xerophthalmia and blindness.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young woman with a family history of beta-thalassemia is planning to marry her first cousin. Which of the following will you recommend for this woman?",
    "choices": [
      {
        "id": 1,
        "text": "Retrospective genetic counseling"
      },
      {
        "id": 2,
        "text": "Amniocentesis"
      },
      {
        "id": 3,
        "text": "Positive eugenics"
      },
      {
        "id": 4,
        "text": "Prospective genetic counseling"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This young woman must be advised to undergo\u00a0<strong>p</strong><strong>rospective counseling.</strong></p>\n<p>It refers to the process explaining to heterozygous individuals the risk of having affected children if they marry another heterozygous individual. It is performed <strong>prior to conception</strong>.</p>\n<p><strong>Retrospective</strong> counseling is performed after the genetic disorder has <strong>already occurred</strong> in the first child.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not included in the format of the death certificate recommended by the WHO?",
    "choices": [
      {
        "id": 1,
        "text": "Condition directly leading to death"
      },
      {
        "id": 2,
        "text": "Antecedent causes"
      },
      {
        "id": 3,
        "text": "Other significant conditions contributing to death"
      },
      {
        "id": 4,
        "text": "Age of person at the time of death"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Age at the time of death is not included in the WHO format for a death certificate.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Among the following, which measurement can be used as a yardstick for the assessment of standards of therapy?",
    "choices": [
      {
        "id": 1,
        "text": "Prevalence"
      },
      {
        "id": 2,
        "text": "Case fatality rate"
      },
      {
        "id": 3,
        "text": "Standardized mortality rate"
      },
      {
        "id": 4,
        "text": "Survival rate"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>survival rate</strong>\u00a0can be used as a <strong>yardstick</strong> for<strong>\u00a0</strong>the<strong> assessment</strong> of <strong>standards</strong> of <strong>therapy</strong>.</p>\n<p>It is used as a method of describing prognosis and is widely employed in <strong>cancer studies.</strong></p>\n<p>The survival rate is given by the following formula.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/74f42da324dd4feb9e06a6f1ca981632x1280x274.JPEG"
    ]
  },
  {
    "text": "What is currently the most widely used illicit substance in the world?",
    "choices": [
      {
        "id": 1,
        "text": "Cocaine"
      },
      {
        "id": 2,
        "text": "Amphetamines"
      },
      {
        "id": 3,
        "text": "Heroin"
      },
      {
        "id": 4,
        "text": "Cannabis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Cannabis</strong> is the most widely used illicit substance in the world.</p>\n<p>Cannabis is obtained from <em>Cannabis sativa</em>, <em>C. indica</em>, and <em>C. americana</em>. It is colloquially called <strong>marijuana</strong>. Other forms of this drug are <strong>charas </strong>or<strong> hashish </strong>and<strong> bhang.</strong></p>\n<p>The image given below shows the cannabis plant.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8b49afc606cf4a1889f85ceffae0db94x800x600.JPEG"
    ]
  },
  {
    "text": "The NIDM is involved in the mitigation and management of disasters in India. Who is the president of this institution?",
    "choices": [
      {
        "id": 1,
        "text": "Prime Minister of India"
      },
      {
        "id": 2,
        "text": "President of India"
      },
      {
        "id": 3,
        "text": "Union Home Minister"
      },
      {
        "id": 4,
        "text": "Health Minister of India"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The National Institute of Disaster Management <strong>(NIDM)</strong> is under the Ministry of Home Affairs of India. Its<strong> president</strong> is the<strong> Union Home Minister.</strong></p>\n<p>National Institute of Disaster Management is a premier institute for training and capacity development programs for managing natural disasters in India, on a national as well as regional basis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a population of 9000 people, 2100 are alcoholics. 70 alcoholics and 23 non-alcoholics developed cirrhosis. What is the attributable risk?",
    "choices": [
      {
        "id": 1,
        "text": "40%"
      },
      {
        "id": 2,
        "text": "60%"
      },
      {
        "id": 3,
        "text": "70%"
      },
      {
        "id": 4,
        "text": "90%"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In the given scenario, the attributable risk (<strong>AR</strong>) is <strong>90%</strong>.</p>\n<p>Number of people exposed (to alcohol) = 2100\u00a0<br />Number of people not exposed (to alcohol) = 6900\u00a0</p>\n<p>Incidence of cirrhosis among exposed = 70/2100 (I<strong><sub>Exposed</sub></strong>)<br />Incidence of cirrhosis among non-exposed = 23/6900\u00a0(I<strong><sub>Non-exposed</sub></strong>)</p>\n<p>Attributable risk (AR)\u00a0= <strong>[</strong> ( I<strong><sub>Exposed</sub></strong> - I<sub>Non-exposed)</sub>\u00a0<strong>/</strong>\u00a0I<strong><sub>Exposed\u00a0</sub>]</strong>*100<br />= <strong>[</strong> (70/2100 - 23/6900) <strong>/</strong> (70/2100)<strong>]</strong> *100<br />=\u00a0<strong>[\u00a0</strong>9 / 10\u00a0<strong>]\u00a0</strong>*100<br />= <strong>90</strong></p>\n<p>Thus, the attributable risk (AR) is <strong>90%</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What are the minimum and maximum values established for the calculation of the life expectancy index in HDI?",
    "choices": [
      {
        "id": 1,
        "text": "0 years and 65 years"
      },
      {
        "id": 2,
        "text": "20 years and 85 years"
      },
      {
        "id": 3,
        "text": "25 years and 75 years"
      },
      {
        "id": 4,
        "text": "0 years and 100 years"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>minimum</strong> value established for the calculation of the<strong> life expectancy index</strong> in HDI is&nbsp;<strong>20 years</strong> and the <strong>maximum</strong> is<strong> 85 years</strong>.</p>\n<p>These minimum and maximum values are used to calculate the dimension indices in HDI and are called <strong>goalposts</strong>.</p>\n<p>Each dimension index is calculated using the formula:</p>\n<p>Dimension Index = (Actual Value - Minimum Value)/(Maximum Value - Minimum Value). &nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A new drug for multiple sclerosis is undergoing clinical trials where its therapeutic efficacy is being confirmed and adverse reactions are being monitored. Which of the following phases is the drug most likely in?",
    "choices": [
      {
        "id": 1,
        "text": "Phase I"
      },
      {
        "id": 2,
        "text": "Phase II"
      },
      {
        "id": 3,
        "text": "Phase III"
      },
      {
        "id": 4,
        "text": "Phase IV"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The<strong> confirmation </strong>of therapeutic<strong> efficacy</strong> and <strong>monitoring </strong>of<strong> adverse reactions</strong> of a new drug happens in <strong>phase III</strong> of the clinical trial.</p>\n<p>Purpose of phase&nbsp;III:&nbsp;</p>\n<ul>\n<li><strong>Confirmation</strong> of the <strong>effectiveness</strong> of the drug in patients with the target disease</li>\n<li><strong>Monitoring</strong> of <strong>adverse reactions</strong>&nbsp;</li>\n</ul>\n<p>Phase&nbsp;II involves therapeutic<strong> exploration</strong> which is the <strong>evaluation</strong> of the <strong>efficacy</strong> of the drug and <strong>dose-ranging</strong> (determination of the optimum tolerated dose).&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true about lead poisoning?",
    "choices": [
      {
        "id": 1,
        "text": "Signs and symptoms occur when blood lead levels >70mcg/dL"
      },
      {
        "id": 2,
        "text": "It inhibits ALA synthase enzyme"
      },
      {
        "id": 3,
        "text": "Wrist drop is the earliest sign"
      },
      {
        "id": 4,
        "text": "Lead competes with magnesium ions"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The signs and symptoms of lead poisoning occur only when the blood lead levels <strong>exceed 70mcg/dL,</strong> which is known as the <strong>threshold phenomenon.</strong></p>\n<p>Lead poisoning is also known as <strong>plumbism</strong>/ <strong>Saturnism</strong>/ <strong>painter's</strong> <strong>colic</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old man is found to be positive for SARS-CoV-2. On contact tracing, 30 people have been identified as close contacts but none of them shows any symptoms or signs. What is the time duration for which they must be quarantined?",
    "choices": [
      {
        "id": 1,
        "text": "Maximum period of communicability"
      },
      {
        "id": 2,
        "text": "Maximum incubation period"
      },
      {
        "id": 3,
        "text": "Average period of communicability"
      },
      {
        "id": 4,
        "text": "Average incubation period"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Quarantine is the <strong>limitation</strong> in freedom of <strong>movement</strong> of <strong>healthy contacts</strong> of cases, who have been exposed for a period that lasts as long as the <strong>maximal incubation period </strong>of the disease.</p>\n<p>It is a <strong>primary level of prevention</strong> and falls under specific protection measures. The various <strong>types</strong> of quarantine are:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"2\"><strong>Absolute </strong>- Complete limitation of movement</li>\n<li style=\"font-weight: 400;\" aria-level=\"2\"><strong>Modified </strong>- Selective partial limitation of movement</li>\n<li style=\"font-weight: 400;\" aria-level=\"2\"><strong>Segregation </strong>-&nbsp;Observation of a group of persons in a population after separation</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Community Medicine Test Iii';
        const quizFilename = 'community-medicine-test-iii-31cd585e.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>