<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>39 Endometriosis & Adenomyosis - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Obstetrics & Gynecology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">14</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>A 40 year old woman with three children who has been using OCPs for 5 years is a current smoker, has a BMI of 27, menarche at 13, and has a family history of endometriosis, is concerned about her risk of developing the condition. Which best describes her endometriosis risk profile?</p>",
    "choices": [
      {
        "id": 1,
        "text": "High risk due to family history"
      },
      {
        "id": 2,
        "text": "High risk due to increased age"
      },
      {
        "id": 3,
        "text": "Low risk due to multiple protective factors"
      },
      {
        "id": 4,
        "text": "Increased risk due to BMI"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Low risk due to multiple protective factors</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>The patient has several protective factors against endometriosis, such as:</p>\n\n<ul>\n\t<li>Multiparity (three children)</li>\n\t<li>Current use of oral contraceptives</li>\n\t<li>Smoking (though smoking has other health risks).</li>\n</ul>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:NaN\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Risk Factors</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Protective Factors</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td rowspan=\"4\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Nulliparous (Increased estrogen)</li>\n\t\t\t\t<li>Early Menarche</li>\n\t\t\t\t<li>Late Menopause</li>\n\t\t\t\t<li>Low BMI</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td rowspan=\"4\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Multiparity</li>\n\t\t\t\t<li>OCP Use</li>\n\t\t\t\t<li>Smoking</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p><strong>High risk due to family history (Option A):\u00a0</strong>Family history alone doesn't outweigh her multiple protective factors.</p>\n\n<p>\u00a0</p>\n\n<p><strong>High risk due to increased age (Option B):\u00a0</strong>Age is not a primary risk factor for developing endometriosis.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Increased risk due to <span class=\"customMeta\" data-dictid=\"765e9149d01692777183c3989c6590\">BMI</span> (Option D):\u00a0</strong>High <span class=\"customMeta\" data-dictid=\"765e9149d01692777183c3989c6590\">BMI</span> has no risk associated with endometriosis.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/mxzOgzHT5oC9j0OhoQTh1746253615.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/MSfc0pSrjQbhuUKR39Ld1746253704.mp3"
  },
  {
    "text": "<p>A 28 year old woman presents with endometriosis lesions on her abdominal surgical scars following a cesarean section. Which theory of endometriosis development best explains this presentation?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Sampson's theory of Implantation"
      },
      {
        "id": 2,
        "text": "Halban\u2019s theory"
      },
      {
        "id": 3,
        "text": "Ivanoff\u2019s theory"
      },
      {
        "id": 4,
        "text": "Direct implantation"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) Direct implantation</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>Direct <span class=\"customMeta\" data-dictid=\"52007706a216927771899e36747712\">implantation</span> theory is the best explanation for this case. This theory proposes that endometrial cells can be inadvertently transplanted to other sites during <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> procedures, such as <span class=\"customMeta\" data-dictid=\"3c6bfcae8c1692777184ceb5d2efc3\">cesarean</span> sections.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Sampson's theory (retrograde menstruation) (Option A)</strong>explains <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">endometriosis</span> in the <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> cavity, such as on the ovaries, <span class=\"customMeta\" data-dictid=\"fba459ae6d1692777196f4374e9ac1\">pouch</span> of Douglas, and <span class=\"customMeta\" data-dictid=\"c092ff970b1692777201209bd8a019\">uterosacral</span> ligaments, and not in <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> scars.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Halban's theory of <span class=\"customMeta\" data-dictid=\"4fb6bd90f016927771918d4a2993ed\">lymphatic</span> spread (Option B)</strong> is used to explain distant sites of endometriosis, particularly in the umbilicus, but not <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> <span class=\"customMeta\" data-dictid=\"561a199cce1692777198225706434c\">scar</span> endometriosis.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Ivanoff's theory of coelomic <span class=\"customMeta\" data-dictid=\"cb4dfcbab11692777192d282b3be7a\">metaplasia</span> (Option C)</strong> is often used to explain <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">endometriosis</span> in unusual locations like the lungs, where peritoneal cells transform into endometrial-like tissue.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/80dWdBFgrYGSCTamC52f1746253977.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/L4t6fhDWGhsIK6adXm8X1746254096.mp3"
  },
  {
    "text": "<p>A 32 year old woman presents with chronic pelvic pain, dysmenorrhea, and dyspareunia. During laparoscopy, the gynaecologist observes endometriotic lesions in multiple locations. Which of the following sites is least likely to be affected by endometriosis in this patient?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Ovaries"
      },
      {
        "id": 2,
        "text": "Pouch of Douglas"
      },
      {
        "id": 3,
        "text": "Uterosacral ligaments"
      },
      {
        "id": 4,
        "text": "Spleen"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) <span class=\"customMeta\" data-dictid=\"6a4861c8d71692777199aeb1d55c85\">Spleen</span> </strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong>Spleen is the <strong>least likely site</strong> to be affected by <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">endometriosis</span> among the options.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Various sites where <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">endometriosis</span> can occur:</strong></p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:624px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Pelvic sites (Most common)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Ovaries (Commonest)</li>\n\t\t\t\t<li>Fallopian tubes</li>\n\t\t\t\t<li>Uterosacral ligaments</li>\n\t\t\t\t<li>Pouch of Douglas (rectouterine pouch)</li>\n\t\t\t\t<li>Pelvic peritoneum</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Other <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> organs</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Bladder and Ureters</li>\n\t\t\t\t<li>Rectum and <span class=\"customMeta\" data-dictid=\"9008060dc21692777198e329f5be75\">sigmoid</span> colon</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Abdominal sites</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Appendix</li>\n\t\t\t\t<li>Intestine</li>\n\t\t\t\t<li>Umbilicus</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Surgical scars</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Cesarean section scars</li>\n\t\t\t\t<li>Episiotomy scars</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Thoracic sites (rare) </strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Lungs</li>\n\t\t\t\t<li>Diaphragm</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Extrapelvic sites (very rare)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Spine</li>\n\t\t\t\t<li>Eyes</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p><strong>Vicarious <span class=\"customMeta\" data-dictid=\"af76284ec71692777192c7c84b5dad\">menstruation</span> in endometriosis</strong> refers to cyclical <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> from <span class=\"customMeta\" data-dictid=\"a7161dc3681692777187cc0e5d57de\">extragenital</span> sites, such as the nose or lungs, that coincides with the <span class=\"customMeta\" data-dictid=\"3a03cad6c616927771925038b55989\">menstrual</span> cycle due to <span class=\"customMeta\" data-dictid=\"0decefe0901692777186f7f3f89b2a\">ectopic</span> endometrial tissue.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/pLWfSvJLGOcxJdWmA9Yb1746254175.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/Iz8IIVdXpkgmMoUUZdua1746254248.mp3"
  },
  {
    "text": "<p>A 35 year old woman undergoes laparoscopy for chronic pelvic pain and infertility. The surgeon observes multiple dark brown lesions on the ovaries and pelvic peritoneum. A biopsy is taken and sent for histopathological examination. Which of the following histopathological findings is most consistent with the diagnosis of endometriosis in this patient?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Presence of endometrial glands and stroma without hemosiderin-laden macrophages"
      },
      {
        "id": 2,
        "text": "Presence of endometrial glands and stroma with hemosiderin-laden macrophages"
      },
      {
        "id": 3,
        "text": "Presence of only endometrial glands without stroma"
      },
      {
        "id": 4,
        "text": "Presence of only hemosiderin-laden macrophages without glands or stroma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Presence of endometrial glands and <span class=\"customMeta\" data-dictid=\"c077aecdcd1692777199503c836d9c\">stroma</span> with hemosiderin-laden macrophages</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li>The hallmark histopathological finding in <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">endometriosis</span> is the presence of endometrial glands and <span class=\"customMeta\" data-dictid=\"c077aecdcd1692777199503c836d9c\">stroma</span> outside the uterus.</li>\n\t<li>In <span class=\"customMeta\" data-dictid=\"0decefe0901692777186f7f3f89b2a\">ectopic</span> endometrial implants, hemosiderin-laden macrophages result from <span class=\"customMeta\" data-dictid=\"1d84248e9f16927771850f8b75c26a\">cyclic</span> <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> and <span class=\"customMeta\" data-dictid=\"248111ded81692777197946454db52\">red blood cell</span> breakdown.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Diagnosis Guidelines:</strong></p>\n\n<ul>\n\t<li>Current guidelines do not require <span class=\"customMeta\" data-dictid=\"a77eb309ca16927771897b99ead59f\">histologic</span> confirmation to diagnose endometriosis, often based on clinical presentation and <span class=\"customMeta\" data-dictid=\"f446058fd81692777191e035c08229\">macroscopic</span> findings during laparoscopy.</li>\n\t<li><strong>Macroscopic Findings: </strong>\n\t<ul>\n\t\t<li>Powder-burn or Gunshot Lesions: Dark, blackish-bluish puckered lesions on the peritoneal surface.</li>\n\t\t<li>Clear Vesicles: Small, blister-like lesions on the ovarian surface or peritoneum.</li>\n\t\t<li>Red Polypoidal Lesions: Red, polyp-like, vascularised lesions.</li>\n\t\t<li>White Scarred Lesions: White, scar-like areas with <span class=\"customMeta\" data-dictid=\"21e2d5a70616927772021fcdec0ca9\">fibrosis</span> and few blood vessels.</li>\n\t\t<li>Yellow-brown Peritoneal Discoloration: Indicates <span class=\"customMeta\" data-dictid=\"244b573f9d169277718887b033ba57\">hemosiderin</span> deposition and chronic endometriosis.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<ul>\n\t<li><strong>Correlation of Gross Appearance with <span class=\"customMeta\" data-dictid=\"79067cb33316927771926965c3c0b5\">Microscopic</span> Findings</strong>\n\n\t<ul>\n\t\t<li>Red Lesions: Vascularized, indicating active endometriotic tissue.</li>\n\t\t<li>White Lesions: <span class=\"customMeta\" data-dictid=\"21e2d5a70616927772021fcdec0ca9\">Fibrosis</span> with few vessels, suggesting chronic or scarred tissue.</li>\n\t</ul>\n\t</li>\n\t<li><strong>Histologic Examination</strong>\n\t<ul>\n\t\t<li>Hemosiderin Deposition: Common in <span class=\"customMeta\" data-dictid=\"a77eb309ca16927771897b99ead59f\">histologic</span> samples, indicating prior <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> within the lesion.</li>\n\t\t<li>Histologic Diagnosis Criteria: The presence of both endometrial glands and <span class=\"customMeta\" data-dictid=\"c077aecdcd1692777199503c836d9c\">stroma</span> is required to confirm endometriosis.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>Endometrial glands and <span class=\"customMeta\" data-dictid=\"c077aecdcd1692777199503c836d9c\">stroma</span> are key, but long-standing lesions typically include hemosiderin-laden macrophages<strong> (Option A)</strong>.</p>\n\n<p>\u00a0</p>\n\n<p>Endometriosis diagnosis requires both <span class=\"customMeta\" data-dictid=\"c2f9d01ba91692777188d264244b6a\">glandular</span> and stromal components, not glands alone <strong>(Option C)</strong>.</p>\n\n<p>\u00a0</p>\n\n<p>Hemosiderin-laden macrophages without endometrial glands and <span class=\"customMeta\" data-dictid=\"c077aecdcd1692777199503c836d9c\">stroma</span> are not specific to <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">endometriosis</span> and can occur in other conditions with chronic <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> <strong>(Option D)</strong>.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/6YOzFqL0Knm6isOP84Du1746254352.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/vuLKTzafO5AoemzGwJ7z1746254495.mp3"
  },
  {
    "text": "<p>A 35 year old woman with a history of endometriosis presents with intermittent right flank pain, hematuria, and recurrent urinary tract infections. Her serum creatinine is elevated at 1.8 mg/dL. A CT scan reveals right hydroureteronephrosis with a stricture at the distal ureter. Which of the following statements is most accurate regarding this patient's condition?</p>",
    "choices": [
      {
        "id": 1,
        "text": "This complication occurs in up to 50% of endometriosis cases."
      },
      {
        "id": 2,
        "text": "Left-sided involvement is more common than right-sided."
      },
      {
        "id": 3,
        "text": "Intrinsic endometriosis of the ureter is more frequent than extrinsic."
      },
      {
        "id": 4,
        "text": "Surgical management is typically required for this complication."
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">Surgical</span> management is typically required for this complication</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>Surgical management is typically required for this <span class=\"customMeta\" data-dictid=\"8a6b09beac1692777184b08a2b5766\">complication</span> because ureteral <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">endometriosis</span> causing <span class=\"customMeta\" data-dictid=\"441df40d111692777189b0e31acb06\">hydronephrosis</span> and <span class=\"customMeta\" data-dictid=\"b9356afdba16927771979d068c6587\">renal</span> function <span class=\"customMeta\" data-dictid=\"4885d5d0021692777189aac6dc80f7\">impairment</span> usually necessitates <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> intervention to prevent further <span class=\"customMeta\" data-dictid=\"4aa6035df41692777190b41d4a1583\">kidney</span> damage.</p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:624px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Category</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Complications</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Fertility-related</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Infertility</li>\n\t\t\t\t<li>Increased risk of <span class=\"customMeta\" data-dictid=\"0decefe0901692777186f7f3f89b2a\">ectopic</span> pregnancy</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Pain-related</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Chronic <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> pain</li>\n\t\t\t\t<li>Dysmenorrhea</li>\n\t\t\t\t<li>Dyspareunia</li>\n\t\t\t\t<li>Dyschezia</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Organ-specific</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Gastrointestinal:\n\t\t\t\t<ul>\n\t\t\t\t\t<li>Bowel obstruction</li>\n\t\t\t\t\t<li>Rectal bleeding</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li>Ovarian:\n\t\t\t\t<ul>\n\t\t\t\t\t<li>Endometriomas</li>\n\t\t\t\t\t<li>Ovarian torsion</li>\n\t\t\t\t\t<li>Rupture of chocolate cyst</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li>Urinary:\n\t\t\t\t<ul>\n\t\t\t\t\t<li>Ureteral obstruction</li>\n\t\t\t\t\t<li>Hydronephrosis</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Structural</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Adhesions</li>\n\t\t\t\t<li>Frozen pelvis</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><br />\n\u00a0</p>\n\n<p><strong>Ureteral endometriosis</strong> is rare, affecting only 0.1-1% of cases, not 50% <strong>(Option A)</strong>.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Right-sided ureteral involvement</strong> is more common, likely due to left-sided <span class=\"customMeta\" data-dictid=\"9008060dc21692777198e329f5be75\">sigmoid</span> <span class=\"customMeta\" data-dictid=\"0fce15e71f1692777184feb9af5303\">colon</span> positioning <strong>(Option B)</strong>.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Extrinsic ureteral <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">endometriosis</span> (external compression) </strong>is more common than <span class=\"customMeta\" data-dictid=\"a6795c876e169277719057a1099465\">intrinsic</span> (within the ureteral wall) <strong>(Option C)</strong>.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/Ol9R0D8VegWRU2BBNN5m1746254760.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/jD8jqJB4n3TYsjrBntCg1746254901.mp3"
  },
  {
    "text": "<p>A 30 year old woman with chronic pelvic pain, worsening during menstruation, dyspareunia, and dyschezia. Physical exam reveals tender nodules on uterosacral ligaments. Transvaginal ultrasound shows a 3 cm cystic mass with a ground glass appearance in the left ovary. Which is considered the gold standard for confirming the diagnosis of this patient?</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Laparotomy"
      },
      {
        "id": 2,
        "text": "Laparoscopy and histopathology"
      },
      {
        "id": 3,
        "text": "MRI"
      },
      {
        "id": 4,
        "text": "CA 125 assay"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer:</strong> <strong>B) <span class=\"customMeta\" data-dictid=\"6aea253fe3169277719122813f8e25\">Laparoscopy</span> and histopathology</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>This scenario describes a classic presentation of endometriosis, characterised by chronic <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> pain, dysmenorrhea, dyspareunia, <span class=\"customMeta\" data-dictid=\"bd478e4ff816927771949528846af9\">palpable</span> nodules and chocolate cyst.</p>\n\n<p><strong>Investigations for Endometriosis:</strong></p>\n\n<ul>\n\t<li><strong>Ultrasonography (TVS and ERUS)</strong>: Initial investigation, where <span class=\"customMeta\" data-dictid=\"2bc6e906dd1692777187c020e817ad\">endometrioma</span> appears as ground glass opacities and hemorrhagic cysts appear as thread-like structures.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Sofie Orlov, Ligita Jokubkiene\" data-hash=\"\" data-license=\"CC BY-NC 4.0\" data-source=\"https://www.researchgate.net/figure/Transvaginal-ultrasound-images-of-A-endometrioma-round-unilocular-cyst-with-ground_fig1_358901602\" data-tags=\"\" height=\"250\" src=\"https://image.prepladder.com/content/BycW08QmhNLlYp3SqShb1734524562.png\" width=\"300\" /></p>\n\n<ul>\n\t<li><strong>Laparoscopy: </strong>Investigation of choice, with new lesions visualised as red flame-like and chronic lesions as powder-burnt appearance.</li>\n\t<li><strong>Histopathology:</strong><strong> </strong>Gold standard for confirming the diagnosis, showing blood-filled macrophages (hemosiderophages).</li>\n</ul>\n\n<p><strong>Laparotomy (Option A)</strong>: Not done for confirmatory purposes due to its <span class=\"customMeta\" data-dictid=\"9e9ed5f7fa1692777190fd117b56b0\">invasiveness</span> and higher risk of complications.</p>\n\n<p><strong>MRI (Option C): </strong>This is not routinely done but is accurate for diagnosing deep-infiltrating <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">endometriosis</span> (DIE), such as Bowel, Thoracic, Bladder, and <span class=\"customMeta\" data-dictid=\"10c795db9e16927771973ce069fac8\">Rectovaginal</span> endometriosis, and is done before laparoscopy.</p>\n\n<p><strong>CA 125 <span class=\"customMeta\" data-dictid=\"fc026ff6d81692777182835f6de6df\">Assay</span> (Option D): </strong>Non-specific marker, often elevated in endometriosis.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/BycW08QmhNLlYp3SqShb1734524562.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/MjvN9cLqFZuTtdahxDky1746255227.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/TrlDqp8BtivxcwNwjtF01746255341.mp3"
  },
  {
    "text": "<p>A 32 year old woman presents with infertility & dysmenorrhea is diagnosed with endometriosis on diagnostic laparoscopy. The severity of endometriosis is categorised under ASRM staging system for endometriosis, depending on the size of lesions, depth of implants and the extent of adhesions. Which structure is not evaluated for scoring in the ASRM endometriosis staging system?</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Fallopian tube"
      },
      {
        "id": 2,
        "text": "Cul de sac"
      },
      {
        "id": 3,
        "text": "Retroperitoneum"
      },
      {
        "id": 4,
        "text": "Peritoneum"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Retroperitoneum</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p><strong>Endometriosis</strong> is a chronic condition in which <span class=\"customMeta\" data-dictid=\"2f1603da6716927771878d0cbdd372\">endometrium</span> grows outside the uterus, commonly on the ovaries, <span class=\"customMeta\" data-dictid=\"efc83dab2c1692777202b5d1d06c4f\">fallopian</span> tubes, and <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> tissues.\u00a0</p>\n\n<p><strong>ASRM (American Society for Reproductive Medicine) <span class=\"customMeta\" data-dictid=\"8ea2e3870f16927771990a138acbc1\">staging</span> of endometriosis:</strong></p>\n\n<p>It is used to classify the severity and extent of endometriotic lesions found during <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> exploration (usually laparoscopy).\u00a0</p>\n\n<p>The location components used for scoring <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">endometriosis</span> according to the ASRM (American Society for Reproductive Medicine) <span class=\"customMeta\" data-dictid=\"dda6ab11271692777184264b752d39\">classification</span> system are as follows:</p>\n\n<ol>\n\t<li>Peritoneal <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">Endometriosis</span> (superficial or deep)<strong>(Option D)</strong></li>\n\t<li>Ovarian <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">Endometriosis</span> (superficial or deep)</li>\n\t<li>Posterior <span class=\"customMeta\" data-dictid=\"68f4042688169277718573e8780cac\">Cul-de-sac</span> (Pouch of Douglas) <span class=\"customMeta\" data-dictid=\"e5922b669a169277719487f8bbabd3\">Obliteration</span> (partial or complete)\u00a0<strong>Option B)</strong></li>\n\t<li>Ovarian Adhesions (dense or filmy)</li>\n\t<li>Tubal Adhesions (dense or filmy)\u00a0<strong>(Option A)</strong></li>\n</ol>\n\n<p><strong>Scoring is based on</strong></p>\n\n<ul>\n\t<li>Appearance, size, and depth of implants in the <span class=\"customMeta\" data-dictid=\"f0c783c43716927771956acc242b90\">peritoneum</span> & ovary.</li>\n\t<li>Presence, extent, and type of adhesions involving the tubes & ovaries.</li>\n\t<li>Degree of <span class=\"customMeta\" data-dictid=\"68f4042688169277718573e8780cac\">cul-de-sac</span> obliteration.</li>\n</ul>\n\n<p>The score does not take into account involvement of <span class=\"customMeta\" data-dictid=\"5d0f37715816927771973ecda21336\">retroperitoneal</span> structures with deeply infiltrating endometriosis, like <span class=\"customMeta\" data-dictid=\"10c795db9e16927771973ce069fac8\">rectovaginal</span> <span class=\"customMeta\" data-dictid=\"d783117d991692777198108af42c05\">septum</span> & rectum.</p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:560px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Stage / Classification</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Score</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Minimal</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>1-5</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Mild</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>6 - 15</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Moderate</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>16 - 40</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Severe</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>> 40</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/97RaclS7W89CrpIGI4k51751446808.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/JeGnz7OCCeYN9TGXN8lZ1751446955.mp3"
  },
  {
    "text": "<p>A 30 year old woman with a history of moderate to severe pelvic pain due to endometriosis was prescribed continuous leuprolide three months ago. Despite treatment, she presents again with persistent pelvic pain that interferes with daily activities and quality of life. What is the most appropriate next step in the management?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Increase the dose of GnRH agonist"
      },
      {
        "id": 2,
        "text": "Expectant management"
      },
      {
        "id": 3,
        "text": "Laparoscopy"
      },
      {
        "id": 4,
        "text": "Add progestins"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Laparoscopy</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>Laparoscopy is the preferred next step for moderate to severe pain as it allows for direct visualisation and <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> management of endometriosis, including <span class=\"customMeta\" data-dictid=\"e06e32271216927772030141e67a00\">fulguration</span> of lesions, adhesiolysis, and management of endometriomas. This approach aims to provide <span class=\"customMeta\" data-dictid=\"509310d4411692777199f2ffdb7769\">symptomatic</span> relief.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Management of Endometriosis:</strong></p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"446\" src=\"https://image.prepladder.com/content/YK6d6xV3H7cqNibIoIUC1734537522.png\" width=\"500\" /></p>\n\n<p><strong>COC -\u00a0</strong>Combined oral contraceptives</p>\n\n<p><strong>CC -\u00a0</strong>Clomiphene citrate</p>\n\n<p><strong>IUI -\u00a0</strong>Intrauterine insemination</p>\n\n<p>\u00a0</p>\n\n<ul>\n\t<li><strong>Medical management of <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">endometriosis</span> includes:</strong></li>\n</ul>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:NaN\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Mild pain</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Moderate to severe pain</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td rowspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>NSAIDs & OCPs (First line)</li>\n\t\t\t\t<li>Progesterone (Second line)</li>\n\t\t\t\t<li>Continuous GnRH <span class=\"customMeta\" data-dictid=\"7d8d28cda71692777180c89a3c86ce\">agonist</span> (Third line)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td rowspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Continuous GnRH <span class=\"customMeta\" data-dictid=\"7d8d28cda71692777180c89a3c86ce\">agonist</span> / GnRH <span class=\"customMeta\" data-dictid=\"2e432a4f3c1692777181e8e244ca0e\">antagonist</span> (First line)</li>\n\t\t\t\t<li>Laparoscopy, if medical management fails.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<ul>\n\t<li><strong>Laparoscopy: </strong>Investigation of choice in endometriosis, used for diagnosing, staging, and <span class=\"customMeta\" data-dictid=\"8dfaeedbf91692777200561b2b1d2f\">therapeutic</span> management of pain</li>\n</ul>\n\n<p>\u00a0</p>\n\n<ul>\n\t<li><strong>Other Drugs useful in <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">endometriosis</span> are:</strong>\n\n\t<ul>\n\t\t<li>Aromatase inhibitors (Letrozole)</li>\n\t\t<li>Progesterone <span class=\"customMeta\" data-dictid=\"9e4959f6f316927771978bb152d440\">receptor</span> modulators (Mifepristone, Ulipristal)</li>\n\t\t<li>GnRH Antagonists (Injection: Ganirelix and cetrirelix)</li>\n\t\t<li>Tab <span class=\"customMeta\" data-dictid=\"d8f88626401692777185bbeda70317\">Danazol</span> (400 mg/day)</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><br />\n\u00a0</p>\n\n<p><strong>Increase the dose of GnRH <span class=\"customMeta\" data-dictid=\"7d8d28cda71692777180c89a3c86ce\">agonist</span> (Option A):\u00a0</strong>If the patient is already on continuous leuprolide for three months and still experiencing persistent <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> pain, increasing the dose is unlikely to provide significant additional benefit and may increase the risk of side effects without improving outcomes.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Expectant management (Option B):\u00a0</strong>Given the persistent severe <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> pain and <span class=\"customMeta\" data-dictid=\"f087a3103216927771903f59008962\">interference</span> with daily activities despite initial treatment, expectant management is not appropriate as it would not address the ongoing symptoms effectively.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Add progestins (Option D):\u00a0</strong>Progestins can be used as an adjunctive therapy in <span class=\"customMeta\" data-dictid=\"94e15a3dfb169277718725b79bbfff\">endometriosis</span> management. However, if leuprolide (a potent hormonal treatment) has not sufficiently controlled symptoms, adding progestins may not be effective in achieving adequate symptom relief.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/YK6d6xV3H7cqNibIoIUC1734537522.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/ow0Dp8ebNpPYFshAs4661746256151.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/2ihkBR0OTWAptVleSZMn1746256305.mp3"
  },
  {
    "text": "<p>A 37 year old woman presents for routine checkup with an ultrasound revealing a 3 cm asymptomatic endometrioma on the left ovary. She expresses that she does not wish to conceive in the future. She has regular cycles, with normal flow & mild spasmodic dysmenorrhea. Given the clinical scenario, what is the most appropriate management strategy for this patient's endometrioma?</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Laparoscopic cystectomy"
      },
      {
        "id": 2,
        "text": "Total abdominal hysterectomy"
      },
      {
        "id": 3,
        "text": "Laparoscopic uterosacral nerve ablation"
      },
      {
        "id": 4,
        "text": "Follow-up 6 monthly with transvaginal ultrasound"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) Follow-up 6 monthly with <span class=\"customMeta\" data-dictid=\"337d5efcc516927772009422f7ce30\">transvaginal</span> ultrasound</strong></p>\n\n<p><br />\n\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>In this scenario, the patient has a 3 cm <span class=\"customMeta\" data-dictid=\"d1a9a79f701692777182066af09044\">asymptomatic</span> <span class=\"customMeta\" data-dictid=\"2bc6e906dd1692777187c020e817ad\">endometrioma</span> and does not desire future fertility. According to current guidelines, Follow-up 6 monthly with <span class=\"customMeta\" data-dictid=\"337d5efcc516927772009422f7ce30\">transvaginal</span> <span class=\"customMeta\" data-dictid=\"df077f2c3d16927772019f8223e58f\">ultrasound</span> (TVS) is the most appropriate management for <span class=\"customMeta\" data-dictid=\"2bc6e906dd1692777187c020e817ad\">endometrioma</span> as <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> interventions are indicated only for cysts> 5cm.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Management of Endometrioma:</strong></p>\n\n<ul>\n\t<li><strong>If the patient wants to conceive:</strong>\n\n\t<ul>\n\t\t<li>Expectant management is done, irrespective of the size of the endometrioma</li>\n\t</ul>\n\t</li>\n\t<li><strong>If pregnancy is not desired:</strong>\n\t<ul>\n\t\t<li>Size < 5cm and Asymptomatic: Follow up six monthly / 1 yearly with TVS</li>\n\t\t<li>Size >5cm: <span class=\"customMeta\" data-dictid=\"b506527af81692777191e0f69912f6\">Laparoscopic</span> cystectomy<strong> (Option A)</strong></li>\n\t</ul>\n\t</li>\n\t<li><strong>Total <span class=\"customMeta\" data-dictid=\"1665a40f1016927771801899eaed5d\">Abdominal</span> <span class=\"customMeta\" data-dictid=\"633cf90e4016927771891fa018663e\">Hysterectomy</span> (Option B):</strong>\n\t<ul>\n\t\t<li>Done only in women > 40 years after completion of family.</li>\n\t\t<li>Prevents the formation of new lesions and pain due to it.</li>\n\t</ul>\n\t</li>\n\t<li><strong>Laparoscopy procedures include:</strong>\n\t<ul>\n\t\t<li>Adhesiolysis</li>\n\t\t<li>Fulgration of implants</li>\n\t\t<li>Laparoscopic <span class=\"customMeta\" data-dictid=\"c092ff970b1692777201209bd8a019\">uterosacral</span> nerve <span class=\"customMeta\" data-dictid=\"eb788615bd16927771803d3841aa78\">ablation</span> (LUNA)</li>\n\t</ul>\n\t</li>\n\t<li><strong>Laparoscopic <span class=\"customMeta\" data-dictid=\"c092ff970b1692777201209bd8a019\">uterosacral</span> nerve <span class=\"customMeta\" data-dictid=\"eb788615bd16927771803d3841aa78\">ablation</span> (LUNA) (Option C)</strong>: It involves disrupting nerve pathways to alleviate pain associated with endometriosis, particularly <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> pain. It is not indicated for the management of ovarian endometriomas.</li>\n\t<li><strong>After <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> procedures, patients require medical management</strong>\n\t<ul>\n\t\t<li>Adolescents <16 years: OCPs</li>\n\t\t<li>Adolescents >16 years: OCPs / GnRH Agonists</li>\n\t\t<li>Adults: OCPs / GnRH Agonists / Progesterone</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/lEUuH3nqM71hOzfNiTVQ1746256641.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/IDLyjfnCV9SzxrcOAaQ91746256755.mp3"
  },
  {
    "text": "<p>A 40 year old woman comes to the with a history of irregular menstruation, chronic pelvic pain and heavy menstrual bleeding for the past 8 months. Clinical examination reveals a globally enlarged uterus. Which of the following investigations will be the most helpful in diagnosing adenomyosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "USG - TVS without color Doppler"
      },
      {
        "id": 2,
        "text": "USG - TVS with doppler"
      },
      {
        "id": 3,
        "text": "Magnetic resonance imaging"
      },
      {
        "id": 4,
        "text": "Hysteroscopy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) USG - TVS with Doppler</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>The given scenario suggests adenomyosis, where USG - TVS with <span class=\"customMeta\" data-dictid=\"eb476e70a316927771861ad68beaae\">Doppler</span> serves as the first-line and most helpful investigation for diagnosis.</p>\n\n<ul>\n\t<li>Adenomyosis usually occurs in <span class=\"customMeta\" data-dictid=\"6970e591c01692777194fae32e526b\">parous</span> women above the age of 40.</li>\n\t<li>Presents as <span class=\"customMeta\" data-dictid=\"458e050fdc16927771809854c9fd53\">Abnormal</span> <span class=\"customMeta\" data-dictid=\"59ff8b38191692777201150e72ebc3\">uterine</span> <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> with chronic <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> pain.</li>\n\t<li>The <span class=\"customMeta\" data-dictid=\"0c847ca20416927772011b3397c2fd\">uterus</span> is enlarged and <span class=\"customMeta\" data-dictid=\"7fb01b5ad51692777188c3cb1733f9\">globular</span> if the <span class=\"customMeta\" data-dictid=\"71f3243fd81692777180d9b4d75b90\">adenomyosis</span> is diffuse.</li>\n\t<li><strong>Investigation of choice:</strong> TVS preferably with color Doppler\n\t<ul>\n\t\t<li><strong>Shutter / Venetian Blind sign</strong>: <span class=\"customMeta\" data-dictid=\"91b98150ea169277718629280d911c\">Echogenic</span> <span class=\"customMeta\" data-dictid=\"d02067c4b51692777191b8eec8b062\">linear</span> striations indicating endometrial <span class=\"customMeta\" data-dictid=\"4744bb90c21692777188c8957f9faa\">gland</span> invasion into sub-endometrial tissue.</li>\n\t\t<li>Colour <span class=\"customMeta\" data-dictid=\"eb476e70a316927771861ad68beaae\">Doppler</span> shows central <span class=\"customMeta\" data-dictid=\"05493772261692777201c10c4ee537\">vascularity</span> (whereas leiomyomas show <span class=\"customMeta\" data-dictid=\"255674f3271692777195c172d86daf\">peripheral</span> vascularity)</li>\n\t</ul>\n\t</li>\n\t<li><strong>Diagnostic criteria of <span class=\"customMeta\" data-dictid=\"71f3243fd81692777180d9b4d75b90\">adenomyosis</span> </strong>\n\t<ul>\n\t\t<li>The asymmetrical <span class=\"customMeta\" data-dictid=\"facd67f6341692777200653d383689\">thickness</span> of the <span class=\"customMeta\" data-dictid=\"59ff8b38191692777201150e72ebc3\">uterine</span> walls (posterior > anterior)</li>\n\t\t<li>Heterogeneous myometrial echotexture</li>\n\t\t<li>Small myometrial <span class=\"customMeta\" data-dictid=\"5543384a9b169277718985e08cf7f8\">hypoechoic</span> cysts <span class=\"customMeta\" data-dictid=\"7fa8553470169277718949dfac4020\">honeycomb</span> appearance</li>\n\t\t<li>Striated projections extending from <span class=\"customMeta\" data-dictid=\"2f1603da6716927771878d0cbdd372\">endometrium</span> to myometrium</li>\n\t\t<li>Endometrial echo poorly defined</li>\n\t\t<li>J\u2013Z thickening \u226512 mm.</li>\n\t</ul>\n\t</li>\n\t<li>If USG is inconclusive, an <span class=\"customMeta\" data-dictid=\"7ce7bcb2f316927771938e0bea7f4d\">MRI</span> can be done to diagnose adenomyosis.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"674\" src=\"https://image.prepladder.com/content/RFQhwnLZ05HGJiD0jD6Q1736148978.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>\n\n<p><strong>USG - TVS without <span class=\"customMeta\" data-dictid=\"42350200121692777185edc5a420bc\">color Doppler</span> (Option A):</strong> It\u00a0shows <span class=\"customMeta\" data-dictid=\"71f3243fd81692777180d9b4d75b90\">adenomyosis</span> features but may cause confusion between <span class=\"customMeta\" data-dictid=\"7cb424e4921692777199f9951be2ce\">submucosal</span> <span class=\"customMeta\" data-dictid=\"febaca00761692777191610502313c\">leiomyoma</span> and adenomyosis. Colour <span class=\"customMeta\" data-dictid=\"eb476e70a316927771861ad68beaae\">Doppler</span> helps to <span class=\"customMeta\" data-dictid=\"c9001edbf216927771860f3475b44c\">differentiate</span> between them based on the <span class=\"customMeta\" data-dictid=\"05493772261692777201c10c4ee537\">vascularity</span> of the masses.</p>\n\n<p>\u00a0</p>\n\n<p><strong>MRI (Option C): </strong>Although <span class=\"customMeta\" data-dictid=\"7ce7bcb2f316927771938e0bea7f4d\">MRI</span> is more sensitive in diagnosing adenomyosis, it is not the initial investigation of choice as it is<strong> not cost-effective</strong>. It can be used to diagnose <span class=\"customMeta\" data-dictid=\"71f3243fd81692777180d9b4d75b90\">adenomyosis</span> when the USG-TVS is inconclusive.</p>\n\n<p><br />\n<strong>Hysteroscopy (Option D):</strong> It\u00a0allows direct visualisation of the <span class=\"customMeta\" data-dictid=\"59ff8b38191692777201150e72ebc3\">uterine</span> cavity, but it is <span class=\"customMeta\" data-dictid=\"1c5272ad3d1692777190e71409d07a\">invasive</span> and is typically not used to investigate adenomyosis.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/RFQhwnLZ05HGJiD0jD6Q1736148978.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/FOqhfMQKQLxoIl9HTTvR1746256979.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/kgMKEBejrmNlvUsOmQP01746257084.mp3"
  },
  {
    "text": "<p>A 34 year old female presents with chronic, progressive pelvic pain for the past three years and a history of heavy menstrual bleeding. Clinical examination reveals an enlarged uterus corresponding to a size of 10 weeks. An MRI was performed after an inconclusive transvaginal ultrasound (TVS). Which of the following is NOT a typical feature of MRI for adenomyosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Contrast enhancement does not assist in the diagnosis of adenomyosis."
      },
      {
        "id": 2,
        "text": "Presence of myometrial cysts is a characteristic feature."
      },
      {
        "id": 3,
        "text": "Myometrial foci appear to have high intensity on the T2 weighted scale."
      },
      {
        "id": 4,
        "text": "Junctional zone measures less than 12 mm."
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) Junctional zone measures less than 12 mm</strong><br />\n\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p><strong>Junctional zone</strong> thickening, measuring <strong>more than 12 mm</strong>, is one of the <span class=\"customMeta\" data-dictid=\"552e9ef8811692777186997018b858\">diagnostic</span> criteria for <strong>adenomyosis.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Radiological Findings in Adenomyosis:</strong></p>\n\n<ul>\n\t<li><strong>MRI</strong>\n\n\t<ul>\n\t\t<li>Increased <span class=\"customMeta\" data-dictid=\"facd67f6341692777200653d383689\">thickness</span> of junctional zone <strong>(more than 12 mm</strong>) <strong>(Option D).</strong></li>\n\t\t<li>The presence of a myometrial <span class=\"customMeta\" data-dictid=\"1405ad7b46169277718580acad7562\">cyst</span> is characteristic<strong> (Option B).</strong></li>\n\t\t<li>High-intensity myometrial <span class=\"customMeta\" data-dictid=\"e2071f8f891692777203982b3fa0f5\">foci</span> on T2 weighted scale <strong>(Option C).</strong></li>\n\t\t<li>Administration of <span class=\"customMeta\" data-dictid=\"e3767003061692777187b931c6a08f\">gadolinium</span> contrast does not aid in the diagnosis of <span class=\"customMeta\" data-dictid=\"71f3243fd81692777180d9b4d75b90\">adenomyosis</span> <strong>(Option A)</strong></li>\n\t</ul>\n\t</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Agostinho, L., Cruz, R., Guerra, A., Barata, M.J., & Setubal, A.\" data-hash=\"\" data-license=\"NA\" data-source=\"https://www.semanticscholar.org/paper/Adenomyosis-and-MRI%3A-What-you-need-to-know-and-be-Agostinho-Cruz/544cac1aa0a69aa25c8584e6eca82620c3e254bc/figure/4\" data-tags=\"\" height=\"565\" src=\"https://image.prepladder.com/content/yRCGyTPUKfYGbRC72omj1734538433.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>\n\n<ul>\n\t<li><strong>USG</strong>\n\n\t<ul>\n\t\t<li>IOC, but it is not as sensitive as MRI.</li>\n\t\t<li><strong>Shutter / Venetian Blind sign:</strong> Echogenic <span class=\"customMeta\" data-dictid=\"d02067c4b51692777191b8eec8b062\">linear</span> striations indicating endometrial <span class=\"customMeta\" data-dictid=\"4744bb90c21692777188c8957f9faa\">gland</span> invasion into sub-endometrial tissue.</li>\n\t\t<li>Colour Doppler shows <strong>central vascularity</strong> (whereas leiomyomas show <span class=\"customMeta\" data-dictid=\"255674f3271692777195c172d86daf\">peripheral</span> vascularity)</li>\n\t</ul>\n\t</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/yRCGyTPUKfYGbRC72omj1734538433.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/95U4ReW3XWL8nBT2FZlw1751447082.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/2fBOkWSEklse4MLyT3Pw1751447176.mp3"
  },
  {
    "text": "<p>A 40 year old female presents with AUB associated with chronic pelvic pain for the past two years. TVS shows anteroposterior asymmetry of the uterus and heterogeneous myometrial texture. What will you most likely see on HPE if this patient is diagnosed with adenomyosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Glandular endometrial tissue surrounded by stromal cells in myometrium"
      },
      {
        "id": 2,
        "text": "Hyperplastic endometrial glands with mitotic bodies"
      },
      {
        "id": 3,
        "text": "Whorled pattern of well-differentiated smooth muscle fibres"
      },
      {
        "id": 4,
        "text": "Necrotic endometrial tissue with chronic inflammation and lymphocytic infiltrate"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) <span class=\"customMeta\" data-dictid=\"c2f9d01ba91692777188d264244b6a\">Glandular</span> endometrial tissue surrounded by stromal cells in myometrium</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>Histopathological examination of <span class=\"customMeta\" data-dictid=\"71f3243fd81692777180d9b4d75b90\">adenomyosis</span> shows <span class=\"customMeta\" data-dictid=\"669bdcb3111692777190e018ae930e\">infiltration</span> of the <span class=\"customMeta\" data-dictid=\"46cc90d0e216927771936d8239e379\">myometrium</span> by the endometrial tissue; thus, we can observe <span class=\"customMeta\" data-dictid=\"c2f9d01ba91692777188d264244b6a\">glandular</span> endometrial tissue surrounded by stromal cells in the myometrium.</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Vijay Shankar S\" data-hash=\"\" data-license=\"NA\" data-source=\"https://ilovepathology.com/pathology-of-adenomyosis/\" data-tags=\"\" height=\"371\" src=\"https://image.prepladder.com/content/NsqIZW5DugEskSP2rWu41734538657.png\" width=\"500\" /></p>\n\n<p><br />\n\u00a0</p>\n\n<p><strong>Hyperplastic endometrial glands with mitotic bodies (Option B):\u00a0</strong>Hyperplastic endometrial glands with mitotic bodies are a characteristic finding of endometrial hyperplasia.</p>\n\n<p>\u00a0</p>\n\n<p><strong>A whorled pattern of well-differentiated smooth muscle fibers (Option C):\u00a0</strong>Histopathology of Leiomyoma/fibroids shows a well-defined whorled pattern of well-differentiated smooth muscle fibers.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Necrotic endometrial tissue with lymphocytic <span class=\"customMeta\" data-dictid=\"8fd5e2898d16927771900855b98180\">infiltrate</span> (Option D):\u00a0</strong>Necrotic endometrial tissue with lymphocytic <span class=\"customMeta\" data-dictid=\"669bdcb3111692777190e018ae930e\">infiltration</span> suggests chronic inflammation, which can be seen in endometritis.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/NsqIZW5DugEskSP2rWu41734538657.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/AfE6RlZiUxG1PKPvNIDt1746178968.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/uqo4PPWJ56HdjgN8XUhJ1746179153.mp3"
  },
  {
    "text": "<p>A 48-year-old multiparous woman with a complete family came to the OPD with complaints of painful menstruation and lower pelvic pain for the past 6 months. Investigations led to a diagnosis of adenomyosis. What is the most appropriate definitive treatment for her condition?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Oral contraceptive pills"
      },
      {
        "id": 2,
        "text": "Total Hysterectomy"
      },
      {
        "id": 3,
        "text": "Adenomyomectomy"
      },
      {
        "id": 4,
        "text": "Uterine artery embolisation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Total <span class=\"customMeta\" data-dictid=\"633cf90e4016927771891fa018663e\">Hysterectomy</span> </strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>In a <span class=\"customMeta\" data-dictid=\"6d72f1e981169277719324bcac3dce\">multiparous</span> woman with a complete family, the <span class=\"customMeta\" data-dictid=\"32b854324a1692777185c6c79fdc99\">definitive</span> treatment for <strong>adenomyosis</strong> is a <strong>Total hysterectomy.</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:677px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Medical Methods</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Surgical Methods</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td rowspan=\"5\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>Combined OCPs and progestin-only regimens:</strong> Improves <span class=\"customMeta\" data-dictid=\"6fab9041ff1692777186e2eea4c0b2\">dysmenorrhea</span> and <span class=\"customMeta\" data-dictid=\"a342b2f59f16927771929cc4b94551\">menorrhagia</span> <strong>(Option A)</strong></li>\n\t\t\t\t<li><strong>NSAIDs:</strong> For pain and menorrhagia.</li>\n\t\t\t\t<li><strong>LNG-IUS:</strong> Reduce Menorrhagia</li>\n\t\t\t\t<li><strong>GnRH agonists:</strong> For adenomyosis-related sub-fertility or as pre-surgical relief.</li>\n\t\t\t\t<li><strong>Danazol: </strong>For <span class=\"customMeta\" data-dictid=\"a342b2f59f16927771929cc4b94551\">menorrhagia</span> and pain<strong>.</strong></li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td rowspan=\"5\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>Conservative surgery</strong>: Preserves <span class=\"customMeta\" data-dictid=\"2238ef34bc16927772024c3becf614\">fertility</span> for women desiring children. It includes:\n\t\t\t\t<ul>\n\t\t\t\t\t<li><strong>Adenomyomectomy</strong>: Difficulty in completely removing <span class=\"customMeta\" data-dictid=\"3cc662a2a116927771808b454f3b22\">adenomyoma</span> \u279c Risk of recurrence.<strong> (Option C)</strong></li>\n\t\t\t\t\t<li><strong>Uterine mass reduction </strong>(laparotomy or laparoscopy)</li>\n\t\t\t\t\t<li><strong>Uterine <span class=\"customMeta\" data-dictid=\"a66cd3adaa1692777182e77cb23021\">artery</span> embolisation</strong> (UAE): To relieve symptoms)<strong> (Option D)</strong></li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\n\t\t\t<ul>\n\t\t\t\t<li><strong>Definitive surgery</strong>: Total Hysterectomy<strong> (Option B)</strong></li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"494\" src=\"https://image.prepladder.com/content/Zc2YpQRH6YDTLMqe1xUZ1734539170.png\" width=\"900\" /></p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/Zc2YpQRH6YDTLMqe1xUZ1734539170.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/X3FzBlbqUk9jc3fz01731746257346.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/1vTafskDQPtCgnfSLYAC1746257478.mp3"
  },
  {
    "text": "<p>A 45 year old woman with AUB and chronic pelvic pain underwent a hysterectomy after failed medical management. HPE from the hysterectomy specimen showed glandular endometrial tissue surrounded by stromal cells in the myometrium. Based on the investigation findings, which of the following conditions is the most likely diagnosis?</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Endometriosis"
      },
      {
        "id": 2,
        "text": "Leiomyoma"
      },
      {
        "id": 3,
        "text": "Adenomyosis"
      },
      {
        "id": 4,
        "text": "Ovarian cyst"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) <span class=\"customMeta\" data-dictid=\"71f3243fd81692777180d9b4d75b90\">Adenomyosis</span> </strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>In the given scenario, the patient has AUB with chronic <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> pain and <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> pressure, and the USG and HPE findings are typical for <strong>adenomyosis</strong>.</p>\n\n<ul>\n\t<li>Adenomyosis<strong> </strong>is characterised by <span class=\"customMeta\" data-dictid=\"458e050fdc16927771809854c9fd53\">abnormal</span> <span class=\"customMeta\" data-dictid=\"59ff8b38191692777201150e72ebc3\">uterine</span> <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> along with chronic <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> pain and <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> pressure due to a large uterus.</li>\n\t<li>USG shows a globally enlarged <span class=\"customMeta\" data-dictid=\"0c847ca20416927772011b3397c2fd\">uterus</span> with <span class=\"customMeta\" data-dictid=\"bbe1b94c491692777188fe4f85b1ce\">heterogeneous</span> myometrial texture.</li>\n\t<li>Biopsy reveals <span class=\"customMeta\" data-dictid=\"c2f9d01ba91692777188d264244b6a\">glandular</span> endometrial tissue surrounded by stromal cells in myometrium.</li>\n</ul>\n\n<p><br />\n\u00a0</p>\n\n<p><strong>Endometriosis (Option A)</strong> presents with chronic <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> pain, dysmenorrhea, dyspareunia, and infertility, often cyclical.</p>\n\n<ul>\n\t<li>USG shows endometriomas; diagnosis is confirmed by <span class=\"customMeta\" data-dictid=\"6aea253fe3169277719122813f8e25\">laparoscopy</span> visualising endometrial implants.</li>\n\t<li>Histopathology reveals <span class=\"customMeta\" data-dictid=\"0decefe0901692777186f7f3f89b2a\">ectopic</span> endometrial tissue.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Leiomyoma (Option B)</strong> is also characterised by <span class=\"customMeta\" data-dictid=\"458e050fdc16927771809854c9fd53\">abnormal</span> <span class=\"customMeta\" data-dictid=\"59ff8b38191692777201150e72ebc3\">uterine</span> bleeding, with or without chronic <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> pain.</p>\n\n<ul>\n\t<li>Histopathology shows a well-defined whorled pattern of smooth muscle fibres.</li>\n\t<li>USG reveals a hypoechoic, well-defined mass in the uterus, possibly with mixed echogenicity.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Ovarian cysts (Option D)</strong> may be <span class=\"customMeta\" data-dictid=\"d1a9a79f701692777182066af09044\">asymptomatic</span> or cause <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> pain and <span class=\"customMeta\" data-dictid=\"3a03cad6c616927771925038b55989\">menstrual</span> irregularities. They can be functional or non-functional. USG shows a fluid-filled <span class=\"customMeta\" data-dictid=\"59ae5630de16927771988a866d1dea\">sac</span> in the ovary.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/B3qp6BbtqZmGMTsohB191746257627.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/EKmh3aL77hU6XzQyhoIA1746257739.mp3"
  }
];
        let quizName = '39 Endometriosis & Adenomyosis';
        let hierarchy = ["PrepLadder", "qBank", "Obstetrics & Gynecology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>