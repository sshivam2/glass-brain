<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>029 Physiology Ini-Cet 2024 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Physiology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">31</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following are properties of ventricular cardiac muscle?",
    "choices": [
      {
        "id": 1,
        "text": "1,2"
      },
      {
        "id": 2,
        "text": "1,2,3"
      },
      {
        "id": 3,
        "text": "1,2,4"
      },
      {
        "id": 4,
        "text": "1,2,3,4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>All or none phenomenon, length tension relationship and long refractory period applies to cardiac muscles. Cardiac muscle <strong>cannot be tetanized</strong> due to<strong> long refractory period</strong>.</p>\n<p>In cardiac myocytes, <strong>depolarization</strong> proceeds <strong>rapidly</strong> and an <strong>overshoot</strong> of the <strong>zero potential</strong> is present. This is followed by a plateau before the membrane potential reaches the RMP (-90mV). This plateau phase lasts for 200 msec or more. Repolarization is therefore not complete until contraction is 50% completed.</p>\n<p>Phases of cardiac action potential</p>\n<ul>\n<li>0\u2192 <strong>Depolarisation and overshoo</strong>t-Due to opening of voltage-gated Na+ channels</li>\n<li>1\u2192 I<strong>nitial rapid repolarization</strong>-Due to closure of Na+ channels and opening up of K+ channels</li>\n<li>2\u2192 <strong>Plateau phase</strong> - Due to slow but prolonged opening of Ca2+ channels</li>\n<li>3\u2192 <strong>Late rapid repolarization</strong></li>\n<li>4\u2192 Baseline (RMP)\u00a0</li>\n</ul>\n<p>Phases 3 and 4 are due closure of Ca2+ channels and a slow, delayed increase of K+ efflux through K+ channels.</p>\n<p>During phases 0 to 2 and about half of phase 3 of cardiac action potential, cardiac muscle cannot be excited again, that is, it is in its <strong>absolute refractory period</strong>. It remains relatively refractory until phase 4. Thus, cardiac muscle cannot be tetanized.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0a379e135fe643b1a6daa630671bc444x545x599.JPEG"
    ]
  },
  {
    "text": "Which of the following may lead to a decrease in GFR?",
    "choices": [
      {
        "id": 1,
        "text": "Increase in renal blood flow"
      },
      {
        "id": 2,
        "text": "Decrease in glomerular oncotic pressure"
      },
      {
        "id": 3,
        "text": "Increase in glomerular  hydrostatic pressure"
      },
      {
        "id": 4,
        "text": "Decrease in bowman capsule oncotic pressure"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>A<strong> decrease in bowman's capsule oncotic pressure </strong>would lead to a decrease in GFR.</p>\n<p><strong>Glomerular filtration rate (GFR)</strong> is the volume of fluid filtered from the renal glomerular capillaries into the Bowman's capsule per unit time.</p>\n<p>The GFR is determined by <strong>sum of the hydrostatic and colloid osmotic forces</strong> across the glomerular membrane, which gives the net filtration pressure. It is dependant on Glomerular Kf (glomerular ultrafiltration coefficient) also.</p>\n<p>Mathematically, it can be expressed as follows:</p>\n<p><strong>GFR= Kf [PG + \u03c0B -PB- \u03c0G]</strong></p>\n<p>Forces <strong>favoring</strong> Filtration</p>\n<ul>\n<li>PG: Glomerular hydrostatic pressure</li>\n<li>\u03c0B: Bowman\u2019s capsule oncotic pressure\u00a0</li>\n</ul>\n<p>Forces <strong>opposing</strong> Filtration\u00a0</p>\n<ul>\n<li>PB: Bowman\u2019s capsule hydrostatic pressure</li>\n<li>\u03c0G: Glomerular capillary oncotic pressure</li>\n</ul>\n<p>Factors that can increase the GFR are as follows:</p>\n<ul>\n<li><strong>Increase in glomerular capillary filtration coefficient Kf</strong>: This coefficient depends on the hydraulic conductivity and surface area of the glomerular capillaries.\u00a0</li>\n<li><strong>Decrease in Bowman's capsule hydrostatic pressure</strong>: Conditions with urinary tract obstruction can lead to an increase in this pressure and a fall in GFR.</li>\n<li><strong>Decrease in glomerular colloid osmotic pressure</strong>: Accumulation of plasma proteins that are not filtered from the blood contributes to this pressure and an increase reduces the further filtration and GFR. It is directly proportional to the following factors:Arterial plasma colloid osmotic pressure\u00a0</li>\n<li><strong>Filtration fraction</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the most potent naturally occurring estrogen?",
    "choices": [
      {
        "id": 1,
        "text": "Estradiol"
      },
      {
        "id": 2,
        "text": "Estriol"
      },
      {
        "id": 3,
        "text": "Estrone"
      },
      {
        "id": 4,
        "text": "Conjugated Estrogen"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Estradiol</strong> is the <strong>most potent</strong> naturally occurring estrogen.</p>\n<p>Classic estrogens are C18 steroid compounds containing a phenolic ring. Only three estrogens are present in significant quantities in the plasma of the human female\u2014\u03b2-estradiol, estrone, and estriol.</p>\n<p>The principal estrogen secreted by the ovaries is <strong>\u03b2-estradiol</strong>.</p>\n<p>Small amounts of <strong>estrone</strong> are also secreted, but most of this is formed in <strong>peripheral tissues</strong> from androgens secreted by the adrenal cortices and by ovarian thecal cells.</p>\n<p><strong>Estriol</strong> is a weak estrogen; it is an <strong>oxidative product</strong> derived from both estradiol and estrone, with the conversion occurring mainly in the <strong>liver</strong>.</p>\n<p>The estrogenic potency of \u03b2-estradiol is 12 times that of estrone and 80 times that of estriol. Hence, estradiol is the most potent natural form of estrogen.</p>\n<p>In the liver, estradiol, estrone, and estriol are converted to inactive glucuronide and sulfate conjugates. All these compounds, along with other metabolites, are excreted in the urine.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a190dad332194accb3ffcdbd06897ee7x1280x1613.JPEG"
    ]
  },
  {
    "text": "Which hormones are produced from the zones labelled in the image given?",
    "choices": [
      {
        "id": 1,
        "text": "A-cortisol, B-aldosterone, C-androgens, D-epinephrine"
      },
      {
        "id": 2,
        "text": "A-epinephrine, B-cortisol, C-aldosterone, D-androgens"
      },
      {
        "id": 3,
        "text": "A-aldosterone, B-epinephrine, C-androgens, D-cortisol"
      },
      {
        "id": 4,
        "text": "A-aldosterone, B-cortisol, C-androgens, D-epinephrine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Option D is the correct option. This is a section through an adrenal gland showing both the medulla and the zones of the cortex. Following are the zones of the cortex and medulla, and the hormones they secrete.\u00a0</p>\n<p>A \u2013 <strong>Zona Glomerulosa </strong>\u00a0\u2013 secretes<strong> mineralocorticoids </strong>(aldosterone)</p>\n<p>B \u2013 <strong>Zona Fasciculata </strong>\u00a0\u2013<strong> </strong>secretes<strong> glucocorticoids </strong>(cortisol, corticosterone)</p>\n<p>C \u2013 <strong>Zona Reticularis</strong> \u2013 \u00a0secretes<strong> androgens</strong> (dehydroepiandrosterone)</p>\n<p>D \u2013 <strong>Adrenal Medulla</strong> \u2013 Produces <strong>Catecholamines</strong>: Norepinephrine, Epinephrine, and Dopamine</p>\n<p>On histological examination, the different layers are identified as:</p>\n<ul>\n<li>Outer zona glomerulosa - small, compact cells</li>\n<li>Central zona fasciculata - larger lipid-rich cells arranged in radial columns</li>\n<li>Inner zona reticularis - pigmented, compact cells</li>\n<li>Adrenal medulla - thin layer of large chromaffin cells</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/48b4735777ec49e3855c6a7df65f1849.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Erythropoietin is produced by:",
    "choices": [
      {
        "id": 1,
        "text": "1 only"
      },
      {
        "id": 2,
        "text": "2 only"
      },
      {
        "id": 3,
        "text": "1,2"
      },
      {
        "id": 4,
        "text": "1,2,3,4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Erythropoietin is produced mainly by <strong>kidney</strong> and <strong>liver.</strong>\u00a0</p>\n<p>In adults, approximately <strong>85% </strong>of erythropoietin is produced by the<strong> kidneys,</strong> while<strong> 15%</strong> is synthesized by the<strong> liver</strong>. Both of these organs possess the <strong>mRNA</strong> necessary for erythropoietin production. Although erythropoietin can be found in the spleen and salivary glands, these tissues lack the mRNA required for its synthesis, indicating that they do not produce the hormone.</p>\n<p>Erythropoietin is secreted by interstitial cells in the<strong> peri-tubular capillary bed </strong>of the kidneys and by <strong>perivenous hepatocytes</strong> in the liver. It is also generated in the brain, where it provides a safeguarding effect against excitotoxic harm caused by hypoxia; and in the uterus and oviducts, where it is stimulated by estrogen and seems to facilitate estrogen-driven angiogenesis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "EOG, EEG, and EMG of a patient are given respectively from above downwards. Which stage of sleep does the marked area represent?",
    "choices": [
      {
        "id": 1,
        "text": "NREM I sleep"
      },
      {
        "id": 2,
        "text": "NREM II sleep"
      },
      {
        "id": 3,
        "text": "REM sleep"
      },
      {
        "id": 4,
        "text": "NREM III sleep"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>REM sleep</strong> is represented by the marked area in the given polysomnography.</p>\n<p>The three zones in the given image represent EOG, EEG, and EMG, respectively. In the marked area,</p>\n<ul>\n<li>EOG shows <strong>Positive activity</strong></li>\n<li>EEG shows <strong>Mixed waves</strong></li>\n<li>EMG shows <strong>Minimal activity</strong><br /><br /></li>\n</ul>\n<p>This is characteristic of REM sleep.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0decde033e0d4426b7b47f14bc82604c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f57a309d87e9465dbf87fa566138b76bx1280x944.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e189481359b14d4fbee07cd798b5f043x1280x2592.JPEG"
    ]
  },
  {
    "text": "Which of the following statements is incorrect regarding ABO blood grouping?",
    "choices": [
      {
        "id": 1,
        "text": "Antibodies are naturally present since birth"
      },
      {
        "id": 2,
        "text": "The antigens are carbohydrate in nature"
      },
      {
        "id": 3,
        "text": "The antibodies are predominantly IgM"
      },
      {
        "id": 4,
        "text": "Antibodies are present only if antigens are absent"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Antibodies are not present since birth. At <strong>2 to 8 months </strong>after birth, an infant begins to produce agglutinins (antibodies).</p>\n<p>In the absence of type A agglutinogen(antigen) in an individual's RBCs, antibodies called anti-A agglutinins form in the plasma. Similarly, when type B agglutinogen is lacking in the RBCs, antibodies referred to as anti-B agglutinins develop in the plasma. <strong>Type A blood</strong> carries type A agglutinogens and anti-B agglutinins, while <strong>type B blood</strong> contains type B agglutinogens and anti-A agglutinins. <strong>Type AB blood</strong> possesses both A and B agglutinogens but no agglutinins. On the other hand, <strong>type O blood</strong>, which lacks agglutinogens, does have both anti-A and anti-B agglutinins.</p>\n<p>The A and B antigens are <strong>complex oligosaccharides</strong> that differ in their terminal sugar. The agglutinins are <strong>gamma globulins</strong> produced by the bone marrow and lymph gland cells. Most of them are <strong>IgM </strong>and IgG immunoglobulin molecules.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the hormones marked in the image given",
    "choices": [
      {
        "id": 1,
        "text": "A-Somatostatin, B-GHRH, C-GH, D-IGF-1"
      },
      {
        "id": 2,
        "text": "A-GHRH, B-GH, C-IGF-1, D-Somatostatin"
      },
      {
        "id": 3,
        "text": "A-GHRH, B-Somatostatin, C-GH, D-IGF-1"
      },
      {
        "id": 4,
        "text": "A-GH, B-GHRH, C-IGF-1, D-Somatostatin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given image, A: Somatostatin, B: GHRH, C: GH, D: IGF-1</p>\n<ul>\n<li><strong>Growth hormone-releasing hormone </strong>(GHRH)\u00a0secreted from the hypothalamus acts on the anterior pituitary to <strong>release </strong>growth hormone.</li>\n<li><strong>Growth hormone</strong> (GH) <strong>increases </strong>the circulating levels of <strong>IGF -1 </strong>which exerts its effect on the tissues.</li>\n<li>Ghrelin <strong>promotes</strong> the secretion of growth hormone from the anterior pituitary.</li>\n<li><strong>Somatostatin </strong>secreted from the hypothalamus is an <strong>inhibitory effect</strong> on the GH secretion from the anterior pituitary.</li>\n<li>Similarly, <strong>IGF -1</strong> exerts<strong> negative feedback on GH</strong> secretion and<strong> positive feedback on somatostatin</strong> secretion, which in turn<strong> inhibits GH secretion.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4441de23af9f4e34a3ad3eea4bff8936.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the correct sequence.",
    "choices": [
      {
        "id": 1,
        "text": "Protein kinase A \u00bb Adenylyl cyclase \u00bb cAMP"
      },
      {
        "id": 2,
        "text": "cAMP \u00bb Adenylyl cyclase \u00bb Protein kinase A"
      },
      {
        "id": 3,
        "text": "Adenylyl cyclase \u00bb cAMP \u00bb Protein kinase A"
      },
      {
        "id": 4,
        "text": "Protein kinase A \u00bb cAMP \u00bb Adenylyl cyclase"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The correct sequence in G<sub>s</sub> is adenylyl cyclase \u00bb cAMP \u00bb Protein kinase A.\u00a0</p>\n<p>G protein-coupled receptors (GPCRs) are cell membrane receptors that span across the membrane 7 times. They also serve as receptors for various <strong>peptide hormones, neurotransmitters</strong> and <strong>amino acids</strong>. Subtypes of GPCRs are distinguished by their alpha subunits. The important subtypes of GPCRs are Gs, Gi, and Gq.</p>\n<p>When hormones bind to the receptor, it enables the receptor to connect with a G protein. If the G protein activates the adenylyl cyclase-cAMP system, it is referred to as a <strong>Gs protein</strong>, indicating a stimulatory G protein. The Gs protein stimulates <strong>adenylyl cyclase</strong>, an enzyme located in the cell membrane, which then converts a small amount of cytoplasmic adenosine triphosphate into<strong> cAMP.</strong> This cAMP activates <strong>cAMP-dependent protein kinase</strong>, which phosphorylates specific proteins within the cell, initiating biochemical reactions that ultimately result in the cell\u2019s response to the hormone.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following instruments is not used in the Sahli's method of hemoglobin estimation?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Option D is <strong>RBC pipette</strong>, it is not used in <strong>Sahli's method of hemoglobin estimation</strong>. The instruments used are <strong>comparator with brown glass standard(</strong>Option A), <strong>graduated hemoglobin tube</strong>(Option B), <strong>Sahli's pipette </strong>(Option C)and<strong> stirrer</strong>.\u00a0</p>\n<p>Sahli's method of estimation of hemoglobin is based on<strong> colorimetric </strong>measurement of the intensity of color developed on the addition of dilute <strong>hydrochloric acid (N/10 HCl)</strong> reagent to the blood.\u00a0</p>\n<p>In Sahli's method, hemoglobin is converted to <strong>acid hematin</strong> with the action of dilute hydrochloric acid (N/10 HCl). The <strong>brown color</strong> of the acid hematin is matched to its intensity with a standard brown glass comparator in a visual colorimeter called Sahli\u2019s colorimeter. It can be used to estimate oxyHb and reduced Hb.</p>\n<p>Sahli's method is a <strong>simple bedside test </strong>and is<strong> cost-effective</strong>. However, it has some disadvantages, which include <strong>visual errors</strong>, the inability to measure other forms of hemoglobin like carboxyhemoglobin, methemoglobin, and sulfhemoglobin, fading of the comparator over time, and the color of acid hematin fading quickly.\u00a0</p>\n<p>The visual error can be reduced by taking the average of three readings; first, when the color is slightly darker than the standard; second, when the color exactly matches the standard; and third, when the color is slightly lighter than the standard.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f0ecb607a91a4f0d937527468bf01824.JPEG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/c23ea09c65dc4cb383b1d2d2e745ab2a.JPEG"
    ]
  },
  {
    "text": "Which neurotransmitter is secreted by the SA node in response to increased blood pressure?",
    "choices": [
      {
        "id": 1,
        "text": "Acetylcholine"
      },
      {
        "id": 2,
        "text": "Epinephrine"
      },
      {
        "id": 3,
        "text": "Norepinephrine"
      },
      {
        "id": 4,
        "text": "Dopamine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>NTS: Nucleus Tractus Solitarius</li>\n<li>CVLM: Caudal Ventrolateral Medulla</li>\n<li>RVLM : Rostral Ventrolateral Medulla (Vasomotor center)</li>\n<li>CVC : Cardiovagal center (Cardioinhibitory center)</li>\n<li>IML: intermediolateral nucleus\u00a0</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b3b78b38f849462e87bfe013e509b422x1280x1429.JPEG"
    ]
  },
  {
    "text": "Match the following hormones with their receptors.",
    "choices": [
      {
        "id": 1,
        "text": "A-1, B-2, C-3, D-4"
      },
      {
        "id": 2,
        "text": "A-1, B-3, C-2, D-4"
      },
      {
        "id": 3,
        "text": "A-3, B-4, C-1, D-2"
      },
      {
        "id": 4,
        "text": "A-4, B-2, C-3, D-1"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The correct answer is <strong>A-3, B-4, C-1, D-2.</strong></p>\n<table style=\"border-collapse: collapse; width: 71.2137%; height: 111.992px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50%; height: 22.3984px;\"><strong>Hormone \u00a0</strong></td>\n<td style=\"width: 50%; height: 22.3984px;\"><strong>Receptor</strong></td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50%; height: 22.3984px;\">A.Insulin</td>\n<td style=\"width: 50%; height: 22.3984px;\">3. Tyrosine Kinase</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50%; height: 22.3984px;\">B.Acetylcholine</td>\n<td style=\"width: 50%; height: 22.3984px;\">4. Ligand gated</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50%; height: 22.3984px;\">C.Growth Hormone</td>\n<td style=\"width: 50%; height: 22.3984px;\">\u00a01. JAK/STAT</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50%; height: 22.3984px;\">D.Thyroxine</td>\n<td style=\"width: 50%; height: 22.3984px;\">2. Nuclear Receptor\u00a0</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Insulin</strong> binds to a receptor that has intrinsic <strong>tyrosine kinase</strong> activity. Upon activation, the receptor phosphorylates itself and downstream signaling proteins. <strong>(A-3)</strong></p>\n<p><strong>Acetylcholine</strong> acts on <strong>nicotinic receptors</strong>, which are ligand-gated ion channels. Binding of acetylcholine opens the channel, allowing ion flow (e.g., Na\u207a or K\u207a). <strong>(B-4)</strong></p>\n<p><strong>Growth hormone</strong> binds to its receptor, which lacks intrinsic kinase activity but recruits <strong>Janus Kinase</strong> (JAK) to phosphorylate downstream proteins and <strong>activate the STAT</strong> (Signal Transducer and Activator of Transcription) pathway. <strong>(C-1)</strong></p>\n<p><strong>Thyroxine </strong>(and its active form, T3) binds to <strong>intracellular nuclear receptors</strong>. These hormone-receptor complexes act as transcription factors, regulating <strong>gene expression directly in the nucleus</strong>. <strong>(D-2)</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The O2 saturation with respect to PO2 is shown by the curve marked as 5. What happens to the oxygen Hb dissociation curve on transfusion of stored RBCs?",
    "choices": [
      {
        "id": 1,
        "text": "2"
      },
      {
        "id": 2,
        "text": "3"
      },
      {
        "id": 3,
        "text": "4"
      },
      {
        "id": 4,
        "text": "1"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><br />This is due to <strong>reduced levels of 2,3-bisphosphoglycerate (2,3-BPG)</strong> in stored red blood cells. 2,3-BPG is a <strong>metabolite</strong> in RBCs that binds to hemoglobin and <strong>reduces its affinity</strong> for oxygen.</p>\n<p>During storage, <strong>metabolic processes</strong> in RBCs <strong>slow</strong> down, leading to a <strong>depletion of 2,3-BPG</strong>. Lower 2,3-BPG levels make hemoglobin hold onto <strong>oxygen more tightly</strong>, impairing oxygen delivery to tissues. Hence, this <strong>increases hemoglobin's affinity</strong> for oxygen, <strong>shifting the curve to the left</strong>.</p>\n<p><strong>Other Options:</strong></p>\n<p><strong>Option B and C</strong>: show a <strong>right shift</strong> to the oxygen-hemoglobin dissociation curve<strong>.</strong><strong>\u2191 in 2,3-BPG</strong>\u00a0seen in <strong>increased anaerobic glycolysis</strong> leads to the <strong>right shift</strong> of the curve. Storage of blood causes depletion of 2,3-BPG, hence leading to left shift instead of right.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1bc5b140aef146b985f56948b13b5197.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cc344da99267410d99ce5b76a50b2088x944x976.JPEG"
    ]
  },
  {
    "text": "Not seen in decompression sickness",
    "choices": [
      {
        "id": 1,
        "text": "Vision loss"
      },
      {
        "id": 2,
        "text": "Hearing loss"
      },
      {
        "id": 3,
        "text": "Hemodilution"
      },
      {
        "id": 4,
        "text": "Coagulopathy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Hemodilution is not seen in decompression sickness. Instead, <strong>hemoconcentration</strong> is seen in <strong>decompression sickness</strong>.</p>\n<p>Hemodilution refers to the dilution of blood, usually due to excessive fluid intake or other medical conditions, but it is not a feature of decompression sickness.</p>\n<p><strong>Decompression sickness </strong>(DCS) is a condition that occurs when a person ascends too quickly after being exposed to high-pressure environments (such as deep-sea diving), causing nitrogen bubbles to form in the bloodstream and tissues.</p>\n<p>Other options</p>\n<p>Option A: <strong>Vision changes</strong> or <strong>loss</strong> can occur in DCS due to gas bubbles affecting the optic nerve or retinal circulation, leading to temporary or permanent vision impairment.</p>\n<p>Option B: Gas bubbles in DCS can also affect the auditory system, leading to <strong>hearing loss </strong>or <strong>tinnitus</strong>, a common feature of the condition.</p>\n<p>Option D: Decompression sickness can lead to <strong>coagulopathy</strong>, which refers to abnormal blood clotting due to the formation of nitrogen bubbles that disrupt the vascular system, potentially causing bleeding or clotting disorders.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following ovarian structures is responsible for the following finding?",
    "choices": [
      {
        "id": 1,
        "text": "Secondary follicle"
      },
      {
        "id": 2,
        "text": "Theca interna"
      },
      {
        "id": 3,
        "text": "Granulosa cell"
      },
      {
        "id": 4,
        "text": "Corpus luteum"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Option B and C: Theca interna and Granulosa cell</strong></p>\n<p>The <strong>theca interna</strong> is a layer of stromal cells just<strong> outside the basal lamina </strong>of the granulosa cells. They are composed of <strong>cuboidal endocrine cells</strong> with lipid droplets and abundant <strong>smooth endoplasmic reticulum</strong>, reflecting its role in <strong>steroidogenesis.</strong></p>\n<p><strong>Granulosa cells</strong> line the<strong> interior</strong> of the follicle. Cells are organized in<strong> layers</strong>, initially single-layered in primary follicles and multilayered in secondary follicles.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/da57acf7b6034239b358828d7624ea54.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8856fe8d2c20411f9c74f140eb4e9aa4x744x1166.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e9969240fe1540f7bf0548e600e680c4x902x670.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b6f52f5c5e36402587779cef42a6b678x792x454.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d81de9e8dec24aa9bb7909c0cc585df4x734x594.JPEG"
    ]
  },
  {
    "text": "Which of the following does not form the inner component of photoreceptors?",
    "choices": [
      {
        "id": 1,
        "text": "Mitochondria"
      },
      {
        "id": 2,
        "text": "Membranous disc"
      },
      {
        "id": 3,
        "text": "Golgi apparatus"
      },
      {
        "id": 4,
        "text": "Endoplasmic reticulum"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Among the given options, the <strong>membranous disc</strong> does not form the inner component of photoreceptors but instead forms the <strong>outer component</strong>.\u00a0</p>\n<p>The other three options i.e., mitochondria, Golgi apparatus, and endoplasmic reticulum form the inner component of photoreceptors.</p>\n<p>Photoreceptors (rods and cones) are specialized neurons in the retina with distinct structural components:</p>\n<p>\u2022 <strong>Outer segment</strong>: Contains membranous discs that have photopigments (like rhodopsin in rods and photopsins in cones) essential for light detection.</p>\n<p>\u2022 <strong>Inner segment</strong>: Contains cellular organelles responsible for metabolism and protein synthesis, such as <strong>mitochondria</strong>, <strong>Golgi apparatus</strong>, and <strong>endoplasmic reticulum</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a9620af83d7b413ba37bc1459d6d6852x1280x2558.JPEG"
    ]
  },
  {
    "text": "Which of the following does not stimulate catecholamine synthesis?",
    "choices": [
      {
        "id": 1,
        "text": "Hyperglycemia"
      },
      {
        "id": 2,
        "text": "Smoking"
      },
      {
        "id": 3,
        "text": "Standing posture"
      },
      {
        "id": 4,
        "text": "Exercise"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Hyperglycemia does not stimulate catecholamine synthesis. Instead, <strong>hypoglycemia</strong> stimulates <strong>catecholamine</strong> <strong>synthesis</strong>.</p>\n<p>Catecholamine synthesis is primarily stimulated by various physiological stressors and factors that activate the sympathetic nervous system, such as physical exertion(exercise), changes in posture, or certain external stimuli like smoking.\u00a0</p>\n<p>Other options:</p>\n<p>Option B: <strong>Smoking</strong> stimulates catecholamine release through the activation of the sympathetic nervous system, which increases catecholamines like adrenaline and norepinephrine.</p>\n<p>Option C: When a person <strong>stands</strong> up, it can lead to <strong>orthostatic hypotension</strong>, which triggers the release of catecholamines to help increase blood pressure and maintain adequate perfusion.</p>\n<p>Option D: <strong>Exercise</strong> stimulates the sympathetic nervous system and increases catecholamine production to support increased heart rate, blood pressure, and metabolic demands.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "While collecting a blood sample for serum calcium, which is easily alterable, which of the following should be prevented to measure it accurately?",
    "choices": [
      {
        "id": 1,
        "text": "If a tourniquet is needed, tie and release as soon as the sample is collected."
      },
      {
        "id": 2,
        "text": "Collecting after exercise."
      },
      {
        "id": 3,
        "text": "Making a fist is not recommended."
      },
      {
        "id": 4,
        "text": "Not collecting samples  from  patients immobilized for long periods of time"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Blood collection <strong>after exercise</strong> should be <strong>prevented</strong> to measure serum calcium accurately.</p>\n<p>Option A: A <strong>prolonged tourniquet</strong> is usually avoided while drawing blood for calcium measurements since hemoconcentration also leads to an increase in serum calcium levels. Hence, the tourniquet should be released as soon as the sample is collected.</p>\n<p>Option C: <strong>Fist-clenching</strong> or forearm exercise can lead to falsely elevated ionized (free) calcium levels. Hence, making a fist while blood collection is not recommended.</p>\n<p>Option D: Staying <strong>immobilised</strong> for long periods of time increases bone resorption and increases calcium levels. Hence, do not collect blood samples for serum calcium estimation in patients who are immobilised for long periods.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which receptor contributes to static 2 point discrimination?",
    "choices": [
      {
        "id": 1,
        "text": "Merkel cell"
      },
      {
        "id": 2,
        "text": "Meissner corpuscle"
      },
      {
        "id": 3,
        "text": "Pacinian corpuscle"
      },
      {
        "id": 4,
        "text": "All of them"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Other options:</strong></p>\n<p><strong>Option B: Meissner corpuscle: </strong>Meissner corpuscles are <strong>dendrites encapsulated</strong> in the connective tissue beneath the epidermis of glabrous (non-hairy) skin. They respond to tap and flutter (low-frequency vibration - 5-40Hz). They are <strong>rapidly adapting receptors.</strong></p>\n<p><strong>Option C: Pacinian corpuscle: </strong>Pacinian corpuscles are the<strong> largest cutaneous mechanoreceptor</strong>. They are present in the dermis of glabrous (non-hairy) and hairy skin. A Pacinian corpuscle consists of a nerve ending encapsulated by concentric layers of connective tissue, giving it an onion-like appearance. They respond to fast vibration (60-500Hz) and deep pressure. They are <strong>rapidly adapting receptors</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6c94b43fcf424667842f96d7f3982e2fx606x1242.JPEG"
    ]
  },
  {
    "text": "Mitochondrial sheaths are found in which part of the sperm?",
    "choices": [
      {
        "id": 1,
        "text": "Tail"
      },
      {
        "id": 2,
        "text": "Middle piece"
      },
      {
        "id": 3,
        "text": "Principal piece"
      },
      {
        "id": 4,
        "text": "Connecting piece"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Other options:</strong></p>\n<p><strong>Option A: Tail:</strong> Comprises the <strong>middle piece, principal piece</strong>, and <strong>end piece</strong> and is primarily responsible for motility.</p>\n<p><strong>Option C: Principle piece: </strong>Longest part of the tail which contains <strong>fibrous sheaths</strong> around the axoneme but lacks mitochondria.</p>\n<p><strong>Option D: Connecting piece: Links</strong> the<strong> head </strong>of the sperm to the <strong>tail </strong>(<strong>neck region</strong>). Does not contain mitochondrial sheaths.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/51a3b7b205884e1f9706ae6eab90c494x526x768.JPEG"
    ]
  },
  {
    "text": "Identify the correct option",
    "choices": [
      {
        "id": 1,
        "text": "1-Z line, 2-A band, 3-H zone, 4-I band"
      },
      {
        "id": 2,
        "text": "1-A band, 2-Z line, 3-H zone, 4-I band"
      },
      {
        "id": 3,
        "text": "1-T tubule, 2-I band, 3-H zone, 4-A band"
      },
      {
        "id": 4,
        "text": "1-T tubule, 2- A band, 3-I band, 4-H zone"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>H zone</strong> or H band denotes the <strong>less refractile</strong> region in the centre of A band.</p>\n<ul>\n<li><strong>A band </strong>\u2013 Anisotropic / <strong>Dark band</strong>: Formed by thick filaments - Myosin</li>\n<li><strong>I band </strong>\u2013 Isotropic / <strong>Light band</strong>: Formed by thin filaments \u2013 Actin, Troponin, Tropomyosin</li>\n<li><strong>M line</strong> \u2013 Seen in the <strong>centre of H band</strong>: Due to central bulge of A band</li>\n<li><strong>Z line</strong> \u2013 Seen in the <strong>centre of each I band</strong>: Narrow line with high refractile material appearing dark.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6efa18bd1ecb4aa18b906ae22af59ccd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2051f6fdae6e4ce3a3bb20b4e432eeb3x660x528.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3fd265303e5a42dcb23cc4f81ea3f96dx662x1270.JPEG"
    ]
  },
  {
    "text": "Which of these drug transport systems do not require ATP?",
    "choices": [
      {
        "id": 1,
        "text": "1,2,3"
      },
      {
        "id": 2,
        "text": "2,3,4"
      },
      {
        "id": 3,
        "text": "3,4,5"
      },
      {
        "id": 4,
        "text": "1,2,5"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Paracellular transport, Simple Diffusion</strong> and <strong>Facilitated diffusion</strong> <strong>do not require ATP</strong> as they are all passive transport mechanisms.</p>\n<p><strong>1: Simple diffusion : </strong>Simple diffusion is a<strong> passive transpor</strong>t mechanism where molecules (water, carbon dioxide, nitrogen) move from an area of <strong>high</strong> concentration to an area of<strong> low </strong>concentration and is not carrier mediated.\u00a0</p>\n<p><strong>2:\u00a0Paracellular : </strong>Paracellular transport involves movement of molecules through <strong>tight junctions</strong> between cells without the need for energy (ATP).</p>\n<p><strong>3: Facilitated diffusion : </strong>This also occurs along a concentration gradient, but involves<strong> carrier proteins </strong>to help move the drug across the membrane. No ATP is used because the process is still passive (driven by the concentration gradient).</p>\n<p><strong>4: Antiport (Na/K ATPase): </strong>Antiport transport system actively moves ions (Na+, K+) <strong>against their concentration </strong>gradient <strong>using ATP</strong> in the <strong>opposite direction</strong>. It is a form of primary active transport.</p>\n<p><strong>5: Symport :</strong> Two substances are transported in the <strong>same direction</strong> across a membrane. <strong>ATP is required</strong> to move substances against their gradients, often via a secondary active transport mechanism.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1176c03c4d2d47588d5e472437325995.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Choose the correct options from the given statements of the enteric nervous system-",
    "choices": [
      {
        "id": 1,
        "text": "1,2,3"
      },
      {
        "id": 2,
        "text": "1,4"
      },
      {
        "id": 3,
        "text": "1,3"
      },
      {
        "id": 4,
        "text": "2"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>The enteric nervous system functions independently of the brain and spinal Cord. (Statement 2)</strong></p>\n<p>Statement 2: <strong>Functions independent of brain and spinal cord</strong>: The enteric nervous system is often referred to as the \"<strong>second brain</strong>\" because it can function independently of the central nervous system (CNS). It has its own reflex circuits and can control gut motility, secretion, and blood flow without input from the brain or spinal cord, although it can be influenced by them.</p>\n<p>Statement 1: The <strong>vagus is the only afferent from the gut:</strong> While the vagus nerve does provide significant afferent (sensory) input from the gut, other nerves, such as those from the pelvic splanchnic nerves, also contribute to afferent pathways. Therefore, the vagus is not the only afferent nerve.</p>\n<p>Statement 3: <strong>\u200bMyenteric plexus in the lamina propria: </strong>The myenteric plexus is located <strong>between the circular and longitudinal muscle layers </strong>of the gut, not in the lamina propria (which is part of the mucosal layer of the gut).</p>\n<p>\u200b\u200bStatement 4: <strong>Exclusively under the influence of nerves</strong>: The enteric nervous system is influenced by nerves, but it <strong>also responds to hormonal and immune system signals.</strong> Therefore, it is not exclusively under neural influence.</p>\n<p>Statement 5: <strong>Only parasympathetic connects enteric to CNS</strong>:<strong> Both parasympathetic and sympathetic connect</strong> the enteric nervous system to the central nervous system. Not just the parasympathetic.</p>\n<p>The <strong>enteric nervous system</strong> consists of submucosal and myenteric plexi. This Plexi can function independently and is often referred to as the \u2018little brain\u2019. The enteric nervous system regulates gastrointestinal (GI) function and is connected to the central nervous system by parasympathetic and sympathetic fibers.\u00a0</p>\n<p>The <strong>myenteric (Auerbach\u2019s) plexus</strong> is present between the longitudinal and circular muscle layers. It innervates both these layers along the entire length of the GI tract. It primarily controls GI motility. On stimulation, it has the following effects:</p>\n<ul>\n<li>Increased tone of the GI wall</li>\n<li>Increased intensity and rate of rhythmic contractions</li>\n<li>Increased velocity of excitatory wave conduction\u00a0</li>\n</ul>\n<p>Some of the myenteric plexus neurons primarily release vasoactive inhibitory peptide (VIP), which causes the relaxation of the GI sphincters.\u00a0</p>\n<p>The <strong>submucosal (Meissner\u2019s) plexus</strong> is found between the mucosa and the circular muscle layers. It innervates the GI glands, endocrine cells, and submucosal blood vessels. It primarily controls GI secretions, absorption, and local blood flow.</p>\n<p>The<strong> parasympathetic innervation</strong> of the plexi is from the vagus and pelvic nerves. They release either acetylcholine or substance P. It generally increases GI motility and secretion.\u00a0</p>\n<p>The <strong>sympathetic innervation </strong>is from the celiac, superior mesenteric, inferior mesenteric, and hypogastric sympathetic ganglia. It generally inhibits GI motility and stimulates sphincteric contraction.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What causes decrease in GFR?",
    "choices": [
      {
        "id": 1,
        "text": "Decrease in glomerular coefficient"
      },
      {
        "id": 2,
        "text": "Decrease in glomerular oncotic pressure"
      },
      {
        "id": 3,
        "text": "Increase in glomerular hydrostatic pressure"
      },
      {
        "id": 4,
        "text": "Decrease of Bowman's hydrostatic pressure"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Decrease in glomerular coefficient</strong> causes <strong>decrease in GFR.</strong></p>\n<p>The <strong>glomerular filtration coefficient</strong> (Kf) is a measure of how efficiently the glomerulus filters blood into the kidney tubules. It depends on two key factors:</p>\n<ul>\n<li>Surface Area for Filtration: Greater surface area means higher filtration.</li>\n<li>Permeability of the Glomerular Membrane: Higher permeability leads to greater filtration.</li>\n</ul>\n<p><strong>Glomerular filtration rate </strong>(GFR) is the volume of fluid filtered from the renal glomerular capillaries into the Bowman's capsule per unit time.</p>\n<p>The GFR is determined by the sum of the hydrostatic and colloid osmotic forces across the glomerular membrane, which gives the net filtration pressure. It is dependent on Glomerular Kf (glomerular ultrafiltration coefficient) also.</p>\n<p>Mathematically, it can be expressed as follows:</p>\n<p><strong>GFR= Kf [PG + \u03c0B -PB- \u03c0G]</strong></p>\n<p>Forces <strong>favoring Filtration</strong></p>\n<ul>\n<li>PG: <strong>Glomerular hydrostatic pressure (Option C)</strong></li>\n<li>\u03c0B: <strong>Bowman\u2019s capsule oncotic pressure \u00a0</strong></li>\n</ul>\n<p>Forces opposing Filtration\u00a0</p>\n<ul>\n<li>PB: <strong>Bowman\u2019s capsule hydrostatic pressure (Option D)</strong></li>\n<li>\u03c0G: <strong>Glomerular capillary oncotic pressure (Option B)</strong></li>\n</ul>\n<p>The formula for glomerular filtration rate (GFR) incorporates Kf:</p>\n<ul>\n<li>A high Kf means efficient filtration (e.g., in healthy kidneys)-indicates high GFR</li>\n<li>A <strong>low Kf</strong> {occurs when the surface area is reduced (e.g., due to glomerular damage) or the membrane becomes less permeable (e.g., in diabetic nephropathy)}- indicates <strong>low GFR.</strong></li>\n</ul>\n<p>Kf is essential for maintaining proper kidney function, as it directly affects how well the kidneys filter blood to form urine.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 70-year-old man with a BP of 170/100mmHg. What is the reason for the increased pulse pressure in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Decreased arterial compliance"
      },
      {
        "id": 2,
        "text": "Increased cardiac output"
      },
      {
        "id": 3,
        "text": "Increased sympathetic outflow"
      },
      {
        "id": 4,
        "text": "Increased myocardial contractility"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Pulse pressure increases with age due to <strong>decreased arterial wall compliance</strong>.\u00a0</p>\n<p><strong>Diastolic blood pressure falls</strong> after 60 years of age due to increased arterial stiffness and <strong>decreased compliance</strong>, often associated with <strong>arteriosclerosis</strong>. As the left ventricle contracts against stiffer, less compliant arteries, <strong>systolic blood pressure</strong> also <strong>increases</strong>.\u00a0</p>\n<p>As a result of these two changes, <strong>pulse pressure increases</strong> (\u2191PP = \u2191SBP - \u2193DBP)\u00a0</p>\n<p>The factors that affect the pulse pressure:</p>\n<ul>\n<li>the stroke volume output of the heart</li>\n<li>the compliance or total distensibility of the arterial walls</li>\n<li>the character of ejection from the heart during systole (less important)</li>\n</ul>\n<p><strong>Pulse pressure = Stroke volume/ arterial compliance</strong></p>\n<p>Widened pulse pressure (&gt; 40 mm Hg) occurs with several diseases such as:</p>\n<ul>\n<li>Aortic regurgitation</li>\n<li>Aortic sclerosis</li>\n<li>Severe iron deficiency anaemia</li>\n<li>Arteriosclerosis</li>\n<li>Hyperthyroidism</li>\n</ul>\n<p>In the majority of these cases, systolic pressures increase while diastolic pressures remain near normal.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Physiological dead space :",
    "choices": [
      {
        "id": 1,
        "text": "Can be measured by spirometry"
      },
      {
        "id": 2,
        "text": "Is lesser than anatomical dead space"
      },
      {
        "id": 3,
        "text": "Represents inadequately ventilated alveoli"
      },
      {
        "id": 4,
        "text": "Represents inadequately perfused alveoli"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Physiological dead space represents <strong>inadequately perfused alveoli</strong>.</p>\n<p><strong>Physiological dead space</strong> is the part of the respiratory system where <strong>no gas exchange</strong> occurs. It includes:</p>\n<ol>\n<li><strong>Anatomic dead space:</strong> Air in the <strong>conducting airways </strong>(nose, trachea, bronchi) that doesn't reach the alveoli.</li>\n<li><strong>Alveolar dead space</strong>: Air in alveoli that are ventilated but <strong>not perfused </strong>by blood.</li>\n</ol>\n<p>Together, it represents the total volume of air that doesn't participate in oxygen and carbon dioxide exchange.<strong>(Option B)</strong></p>\n<p><strong>Anatomical dead space</strong> refers to the volume of all the space of the respiratory system other than the alveoli that <strong>do not participate in gas exchange</strong>. The anatomical dead space is not altered with a change in ventilation.</p>\n<p>In healthy individuals:</p>\n<ul>\n<li>Anatomical dead space = 150 mL.</li>\n<li>Alveolar dead space is usually zero (increased in diseased conditions).</li>\n</ul>\n<p><strong>Alveolar Dead space </strong>represents inadequately perfused alveoli <strong>(wasted ventilation). (Option C)</strong></p>\n<p>In <strong>normal</strong> individuals, <strong>physiological dead space</strong> remains unaltered and is <strong>equal</strong> to the <strong>anatomical dead space</strong> (volume of all the space of the respiratory system other than the alveoli that do not participate in gas exchange).</p>\n<p>Dead space <strong>cannot</strong> be measured using <strong>spirometry</strong>. <strong>(Option A)</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What contributes to the latent period of muscle twitch?",
    "choices": [
      {
        "id": 1,
        "text": "1,2,4"
      },
      {
        "id": 2,
        "text": "1,2,3"
      },
      {
        "id": 3,
        "text": "3,4"
      },
      {
        "id": 4,
        "text": "2,3"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Neuromuscular transmission, Excitation contraction coupling and transmission impulse from nerve coupling contribute to latent period of muscle twitch.</p>\n<p>The <strong>latent period </strong>of a muscle twitch is the brief delay between the application of a stimulus (such as a nerve impulse) and the onset of muscle contraction. During this period, several physiological processes occur, but <strong>neuromuscular transmission</strong> and <strong>excitation-contraction coupling</strong> primarily contribute to this delay.</p>\n<p><strong>Neuromuscular transmission:</strong> The action potential travels down the motor neuron to the neuromuscular junction. Acetylcholine (ACh) is released into the synaptic cleft and binds to receptors on the muscle fiber's sarcolemma, triggering an action potential in the muscle fiber. <strong>(Statement 1)</strong></p>\n<p><strong>Excitation-contraction coupling:</strong> The action potential propagates along the sarcolemma and into the transverse (T) tubules. This triggers the release of calcium ions from the sarcoplasmic reticulum into the cytosol. Calcium binds to troponin, initiating the interaction of actin and myosin filaments. <strong>(Statement 2)</strong></p>\n<p><strong>Reuptake of calcium back into the sarcoplasmic reticulum: </strong>This occurs during the <strong>relaxation phase</strong>, not the latent period. <strong>(Statement 3)</strong></p>\n<p><strong>Transmission of impulse from nerve:</strong> This is a part of neuromuscular transmission and is involved in the latent period. <strong>(Statement 4)</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Mechanical nociceptors and their response to a probe with a blunt object, pinprick, and toothed forceps with serrations are recorded as an output of a force transducer coupled to the stimulator. What could be inferred from this?",
    "choices": [
      {
        "id": 1,
        "text": "There are no responses from the nociceptors when stimulated by blunt forceps"
      },
      {
        "id": 2,
        "text": "Pinching with toothed forceps causes stimulation of mechano-nociceptors, but no pain"
      },
      {
        "id": 3,
        "text": "Pricking with a needle does not stimulate nociceptors"
      },
      {
        "id": 4,
        "text": "Sharp pain sensation is carried by C fibres"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>There are no responses from the nociceptors when stimulated by blunt forceps.</strong></p>\n<p>Mechanical nociceptors typically respond to noxious mechanical stimuli, such as sharp pressure or intense stretch. A blunt object, such as blunt forceps, may not provide a strong enough stimulus to activate these nociceptors, leading to no response.</p>\n<p>The sharp painful sensation felt immediately upon injury is known as<strong> fast pain.</strong> The poorly localized dull aching pain is characteristic of <strong>slow pain</strong>. The nerve fibers carrying fast pain and slow pain are <strong>A\u03b4 and C respectively.</strong></p>\n<p>Nociceptors are innervated by both A\u03b4 and C fibers. A\u03b4 fibers are myelinated and larger in diameter with a faster conduction velocity. C fibers are unmyelinated and conduct impulses at a slower rate. When nociceptors are activated by a noxious stimulus, activated A\u03b4 fibers release glutamate and mediate fast pain. It is a rapid response that is responsible for localizing the noxious stimulus.</p>\n<p>Other Options:</p>\n<p><strong>Option B: Pinching with toothed forceps causes stimulation of mechanonociceptors, but no pain: </strong>Pinching with toothed forceps typically applies more localized pressure, which can activate mechanical nociceptors. However, it may still cause a<strong> painful sensation</strong>, not just a mechanical response. It is more likely that pain is perceived, even if the response is primarily mechanical.</p>\n<p><br /><strong>Option C: Pricking with a needle does not stimulate nociceptors:</strong> A needle prick is a <strong>sharp stimulus</strong> that activates nociceptors, particularly mechanical nociceptors in response to tissue damage.\u00a0</p>\n<p><br /><strong>Option D: Sharp pain sensation is carried by C fibers:</strong> Sharp pain (due to a needle prick) is typically carried by <strong>A-delta</strong> fibers, which transmit fast, localized pain sensations. C fibers are responsible for carrying dull, burning pain that occurs later after the initial sharp pain.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/46a6c6a414524f2286faab3b4bfb38c4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Peripheral chemoreceptors are most sensitive to?",
    "choices": [
      {
        "id": 1,
        "text": "Hypercapnia"
      },
      {
        "id": 2,
        "text": "Hypoxia"
      },
      {
        "id": 3,
        "text": "Acidosis"
      },
      {
        "id": 4,
        "text": "Alkalosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Peripheral chemoreceptors are most sensitive to<strong> hypoxia</strong>.</p>\n<p>Peripheral Chemoreceptors are located in the <strong>carotid bodies</strong> (at the bifurcation of the common carotid arteries) and <strong>aortic bodies</strong> (near the aortic arch). They are sensitive to changes in pO2, pCO2, and pH of the blood. In response to changes in these parameters, they send impulses to the <strong>medullary respiratory centers </strong>and modify the duration and frequency of respiratory cycles.</p>\n<p>Peripheral chemoreceptors are <strong>most sensitive </strong>to a <strong>drop in partial pressure of oxygen</strong> (PaO\u2082) in arterial blood.</p>\n<p><strong>Mechanism:</strong>\u00a0</p>\n<p><strong>Type I glomus cells </strong>in the carotid and aortic bodies have <strong>O2-sensitive K+ channels</strong>, which are <strong>inactivated in response to hypoxia</strong>. This reduces the K+ efflux, <strong>depolarizing</strong> the cell and causing Ca2+ in\ufb02ux, via L-type voltage-gated calcium channels. The <strong>Ca2+ influx</strong> triggers action potentials and consequent <strong>excitation </strong>of the <strong>afferent nerve endings</strong> in the peripheral chemoreceptors.</p>\n<p><strong>Hypoxia</strong> (PaO\u2082 &lt; 60 mmHg) strongly <strong>stimulates </strong>these receptors, leading to an increase in respiratory rate and depth to improve oxygenation.</p>\n<p><strong>Other Options:</strong></p>\n<p>Peripheral chemoreceptors also respond to <strong>hypercapnia (Option A)</strong> and <strong>acidosis (Option C)</strong>. However, these are primarily detected by <strong>central chemoreceptors</strong>, located in the medulla, which monitor CO\u2082 levels in cerebrospinal fluid.</p>\n<p><strong>Alkalosis (Option D) </strong>causes a <strong>weaker response</strong> from peripheral chemoreceptors compared to hypoxia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the marked structure.",
    "choices": [
      {
        "id": 1,
        "text": "Intercalated disc"
      },
      {
        "id": 2,
        "text": "Connective tissue"
      },
      {
        "id": 3,
        "text": "Cytoskeletal condensation"
      },
      {
        "id": 4,
        "text": "Nerve fibre"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>On microscopy, cardiac muscle can be identified by:</p>\n<ul>\n<li>Presence of striations similar to the skeletal muscle.</li>\n<li>Presence of single and centrally placed nucleus. A perinuclear halo may be seen surrounding the nucleus.</li>\n<li>The <strong>junctions</strong> between adjoining cardiac myocytes are seen as <strong>dark staining transverse lines</strong> running across the muscle fibre. These lines are called <strong>intercalated discs.</strong></li>\n<li>Cells within one fibre branch and join the cells in adjacent fibres.\u00a0</li>\n</ul>\n<p><strong>Other Options:</strong></p>\n<p><strong>Option B: Connective Tissue: </strong>Found surrounding the cardiac muscle cells, providing structural support, but not at the cell junctions.</p>\n<p><strong>Option C: Cytoskeletal condensation:</strong> Refers to cytoskeletal organization within a cell and is not visible as distinct structures in cardiac muscle histology.</p>\n<p><strong>Option D: Nerve Fibre: </strong>Present in cardiac tissue to innervate the heart but appears as separate structures and not within cardiac muscle fibers.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1b6a6d7a965b48cdb97efc881560417f.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9130cff56f574f31b9fe34e13b8cc2c4x592x560.JPEG"
    ]
  },
  {
    "text": "Which blood component is not separated by centrifugation in the blood bank?",
    "choices": [
      {
        "id": 1,
        "text": "Red blood cells"
      },
      {
        "id": 2,
        "text": "Platelets"
      },
      {
        "id": 3,
        "text": "Cryoprecipitate"
      },
      {
        "id": 4,
        "text": "Albumin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Albumin is not separated by centrifugation in the blood bank.</p>\n<p>In blood banks, <strong>centrifugation</strong> is used to separate the main components of blood into distinct layers for storage and transfusion purposes. These components include:</p>\n<ol>\n<li><strong>Red Blood Cells (RBCs): </strong>Separated by centrifugation and stored for patients with anemia or significant blood loss. <strong>(Option A)</strong></li>\n<li><strong>Platelets</strong>: Isolated through centrifugation of plasma-rich blood for use in patients with bleeding disorders. <strong>(Option B)</strong></li>\n<li><strong>Cryoprecipitate:</strong> Derived from plasma by controlled freezing and thawing, which allows the collection of clotting factors (e.g., Factor VIII, fibrinogen, von Willebrand factor). <strong>(Option C)</strong></li>\n</ol>\n<p><strong>Albumin</strong> is a <strong>plasma protein</strong> that is extracted through a process called <strong>fractionation</strong>, not simple centrifugation. This involves the use of chemical, temperature, and pH adjustments to isolate albumin from plasma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/971adcf1231c4deaa0508f8a898a3db9x678x502.JPEG"
    ]
  }
];
        let quizName = '029 Physiology Ini-Cet 2024';
        let hierarchy = ["Marrow", "PYQs", "Physiology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>