<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 20 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2023
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A patient with a category-II dog bite presents to the trauma center on 2nd September 2022. After the local wound management, the patient has been prescribed a schedule for rabies vaccine administration. He marks the days when he is supposed to take the vaccine in a calendar as shown below.  Which regimen is likely prescribed to the patient? What is the route of administration in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Essen, intradermal"
      },
      {
        "id": 2,
        "text": "Thai red cross, intradermal"
      },
      {
        "id": 3,
        "text": "Thai red cross, intramuscular"
      },
      {
        "id": 4,
        "text": "Essen, intramuscular"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p style=\"text-align: justify;\">The regimen prescribed here is the\u00a0<strong>Essen\u00a0</strong>regimen which is intramuscular.</p>\n<p style=\"text-align: justify;\"><strong>Post-exposure prophylaxis regimen for rabies:</strong></p>\n<p style=\"text-align: justify;\"><strong>Intramuscular regimen</strong>: In this regimen,\u00a01 ml or 0.5 ml of vaccine is injected into the deltoid in patients with category II and III wounds.</p>\n<ul style=\"text-align: justify;\">\n<li><strong>Essen regimen</strong>: It is a 5-dose regimen in which 1 dose of vaccine is given on days 0, 3, 7, 14, and 28 each. (1,1,1,1,1)</li>\n<li><strong>Thai red cross regimen</strong>: It is a 4-dose multisite regimen in which 2 doses of vaccine are given on day 0, 3, 7, 28 each. (2-2-2-0-2)</li>\n</ul>\n<p style=\"text-align: justify;\"><strong>Intradermal regimen</strong>: In this regimen, 0.1 ml of injection is given at 2 sites\u00a0on days 0, 3, 7, and 28 each.</p>\n<p style=\"text-align: justify;\">The following<strong>\u00a0measures</strong> should be<strong> taken immediately\u00a0</strong>to <strong>stop </strong>the<strong> contraction</strong> of <strong>rabies</strong>:</p>\n<ul style=\"text-align: justify;\">\n<li><strong>Cleansing</strong> - The most important step in the prevention of rabies is <strong>washing</strong> the affected area with <strong>plenty </strong>of <strong>soap </strong>and<strong> water </strong>under a running tap for <strong>15 minutes</strong>. This is a standard procedure that minimizes the contraction of rabies.</li>\n<li><strong>Chemical treatment</strong> - Irrigation of the wound should then be done with virucidal agents like<strong> alcohol,\u00a0tincture</strong>, 0.01% solution of aqueous\u00a0iodine, or <strong>povidone-iodine</strong>. Even irrigating the wound with <strong>cetrimide + chlorhexidine</strong> solution can be done. This process eliminates the residual virus in the wound.</li>\n<li><strong>Suturing</strong> - <strong>Bite wounds</strong> are <strong>not sutured</strong> generally. If suturing is necessary, it is done after 24-48 hours under the cover of local infiltration of the rabies immunoglobulin which is generally done in category III wounds.</li>\n<li><strong>Other measures</strong> - Local antibiotics and tetanus toxoid should be given.</li>\n</ul>\n<p style=\"text-align: justify;\">Different wound categories for post-exposure prophylaxis:</p>\n<table style=\"height: 177px;\" width=\"436\">\n<tbody>\n<tr>\n<td style=\"width: 210px;\"><strong>Categories of wound</strong></td>\n<td style=\"width: 210px;\"><strong>Post-exposure prophylaxis</strong></td>\n</tr>\n<tr>\n<td style=\"width: 210px;\"><strong>Category I</strong> - touching or feeding animals, licks on intact skin</td>\n<td style=\"width: 210px;\">None</td>\n</tr>\n<tr>\n<td style=\"width: 210px;\"><strong>Category II</strong> - nibbling of uncovered skin, minor scratches, or abrasions <br />without bleeding</td>\n<td style=\"width: 210px;\">Immediate vaccination and <br />local treatment of the wound</td>\n</tr>\n<tr>\n<td style=\"width: 210px;\"><strong>Category III</strong>- single or multiple transdermal bites or scratches, licks on broken skin\u00a0contacts with bats</td>\n<td style=\"width: 210px;\">Immediate vaccination and <br />administration of rabies <br />immunoglobulin; local <br />treatment of the wound</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5ce804b00e1b465fafc3e65fb7cb2681.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A neonate presents with feeding difficulty and failure to thrive. Her urine has a peculiar burnt sugar odour due to an excess of branched-chain amino acids. Which of the following amino acid is not restricted in this neonate's diet?",
    "choices": [
      {
        "id": 1,
        "text": "Methionine"
      },
      {
        "id": 2,
        "text": "Valine"
      },
      {
        "id": 3,
        "text": "Leucine"
      },
      {
        "id": 4,
        "text": "Isoleucine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In maple syrup urine disease (<strong>MSUD</strong>), only <strong>branched-chain amino acids</strong> are restricted, hence, <strong>methionine</strong> <strong>does not need any restriction in diet.</strong></p>\n<p>Branched-chain amino acids are:</p>\n<ul>\n<li><strong>Leucine</strong>\u00a0(L)</li>\n<li><strong>Isoleucine\u00a0</strong>(I)</li>\n<li><strong>Valine\u00a0</strong>(V)</li>\n</ul>\n<p>MSUD is an <strong>autosomal recessive</strong> disorder in which there is a partial or complete deficiency of\u00a0<strong>branched-chain ketoacid dehydrogenase</strong>\u00a0complex (BCKD). This impairs the metabolism of branched-chain amino acids.\u00a0These amino acids, particularly leucine and their metabolite accumulate in the blood, causing toxic effects on the brain.\u00a0Features include feeding problems, vomiting, ketosis, and a characteristic\u00a0<strong>burnt sugar</strong>\u00a0odour/<strong>maple syrup-like odour</strong>\u00a0of\u00a0<strong>urine</strong>,\u00a0sweat, and\u00a0cerumen.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2b61ae3b601a4b78b29862ed1e28df01x1279x1324.JPEG"
    ]
  },
  {
    "text": "A 23-year-old football player is brought unresponsive to the emergency room following trauma to the head. His teammates recall that he was alert and responsive for a brief period in the locker room before he became unconscious. CT head was suggestive of an epidural hematoma. What is the definitive management for his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Hyperventilation"
      },
      {
        "id": 2,
        "text": "Intravenous mannitol"
      },
      {
        "id": 3,
        "text": "Surgical evacuation"
      },
      {
        "id": 4,
        "text": "Intravenous fluids"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above clinical scenario along with the image showing lens-shaped hemorrhage is consistent with acute <strong>epidural hematoma</strong>. <strong>Craniotomy</strong> with<strong> emergency evacuation</strong> of the<strong> hematoma&nbsp;</strong>is the definitive management of this condition.</p>\n<p>Extradural hematoma (EDH) is also known as an<strong>&nbsp;epidural</strong> hematoma. It is a collection of blood between the&nbsp;<strong>outer layer of the dura</strong> and the <strong>inner surface of the skull</strong> which is called the periosteal layer. The bleeding is most commonly due to torn <strong>middle meningeal artery</strong>.</p>\n<p>EDH is commonly associated with a history of<strong> trauma</strong> and<strong> associated skull fracture. </strong>&nbsp;It is associated with an underlying<strong> fracture</strong> of the<strong> squamous</strong> part of the<strong> temporal bone.</strong></p>\n<p>Epidural hematoma may present with a transient loss of consciousness immediately following the trauma followed by a <strong>lucid interval</strong>, where consciousness is recovered. The patient subsequently worsens his neurological status due to continued bleeding from the site as seen in this patient. It can cause a <strong>mass effect with herniation</strong></p>\n<p>EDH is diagnosed with&nbsp;<strong>CT</strong> and<strong> MRI</strong>.<strong>&nbsp;</strong>CT image shows the typical&nbsp;<strong>bi-convex hyperdense</strong> lesion <strong>not crossing cranial sutures,</strong> but can<strong> cross&nbsp;venous sinuses</strong>.</p>\n<p>The definitive management for any patient with <strong>GCS&lt;9</strong> and <strong>pupillary abnormalities</strong> such as anisocoria is <strong>craniotomy</strong> with emergency evacuation of the hematoma.&nbsp;Surgery is also recommended for patients with <strong>worsening neurological status</strong> and <strong>hematoma</strong> volume<strong> &gt;30ml</strong> regardless of neurological status</p>\n<p>The image given below shows a CT scan depicting EDH. Note the biconvex or lens-shaped hematoma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d349d08c232d4b29b72311607b38fcbbx784x963.JPEG"
    ]
  },
  {
    "text": "In a live donor kidney transplantation, the donor's renal artery should be anastomosed with which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "End-to-end anastomosis with internal iliac artery"
      },
      {
        "id": 2,
        "text": "End-to-side anastomosis with internal iliac artery"
      },
      {
        "id": 3,
        "text": "End-to-end anastomosis with external iliac artery"
      },
      {
        "id": 4,
        "text": "End-to-side anastomosis with external iliac artery"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In a live donor kidney transplantation, the donor's renal artery is <strong>end-to-end anastomosed </strong>with the recipient's <strong>internal iliac artery</strong>.</p>\n<p>In the renal transplant, the renal vessels are anastomosed as follows:</p>\n<table style=\"height: 95px;\" width=\"568\">\n<tbody>\n<tr>\n<td style=\"width: 172.5625px;\">\u00a0</td>\n<td style=\"width: 181.28125px; text-align: center;\"><strong>Living donor</strong></td>\n<td style=\"width: 192.171875px; text-align: center;\"><strong>Cadaveric donor</strong></td>\n</tr>\n<tr>\n<td style=\"width: 172.5625px; text-align: center;\"><strong>Anastomosis</strong></td>\n<td style=\"width: 181.28125px; text-align: center;\">End-to-end</td>\n<td style=\"width: 192.171875px; text-align: center;\">End-to-side</td>\n</tr>\n<tr>\n<td style=\"width: 172.5625px; text-align: center;\"><strong>Recipient artery</strong></td>\n<td style=\"width: 181.28125px; text-align: center;\">Internal iliac artery</td>\n<td style=\"width: 192.171875px; text-align: center;\">External iliac artery</td>\n</tr>\n<tr>\n<td style=\"width: 172.5625px; text-align: center;\"><strong>Recipient vein</strong></td>\n<td style=\"width: 181.28125px; text-align: center;\">External iliac vein</td>\n<td style=\"width: 192.171875px; text-align: center;\">External iliac vein</td>\n</tr>\n</tbody>\n</table>\n<p>The below image shows the different types of anastomosis in kidney transplantation from live and deceased donors.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3d215acdc27d4d6d9f0f3a5a5419dd3ex1280x2014.JPEG"
    ]
  },
  {
    "text": "Match the following endoscopic images with their respective diagnoses?",
    "choices": [
      {
        "id": 1,
        "text": "A- Barrett's esophagus, B- Mallory Weiss tear"
      },
      {
        "id": 2,
        "text": "A- Mallory Weiss tear, B- Barrett's esophagus"
      },
      {
        "id": 3,
        "text": "A- Crohn\u2019s Disease, B- Ulcerative Colitis"
      },
      {
        "id": 4,
        "text": "A- Ulcerative Colitis, B- Crohn\u2019s Disease"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Image A is of <strong>ulcerative colitis</strong> and image B is of <strong>Crohn's disease</strong>.</p>\n<p>The given<strong> image A</strong> shows continuous involvement of mucosa with no normal mucosa in between which indicates <strong>ulcerative colitis</strong>.&nbsp;Fistula is not a complication of ulcerative colitis.&nbsp;</p>\n<p>Image<strong> B&nbsp;</strong>shows a&nbsp;<strong>cobblestone appearance</strong>&nbsp;seen in&nbsp;<strong>Crohn's disease</strong>. Normal mucosa in between the ulcers leads to this appearance. Fine granular mucosa is the earliest barium enema finding in Ulcerative colitis.&nbsp;<strong>Fistula</strong> is seen with <strong>Crohn&rsquo;s disease</strong>.</p>\n<p><strong>Barrett's esophagus</strong> is a condition in which the mucosal lining of the swallowing tube that connects the mouth to the stomach (esophagus) becomes damaged by acid reflux, which causes the lining to thicken and become red. It is associated with an increased risk of developing esophageal cancer.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d3568a124db0416f9b7a596aabe9a20e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d787db00369f450d880380069738a1d1x376x342.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c5d0f7193a874dbaa5d87694b9ff7355x722x558.JPEG"
    ]
  },
  {
    "text": "Identify the type of wound from the image.",
    "choices": [
      {
        "id": 1,
        "text": "Defense wounds"
      },
      {
        "id": 2,
        "text": "Antemortem wound"
      },
      {
        "id": 3,
        "text": "Postmortem wound"
      },
      {
        "id": 4,
        "text": "Hesitation cuts"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows <strong>irregular</strong> and <strong>ragged </strong>cut wounds\u00a0over the <strong>palmar</strong> surface of the hands and fingers, which is suggestive of <strong>defense wounds.</strong></p>\n<p><strong>Defense wounds\u00a0</strong>are the wounds that occur as a result of the victim's attempt to save himself from an injury.</p>\n<p>It can be active or passive. Active defense wounds occur when the victim tries to grasp the weapon, while passive wounds result when the victim raises the hands, arms, or legs in an attempt to protect the eyes, head, or neck.</p>\n<p>The morphology of the wound depends upon the type of weapon and the attack. In a <strong>sharp injury</strong> due to a <strong>single-edged</strong> weapon, a <strong>single cut</strong> may be seen on the<strong> palm </strong>or the bends of <strong>fingers</strong>. In the case of a <strong>double-edged</strong> sharp weapon, <strong>cuts</strong> are seen on <strong>both the palm </strong>and<strong> fingers</strong>. The cuts are irregular in-depth and ragged.</p>\n<p>The defense wounds signify <strong>homicide</strong>, and in females, they often indicate <strong>sexual assault.</strong>\u00a0</p>\n<p>Other options:</p>\n<p>Options B and C: <strong>Antemortem</strong> and <strong>postmortem</strong> wounds are of medicolegal importance while evaluating trauma. They can be differentiated by the following features:</p>\n<table style=\"width: 440px;\">\n<tbody>\n<tr style=\"height: 26.5391px;\">\n<td style=\"width: 141px; height: 26.5391px;\">Feature</td>\n<td style=\"width: 245.203px; height: 26.5391px;\"><strong>Antemortem wounds</strong></td>\n<td style=\"width: 235.797px; height: 26.5391px;\"><strong>Postmortem wounds</strong></td>\n</tr>\n<tr style=\"height: 54px;\">\n<td style=\"width: 141px; height: 54px;\">Edges</td>\n<td style=\"width: 245.203px; height: 54px;\">Swollen edges with wound gapes</td>\n<td style=\"width: 235.797px; height: 54px;\">Closely approximated with no wound gapes\u00a0</td>\n</tr>\n<tr style=\"height: 36px;\">\n<td style=\"width: 141px; height: 36px;\">Hemorrhage</td>\n<td style=\"width: 245.203px; height: 36px;\">Arterial type of hemorrhage</td>\n<td style=\"width: 235.797px; height: 36px;\">Venous hemorrhage</td>\n</tr>\n<tr style=\"height: 54px;\">\n<td style=\"width: 141px; height: 54px;\">Spurting</td>\n<td style=\"width: 245.203px; height: 54px;\">Spurting of blood seen with firmly coagulated blood</td>\n<td style=\"width: 235.797px; height: 54px;\">No spurts and no clotting\u00a0</td>\n</tr>\n<tr style=\"height: 54px;\">\n<td style=\"width: 141px; height: 54px;\">Vital reaction</td>\n<td style=\"width: 245.203px; height: 54px;\">Inflammation and repair seen</td>\n<td style=\"width: 235.797px; height: 54px;\">No signs of inflammation and repair</td>\n</tr>\n</tbody>\n</table>\n<p>Option D: <strong>Hesitation cuts </strong>are a feature of self-inflicted wounds or <strong>suicide</strong>. It typically appears as multiple, small, and <strong>superficial wounds</strong> on the skin, at the beginning of an incised wound. The <strong>common sites</strong> are the throat, wrist, and front of the chest.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/971b4f310587473097ba4f7f6c53826c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A diagnostic test has specificity of 0.80 and sensitivity of 0.90 when the prevalence of the disease in a population is 30%. What is the negative predictive value of the test?",
    "choices": [
      {
        "id": 1,
        "text": "62%"
      },
      {
        "id": 2,
        "text": "70%"
      },
      {
        "id": 3,
        "text": "Less than 50%"
      },
      {
        "id": 4,
        "text": "95%"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The Negative Predictive value is<strong> 95%</strong><br /><br />For convenience, assume the total population in this scenario is <strong>100</strong>.</p>\n<p>Total diseased population would then be <strong>30</strong> and disease free would be <strong>70</strong>.</p>\n<p>Since sensitivity is 0.90, total <strong>true positives (TP) </strong>would be <strong>27</strong>.</p>\n<p>Since specificity is 0.80, total <strong>true negatives (TN)</strong> would be 56.</p>\n<p>The hypothetical table would be:</p>\n<table>\n<tbody>\n<tr>\n<td width=\"61\">\n<p><strong>&nbsp;</strong></p>\n</td>\n<td width=\"78\">\n<p><strong>Disease +</strong></p>\n</td>\n<td width=\"78\">\n<p><strong>Disease -</strong></p>\n</td>\n<td width=\"48\">\n<p>Total</p>\n</td>\n</tr>\n<tr>\n<td width=\"61\">\n<p><strong>Test +</strong></p>\n</td>\n<td width=\"78\">\n<p>27 (TP)</p>\n</td>\n<td width=\"78\">\n<p>14 (FP)</p>\n</td>\n<td width=\"48\">\n<p>41</p>\n</td>\n</tr>\n<tr>\n<td width=\"61\">\n<p><strong>Test -</strong></p>\n</td>\n<td width=\"78\">\n<p>3 (FN)</p>\n</td>\n<td width=\"78\">\n<p>56 (TN)</p>\n</td>\n<td width=\"48\">\n<p>59</p>\n</td>\n</tr>\n<tr>\n<td width=\"61\">\n<p>Total</p>\n</td>\n<td width=\"78\">\n<p>30</p>\n</td>\n<td width=\"78\">\n<p>70</p>\n</td>\n<td width=\"48\">\n<p>100</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><strong>&nbsp;Negative predictive value (NPV) </strong>= TN/(FN + TN) x 100 = 56/59 = 0.949 = <strong>95%</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 24-year-old woman delivered a healthy baby at 38 weeks of gestation. Twenty minutes later, the mother developed severe shortness of breath and appeared cyanotic. Her ECG and chest X-ray showed no abnormalities. Despite resuscitation, she died after a few hours. Her lab reports revealed the following findings. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Eclampsia"
      },
      {
        "id": 2,
        "text": "Tension pneumothorax"
      },
      {
        "id": 3,
        "text": "Bacterial sepsis"
      },
      {
        "id": 4,
        "text": "Amniotic fluid embolism"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The most probable diagnosis is <strong>amniotic fluid embolism</strong>. The given lab evaluation points to <strong>disseminated</strong> <strong>intravascular</strong> <strong>coagulation (DIC).&nbsp;</strong></p>\n<p>Amniotic fluid embolism presents with a classic triad of&nbsp;<strong>hemodynamic</strong>&nbsp;and&nbsp;<strong>respiratory compromise</strong>, along with&nbsp;<strong>DIC</strong>. Usually, it presents during the&nbsp;<strong>late stages</strong>&nbsp;of&nbsp;<strong>labour</strong>&nbsp;or&nbsp;<strong>immediate postpartum (peripartum period)</strong>. Gasping for air,&nbsp;<strong>seizures</strong>, and cardiorespiratory arrest are other features. Other causes for a similar presentation such as myocardial infarction, pulmonary embolism, and anaphylactic shock needs to be ruled out.&nbsp;</p>\n<div class=\"page\" title=\"Page 1\">\n<p>According to the American Society for Maternal-Fetal Medicine, the diagnostic criteria for amniotic fluid embolism include:</p>\n<ul>\n<li>Sudden onset cardiorespiratory arrest, or both hypotension and respiratory compromise</li>\n<li><strong>Overt DIC</strong></li>\n<li>Onset during labour or&nbsp;<strong>within 30 minutes</strong>&nbsp;of delivery of the placenta</li>\n<li><strong>No fever</strong>&nbsp;(&ge;38&deg;C)</li>\n</ul>\n<p>The currently accepted mechanism is the entry of<strong>&nbsp;fetal material</strong>&nbsp;into the&nbsp;<strong>maternal circulation</strong>&nbsp;which leads to the activation of proinflammatory mediator systems. This results in pulmonary vasoconstriction and hypertension. The tissue factor present in fetal material also activates&nbsp;<strong>factor VII</strong>&nbsp;resulting in DIC.</p>\n<p><strong>Risk factors</strong>&nbsp;include&nbsp;rapid labour,&nbsp;meconium-stained liquor,<strong>&nbsp;cesarean delivery,</strong>&nbsp;placenta previa, eclampsia,&nbsp;<strong>placental abruption</strong>, polyhydramnios, uterine tears, post-term pregnancy, and advanced maternal age.</p>\n<p>The condition can be fatal and management includes&nbsp;<strong>cardiopulmonary resuscitation</strong>&nbsp;and advanced cardiac life support.</p>\n<p><strong>Autopsy</strong>&nbsp;<strong>findings</strong>&nbsp;as shown in the image below, include the presence of&nbsp;<strong>squamous cells</strong>&nbsp;shed from the fetal skin, lanugo hair, fat from vernix caseosa, and mucin derived from the fetal respiratory or gastrointestinal tract in the<strong>&nbsp;maternal pulmonary microvasculature.</strong></p>\n</div>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/61213736d22f44f39b4aa49d56199d7ax1279x1187.JPEG"
    ]
  },
  {
    "text": "The HACEK group of bacteria includes all of the following except:",
    "choices": [
      {
        "id": 1,
        "text": "Aggregatibacter actinomycetemcomitans"
      },
      {
        "id": 2,
        "text": "Kingella kingae"
      },
      {
        "id": 3,
        "text": "Haemophilus parainfluenzae"
      },
      {
        "id": 4,
        "text": "Corynebacterium jeikeium"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><em><strong>Corynebacterium jeikeium </strong></em>is not included in HACEK group.</p>\n<div class=\"page\" title=\"Page 1180\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>HACEK organisms are <strong>fastidious, gram-negative bacteria</strong>. They are slow growing and requires a carbon dioxide atmosphere. They do not grow on routine media used for enteric bacteria like MacConkey agar.</p>\n</div>\n</div>\n</div>\n</div>\n<p>The HACEK group of bacteria includes</p>\n<ul>\n<li><em><strong>H</strong>aemophilus</em> species</li>\n<li><em><strong>A</strong>ggregatibacter</em> species</li>\n<li><em><strong>C</strong>ardiobacterium hominis</em></li>\n<li><em><strong>E</strong>ikenella corrodens</em></li>\n<li><em><strong>K</strong>ingella kingae</em></li>\n</ul>\n<div class=\"page\" title=\"Page 283\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>These organisms are present in the oral cavity as part of the <strong>normal respiratory microbiota</strong>. Eikenella and Cardiobacterium species have been recovered from the gastrointestinal tract and female genital tract. They cause infective endocarditis.</p>\n<p>Haemophilus parainfluenzae is the most common Haemophilus species that is isolated from HACEK endocarditis cases.</p>\n</div>\n</div>\n</div>\n</div>\n<p>Note:</p>\n<ul>\n<li>The species <em>Haemophilus aphrophilus</em>, and <em>Haemophilus&nbsp;paraphrophilus</em> have been combined into a single species, <em>aphrophilus</em>, and placed under the genus <em>Aggregatibacter</em>.</li>\n<li><em>Haemophilus segnis</em> and<em> Actinobacillus actinomycetemcomitans</em> have also been added to the genus <em>Aggregatibacter</em>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with palpitations and features of right heart failure. Family history is positive for sudden cardiac death in his brother. His ECG is given below. The marked changes in the image are described as:",
    "choices": [
      {
        "id": 1,
        "text": "Delta wave"
      },
      {
        "id": 2,
        "text": "Epsilon wave"
      },
      {
        "id": 3,
        "text": "Osborn wave"
      },
      {
        "id": 4,
        "text": "Saw-tooth wave"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The changes marked in ECG show a <strong>notched deflection</strong> at the end of the QRS complex due to delayed ventricular activation known as an <strong>epsilon wave. </strong>It\u00a0is commonly seen in patients with <strong>arrhythmogenic right ventricular cardiomyopathy (ARVC)</strong>.</p>\n<p>ARVC is<strong>\u00a0autosomal dominant</strong>\u00a0cardiomyopathy characterised by\u00a0<strong>fibrofatty replacement</strong>\u00a0in the myocardium of the ventricles. It most commonly affects the\u00a0<strong>right ventricle</strong>. It is due to mutations in the gene encoding desmosome-associated protein<strong>\u00a0plakophilin 2</strong>. This leads to\u00a0defective cell-adhesion proteins in the desmosomes that link adjacent cardiac myocytes.</p>\n<p>The patients usually present with <strong>rhythm disturbances</strong>, <strong>right-sided heart failure,</strong> and <strong>sudden cardiac death</strong>. ARVC is associated with <strong>Naxos syndrome</strong>. This syndrome is characterised by arrhythmogenic cardiomyopathy and\u00a0<strong>hyperkeratosis</strong> of the palmar and the plantar surfaces.\u00a0</p>\n<p>Morphology shows\u00a0<strong>severe thinning</strong>\u00a0of the\u00a0<strong>right ventricular wall</strong>\u00a0due to loss of myocytes, accompanied by extensive fatty infiltration and fibrosis.\u00a0In ARVC, there is <strong>T inversion</strong> and delayed ventricular activation manifesting as <strong>epsilon waves.</strong></p>\n<div class=\"page\" title=\"Page 1\">Other options:</div>\n<p>Option A:<strong>\u00a0Delta wave</strong> is the slurred <strong>upstroke</strong> of the <strong>QRS complex</strong> as seen during ventricular pre-excitation, a feature of <strong>Wolff-Parkinson-White syndrome</strong>.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cf4bd079e07547f091fc29f21697dc5b.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/981b619bcd7a4bb38367d2151a37af1cx800x224.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d265d383d30f4d7f995480ea666315f7x720x307.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/94cbd96b56b047b8a065d7477c90014cx798x264.JPEG"
    ]
  },
  {
    "text": "A doctor is taking history from a diabetic patient and decides to make a chart to assess joint involvement. Which chart should he make to explain this?",
    "choices": [
      {
        "id": 1,
        "text": "Histogram"
      },
      {
        "id": 2,
        "text": "Line diagram"
      },
      {
        "id": 3,
        "text": "Pie chart"
      },
      {
        "id": 4,
        "text": "Tree diagram"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>A tree diagram is used mainly in to <strong>chart the possible outcomes of a sample event</strong>.</p>\n<p>In this case, a tree diagram would help the doctor in explaining the possible outcomes to the patient&rsquo;s diabetes, with the perspective of joint involvement.</p>\n<p>The following image shows the outline of a tree diagram:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8b7be39116a74ccf9e4523fb63e42d8cx600x518.JPEG"
    ]
  },
  {
    "text": "A pressure-volume diagram of the left ventricle is given below. Calculate the stroke volume considering the heart rate as 65 beats per minute.",
    "choices": [
      {
        "id": 1,
        "text": "50 mL"
      },
      {
        "id": 2,
        "text": "120 mL"
      },
      {
        "id": 3,
        "text": "70 mL"
      },
      {
        "id": 4,
        "text": "100 mL"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: left;\">The stroke volume of this pressure-volume diagram is <strong>70 mL.</strong></p>\n<p style=\"text-align: left;\">The points in the graph indicate the following events of the cardiac cycle:</p>\n<ul>\n<li style=\"text-align: left;\">Point<strong> 1</strong>: <strong>Opening of the mitral valve</strong>. The corresponding reading on the graph denotes <strong>end-systolic volume</strong> (<strong>ESV</strong>).</li>\n<li style=\"text-align: left;\">Point <strong>2</strong>: <strong>Closing of the mitral valve</strong>.&nbsp;The corresponding reading on the graph denotes <strong>end-diastolic volume</strong> (<strong>EDV</strong>).</li>\n<li>Point 3: Opening of the aortic valve.</li>\n<li>Point 4: Closing of the aortic valve.</li>\n</ul>\n<p class=\"p2\"><strong>Stroke volume</strong> is the amount of blood that the heart pumps out with each beat. It is about 70 mL from each ventricle in&nbsp;<span class=\"Apple-converted-space\">resting conditions.</span></p>\n<p>In a pressure-volume diagram, stroke volume (SV) can be calculated using the values of ESV (50 mL) and EDV (120 mL):</p>\n<p><strong>Stroke volume = End diastolic volume&nbsp;&ndash; End systolic volume</strong></p>\n<p>Therefore, <strong>SV</strong> = 120 - 50 = <strong>70 mL</strong>.</p>\n<p><strong>Cardiac output</strong>&nbsp;can be calculated from the given data using the formula: &nbsp;Cardiac output = Stroke volume x heart rate</p>\n<p>Therefore, in this case, cardiac output = 70 x 65 = 4550 mL.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3b4b95d918834769841331ec9128fb09.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b35c30d3d1444ce28a07bc83908402fbx1280x1418.PNG"
    ]
  },
  {
    "text": "What would be the average duration of lochial discharge in a puerperal woman?",
    "choices": [
      {
        "id": 1,
        "text": "5-18 days"
      },
      {
        "id": 2,
        "text": "1-4 days"
      },
      {
        "id": 3,
        "text": "24-36 days"
      },
      {
        "id": 4,
        "text": "70-120 days"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The average duration of lochial discharge&nbsp;in a postpartum woman is about <strong>24-36</strong>&nbsp;days.&nbsp;The average amount of discharge for the first week is <strong>250 mL</strong>.</p>\n<p>The lochial discharge appears as follows:</p>\n<table style=\"height: 275px; width: 481px;\">\n<tbody>\n<tr>\n<td style=\"width: 60px;\"><strong>Name</strong></td>\n<td style=\"width: 82px;\"><strong>Colour</strong></td>\n<td style=\"width: 115.9375px;\"><strong>Timing after delivery</strong></td>\n<td style=\"width: 196.0625px;\"><strong>Content</strong></td>\n</tr>\n<tr>\n<td style=\"width: 60px;\"><strong>Lochia rubra</strong></td>\n<td style=\"width: 82px;\">Red</td>\n<td style=\"width: 115.9375px;\">First few days&nbsp;</td>\n<td style=\"width: 196.0625px;\">Blood, decidua, fetal membranes, vernix, lanugo, meconium</td>\n</tr>\n<tr>\n<td style=\"width: 60px;\"><strong>Lochia serosa</strong></td>\n<td style=\"width: 82px;\">Yellowish/Pink</td>\n<td style=\"width: 115.9375px;\">After 3-4 days</td>\n<td style=\"width: 196.0625px;\">\n<p>WBC, cervical mucus, microorganisms</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 60px;\"><strong>Lochia alba</strong></td>\n<td style=\"width: 82px;\">Pale White</td>\n<td style=\"width: 115.9375px;\">After 10th day</td>\n<td style=\"width: 196.0625px;\">Decidua, cells, WBC, mucin, cholesterol crystals, and fat cells</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 56-year-old diabetic is  having double vision with downward gaze .  She has no other complaints. What could be the reason for the symptoms?",
    "choices": [
      {
        "id": 1,
        "text": "Trigeminal nerve palsy"
      },
      {
        "id": 2,
        "text": "Oculomotor nerve palsy"
      },
      {
        "id": 3,
        "text": "Trochlear nerve palsy"
      },
      {
        "id": 4,
        "text": "Abducent nerve palsy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical scenario suggests&nbsp;<strong>trochlear nerve palsy</strong>.</p>\n<p>In <strong>4<sup>th</sup> nerve palsy</strong>, the <strong>superior oblique</strong> is affected, causing:</p>\n<ul>\n<li>The weakness of <strong>depression in eye:</strong> Mainly seen when the eye is adducted (depression during abducted position is a function of Inferior rectus)</li>\n<li>Weakness of <strong>abduction in eye</strong></li>\n<li>Failure of<strong> intorsion:</strong> Cause of diplopia</li>\n</ul>\n<p>The main actions of the superior oblique are intorsion (incyclotorsion), and depression in adduction.</p>\n<p>Hence, the patient will have difficulty in looking <strong>downwards</strong> when the eyes are in an <strong>adducted</strong> position. Diabetes, hypertension, and atherosclerosis affect the vasa nervosum of the cranial nerves leading to ischemia of the nerves. It results in paralysis.</p>\n<p><strong>Other options:</strong></p>\n<p>Option B:<strong> In 3<sup>rd</sup> nerve palsy </strong>(<strong>oculomotor nerve</strong>) - Due to the involvement of the superior rectus and medial rectus, elevation and adduction will also be impaired, which is not the case here.</p>\n<p>Option D: <strong>In 6<sup>th</sup> nerve palsy </strong>(<strong>abducens nerve) -&nbsp;</strong>Due to the involvement of only the lateral rectus, abduction will be impaired and not depression.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old male patient presented with frequently changing bowel habits. He noticed blood in the stools which were not associated with pain. There was no history of weight loss. Barium enema shows multiple outpouchings in the ascending, transverse, and descending colon resembling a saw-tooth.\u00a0\u00a0What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Colonic diverticulosis"
      },
      {
        "id": 2,
        "text": "Carcinoma colon"
      },
      {
        "id": 3,
        "text": "Crohn's disease"
      },
      {
        "id": 4,
        "text": "Intussusception"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most likely diagnosis is <strong>colonic diverticulosis.</strong></p>\n<p>The above clinical scenario with the barium enema image is suggestive of <strong>colonic diverticulosis</strong>. The barium enema shows multiple outpouchings in the ascending, transverse, and descending colon resembling a <strong>saw-tooth, indicating diverticulosis.&nbsp;</strong>&nbsp;</p>\n<p>Diverticulosis refers to the condition where multiple outpouchings occur along the gastrointestinal tract without any inflammation. Colonic diverticulosis is more common among the age group of more than 50 years. Colonic diverticulosis is primarily <strong>false diverticula</strong> as only the mucosa and muscularis mucosa have herniated. Due to the high intraluminal pressure, they are referred to as the pulsion type of diverticula.&nbsp;A low fibre diet results in smaller stool volume that increases intraluminal pressure for propulsion. The higher pressures get directed to the colonic wall resulting in<strong> pulsion diverticula.</strong> The <strong>sigmoid colon</strong> is the <strong>most</strong> <strong>common</strong> location.</p>\n<p>The majority of the patients with diverticulosis are usually <strong>asymptomatic.</strong> However, some patients may present with<strong> abdominal cramps,</strong> <strong>altered bowel habits,</strong> and <strong>painless rectal bleeding</strong>. Diverticulosis can present with complications like:</p>\n<ul>\n<li>Diverticulitis</li>\n<li>Abscess</li>\n<li>Peritonitis</li>\n<li>Intestinal obstruction</li>\n<li>Hemorrhage&nbsp;</li>\n<li>Fistula formation</li>\n</ul>\n<p>Diagnosis:</p>\n<p>The diagnosis is confirmed by a colonoscopy or an X-ray barium enema. <strong>Barium enema radiograph</strong> shows multiple barium-coated outpouchings from the colonic wall and gives the appearance of a<strong> saw-tooth</strong>. In cases of severe abdominal pain, a CT scan is preferred to avoid the risk of intestinal perforation.</p>\n<p>The saw-tooth appearence is seen below:</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aca3f41660f54a9d96678c22f9ade6c4x720x720.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9eb34c6de65640c59fc78cc87548d5a6x720x576.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/457fa35dc0c24f07b3ac5afc403f9eefx720x844.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f5e06d96bd1545f69d45221f0180eb63x720x339.JPEG"
    ]
  },
  {
    "text": "Sequentially arrange the following routes of administration in the descending order of systemic absorption of local anesthetic.",
    "choices": [
      {
        "id": 1,
        "text": "1>4>2>3"
      },
      {
        "id": 2,
        "text": "3>4>2>1"
      },
      {
        "id": 3,
        "text": "1>3>2>4"
      },
      {
        "id": 4,
        "text": "2>1>2>4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Routes of administration in the <strong>descending order</strong> of systemic absorption of local anesthetic:</p>\n<ol>\n<li><strong>Intercostal</strong> nerve blockade\u00a0</li>\n<li>Injection into the caudal epidural space</li>\n<li>Injection into lumbar epidural space</li>\n<li>Injection into brachial plexus</li>\n<li><strong>Subcutaneous</strong> injection</li>\n</ol>\n<p>Systemic absorption of local anesthetic is determined by the</p>\n<ul>\n<li>Site of injection and its <strong>tissue blood perfusion</strong></li>\n<li>Dosage and volume of drug administered</li>\n<li><strong>Vasoconstrictor agent</strong> addition</li>\n<li>The pharmacologic properties of the agent itself</li>\n</ul>\n<p>Exposure to an area of greater vascularity would result in a greater rate and degree of absorption of local anesthetic. The <strong>clinical significance</strong> of this is that\u00a0the <strong>use of a fixed dose</strong> of a local anesthetic agent can be <strong>potentially toxic in one area of administration but not in others</strong>.</p>\n<p>Ex:- Lidocaine without epinephrine for an intercostal nerve block results in average peak venous plasma levels that are sufficiently high to cause symptoms of CNS toxicity. But the same dose of lidocaine when used for a brachial plexus block results in blood levels that are rarely associated with toxicity.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A neonate presented with features of intestinal obstruction. The X-ray showed the following image. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Jejunoileal atresia"
      },
      {
        "id": 2,
        "text": "Esophageal atresia"
      },
      {
        "id": 3,
        "text": "Duodenal atresia"
      },
      {
        "id": 4,
        "text": "Colonic atresia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above plain abdominal radiograph shows a typical <strong>double-bubble sign</strong> suggestive of <strong>duodenal atresia.</strong></p>\n<p>The double-bubble represents dilatation of the <strong>stomach</strong> and the <strong>proximal duodenum.</strong></p>\n<p>The most common cause of <strong>neonatal intestinal obstruction</strong> is <strong>duodenal atresia.&nbsp;</strong>The incidence is 1 in 6000 to 10,000 live births.&nbsp;Duodenal atresia is thought to occur as a result of the failure of vacuolization of the duodenum from its solid cord stage.</p>\n<p>It is associated with several conditions, such as:</p>\n<ul>\n<li>Prematurity</li>\n<li>Down's syndrome</li>\n<li>Maternal polyhydramnios</li>\n<li>Malrotation</li>\n<li>Annular pancreas</li>\n<li>Biliary atresia.&nbsp;</li>\n</ul>\n<p>The duodenal obstruction is distal to the ampulla of Vater in most cases therefore the infant infants present with<strong> bilious vomiting.</strong></p>\n<p>Treatment is by <strong>duodenoduodenostomy</strong>.</p>\n<p><strong>Other options:</strong></p>\n<p><strong>Option A:</strong>&nbsp;Jejunoileal atresia would present with a triple-bubble sign.</p>\n<p><strong>Option B:</strong> Esophageal atresia would present with a pouch like finding on the scan.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/eafe3793a6d847d89a843238099c81d5.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A mutation in the gene for aquaporin channel leads to",
    "choices": [
      {
        "id": 1,
        "text": "Liddle's syndrome"
      },
      {
        "id": 2,
        "text": "Nephrogenic DI"
      },
      {
        "id": 3,
        "text": "Cystic fibrosis"
      },
      {
        "id": 4,
        "text": "Barter syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A mutation in the gene for the aquaporin channel leads to <strong>nephrogenic DI.</strong></p>\n<p><strong>Nephrogenic diabetes insipidus</strong>&nbsp;(NDI) is an inability to concentrate urine due to <strong>impaired renal tubule response to vasopressin (ADH)</strong>, which leads to the excretion of large amounts of dilute urine.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old college student comes to the emergency room with a history of palpitations, sweating and a feeling of impending doom for the past 45 minutes while preparing for his exam. He gives a previous history of similar complaints. There is no history of medical illness or substance abuse. Which of the following should be given in the acute management of his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Haloperidol"
      },
      {
        "id": 2,
        "text": "Alprazolam"
      },
      {
        "id": 3,
        "text": "Flumazenil"
      },
      {
        "id": 4,
        "text": "Amitriptyline"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of a <strong>panic attack</strong>.&nbsp;Benzodiazepines such as <strong>alprazolam</strong> are used to treat panic attacks.</p>\n<div class=\"page\" title=\"Page 410\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 412\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>A panic attack is a<strong> sudden period</strong> of<strong> intense fear</strong> or <strong>apprehen&shy;sion</strong> that may last from minutes to hours. Panic attacks can occur in panic disorders, specific phobia, social phobia and post-traumatic stress disorder. They may occur at any time and are not associated with any identifiable stimulus.</p>\n<p>Some habits predispose a patient to panic attacks. These include use of <strong>caffeine, alcohol, nicotine,</strong> or other substances, and unusual patterns of sleeping or eating.&nbsp;</p>\n<p>&nbsp;The first panic attack is often spontaneous, although panic attacks occasionally follow excitement, physical exertion, sexual activity, or moderate emotional trauma.&nbsp;</p>\n<div class=\"page\" title=\"Page 412\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 412\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The major symptoms are extreme fear and a sense of impending death and doom. Physi&shy;cal signs often include <strong>tachycardia,&nbsp;palpitations, dyspnea</strong> or <strong>hyperventilation,</strong> and sweating. Patients often try to leave whatever situation they are in to seek help. The attack generally lasts 20 to 30 minutes and rarely more than an hour. Hyperventilation can produce <strong>respiratory alkalosis</strong> and other symptoms.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<p>For rapid control of symptoms, <strong>alprazolam</strong>&nbsp;is the drug of choice. <strong>Selective serotonin reuptake inhibitors</strong> such as <strong>paroxetine</strong>&nbsp;are started concurrently and alprazolam is slowly tapered. <strong>Fluoxetine</strong>&nbsp;is used for panic attacks with <strong>co-morbid depression.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following cardiac features would make the diagnosis of tricuspid atresia unlikely?",
    "choices": [
      {
        "id": 1,
        "text": "Left axis deviation on ECG"
      },
      {
        "id": 2,
        "text": "Himalayan P waves on ECG"
      },
      {
        "id": 3,
        "text": "Ventricular septal defect on echo"
      },
      {
        "id": 4,
        "text": "Left ventricular hypoplasia on echo"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Left ventricular hypoplasia would make the diagnosis unlikely as <strong>right ventricular hypoplasia</strong> is seen in <strong>tricuspid atresia.</strong></p>\n<p>Other features of tricuspid atresia:</p>\n<ul>\n<li>An <strong>increased left ventricular impulse</strong> is noted in contrast to an increased right ventricular impulse seen in most other cyanotic diseases.</li>\n<li>A VSD <strong>holosystolic murmur</strong> is audible along the left sternal border.</li>\n<li>The second heart sound (<strong>S2</strong>) is usually <strong>single</strong>.</li>\n<li>Left ventricular hypertrophy and <strong>left axis deviation</strong> on ECG.</li>\n<li>Tall, peaked P waves on lead II known as <strong>Himalayan P waves</strong> which are suggestive of an enlarged right atrium.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/95009bf37ec74df482e7efe380132244x600x1265.JPEG"
    ]
  },
  {
    "text": "A 60- year old patient who presented with high-grade fever, productive cough and breathlessness, was found to have decreased breath sounds and a dull note on percussion on the left side. His chest radiograph showed the following findings.  Which of the following pleural fluid characteristics will suggest a bacterial aetiology?",
    "choices": [
      {
        "id": 1,
        "text": "Pleural fluid LDH/ Serum LDH is 0.5"
      },
      {
        "id": 2,
        "text": "Pleural fluid protein/ Serum protein is 0.4"
      },
      {
        "id": 3,
        "text": "Pleural fluid LDH/ upper limit of normal serum LDH is 0.7"
      },
      {
        "id": 4,
        "text": "Pleural fluid LDH of 120 U/L"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above clinical scenario is suggestive of pneumonia. <strong>Pleural fluid LDH/serum LDH of &gt;0.6 </strong>is a characteristic of the pleural fluid which is associated with <strong>exudative </strong>effusion. The pleural effusion associated with bacterial pneumonia is&nbsp;<strong>exudative</strong>&nbsp;in nature.&nbsp;</p>\n<p><strong>Pleural effusion</strong> refers to the pathological accumulation of fluid in the pleural space due to:</p>\n<ul>\n<li>excess fluid formation from the interstitial spaces of lung, parietal pleura or peritoneal cavity</li>\n<li>decreased fluid removal by the lymphatics</li>\n</ul>\n<p>Pleural effusion may present with:</p>\n<ul>\n<li><strong>dyspnea</strong></li>\n<li><strong>pleuritic pain</strong></li>\n<li><strong>dry cough</strong></li>\n<li>associated symptoms like fever, weight loss, edema, ascites depending on the etiology</li>\n</ul>\n<p>On examination, there may be:</p>\n<ul>\n<li><strong>tachypnea</strong>, in a large effusion</li>\n<li><strong>dullness&nbsp;</strong>to persussion</li>\n<li><strong>decreased</strong>/absent <strong>breath sounds</strong> at the base(s)</li>\n<li>other signs present vary with the underlying etiology</li>\n</ul>\n<p>Etiology of pleural effusion can be:</p>\n<ul>\n<li><strong>Exudative</strong>: Due to a disruption in pleural fluid formation and drainage because of&nbsp;<strong>local factors. </strong>Examples are:\n<ul>\n<li><strong>Malignancy</strong></li>\n<li><strong>Infections</strong></li>\n<li><strong>Pulmonary embolism</strong></li>\n<li>Rheumatic diseases like rheumatoid arthritis, SLE, amyloidosis</li>\n<li>Meig's syndrome</li>\n<li>Drugs like nitrofurantoin, dantrolene, amiodarone, methotrexate, clozapine, phenytoin and beta blockers</li>\n<li>Radiation-induced</li>\n<li>Haemothorax</li>\n<li>Chylothorax</li>\n</ul>\n</li>\n<li><strong>Transudative</strong>:&nbsp;Due to a disruption in pleural fluid formation and drainage due to&nbsp;<strong>systemic factors</strong>. Examples are:\n<ul>\n<li><strong>Congestive heart failure</strong></li>\n<li><strong>Hepatic cirrhosis</strong></li>\n<li><strong>Nephrotic Syndrome</strong></li>\n<li>SVC obstruction</li>\n<li>Peritoneal dialysis</li>\n<li>Myxedema</li>\n</ul>\n</li>\n</ul>\n<p><strong>Light&rsquo;s criteria</strong>&nbsp;can be used to differentiate between transudative and exudative pleural effusions. Exudative effusions will meet a<strong>t least one</strong> of the following criteria:</p>\n<ol>\n<li aria-level=\"1\">Pleural fluid protein/serum protein&nbsp;<strong>&gt;0.5</strong></li>\n<li aria-level=\"1\">Pleural fluid LDH/serum LDH&nbsp;<strong>&gt;0.6</strong></li>\n<li aria-level=\"1\">Pleural fluid LDH is&nbsp;<strong>more than two-thirds of the upper limit of normal</strong>&nbsp;for serum.&nbsp;</li>\n</ol>\n<p><strong>Recommended tests</strong> for all diagnostic <strong>thoracocentesis</strong> include:</p>\n<ul>\n<li>Lactate dehydrogenase (LDH) and protein</li>\n<li>Microscopy and culture</li>\n<li>Cytology and differential count</li>\n<li>Glucose, pH, triglycerides, amylase, haematocrit, AFB culture and PCR can be done if a particular etiology is suspected.</li>\n</ul>\n<p>If the difference between the protein levels in the serum and the pleural fluid&nbsp;<strong>&gt; 3.1 g/dL,&nbsp;</strong>it is likely to be&nbsp;<strong>transudative pleural effusion.&nbsp;</strong>If the glucose levels are&nbsp;<strong>less than 60mg/dL,</strong>&nbsp;then the effusion is likely due to exudative causes like&nbsp;<strong>malignancy,</strong>&nbsp;bacterial infections&nbsp;<strong>(parapneumonic effusion)</strong>, and&nbsp;<strong>rheumatoid pleuritis.</strong></p>\n<p>If the pleural fluid cytology,<strong>&nbsp;</strong>culture, glucose, and staining do not yield any result, perform&nbsp;<strong>spiral CT&nbsp;</strong>to rule out<strong>&nbsp;pulmonary embolism</strong>&nbsp;and assess the markers of&nbsp;<strong>tuberculosis.</strong></p>\n<p>Other investigations include:</p>\n<ul>\n<li><strong>Chest X-Ray</strong></li>\n<li><strong>Chest ultrasound</strong></li>\n<li>Chest CT</li>\n<li><strong>Thoracocentesis</strong></li>\n<li>Invasive diagnostic procedures like<strong> pleural biopsy, video-assisted thoracoscopy </strong>and<strong> bronchoscopy </strong>are performed in case of inconclusive diagnosis.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/138028545b9e47b189caa38d3e02bbb2.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old chronic alcoholic presents with oral ulcers and a burning sensation in his oral cavity. A picture of the oral cavity is given below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Leukoplakia"
      },
      {
        "id": 2,
        "text": "Erythroplakia"
      },
      {
        "id": 3,
        "text": "Submucosal fibrosis"
      },
      {
        "id": 4,
        "text": "Malakoplakia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most likely diagnosis in the given scenario of a 32-year-old chronic alcoholic with oral ulcers and a burning sensation and the image showing white lesions on the oral cavity is <strong>leukoplakia.\u00a0</strong></p>\n<p>Leukoplakia is a <strong>premalignant condition</strong> of the oral cavity characterized by <strong>whitish patches or plaques</strong> that <strong>cannot be rubbed off. \u00a0</strong></p>\n<p>They appear as small, well-circumscribed lesions and can extensively involve a large area of the oral mucosa.</p>\n<p>Variants of leukoplakia are</p>\n<ul>\n<li><strong>Speckled leukoplakia</strong> is whitish lesions on an erythematous base. They have the highest risk of malignant transformation.\u00a0</li>\n<li><strong>Proliferative verrucous leukoplakia</strong> is rare and has a high risk for malignant transformation.</li>\n</ul>\n<p>Management includes <strong>smoking cessation</strong> and <strong>reduction in alcohol</strong> consumption. A <strong>biopsy</strong> should be done and a photographic record of the lesion is used for follow-up.</p>\n<p>Other premalignant conditions of the oral cavity are erythroplakia and oral submucosal fibrosis.</p>\n<p>Other Options:</p>\n<p>Option B:\u00a0 <strong>Erythroplakia</strong> ( refers to irregular, <strong>reddish velvety plaques</strong> on the oral cavity. The surface may be nodular and may bleed. It has a high risk of malignant transformation. Biopsy should be done followed by surgical ablation.</p>\n<p>Option C<strong>: Oral submucosal fibrosis</strong>\u00a0 is characterized by the formation of <strong>fibrous bands</strong> beneath the oral cavity. The disease is progressive and causes <strong>limitation of mouth opening</strong> and <strong>restricted tongue movements</strong>. Intralesional steroids and surgical excision of fibrous bands are recommended.\u00a0</p>\n<p>Option D:<strong> Malakoplakia </strong>\u00a0is\u00a0a rare inflammatory condition affecting<strong> immunocompromised</strong> individuals. It mainly affects the <strong>urinary tract</strong>\u00a0but can involve any organ system. The clinical presentation includes tender ulcerations, nodules, papules, and plaques or fungating masses with perianal and genital skin involvement.\u00a0Systemic antibiotics and surgical excision are recommended.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9c1ec84a16f54eb69d303120b04df9af.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A newborn has a deformity in the left arm as shown in the image below. The child was born after a difficult vaginal delivery. Which of the following nerve is most likely affected?",
    "choices": [
      {
        "id": 1,
        "text": "Median nerve"
      },
      {
        "id": 2,
        "text": "Total plexus"
      },
      {
        "id": 3,
        "text": "C8 - T1"
      },
      {
        "id": 4,
        "text": "C5 - C6"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above clinical scenario with the image showing <strong>a claw hand</strong> with a supinated forearm and the flexed elbow is likely suggestive of <strong>Klumpke's palsy</strong>. The <strong>C8-T1</strong> nerve roots are affected in this condition.&nbsp;</p>\n<p><strong>Klumpke's palsy</strong> occurs following an injury to the&nbsp;<strong>8<sup>th</sup>&nbsp;cervical nerve&nbsp;</strong>and the<strong>&nbsp;1<sup>st</sup>&nbsp;thoracic nerve</strong>. It is commonly seen after deliveries involving excessive traction on the brachial plexus. It results in a&nbsp;<strong>paralyzed hand</strong>&nbsp;where the intrinsic muscles of the hand (T1) and the ulnar flexors of the wrist and fingers (C8) are mainly affected.</p>\n<p>Clinically, the baby lies with the<strong>&nbsp;forearm supinated&nbsp;</strong>and the<strong>&nbsp;elbow flexed.&nbsp;</strong>There is a<strong> loss </strong>of<strong> intrinsic muscle power</strong> and<strong> reflexes </strong>in the hand.<strong>&nbsp;</strong>There may be a<strong>&nbsp;unilateral Horner&rsquo;s syndrome</strong>, characterized by<strong>&nbsp;</strong>ipsilateral ptosis and miosis if the sympathetic fibers of the 1<sup>st</sup>&nbsp;thoracic root are also injured.</p>\n<p>Immobilization and prevention of contractures form the mainstay of treatment in Klumpke's palsy.</p>\n<p>The image given below shows clinical features seen in Klumpke's palsy.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/31686f80416142f793cbb2ead1b2826f.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d8477e84f5cb410cbaf12c14c0214470x1280x1954.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3afe5c90c92440eda2a81476c6aeb2acx1280x1622.JPEG"
    ]
  },
  {
    "text": "A 30-year-old man presented with numerous itchy skin lesions on his chest and back which show characteristic collarette scales. 2 weeks prior to this he had noticed a round, scaly, erythematous lesion as shown in the image given below, on his thigh. Which of the following statement is incorrect regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "More common in children and young adults"
      },
      {
        "id": 2,
        "text": "Associated with viruses like HHV- 6 and HHV-7"
      },
      {
        "id": 3,
        "text": "Remissions and recurrences are common"
      },
      {
        "id": 4,
        "text": "Topical steroids can be used to relieve pruritus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above clinical scenario, with the image showing a<strong> herald patch</strong>, is suggestive of <strong>pityriasis rosea</strong>.&nbsp;It is an acute <strong>self-limiting</strong> condition, with very <strong>low recurrence</strong> rates.&nbsp;</p>\n<p><strong>Pityriasis rosea</strong>/pityriasis circinata is an <strong>acute self-limiting papulosquamous</strong> disorder. It is commonly seen in <strong>children</strong> and <strong>young adults</strong>.</p>\n<p>Even though the <strong>exact cause</strong> is <strong>unknown</strong>, T-cell mediated immunity and infectious etiology are thought to be responsible for this condition. An association with infectious agents like human herpesvirus-6 (<strong>HHV-6</strong>) and human herpesvirus-7 (<strong>HHV-7</strong>) has been found recently.</p>\n<p>Clinical features include:</p>\n<ul>\n<li><strong>Prodrome</strong> of a sore throat, gastrointestinal disturbance, fever or arthralgia.</li>\n<li><strong>Herald patch</strong>&nbsp;- Large and conspicuous eruptions on the thigh, upper arm, trunk or neck covered by&nbsp;<strong>fine scales</strong></li>\n</ul>\n<p>The image given below shows a herald patch.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4e7c86a398a14a1abfec6778daf63b47.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9af42ebbc54f45879c0e3e6166afcd97x720x809.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ecbe1331b1d346c8b1f85d19584324f7x1280x916.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3feacbb3c901415ab307ce5f1b206d68x720x1278.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/354e215162514bb1b8898118d301b48cx720x872.JPEG"
    ]
  },
  {
    "text": "The histopathological section of the cardiac tissue of an 82-year-old man shows some pigmentation, as seen below. Intracellular accumulation of which of the following is likely to be seen in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Lipofuscin"
      },
      {
        "id": 2,
        "text": "Coal"
      },
      {
        "id": 3,
        "text": "Melanin"
      },
      {
        "id": 4,
        "text": "Iron"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p>Intracellular accumulation of <span data-preserver-spaces=\"true\"><strong>lipofuscin</strong></span><span data-preserver-spaces=\"true\">\u00a0</span><span data-preserver-spaces=\"true\">(brown lipid) is seen in this patient.\u00a0</span></p>\n<p><span data-preserver-spaces=\"true\"><strong>Lipofuscin </strong>or<strong> lipochrome</strong>\u00a0is also known as the\u00a0<strong>wear-and-tear</strong>\u00a0pigment.\u00a0It is an insoluble,<strong>\u00a0brownish-yellow</strong>, granular intracellular material, which accumulates in various tissues like the heart, liver, and brain. It is seen in\u00a0<strong>normal</strong>\u00a0<strong>ageing patients.\u00a0</strong></span><span data-preserver-spaces=\"true\">Accumulation of the brown pigment in large amounts can give a characteristic appearance to the tissue called\u00a0<strong>brown atrophy.</strong>\u00a0</span><span data-preserver-spaces=\"true\">\u00a0</span></p>\n<p><span data-preserver-spaces=\"true\">It is derived\u00a0from<strong>\u00a0lipid peroxidation</strong>\u00a0of polyunsaturated lipids indicating\u00a0<strong>free radical injury</strong>.\u00a0</span><strong>Not injurious\u00a0</strong>to the cell or its functions. It is s<span data-preserver-spaces=\"true\">een in cells undergoing slow, regressive changes.\u00a0</span>The image of lipofuscin is given below.</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3e2e3acaad564dd2a49e97a26654f5aa.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7708b20840564d3e8b726f8988c28fd0x907x683.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0fe3727fb9c44fe78dab5cf9df0acd1ax720x481.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b45dfc4f90fa40d9ac77bba5e2b7e905x411x311.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f8321b33a3134a21ade948d8c5733c2bx800x600.JPEG"
    ]
  },
  {
    "text": "A young female presents with dyspareunia, mucopurulent vaginal discharge and dysuria. She mentions having unprotected sexual intercourse about a week ago. Gram-staining of the discharge shows the following image. Which of the following is the most likely causative agent?",
    "choices": [
      {
        "id": 1,
        "text": "Chlamydia trachomatis"
      },
      {
        "id": 2,
        "text": "Trichomonas vaginalis"
      },
      {
        "id": 3,
        "text": "Gardnerella vaginalis"
      },
      {
        "id": 4,
        "text": "Neisseria gonorrhoea"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image depicts\u00a0microscopic findings of <strong>gram\u2010negative intracellular diplococci<span class=\"notion-enable-hover\" data-token-index=\"0\" data-reactroot=\"\">\u00a0</span></strong>within phagocytes in a stained smear from the mucopurulent discharge.\u00a0The patient complains of\u00a0mucopurulent discharge, dyspareunia, increased urinary urgency and frequency<strong>\u00a0</strong>after one week of unprotected intercourse. \u00a0This clinical scenario along with the image indicates infection with <strong><em>Neisseria gonorrhoeae</em>.</strong></p>\n<p><strong>Gonorrhea</strong> is a sexually transmitted disease caused by\u00a0<strong>Neisseria gonorrhoeae</strong>. It uses pilli in adhesion to the urethra or other mucosal surfaces. The cocci penetrate the intracellular spaces to reach the subepithelial tissue by the third day of infection. The incubation period is 2-8 days.</p>\n<p>The major symptoms include <strong>vaginal\u00a0discharge, dyspareunia</strong>\u00a0and\u00a0<strong>dysuria</strong>, usually without urinary frequency or urgency. The specific symptoms seen in males and females are as follows:</p>\n<p>In females:</p>\n<p>About half the female patients remain asymptomatic. But, patients typically present with urethritis, cervical\u00a0discharge, pruritus, dysuria, and intermenstrual bleeding.</p>\n<p>The\u00a0<strong>ectocervix</strong>\u00a0and\u00a0<strong>vagina</strong>\u00a0are\u00a0not usually affected in\u00a0<strong>adults</strong>\u00a0as the\u00a0<strong>stratified squamous epithelium is resistant</strong>\u00a0to infection by the cocci. The\u00a0<strong>acidic pH</strong>\u00a0of vaginal secretions is also protective.\u00a0The\u00a0<strong>principal sites</strong>\u00a0of invasion for\u00a0<strong>gonococcal infection</strong>\u00a0are the\u00a0<strong>columnar</strong>\u00a0and\u00a0<strong>transitional epithelium</strong>.</p>\n<p>The initial infection involves the\u00a0<strong>cervix\u00a0uteri</strong>\u00a0and\u00a0<strong>urethra</strong>\u00a0which\u00a0may extend to\u00a0<strong>Bartholin glands, skene glands</strong>, endometrium, and fallopian tubes. Unilateral pain and swelling over the labia may be caused by the inflammation of the\u00a0Bartholin glands.</p>\n<p><strong>Pelvic inflammatory disease</strong>\u00a0and\u00a0<strong>salpingitis</strong>\u00a0may lead to\u00a0<strong>sterility.</strong>\u00a0Other complications are <strong>tubo-ovarian abscesses</strong> and <strong>ectopic pregnancies</strong>. Rarely peritonitis may develop with perihepatic inflammation\u00a0<strong>(Fitz Hugh Curtis syndrome).</strong>\u00a0The patient presents with right upper quadrant pain and tenderness with abnormal liver function tests.</p>\n<p>In males :</p>\n<ul>\n<li><strong>Acute urethritis:</strong> This infection may extend along the urethra to involve the prostate, seminal vesicles, and epididymis.</li>\n<li><strong>Genital discharge:</strong> It is mucopurulent that can be described as that resembling 'flow of seed' (semen).</li>\n<li><strong>Strictures:</strong> <strong>Chronic urethritis</strong>\u00a0may lead to\u00a0stricture\u00a0formation.</li>\n<li><strong>Water-can perineum:</strong> The infection may spread to the periurethral tissues causing abscesses and multiple discharging sinuses.</li>\n</ul>\n<p><strong>Lab diagnosis:</strong></p>\n<p>The discharge is collected and subjected to Gram's stain which reveals\u00a0<strong>gram\u2010negative intracellular diplococci</strong>\u00a0within phagocytes.\u00a0<strong>Stuart's</strong>\u00a0transport medium is used. Cultures can be obtained from\u00a0<strong>chocolate agar</strong>\u00a0or\u00a0<strong>Mueller-Hinton agar</strong>.\u00a0Specifically,\u00a0<strong>Thayer-Martin agar</strong>\u00a0is used to isolate\u00a0<em>Neisseria gonorrhoeae.</em></p>\n<p>Treatment</p>\n<p>According to\u00a0<strong>CDC guidelines (2021)</strong>, treatment of uncomplicated gonococcal infections is as follows:</p>\n<ul>\n<li>Weight &lt;150 kg \u2013 Ceftriaxone 500 mg intramuscular (IM) in a single dose</li>\n<li>Weight \u2265150 kg \u2013 Ceftriaxone 1 g intramuscular (IM) in a single dose</li>\n</ul>\n<p>The doses of ceftriaxone are higher than the previous guidelines as the gonococcal\u00a0<strong>minimum inhibitory concentrations (MICs) are rising worldwide</strong>. BASHH (British Association for Sexual Health and HIV) in the United Kingdom also recommends higher doses of ceftriaxone\u00a0of about 500 mg or 1g along with\u00a0<strong>azithromycin</strong>\u00a0because it would result in fewer failures.</p>\n<p>Concurrent\u00a0<strong>chlamydial</strong>\u00a0infection must also be treated unless it has been excluded by\u00a0<strong>molecular testing</strong>. First-line drugs used are as follows:</p>\n<ul>\n<li>Oral\u00a0<strong>azithromycin</strong>\u00a0<strong>1g</strong>\u00a0single dose</li>\n<li>Oral\u00a0<strong>doxycycline</strong>\u00a0<strong>100 mg BD</strong>\u00a0for 7 days (non-pregnant patients only)</li>\n</ul>\n<p>The third-generation cephalosporins are contraindicated in patients with a history of\u00a0IgE-mediated penicillin allergy. The treatment includes:</p>\n<ul>\n<li><strong>Gemifloxacin</strong>\u00a0320mg oral + Azithromycin 2g oral</li>\n<li><strong>Gentamicin</strong>\u00a0240mg (IM)+ Azithromycin 2g oral</li>\n</ul>\n<p>The sexual partners of the patient must be treated to reduce the risk of recurrence.\u00a0<strong>Expedited partner therapy</strong>\u00a0refers to the index patient delivering therapy to one's own partners. However, this type of empirical therapy ignores the importance of direct counseling.</p>\n<p>\u00a0</p>\n<p><strong>Other options :</strong></p>\n<p>Option A: Chlamydial infection on Gram's staining will show leukocytes without organisms.</p>\n<p>Option B: Trichomonas vaginalis infections show motile trichomonads on wet mount, as shown in the image below.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7d421beeb5f245009f4e40c27f023345.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/25f31fcccd734a4789b3e077b7a5fc68x225x225.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2e9e2809b58c4823915a59c8752fae93x905x715.JPEG"
    ]
  },
  {
    "text": "Where does 5-fluorouracil act in the image given below?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>5-Fluorouracil</strong>&nbsp;is an <strong>S-phase inhibitor</strong>. DNA synthesis occurs in the S-phase of the mitosis cycle.&nbsp;<strong data-stringify-type=\"bold\">5</strong>-<strong data-stringify-type=\"bold\">FU</strong>&nbsp;acts via <strong>two different pathways&nbsp;</strong>depending on dose:&nbsp;<strong>G1- S-phase</strong> <strong>cell cycle arrest</strong> and apoptosis at a higher dose and <strong>G2-M-phase cell cycle</strong> arrest at a low dose.</p>\n<p><strong>5-FU:</strong></p>\n<ul>\n<li>Converted in the body to the corresponding nucleotide 5-deoxyuridine monophosphate which forms a covalent ternary complex with methyl-THFA and thymidylate synthase resulting in <strong>irreversible inhibition of thymidylate synthase.</strong></li>\n<li>Failure of DNA synthesis occurs due to the non-availability of thymidylate.</li>\n<li>Inhibition of TS by 5-FU depends on THFA, infusion of leucovorin will enhance the efficacy of this drug. Cisplatin and oxaliplatin also synergize with this drug.</li>\n<li>Rapidly dividing cells are most commonly affected, but resting cells are also affected.</li>\n<li>Used as an anticancer drug for many solid cancers such as colon, rectum, stomach, pancreas, liver, urinary bladder, head and neck. Topical preparations are used in BCC and actinic keratosis.</li>\n<li>Toxicity includes myelosuppression, mucositis, diarrhoea, nausea, and vomiting. Peripheral neuropathy may also occur.</li>\n</ul>\n<p><strong>Cell cycle progression</strong>&nbsp;is driven by the formation of complexes of&nbsp;<strong>proteins</strong>&nbsp;called&nbsp;<strong>cyclins</strong>&nbsp;and associated&nbsp;<strong>enzymes</strong>&nbsp;known as&nbsp;<strong>cyclin-dependent kinases. Cyclins</strong>&nbsp;are&nbsp;<strong>synthesized only</strong>&nbsp;<strong>during</strong>&nbsp;the<strong>&nbsp;cell cycle</strong>&nbsp;to regulate the progression of the cell across the phases of the cell cycle, while&nbsp;<strong>cyclin-dependent kinases</strong>&nbsp;are&nbsp;<strong>constitutively present</strong>&nbsp;irrespective of the cell cycle.</p>\n<p><strong>Cyclins D, E, A,</strong>&nbsp;and<strong>&nbsp;B</strong>&nbsp;appear sequentially during the cell cycle and bind to one or more CDKs.</p>\n<ol>\n<li><strong>G1-S transition</strong>: Cyclin D-CDK4,&nbsp;<strong>cyclin D-CDK6</strong>, and cyclin E-CDK2.</li>\n<li>S-phase:&nbsp;<strong>Cyclin A-CDK1</strong>&nbsp;and&nbsp;<strong>cyclin A-CDK2.</strong></li>\n<li>G2-M transition:&nbsp;<strong>Cyclin B-CDK1.</strong></li>\n</ol>\n<p><strong>CDK inhibitors&nbsp;</strong>(CDKIs) enforce the cell cycle checkpoints. There are several families of CDKIs:</p>\n<ul>\n<li>CDKIs that&nbsp;<strong>broadly inhibit</strong>&nbsp;multiple CDKs:&nbsp;<strong>p21, p27, p57</strong></li>\n<li>CDKIs that&nbsp;<strong>inhibit CDK4</strong>&nbsp;and<strong>&nbsp;CDK6</strong>:&nbsp;<strong>p15, p16, p18, and p19</strong></li>\n</ul>\n<p>The image below shows the different checkpoints and cell cycle regulators :</p>\n<p>CDK : Cyclin-dependent kinase</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ae6bbd378abe4addac34372f6a6999ce.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5b9f75a129dd4f5b8e8acc5af4845b03x600x647.JPEG"
    ]
  },
  {
    "text": "A 50-year-old man presented with blurred vision. All routine examinations were done. Urine examination showed proteinuria. Fundus examination showed dot and blot hemorrhages, microaneurysms, and cotton wool spots. Histopathology of the kidney was as shown below. What is your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Renal amyloidosis"
      },
      {
        "id": 2,
        "text": "Focal segmental glomerulosclerosis"
      },
      {
        "id": 3,
        "text": "Kimmelstiel-Wilson disease"
      },
      {
        "id": 4,
        "text": "Lupus nephritis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Histopathological image shows <strong>acellular periodic acid Schiff (PAS)-positive nodules</strong> suggestive of\u00a0nodular glomerulosclerosis/intercapillary glomerulosclerosis/Kimmelstiel\u2013Wilson disease,\u00a0which occurs in patients with\u00a0<strong>diabetic nephropathy</strong>.</p>\n<p>Three renal lesions are encountered in diabetic nephropathy:</p>\n<ul>\n<li><strong>Glomerular lesions</strong>:\n<ul>\n<li>Capillary basement membrane thickening</li>\n<li>Diffuse mesangial sclerosis</li>\n<li>Nodular glomerulosclerosis/Kimmelstiel\u2013Wilson disease</li>\n</ul>\n</li>\n<li><strong>Renal vascular lesions</strong>, principally hyaline arteriolosclerosis</li>\n<li><strong>Pyelonephritis</strong>, including necrotizing papillitis</li>\n</ul>\n<p>Renal histopathology in</p>\n<ul>\n<li><strong>Amyloidosis</strong>:\u00a0Glomerular deposits appearing as thickenings of the mesangial matrix, forming interlacing broad ribbons of amyloid</li>\n<li><strong>Lupus nephritis</strong>:\u00a0Immune complex deposits in the mesangium or along the entire basement membrane (wire loop lesions), with mesangial cell proliferation</li>\n<li><strong>Focal segmental glomerulosclerosis</strong>:\u00a0Focal and segmental hyalinosis and sclerosis of the capillary wall; lipid droplets in the sclerosed area.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/90a29c824dcf49b796f973edcb19d9a5.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following tendons is most commonly affected in the shoulder impingement syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Teres minor"
      },
      {
        "id": 2,
        "text": "Teres major"
      },
      {
        "id": 3,
        "text": "Infraspinatus"
      },
      {
        "id": 4,
        "text": "Supraspinatus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Supraspinatus</strong>&nbsp;is the most commonly affected tendon in&nbsp;<strong>shoulder impingement syndrome.</strong>&nbsp;</p>\n<p>It is also called&nbsp;<strong>supraspinatus syndrome</strong>,&nbsp;<strong>painful arc syndrome</strong>, and&nbsp;<strong>swimmer's shoulder</strong>&nbsp;and occurs when the tendons of the rotator cuff muscles become irritated and inflamed as they pass through the subacromial space. This can result in pain, weakness, and loss of movement at the shoulder.</p>\n<p><strong>Causes of impingement syndrome:</strong></p>\n<ul>\n<li>Supraspinatus tendinitis (Common)</li>\n<li>Complete or partial rupture of the rotator cuff</li>\n<li>Osteoarthritis of the acromioclavicular joint</li>\n</ul>\n<p><strong>Clinical features:</strong></p>\n<ul>\n<li><strong>Subacute tendinitis or painful arc syndrome:</strong> Anterior shoulder pain after vigorous activity. Treatment is with avoidance of initiating activity, NSAIDs and physiotherapy.</li>\n<li><strong>Chronic tendinitis:&nbsp;</strong>Recurrent attacks of subacute tendinitis and pain is worse at night.&nbsp;</li>\n<li><strong>Cuff disruption:&nbsp;</strong>There is progressive fibrosis and disruption of the cuff leading to a partial or full-thickness tear. Treatment includes acromioplasty and repair of rotator cuff.</li>\n</ul>\n<p>The following video shows the action of the subscapularis through the subacrominal space:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d68f71cb78b6475e8b6eea135460bbb2x320x240.GIF"
    ]
  },
  {
    "text": "Which of the following is true regarding iodine isotopes?",
    "choices": [
      {
        "id": 1,
        "text": "I-125 half life is 60 days"
      },
      {
        "id": 2,
        "text": "I \u2013131 half life is 8 hours"
      },
      {
        "id": 3,
        "text": "I-125 is used for treating thyroid metastasis"
      },
      {
        "id": 4,
        "text": "I-131 is used in functional thyroid scan"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The half-life&nbsp;of <strong>I-125 is 60 days</strong>.</p>\n<p>Salient points about I-125:</p>\n<ul>\n<li>Half-life = <strong>60days</strong></li>\n<li>Commonly used in <strong>brachytherapy</strong> in the treatment of cancer especially in <strong>prostate cancer</strong></li>\n<li>It is also used in radioimmunoassay to show the presence of hormone in tiny quantities</li>\n</ul>\n<p>Other Iodine radioisotopes:</p>\n<table style=\"width: 338px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 87px;\"><strong>Iodine radioisotope</strong></td>\n<td style=\"width: 128px;\"><strong>I<sup>123</sup></strong></td>\n<td style=\"width: 119px;\"><strong>I<sup>131</sup></strong></td>\n</tr>\n<tr>\n<td style=\"width: 87px;\"><strong>Half-life</strong></td>\n<td style=\"width: 128px;\"><strong>12- 14 hrs</strong></td>\n<td style=\"width: 119px;\">8-10 days</td>\n</tr>\n<tr>\n<td style=\"width: 87px;\"><strong>Radiation exposure</strong></td>\n<td style=\"width: 128px;\">Low</td>\n<td style=\"width: 119px;\">High</td>\n</tr>\n<tr>\n<td style=\"width: 87px;\"><strong>Radiation emission</strong></td>\n<td style=\"width: 128px;\">Gamma rays</td>\n<td style=\"width: 119px;\">Beta and Gamma rays</td>\n</tr>\n<tr>\n<td style=\"width: 87px;\"><strong>Used in imaging</strong></td>\n<td style=\"width: 128px;\">Imaging of Lingual thyroids / anatomical and physiological function of the thyroid</td>\n<td style=\"width: 119px;\">Screen and treat patients with differentiated thyroid cancers for metastatic disease</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Fmge Mini Test - 20';
        const quizFilename = 'fmge-mini-test-20-b13628f2.html';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2023"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>