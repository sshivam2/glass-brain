<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anatomy Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Test Series Subject / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Arrange the following in the correct order from proximal to distal:",
    "choices": [
      {
        "id": 1,
        "text": "2\u21925\u21923\u21926\u21921\u21924"
      },
      {
        "id": 2,
        "text": "5\u21922\u21926\u21921\u21923\u21924"
      },
      {
        "id": 3,
        "text": "2\u21925\u21926\u21923\u21921\u21924"
      },
      {
        "id": 4,
        "text": "5\u21922\u21923\u21921\u21926\u21924"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The<strong> </strong>following is a sequence of the intrapulmonary anatomy from proximal to distal:\u00a0Trachea \u2192 Main Bronchi \u2192<strong> Lobar Bronchi \u2192 Segmental Bronchi \u2192 Terminal Bronchiole \u2192 Respiratory Bronchiole \u2192 Alveolar Duct \u2192 Alveolar Sac </strong>\u2192 Alveoli</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8e31f255dadf4338ae356ad3046e1ff8x843x1137.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b59260e7ddb7458d9a6c408c11718962x1280x1024.JPEG"
    ]
  },
  {
    "text": "A 24-year-old lady, with a past history of pulmonary tuberculosis, presents to the OPD with complaints of infertility. After further evaluation, you diagnose her with genital tuberculosis. The most common structure involved in this condition is derived from which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Mullerian duct"
      },
      {
        "id": 2,
        "text": "Wolffian duct"
      },
      {
        "id": 3,
        "text": "Mesonephric duct"
      },
      {
        "id": 4,
        "text": "Urogenital sinus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most common structure involved in genital tuberculosis are <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">the <strong>fallopian tubes</strong> which develop from the </span><strong>Mullerian ducts (paramesonephric ducts).</strong></p>\n<div class=\"page\" title=\"Page 291\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Three parts can be <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">recognized in each paramesonephric duct: (1) a <strong>cranial vertical</strong> portion that opens into the abdominal cavity, (2) a <strong>horizontal</strong> part that crosses the mesonephric duct, and (3) a <strong>caudal vertical</strong> part that fuses with its partner from the opposite side. </span></p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">With the descent of the ovary, the first two parts develop into the<strong> fallopian tube,</strong> and the caudal parts fuse to form the uterine canal.</span></p>\n</div>\n</div>\n</div>\n<p>The<strong> upper vaginal wall,</strong> <strong>uterus</strong> and <strong>cervix</strong> also develop from the <strong>Mullerian ducts.</strong></p>\n<p>Derivatives of the <strong>urogenital sinus:</strong></p>\n<ul>\n<li>Lower vagina</li>\n<li>Skene\u2019s tubercles</li>\n<li>Bartholin\u2019s gland</li>\n<li>Urinary bladder\u00a0</li>\n<li>Urethra</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following structures is not related to the posterior surface of the vagina?",
    "choices": [
      {
        "id": 1,
        "text": "Rectovaginal septum"
      },
      {
        "id": 2,
        "text": "Recto uterine pouch"
      },
      {
        "id": 3,
        "text": "Waldeyer's fascia"
      },
      {
        "id": 4,
        "text": "Perineal body"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Waldeyer's fascia </strong>(presacral fascia)\u00a0forms the\u00a0posterior relationship of the <strong>rectum</strong> and is\u00a0not related to the vagina. It lines the anterior surface of the sacrum.</p>\n<p>Relations of the vagina:</p>\n<table style=\"height: 438.586px;\" width=\"518\">\n<tbody>\n<tr style=\"height: 47px;\">\n<td style=\"width: 83.65625px; height: 47px;\"><strong>Parts of vagina</strong></td>\n<td style=\"width: 96.140625px; height: 47px;\"><strong>Anterior relation</strong></td>\n<td style=\"width: 141.796875px; height: 47px;\"><strong>Posterior relation</strong></td>\n<td style=\"width: 168.4375px; height: 47px;\"><strong>Lateral relation</strong></td>\n</tr>\n<tr style=\"height: 297.586px;\">\n<td style=\"width: 83.6562px; height: 297.586px;\"><strong>Upper third</strong></td>\n<td style=\"width: 96.1406px; height: 297.586px;\">Bladder</td>\n<td style=\"width: 141.797px; height: 297.586px;\">Peritoneum of the <strong>rectouterine pouch</strong></td>\n<td style=\"width: 168.438px; height: 297.586px;\">\n<p>Levator ani</p>\n<p>Transverse cervical ligament</p>\n<p>Pubocervical ligament</p>\n<p>Uterosacral ligament</p>\n<p>Ureter and uterine artery (related to the lateral fornix)</p>\n</td>\n</tr>\n<tr style=\"height: 47px;\">\n<td style=\"width: 83.65625px; height: 47px;\"><strong>Middle third</strong></td>\n<td style=\"width: 96.140625px; height: 47px;\">Bladder</td>\n<td style=\"width: 141.796875px; height: 47px;\"><strong>Rectovaginal fascia/septum</strong></td>\n<td style=\"width: 168.4375px; height: 47px;\">Pubovaginalis muscle</td>\n</tr>\n<tr style=\"height: 47px;\">\n<td style=\"width: 83.65625px; height: 47px;\"><strong>Lower third</strong></td>\n<td style=\"width: 96.140625px; height: 47px;\">Urethra</td>\n<td style=\"width: 141.796875px; height: 47px;\"><strong>Perineal body</strong></td>\n<td style=\"width: 168.4375px; height: 47px;\">Bulbospongiosus</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f2affe0d1406454ba5c2b953c3eef5ecx1280x1286.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ceace5513d7444f3af84c60c46b6b0e6x600x555.JPEG"
    ]
  },
  {
    "text": "A 24-year-old medical student received booster dose of Hepatitis B vaccination, following which she developed weakness in the abduction and lateral rotation of that arm. The lesion is most likely to be in which of the following nerves?",
    "choices": [
      {
        "id": 1,
        "text": "Surgeon\u2019s nerve"
      },
      {
        "id": 2,
        "text": "Labourer\u2019s nerve"
      },
      {
        "id": 3,
        "text": "Nerve of Bell"
      },
      {
        "id": 4,
        "text": "Musician's nerve"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>axillary nerve</strong> also called a <strong>Surgeon's nerve</strong> is frequently injured during inadvertent intramuscular (IM) injections.&nbsp;</p>\n<p>Named nerves of the upper limb:</p>\n<ul>\n<li><strong>Laborer&rsquo;s</strong> nerve: <strong>Median</strong> nerve.</li>\n<li><strong>Musician&rsquo;s</strong> nerve: <strong>Ulnar</strong> nerve.</li>\n<li><strong>Surgeon&rsquo;s</strong> nerve: <strong>Axillary</strong> nerve.</li>\n<li>Nerve of <strong>Bell</strong>: <strong>Long thoracic</strong> nerve.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d327b952dd3d42d48e8aa5ec2753be58x1280x2059.JPEG"
    ]
  },
  {
    "text": "The given area of the anterior surface of the left kidney is related to the ________________ :",
    "choices": [
      {
        "id": 1,
        "text": "Stomach"
      },
      {
        "id": 2,
        "text": "Pancreas"
      },
      {
        "id": 3,
        "text": "Jejunum"
      },
      {
        "id": 4,
        "text": "Hepatic flexure of the colon"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given area on the anterior surface of the left kidney is related to the jejunum.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p class=\"ng-binding\">\u00a0The\u00a0anterior relations<strong>\u00a0</strong>of the\u00a0<strong>right kidney</strong>\u00a0include:</p>\n<ul>\n<li>Right suprarenal gland</li>\n<li>Second/descending part of the duodenum</li>\n<li>Liver</li>\n<li><strong>Hepatic flexure of the colon</strong></li>\n<li>Small intestine</li>\n</ul>\n<p>The\u00a0anterior relations<strong>\u00a0</strong>of the<strong>\u00a0left kidney\u00a0</strong>include:</p>\n<ul>\n<li>Left suprarenal gland\u00a0</li>\n<li><strong>Stomach</strong></li>\n<li><strong>Pancreas</strong></li>\n<li><strong>Jejunum</strong></li>\n<li>Spleen</li>\n<li><strong>Splenic flexure</strong> and the beginning of the descending colon</li>\n</ul>\n<p class=\"ng-binding\"><strong>The posterior relations </strong>of the kidneys are as follows:</p>\n<ul>\n<li><strong>Vessels (1):</strong>\u00a0Subcostal vessels</li>\n<li><strong>Ligaments (2):\u00a0</strong>Medial and\u00a0Lateral Arcuate ligaments</li>\n<li><strong>Nerves (3):\u00a0</strong>Subcostal, Iliohypogastric, and Ilioinguinal nerves</li>\n<li><strong>Muscles (4):\u00a0</strong>Diaphragm, Psoas major, Quadratus lumborum, and\u00a0Transverses abdominis.</li>\n<li>The\u00a0right kidney is related to the 12<sup>th</sup>\u00a0rib\u00a0and the left kidney is related to the 11<sup>th</sup>\u00a0and 12<sup>th</sup>\u00a0ribs</li>\n</ul>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a67d3b0dcd574526a7c82b0a71dabc6f.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/30b9a3b4fcd94dd0ada0132e2d1da0b4x1280x1519.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/66a29b0ef7df4cf49aba009a303ef0d4x1279x956.JPEG"
    ]
  },
  {
    "text": "A 2-year-old girl playing with small magnets suddenly develops breathlessness. Chest X-ray shows an inhaled foreign body in one of the bronchi. Where does the vein supplying the most likely site of obstruction drain into?",
    "choices": [
      {
        "id": 1,
        "text": "Right subclavian vein"
      },
      {
        "id": 2,
        "text": "Right brachiocephalic vein"
      },
      {
        "id": 3,
        "text": "Azygous vein"
      },
      {
        "id": 4,
        "text": "Accessory hemiazygous vein"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given case scenario of an inhaled foreign body, it is most likely to lodge into the <strong>right bronchus.&nbsp;</strong>The <strong>r</strong><strong>ight bronchial veins</strong> drain to the <strong>azygos vein.&nbsp;</strong></p>\n<p><strong>Left bronchial veins</strong> drain into the <strong>accessory hemiazygos</strong> vein&nbsp;or&nbsp;<strong>left superior intercostal</strong> vein.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/01e916bf04e24fe6868d54ae12380d60x1280x1441.JPEG"
    ]
  },
  {
    "text": "Which of the following gives rise to the structure marked in the given image of the liver?",
    "choices": [
      {
        "id": 1,
        "text": "Dorsal mesogastrium"
      },
      {
        "id": 2,
        "text": "Splanchnopleuric lateral plate mesoderm"
      },
      {
        "id": 3,
        "text": "Septum transversum"
      },
      {
        "id": 4,
        "text": "Gastrophrenic ligament"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The marked structure is the <strong>falciform ligament</strong> of the liver. It is an embryological derivative of <strong>ventral mesentery</strong>, which itself arises from <strong>septum transversum</strong>.\u00a0</p>\n<p>Septum transversum is the undifferentiated lateral plate mesoderm at the cranial end of the embryo. It gives rise to:</p>\n<ul>\n<li><strong>Central tendon</strong> of diaphragm</li>\n<li><strong>Fibrous</strong> <strong>pericardium</strong></li>\n<li>Liver stroma</li>\n<li><strong>Ventral mesogastrium</strong></li>\n</ul>\n<p>As the liver grows into the mesenchyme of the septum transversum, <strong>ventral mesentery</strong> is divided into two parts:</p>\n<ol>\n<li><strong>Lesser omentum</strong>, which<strong>\u00a0</strong>extends\u00a0from the lower portion of the esophagus, the stomach, and the upper portion of the duodenum to the liver (hepato-gastric and hepato-duodenal ligaments)</li>\n<li><strong>Ligaments of the liver: </strong>all ligaments of the liver <strong>except</strong> <strong>ligamentum</strong> <strong>teres</strong> are derived from the ventral mesentery. This includes\u00a0<strong>falciform ligament</strong>, right and left triangular ligaments, and coronary ligaments.\u00a0</li>\n</ol>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a9c986d47959409181faef0020df44c7.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/15884dd74c804f55a6fc796db8284154x960x720.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/77736ba00b9e4829ade699b4f1897c51x1280x1280.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/50d6b74a5f114b76a3c532c82799ac3dx1280x2578.JPEG"
    ]
  },
  {
    "text": "A 55-year-old male presented with rigidity, frequent falls, slow movements, tremors, and a short stepping gait when he entered the doctor's room. Which of the following areas is most likely to be affected?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario is suggestive of <strong>Parkinson's disease, </strong>which is associated with the\u00a0degeneration of<strong> substantia nigra (marked as \"C\").</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a7980296971e4b58a1fa808919e1a3b2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/70c6a96c5206407e91454d12c8367069x1280x879.JPEG"
    ]
  },
  {
    "text": "A patient presented with tenderness in the region shown below following a fall on an outstretched hand. Which of the following forms the roof of this region?",
    "choices": [
      {
        "id": 1,
        "text": "Radial artery"
      },
      {
        "id": 2,
        "text": "Basilic vein"
      },
      {
        "id": 3,
        "text": "Superficial branch of radial nerve"
      },
      {
        "id": 4,
        "text": "Superficial branch of ulnar nerve"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The marked region is the anatomical snuffbox. The\u00a0<strong>superficial branch of radial nerve</strong> forms the roof of the anatomical snuffbox.\u00a0<strong>Tenderness</strong> in this region is suggestive of a <strong>scaphoid fracture</strong>, a common injury after a fall on an outstretched hand.</p>\n<p><strong>Anatomical snuffbox boundaries:\u00a0</strong></p>\n<p><strong>Lateral wall:</strong></p>\n<ul>\n<li>Abductor pollicis longus (<strong>APL</strong>),</li>\n<li>Extensor pollicis brevis (<strong>EPB</strong>)\u00a0\u00a0</li>\n</ul>\n<p><strong>Medial wall:</strong></p>\n<ul>\n<li>Extensor pollicis longus\u00a0(<strong>EPL</strong>).</li>\n</ul>\n<p><strong>Roof:</strong></p>\n<ul>\n<li>Cephalic vein</li>\n<li>Superficial branch of radial nerve</li>\n</ul>\n<p><strong>Floor:</strong></p>\n<ul>\n<li>Radial styloid, Scaphoid, Trapezium, and\u00a01st Metacarpal.\u00a0</li>\n</ul>\n<p><strong>Only content:</strong> Radial artery</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8adb44aa3ddd417bb907b9606077ef96.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a299fb1b95244642a742c9f5d9051163x1280x1423.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7dc4a6e0a8e54b36a1785d691b0d7abex833x1280.JPEG"
    ]
  },
  {
    "text": "After removing the parotid gland, the patient presents with sweating on the cheeks while eating. This reflects aberrant innervation of which nerve?",
    "choices": [
      {
        "id": 1,
        "text": "Facial nerve"
      },
      {
        "id": 2,
        "text": "Glossopharyngeal nerve"
      },
      {
        "id": 3,
        "text": "Auriculotemporal nerve"
      },
      {
        "id": 4,
        "text": "Great auricular nerve"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above symptoms reflect aberrant innervation of the <strong>auriculotemporal nerve</strong>.</p>\n<p>The patient experiencing sweating on cheeks while eating, is the symptom of <strong>Frey's syndrome</strong> or gustatory sweating or auriculotemporal syndrome.</p>\n<ul>\n<li>It commonly develops after parotid surgery or any trauma where there is an injury to the parotid capsule.</li>\n<li>During the regrowth, an aberrant connection develops between the parasympathetic fibres supplying the\u00a0<strong>parotid gland</strong>\u00a0(<strong>auriculotemporal nerve</strong>) and the\u00a0<strong>sweat glands</strong>. This results in sweating, warmth and redness of the face during the salivary stimulation by the smell or taste of food.</li>\n<li>Management -\u00a0The symptoms can be treated by\u00a0<strong>subcutaneous infiltration of purified botulinum toxin</strong> into the affected area and use of antiperspirant. Denervation by tympanic neurectomy or auriculotemporal nerve may be useful.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the structures which consist of commissural fibres:",
    "choices": [
      {
        "id": 1,
        "text": "A, B, C, and D"
      },
      {
        "id": 2,
        "text": "A, B and C only"
      },
      {
        "id": 3,
        "text": "A and B only"
      },
      {
        "id": 4,
        "text": "D only"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correct answer is <strong>A, B, and C only. </strong></p>\n<p>The structure marked as <strong>'D'</strong> is the<strong> body</strong> <strong>of the fornix\u00a0</strong>and it\u00a0mainly contains\u00a0<strong>association</strong> fibres. The<strong> commissure of the fornix (hippocampal commissure)</strong> contains the <strong>commissural</strong> fibers.\u00a0</p>\n<p>A- Corpus callosum</p>\n<p>B- Anterior commissure</p>\n<p>C- Posterior commissure</p>\n<p>D- Body of the Fornix</p>\n<p>The locations of the <strong>commissural fibers</strong> are:</p>\n<ul>\n<li><strong>Corpus callosum-</strong>\u00a0Medial surface of the brain</li>\n<li><strong>Anterior commissure-</strong>\u00a0Beneath the rostrum of the corpus callosum</li>\n<li><strong>Posterior commissure-</strong>\u00a0In the inferior lamina of the pineal gland</li>\n<li><strong>Habenular commissure-</strong>\u00a0In the superior lamina of the pineal gland</li>\n<li><strong>Hippocampal commissure-</strong>\u00a0Between the right fornix and the left fornix\u00a0</li>\n</ul>\n<p>(Note: Varied information regarding the fibers present in the Fornix. 41st edition Gray's Clinical anatomy mentions Fornix under association fibers, the commissure of the fornix under commissural fibers. Whereas, Snell's Neuroanatomy textbook mentions the Fornix under commissural fibers.)\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6f5f701774da45c0be9a6dfe3e0dcbc9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/487be4e09af2475ca0c3e47c3df9d9c5x1280x1108.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/81a35ae3aa4c4f79a6044ac6c10e3c7dx1280x1037.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d40373e1a9e142bf94399b090d987464x600x600.GIF"
    ]
  },
  {
    "text": "While evaluating a cyanotic newborn, his echocardiogram shows pulmonic stenosis involving the root of the pulmonary artery. Which developmental structure's defective maturation is most likely responsible for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This newborn is found to have <strong>pulmonic stenosis</strong> involving the root of the pulmonary artery. The structure\u00a0<span style=\"box-sizing: border-box; margin: 0px; padding: 0px;\">that gives rise to the root of the pulmonary artery is the\u00a0<strong>truncus arteriosus,</strong> marked</span>\u00a0as <strong>'4'</strong> in the given image.</p>\n<p>Structures marked:</p>\n<ol>\n<li>Sinus venosus</li>\n<li>Atrium</li>\n<li>Bulbus cordis</li>\n<li>Truncus arteriosus</li>\n</ol>\n<p>The <strong>heart tube</strong> begins to <strong>bend</strong> by <strong>day\u00a023</strong>. This bending creates the <strong>cardiac loop </strong>which is completed by day 28. The fate of various structures formed as a result of this bending is as follows:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/856f93c216854d97b7056d440f46d432.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ee4d0a2f677746f8837d12d137daa299x1280x2300.JPEG"
    ]
  },
  {
    "text": "The type of joint involved in the following movement of the neck is?",
    "choices": [
      {
        "id": 1,
        "text": "Ball-and-socket joint"
      },
      {
        "id": 2,
        "text": "Hinge joint"
      },
      {
        "id": 3,
        "text": "Pivot joint"
      },
      {
        "id": 4,
        "text": "Ellipsoid joint"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The joint for side-to-side movements in the neck is the <strong>atlanto-axial joint </strong>which is a type of <strong>pivot joint.</strong></p>\n<p>Movement in the atlanto-axial joints are simultaneous and consists almost exclusively of rotation around the axis, which helps a person look to the right and left.\u00a0</p>\n<ul>\n<li>The normal range of <strong>atlanto-axial rotation is about 40\u00b0</strong>.</li>\n<li>The orientation and shape of the <strong>atlanto-occipital joints</strong> allow mainly for flexion\u2013extension, which has a <strong>total range of about 15\u00b0</strong>.</li>\n</ul>\n<p><strong>Pivot joint:</strong></p>\n<p>In pivot joint, one bone rotates in relation to another bone.</p>\n<p>This is a uniaxial joint, and thus rotation is the only motion allowed at a pivot joint.</p>\n<p>Eg:</p>\n<ul>\n<li><strong>Atlantoaxial joint</strong>: the first cervical (C1) vertebra (atlas) rotates around the dens, the upward projection from the second cervical (C2) vertebra (axis). This allows the head to rotate from side to side as when shaking the head \u201cno.\u201d</li>\n<li>The <strong>proximal radioulnar joint</strong> is a pivot joint formed by the head of the radius and its articulation with the ulna. This joint allows for the radius to rotate along its length during pronation and supination movements of the forearm.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/23a17ae77e01470c91be9c0b8e72e85b.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A fresh high school graduate attended an Army recruitment drive but was rejected due to his flat foot. The primary ligament in his foot that is most likely responsible for this condition is the _______.",
    "choices": [
      {
        "id": 1,
        "text": "Spring ligament"
      },
      {
        "id": 2,
        "text": "Anterior Talo-fibular Ligament"
      },
      {
        "id": 3,
        "text": "Posterior Talo-fibular Ligament"
      },
      {
        "id": 4,
        "text": "Deltoid Ligament"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>A flat foot is caused due to the involvement of the <strong>spring ligament.</strong></p>\n<p><strong>Pes planus</strong> or flat foot is caused to due the collapse of the <strong>medial longitudinal arch</strong> of the foot and can be either congenital or acquired. Its causes include rupture of spring ligament, tarsal coalition, disruption of tibialis posterior tendon, tarsometatarsal arthritis, and hindfoot degenerative or inflammatory arthritis.</p>\n<p>Spring ligament, also known as the <strong>plantar calcaneonavicular ligament,</strong> connects the <strong>sustentaculum tali to the navicular. </strong>It ties the calcaneus to the navicular and maintains the medial longitudinal arch of the foot. It is made up of the superomedial calcaneonavicular portion and the inferior calcaneonavicular portion.</p>\n<p>It supports the head of the talus which if fails or is destroyed, leads to separation of the navicular and calcaneus, in turn allowing the talar head, the highest point of the arch, to descend and leading to a flat-foot deformity.</p>\n<p>Other options:</p>\n<p>Option B: The <strong>anterior talofibular ligament</strong> is the \u201cankle sprain ligament\u201d because it is the one that is most often damaged when the ankle is rolled.</p>\n<p>Option C: The <strong>posterior talofibular ligament</strong> functions to stabilize the ankle joint and subtalar joint. Injuries are rare to this ligament unless there is an ankle dislocation or subluxation.</p>\n<p>Option D: The <strong>deltoid ligament</strong> is extremely strong and stabilizes the inside of the ankle. Tears of this ligament are most common when the ankle undergoes an\u00a0unstable ankle fracture.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/384527f62bfb4bf0b5deeda1d382b7cex1280x1303.JPEG"
    ]
  },
  {
    "text": "An elderly man with atherosclerosis presented with abdominal pain and blood-stained stools.  CECT abdomen is suggestive of ischemic colitis at the splenic flexure involving the marginal artery of Drummond. What are the arteries contributing to the formation of this structure?",
    "choices": [
      {
        "id": 1,
        "text": "Right colic and left colic arteries"
      },
      {
        "id": 2,
        "text": "Ileocolic and left colic arteries"
      },
      {
        "id": 3,
        "text": "Left colic and middle colic arteries"
      },
      {
        "id": 4,
        "text": "Left colic and sigmoid arteries"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The<strong> middle </strong>and<strong> left colic arteries</strong>\u00a0contribute to the formation of the <strong>marginal artery </strong>of<strong> Drummond </strong>at the splenic flexure.\u00a0The<strong> splenic flexure (Griffith's point) </strong>is a<strong> watershed area </strong>of the colon which is more prone to<strong> ischemia.\u00a0</strong></p>\n<p>The anastomotic vessel that runs in the mesentery along the inner margin of the colon is called the marginal artery of Drummond. From this artery, numerous small branches are given to the large bowel. It is formed by:</p>\n<ul>\n<li>Branches of <strong>superior mesenteric artery - </strong>middle colic, right colic, and ileocolic arteries</li>\n<li>Branches of <strong>inferior mesenteric artery - </strong>left colic, sigmoid, and superior rectal arteries</li>\n</ul>\n<p>When ischemia occurs at Griffith's point, the blood supply in this region is augmented by another arterial loop called the <strong>inner arterial arc (of Riolan).</strong> This arc connects the main trunk of the <strong>middle colic artery</strong> with the ascending branch of the<strong> left colic artery</strong>.</p>\n<p>Note: <strong>Sudeck's point</strong> is another watershed area present at the <strong>rectosigmoid junction</strong>. The <strong>sigmoid artery</strong> anastomoses with the <strong>superior rectal artery</strong> at this site.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e0e97a8c8aa3448a8c69bff4f49e06fex600x771.JPEG"
    ]
  },
  {
    "text": "Fracture of the jugular canal can present as",
    "choices": [
      {
        "id": 1,
        "text": "Loss of taste sensation in anterioir 2/3rd of tongue"
      },
      {
        "id": 2,
        "text": "Loss of taste sensation in posterior 1/3rd of tongue"
      },
      {
        "id": 3,
        "text": "Loss of general sensation in anterior 2/3rd of tongue"
      },
      {
        "id": 4,
        "text": "Loss of motor sensation in anterior 2/3rd of tongue"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<div class=\"page\" title=\"Page 696\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Fracture of the jugular canal affects\u00a0<strong>glossopharyngeal nerve</strong> and<strong>\u00a0</strong>presents as loss of taste sensation in<strong>\u00a0</strong>the<strong> posterior 1/3rd </strong>of<strong>\u00a0</strong>the<strong> tongue.\u00a0</strong></p>\n<p>The<strong> lingual nerve</strong> which is a\u00a0branch of the <strong>mandibular division </strong>of the <strong>trigeminal nerve </strong>gives<strong> general sensation, chorda tympani </strong>branch of<strong> facial nerve\u00a0</strong>gives <strong>taste </strong>sensation\u00a0for<strong>\u00a0the anterior 2/3rd\u00a0</strong>of tongue.<strong>\u00a0</strong><span style=\"font-size: 14px;\">Both taste and general sensation of the\u00a0<strong>posterior 1/3rd</strong> is by the\u00a0</span><strong style=\"font-size: 14px;\">glossopharyngeal nerve.\u00a0</strong>The <strong>muscles</strong> of the tongue, with the exception of palatoglossus, are supplied by the <strong>hypoglossal</strong> nerve. Palatoglossus is supplied via the pharyngeal plexus.</p>\n<p>The other nerves passing through<strong>\u00a0</strong>the<strong> jugular foramen</strong> are <strong>glossopharyngeal</strong>(cranial nerve IX)<strong>, vagus</strong>(cranial nerve X)<strong>,</strong> and <strong>accessory nerve</strong>(cranial nerve XI)<strong>.</strong></p>\n<p>The following is an image of the base of skull showing jugular foramen:</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4d3200d6a79b4d97928f2f5dd3e2947ex1279x1050.JPEG"
    ]
  },
  {
    "text": "A patient has dry eye and reduced nasal secretions. The location of a lesion might be in the ____.",
    "choices": [
      {
        "id": 1,
        "text": "Otic ganglion"
      },
      {
        "id": 2,
        "text": "Sphenopalatine ganglion"
      },
      {
        "id": 3,
        "text": "Ciliary ganglion"
      },
      {
        "id": 4,
        "text": "Superior cervical ganglion"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In this patient with&nbsp;<strong>dry eye</strong> and <strong>reduced nasal secretions</strong>, the&nbsp;<strong>lacrimal gland,&nbsp;</strong>and&nbsp;glands of the <strong>nasal mucosa </strong>are affected. So the lesion is possibly in the&nbsp;<strong>sphenopalatine ganglion</strong>.</p>\n<p><strong>Parasympathetic</strong> (secretomotor) supply to the <strong>lacrimal gland</strong>, glands of the <strong>nasal mucosa</strong> and palate travel in the nerve of the pterygoid canal i.e, <strong>Vidian nerve</strong>, and reach the <strong>sphenopalatine ganglion </strong>(a.k.a <strong>Pterygopalatine ganglion&nbsp;</strong>or&nbsp;<strong>nasal ganglion</strong>)&nbsp;where they relay before reaching the target. They also supply the blood vessels of the nose and cause vasodilation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c31b655650334362a07bf9d2535fbe58x1280x1727.JPEG"
    ]
  },
  {
    "text": "A patient with traumatic injury to the skull is diagnosed to have an epidural hematoma. The area of impact is at the pterion, causing damage to the underlying artery. Which of the following foramen does this artery traverse through?",
    "choices": [
      {
        "id": 1,
        "text": "4"
      },
      {
        "id": 2,
        "text": "3"
      },
      {
        "id": 3,
        "text": "2"
      },
      {
        "id": 4,
        "text": "1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Traumatic injury to the <strong>pterion</strong> can damage the underlying <strong>anterior branch of the middle meningeal artery</strong>.\u00a0The middle meningeal artery enters the middle cranial fossa through the <strong>foramen spinosum</strong>, labeled as <strong>3</strong> in the image.</p>\n<p>The structures passing through the foramen spinosum are:</p>\n<ul>\n<li>Middle meningeal artery</li>\n<li>Nervus spinosus\u00a0</li>\n<li>Middle meningeal vein</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/531daaefe7b541b5a131b297673173d2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/93b950527b9348b9ba405b1a9637e698x525x625.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/38db9393d25241fea9d0c86e8a2c78ebx1279x1050.JPEG"
    ]
  },
  {
    "text": "An elderly man is diagnosed with a slow-growing tumor in the deep perineal pouch. Which of the following is not a content of this structure?",
    "choices": [
      {
        "id": 1,
        "text": "Dorsal nerve of penis"
      },
      {
        "id": 2,
        "text": "Bulbourethral gland"
      },
      {
        "id": 3,
        "text": "Root of penis"
      },
      {
        "id": 4,
        "text": "Sphincter urethrae"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>root of the penis</strong>, which consists of two crus and one bulb, is the content of the <strong>superficial perineal pouch.</strong></p>\n<p>The deep perineal pouch is used to describe the space enclosed between the endopelvic fascia and the perineal membrane and includes the following contents:</p>\n<table style=\"height: 163px; width: 417px;\">\n<tbody>\n<tr>\n<td style=\"width: 10px;\"><strong>Males</strong></td>\n<td style=\"width: 108px;\"><strong>Common to both</strong></td>\n<td style=\"width: 109px;\"><strong>Females</strong></td>\n</tr>\n<tr>\n<td style=\"width: 10px;\">\n<ul>\n<li><strong>Dorsal nerve of the penis</strong></li>\n<li>Artery of the penis</li>\n<li>Origin\u00a0 of the branches of the penile artery</li>\n<li><strong>Bulbourethral glands</strong></li>\n</ul>\n</td>\n<td style=\"width: 108px;\">\n<ul>\n<li>Urethra</li>\n<li>Deep transverse perinei</li>\n<li><strong>Sphincter urethrae</strong></li>\n<li>Origin of the urethral artery</li>\n</ul>\n</td>\n<td style=\"width: 109px;\">\n<ul>\n<li>Dorsal nerve of the clitoris</li>\n<li>Artery of clitoris</li>\n<li>Origin\u00a0 of the branches of the artery of the clitoris</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An intern was asked to give an intravenous injection to a vein in the cubital fossa. All of the following are true about the cubital fossa except:",
    "choices": [
      {
        "id": 1,
        "text": "Brachioradialis forms the lateral boundary"
      },
      {
        "id": 2,
        "text": "Musculocutaneous nerve is one of the contents"
      },
      {
        "id": 3,
        "text": "Radial nerve enters the fossa laterally"
      },
      {
        "id": 4,
        "text": "Median cubital vein forms the roof"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>musculocutaneous nerve</strong> is not a content of the cubital fossa.</p>\n<p>The <strong>cubital fossa</strong> is a triangular depression present in the anterior side of the elbow joint. The boundaries of the cubital fossa include:</p>\n<ul>\n<li>Medially: Lateral border of the pronator teres</li>\n<li><strong>Laterally:</strong> Medial border of the <strong>brachioradialis</strong> (option A)</li>\n<li>Base: Proximally by an imaginary line joining the epicondyles of the humerus</li>\n<li>Apex (pointed downward): Joining of the lateral and medial boundaries.</li>\n<li><strong>Roof:</strong> Skin, superficial fascia containing <strong>median cubital vein</strong> (option D) joining the cephalic and basilic veins, lateral cutaneous nerve of the forearm, medial cutaneous nerve of the forearm, bicipital aponeurosis, and deep fascia.</li>\n<li>Floor: Brachialis and supinator muscles.</li>\n</ul>\n<p>The contents of the brachial fossa are (from medial to lateral side):</p>\n<ul>\n<li><strong>Median nerve</strong></li>\n<li><strong>Brachial artery</strong>, terminating into radial and ulnar arteries</li>\n<li><strong>Biceps brachii</strong> tendon with the bicipital aponeurosis</li>\n<li><strong>Radial nerve\u00a0</strong>enters the fossa laterally (option C) in the groove between the brachialis and brachioradialis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9d1c9e2551964aefa6e0031604454010x1280x2558.JPEG"
    ]
  },
  {
    "text": "The muscle marked by the arrow in the image below is innervated by ________",
    "choices": [
      {
        "id": 1,
        "text": "Dorsal scapular nerve"
      },
      {
        "id": 2,
        "text": "Suprascapular nerve"
      },
      {
        "id": 3,
        "text": "Thoracodorsal nerve"
      },
      {
        "id": 4,
        "text": "Subscapular nerve"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The muscle marked in the above image is <strong>levator</strong> <strong>scapulae</strong>, which is innervated by the <strong>dorsal scapular nerve.</strong></p>\n<p>The <strong>appendicular group of back muscles </strong>and their innervations include:</p>\n<table style=\"height: 332px; width: 362px;\">\n<tbody>\n<tr>\n<td style=\"width: 158.305px;\"><strong>Muscle\u00a0</strong></td>\n<td style=\"width: 175.102px;\"><strong>Nerve Supply</strong></td>\n</tr>\n<tr>\n<td style=\"width: 158.305px;\">\n<p>Trapezius</p>\n</td>\n<td style=\"width: 175.102px;\">Accessory nerve</td>\n</tr>\n<tr>\n<td style=\"width: 158.305px;\">\n<p><strong>Latissimus dorsi</strong></p>\n</td>\n<td style=\"width: 175.102px;\"><strong>Thoracodorsal nerve</strong></td>\n</tr>\n<tr>\n<td style=\"width: 158.305px;\">\n<p><strong>Levator scapulae</strong></p>\n</td>\n<td style=\"width: 175.102px;\"><strong>Dorsal scapular nerve</strong></td>\n</tr>\n<tr>\n<td style=\"width: 158.305px;\">\n<p>Rhomboid major and minor</p>\n</td>\n<td style=\"width: 175.102px;\">Dorsal scapular nerve</td>\n</tr>\n</tbody>\n</table>\n<p>Other options:</p>\n<p>Option B: The<strong>\u00a0suprascapular nerve</strong>\u00a0innervates the <strong>supra- and infraspinatus</strong> muscles.</p>\n<p>Option D: The <strong>subscapular nerves\u00a0</strong>supply the <strong>teres major</strong> and <strong>subscapularis</strong> muscles.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/29a16258d3534db2a696c2aaff2d8c97.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1cc7962a39374d419793ce26976b0c05x1280x1652.JPEG"
    ]
  },
  {
    "text": "Which of the following Couinaud segments of the liver drains directly into the inferior vena cava?",
    "choices": [
      {
        "id": 1,
        "text": "Segment 4a"
      },
      {
        "id": 2,
        "text": "Segment 2"
      },
      {
        "id": 3,
        "text": "Segment 4b"
      },
      {
        "id": 4,
        "text": "Segment 1"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Segment 1 (Caudate lobe) </strong>drains directly into the Inferior vena cava(IVC).</p>\n<p><strong>Couinaud classification </strong>is the commonly used classification of the liver. It divides the liver into eight segments. It is based on the distribution of <strong>portal venous branches</strong> in the liver parenchyma. Each segment has its own dual vascular inflow, biliary drainage, and lymphatic drainage.</p>\n<p>The <strong>left lobe</strong> is composed of the left lateral segment (<strong>Couinaud\u2019s segments II and III</strong>) and the left medial segment (<strong>segment IV</strong>). The <strong>right lobe</strong> is composed of segments<strong> V, VI, VII, and VIII, </strong>with segments V and VIII making up the right anterior lobe and segments VI and VII making up the right posterior lobe.</p>\n<p><strong>Segment I</strong> corresponds to the <strong>caudate lobe </strong>of the liver and <strong>segment IV</strong> corresponds to the <strong>quadrate lobe</strong> of the liver. Segment IV is divided into segments<strong> IVa</strong> and <strong>IVb</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7ac09a7e054740718891cee0c9475987x1280x1080.JPEG"
    ]
  },
  {
    "text": "Which part of this bone is palpable in the infraclavicular fossa?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The part of the scapula marked as <strong>1</strong> is the <strong>coracoid process</strong>\u00a0and it is <strong>palpable </strong>in the<strong> infraclavicular fossa.</strong>\u00a0The <strong>tip</strong> of the coracoid process lies approximately <strong>2.5 cm below</strong> the <strong>clavicle</strong>, immediately lateral to the infraclavicular fossa (deltopectoral triangle).\u00a0Hence, the coracoid process can be palpated below the clavicle.</p>\n<p>The <strong>coracoid</strong> process arises from the<strong> upper border</strong> of the neck of the scapula and it projects forwards and slightly laterally.\u00a0<strong>Attachments</strong> at the coracoid process include\u00a0</p>\n<ul>\n<li>The conoid portion of the coracoclavicular ligament\u00a0</li>\n<li>Pectoralis minor\u00a0</li>\n<li>Medial end of coraco-acromial ligament</li>\n<li>Coracohumeral ligament\u00a0</li>\n<li>Glenocorocoid ligament\u00a0</li>\n<li>Coracobrachialis muscle</li>\n</ul>\n<p>Other options\u00a0</p>\n<p>Option B - <strong>Acromian process</strong> <strong>continues</strong> from the <strong>spine</strong> of the scapula. The acromion is subcutaneous over its dorsal surface, The attachments at the acromion are the coracoacromial ligament, the articular capsule of the acromioclavicular joint, and horizontal fibers of the trapezius.\u00a0</p>\n<p>Option C - The <strong>glenoid fossa</strong> is present at the <strong>lateral angle</strong> of the scapula. It is articular with the humerus to form the shoulder joint.\u00a0</p>\n<p>Option D - The <strong>inferior angle</strong> lies over the <strong>seventh rib</strong>. Dorsally, it is related to latissimus dorsi. The angle is visible when the arm is raised over the head.</p>\n<p>Parts of the scapula are given in the image below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ead735a1282143a39eebdceab38f52f2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f98f2bea2b2f44eca8a65b59439b75e1x1280x1187.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a hybrid muscle?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>sternohyoid</strong>\u00a0muscle marked as '3' is not a hybrid muscle. It is innervated only by the anterior rami of spinal nerves<strong> C1-C3 </strong>(via the<strong> ansa cervicalis</strong>)</p>\n<p><strong>Hybrid muscles</strong> are the muscles that are supplied by <strong>two different nerves</strong> with <strong>different root values.</strong></p>\n<p>Other muscles in the given image are:</p>\n<p>1 - Trapezius</p>\n<p>2 - Sternocleidomastoid</p>\n<p>4 - Digastric muscle (anterior belly)</p>\n<p><strong>Hybrid muscles of head and neck:\u00a0</strong></p>\n<ul>\n<li><strong>Digastric</strong> - Anterior belly is supplied by the nerve to the mylohyoid and posterior belly is supplied by the facial nerve.</li>\n<li><strong>Trapezius</strong> and <strong>sternocleidomastoid</strong> (SCM) - Motor supply is by the spinal accessory nerve and the proprioception is by ventral rami of cervical nerves (C2, C3 for SCM and C3, C4 for trapezius).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5343c411aa9b4ea7ad7750c690405688.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d24e80807728458ab569ed5a214dd178x600x651.JPEG"
    ]
  },
  {
    "text": "A 5-month-old infant was brought to the pediatric OP for a routine checkup. The child had congenital hypoparathyroidism. CT scan revealed thyroid hypoplasia and absent thymus. Abnormality in the development of which of the following pharyngeal pouches will most likely cause the given features?",
    "choices": [
      {
        "id": 1,
        "text": "Fourth and fifth pharyngeal pouch"
      },
      {
        "id": 2,
        "text": "First and second pharyngeal pouch"
      },
      {
        "id": 3,
        "text": "Second and third pharyngeal pouch"
      },
      {
        "id": 4,
        "text": "Third and fourth pharyngeal pouch"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The defect is most likely to be present in the development of<strong> third and fourth pharyngeal pouches</strong> as the <strong>inferior parathyroid gland</strong> and <strong>thymus</strong> develop from <strong>3rd</strong> pouch while the <strong>superior parathyroid gland</strong> and <strong>parafollicular</strong>\u00a0<strong>cells</strong> of the thyroid develop from <strong>4th pouch.</strong></p>\n<table style=\"width: 312px;\">\n<tbody>\n<tr>\n<td style=\"width: 298px;\" colspan=\"2\"><strong>Derivatives of the Pharyngeal Pouches</strong></td>\n</tr>\n<tr>\n<td style=\"width: 86px;\">1</td>\n<td style=\"width: 212px;\">\n<ul>\n<li>Tympanic cavity\u00a0(middle ear cavity)</li>\n<li>Auditory tube\u00a0(eustachian tube)\u00a0</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 86px;\">2</td>\n<td style=\"width: 212px;\">\n<ul>\n<li>Palatine tonsils</li>\n<li>Tonsillar fossa</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 86px;\"><strong>3</strong></td>\n<td style=\"width: 212px;\">\n<ul>\n<li><strong>Inferior parathyroid glands (parathyroid III)</strong></li>\n<li><strong>Thymus</strong></li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 86px;\"><strong>4</strong></td>\n<td style=\"width: 212px;\">\n<ul>\n<li><strong>Superior parathyroid glands (Parathyroid IV)</strong></li>\n<li>Ultimobranchial body - gives rise to <strong>parafollicular</strong> <strong>(C)</strong> <strong>cells</strong> of the thyroid gland</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a7d62786e0f6410ab32859b8bdc97d41x1280x1407.JPEG"
    ]
  },
  {
    "text": "A patient underwent surgery for the varicose vein. He now complains of sensory loss over the medial aspect of the leg and foot. Which of the following nerves is most likely to be injured?",
    "choices": [
      {
        "id": 1,
        "text": "Sural nerve"
      },
      {
        "id": 2,
        "text": "Superficial peroneal nerve"
      },
      {
        "id": 3,
        "text": "Deep peroneal nerve"
      },
      {
        "id": 4,
        "text": "Saphenous nerve"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario in a patient with <strong>sensory loss</strong> over the <strong>medial aspect</strong> of the <strong>leg</strong> and <strong>foot</strong> is suggestive of<strong> injury</strong> to the <strong>saphenous nerve.\u00a0</strong>Injury to the saphenous nerve is common following varicose vein surgery.</p>\n<p>The saphenous nerve\u00a0is the <strong>longest</strong> and <strong>largest cutaneous branch</strong> of the <strong>femoral nerve</strong> and is the longest nerve in the body. It arises from the <strong>posterior division</strong> of the femoral nerve. It then enters the<strong> adductor canal</strong> and exits it by piercing the fascia lata between the gracilis and sartorius and <strong>supplies</strong> the <strong>skin</strong> over the <strong>patella.</strong> The saphenous nerve then <strong>descends</strong> along the medial border of the tibia along with the <strong>great</strong> <strong>saphenous vein</strong>\u00a0(anterior to the vein) and supplies the <strong>skin</strong> on the <strong>medial side</strong> of the\u00a0<strong>knee, leg,</strong> and <strong>foot</strong>\u00a0up to the first metatarsophalangeal joint.</p>\n<p>During <strong>stripping</strong> of <strong>veins</strong> in\u00a0<strong>varicose surgery,</strong> injury to the saphenous nerve is common as it closely travels with the great saphenous vein. Sensory loss over the medial side of the knee, leg, and foot is observed in saphenous nerve injury.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/24edbaeff8fb4f8caf297219c67f5ab6x1200x1836.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d5105da4d39b42dc9a3f66fbedaf110cx1200x1447.JPEG"
    ]
  },
  {
    "text": "Area marked \"?\" in the diagram below is ________.",
    "choices": [
      {
        "id": 1,
        "text": "Facial colliculus"
      },
      {
        "id": 2,
        "text": "Vagal triangle"
      },
      {
        "id": 3,
        "text": "Vestibular triangle"
      },
      {
        "id": 4,
        "text": "Hypoglossal triangle"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><span class=\"TextRun SCX151796368\" lang=\"EN-US\" xml:lang=\"EN-US\"><span class=\"NormalTextRun SCX151796368\">T</span></span><span class=\"TextRun SCX151796368\" lang=\"EN-US\" xml:lang=\"EN-US\"><span class=\"NormalTextRun SCX151796368\">he image is of the floor of the 4th ventricle, and the area</span></span> <span class=\"TextRun SCX151796368\" lang=\"EN-US\" xml:lang=\"EN-US\"><span class=\"NormalTextRun SCX151796368\">marked \"?\" </span></span><span class=\"TextRun SCX151796368\" lang=\"EN-US\" xml:lang=\"EN-US\"><span class=\"NormalTextRun SCX151796368\">is the <strong>hypoglossal triangle.</strong></span></span></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/98d0d9f240d0438cae6d224eeef7edff.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ed4dcf0328be445093db086cbed91ffdx1280x1605.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a5bc60bad6b545fa86a5f8d75d7b8f8ex974x1458.PNG"
    ]
  },
  {
    "text": "A man sustained a blow on the lateral aspect of fibula which is likely to result in all of the following features except ________",
    "choices": [
      {
        "id": 1,
        "text": "Loss of dorsiflexion of foot"
      },
      {
        "id": 2,
        "text": "Loss of sensation over the dorsum of foot"
      },
      {
        "id": 3,
        "text": "Loss of extension of great toe"
      },
      {
        "id": 4,
        "text": "Loss of sensation over lateral border of foot"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The patient is likely to have fracture involving the<strong> neck of the fibula,&nbsp;</strong>which is closely related to the<strong> common peroneal nerve.</strong></p>\n<p>Loss of sensation over the lateral border of foot is not seen in the injury to common peroneal nerve because this area is innervated by <strong>sural nerve</strong> which is a branch of tibial nerve.</p>\n<p><strong>Common peroneal nerve:</strong></p>\n<p>The common peroneal nerve is a <strong>component of the sciatic nerve</strong>. In the posterior thigh, it supplies the <strong>short head of biceps femoris</strong>. It curves around the neck of fibula deep to peroneus longus and divides into superficial and deep peroneal nerves.</p>\n<ul>\n<li>The <strong>superficial peroneal</strong> nerve innervates peroneus longus and peroneus brevis which are the <strong>evertors&nbsp;</strong>of foot and to the skin over dorsal area of foot except the first webspace and lateral side of little toe.</li>\n<li>The <strong>deep peroneal</strong> nerve innervates all muscles of <strong>anterior compartment</strong> which are the <strong>dorsiflexors&nbsp;</strong>of foot, extensor digitorum brevis, first two dorsal interossei muscles and skin between great and second toes.</li>\n</ul>\n<p><strong>Causes of common peroneal nerve injury:</strong></p>\n<ul>\n<li>Fracture of the <strong>fibular neck:&nbsp;</strong>due to direct injury or indirect twisting injury of the lower limb</li>\n<li>Pressure from a splint or a plaster cast over the neck of fibula</li>\n<li><strong>Postpartum nerve injury</strong> include injury to the peroneal nerve and injury to the lateral femoral cutaneous nerve.</li>\n</ul>\n<p>Injury to common peroneal nerve will lead to:</p>\n<ul>\n<li>Weakness of dorsiflexion of foot or <strong>foot drop.</strong> So the patient attempts to lift the leg high enough during walking so that the foot does not drag on the floor. This is known as <strong>high stepping gait.</strong></li>\n<li><strong>Loss of eversion</strong></li>\n<li>Loss of extension of toes</li>\n<li>Sensory loss along the anterior and lateral side of the leg, dorsum of foot including the medial side of great toe.</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a2e4060c262748c7ac60528f4cd7c10bx1280x1592.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3d52bcf03ec442bfa7909cf6ba2a7033x1280x2400.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/37c02bed1dd24ae8a88314cfedfa8349x1280x1373.JPEG"
    ]
  },
  {
    "text": "The marked area in the given image is supplied by which dermatome?",
    "choices": [
      {
        "id": 1,
        "text": "T8"
      },
      {
        "id": 2,
        "text": "T9"
      },
      {
        "id": 3,
        "text": "T10"
      },
      {
        "id": 4,
        "text": "T11"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The marked dermatome which includes the <strong>umbilicus is supplied by T10.</strong></p>\n<p>The dermatomal distribution of the abdominal region is as follows:\u00a0</p>\n<ul>\n<li>The skin from the xiphoid process to just above the umbilicus is supplied by T7-T9.</li>\n<li>The skin around the umbilicus is supplied by T10.</li>\n<li>The skin below the umbilicus until the suprapubic region is supplied by T11, T12.\u00a0</li>\n<li>The skin around genitalia and upper medial thigh is supplied by L1.\u00a0</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/64566a73a4db4e6b9e66972bfcdc91c1.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d46332cd9eab4a279a8f32d56a50d3ffx1280x1722.JPEG"
    ]
  },
  {
    "text": "Circle of Willis does not get a contribution from",
    "choices": [
      {
        "id": 1,
        "text": "Anterior cerebral artery"
      },
      {
        "id": 2,
        "text": "Middle cerebral artery"
      },
      {
        "id": 3,
        "text": "Posterior communicating artery"
      },
      {
        "id": 4,
        "text": "Posterior cerebral artery"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Circle of Willis does <strong>not</strong> get a contribution from the<strong> middle cerebral artery.</strong></p>\n<p>The <strong>circle of Willis</strong> is located in the <strong>interpeduncular fossa</strong> at the base of the brain. It is an <strong>anastomosis between the internal carotid arteries and vertebral arteries</strong>. It allows the blood entering from either artery to be distributed to both the cerebral hemispheres.</p>\n<p>The arteries forming the circle of Willis are:</p>\n<ul>\n<li>Anterior communicating artery</li>\n<li><strong>Anterior cerebral arteries</strong></li>\n<li>Internal carotid arteries</li>\n<li><strong>Posterior communicating arteries</strong></li>\n<li><strong>Posterior cerebral arteries</strong></li>\n<li>Basilar artery</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Anatomy Test';
        let hierarchy = ["Marrow", "FMGE Test Series Subject", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>