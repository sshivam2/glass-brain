<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>35 Parasitic Infestations Of Skin - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Dermatology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">9</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>A 25-year-old male presents with complaints of severe itching in both his hands for the last 2 weeks. He reports that the itching is significantly worse at night and disturbs his sleep. His hands show lesions characteristic of scabies. Which body site is usually not affected by this condition?</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\" Samuel Freire da Silva, M.D.\" data-license=\"Creative Commons Attribution/Share-Alike License\" data-source=\"https://www.wikidoc.org/index.php/File:Norwegian_scabies15.jpg\" height=\"297\" src=\"https://image.prepladder.com/content/uYnREQiSbMSRexCAKaPw1723024330.png\" width=\"400\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Face"
      },
      {
        "id": 2,
        "text": "Axilla"
      },
      {
        "id": 3,
        "text": "Groin/genitalia"
      },
      {
        "id": 4,
        "text": "Umbilicus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Face</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The likely diagnosis of this case is scabies, a <span class=\"customMeta\" data-dictid=\"c0433f52ad1692777194c2ffb6fc63\">parasitic</span> infection of the skin caused by <span class=\"customMeta\" data-dictid=\"418b5d7d081692777198020f6de144\">Sarcoptes</span> scabiei (itch mite).</p>\n\n<p><strong>Mode of spread:</strong> <span class=\"customMeta\" data-dictid=\"88ce8f7ff416927771985430dd4bd0\">Scabies</span> are highly contagious, and transmission is by skin-to-skin contact and fomites. Risk factors include poor personal hygiene.</p>\n\n<p><strong>Clinical manifestation: </strong></p>\n\n<ul>\n\t<li>\n\t<p>The characteristic sign of <span class=\"customMeta\" data-dictid=\"88ce8f7ff416927771985430dd4bd0\">scabies</span> is the presence of burrows, Are thin, grayish-white or skin-colored, <span class=\"customMeta\" data-dictid=\"d02067c4b51692777191b8eec8b062\">linear</span> or wavy lines found in areas like the webbing between fingers, wrists, elbows, armpits, waistline, buttocks, <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">genital</span> area, and ankles, causing intense itching, especially at night.</p>\n\t</li>\n\t<li>\n\t<p>Examination typically reveals excoriated papules, typically over the web spaces of the fingers (as shown in the image).</p>\n\t</li>\n</ul>\n\n<p>Other areas of the body that must be examined for lesions include:</p>\n\n<ol>\n\t<li>\n\t<p>The <span class=\"customMeta\" data-dictid=\"db46007ad21692777192dcc160a2e2\">medial</span> aspect of the wrist</p>\n\t</li>\n\t<li>\n\t<p>The <span class=\"customMeta\" data-dictid=\"db46007ad21692777192dcc160a2e2\">medial</span> aspect of the forearm</p>\n\t</li>\n\t<li>\n\t<p>Umbilicus <strong>(Option D)</strong></p>\n\t</li>\n\t<li>\n\t<p>Axilla<strong> (Option B)</strong></p>\n\t</li>\n\t<li>\n\t<p>Nipple</p>\n\t</li>\n\t<li>\n\t<p>Genitalia/ groin<strong> (Option C) </strong>- burrows (wavy, grey tunnels)</p>\n\t</li>\n</ol>\n\n<p>This distribution is called the circle of Hebra.</p>\n\n<p>The face is typically spared, due to high amounts of <span class=\"customMeta\" data-dictid=\"add57598af169277719845e7c30916\">sebum</span> in the <span class=\"customMeta\" data-dictid=\"9fdd7489051692777202cffe3f24cc\">facial</span> skin but\u00a0\u00a0pre pubecent children lack <span class=\"customMeta\" data-dictid=\"359edf0778169277719886070af9db\">sebaceous</span> glands and hence their faces can be affected</p>\n\n<p>Circle of Hebra demonstrating the typical location of <span class=\"customMeta\" data-dictid=\"88ce8f7ff416927771985430dd4bd0\">scabies</span> lesions:</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Pradeep\" data-hash=\"\" data-license=\"PrepLadder Copyrights\" data-source=\"PrepLadder Copyrights\" data-tags=\"\" height=\"417\" src=\"https://image.prepladder.com/content/ooW6ZkOSnzFSZN2kyJMX1723024370.png\" width=\"290\" /></p>",
    "question_images": [
      "https://image.prepladder.com/content/uYnREQiSbMSRexCAKaPw1723024330.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/ooW6ZkOSnzFSZN2kyJMX1723024370.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/8VPyF0zrhWIyU32CoGrA1728299082.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/XoInsQUTzH2fEOz7p5IH1730119236.mp3"
  },
  {
    "text": "<p>A 10-year-old boy is diagnosed with scabies after presenting with severe itching lesions, predominantly over his wrists and hands. What is the first-line treatment for his condition?</p>",
    "choices": [
      {
        "id": 1,
        "text": "5 % Permethrin"
      },
      {
        "id": 2,
        "text": "Gamma benzene hexachloride (GBHC)"
      },
      {
        "id": 3,
        "text": "Precipitated sulfur"
      },
      {
        "id": 4,
        "text": "Ivermectin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) 5% Permethrin</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>5% <span class=\"customMeta\" data-dictid=\"81d6ac3d201692777195c6de09e22c\">Permethrin</span> is the drug of choice for scabies. It is given in addition to general measures:\n\t<ul>\n\t\t<li>Anti-histamines for pruritus</li>\n\t\t<li>Wash clothes, and bedding with hot water</li>\n\t\t<li>Examine and treat family members</li>\n\t</ul>\n\t</li>\n\t<li><strong>MOA:</strong> Blocks sodium channels of the <span class=\"customMeta\" data-dictid=\"9b68c70cd9169277719056d73b3171\">itch</span> mite, causing paralysis.</li>\n\t<li>Application: Apply below the neck for 8-12 hours at a time (overnight); it is typically applied twice, one week apart.</li>\n\t<li>It is safe and can be used in all patients older than 2 months.</li>\n\t<li>1% Permethrinis used for pediculosis</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>GBHC (option B):</strong>\u00a0An older chloride-channel <span class=\"customMeta\" data-dictid=\"adecdf9cb2169277718363b8a0e491\">blocker</span> that is rarely used. It is also not safe in pregnancy, in those with neurologic disorders, and in children.</p>\n\n<p><br />\n<strong>Precipitated <span class=\"customMeta\" data-dictid=\"978b9c4c1a1692777199fc90ace6a5\">sulfur</span> (option C)</strong>: While safe and effective, this is not the first choice, as its odour can make it unpleasant to use, But can be used in infants <2 months old.</p>\n\n<p><br />\n<strong>Ivermectin (option D): </strong>Given orally (200mc/kg\u2014two doses). It is typically reserved for patients with <span class=\"customMeta\" data-dictid=\"88ce8f7ff416927771985430dd4bd0\">scabies</span> who do not respond to permethrin, <span class=\"customMeta\" data-dictid=\"06123ff61a1692777182e19b790ebc\">atypical</span> scabies, and those who cannot comply with or tolerate <span class=\"customMeta\" data-dictid=\"9c5b45e3b916927772000167f2669a\">topical</span> alternatives.</p>\n\n<p>Briefly, other drugs include- <span class=\"customMeta\" data-dictid=\"812ed80c73169277718518915c8369\">Crotamiton</span> (not safe in children), Malathion, <span class=\"customMeta\" data-dictid=\"670fd69d0f1692777182f40b22be72\">Benzyl</span> Benzoate, and <span class=\"customMeta\" data-dictid=\"7e6c3294c61692777191e223e4fe6d\">Lindane</span> (not safe in children, pregnancy).</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/mxvmuA1uo2Ae16xEtrVc1728299148.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/gq7U5EVfQoFGgpgYuG8z1730120547.mp3"
  },
  {
    "text": "<p>A 30-year-old female with lymphoma on chemotherapy presents with large, crusted plaques over her entire torso, arm, and legs. She reports minimal itching. What is the optimal treatment regimen for this patient?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Samuel Freire da Silva, M.D \" data-hash=\"\" data-license=\"Creative Commons Attribution/Share-Alike License\" data-source=\"https://www.wikidoc.org/index.php/Scabies\" data-tags=\"\" height=\"235\" src=\"https://image.prepladder.com/content/LdV7ihmPiaJ8PyuEcjwr1723024490.png\" width=\"287\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Oral ivermectin alone"
      },
      {
        "id": 2,
        "text": "Topical permethrin alone"
      },
      {
        "id": 3,
        "text": "Ivermectin + Permethrin"
      },
      {
        "id": 4,
        "text": "Topical steroids"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) <span class=\"customMeta\" data-dictid=\"b16589305a1692777190ce9d440182\">Ivermectin</span> + Permethrin</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>This patient likely has <span class=\"customMeta\" data-dictid=\"77533f842f1692777185dd3e0b816c\">crusted scabies</span> or <span class=\"customMeta\" data-dictid=\"5b5aec8f471692777193d45049b907\">Norwegian scabies</span> (NS).</p>\n\n<p>This is a severe <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of <span class=\"customMeta\" data-dictid=\"88ce8f7ff416927771985430dd4bd0\">scabies</span> due to massive <span class=\"customMeta\" data-dictid=\"97f6c38301169277719097d4d23cff\">infestation</span> of the <span class=\"customMeta\" data-dictid=\"9b68c70cd9169277719056d73b3171\">itch</span> mite. Risk factors include:</p>\n\n<ol>\n\t<li>Immunocompromise (HIV, malignancy, etc)</li>\n\t<li>Old age</li>\n\t<li>Neurologic disease</li>\n</ol>\n\n<p>NS is characterized by large, hyperkeratotic plaques that may cover up to 90% of the body's surface. Due to diminished immunity, <span class=\"customMeta\" data-dictid=\"c238cff71916927771965fb88e6cc4\">pruritus</span> is typically absent, contributing to the accumulation of crusts. These crusts can contain <span class=\"customMeta\" data-dictid=\"fedf65ed431692777192f0de4f27ba\">millions</span> of mites and their eggs.</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"Samuel Freire da Silva, M.D \" data-hash=\"\" data-license=\"Creative Commons Attribution/Share-Alike License\" data-source=\"https://www.wikidoc.org/index.php/Scabies\" data-tags=\"\" height=\"258\" src=\"https://image.prepladder.com/content/LdV7ihmPiaJ8PyuEcjwr1723024490.png\" width=\"316\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p>Treatment involves both <strong>oral <span class=\"customMeta\" data-dictid=\"b16589305a1692777190ce9d440182\">ivermectin</span> and <span class=\"customMeta\" data-dictid=\"9c5b45e3b916927772000167f2669a\">topical</span> permethrin.</strong> Additionally, a <span class=\"customMeta\" data-dictid=\"d132a14f171692777190a9acbd4eec\">keratolytic</span> agent may be used to help the <span class=\"customMeta\" data-dictid=\"31dd0b58bb1692777195e6016ecd51\">penetration</span> of permethrin.</p>\n\n<p><br />\n<strong>Topical steroids (Option D):</strong> <span class=\"customMeta\" data-dictid=\"9c5b45e3b916927772000167f2669a\">Topical</span> steroids are the treatment of choice for <span class=\"customMeta\" data-dictid=\"bfa856c77716927771939978c5afd0\">nodular</span> scabies, a special <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of <span class=\"customMeta\" data-dictid=\"88ce8f7ff416927771985430dd4bd0\">scabies</span> caused by a <span class=\"customMeta\" data-dictid=\"2c7e1ce33316927771892ce1da8276\">hypersensitivity</span> response to the mites. The lesions are typically pruritic, with firm nodules/ papules over the <span class=\"customMeta\" data-dictid=\"a6218759db1692777182316d0cd2aa\">axilla</span> and groin.</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"Mohammad2018,\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Scabies_nodularis_new_image.jpg\" data-tags=\"\" height=\"299\" src=\"https://image.prepladder.com/content/8mFm036Q8VmvNUGbaZrZ1723024544.png\" width=\"299\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p style=\"text-align:center\">Nodules in the <span class=\"customMeta\" data-dictid=\"a6218759db1692777182316d0cd2aa\">axilla</span> of a patient with <span class=\"customMeta\" data-dictid=\"bfa856c77716927771939978c5afd0\">nodular</span> scabies</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/LdV7ihmPiaJ8PyuEcjwr1723024490.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/LdV7ihmPiaJ8PyuEcjwr1723024490.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/2UtrJcucuyBzAbsUqoEZ1728299237.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/REvrbyIkoFjGKGj43XrL1730120616.mp3"
  },
  {
    "text": "<p>A 6-month-old girl is brought by her parents for evaluation of a rash. On examination, she appears uncomfortable, and there are multiple small red papules on her face, palms, and soles. Multiple small burrows are also seen. Microscopy of skin scrapings is shown below. What is the causative organism?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\"Natsuko SUGIURA Kandai Doi Takuya Kato[...] Shin-Ichi Hayama\"\" data-hash=\"\" data-license=\"CC BY NC ND 4.0\" data-source=\"https://www.researchgate.net/figure/Microscope-images-of-an-adult-mite-and-eggs-of-Sarcoptes-scabiei-isolated-from-raccoon_fig2_322589928\" data-tags=\"\" height=\"306\" src=\"https://image.prepladder.com/content/Bg3OBf5sPykCweGJM6lH1723024695.png\" width=\"416\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Phthiris pubis"
      },
      {
        "id": 2,
        "text": "Sarcoptes scabiei"
      },
      {
        "id": 3,
        "text": "Trichophyton"
      },
      {
        "id": 4,
        "text": "Staphylococcus aureus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) <span class=\"customMeta\" data-dictid=\"418b5d7d081692777198020f6de144\">Sarcoptes</span> scabiei</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The given clinical scenario describes <span class=\"customMeta\" data-dictid=\"4c815174781692777190e1b4a5d704\">infantile</span> scabies. <span class=\"customMeta\" data-dictid=\"4c815174781692777190e1b4a5d704\">Infantile</span> <span class=\"customMeta\" data-dictid=\"88ce8f7ff416927771985430dd4bd0\">scabies</span> are similar to adult scabies, except that there is more extensive involvement, including the face, palms, and soles.</li>\n\t<li>Examination reveals erythematous papules with burrows. Lesions may even be <span class=\"customMeta\" data-dictid=\"4b0fee14c816927772016e67cf3a13\">vesicular</span> or bullous due to greater <span class=\"customMeta\" data-dictid=\"9d21dd5d3116927771907405b181bc\">inflammatory</span> response in children.</li>\n</ul>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"\"Seon Pil Jin Ji Eun Choi Chong Hyun Won Soyun Cho\"\" data-hash=\"\" data-license=\"CC BY-NC 3.0\" data-source=\"https://www.researchgate.net/publication/44649779_Scabies_in_a_2-month-old_Infant_Successfully_Treated_with_Lindane\" data-tags=\"\" height=\"183\" src=\"https://image.prepladder.com/content/YJOVYee1XDfI074MFCoc1723024723.png\" width=\"258\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<ul>\n\t<li>Skin scraping and <span class=\"customMeta\" data-dictid=\"79067cb33316927771926965c3c0b5\">microscopic</span> examination of the <span class=\"customMeta\" data-dictid=\"e4c62a77731692777187b9c7ded25d\">epidermis</span> from the affected sites establish the diagnosis of scabies.</li>\n\t<li>KOH may be used to dissolve <span class=\"customMeta\" data-dictid=\"d0e68b82ed1692777190fa10f7d4ba\">keratin</span> debris.</li>\n\t<li>Microscopic evaluation will reveal mites, eggs, and feces.</li>\n</ul>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"\"Natsuko SUGIURA Kandai Doi Takuya Kato[...] Shin-Ichi Hayama\"\" data-hash=\"\" data-license=\"CC BY NC ND 4.0\" data-source=\"https://www.researchgate.net/figure/Microscope-images-of-an-adult-mite-and-eggs-of-Sarcoptes-scabiei-isolated-from-raccoon_fig2_322589928\" data-tags=\"\" height=\"306\" src=\"https://image.prepladder.com/content/Bg3OBf5sPykCweGJM6lH1723024695.png\" width=\"416\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p style=\"text-align:center\">Mite with eggs</p>\n\n<p style=\"text-align:center\">\u00a0</p>\n\n<p><strong>Phthirus <span class=\"customMeta\" data-dictid=\"09cc11ccda1692777196f75bd122ee\">pubis</span> (Option A)</strong>\u00a0\u2013 Causes <span class=\"customMeta\" data-dictid=\"fff48ca9da16927771966fd16bbacc\">pubic</span> <span class=\"customMeta\" data-dictid=\"c6a796b2de16927771913a9977216c\">lice</span> (crab <span class=\"customMeta\" data-dictid=\"5dacacc82916927771910cd3388165\">louse</span> infestation), primarily affecting <span class=\"customMeta\" data-dictid=\"fff48ca9da16927771966fd16bbacc\">pubic</span> hair, not associated with burrows or extensive <span class=\"customMeta\" data-dictid=\"4c815174781692777190e1b4a5d704\">infantile</span> involvement.</p>\n\n<p><br />\n<strong>C. Trichophyton\u00a0(Option C)</strong> \u2013 A <span class=\"customMeta\" data-dictid=\"84b9a43a7816927771867efa42a2dd\">dermatophyte</span> <span class=\"customMeta\" data-dictid=\"618e9d3b6416927772031d0260310e\">fungus</span> responsible for <span class=\"customMeta\" data-dictid=\"dbb566df9216927772009e22e9d078\">tinea</span> infections (e.g., ringworm), which presents with <span class=\"customMeta\" data-dictid=\"a37fd1603c1692777198f87a4a51dc\">scaly</span> patches rather than burrows or vesicles.</p>\n\n<p><br />\n<strong>Staphylococcus aureus\u00a0(Option D)</strong> \u2013 Can cause <span class=\"customMeta\" data-dictid=\"7e23404d13169277718994a4692d6d\">impetigo</span> and bullous skin infections but does not produce burrows, mites, or <span class=\"customMeta\" data-dictid=\"79067cb33316927771926965c3c0b5\">microscopic</span> eggs in skin scrapings.</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/Bg3OBf5sPykCweGJM6lH1723024695.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/YJOVYee1XDfI074MFCoc1723024723.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/OkYos0nfgtasfIP3wlv11728299346.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/75YAPkDO5FRCJUG60vM11730120675.mp3"
  },
  {
    "text": "<p>A 9-year-old girl presents with complaints of an itchy scalp for the last few days. Local inspection reveals mild crusting in areas of the scalp, with multiple white nits along the hair shafts. What is the causative organism?</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"\" data-license=\"\" data-source=\"\" height=\"417\" src=\"https://image.prepladder.com/content/6ZKbHlPQvwTdZm1OL92y1723024921.png\" width=\"313\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p>\u00a0 \u00a0\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Pediculus humanus corporis"
      },
      {
        "id": 2,
        "text": "Pthirus pubis"
      },
      {
        "id": 3,
        "text": "Sarcopteis scabei"
      },
      {
        "id": 4,
        "text": "Pediculus humanus capitis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) <span class=\"customMeta\" data-dictid=\"ab628d10971692777195e7edca627e\">Pediculus</span> humanus capitis</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<table align=\"center\" cellspacing=\"0\" style=\"border-collapse:collapse; width:620px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\u00a0</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Pediculosis capitis</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Pediculosis corporis</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Pediculosis pubis</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Spread</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Skin-to-skin contact/ fomites</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Skin-to-skin contact/ fomites</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Skin-to-skin contact <strong>sexually transmitted</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Causative agent</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Head <span class=\"customMeta\" data-dictid=\"5dacacc82916927771910cd3388165\">louse</span> (Pediculus humanus capitis) <strong>(Option D)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Body <span class=\"customMeta\" data-dictid=\"5dacacc82916927771910cd3388165\">louse</span> (Pediculus humanus corporis)\u00a0<strong>(Option A)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Pubic <span class=\"customMeta\" data-dictid=\"5dacacc82916927771910cd3388165\">louse</span> (pthris pubis)\u00a0<strong>(Option B)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Classical scenario</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>School-going children</p>\n\n\t\t\t<p>(girls - long hair)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Destitute and\u00a0homeless</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>-</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Presentation, clinical features</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Itching of the scalp.</p>\n\n\t\t\t<p>Multiple <span class=\"customMeta\" data-dictid=\"c6a796b2de16927771913a9977216c\">lice</span> or nits (empty eggs of the lice)</p>\n\n\t\t\t<p>May be crusting, secondary <span class=\"customMeta\" data-dictid=\"f3264d37f716927772033bb603c01f\">folliculitis</span> secondary to scratching.</p>\n\n\t\t\t<p>May have regional lymphadenopathy.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Morbus Errorum </strong>(body <span class=\"customMeta\" data-dictid=\"c6a796b2de16927771913a9977216c\">lice</span> infestation) is characterized by excoriated itchy papules over the body and the presence of nits in the folds of clothes.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Itchy papules in the <span class=\"customMeta\" data-dictid=\"a48fa02dfe1692777188de798e404f\">groin</span> and <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">genital</span> region.</p>\n\t\t\t\u00a0\n\n\t\t\t<p>\u2018Macula cerulea\u2019 is a bluish dot over the affected area caused by blood <span class=\"customMeta\" data-dictid=\"f0c6fefae41692777187c76a6f65f6\">extravasation</span> secondary to anticoagulants in the louse\u2019s saliva.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Treatment</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>1% permethrin</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>1% permethrin</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>1% permethrin</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"149\" src=\"https://image.prepladder.com/content/0rQvyESXjpOLMop40wld1723024985.png\" width=\"221\" /><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"143\" src=\"https://image.prepladder.com/content/Ldh799361ntEKYvZpwBw1723025013.png\" width=\"112\" /></p>\n\n<p style=\"text-align:center\">Pediculus humanus</p>\n\n<p>\u00a0</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"104\" src=\"https://image.prepladder.com/content/mudEzunCCPqD6jeSosdD1721057230.png\" width=\"132\" /><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"102\" src=\"https://image.prepladder.com/content/Emp1IBpM2O7iG6WKPePe1723025077.png\" width=\"155\" /><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"124\" src=\"https://image.prepladder.com/content/XtwgxwBZOW7a9HgZbO821723025129.png\" width=\"167\" /></p>\n\n<p style=\"text-align:center\">Pubic louse</p>\n\n<p style=\"text-align:center\">\u00a0</p>\n\n<p><strong>Sarcoptes scabiei (Option C)</strong>\u00a0causes scabies, which classically presents with itchy papules over the <span class=\"customMeta\" data-dictid=\"80f9769a7f169277720291b1f34ef4\">webbed</span> spaces of the fingers. The face and <span class=\"customMeta\" data-dictid=\"038a2a2fd4169277719894dc7db4bb\">scalp</span> are typically spared.</p>",
    "question_images": [
      "https://image.prepladder.com/content/6ZKbHlPQvwTdZm1OL92y1723024921.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/0rQvyESXjpOLMop40wld1723024985.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/nIwIC2pSfrIUaAJwyUbv1728299414.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/tEYDkfO6nbHfVk57Gg8I1730120745.mp3"
  },
  {
    "text": "<p>A 20-year-old female presents with an itchy lesion as shown below. She reports that it started as a small, red, itchy spot, then progressed over the next few days to its current form. She also reveals a recent beach holiday. What is the causative organism?</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"WeisSagung\" data-license=\"CC BY-SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Cutaneous_larva_migrans\" height=\"318\" src=\"https://image.prepladder.com/content/q2L7scOa3L8wSTpcIRbp1723025217.png\" width=\"318\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>",
    "choices": [
      {
        "id": 1,
        "text": "Loa loa"
      },
      {
        "id": 2,
        "text": "Ancylostoma caninus"
      },
      {
        "id": 3,
        "text": "Strongyloides stercoralis"
      },
      {
        "id": 4,
        "text": "Ascaris lumbricoides"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) <span class=\"customMeta\" data-dictid=\"3e321b95591692777181093f6ad844\">Ancylostoma</span> caninum</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The given case scenario describes<strong> <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> <span class=\"customMeta\" data-dictid=\"48bab7934a16927771917c5a2bf7e2\">larva</span> migrans.</strong></li>\n\t<li>This is caused by animal<strong> <span class=\"customMeta\" data-dictid=\"2db7faaac316927771894a9f7f00bc\">hookworm</span> <span class=\"customMeta\" data-dictid=\"c2907c9f0016927771914eedf733dd\">larvae</span> (Ancylostoma braziliensis/ caninum)</strong> and typically occurs due to walking barefoot on contaminated sand or soil.</li>\n\t<li>It classically begins with a pruritic, erythematous <span class=\"customMeta\" data-dictid=\"b3008e4783169277719411dbdb635e\">papule</span> at the site of penetration, followed by <strong>intensely pruritic, serpiginous,</strong> reddish-brown skin tracks, along the path of migration of the larvae. These develop slowly over days<strong> (1-2 cm/day)</strong></li>\n\t<li>The <span class=\"customMeta\" data-dictid=\"c2907c9f0016927771914eedf733dd\">larvae</span> <strong>cannot penetrate beyond the dermis, </strong>so <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> manifestations are uncommon.</li>\n\t<li>Treatment involves<strong> oral ivermectin.</strong></li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Loa <span class=\"customMeta\" data-dictid=\"837e3834141692777191b05b4073bf\">loa</span> (Option A)</strong>\u00a0is the African eye worm. It causes Calabar swellings, painless, <span class=\"customMeta\" data-dictid=\"a6cf2c3dc51692777200ef7fb22f69\">transient</span> swellings over the eyelid.</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"\"Linnet Rodriguez Julia Michelle White Nikisha Q. Richards[...] Natario L Couser\"\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/External-photograph-of-left-periorbital-region-which-demonstrates-a-thin-serpentine_fig1_350989166\" data-tags=\"\" height=\"196\" src=\"https://image.prepladder.com/content/erokDQqwHUClGLQ5oIyu1723025263.png\" width=\"300\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p>\u00a0</p>\n\n<p><strong>Strongyloides stercoralis (Option C)</strong>\u00a0causes<strong> <span class=\"customMeta\" data-dictid=\"48bab7934a16927771917c5a2bf7e2\">larva</span> currens</strong> by its<strong> <span class=\"customMeta\" data-dictid=\"de8b4033c51692777190aaeca3d6bc\">intradermal</span> migration.</strong> While similar to <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> <span class=\"customMeta\" data-dictid=\"48bab7934a16927771917c5a2bf7e2\">larva</span> migrans, it is distinguished by more rapid migration within the skin <strong>(5-15 cm/hour),</strong> intense <span class=\"customMeta\" data-dictid=\"7e814d15c31692777201fe0d9c1a61\">urticaria</span> surrounding the path of migration, and potential <strong>perianal involvement.</strong></p>\n\n<p><br />\n<strong>Ascaris lumbricoides</strong> <strong>(Option D)</strong> causes <strong>ascariasis</strong> with <span class=\"customMeta\" data-dictid=\"c2907c9f0016927771914eedf733dd\">larvae</span> migrating through the <span class=\"customMeta\" data-dictid=\"a813884d6016927771838d2d1f9d1d\">bloodstream</span> to the lungs and intestines,\u00a0causing primarily <span class=\"customMeta\" data-dictid=\"b3a647ce2516927771881427f56c1d\">gastrointestinal</span> and <span class=\"customMeta\" data-dictid=\"cfad80a0f716927771979aae100f95\">respiratory</span> symptoms. Unlike hookworms, <span class=\"customMeta\" data-dictid=\"d4d6dc03c61692777182e9a842faf7\">Ascaris</span> <span class=\"customMeta\" data-dictid=\"c2907c9f0016927771914eedf733dd\">larvae</span> do not migrate within the skin and thus do not cause <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> <span class=\"customMeta\" data-dictid=\"48bab7934a16927771917c5a2bf7e2\">larva</span> migrans.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/q2L7scOa3L8wSTpcIRbp1723025217.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/erokDQqwHUClGLQ5oIyu1723025263.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/Vpfned4CRCztJjm1YvEG1728299520.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/p87ZFLNP6yDfs8fXafAk1730120839.mp3"
  },
  {
    "text": "<p>As shown in the figure, a 10-year-old boy presents with a painless swelling over his left lower eyelid. He reports visiting the Amazon forest on vacation with his family recently. If left untreated, which of the following is not a long-term risk?</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"CDC/Dr. Mae Melvin \" data-license=\"CC BY-SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Chagas_disease\" height=\"206\" src=\"https://image.prepladder.com/content/XUrddxueE5tqZHHFX6SG1723540882.png\" width=\"140\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>",
    "choices": [
      {
        "id": 1,
        "text": "Sleeping sickness"
      },
      {
        "id": 2,
        "text": "Heart failure"
      },
      {
        "id": 3,
        "text": "Megaesophagus"
      },
      {
        "id": 4,
        "text": "Megacolon"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Sleeping sickness</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>American trypanosomiasis:</strong></p>\n\n<p>The given image shows <strong>Romana's sign, </strong>i.e., a swollen <span class=\"customMeta\" data-dictid=\"6e6233ba551692777193c62c40bd5f\">nodule</span> or \u2018<strong>chagoma</strong>\u2019 at the site of infection, most commonly over the eyelids or near the mouth. This is an early sign of <strong>Trypanosoma cruzei </strong>infection, which is <span class=\"customMeta\" data-dictid=\"59c8c1e4b316927771873c98afae15\">endemic</span> to South America and is therefore called <strong>American trypanosomiasis.</strong></p>\n\n<p>Trypanosoma cruzei is transmitted via the bite of the <strong>Reduviid bug</strong>, or <span class=\"customMeta\" data-dictid=\"0a9605b688169277719051a4cfb80a\">kissing bug</span> (named so because the bite is painless).</p>\n\n<p>Early symptoms are non-specific and include fever, lymphadenopathy, and the Romana sign.</p>\n\n<p>If untreated, it can lead to <strong>Chaga\u2019s disease,</strong> the manifestations of which include</p>\n\n<ol>\n\t<li>Dilated <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">cardiomyopathy</span> -<strong> heart failure</strong> <strong>(option B)</strong>, arrhythmias, sudden <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> death.</li>\n\t<li><strong>Megaesophagus and <span class=\"customMeta\" data-dictid=\"944688061e16927771929fa8717176\">megacolon</span> (options C and\u00a0D)</strong> - due to <span class=\"customMeta\" data-dictid=\"bd1c98736616927771820954b0a744\">autonomic</span> nerve destruction.</li>\n</ol>\n\n<p>Diagnosis of <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> disease is by demonstration of T cruzi <span class=\"customMeta\" data-dictid=\"470ce75042169277720044b8dfe80f\">trypomastigote</span> on blood smears.</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"https://picryl.com/media/t-cruzi-trypomastigotes-in-peripheral-blood-smear-0ec016\" data-tags=\"\" height=\"248\" src=\"https://image.prepladder.com/content/oC6BsKyXGZq7HS48KEJN1723025460.png\" width=\"354\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p>Treatment of <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> disease involves <strong>Nifurtimox or Benznidazole.</strong><br />\n<strong>Chaga\u2019s disease is incurable</strong> and requires supportive care as appropriate.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Sleeping sickness: </strong></p>\n\n<ul>\n\t<li>This is caused by <strong>T. brucei (rhodesiense or gambiense).</strong> It is <span class=\"customMeta\" data-dictid=\"59c8c1e4b316927771873c98afae15\">endemic</span> to rural Africa and is transmitted by the<strong> <span class=\"customMeta\" data-dictid=\"5630fccf491692777200d8e54a1b76\">tse</span> tse fly. </strong>It is also known as <strong>African trypanosomiasis.</strong></li>\n\t<li>Early infection is non-specific, with fever, <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> <span class=\"customMeta\" data-dictid=\"344bcb4e391692777191307c1e0074\">lymphadenopathy</span> (<strong>Winterbottom\u2019s sign:</strong> <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">posterior</span> <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> <span class=\"customMeta\" data-dictid=\"d398f22bb71692777201622867bda7\">triangle</span> lymphadenopathy), <strong>Kerandl sign</strong> (delayed pain after a sharp blow or squeeze to soft tissue) and arthralgia, which lasts for varying lengths of time.</li>\n\t<li>Late infection is characterized by <strong>neuropsychiatric manifestations,</strong> with sleep-wake cycle <span class=\"customMeta\" data-dictid=\"4586eccbe71692777186e577e31829\">disturbance</span> prominent.</li>\n</ul>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/XUrddxueE5tqZHHFX6SG1723540882.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/oC6BsKyXGZq7HS48KEJN1723025460.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/uDc0b4c2cZbgy3zSp4Ho1730121073.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/GMPM4OklHyWt50ROzSVx1730707547.mp3"
  },
  {
    "text": "<p>A 30-year-old male soldier who had recently been deployed to Iraq presents with a mildly itchy, raised rash on his neck. He has no other systemic complaints. Examination revealed a painless plaque with ulceration and overlying crusting associated with\u00a0 tender posterior lymphadenopathy. What is the likely causative organism?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Leishmania mexicana"
      },
      {
        "id": 2,
        "text": "Leishmania braziliensis"
      },
      {
        "id": 3,
        "text": "Leishmania major"
      },
      {
        "id": 4,
        "text": "Leishmania donovani"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) <span class=\"customMeta\" data-dictid=\"5dc59b3af1169277719191cbbe6447\">Leishmania</span> major</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>This case describes <strong>Old World <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">Cutaneous</span> <span class=\"customMeta\" data-dictid=\"f60a0a7ad716927771916ed83e3586\">Leishmaniasis</span> (CL)</strong> in a soldier recently deployed to <strong>Iraq</strong>, a region <span class=\"customMeta\" data-dictid=\"59c8c1e4b316927771873c98afae15\">endemic</span> for <em>Leishmania major</em>. The clinical features (painless ulcerated <span class=\"customMeta\" data-dictid=\"af71c1668e169277719542cf8f1364\">plaque</span> with crusting and lymphadenopathy) are classic for <strong>cutaneous leishmaniasis</strong>.</li>\n\t<li>\n\t<p><strong>Leishmaniasis</strong> is a <strong>vector-borne disease</strong> caused by <strong>protozoa</strong> of the <span class=\"customMeta\" data-dictid=\"bb01dd337516927771886ca44e8dc1\">genus</span> <em>Leishmania</em>, transmitted by <strong>female sand flies</strong> (<em>Phlebotomus</em> in the Old World).</p>\n\t</li>\n\t<li>\n\t<p>The clinical spectrum ranges from <strong>cutaneous ulcers</strong> to <strong>systemic multiorgan disease</strong> (visceral leishmaniasis).</p>\n\t</li>\n</ul>\n\n<p><strong>Cutaneous <span class=\"customMeta\" data-dictid=\"f60a0a7ad716927771916ed83e3586\">Leishmaniasis</span> (CL):</strong></p>\n\n<table>\n\t<thead>\n\t\t<tr>\n\t\t\t<th>Type</th>\n\t\t\t<th>Region</th>\n\t\t\t<th>Species</th>\n\t\t\t<th>Clinical Features</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><strong>Old World CL</strong></td>\n\t\t\t<td>Middle East, Africa, Asia</td>\n\t\t\t<td><em>L. major</em>, <em>L. tropica</em></td>\n\t\t\t<td>Painless <strong>papule \u2192 nodule/plaque \u2192 ulcer</strong>, often with <strong>crusting</strong> and <strong>raised volcano-like margins</strong></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><strong>New World CL</strong></td>\n\t\t\t<td>Central and South America</td>\n\t\t\t<td><em>L. mexicana</em>, <em>L. braziliensis</em></td>\n\t\t\t<td>Similar lesions; <em>L. mexicana</em> causes <strong>Chiclero's ulcer</strong> (chronic ulcers on the ear due to multiple bites)</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"abanima,\" data-hash=\"\" data-license=\"CC BY-SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Cutaneous_leishmaniasis4.jpg\" data-tags=\"\" height=\"269\" src=\"https://image.prepladder.com/content/dtpvkBeARlubjo2vtPkH1723541128.png\" width=\"362\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p><strong>New World CL:</strong> The <span class=\"customMeta\" data-dictid=\"7b4370a0b01692777201a5bc0739c2\">ulcer</span> may be covered with thick white-yellow fibrinous material. <strong>\u2018Chiclero\u2019s ulcer\u2019 </strong>- multiple, small, chronic ulcers on the ear, due to multiple <span class=\"customMeta\" data-dictid=\"386587adcc1692777198e088b65318\">sandfly</span> bites.</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"abanima,\" data-hash=\"\" data-license=\"CC BY-SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Cutaneous_leishmaniasis2.jpg\" data-tags=\"\" height=\"289\" src=\"https://image.prepladder.com/content/RjdWlpVMxccHwHSkxnNV1723025795.png\" width=\"375\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p>\u00a0\u00a0</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"\" Edoardo Torres-Guerrero Marco Romano Quintanilla-Cedillo Julieta Ruiz-Esmenjaud Roberto Arenas\"\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/Chicleros-ulcer-with-bleeding-bed-and-periphery-covered-by-fibrin_fig6_317263468\" data-tags=\"\" height=\"254\" src=\"https://image.prepladder.com/content/APZRdcgryzfsKT5CnuyS1723541337.png\" width=\"239\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p><strong>Mucocutaneous <span class=\"customMeta\" data-dictid=\"f60a0a7ad716927771916ed83e3586\">Leishmaniasis</span> (ML):</strong></p>\n\n<ul>\n\t<li>\n\t<p>Caused by <strong>L. braziliensis</strong> <strong>(Option B)</strong>.</p>\n\t</li>\n\t<li>\n\t<p>Involves <strong>mucosal destruction</strong> of the <strong>nasal septum, mouth, and throat</strong>.</p>\n\t</li>\n\t<li>\n\t<p>Features include <strong>nasal congestion, bleeding, pain, and eventual disfigurement</strong>.</p>\n\t</li>\n</ul>\n\n<p>\u00a0</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"\"Manuel Calvopi\u00f1a Rodrigo X Armijos Jorge Diego Marco[...] Yoshihisa Hashiguchi\"\" data-hash=\"\" data-license=\"CC BY 2.0\" data-source=\"https://www.researchgate.net/figure/Mucocutaneous-leishmaniasis-MCL-or-espundia-Active-lesions-in-nasal-mucosal-tissue_fig4_6821584\" data-tags=\"\" height=\"197\" src=\"https://image.prepladder.com/content/2Xkaj19brx1ms8EdTpBT1723541420.png\" width=\"226\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p><strong>Visceral <span class=\"customMeta\" data-dictid=\"f60a0a7ad716927771916ed83e3586\">Leishmaniasis</span> (Kala-azar):</strong></p>\n\n<ul>\n\t<li>\n\t<p>Caused by <strong>Leishmania donovani (Option D).</strong></p>\n\t</li>\n\t<li>\n\t<p>Presents with <strong>fever, weight loss, hepatosplenomegaly, and pancytopenia</strong>.</p>\n\t</li>\n\t<li>\n\t<p>No <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> lesions are typical.</p>\n\t</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/dtpvkBeARlubjo2vtPkH1723541128.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/7wm9WI6o80LxlrAYMiRM1749196052.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/WfhsNLIzIeRfiSv0lkBi1743083266.mp3"
  },
  {
    "text": "<p>A 50-year-old female who recently migrated from Bihar presents for evaluation of a new rash. Her history is significant for low-grade fever and fatigue over the last few months. She reports receiving some treatment at the local government hospital, but cannot recount any more details. Examination reveals hundreds of hypopigmented macules over her back and arms. She also has palpable splenomegaly. What is the likely diagnosis?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Mohammad2018 \" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Post-kala-azar_dermal_leishmaniasis#/media/File:Leshmaniasis_new_photo_to_help_in_diagnosis.jpg\" data-tags=\"\" height=\"210\" src=\"https://image.prepladder.com/content/QNJJ1qhfPrF927JD9zQq1723541937.png\" width=\"122\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Post-kala-azar dermal leishmaniasis"
      },
      {
        "id": 2,
        "text": "Cutaneous leishmaniasis"
      },
      {
        "id": 3,
        "text": "Lepromatous leprosy"
      },
      {
        "id": 4,
        "text": "Pityriasis versicolor"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Post-kala-azar <span class=\"customMeta\" data-dictid=\"532334711316927771865e5309b763\">dermal</span> leishmaniasis</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>This patient likely has <strong>post-kala-azar <span class=\"customMeta\" data-dictid=\"532334711316927771865e5309b763\">dermal</span> leishmaniasis</strong> due to <strong>inadequately treated visceral leishmaniasis</strong> (VL).</li>\n\t<li>VL is transmitted by sandflies and is caused by <strong>L. donovani or L. infantum.</strong></li>\n\t<li>Splenomegaly is characteristically massive.</li>\n\t<li>It is characterized by multiple hypopigmented macules, typically on the trunk. These may progress to papules/ nodules.</li>\n\t<li>Lesions may <strong>resemble those of <span class=\"customMeta\" data-dictid=\"2b635d48ce1692777191e4be9f89d6\">lepromatous</span> leprosy</strong> <strong>(Option C),</strong> but there are <strong>no associated <span class=\"customMeta\" data-dictid=\"a646a25d3616927771989c6e155498\">sensorineural</span> changes.</strong></li>\n\t<li>A <span class=\"customMeta\" data-dictid=\"32b854324a1692777185c6c79fdc99\">definitive</span> diagnosis of VL requires the demonstration of <span class=\"customMeta\" data-dictid=\"5dc59b3af1169277719191cbbe6447\">Leishmania</span> by <span class=\"customMeta\" data-dictid=\"6777533153169277719804fcbbf2d1\">smear</span> or culture, typically using a <span class=\"customMeta\" data-dictid=\"5b9831f3aa169277718395d7361df6\">bone marrow</span> sample. PKDL may be diagnosed via <span class=\"customMeta\" data-dictid=\"fa67319b42169277719498abc93db6\">PCR</span> of <span class=\"customMeta\" data-dictid=\"ebad8eb48c1692777191b5de5d04a1\">macular</span> scrapings.</li>\n\t<li>Treatment of VL involves <strong>liposomal Amphotericin B, </strong>while PKDL may be managed with <strong>Oral\u00a0Miltefosin.</strong></li>\n</ul>\n\n<p><strong>Cutaneous <span class=\"customMeta\" data-dictid=\"f60a0a7ad716927771916ed83e3586\">leishmaniasis</span> (Option B)</strong> is typically characterized by a pink <span class=\"customMeta\" data-dictid=\"b3008e4783169277719411dbdb635e\">papule</span> that ultimately forms an <span class=\"customMeta\" data-dictid=\"b3e55c05121692777190f2cc59fde0\">indurated</span> ulcer. There may be associated <span class=\"customMeta\" data-dictid=\"6b73f3afaa1692777187f2899b6934\">eschar</span> (Old World) or yellow <span class=\"customMeta\" data-dictid=\"18c2380be716927772020c9b2863de\">fibrin</span> coverage (New World).</p>\n\n<p><br />\n<strong>Pityriasis <span class=\"customMeta\" data-dictid=\"d8978d146e169277720159cb0f2631\">versicolor</span> (Option D) </strong>is a <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> fungal infection that may also present with multiple hypopigmented macules. However, it typically lacks <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> complaints, as seen in this patient.</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/QNJJ1qhfPrF927JD9zQq1723541937.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/UToReleZohEX3x97sFnA1730707961.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/JHQPH8qXfbbR7k3SvP8k1730708055.mp3"
  }
];
        let quizName = '35 Parasitic Infestations Of Skin';
        let hierarchy = ["PrepLadder", "qBank", "Dermatology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>