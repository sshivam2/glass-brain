<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pathology St 1 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The most abundant glycoprotein in basement membrane is",
    "choices": [
      {
        "id": 1,
        "text": "Elastin"
      },
      {
        "id": 2,
        "text": "Fibronectin"
      },
      {
        "id": 3,
        "text": "Laminin"
      },
      {
        "id": 4,
        "text": "Integrin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>Laminin </strong><strong>is the most abundant glycoprotein in basement membrane </strong> Connects cells to underlying ECM components such as type IV collagen and heparan sulfate Can also modulate <strong>cell proliferation, differentiation, and motility.</strong></li>\n<li><strong>Adhesive glycoproteins and adhesion receptors </strong>- Involved in cell-to-cell adhesion, linking cells to the ECM, and the interactions between ECM component.</li>\n<li><strong>Adhesive glycoproteins</strong> <strong>- </strong>fibronectin (a major component of the interstitial ECM) and laminin (a major constituent of basement membrane).</li>\n<li><strong>Adhesion receptors</strong>, also known as cell adhesion molecules (CAMs) - <strong>Integrins,</strong> <strong>immunoglobulins, cadherins, and selectins</strong>.</li>\n<li><strong>Fibronectin&nbsp;</strong>- Provide the scaffolding in healing wounds for subsequent ECM deposition, angiogenesis, and reepithelialization.</li>\n<li><strong>Integrins</strong> &nbsp;essential for cells to attach to ECM constituents such as laminin and fibronectin Integrins on the surface of leukocytes are also essential in mediating firm adhesion and transmigration across endothelium at sites of inflammation and platelet aggregation.</li>\n<li><strong>Elastin &nbsp;</strong>The ability of tissues to recoil and recover their shape after physical deformation is conferred by elastin.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Flexner-Wintersteiner rosettes are seen in",
    "choices": [
      {
        "id": 1,
        "text": "Wilms tumour"
      },
      {
        "id": 2,
        "text": "Retinoblastoma"
      },
      {
        "id": 3,
        "text": "Ependymoma"
      },
      {
        "id": 4,
        "text": "Neuroblastoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Flexner-Wintersteiner rosettes </strong>and fleurettes reflecting photoreceptor differentiation are seen in retinoblastomas.</li>\n<li>Rosettes consist of a halo or spoke-wheel arrangement of cells surrounding a central core or hub.</li>\n</ul>\n<table style=\"width: 385.273px;\">\n<tbody>\n<tr style=\"height: 12px;\">\n<td style=\"width: 84px; height: 12px;\"><strong>Rosette type</strong></td>\n<td style=\"width: 149px; height: 12px;\"><strong>Morphology</strong></td>\n<td style=\"width: 141.273px; height: 12px;\"><strong>Tumour</strong></td>\n</tr>\n<tr style=\"height: 38px;\">\n<td style=\"width: 84px; height: 38px;\">Homer-Wright</td>\n<td style=\"width: 149px; height: 38px;\">Central lumen or hub filled with <strong>fiber-like processes</strong></td>\n<td style=\"width: 141.273px; height: 38px;\"><strong>Medulloblastomas, PNET</strong></td>\n</tr>\n<tr style=\"height: 38px;\">\n<td style=\"width: 84px; height: 38px;\">Ependymal</td>\n<td style=\"width: 149px; height: 38px;\"><strong>Empty-appearing lumen</strong> resembling a tubule</td>\n<td style=\"width: 141.273px; height: 38px;\">Most well-differentiated ependymomas</td>\n</tr>\n<tr style=\"height: 78px;\">\n<td style=\"width: 84px; height: 78px;\">Pseudorosette</td>\n<td style=\"width: 149px; height: 78px;\">Spoke-wheel arrangement of cells with tapered cellular processes around a <strong>centrally placed vessel.</strong>\u00a0</td>\n<td style=\"width: 141.273px; height: 78px;\">More sensitive for the diagnosis of ependymomas than true ependymal rosettes</td>\n</tr>\n<tr style=\"height: 51px;\">\n<td style=\"width: 84px; height: 51px;\">Flexer-Wintersteiner</td>\n<td style=\"width: 149px; height: 51px;\">Central lumen contains small <strong>cytoplasmic extensions of the encircling cells</strong></td>\n<td style=\"width: 141.273px; height: 51px;\">Retinoblastomas</td>\n</tr>\n<tr style=\"height: 51.0909px;\">\n<td style=\"width: 84px; height: 51.0909px;\">Pineocytomatous</td>\n<td style=\"width: 149px; height: 51.0909px;\">Similar to the Homer Wright rosette, larger and more irregular in contour</td>\n<td style=\"width: 141.273px; height: 51.0909px;\">Pineocytomas\u00a0</td>\n</tr>\n<tr style=\"height: 51px;\">\n<td style=\"width: 84px; height: 51px;\">Neurocytic</td>\n<td style=\"width: 149px; height: 51px;\">Similar to the Homer Wright rosette, larger and more irregular in contour</td>\n<td style=\"width: 141.273px; height: 51px;\">Central neurocytomas</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bd0da5c3d455476da49ffe227cdc7994x366x512.PNG"
    ]
  },
  {
    "text": "A patient on long term hemodialysis due to renal failure is likely to develop which type of amyloidosis?",
    "choices": [
      {
        "id": 1,
        "text": "Amyloid light chain (AL)"
      },
      {
        "id": 2,
        "text": "Amyloid A (AA)"
      },
      {
        "id": 3,
        "text": "Amyloid \u03b22 microglobulin (A\u03b22M)"
      },
      {
        "id": 4,
        "text": "Amyloid transthyretin (ATTR)"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Patients on <strong>long-term hemodialysis for renal failure</strong> can develop <strong>amyloidosis</strong> as a result of the <strong>deposition of&nbsp;</strong><strong>&beta;2-microglobulin.</strong></p>\n<p><strong>&beta;<sub>2</sub>-microglobulin</strong> is a component of the <strong>MHC class I molecule</strong> and a normal serum protein. In the past, it was retained in the circulation of patients with chronic kidney disease because it <strong>could not be filtered through dialysis membranes</strong>. In these patients, it would get <strong>deposited in the joints</strong>, muscles, <strong>tendons</strong>, and <strong>ligaments</strong>. One of the complications which can occur as a result is <strong>carpal tunnel syndrome</strong>. However, with the advent of new dialysis filters, this complication has become uncommon now.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old man died in a road traffic accident. On autopsy, the following appearance of the kidney was noted. Which of the following is not associated with this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Cysts in liver, pancreas, and spleen"
      },
      {
        "id": 2,
        "text": "Berry aneurysms"
      },
      {
        "id": 3,
        "text": "Mitral valve prolapse"
      },
      {
        "id": 4,
        "text": "Hepatic fibrosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>gross image</strong> suggests that the patient had&nbsp;autosomal-dominant polycystic kidney disease (<strong>ADPKD</strong>). This condition is not associated with hepatic fibrosis.<strong>&nbsp;</strong>However, patients with autosomal recessive (childhood) polycystic kidney disease (<strong>ARPKD</strong>) have<strong> congenital hepatic fibrosis</strong>.</p>\n<p>ADPKD is associated with<strong>&nbsp;</strong>mutations in <em><strong>PKD1</strong>,</em> encoding polycystin 1, and <em><strong>PKD2</strong>,</em> encoding polycystin 2.&nbsp;The multiple expanding <strong>cysts </strong>of both kidneys&nbsp;ultimately <strong>destroy</strong> the <strong>renal parenchyma</strong> and cause renal failure.&nbsp;Cysts arise from the tubules throughout the nephron and, therefore, have variable lining epithelia.</p>\n<div id=\"1642075042.001800\" class=\"c-virtual_list__item\" tabindex=\"0\" role=\"listitem\" data-qa=\"virtual-list-item\">\n<div class=\"c-message_kit__background p-message_pane_message__message c-message_kit__message\" role=\"presentation\" data-qa=\"message_container\" data-qa-unprocessed=\"false\" data-qa-placeholder=\"false\">\n<div class=\"c-message_kit__hover\" role=\"document\" aria-roledescription=\"message\" data-qa-hover=\"true\">\n<div class=\"c-message_kit__actions c-message_kit__actions--default\">\n<div class=\"c-message_kit__gutter\">\n<div class=\"c-message_kit__gutter__right\" role=\"presentation\" data-qa=\"message_content\">\n<div class=\"c-message_kit__blocks c-message_kit__blocks--rich_text\">\n<div class=\"c-message__message_blocks c-message__message_blocks--rich_text\">\n<div class=\"p-block_kit_renderer\" data-qa=\"block-kit-renderer\">\n<div class=\"p-block_kit_renderer__block_wrapper p-block_kit_renderer__block_wrapper--first\">\n<div class=\"p-rich_text_block\" dir=\"auto\">\n<div class=\"p-rich_text_section\">The common&nbsp;<strong data-stringify-type=\"bold\">extrarenal manifestations</strong>&nbsp;of ADPKD include:&nbsp;</div>\n<ul class=\"p-rich_text_list p-rich_text_list__bullet\" data-stringify-type=\"unordered-list\" data-indent=\"0\" data-border=\"0\">\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\"><strong data-stringify-type=\"bold\">Hepatic&nbsp;cysts</strong>&nbsp;-&nbsp;<strong data-stringify-type=\"bold\">most common&nbsp;</strong></li>\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\">Seminal vesicle cysts - can result in infertility</li>\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\">Arachnoid membrane cysts - usually asymptomatic, may increase the risk of subdural hematoma</li>\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\">Pancreatic cysts&nbsp;</li>\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\">Splenic cysts</li>\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\">Intracranial berry aneurysms</li>\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\">Subarachnoid hemorrhages</li>\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\">Mitral valve prolapse&nbsp;</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div id=\"1642075074.002000\" class=\"c-virtual_list__item\" tabindex=\"-1\" role=\"listitem\" data-qa=\"virtual-list-item\">\n<div class=\"c-message_kit__background c-message_kit__background--hovered p-message_pane_message__message c-message_kit__message\" role=\"presentation\" data-qa=\"message_container\" data-qa-unprocessed=\"false\" data-qa-placeholder=\"false\">\n<div class=\"c-message_kit__hover c-message_kit__hover--hovered\" role=\"document\" aria-roledescription=\"message\" data-qa-hover=\"true\">\n<div class=\"c-message_kit__actions c-message_kit__actions--above\">\n<div class=\"c-message_kit__gutter\">\n<div class=\"c-message_kit__gutter__right\" role=\"presentation\" data-qa=\"message_content\">\n<div class=\"c-message_kit__blocks c-message_kit__blocks--rich_text\">\n<div class=\"c-message__message_blocks c-message__message_blocks--rich_text\">\n<div class=\"p-block_kit_renderer\" data-qa=\"block-kit-renderer\">\n<div class=\"p-block_kit_renderer__block_wrapper p-block_kit_renderer__block_wrapper--first\">\n<div class=\"p-rich_text_block\" dir=\"auto\">\n<div class=\"p-rich_text_section\">There are very few case reports with lung cysts in ADPKD patients, but the association between ADPKD and lung cysts has not been proved. However,&nbsp;there is a three-fold increase in the incidence of <strong>bronchiectasis</strong> in ADPKD patients.&nbsp;</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/660d6ab793ed4c92a24e4436e45b73a0.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Inherited deficiency of GpIIb-IIIa results in",
    "choices": [
      {
        "id": 1,
        "text": "Bernard Soulier syndrome"
      },
      {
        "id": 2,
        "text": "Glanzman thrombasthenia"
      },
      {
        "id": 3,
        "text": "Haemophilia A"
      },
      {
        "id": 4,
        "text": "Von Willebrand disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Inherited deficiency of GpIIb-IIIa results in Glanzman thrombasthenia</p>\n<ul>\n<li><strong>Autosomal recessive platelet surface receptor disorder of GPIIb/IIIa (ITG &alpha;IIb&beta;3), </strong>either qualitative or quantitative - Faulty platelet aggregation and diminished clot retraction.</li>\n<li>Acquired GT is seen with <strong>platelet transfusions, immune thrombocytopenic purpura, non-Hodgkin&rsquo;s lymphoma, multiple myeloma, myelodysplastic syndrome, hairy cell leukemia, and acute lymphoblastic leukemia</strong>.</li>\n<li><strong>Normal platelet morphology and normal platelet count, prolonged bleeding time, absent or decreased clot retraction, and normal platelet aggregation in the presence of ristocetin.</strong></li>\n<li>Platelet aggregation is absent in the presence of epinephrine, collagen, arachidonic acid, ADP.</li>\n<li>Under flow cytometric analysis, CD41 and CD61 levels are markedly decreased or absent</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20 year old previously healthy athlete suffers a sudden cardiac arrest while playing sport. On autopsy, there is massive myocardial hypertrophy. Microscopy shows myofiber disarray and interstitial fibrosis. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Myocarditis"
      },
      {
        "id": 2,
        "text": "Amyloidosis"
      },
      {
        "id": 3,
        "text": "Hypertrophic cardiomyopathy"
      },
      {
        "id": 4,
        "text": "Dilated cardiomyopathy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Hypertrophic cardiomyopathy is an autosomal dominant disorder characterized by <strong>myocardial hypertrophy, poorly compliant left ventricular myocardium leading to abnormal diastolic filling, and intermittent ventricular outflow obstruction.</strong></li>\n<li>Leading cause of left ventricular hypertrophy unexplained by other clinical or pathologic causes.</li>\n<li><strong>Primarily diastolic dysfunction</strong></li>\n<li>Systolic function &nbsp;usually preserved.&nbsp;</li>\n<li><strong>Massive myocardial hypertrophy, usually without ventricular dilation </strong></li>\n<li><strong>Septal hypertrophy</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following tumour suppressor genes is an inhibitor of G1/S transition during cell cycle progression?",
    "choices": [
      {
        "id": 1,
        "text": "RB"
      },
      {
        "id": 2,
        "text": "BRCA1"
      },
      {
        "id": 3,
        "text": "WT1"
      },
      {
        "id": 4,
        "text": "APC"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>RB, called the Governor of Proliferation is a key negative regulator of the G1 /S cell cycle transition </strong>and is directly or indirectly inactivated in most human cancers.</p>\n<ul>\n<li>The <strong>normal RB gene </strong>is present on <strong>chromosome 13q14</strong>.</li>\n<li>RB - &nbsp;active hypophosphorylated state in quiescent cells and an inactive hyperphosphorylated state in cells passing through the G1/S cell cycle transition.</li>\n<li>RB - &nbsp;antiproliferative effects by binding and inhibiting E2F transcription factors that regulate genes required for cells to pass through the G1-S phase cell cycle checkpoint.</li>\n<li>The antiproliferative effect of RB is abrogated in cancers through a variety of mechanisms, including:\n<ul>\n<li>Loss-of-function mutations affecting RB</li>\n<li>Gene amplifications of CDK4 and cyclin D genes</li>\n<li>Loss of cyclin-dependent kinase inhibitors (p16/INK4a)</li>\n<li>Viral oncoproteins that bind and inhibit RB (E7 protein of HPV)</li>\n</ul>\n</li>\n</ul>\n<p><strong>Loss-of-function mutations of the RB gene are associated with retinoblastoma and osteosarcoma</strong>, subset of glioblastomas, small-cell carcinomas of lung, breast cancers, and bladder carcinomas.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old man underwent elective cholecystectomy. The cut specimen is seen below. The calculi observed is not associated with which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Cystic fibrosis with pancreatic insufficiency"
      },
      {
        "id": 2,
        "text": "Ileal resection and bypass"
      },
      {
        "id": 3,
        "text": "Biliary infection with E.coli"
      },
      {
        "id": 4,
        "text": "Rapid weight reduction"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image shows <strong>pigmented gall stones</strong> and they are <strong>not associated</strong> with <strong>rapid weight reduction.</strong></p>\n<div class=\"page\" title=\"Page 876\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Pigment gallstones</strong>\u00a0represent complex mixtures of <strong>insoluble and inorganic calcium salts</strong> with <strong>unconjugated bilirubin</strong>. Disorders with elevated levels of unconjugated bilirubin increase the risk of developing pigmented gallstones. The various conditions associated with increase risk of pigmented gallstones are:</p>\n<ul>\n<li>Demography: Asians more than Westerners, rural more than urban</li>\n<li>Chronic hemolytic syndromes</li>\n<li><strong>Biliary infection with\u00a0</strong><em><em><strong>E.coli</strong>,\u00a0</em>Ascaris lumbricoides,</em>\u00a0and C.<em> sinensis</em></li>\n<li>Ileal disease</li>\n<li><strong>Ileal resection or bypass</strong></li>\n<li><strong>Cystic fibrosis with pancreatic insufficiency</strong></li>\n</ul>\n<p><strong>Cholesterol gallstones\u00a0</strong>are <strong>non-pigmented</strong>. Cholesterol is rendered soluble by bile by forming micelles with bile salts and lecithins. When cholesterol concentrations increase and surpass the solubilizing capacity of bile(supersaturation), it precipitates into <strong>solid\u00a0cholesterol monohydrate crystals</strong>. The four mechanisms of cholesterol gallstone formation are:</p>\n<ul>\n<li>Supersaturation of bile with cholesterol</li>\n<li>Hypomobillity of the gallbladder</li>\n<li>Accelerated cholesterol crystal nucleation</li>\n<li>Hyper- secretion of mucus in the gallbladder</li>\n</ul>\n<p>The conditions associated with an increased risk of development of cholesterol gallstones are:</p>\n<ul>\n<li>Demography: Northern Europeans, North and South Americans, Native Americans, Mexican Americans</li>\n<li>Advancing age</li>\n<li>Female gender and sex hormones</li>\n<li>Oral contraceptives</li>\n<li>Pregnancy</li>\n<li>Obesity and metabolic syndrome</li>\n<li><strong>Rapid weight reduction</strong></li>\n<li>Gallbladder stasis</li>\n<li>Inborndisorders of bile acid metabolism</li>\n<li>Hyperlipidemia syndromes</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c38e25c0c7294c3585246eadd787da3c.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The images below display the gross and microscopic features of a brain tumour in a child. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Medulloblastoma"
      },
      {
        "id": 2,
        "text": "Neuroblastoma"
      },
      {
        "id": 3,
        "text": "Ganglioglioma"
      },
      {
        "id": 4,
        "text": "Pilocytic astrocytoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Gross features (<strong>cystic tumor</strong>) and microscopy (<strong>microcystic and fibrillary areas</strong>) suggest <strong>pilocytic astrocytoma</strong>.</p>\n<p><strong>Pilocytic astrocytomas </strong>typically occur in children and young adults. It is located in the <strong>cerebellum, </strong>floor, and walls of the third<strong> ventricle, </strong>the optic nerves, and cerebral hemispheres. It is often <strong>cystic. </strong>Tumors are often biphasic, with both loose <strong>microcystic </strong>and <strong>fibrillary areas. </strong>Bipolar cells with long, thin \u201chairlike\u201d processes that are <strong>GFAP-positive</strong> and form dense fibrillary meshwork are seen.</p>\n<p><strong>Rosenthal fibers </strong>and <strong>eosinophilic granular bodies </strong>are characteristic findings. Necrosis and brisk mitotic activity are uncommon.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/005ccbd6cc7849a88f37b29361bddb9d.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "All the following familial tumour syndromes are associated with medulloblastoma except",
    "choices": [
      {
        "id": 1,
        "text": "Gorlin syndrome"
      },
      {
        "id": 2,
        "text": "Cowden syndrome"
      },
      {
        "id": 3,
        "text": "Li-Fraumeni syndrome"
      },
      {
        "id": 4,
        "text": "Turcot syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Cowden syndrome is associated with <strong>dysplastic gangliogliocytoma of the cerebellum</strong> caused by mutations in PTEN resulting in PI3K/AKT signaling pathway activity.</p>\n<ul>\n<li><strong>Li-Fraumeni syndrome</strong>: Medulloblastomas, caused by mutations in TP53</li>\n<li><strong>Turcot syndrome</strong>: Medulloblastoma or glioblastoma, caused by mutations in APC or mismatch repair genes</li>\n<li><strong>Gorlin syndrome</strong>: Medulloblastoma, caused by mutations in the PTCH gene resulting in up-regulation of sonic hedgehog signaling pathways.</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40 year old female presents with flaccid bullae over mucosa and skin and oral ulcers. Histopathology shows a suprabasal acatholytic blister with superficial dermal infiltration by lymphocytes, macrophages, and eosinophils. Direct immunofluresence for immunoglobulin IgG  is as seen below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pemphigus vulgaris"
      },
      {
        "id": 2,
        "text": "Bullous pemphigoid"
      },
      {
        "id": 3,
        "text": "Dermatitis herpetiformis"
      },
      {
        "id": 4,
        "text": "Epidermolysis bullosa"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Immunoflourescence shows deposition of immunoglobulin along the plasma membranes of keratinocytes in a reticular or fish net-like pattern accompanied by suprabasalar loss of cell-to-cell adhesion (acantholysis). Flaccid bullae, oral ulcers,&nbsp; suprabasal acantholytic blisters and fish net appearance on immunoflouresence are characteristic of pemphigus vulgaris.</p>\n<p>Pemphigus is a blistering disorder caused by autoantibodies that result in the dissolution of intercellular attachments within the epidermis and mucosal epithelium<strong>.</strong></p>\n<p>The majority of individuals who develop pemphigus are in the fourth to sixth decades.</p>\n<p>Variants:</p>\n<ol>\n<li>pemphigus vulgaris</li>\n<li>pemphigus vegetans</li>\n<li>pemphigus foliaceus - <strong>IgG&nbsp; is more superficial in pemphigus foliaceus</strong></li>\n<li>pemphigus erythematosus</li>\n<li>paraneoplastic pemphigus - in association with various malignancies, most commonly <strong>non-Hodgkin lymphoma</strong></li>\n</ol>\n<ul>\n<li><strong>Pemphigus vulgaris</strong>&nbsp;</li>\n<li>MC type of pemphigus</li>\n<li>Involves the mucosa and skin</li>\n<li><strong>Oral ulcers</strong> that may persist for months before skin involvement appears.</li>\n<li><strong>Superficial flaccid vesicles and bullae that rupture easily</strong></li>\n<li>Pemphigus vulgaris - <strong>Autoantibodies against Dsg1 and Dsg3</strong> - Blisters in the deep suprabasal epidermis</li>\n<li><strong>Pemphigus foliaceus - Autooantibodies are against Dsg1 alone, leading to superficial, subcorneal blisters.</strong></li>\n<li>Direct immunofluorescence<strong> - Net-like pattern of intercellular IgG deposits</strong></li>\n<li>A <strong>suprabasal acantholytic blister </strong>is characteristic of pemphigus vulgaris</li>\n<li><strong>The single layer of intact basal cells - &nbsp;row of tombstones appearance</strong></li>\n<li><strong>Bullous pemphigoid autoantibodies bind BPAG2, a component of the hemidesmosomes, -&agrave; blister formation at the level of the lamina lucida of the basement membrane.</strong></li>\n<li>Dermatitis herpetiformis is caused by IgA autoantibodies to the fibrils that anchor hemidesmosomes to the dermis.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2098f8ec27c04f988b1f8cd60cf6091e.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a pyrogenic cytokine?",
    "choices": [
      {
        "id": 1,
        "text": "IL - 1"
      },
      {
        "id": 2,
        "text": "TNF"
      },
      {
        "id": 3,
        "text": "IFN \u2013 \u03b1"
      },
      {
        "id": 4,
        "text": "IL-18"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>IL-18 is not a pyrogenic cytokine.</p>\n<p>Substances that <strong>induce fever</strong> are called pyrogens<em>.</em></p>\n<p><strong>Exogenous </strong>pyrogens&nbsp;<strong>- Lipopolysaccharides of bacterial walls</strong></p>\n<p><strong>Endogenous </strong>pyrogens&nbsp;<strong>- IL-1, TNF, and prostaglandins</strong></p>\n<p>In the hypothalamus, the prostaglandins, especially PGE2, stimulate the production of neurotransmitters that reset the temperature set point at a higher level.</p>\n<p>INF&ndash;&alpha; (early cytokine) has role fighting off viral infections.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 9-year-old boy is being evaluated for deafness and progressive mental decline. Physical examination reveals a child with short stature, coarse facial features,large tongue and cloudy cornea. Laboratory examination reveals increased urinary levels of heparan sulfate and dermatan sulfate. Metachromatic granules (Alder-Reilly bodies) are found in leukocytes from a bone marrow biopsy. What is the correct diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hunter\u2019s disease"
      },
      {
        "id": 2,
        "text": "Hurler\u2019s disease"
      },
      {
        "id": 3,
        "text": "I cell disease"
      },
      {
        "id": 4,
        "text": "Wolman\u2019s disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The most likely diagnosis is Hurler&rsquo;s disease characterised by deficiency of &alpha;-L-Iduronidase.</p>\n<p>Phenotypical features of Hurler's syndrome and Hunter's syndrome are quite similar, however <strong>Hunter syndrome do not show corneal clouding.</strong></p>\n<p>Features of Hurler's disease:&nbsp;</p>\n<ul>\n<li><strong>Mental retardation</strong></li>\n<li><strong>Coarse facial&nbsp;</strong><strong>features</strong></li>\n<li>Hepatosplenomegaly</li>\n<li><strong>Cloudy cornea</strong></li>\n<li>GAG's affected : Heparan sulfate and dermatan sulphate&nbsp;</li>\n</ul>\n<p>MPS</p>\n<ul>\n<li>The MPSs are a group of closely related syndromes that result from genetically determined deficiencies of enzymes involved in the degradation of mucopolysaccharides (glycosaminoglycans).</li>\n<li>All the MPSs except one are inherited as autosomal recessive traits; the exception, <strong>Hunter syndrome, is an X-linked recessive trait.</strong></li>\n<li>Mucopolysaccharides are abundant in the ground substance of connective tissue.</li>\n<li>The glycosaminoglycans that accumulate in MPSs are <strong>dermatan sulfate, heparan sulfate, keratan sulfate, and chondroitin sulphate.</strong></li>\n<li>In the absence of enzymes involved in the degradation of these molecules - <strong>&nbsp;</strong>Accumulation of partially degraded GAGs within lysosomes in multiple organs, including the liver, spleen, heart, and blood vessels.</li>\n<li>The best described are <strong>Hurler syndrome(</strong>deficiency of &alpha;-L-Iduronidase) and <strong>Hunter syndrome</strong>(L-Iduronosulfate sulfatase)</li>\n<li>Accumulations of GAGs within leukocytes produce <strong>Alder-Reilly bodies</strong>, while accumulations within neurons can produce <strong>zebra bodies</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50 year old male presents with fluctuating muscular weakness that worsens with exertion and often over the course of the day, diplopia and ptosis. The patient is also found to have an anterior mediastinal mass. What is the most likely tumour?",
    "choices": [
      {
        "id": 1,
        "text": "Lymphoma"
      },
      {
        "id": 2,
        "text": "Teratoma"
      },
      {
        "id": 3,
        "text": "Thymoma"
      },
      {
        "id": 4,
        "text": "Schwannoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient probably has myasthenia gravis. Approximately 15-20% of patients with myasthenia gravis have a thymoma, a tumor of thymic epithelial cells.&nbsp;<strong>Myasthenia gravis </strong>frequently involves ocular muscles, and is marked by fluctuating weakness that worsens with exertion.</p>\n<ul>\n<li>Myasthenia gravis is an autoimmune disease that is usually associated with <strong>autoantibodies directed against acetylcholine receptors</strong><strong>.</strong></li>\n<li>Approximately 20% of patients with myasthenia gravis have a thymoma, a tumor of thymic epithelial cells.</li>\n<li>An additional 60% of patients have thymic hyperplasia marked by the appearance of B-cell follicles in the thymus.</li>\n<li>Thymoma - Tumors usually occur in adults older than 40 years of age.</li>\n<li>Most arise in the anterior superior mediastinum.</li>\n<li>WHO classification &ndash; &nbsp;A , AB, B1, B2, B3, C</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All are signs of reversible cell injury except",
    "choices": [
      {
        "id": 1,
        "text": "Blebbing and blunting of plasma membrane"
      },
      {
        "id": 2,
        "text": "Cellular swelling"
      },
      {
        "id": 3,
        "text": "Dilation of the ER"
      },
      {
        "id": 4,
        "text": "Karyolysis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In irreversible cell injury or cell death, the basophilia of the nuclear chromatin may fade <strong>called karyolysis,</strong> a change that presumably reflects loss of DNA because of enzymatic degradation by endonucleases.</p>\n<p><strong>CELL INJURY</strong></p>\n<ul>\n<li>Within limits, a cell can repair derangements and, if the injurious stimulus abates, will return to normalcy. &nbsp;This is called reversible cell injury.</li>\n<li>Persistent or excessive injury, however, causes cells to pass the rather nebulous &ldquo;point of no return&rdquo; into irreversible injury and cell death.</li>\n</ul>\n<p>The ultrastructural changes of reversible cell injury include:</p>\n<ul>\n<li><strong>Plasma membrane alterations, </strong>such as blebbing, blunting, and loss of microvilli</li>\n<li><strong>Mitochondria - </strong>swelling and the appearance of small amorphous densities</li>\n<li><strong>Dilation </strong>of the <strong>ER, </strong>with detachment of polysomes</li>\n<li>Intracytoplasmic myelin figures</li>\n<li><strong>Nuclear alterations - </strong>&nbsp;disaggregation of granular and fibrillar elements</li>\n</ul>\n<p>Irreversible cell injury</p>\n<ul>\n<li><strong>Increased eosinophilia </strong>, glassy homogeneous appearance</li>\n<li>Whorled phospholipid masses called <strong>myelin figures </strong>derived from damaged cell membranes</li>\n<li>Discontinuities in plasma and organelle membranes</li>\n<li>Marked dilation of mitochondria with the appearance of large amorphous densities</li>\n<li>Intracytoplsmic amorphous debris, and aggregates of fluffy material probably representing denatured protein.</li>\n<li><strong>Nuclear changes </strong>- <strong>karyolysis</strong>, <strong>pyknosis</strong> and <strong>karyorrhexis</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A transplant recipient with pneumonitis progresses to full-blown acute respiratory distress syndrome. Lung biopsy reveals an interstitial mononuclear infiltrate with foci of necrosis accompanied by the typical enlarged cells with inclusions as shown below. Most likely organism is",
    "choices": [
      {
        "id": 1,
        "text": "HSV"
      },
      {
        "id": 2,
        "text": "CMV"
      },
      {
        "id": 3,
        "text": "Adenovirus"
      },
      {
        "id": 4,
        "text": "JC virus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Lung biopsy shows congestion and distinct nuclear and ill-defined cytoplasmic Inclusions of CMV.</p>\n<p><strong>Immunocompromised individuals (e.g., transplant recipients, HIV infected individuals) are susceptible to severe CMV infection.</strong></p>\n<ul>\n<li>Recipients of solid-organ transplants (heart, liver, kidney) contract CMV from the donor organ.</li>\n<li>Life-threatening, disseminated CMV infections in immunosuppressed people primarily affect the <strong>lungs (pneumonitis) and gastrointestinal tract (colitis).</strong></li>\n<li>In the pulmonary infection an <strong>interstitial mononuclear infiltrate with foci of necrosis develops, accompanied by the typical enlarged cells with inclusions</strong>.</li>\n<li>The pneumonitis can progress to full-blown acute respiratory distress syndrome.</li>\n<li>Diagnosis of CMV infections is made by demonstration of characteristic&nbsp; morphologic alterations in tissue sections, viral culture, rising antiviral antibody titer, detection of CMV antigens.</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a1ba7b9cd70f4351bd8de78284f424a2.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "All of the following statements about hairy cell leukemia are true except",
    "choices": [
      {
        "id": 1,
        "text": "Most common T cell lymphoid neoplasm"
      },
      {
        "id": 2,
        "text": "Shows activating point mutations in the serine/threonine kinase BRAF"
      },
      {
        "id": 3,
        "text": "Positive for annexin A1"
      },
      {
        "id": 4,
        "text": "Massive splenomegaly"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Hairy cell leukemia is a rare but distinctive <strong>B-cell neoplasm</strong></p>\n<ul>\n<li>Hairy cell leukemias - &nbsp;90% of cases with activating point <strong>mutations in the serine/threonine kinase BRAF</strong>.</li>\n<li>Massive splenomegaly and pancytopenia.</li>\n<li>Leukemic cells have fine hairlike projections that are best recognized under the phase-contrast microscope</li>\n<li><strong>Dry tap on aspirate</strong></li>\n<li>Express the pan-B-cell markers <strong>CD19 , CD11c, CD25, CD103, and annexin A1</strong></li>\n<li>Increased incidence of <strong>atypical mycobacterial infections</strong>, possibly related to frequent unexplained monocytopenia.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Ovarian tumors containing nests of neoplastic epithelial cells resembling urothelium surrounded by abundant dense, fibrous stroma are called:",
    "choices": [
      {
        "id": 1,
        "text": "Brenner tumor"
      },
      {
        "id": 2,
        "text": "Krukenberg tumor"
      },
      {
        "id": 3,
        "text": "Sertoli cell tumor"
      },
      {
        "id": 4,
        "text": "Hilus cell tumor"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Ovarian tumors</strong> containing nests of neoplastic epithelial cells resembling<strong> urothelium</strong> surrounded by abundant dense, fibrous stroma are\u00a0<strong>Brenner </strong>tumors or\u00a0transitional cell tumors.</p>\n<p><strong>Transitional cell tumors </strong>are a rare type of ovarian epithelial tumor. They contain neoplastic epithelial cells resembling <strong>urothelium</strong> and are usually<strong> benign</strong>. They are often detected incidentally and even when large they do not produce any symptoms.</p>\n<p>Microscopy features include fibrous stroma, with sharply demarcated <strong>nests of urothelial cells</strong>, often with mucinous glands in their center, called <strong>Walthard cell rests</strong>, as seen in the image below:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/27d293f0b1c54140a8099c8b3f694384x1280x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5f0b392fad86455fbcb99b24a55b0973x800x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dbcffb3d6905414d93ff73a276a30506x510x409.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0f5319c981314337b6820d454efbb6bbx1280x1065.JPEG"
    ]
  },
  {
    "text": "A 67-year-old male patient is found on rectal examination to have a hard, irregular nodule within his prostate. A biopsy of this lesion reveals the presence of crowded small glands lined by a single layer of cells with enlarged, prominent nucleoli. Immunohistochemistry shows the absence of the outer basal cell layer. From what portion of the prostate did this lesion most likely originate?",
    "choices": [
      {
        "id": 1,
        "text": "Anterior zone"
      },
      {
        "id": 2,
        "text": "Central zone"
      },
      {
        "id": 3,
        "text": "Peripheral zone"
      },
      {
        "id": 4,
        "text": "Transition zone"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given clinical scenario, palpation of hard, irregular nodules within the prostate with immunohistochemistry revealing the absence of an outer basal layer is suggestive of <strong>c</strong><strong>arcinoma prostate</strong> and most prostatic carcinomas arise from <strong>the peripheral zone.</strong></p>\n<p><strong>Carcinoma</strong> of the <strong>prostate</strong> is the most common form of cancer affecting men. It arises in the <strong>peripheral zone</strong> of the gland, classically in a <strong>posterior location.</strong>&nbsp;</p>\n<p>The growth and survival of prostate cancer cells depend on <strong>androgens,</strong> which bind to the androgen receptor (AR) and induce the expression of pro-growth and pro-survival genes. Germline mutations of the tumor suppressor <strong>BRCA2 </strong>increase the risk of prostate cancer. Other acquired mutations include <strong>TPRSS2-ETS fusion genes. </strong><strong>Prostatic Intraepithelial Neoplasia(PIN)</strong> has been described as the <strong>precursor lesion</strong> of carcinoma prostate.</p>\n<p><strong>On palpation,</strong> it is<strong> </strong><strong>gritty, and firm</strong> in consistency. <strong>Histologically,</strong> most lesions are adenocarcinomas that shows small crowded glands lined by a&nbsp;<strong>single layer</strong> of neoplastic cells with mild to moderate degree of pleomorphism. The outer basal cell layer is absent. Immunohistochemically, <strong>basal cell markers are absent</strong> and &alpha;-methyl acyl-coenzyme A-racemase (<strong>AMACR) positive.</strong></p>\n<p>Grading of prostate cancer by the <strong>modified Gleason system</strong> correlates with pathologic stage and prognosis.</p>\n<div class=\"page\" title=\"Page 983\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<table style=\"border-collapse: collapse; width: 62.8729%; height: 309px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 50.0005%;\">\n<p><strong>Grade Group 1 </strong>(&le;6)</p>\n</td>\n<td style=\"width: 50.0005%;\">Only individual discrete <strong>well-formed</strong> glands</td>\n</tr>\n<tr>\n<td style=\"width: 50.0005%;\">\n<p><strong>Grade Group 2 </strong>(3 + 4)</p>\n</td>\n<td style=\"width: 50.0005%;\">\n<p><strong>Predominantly well-formed</strong> glands with a <strong>lesser</strong> component of <strong>poorly formed,</strong> fused, or cribriform glands</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 50.0005%;\">\n<p><strong>Grade Group 3</strong> (4 + 3)</p>\n</td>\n<td style=\"width: 50.0005%;\"><strong>Predominantly poorly formed/fused/cribriform</strong> glands with a <strong>lesser</strong> component of <strong>well-formed</strong> glands</td>\n</tr>\n<tr>\n<td style=\"width: 50.0005%;\">\n<p><strong>Grade Group 4 </strong>(4+4/3+5/5+3)</p>\n</td>\n<td style=\"width: 50.0005%;\">\n<p><strong>Only poorly formed/fused/cribriform</strong> glands or predominantly mix of well-formed glands and lack of glands</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 50.0005%;\">\n<p><strong>Grade Group 5 </strong>(4+5/5+4/5+5)</p>\n</td>\n<td style=\"width: 50.0005%;\"><strong>Lack</strong> of <strong>gland formation</strong> (or with necrosis) with or without poorly formed/fused/cribriform glands</td>\n</tr>\n</tbody>\n</table>\n<p>The image below shows histopathology of prostatic carcinoma</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/db17f3b513dc4deb9382e1d3a1ea42f4x546x410.JPEG"
    ]
  },
  {
    "text": "Which of the following histologic findings would be most suggestive of Buerger\u2019s disease in a patient?",
    "choices": [
      {
        "id": 1,
        "text": "Mononuclear infiltrates with perivascular cuffing of the vasavasorum"
      },
      {
        "id": 2,
        "text": "Fragmentation of neutrophils"
      },
      {
        "id": 3,
        "text": "Thrombosis with microabscesses"
      },
      {
        "id": 4,
        "text": "Fibrinoid necrosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Luminal thrombosis</strong> containing <strong>small microabscesses </strong>composed of neutrophils is seen in thromboangiitis obliterans or<strong> Buerger disease</strong>.</p>\n<p>Option A: <strong>Adventitial mononuclear infiltrates </strong>with <strong>perivascular cuffing</strong> of the vasa vasorum has been described in <strong>Takayasu arteritis.</strong></p>\n<p>Option B: Fragmented neutrophils undergoing apoptosis infiltrating blood vessels termed <strong>leukocytoclastic vasculitis </strong>are seen in <strong>small vessel vasculitis.</strong></p>\n<p>Option D:&nbsp;<strong>Fibrinoid necrosis</strong>&nbsp;is seen in immune reactions involving blood vessels seen in <strong>immunologically mediated vasculitis syndromes.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Verocay Bodies are seen in",
    "choices": [
      {
        "id": 1,
        "text": "Schwannoma"
      },
      {
        "id": 2,
        "text": "Fibrous histiocytoma"
      },
      {
        "id": 3,
        "text": "Leiomyoma"
      },
      {
        "id": 4,
        "text": "Myxoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Verocay bodies are classically described </strong><strong>in schwannomas.</strong></p>\n<p></p>\n<table style=\"width: 397.273px;\">\n<tbody>\n<tr>\n<td style=\"width: 120px;\"><strong>Tumour</strong></td>\n<td style=\"width: 268.273px;\"><strong>Special feature</strong></td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Schwannoma</td>\n<td style=\"width: 268.273px;\">\n<p>Antoni A and B areas</p>\n<p>Verocay bodies</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Neurofibroma</td>\n<td style=\"width: 268.273px;\">Shredded carrot appearance</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Rhadomyoma</td>\n<td style=\"width: 268.273px;\">Spider cells</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Rhabdomyosarcoma</td>\n<td style=\"width: 268.273px;\">Strap cells</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Small cell carcinoma</td>\n<td style=\"width: 268.273px;\">Azzopardi effect</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Granulosa cell tumour</td>\n<td style=\"width: 268.273px;\">Cal Exner bodies, pustule-ovoid bodies, coffee bean nuclei</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Yolk sac tumour</td>\n<td style=\"width: 268.273px;\">Schiller-Duval bodies</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Leydig cell tumours</td>\n<td style=\"width: 268.273px;\">Reinke crystals</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Lobular carcinoma</td>\n<td style=\"width: 268.273px;\">Indian file appearance</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Fibrosarcoma</td>\n<td style=\"width: 268.273px;\">Herring bone appearance</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Burkitt lymphoma</td>\n<td style=\"width: 268.273px;\">Starry sky appearance</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Papillary carcinoma</td>\n<td style=\"width: 268.273px;\">Orphan Annie nuclei</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Chordoma</td>\n<td style=\"width: 268.273px;\">Physaliferous cells</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Oligodendroglioma</td>\n<td style=\"width: 268.273px;\">Fried egg appearance</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Nodular fasciitis</td>\n<td style=\"width: 268.273px;\">Tissue-culture like growth pattern</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Chicken wire calcification</td>\n<td style=\"width: 268.273px;\">Chondroblastoma</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Chicken wire or crow&rsquo;s feet vasculature</td>\n<td style=\"width: 268.273px;\">Myxoid liposarcoma</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Jigsaw puzzle appearance</td>\n<td style=\"width: 268.273px;\">Cylindroma</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Owls eye nuclei</td>\n<td style=\"width: 268.273px;\">Hodgkin lymphoma</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Leaf like pattern</td>\n<td style=\"width: 268.273px;\">Phyllodes tumour</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Chinese letter pattern</td>\n<td style=\"width: 268.273px;\">Fibrous dysplasia</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old woman presents with a facial rash, arthralgia, and neuropsychiatric symptoms. She is found to have renal failure with poor urine output. Renal biopsy is performed, followed by staining with periodic acid Schiff; microscopic appearance is shown below. The most likely diagnosis is_______.",
    "choices": [
      {
        "id": 1,
        "text": "SLE"
      },
      {
        "id": 2,
        "text": "Diabetic nephropathy"
      },
      {
        "id": 3,
        "text": "IgA nephropathy"
      },
      {
        "id": 4,
        "text": "Goodpasture syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical details and histopathology image are suggestive of <strong>systemic lupus erythematosus (SLE).</strong></p>\n<p>In the image, glomerulus is hypercellular (<strong>endocapillary proliferation</strong>). Glomerular capillary loops appear circumferentially thickened, forming <strong>\"wire loop\" lesion, </strong>which is&nbsp;classically seen in&nbsp;<strong>Class IV or diffuse proliferative lupus nephritis.</strong></p>\n<p><strong>Wire-loop lesions </strong>are formed due to <strong>subendothelial immune complex deposits,</strong> creating a circumferential thickening of the capillary wall.</p>\n<p><strong>Lupus nephritis:</strong></p>\n<p>Up to 50% of SLE patients have clinically significant renal involvement.</p>\n<p>All renal compartments including glomerular, tubulointerstitial, and vascular components may be injured by the disease; however, the term &ldquo;lupus nephritis&rdquo; is mainly used to define the immune complex-mediated glomerulonephritis.</p>\n<p><strong>Deposition of immune complexes</strong> is regularly present in the mesangium or along the entire basement membrane and sometimes throughout the glomerulus.</p>\n<p>According to the currently accepted classification, <strong>six patterns of glomerular disease</strong> are seen in SLE.</p>\n<p><strong>Class IV </strong>is the <strong>most common</strong> and most severe pattern, and<strong>&nbsp;Class I </strong>is the <strong>least common</strong> pattern.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2871596abb414e2e93c110eacf86711e.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 25 year old female presents with a neck swelling. Isotope scan of her thyroid gland shows a \u201ccold\u201d nodule. This nodule is removed and microscopy is as seen below. All are true about the tumour except:",
    "choices": [
      {
        "id": 1,
        "text": "Follicular variant is the most common variant"
      },
      {
        "id": 2,
        "text": "Diagnosis can be made based on nuclear features, even in the absence of typical architecture"
      },
      {
        "id": 3,
        "text": "Associated with previous exposure to ionizing radiation"
      },
      {
        "id": 4,
        "text": "Haematogenous spread is common"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows <strong>papillary carcinoma of thyroid</strong> with papillae lined by cells with overlapping and clearing of nuclei and inclusions. Involvement of blood vessels by tumor cells is relatively uncommon but metastases to adjacent cervical lymph nodes occur in up to half of the cases.</p>\n<ul>\n<li>Presents as painless nodule or mass in the neck or cervical node in women of reproductive age.</li>\n<li>Usually <strong>cold nodule</strong> on a scan</li>\n<li><strong>Branching</strong> <strong>papillae </strong>and follicles <strong>with fibrovascular stalk</strong></li>\n<li>Nuclear changes &nbsp;- <strong>Optically clear - </strong>&nbsp;<strong>Ground glass</strong> or <strong>Orphan Annie eye nuclei</strong>, pseudo-inclusions, nuclear grooves</li>\n<li>Risk factors &ndash; <strong>Exposure to ionizing radiation, Hashimoto thyroiditis</strong></li>\n<li><strong>Diagnosis </strong>can be made <strong>based on these nuclear features, </strong>even in the absence of papillary architecture</li>\n<li><strong>Psammoma bodies </strong>are often present</li>\n<li><strong>Most common variant </strong>of papillary carcinoma is the<strong> follicular variant</strong></li>\n<li>Tall cell variant &ndash; increased frequencies of vascular invasion, extrathyroidal extension, and cervical and distant metastases.</li>\n<li>Excellent prognosis, with a 10-year survival rate in excess of 95%</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e9f22ce92f1e4b9aad2569ddc121e2af.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The definitive diagnosis of malignancy in pheochromocytomas is based exclusively on the presence of:",
    "choices": [
      {
        "id": 1,
        "text": "Capsular invasion"
      },
      {
        "id": 2,
        "text": "Mitoses"
      },
      {
        "id": 3,
        "text": "Nuclear pleomorphism"
      },
      {
        "id": 4,
        "text": "Metastases"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>definitive diagnosis of malignancy</strong> in pheochromocytomas is based exclusively on the<strong> presence of metastases.</strong></p>\n<p>There is <strong>no histologic feature that reliably predicts</strong> <strong>clinical behavior </strong>in phaeochromocytomas.</p>\n<p>Numbers of mitoses, confluent tumor necrosis, cellular monotony, and spindle cell morphology - associated with an aggressive behavior and increased risk of metastasis, but are not entirely reliable.</p>\n<p>Cellular and nuclear pleomorphism, presence of giant cells, mitotic figures, capsular and vascular invasion seen in benign pheochromocytomas.</p>\n<p>The definitive diagnosis of malignancy in pheochromocytomas is based exclusively on the presence of metastases. These may involve regional lymph nodes, liver, lung, and bone.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An example of CX3C chemokine is:",
    "choices": [
      {
        "id": 1,
        "text": "IL-8"
      },
      {
        "id": 2,
        "text": "Lymphotactin"
      },
      {
        "id": 3,
        "text": "Fractalkine"
      },
      {
        "id": 4,
        "text": "RANTES"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The only known member of the <strong>CX3C chemokine</strong>&nbsp;class is called <strong>fractalkine.</strong></p>\n<p>Chemokines are a family of small proteins that act primarily as chemoattractants for specific types of leukocytes.</p>\n<p>They are classified into four major groups, according to the arrangement of cysteine (C) residues in the proteins.</p>\n<p>&nbsp;</p>\n<table style=\"width: 564px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 95px;\"><strong>Chemokines Types</strong></td>\n<td style=\"text-align: center; width: 727px;\" colspan=\"4\"><strong>Features and examples</strong></td>\n</tr>\n<tr>\n<td style=\"width: 95px;\">&alpha;-chemokines</td>\n<td style=\"width: 314px;\">Primarily acts on<br />neutrophils</td>\n<td style=\"width: 151px;\">e.g.IL8</td>\n<td style=\"width: 225px;\">Cause activation &amp;<br />chemotaxis of<br />neutrophils</td>\n<td style=\"width: 37px;\">Induced by microbial products &amp; <br />other cytokines (Mainly IL-1 &amp; TNF)</td>\n</tr>\n<tr>\n<td style=\"width: 95px;\">&beta;-chemokines</td>\n<td style=\"width: 314px;\">Attracts all leukocytes except<br />neutrophils</td>\n<td style=\"width: 151px;\">MCP-1<br />(Monocyte chemoattractant protein)</td>\n<td style=\"width: 225px;\">RANTES (regulated &amp; normal&nbsp;<br />T-cell expressed &amp; secreted)</td>\n<td style=\"width: 37px;\">Eotaxin (selectively recruits eosinophils)</td>\n</tr>\n<tr>\n<td style=\"width: 95px;\">&gamma;-chemokines</td>\n<td style=\"width: 314px;\">Relatively selective for lymphocytes</td>\n<td style=\"width: 151px;\">e.g.Lymphotactin</td>\n<td style=\"width: 262px;\" colspan=\"2\">Attracts T cell precursor to thymus</td>\n</tr>\n<tr>\n<td style=\"width: 95px;\"><strong>CX<sub>3</sub>C</strong>&nbsp;chemokines</td>\n<td style=\"width: 314px;\">Chemotactic for <strong>monocyte &amp; T cell</strong></td>\n<td style=\"width: 413px;\" colspan=\"3\"><strong>Fractalkine is the only known member</strong> of this class</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Precursor lesion of hepatocellular carcinoma:",
    "choices": [
      {
        "id": 1,
        "text": "Hepatocellular adenomas"
      },
      {
        "id": 2,
        "text": "Small cell change"
      },
      {
        "id": 3,
        "text": "High Grade Dysplastic Nodule"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>All of the above lesions are precursors to hepatocellular carcinoma.</p>\n<p><strong>Risk factors for HCC</strong></p>\n<ul>\n<li>HBV, HCV,aflatoxin, alcohol</li>\n<li>Hereditary hemochromatosis, &alpha;1AT deficiency, Wilson disease, metabolic syndrome and non-alcoholic fatty liver disease.</li>\n</ul>\n<p><strong>Precursors of HCC</strong></p>\n<ul>\n<li><strong>Hepatocellular adenoma</strong> in particular those with &beta;-catenin activating mutations</li>\n<li><strong>Small cell change</strong></li>\n<li>Large cell change</li>\n<li>Low grade dysplastic nodule</li>\n<li><strong>High-grade dysplastic nodules</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A peripheral smear of a 40-year-old female with chronic anaemia and gall stones is as seen below. The patient develops a sudden worsening of anaemia requiring transfusion. What is the most likely Etiology?",
    "choices": [
      {
        "id": 1,
        "text": "EBV"
      },
      {
        "id": 2,
        "text": "CMV"
      },
      {
        "id": 3,
        "text": "HSV"
      },
      {
        "id": 4,
        "text": "Parvo virus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The peripheral smear shows many <strong>spherocytes</strong> classically described in <strong>hereditary spherocytosis</strong>.</p>\n<ul>\n<li>The generally stable clinical course of hereditary spherocytosis is sometimes punctuated by an&nbsp;<strong>aplastic crisis</strong><em>, </em>usually triggered by an <strong>acute parvovirus infection</strong>.</li>\n<li>Parvovirus infects and kills red cell progenitors, effectively causing red cell production to cease until an immune response commences, generally in 1 to 2 weeks.</li>\n<li>The reduced life span of HS red cells + cessation of erythropoiesis &rarr; leads to a <strong>sudden worsening of the anemia</strong>.</li>\n<li>Transfusions may be necessary to support the patient until the immune response clears the infection</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0fffee90706647949579e77911591975.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient with severe emphysema underwent lung volume reduction surgery. The resected specimen is shown below. What type of emphysema is this?",
    "choices": [
      {
        "id": 1,
        "text": "Panacinar"
      },
      {
        "id": 2,
        "text": "Centriacinar"
      },
      {
        "id": 3,
        "text": "Paraseptal"
      },
      {
        "id": 4,
        "text": "Irregular"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given gross image is characteristic of<strong> centriacinar emphysema</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2b6704c065844e54b6dd8ab616b7d50c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e62496d1dc4e4d898b7693592c210853x1280x1048.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f05dc5bf51de41839520f02447bcd63ax1280x1048.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/646f5e3157224d3484d268df83978955x1280x845.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/89d208f8f5f34e66a4a815daa86c067cx416x467.JPEG"
    ]
  },
  {
    "text": "Histopathological images of the oesophageal biopsies are given below. What of the following adaptive mechanisms is observed in the epithelium?",
    "choices": [
      {
        "id": 1,
        "text": "Hyperplasia"
      },
      {
        "id": 2,
        "text": "Hypertrophy"
      },
      {
        "id": 3,
        "text": "Dysplasia"
      },
      {
        "id": 4,
        "text": "Metaplasia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows&nbsp;a <strong>replacement</strong> of the <strong>normal squamous epithelium</strong> of the <strong>distal esophagus</strong> by metaplastic <strong>glandular epithelium</strong> containing <strong>intestinal-type goblet</strong> cells. The image on the left is Barrett's esophagus with non-dysplasia and on the right is Barrett's esophagus with low-grade dysplasia. The&nbsp;adaptive mechanism that is observed here is <strong>metaplasia.</strong></p>\n<div class=\"group w-full text-gray-800 dark:text-gray-100 border-b border-black/10 dark:border-gray-900/50 bg-gray-50 dark:bg-[#444654]\">\n<div class=\"flex p-4 gap-4 text-base md:gap-6 md:max-w-2xl lg:max-w-[38rem] xl:max-w-3xl md:py-6 lg:px-0 m-auto\">\n<div class=\"relative flex w-[calc(100%-50px)] flex-col gap-1 md:gap-3 lg:w-[calc(100%-115px)]\">\n<div class=\"flex flex-grow flex-col gap-3\">\n<div class=\"min-h-[20px] flex flex-col items-start gap-4 whitespace-pre-wrap break-words\">\n<div class=\"markdown prose w-full break-words dark:prose-invert light\">\n<p>Metaplasia is a <strong>reversible</strong> transformation where a differentiated cell type, either epithelial or mesenchymal, is <strong>replaced</strong> by another cell type. It serves as an adaptive reaction, where a cell type susceptible to specific stress is substituted by another cell type that can better endure unfavorable conditions. The most frequent form of epithelial metaplasia is the transition from columnar to squamous cells, which can be observed in the respiratory tract as a response to persistent irritation.</p>\n</div>\n</div>\n</div>\n<div class=\"flex justify-between lg:block\">&nbsp;</div>\n</div>\n</div>\n</div>\n<p>Metaplasia is a reversible change in which one differentiated cell type (epithelial or mesenchymal) is replaced by another cell type. Represents an adaptive response in which one cell type that is sensitive to a particular stress is replaced by another cell type that is better able to withstand the adverse environment. Most common epithelial metaplasia is columnar to squamous as occurs in the respiratory tract in response to chronic irritation.</p>\n<p><strong>Epithelial</strong></p>\n<p>Squamous metaplasia</p>\n<p>Transformation of different epithelium into stratified squamous epithelium.</p>\n<p>-&nbsp;Bronchial mucosal pseudostratified columnar irritated by cigarette smoke</p>\n<p>-&nbsp;Transitional epithelium of bladder irritated with bladder stones</p>\n<p>-&nbsp;Epithelial lining of ducts of exocrine glands (salivary, pancreas) and bile ducts with canaliculi</p>\n<p>-&nbsp;Endocervix</p>\n<p><strong>Columnar &nbsp;- &nbsp;</strong>Squamous cells to columnar cells</p>\n<p>-&nbsp;Barrett&rsquo;s esophagus</p>\n<p><strong>Connective tissue metaplasia</strong></p>\n<p>Formation of cartilage, bone, or adipose tissue (mesenchymal tissues) in tissues that normally do not contain these elements.</p>\n<p><strong>In myositis ossificans</strong>, occasionally occurs after intramuscular hemorrhage.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c468fa365ff543559568cf0491035794.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old female presents with slowly-progressive, painless loss of central vision. A detailed family history from this patient elicits the following pedigree chart where dark circles or squares indicate affected individuals. What is the mode of inheritance in the said disease?",
    "choices": [
      {
        "id": 1,
        "text": "Autosomal recessive"
      },
      {
        "id": 2,
        "text": "Mitochondrial"
      },
      {
        "id": 3,
        "text": "Autosomal dominant"
      },
      {
        "id": 4,
        "text": "X linked recessive"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>All progeny of an affected male are normal, but all children, male and female, of the affected female (shaded circles) manifest disease to a variable degree. The mode of inheritance depicted in the pedigree chart is maternal inheritance classically described in mitochondrial disorders.</p>\n<ul>\n<li>Mitochondrial genes - <strong>Maternal inheritance</strong>.</li>\n<li>mtDNA complement of the zygote is derived entirely from the ovum.</li>\n<li>Mothers transmit mtDNA to all their offspring, male and female; however, daughters but not sons transmit the DNA further to their progeny.</li>\n<li><strong>mtDNA encodes enzymes involved in oxidative phosphorylation</strong></li>\n<li>Individuals may harbor both wildtype and mutant mtDNA, a situation called <strong>heteroplasmy.</strong></li>\n<li><strong>Leber hereditary optic neuropathy is a prototype of mitochondrial disorder</strong>.</li>\n<li>Neurodegenerative disease that manifests as a progressive bilateral loss of central vision.</li>\n<li>Cardiac conduction defects and minor neurologic manifestations have also been observed.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/210c2122c0844783b73072f377d6686a.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 52-year-old male patient presented with abdominal pain and melena. On endoscopy, a bleeding gastric mass with irregular borders was identified along the greater curvature of the stomach. Microscopy is as shown in the image below. Which of the following is a specific marker for the tumor?",
    "choices": [
      {
        "id": 1,
        "text": "CD 117"
      },
      {
        "id": 2,
        "text": "CD 19"
      },
      {
        "id": 3,
        "text": "CD23"
      },
      {
        "id": 4,
        "text": "S-100"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario and the histological picture showing <strong>spindle-shaped tumor cells</strong> are suggestive of<strong>&nbsp;gastrointestinal stromal tumor</strong>&nbsp;(GIST),<strong>&nbsp;</strong>for which<strong> CD 117&nbsp;</strong>is the specific marker.&nbsp;</p>\n<p>GIST is the<strong> most common mesenchymal tumor </strong>of the abdomen, with the most common site being the <strong>stomach</strong>. The tumor arises from the interstitial cells of Cajal or pacemaker cells of the gastrointestinal muscularis propria.</p>\n<p>Most GISTs occur due to gain-of-function mutations in receptor tyrosine kinase <strong>KIT</strong> (~75%) or <strong>PDGRF-\u0251</strong> (~8%).&nbsp;</p>\n<p>The tumor peaks at<strong>&nbsp;60 years</strong> of age. It is often associated with the&nbsp;<strong>Carney triad</strong>,&nbsp;a nonhereditary condition characterized by GIST, paraganglioma, and pulmonary chondroma. GIST also has a higher incidence in individuals with neurofibromatosis I.</p>\n<p>Patients typically present with <strong>anemia</strong> (due to blood loss caused by mucosal ulceration) and symptoms of <strong>mass effect</strong>. However, GISTs may also be discovered incidentally during imaging or surgery.</p>\n<p>Microscopically, GIST can be of two patterns:</p>\n<ol>\n<li><strong>Spindle cell type</strong>: The tumor is composed of thin elongated cells.</li>\n<li><strong>Epitheloid type</strong>: The tumor is composed of plump epithelial-like cells.</li>\n</ol>\n<p>Mixed patterns may also be seen.</p>\n<p>The most useful immunohistochemical marker is KIT (<strong>CD117</strong>) detectable in Cajal cells, along with <strong>DOG1.</strong></p>\n<p>The prognosis depends on tumor size, mitotic index, and location (GISTs arising in the stomach are less aggressive than those arising in the small intestine).&nbsp;<strong>Complete surgical resection</strong> is the mainstay treatment. For unresectable, recurrent, or metastatic GISTs, <strong>imatinib</strong>, a tyrosine kinase inhibitor, can be used.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/23d4f3ad242f422d8976e849cc034e42.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The fixative routinely used in histopathology",
    "choices": [
      {
        "id": 1,
        "text": "10% buffered neutral formalin"
      },
      {
        "id": 2,
        "text": "Bouins fixative"
      },
      {
        "id": 3,
        "text": "Glutaraldehyde"
      },
      {
        "id": 4,
        "text": "Ethyl alcohol"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most widely used fixative for <strong>routine histopathology</strong> is <strong>10% neutral buffered formalin</strong>. This fixative can effectively prevent autolysis and provides excellent preservation of tissue and cellular morphology.</p>\n<p>Other options:</p>\n<ul>\n<li><strong>Bouins fixative</strong> - Used for <strong>testicular biopsies</strong>, also as a mordant for staining procedures.</li>\n<li><strong>Glutaraldehyde-</strong> Fixative in <strong>electron microscopy.</strong> The standard solution is a 2% buffered glutaraldehyde.</li>\n<li><strong>Ethyl alcohol</strong>- Ideal fixative for <strong>cytological smears</strong> because they act quickly and give good nuclear detail.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The characteristic inclusion in the cytoplasm of the cell seen below contains:",
    "choices": [
      {
        "id": 1,
        "text": "Immunoglubulin"
      },
      {
        "id": 2,
        "text": "Viral particles"
      },
      {
        "id": 3,
        "text": "Rough endoplasmic reticulum"
      },
      {
        "id": 4,
        "text": "Apoptotic bodies"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows a <strong>Mott Cell</strong> containing multiple immunoglobulin globules in<strong> grapelike cytoplasmic droplets.\u00a0</strong>Mott Cells\u00a0may be seen in African trypanosomiasis and in multiple myeloma.</p>\n<p>Other options:</p>\n<p>Option A: Viral inclusions containing replication proteins and virions may be seen in the case of<strong> </strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"><strong>HSV-infected cells</strong>.</span><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">\u00a0Intranuclear inclusions called <strong>Cowdry Type A bodies</strong> as shown below are seen. These bodies push the host cell chromatin to the edge of the nucleus.</span></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7f38d51e1977493cb33a2cf2d574415f.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d728492cd1134ff788591a628ceccec6x347x261.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/33ad8379a3a144788d22474c73f78a15x1280x1167.JPEG"
    ]
  },
  {
    "text": "Histopathological examination of a lymph node is as seen below. Which of the following condition does this pathology represent?",
    "choices": [
      {
        "id": 1,
        "text": "Type I hypersensitivity"
      },
      {
        "id": 2,
        "text": "Immune complex mediated  hypersensitivity"
      },
      {
        "id": 3,
        "text": "Antibody mediated hypersensitivity"
      },
      {
        "id": 4,
        "text": "Cell mediated hypersensitivity"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Microscopy shows a <strong>granuloma formed by epithelioid histiocytes and multinucleate giant cells and surrounded by lymphocytes</strong>. This is an example for<strong> Type IV or cell mediated hypersensitivity reaction.</strong></p>\n<p><strong>Type IV or cell mediated hypersensitivity reaction:</strong></p>\n<ul>\n<li>Seen with persistent or nondegradable antigens, such as tubercle bacilli in lungs or other tissues. Infiltrate is dominated by macrophages over a period of 2 or 3 weeks.</li>\n<li>With sustained activation, macrophages often undergo a morphologic transformation into epithelioid cells (large epithelium-like cells with abundant cytoplasm).</li>\n<li>A microscopic aggregation of epithelioid cells, usually surrounded by a collar of lymphocytes, is referred to as a granuloma.</li>\n<li>This pattern of inflammation, called <strong>granulomatous inflammation </strong>is typically associated with strong <strong>TH1-cell activation and high-level production of cytokines such as IFN-&gamma;.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1f40852cf7df45779a96b7029607e8a5.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "All the following tumours are correctly matched with their respective  immunohistochemical markers except",
    "choices": [
      {
        "id": 1,
        "text": "Rhabomyosarcoma \u2013 SMA"
      },
      {
        "id": 2,
        "text": "Ewing sarcoma- CD99"
      },
      {
        "id": 3,
        "text": "Schwannoma- S100"
      },
      {
        "id": 4,
        "text": "HepPar 1 \u2013 Hepatocellular carcinoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li><strong>SMA</strong> is used to identify <strong>smooth muscle cells, myoepithelial cells and myofibroblasts</strong> in normal, reactive or neoplastic tissue.</li>\n<li>It does not stain neoplasticcells in <strong>rhabdomyosarcoma</strong> which are of skeletal muscle origin.</li>\n<li>Specific markers for cells of <strong>skeletal muscle origin</strong> are <strong>Desmin</strong>, Myo-D1 and Myogenin.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old male was transferred to the emergency room after a car accident. Twenty-four hours after admission, the patient manifested tachycardia, dyspnea, and hypoxemia. After the autopsy, the diagnosis of fat embolism was made. Which of the following special stains on autopsy was used for the microscopy of a cryostat section from the lung?",
    "choices": [
      {
        "id": 1,
        "text": "Von Kossa"
      },
      {
        "id": 2,
        "text": "Oil red O"
      },
      {
        "id": 3,
        "text": "Mucocarmine"
      },
      {
        "id": 4,
        "text": "Colloidal Iron"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>oil red O (ORO) stain</strong> can <strong>identify neutral lipids and fatty acids</strong> in smears and tissues. A frozen section must be done so that the tissue need not go through routine processing. Oil red O <strong>stains the lipid in the vacuoles in the pulmonary vasculature.</strong></p>\n<ul>\n<li>Fixatives containing alcohols, or routine tissue processing with clearing, will remove lipids.</li>\n<li>ORO is a rapid and simple stain.</li>\n<li>It can be useful in identifying fat emboli in lung tissue or clot sections of peripheral blood.</li>\n</ul>\n<p><strong>Uses:</strong></p>\n<ul>\n<li>Diagnose renal cell carcinoma, sebaceous gland tumors of the skin, lipid-rich carcinomas.</li>\n<li>Identify fat emboli in lung tissue or clot sections of peripheral blood.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Metastatic calcification is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Fat necrosis"
      },
      {
        "id": 2,
        "text": "Aortic stenosis"
      },
      {
        "id": 3,
        "text": "Hypercalcemia"
      },
      {
        "id": 4,
        "text": "Atherosclerosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Metastatic calcification is seen in hypercalcemia and in otherwise normal tissue.</li>\n<li>Dystrophic calcification is seen in areas of fat necrosis, stenotic valves and atheromas.</li>\n<li><strong>Pathologic calcification is the abnormal tissue deposition of calcium salts, together with smaller amounts of iron, magnesium, and other mineral salts. </strong></li>\n</ul>\n<p>Two forms of pathologic calcification</p>\n<p><strong>Dystrophic calcification &ndash; In dead and degenerating tissues.</strong></p>\n<ul>\n<li>Normal serum levels of calcium</li>\n<li><strong>In areas of necrosis - </strong>coagulative, caseous, liquefactive type, and enzymatic necrosis of fat.</li>\n<li>Atheromas of advanced atherosclerosis, aging or damaged heart valves, tuberculous lymph nodes, infarcts, thrombi, hematomas.</li>\n</ul>\n<p><strong>Metastatic calcification-&nbsp; Deposition of calcium salts in otherwise normal tissues</strong></p>\n<ul>\n<li>Hypercalcemia secondary to some <strong>disturbance in calcium metabolism</strong>.</li>\n<li>Principal causes of hypercalcemia:\n<ul>\n<li>Increased secretion of parathyroid hormone (PTH)</li>\n<li>Resorption of bone tissue</li>\n<li>Vitamin D&ndash;related disorders</li>\n<li>Renal failure</li>\n<li>Aluminum intoxication</li>\n<li>Milk-alkali syndrome</li>\n</ul>\n</li>\n<li><strong>Sites- Interstitial tissues of the gastric mucosa, kidneys, lungs, systemic arteries, and pulmonary veins</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An infant born to a diabetic mother develops difficulty in breathing within 30 minutes of birth. Within a few hours, cyanosis becomes evident. Fine rales are heard over both lung fields. A chest x-ray film shows ground-glass picture. Which of the following is incorrect about this condition?",
    "choices": [
      {
        "id": 1,
        "text": "It is associated with respiratory failure and poor prognosis despite treatment"
      },
      {
        "id": 2,
        "text": "There is deficiency of surfactant produced by type II alveolar cells"
      },
      {
        "id": 3,
        "text": "Increased corticosteroid release lower the risk of developing RDS"
      },
      {
        "id": 4,
        "text": "On microscopy, hyaline membranes with fibrin and necrotic cell debris are seen"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This clinical scenario is characteristic of <strong>neonatal</strong> respiratory distress syndrome (<strong>RDS</strong>) or&nbsp;hyaline membrane disease.&nbsp;<sup id=\"cite_ref-11\" class=\"reference\"></sup>With treatment, it rarely leads to respiratory failure and has<strong>&nbsp;</strong>a<strong> good prognosis.&nbsp;</strong></p>\n<p>The fundamental defect is a <strong>deficiency</strong> of pulmonary<strong> surfactant</strong>, produced by<strong> type II </strong>pneumocytes<strong>.&nbsp;</strong></p>\n<div class=\"page\" title=\"Page 465\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Microscopically, the <strong>hyaline membranes</strong> are largely made up of <strong>fibrin </strong>admixed with<strong> necrotic </strong>cell<strong> debris.&nbsp;</strong>Grossly, the <strong>lungs</strong> are of normal size, solid, airless, reddish-purple, and they usually<strong> sink in water</strong>.</p>\n<p><strong>Corticosteroids </strong>help in surfactant production and are given prophylactically to at-risk pregnant women.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cf2cc444610c47499ac50821c2eaa8c4x1280x1922.JPEG"
    ]
  },
  {
    "text": "The purpose of the Ames test could be to study a compound\u2019s",
    "choices": [
      {
        "id": 1,
        "text": "Mitogenic effect"
      },
      {
        "id": 2,
        "text": "Mutagenic effect"
      },
      {
        "id": 3,
        "text": "Potential carcinogenicity"
      },
      {
        "id": 4,
        "text": "b and c"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>The&nbsp;<strong>Ames test</strong>&nbsp;is a widely employed method that uses&nbsp;bacteria&nbsp;to test whether a given chemical can cause&nbsp;mutations&nbsp;in the&nbsp;DNA&nbsp;of the test organism.</li>\n<li>More formally, it is a&nbsp;biological assay&nbsp;to assess the&nbsp;mutagenic&nbsp;potential of chemical compounds.</li>\n<li>A positive test indicates that the chemical is mutagenic and therefore may act as a&nbsp;carcinogen, because cancer is often linked to&nbsp;mutation.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is used to stain calcium in tissue sections?",
    "choices": [
      {
        "id": 1,
        "text": "Periodic acid\u2013Schiff"
      },
      {
        "id": 2,
        "text": "von Kossa"
      },
      {
        "id": 3,
        "text": "Masson\u2019s trichrome"
      },
      {
        "id": 4,
        "text": "Mucicarmine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The special stains used for calcium in tissue sections are <strong>von Kossa and Alizarin Red</strong>.</p>\n<p>Best method to demonstrate mineralization of bone: Tetracycline-labelling index.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The phenomenon in which the rapidly growing cells upregulate glucose and glutamine uptake and decrease their production of ATP per glucose molecule is called ________",
    "choices": [
      {
        "id": 1,
        "text": "Crabtree effect"
      },
      {
        "id": 2,
        "text": "Warburg effect"
      },
      {
        "id": 3,
        "text": "Pasteur effect"
      },
      {
        "id": 4,
        "text": "Haldane effect"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Warburg effect</strong></p>\n<ul>\n<li><strong>Pure oxidative phosphorylation</strong>&nbsp;produces abundant adenosine triphosphate ATP, but also &ldquo;burns&rdquo; glucose to CO<sub>2&nbsp;</sub>and H<sub>2</sub>O, leaving no carbon moieties suitable for use as building blocks for lipids or proteins.</li>\n<li>For this reason,&nbsp;<strong>rapidly growing cells</strong>&nbsp;(both benign and malignant)&nbsp;<strong>upregulate glucose and glutamine uptake and decrease their production of ATP per glucose molecule</strong>, a phenomenon called the Warburg effect.</li>\n</ul>\n<p>Other options:</p>\n<ul>\n<li><strong>Option a:</strong> <strong>Crabtree effect</strong>: It is a phenomenon whereby yeast species, such as <em>Saccharomyces cerevisiae</em>, produce ethanol (alcohol) in aerobic conditions and high external glucose concentrations, rather than producing biomass via the tricarboxylic acid (TCA) cycle.</li>\n<li><strong>Option c:</strong> <strong>Pasteur effect</strong>: It refers to the effect first discovered by Louis Pasteur, wherein aerating yeasted broth causes an increase in yeast cell growth, while conversely decreasing the fermentation rate. The effect occurs due to the difference in the efficiency of energy production by the&nbsp;anaerobic and aerobic pathways (citric acid cycle).</li>\n<li><strong>Option d: Haldane effect:</strong> It is a property of hemoglobin, where oxygenation of blood in the lungs displaces carbon dioxide from hemoglobin, thereby increasing the removal of carbon dioxide.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most common cause of the following pathological change seen in the spleen?",
    "choices": [
      {
        "id": 1,
        "text": "Apoptosis"
      },
      {
        "id": 2,
        "text": "Embolization"
      },
      {
        "id": 3,
        "text": "Metastasis"
      },
      {
        "id": 4,
        "text": "Atherosclerosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image shows a pale,\u00a0<strong>wedge-shaped </strong>area of<strong> infarction</strong> in the spleen.</p>\n<p>An infarct is a region of ischaemic necrosis resulting from the obstruction of blood flow, typically due to occlusion of the arterial supply or venous drainage. The most common cause of solid organ infarts is <strong>thromboembolism.</strong></p>\n<p>The pattern of ischemic necrosis seen in <strong>solid organ infarction</strong> is <strong>coagulative necrosis</strong>. However, <strong>CNS infarctions </strong>are an <strong>exception</strong>. They cause <strong>liquefactive necrosis</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bfb0e5155b7645be86d72ee1d35d26e0.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Who discovered the process of phagocytosis?",
    "choices": [
      {
        "id": 1,
        "text": "Thomas Lewis"
      },
      {
        "id": 2,
        "text": "Ilya Mechnikov"
      },
      {
        "id": 3,
        "text": "Rudolf Virchow"
      },
      {
        "id": 4,
        "text": "John Hunter"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<div class=\"page\" title=\"Page 82\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Ilya Ilyich Mechnikov </strong>discovered the process of<strong> phagocytosis.</strong>&nbsp;He is known as the father of natural immunity and&nbsp;established the concept of <strong>cell-mediated immunity.</strong></p>\n<p>He was jointly awarded the 1908 Nobel Prize in Physiology along with&nbsp;Paul <strong>Ehrlich</strong>, who established the concept of<strong> humoral immunity.</strong></p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What mutation causes the most common form of GM2 gangliosidosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hexosaminidase, \u03b1 subunit"
      },
      {
        "id": 2,
        "text": "Hexosaminidase, \u03b2 subunit"
      },
      {
        "id": 3,
        "text": "Ganglioside activator protein"
      },
      {
        "id": 4,
        "text": "Galactosylceramidase"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Tay&ndash;Sachs disease, </strong>the most common form of GM2 gangliosidosis<strong>, </strong>results from<strong> mutations </strong>in the<strong> &alpha;-subunit </strong>locus on <strong>chromosome 15 </strong>that causes a<strong> severe deficiency </strong>of<strong> hexosaminidase A.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following.",
    "choices": [
      {
        "id": 1,
        "text": "1-b,  2-c, 3-a, 4-d"
      },
      {
        "id": 2,
        "text": "1-a,  2-d, 3-b, 4-c"
      },
      {
        "id": 3,
        "text": "1-c,  2-a, 3-d, 4-b"
      },
      {
        "id": 4,
        "text": "1-d,  2-b, 3-c, 4-a"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The correct match is:</p>\n<table style=\"height: 164px; width: 382px;\">\n<tbody>\n<tr style=\"height: 25px;\">\n<td style=\"width: 224.547px; text-align: center; height: 25px;\"><strong>Condition</strong></td>\n<td style=\"width: 141.453px; text-align: center; height: 25px;\"><strong>Amyloid protein</strong></td>\n</tr>\n<tr style=\"height: 25px;\">\n<td style=\"width: 224.547px; height: 25px;\">Familial Mediterranean fever</td>\n<td style=\"width: 141.453px; height: 25px;\">AA</td>\n</tr>\n<tr style=\"height: 25px;\">\n<td style=\"width: 224.547px; height: 25px;\">Alzheimer's disease</td>\n<td style=\"width: 141.453px; height: 25px;\">A&beta;</td>\n</tr>\n<tr style=\"height: 25px;\">\n<td style=\"width: 224.547px; height: 25px;\">Systemic senile amyloidosis</td>\n<td style=\"width: 141.453px; height: 25px;\">ATTR</td>\n</tr>\n<tr style=\"height: 20px;\">\n<td style=\"width: 224.547px; height: 20px;\">Hemodialysis-associated amyloidosis</td>\n<td style=\"width: 141.453px; height: 20px;\">A&beta;2m</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A newborn baby born at term was noted to have respiratory distress. Radiography revealed diffuse ground-glass opacities in all lung fields. Exogenous surfactant administration resulted in a brief improvement, but his condition continued to worsen once surfactant therapy was stopped. Which is the most common genetic mutation associated with this disorder?",
    "choices": [
      {
        "id": 1,
        "text": "ABCA3"
      },
      {
        "id": 2,
        "text": "Surfactant Protein B"
      },
      {
        "id": 3,
        "text": "GM-CSF"
      },
      {
        "id": 4,
        "text": "Surfactant Protein C"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<div class=\"page\" title=\"Page 704\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The above scenario is suggestive of<strong> surfactant dysfunction disorder.</strong>\u00a0It is most commonly caused by mutations of <strong>ABCA3</strong> gene.</p>\n<p>In this disorder, lack of production of surfactant leads to <strong>severe respiratory failure</strong> in neonates. There is transient improvement with administration of exogenous surfactant, but it worsens once surfactant therapy is stopped. This condition occurs due to mutations in genes encoding proteins involved in surfactant trafficking or secretion such as:</p>\n<ul>\n<li>ATP binding cassette protein member 3 (ABCA3)\u00a0</li>\n<li>Surfactant protein C</li>\n<li>Surfactant protein B</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A biopsy was performed on a female patient who presented with a lump in her right breast. Presence of which of the following findings is not associated with an increased risk of cancer?",
    "choices": [
      {
        "id": 1,
        "text": "Florid hyperplasia"
      },
      {
        "id": 2,
        "text": "Fibroadenoma with complex features"
      },
      {
        "id": 3,
        "text": "Sclerosing adenosis"
      },
      {
        "id": 4,
        "text": "Apocrine change"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Apocrine change</strong> does not increase<strong>&nbsp;</strong>the risk of cancer as it is a <strong>non-proliferative</strong> change.</p>\n<p>Moderate or florid hyperplasia, fibroadenoma with complex features, and sclerosing adenosis are classified under <strong>proliferative disease without atypia </strong>with a <strong>1.5- to 2-fold</strong> increased risk of carcinoma.</p>\n<p>Both breasts are at increased risk, although the risk to the ipsilateral breast may be slightly higher.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Patients with sickle cell disease are particularly susceptible to osteomyelitis caused by which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Staphylococcus aureus"
      },
      {
        "id": 2,
        "text": "Haemophilus influenzae"
      },
      {
        "id": 3,
        "text": "Streptococcus pyogenes"
      },
      {
        "id": 4,
        "text": "Salmonella enteritidis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Salmonella enteritidis&nbsp;</strong>is commonly implicated in osteomyelitis in patients with <strong>sickle cell anemia</strong>.</p>\n<div class=\"p-rich_text_section\">The common causative organisms include:</div>\n<ul class=\"p-rich_text_list p-rich_text_list__bullet\" data-stringify-type=\"unordered-list\" data-indent=\"0\" data-border=\"0\">\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\"><em data-stringify-type=\"italic\"><strong>S</strong><strong>taphylococcus aureus</strong>&nbsp;-</em>&nbsp;the most common cause overall</li>\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\"><em data-stringify-type=\"italic\">Pseudomonas aeruginosa</em>&nbsp;- most common cause in&nbsp;<strong data-stringify-type=\"bold\">IV drug abusers</strong></li>\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\"><strong data-stringify-type=\"bold\"><em data-stringify-type=\"italic\">Salmonella</em></strong><strong data-stringify-type=\"bold\">&nbsp;</strong>- most common in patients of&nbsp;<strong data-stringify-type=\"bold\">sickle cell anemia</strong></li>\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\"><em data-stringify-type=\"italic\">Haemophilus influenzae</em>&nbsp;- was a common causative organism in children, less common now due to vaccination</li>\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\"><em data-stringify-type=\"italic\">Streptococcus&nbsp;pyogenes - </em>neonates</li>\n<li data-stringify-indent=\"0\" data-stringify-border=\"0\"><em data-stringify-type=\"italic\">Escherichia coli, Klebsiella-&nbsp;</em>most common cause in patients with&nbsp;<strong>genitourinary tract infections</strong></li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 7-year-old girl presents with fever and jaundice for 5 days. On examination, splenomegaly is noted. Her lab reports are given below. What is the likely trigger to have caused this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Parvovirus"
      },
      {
        "id": 2,
        "text": "EBV"
      },
      {
        "id": 3,
        "text": "Plasmodium"
      },
      {
        "id": 4,
        "text": "Meningococcus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given hemogram showing <strong>pancytopenia</strong> and <strong>spherocytes</strong> in peripheral smear is suggestive of <strong>aplastic crisis</strong> in <strong>hereditary spherocytosis</strong>. It is usually triggered by <strong>parvovirus</strong> infection.</p>\n<p>Parvovirus infects and kills the red cell precursors. This creates a<strong> transient </strong>arrest of erythropoiesis i.e. <strong>aplastic crisis</strong> as the life span of RBCs are shortened. The immune response clears the virus in 1-2 weeks.</p>\n<p><strong>Blood transfusions</strong> may be necessary during <strong>acute phases</strong> of the infection. This crisis can also occur in other hemolytic anaemias.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which cytokine is an important growth factor for plasma cells in multiple myeloma?",
    "choices": [
      {
        "id": 1,
        "text": "IL-2"
      },
      {
        "id": 2,
        "text": "IL-6"
      },
      {
        "id": 3,
        "text": "Interferon \u00a0\u03b3"
      },
      {
        "id": 4,
        "text": "IL-1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The proliferation and survival of <strong>plasma cells</strong> are dependent on several cytokines, most notably <strong>IL-6<em>.</em></strong></p>\n<p>It is an important growth factor for plasma cells. It is produced by the tumor cells themselves and by resident marrow stromal cells. IL6, along with other cytokines,&nbsp;<strong>promotes osteoclastic activity </strong>and<strong> lytic bone lesions.&nbsp;High</strong> serum levels of IL-6 are seen in patients with active disease&nbsp;and are associated with a<strong> poor prognosis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Pathology St 1';
        const quizFilename = 'pathology-st-1-27c51ab4.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>