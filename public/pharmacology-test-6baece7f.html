<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pharmacology Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Test Series Subject / 2023
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The dose-response curve (DRC) is plotted for drug A both in the presence and absence of drug B.  What type of effect does drug B have on drug A?",
    "choices": [
      {
        "id": 1,
        "text": "Competitive antagonism"
      },
      {
        "id": 2,
        "text": "Noncompetitive antagonism"
      },
      {
        "id": 3,
        "text": "Agonism"
      },
      {
        "id": 4,
        "text": "Partial agonism"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Drug B has a <strong>competitive antagonistic</strong> effect on drug A.</p>\n<p>In <strong>competitive antagonism</strong>, DRC shows a <strong>parallel rightward shift</strong>. Competitive\u00a0antagonism occurs when the agonist and antagonist compete for the same binding site on the receptor. The response curve for the agonist shifts to the right in a concentration-related manner by the antagonist.</p>\n<p>Other Options:</p>\n<p>Option B: In <strong>non-competitive antagonism</strong>, there is<strong> flattening </strong>of the agonist DRC.<strong>\u00a0</strong>Non-competitive antagonism\u00a0effects occur when the agonist and antagonist bind to different sites on the receptor. ( allosteric site) and inhibits the response. The response curve\u00a0progressively shifts in a\u00a0<strong>right and downward direction </strong>until it reaches a limiting value when the allosteric site is fully occupied.</p>\n<p>Option C: In <strong>competitive agonism</strong>, the curve shifts to the <strong>left</strong>.</p>\n<p>Option D: In <strong>partial agonism</strong>, the\u00a0partial agonist which has an affinity for the same receptor, also competes with and\u00a0antagonizes a full agonist, while producing a submaximal response.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/86cce444184c435a9e3d0f9aa175ab1b.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient was given 200 mg of a drug that follows first-order kinetics. If 75 mg is excreted in 90 minutes, how much drug will remain at the end of 6 hours?",
    "choices": [
      {
        "id": 1,
        "text": "50 mg"
      },
      {
        "id": 2,
        "text": "30.5 mg"
      },
      {
        "id": 3,
        "text": "12.5 mg"
      },
      {
        "id": 4,
        "text": "6.25 mg"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>30.5 mg of the drug will remain after 6 hours.</p>\n<p>In <strong>first order kinetics,&nbsp;</strong>a<strong> constant fraction</strong> of the drug is<strong> excreted in </strong>a<strong> given time.</strong>&nbsp;</p>\n<p>75 mg of 200 mg is excreted in 90 minutes</p>\n<p>75/200 = 37.5/100 =&nbsp;<strong>0.375</strong>&nbsp;is eliminated&nbsp;</p>\n<p>After 90 minutes; 200 mg-75 mg = 125 mg remains&nbsp;</p>\n<p>The next 90 minutes (after 180 minutes) = 125 x 0.375&nbsp;= 46.875 mg is eliminated, and 125-46.875 = 78.125 mg remains&nbsp;</p>\n<p>The next 90 minutes (after 270 minutes) = 78.125 x 0.375&nbsp;= 29.297 mg is eliminated, and 78.125-29.297 = 48.828 remains&nbsp;</p>\n<p>The next 90 minutes (after 360 minutes) = 48.828 x 0.375&nbsp;= 18.310 mg is eliminated, 48.828-18.310 =&nbsp;<strong>30.518 mg remains after 6 hours.&nbsp;</strong></p>\n<p>A simpler way to calculate&nbsp;</p>\n<p>3/8 fraction is excreted in 90 minutes&nbsp;&rarr; 5/8 remains after 90 minutes.</p>\n<p>6 hours (360 min) is 4 times of 90 minutes.</p>\n<p>So 200 x (5/8)(5/8)(5/8)(5/8) = <strong>30.518 mg remains after 360 minutes&nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A drug with a half-life of 8 hours is administered orally three times a day. How long will it take for the plasma concentration to reach a steady state?",
    "choices": [
      {
        "id": 1,
        "text": "16 hours"
      },
      {
        "id": 2,
        "text": "24 hours"
      },
      {
        "id": 3,
        "text": "30 hours"
      },
      {
        "id": 4,
        "text": "36 hours"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The time taken to reach steady-state plasma concentration is<strong> 4-5 half-lives. </strong>As the half-life of the given drug is 8 hours, it will take <strong>32-40 hours </strong>to reach a steady state. Hence, <strong>36 hours\u00a0</strong>will be the most appropriate answer.</p>\n<p><strong>Steady-state:\u00a0</strong>The amount of drug administered is equal to the amount of drug eliminated within one dosing interval resulting in a plateau or constant drug plasma concentration, with the plasma concentration fluctuating between a minimum and maximum.</p>\n<p>The time taken to reach steady-state plasma concentration is<strong> 4-5 half-lives. </strong></p>\n<p>Drugs with a shorter half-life reach a steady state rapidly, whereas drugs with a longer half-life take days to weeks to attain a steady state.</p>\n<p><strong>Steady-state concentration (Css) = F x Dosing rate/ CL</strong></p>\n<ul>\n<li>where the dosing rate is the dose per time interval and is dose/T</li>\n<li>F is the fractional bioavailability, CL is clearance.</li>\n</ul>\n<p>In the case of intravenous infusion,</p>\n<p><strong>Steady-state concentration (Css) = Rate of infusion/ CL</strong></p>\n<p>Pharmacokinetics of repeated drug dosing:</p>\n<p>Plasma concentration of the drug will increase, reach a maximum, and decline after the first dose. A second dose will be administered before the first dose is eliminated. Consequently, the plasma concentration resulting from the second dose will be higher than from the first dose.</p>\n<p>This increase in plasma concentration of the drug will occur continuously on repeated dosing (<strong>drug accumulation</strong> occurs) until a steady state at which drug elimination is equal to drug administration is reached. This is known as the <strong>plateau principle of drug accumulation.</strong></p>\n<p>A graph is plotted between plasma drug concentration and time as shown below. The given graph depicts the plateau principle of drug accumulation on repeated oral dosing.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a16728452d0c4a8fb6ef7304909a6502x600x618.JPEG"
    ]
  },
  {
    "text": "Which of the following drugs come under Schedule H of the Drugs and Cosmetics Act, 1945?",
    "choices": [
      {
        "id": 1,
        "text": "Biologicals and special products like insulin, toxin and antitoxins"
      },
      {
        "id": 2,
        "text": "Bacterial vaccines"
      },
      {
        "id": 3,
        "text": "Drugs  purchased with the prescription of a qualified doctor"
      },
      {
        "id": 4,
        "text": "Drugs with a warning label  \u201cCaution: it is dangerous to take this preparation except under medical supervision\u201d"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Schedule H</strong> includes drugs purchased over the counter with the prescription of a qualified doctor.</p>\n<p><strong>The Drugs and Cosmetics Rules</strong>, classify drugs under different schedules based on their potential for abuse, their therapeutic value, and other factors. The rules provide guidelines for the storage, sale, display, and prescription of each schedule.</p>\n<p>Other options:</p>\n<p>Option A- Biological and special products like insulin, toxin, and antitoxins are included under\u00a0<strong>Schedule C.</strong></p>\n<p>Option B- Bacterial vaccines are included under\u00a0<strong>Schedule F I.</strong></p>\n<p>Option D- Drugs that should be labelled with the words \u201cCaution: it is dangerous to take this preparation except under medical supervision\u201d are included under\u00a0<strong>Schedule G.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A man presents to the casualty with fever and hematuria for 3 days. He also gives a history of recurrent left-sided loin pain radiating to the groin. X-ray KUB done is shown below. Which of the following is false regarding stones seen in his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Composed of calcium, ammonium, and magnesium phosphate"
      },
      {
        "id": 2,
        "text": "It is formed in acidic urine"
      },
      {
        "id": 3,
        "text": "Increased risk with infections by urease producing organisms"
      },
      {
        "id": 4,
        "text": "Rectangular or coffin lid appearance on microscopy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given scenario and X-Ray KUB showing <strong>staghorn </strong>appearance&nbsp;points to a diagnosis of <strong>struvite stones</strong>. Struvite stone is produced in <strong>alkaline urine.</strong>&nbsp;</p>\n<p>It is commonly associated with&nbsp;infections with <strong>urea-splitting organisms</strong> like Proteus and Klebsiella species. Increased metabolism of urea results in alkalinity of the urine.</p>\n<p>Struvite is a triple-phosphate calculus (<strong>calcium,</strong>&nbsp;<strong>ammonium</strong>, and <strong>magnesium</strong> phosphate). The calculus may enlarge to fill most of the collecting system, forming a staghorn calculus.&nbsp;</p>\n<p>These stones are <strong>dirty-white</strong> in color, and grossly<strong> smooth</strong> in texture. <strong>Rectangular </strong>or<strong> coffin lid</strong>&nbsp;appearance is seen on microscopic examination.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3c5f5edd3e504c4d9bdd5c0e14b7e9fa.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2bfb4793bd0f45d78606766191ee01b7x1280x2927.JPEG"
    ]
  },
  {
    "text": "You read a news alert that mentions a novel drug has received marketing approval for diabetes mellitus and that it has shown positive results in a pivotal trial. This corresponds to which phase of clinical trials?",
    "choices": [
      {
        "id": 1,
        "text": "Phase I"
      },
      {
        "id": 2,
        "text": "Phase II"
      },
      {
        "id": 3,
        "text": "Phase III"
      },
      {
        "id": 4,
        "text": "Phase IV"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: justify;\"><strong>Phase III trials </strong>are usually considered&nbsp;<strong>pivotal trials </strong>and<strong>&nbsp;</strong>are <strong>necessary for</strong> the <strong>approval</strong> of the majority of drugs.<strong>&nbsp;</strong>They<strong>&nbsp;</strong>are<strong>&nbsp;</strong>also called <strong>multi-site trials</strong> and are done for <strong>3&ndash;5 years</strong>.</p>\n<p style=\"text-align: justify;\">When the initial Phase III trials are complete, the sponsor (usually a pharmaceutical company) applies to the FDA for approval to market the drug. This application is called either a New Drug Application (NDA) or a Biologics License Application (BLA).</p>\n<p style=\"text-align: justify;\">In some drugs related to rare diseases or malignancies, phase II studies are considered as pivotal, and the drug may be approved on the basis of phase II studies.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A pregnant woman at 33 weeks of gestation presents to your antenatal clinic with preterm labour.  Which corticosteroid will you administer for stimulation of fetal lung maturation?",
    "choices": [
      {
        "id": 1,
        "text": "Hydrocortisone"
      },
      {
        "id": 2,
        "text": "Triamcinolone"
      },
      {
        "id": 3,
        "text": "Methylprednisolone"
      },
      {
        "id": 4,
        "text": "Betamethasone"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Betamethasone</strong> is indicated for the stimulation of <strong>fetal lung maturation </strong>in<strong> preterm labor.</strong></p>\n<p>As compared to cortisol, betamethasone <strong>binds to maternal proteins less</strong> and has <strong>less placental metabolism</strong>. This allows increased transfer to the fetus. Additionally, infants exposed to betamethasone are less likely to require postnatal resuscitation.&nbsp;2 doses of 12 mg each are administered 18-24 hours apart when the delivery is anticipated before 34 weeks of gestation.</p>\n<p><strong>Dexamethasone </strong>is&nbsp;another long-acting glucocorticoid that can be given. It has benefits such as <strong>less risk of intraventricular hemorrhage</strong> and a shorter length of stay in the NICU.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5-year-old child diagnosed with bronchial asthma requires bronchodilator therapy. Which of the following device will you prescribe for this child, to avoid oropharyngeal adverse effects?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: left;\">The device in image 3 is a&nbsp;<strong>spacer device </strong>that can be prescribed to<strong>&nbsp;</strong><strong>decrease&nbsp;</strong>the incidence of propellant-mediated <strong>oropharyngeal adverse effects</strong>.</p>\n<p style=\"text-align: left;\">Spacers reduce the velocity and size of particles entering the upper airways.&nbsp;This<strong>&nbsp;</strong>reduces the amount of drug depositing in the oropharynx and increases the proportion of drugs inhaled into the lower airways. Thus, a less amount of the drug gets swallowed and absorbed from the GI tract and limits local side effects.&nbsp;</p>\n<p style=\"text-align: left;\">Spacer devices are <strong>useful</strong> in delivering inhaled drugs to <strong>children</strong>&nbsp;who are not able to use a pMDI alone but can also be used by <strong>adults</strong> for better drug delivery. The image below shows the use of a spacer device with a face mask which is preferred in children younger than 3 years of age.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0460f2992470419f8716aee458e25b93.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dcf1afee41f64b98a0129246c3cb0a72x720x404.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c79334e432384464a4db8f878ca4023bx720x540.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cf3ec9228e96415da2ec3c3932577099x596x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3fe2da00a2b7445d8a99ec027efeab5ax799x533.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2687fee5df024653908a0728befd85afx1024x683.JPEG"
    ]
  },
  {
    "text": "A patient presents to the emergency department with diarrhea, sweating, excessive lacrimation, and salivation. His pulse rate is 55/min and his plasma cholinesterase level was 50U/mL. Which of the following can be used to treat this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Neostigmine"
      },
      {
        "id": 2,
        "text": "Atropine"
      },
      {
        "id": 3,
        "text": "Epinephrine"
      },
      {
        "id": 4,
        "text": "Benztropine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical features are suggestive of <strong>organophosphate poisoning</strong> and <strong>IV atropine</strong> is the treatment of choice.</p>\n<p>The organophosphates commonly used as pesticides are anticholinesterases.&nbsp;Toxicity occurs by excessive inhalation of vapors, ingestion, or percutaneous absorption. It inhibits the cholinesterase activity which results in an increase of acetylcholine, leading to cholinergic symptoms.</p>\n<p>The predominant initial signs are of muscarinic excess which includes:&nbsp;<strong>(DUMBBELSS)</strong></p>\n<ul>\n<li><strong>D</strong>iarrhea</li>\n<li><strong>U</strong>rination</li>\n<li><strong>M</strong>iosis</li>\n<li><strong>B</strong>ronchospasm</li>\n<li><strong>B</strong>radycardia</li>\n<li><strong>E</strong>mesis</li>\n<li><strong>L</strong>acrimation</li>\n<li><strong>S</strong>alivation</li>\n<li><strong>S</strong>weating</li>\n</ul>\n<p>This may be followed by cognitive disturbances, convulsions, and neuromuscular blockade.</p>\n<p>Treatment:</p>\n<ul>\n<li>Maintenance of vital signs particularly respiration</li>\n<li>Removal of clothing and washing of the skin</li>\n<li><strong>IV atropine 2- 5 mg. </strong>If&nbsp;IV administration is&nbsp;not possible, then <strong>2 mg IM</strong>&nbsp;every 5-10 minutes (till muscarinic symptoms disappear)</li>\n<li><strong>Pralidoxime,</strong> a cholinesterase reactivator can also be used for treatment</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old male patient presents to the emergency department with complaints of breathing difficulty, facial swelling, and palpitations following a bee sting. He was immediately given an intramuscular injection of a drug in 1:1000 dilution. The drug acts on which of the following receptor to improve the patient's breathing difficulty?",
    "choices": [
      {
        "id": 1,
        "text": "Beta 2"
      },
      {
        "id": 2,
        "text": "Beta 1"
      },
      {
        "id": 3,
        "text": "Alpha 2"
      },
      {
        "id": 4,
        "text": "Alpha 1"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The patient's complaints of&nbsp;breathing difficulty, facial swelling, and palpitations following a bee sting are suggestive of anaphylactic shock. The <strong>drug&nbsp;of choice</strong> for anaphylaxis is <strong>intramuscular adrenaline</strong> (<strong>0.5ml in 1:1000 dilution</strong>). Activation of <strong>beta 2</strong> receptors causes<strong> bronchodilation</strong>. Hence, adrenaline action on the beta 2 receptors improves the breathing difficulty in this patient. Apart from this, beta 2 receptors also inhibit the secretion from mast cells.</p>\n<p><strong>Other options:</strong></p>\n<table style=\"height: 99px;\" width=\"456\">\n<tbody>\n<tr>\n<td style=\"width: 86.28125px;\"><strong>Receptor</strong></td>\n<td style=\"width: 157.734375px;\"><strong>Action</strong></td>\n<td style=\"width: 190.015625px;\"><strong>Use in anaphylaxis treatment&nbsp;</strong></td>\n</tr>\n<tr>\n<td style=\"width: 86.28125px;\">Alpha 1 and alpha 2</td>\n<td style=\"width: 157.734375px;\">Vasoconstriction</td>\n<td style=\"width: 190.015625px;\">Increase in BP</td>\n</tr>\n<tr>\n<td style=\"width: 86.28125px;\">Beta 1</td>\n<td style=\"width: 157.734375px;\">Cardiac stimulation</td>\n<td style=\"width: 190.015625px;\">Increase in BP</td>\n</tr>\n<tr>\n<td style=\"width: 86.28125px;\">Beta 2</td>\n<td style=\"width: 157.734375px;\">Bronchodilation</td>\n<td style=\"width: 190.015625px;\">Reverse bronchoconstriction&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p>Adrenaline acts on &alpha;<sub>1</sub>, &alpha;<sub>2</sub>, &beta;<sub>1</sub>, &beta;<sub>2</sub>, and &beta;<sub>3</sub> receptors.</p>\n<ul>\n<li><strong>&alpha;<sub>1</sub></strong> - present in blood vessels - causes vasoconstriction -<strong> increases BP</strong>.</li>\n<li><strong>&beta;<sub>2</sub></strong> - present in blood vessels - causes vasodilatation - <strong>decreases BP</strong>.&nbsp;</li>\n</ul>\n<table style=\"width: 401px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 129.4375px;\">\n<p><strong>Adrenergic drug</strong></p>\n</td>\n<td style=\"width: 261.5625px;\">\n<p><strong>Receptors that it acts on</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 129.4375px;\">\n<p>Adrenaline</p>\n</td>\n<td style=\"width: 261.5625px;\">\n<p>&alpha;<sub>1</sub> + &alpha;<sub>2</sub>&nbsp;+&beta;<sub>1</sub> + &beta;<sub>2</sub> + weak &beta;<sub>3</sub> action</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 129.4375px;\">\n<p>Noradrenaline</p>\n</td>\n<td style=\"width: 261.5625px;\">\n<p>&alpha;<sub>1</sub> +&alpha;<sub>2</sub> +&beta;<sub>1</sub> + &beta;<sub>3</sub> but<strong> no &beta;<sub>2</sub> action</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 129.4375px;\">\n<p>Isoprenaline</p>\n</td>\n<td style=\"width: 261.5625px;\">\n<p>&beta;<sub>1</sub> + &beta;<sub>2</sub> + &beta;<sub>3</sub> but <strong>no &alpha; action</strong></p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient who was hospitalized and started on an intravenous antibiotic has developed diarrhea. The findings of the colonoscopy are given below. Which of the following antibiotic is most likely to be responsible?",
    "choices": [
      {
        "id": 1,
        "text": "Daptomycin"
      },
      {
        "id": 2,
        "text": "Fidaxomicin"
      },
      {
        "id": 3,
        "text": "Clindamycin"
      },
      {
        "id": 4,
        "text": "Chloramphenicol"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical vignette of a patient with hospital-acquired diarrhea (nosocomial) following antibiotic administration is suggestive of&nbsp;<strong>pseudomembranous colitis</strong>&nbsp;most likely due to&nbsp;<strong>clindamycin</strong><strong><em>.</em>&nbsp;</strong></p>\n<p><span data-preserver-spaces=\"true\">Pseudomembranous colitis is an advanced form of clostridium difficile infection (CDI) that is visualized at endoscopy. Pseudomembranes are seen as whitish yellow plaques on the mucosa. Clostridium difficile infection is the most commonly diagnosed&nbsp;nosocomial diarrhea. It is commonly seen in individuals who receive a prolonged antibiotic course, that causes a change in the composition of gastrointestinal microbial flora. This leads to the colonization of C. difficile.</span></p>\n<p><span data-preserver-spaces=\"true\">Antibiotics that may cause CDI are:</span></p>\n<ul>\n<li><strong>Clindamycin</strong></li>\n<li><span data-preserver-spaces=\"true\">Ampicillin</span></li>\n<li><span data-preserver-spaces=\"true\">Cephalosporins- cefotaxime, ceftriaxone, cefuroxime, and ceftazidime</span></li>\n<li><span data-preserver-spaces=\"true\">Fluroquinolones-&nbsp;ciprofloxacin, levofloxacin, and moxifloxacin</span></li>\n</ul>\n<p>Clinical features include d<span data-preserver-spaces=\"true\">iarrhea, l</span><span data-preserver-spaces=\"true\">ower abdominal pain, f</span>ever, and leukocytosis.&nbsp;The diagnosis is based on clinical criteria:&nbsp;</p>\n<ul>\n<li>Diarrhea without other recognized causes, and</li>\n<li>Detection of toxin A or B in the stool, toxin-producing C. difficile in the stool&nbsp;</li>\n</ul>\n<p><span data-preserver-spaces=\"true\">Discontinuation of the offending antimicrobial, if possible, is the first step in management. <strong>Oral</strong> <strong>vancomycin</strong>&nbsp;and&nbsp;<strong>fidaxomicin</strong>&nbsp;(Option B) are used for the <strong>treatment</strong> of&nbsp;pseudomembranous colitis,&nbsp;depending on its severity.&nbsp;</span></p>\n<p><span data-preserver-spaces=\"true\">Other options:</span></p>\n<p>Option A:<strong> Daptomycin</strong>&nbsp;may cause<strong>&nbsp;allergic pneumonitis&nbsp;</strong>in patients receiving prolonged therapy for more than 2 weeks.</p>\n<p>Option D:&nbsp;<strong>Chloramphenicol</strong>&nbsp;is mainly associated with adverse effects such as bone marrow suppression, and hypersensitivity reactions. When given to infants, it may cause&nbsp;<strong>grey baby syndrome.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9b54105baee543799b70ec3b535186c4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 65-year-old male patient complains of intermittent epigastric pain that is worse with food intake over the past 3 months. On further evaluation, he was found to have peptic ulcer disease caused by H. pylori. Which of the following drugs is not used in H. pylori eradication?",
    "choices": [
      {
        "id": 1,
        "text": "Metronidazole"
      },
      {
        "id": 2,
        "text": "Omeprazole"
      },
      {
        "id": 3,
        "text": "Mosapride"
      },
      {
        "id": 4,
        "text": "Amoxicillin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Mosapride </strong>is a<strong> gastrokinetic 5-HT4 agonist</strong> and is not indicated in H. pylori eradication.</p>\n<p><strong>Proton pump inhibitors </strong>like omeprazole or<strong> H2 receptor antagonists</strong> like cimetidine are usually present in anti-H. pylori regimens for reducing the pH of gastric secretions.</p>\n<p>Antimicrobials are used in the treatment of H. pylori infections as well. These include</p>\n<ul>\n<li>Clarithromycin</li>\n<li>Metronidazole&nbsp;</li>\n<li>Tetracycline</li>\n<li>Amoxicillin&nbsp;</li>\n</ul>\n<p><span data-preserver-spaces=\"true\">H.pylori is a&nbsp;<strong>gram-negative</strong>&nbsp;motile rod with flagella. It has a unique feature of urease production, which&nbsp;is helpful in diagnosis. The&nbsp;<strong>sole source</strong>&nbsp;of H.pylori is&nbsp;<strong>human gastric mucus.</strong>&nbsp;</span><span data-preserver-spaces=\"true\">In some patients, H.pylori causes&nbsp;<strong>mild acute gastritis</strong>&nbsp;lasting for about two weeks. In others, it can cause&nbsp;<strong>peptic ulcer disease, </strong>which may lead to<strong> chronic atrophic gastritis </strong>in<strong> later stages</strong>. This is a risk factor for gastric malignancies like&nbsp;<strong>adenocarcinoma</strong>&nbsp;and&nbsp;<strong>mucosa-associated lymphoid tissue (MALT) lymphomas</strong>.&nbsp;</span></p>\n<p>Many regimens generally indicated for eradication of H. pylori infections are given below.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are an intern and you see a 67-year-old male patient with a history of liver cirrhosis present to the emergency department with massive hematemesis. He is hemodynamically stable now after the first-line management. Which of the following agents are useful in the medical treatment of variceal bleeding?",
    "choices": [
      {
        "id": 1,
        "text": "Octreotide"
      },
      {
        "id": 2,
        "text": "Pantoprazole"
      },
      {
        "id": 3,
        "text": "Somatotropin"
      },
      {
        "id": 4,
        "text": "Dexamethasone"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Octreotide</strong> is a useful agent in treating <strong>variceal bleeding</strong>.</p>\n<p>Octreotide is a <strong>somatostatin analog</strong> and controls variceal bleeding by</p>\n<ul>\n<li>Reducing hepatic and azygous blood flow</li>\n<li>Reducing hepatic venous wedge pressure</li>\n<li>Constricting splanchnic arterioles: direct action on vascular smooth muscle.</li>\n<li>Decreasing hyperdynamic circulatory syndrome of portal hypertension by inhibiting the release of contributing peptides.</li>\n</ul>\n<p>Initial management of variceal bleeding involves the following:&nbsp;</p>\n<ul>\n<li>Admission to the intensive care unit</li>\n<li>Placement of&nbsp;<strong>two large-bore peripheral cannulae</strong></li>\n<li>Blood transfusion</li>\n<li><strong>Correction of coagulopathy</strong>&nbsp;with Vitamin K and tranexamic acid</li>\n<li><strong>Octreotide</strong>, a somatostatin analog or&nbsp;<strong>terlipressin</strong>, a splanchnic vasoconstrictor</li>\n<li>Prophylactic antibiotic</li>\n<li>Endotracheal intubation for airway protection if bleeding is uncontrolled</li>\n<li>Upper gastrointestinal endoscopy</li>\n</ul>\n<p>Ultimately, liver transplantation is the only way to definitively treat portal hypertension and variceal bleeding.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient diagnosed with peptic ulcer disease is being treated with sucralfate. Which of the following adverse effects can be seen in the patient?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin B12 deficiency"
      },
      {
        "id": 2,
        "text": "Increased risk of bone fractures"
      },
      {
        "id": 3,
        "text": "Gastric bezoars"
      },
      {
        "id": 4,
        "text": "Hypergastrinemia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Gastric bezoar</strong> can be seen in a patient taking sucralfate. Sucralfate produces a <strong>viscous gel that has a &lsquo;sticky nature&rsquo;</strong>. The sticky nature may be responsible for gastric bezoars, particularly in those with gastroparesis.</p>\n<div class=\"page\" title=\"Page 919\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Sucralfate is composed of a sulfate of sucrose with Al(OH)<sub>3.&nbsp;</sub>It&nbsp;undergoes cross-linking to produce a viscous polymer that sticks to epithelial cells and ulcers in acidic environments. It inhibits hydrolysis of the mucosal proteins by pepsin.</p>\n<p>It is used in the prophylaxis of stress ulcers, and in conditions where mucosal ulceration is not responding to acid suppression.</p>\n<p>Adverse effects of sucralfate include constipation and bezoar formation. It may inhibit absorption of other drugs like digoxin, cimetidine, ketoconazole, and fluoroquinolone antibiotics due to the viscous layer formed in the stomach. Hence it should be taken at least 2 hours after administration if these drugs.</p>\n</div>\n</div>\n</div>\n</div>\n<p>The other options:</p>\n<p><strong>Vitamin B12 deficiency </strong>and<strong> increased risk of bone fractures </strong>are side effects of<strong>&nbsp;proton pump inhibitors </strong>(PPIs). However, their clinical significance has not been proven yet.&nbsp;<strong>Hypergastrinemia</strong> is more commonly seen with<strong> PPIs </strong>than H2 receptor antagonists.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young patient was found to have triglyceride levels of 600 mg/ dL. His LDL levels are slightly lower than normal and HDL levels are reduced. His mother too has elevated triglycerides with reduced levels of LDL and HDL cholesterol. The patient appears healthy, has a normal BMI, and has no history of coronary heart disease in his family. Which of the following drugs will be beneficial for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Fenofibrate"
      },
      {
        "id": 2,
        "text": "Colestipol"
      },
      {
        "id": 3,
        "text": "Cholestyramine"
      },
      {
        "id": 4,
        "text": "Ezetimibe"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given clinical scenario, the patient has elevated levels of triglycerides with low levels of LDL and HDL cholesterol. This pattern is also seen in his mother. Therefore, it is most likely to be <strong>familial hypertriglyceridemia.</strong>&nbsp;Since the patient does not have risk factors for coronary heart disease, <strong>fenofibrate</strong> will be beneficial in reducing triglyceride levels.</p>\n<p>Familial hypertriglyceridemia occurs due to a defect in the lipolysis of the triglyceride-rich lipoproteins (TRLs). As a result of this, the levels of fasting <strong>triglyceride levels are elevated.</strong> Plasma LDL levels are reduced due to the defective conversion of triglyceride-rich lipoproteins to LDL. Identification of hypertriglyceridemia in first-degree relatives helps in the diagnosis.</p>\n<p>Hypertriglyceridemia can also be secondary due to&nbsp;intake of simple carbohydrates, obesity, insulin resistance, alcohol use, and estrogen treatment.</p>\n<p>Initial management involves exercise and dietary management (restriction of fatty food, avoidance of alcohol, estrogen-containing medications, etc)</p>\n<p>If the levels of the triglycerides are <strong>&gt;500 mg/dL</strong> despite lifestyle changes, then <strong>fibrates</strong> and <strong>fish oil</strong> can be used to reduce the levels and decrease the risk of pancreatitis.&nbsp;If the patient has risk factors for coronary heart disease, then <strong>statin</strong> therapy will be beneficial.</p>\n<p>&nbsp;</p>\n<table style=\"height: 173px; width: 933px;\">\n<tbody>\n<tr>\n<td style=\"width: 190px;\"><strong>Class</strong></td>\n<td style=\"width: 190px;\"><strong>HMG- CoA reductase inhibitors (statins)</strong></td>\n<td style=\"width: 162px;\"><strong>Fibrates</strong></td>\n<td style=\"width: 220px;\"><strong>Niacin</strong></td>\n<td style=\"width: 191px;\"><strong>Bile acid-binding resins</strong></td>\n<td style=\"width: 334px;\"><strong>Ezetimibe</strong></td>\n</tr>\n<tr>\n<td style=\"width: 190px;\"><strong>Important examples</strong></td>\n<td style=\"width: 190px;\">\n<p class=\"p1\">Lovastatin, atorvastatin, fluvastatin, pravastatin, simvastatin, rosuvastatin, pitavastatin</p>\n</td>\n<td style=\"width: 162px;\">\n<p class=\"p1\">Gemfibrozil and fenofibrate</p>\n</td>\n<td style=\"width: 220px;\">Niacin</td>\n<td style=\"width: 191px;\">&nbsp;\n<p class=\"p1\">Colestipol, cholestyramine, and colesevelam</p>\n</td>\n<td style=\"width: 334px;\">Ezetimibe</td>\n</tr>\n<tr>\n<td style=\"width: 190px;\"><strong>Mechanism of action</strong></td>\n<td style=\"width: 190px;\">\n<p class=\"p1\">Inhibits HMG-CoA reductase</p>\n</td>\n<td style=\"width: 162px;\">\n<p class=\"p1\">PPAR-<span class=\"s1\">&alpha; mediated increased lipolysis</span></p>\n</td>\n<td style=\"width: 220px;\">Decreases the production of VLDLs and decreases the catabolism of HDLs</td>\n<td style=\"width: 191px;\">increase the excretion of bile acids. This results in increased conversion of cholesterol mobile acids by the liver&nbsp;</td>\n<td style=\"width: 334px;\">inhibits intestinal sterol absorption</td>\n</tr>\n<tr>\n<td style=\"width: 190px;\"><strong>Major effects on lipoprotein levels</strong></td>\n<td style=\"width: 190px;\">\n<p>Reduces LDL levels</p>\n</td>\n<td style=\"width: 162px;\">\n<p>Reduces triglyceride levels</p>\n<p>A moderate increase in HDL levels</p>\n</td>\n<td style=\"width: 220px;\">\n<p>Reduces triglycerides,&nbsp; LDL, and lipoprotein a levels</p>\n<p>Significant increase in HDL levels</p>\n</td>\n<td style=\"width: 191px;\">Reduces LDL levels&nbsp;</td>\n<td style=\"width: 334px;\">\n<p>Reduces LDL cholesterol</p>\n<p>Minimal increase in HDL level</p>\n<p>Also decreases the absorption of phytosterols</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 190px;\"><strong>Important side effects</strong></td>\n<td style=\"width: 190px;\">&nbsp;\n<p class=\"p1\">Elevations of serum aminotransferase activity</p>\n<p class=\"p1\">Elevation of creatine kinase activity</p>\n<p class=\"p1\">Myopathy</p>\n</td>\n<td style=\"width: 162px;\">\n<p class=\"p1\">rashes, gastrointestinal symptoms, myopathy, arrhythmias, hypokalemia, elevated aminotransferases or alkaline phosphatase</p>\n&nbsp;</td>\n<td style=\"width: 220px;\">\n<p>Cutaneous vasodilation</p>\n<p>Elevations in aminotransferases levels&nbsp;</p>\n</td>\n<td style=\"width: 191px;\">\n<p>Constipation</p>\n<p>Bloating&nbsp;</p>\n</td>\n<td style=\"width: 334px;\">\n<p>reversible hepatic function impairment</p>\n<p>Rarely myositis</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old female patient presented with the following finding. Her medical history includes hypertension for which she has been taking regular medications for the past 3 months. Which of the following medication is most likely to be associated with this finding?",
    "choices": [
      {
        "id": 1,
        "text": "Enalapril"
      },
      {
        "id": 2,
        "text": "Telmisartan"
      },
      {
        "id": 3,
        "text": "Amlodipine"
      },
      {
        "id": 4,
        "text": "Hydrochlorthiazide"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shows<strong> pitting pedal edema</strong> in a hypertensive patient. <strong>Calcium channel blockers (CCBs)</strong> like <strong>amlodipine</strong> are most likely to be associated with peripheral edema.</p>\n<p>The frequency of CCB- induced peripheral edema is both <strong>drug-specific</strong> (i.e more potent drugs like amlodipine will be associated with higher rates of developing edema) and <strong>dose-dependent</strong> (i.e incidence of edema increases with an increase in drug dosage and chronicity of its usage). It is more common among <strong>females.</strong></p>\n<p>CCB-induced peripheral edema occurs due to a disproportionate decrease in the&nbsp;arteriolar resistance than in the venous circulation, resulting in increased&nbsp;hydrostatic pressure in the precapillary circulation. This leads to a fluid shift&nbsp;into the interstitial compartment causing edema.</p>\n<p>Treatment:</p>\n<ul>\n<li>Dose reduction.</li>\n<li>Interclass switching of CCB - switch to non-dihydropyridines like verapamil, and diltiazem.</li>\n<li>Addition of a venodilator - ACE inhibitor, ARBs, Nitrates.</li>\n<li>Others - compression stockings, avoiding prolonged upright position.</li>\n<li>Definitive treatment would be discontinuation of the CCB and switching to another class of antihypertensives.</li>\n</ul>\n<p>Other options:</p>\n<p>Option A: Common side effects of <strong>ACE inhibitors</strong> like <strong>enalapril </strong>include hypotension, hyperkalemia, dry cough, rashes, urticaria, dysgeusia, gastrointestinal upset, headache, and dizziness.</p>\n<p>Option B:<strong>&nbsp;Telmisartan</strong>, an angiotensin receptor blocker (<strong>ARBs)</strong>, causes adverse effects such as hypotension, hyperkalemia, headache, gastrointestinal upset, and dizziness.</p>\n<p>Option D: Adverse effects of <strong>thiazide diuretics</strong> like <strong>hydrochlorothiazide</strong> are hypokalemia, hyponatremia, hyperglycemia, hyperuricemia, hypercalcemia, rashes,&nbsp;headache, gastrointestinal upset, and dizziness.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0a404cea4a154c8d89713520faedfb97.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old female patient was diagnosed with parkinsonism. She was commenced on combination therapy with co-careldopa. What is the rationale behind this combination therapy?",
    "choices": [
      {
        "id": 1,
        "text": "To decrease the plasma half life of levodopa"
      },
      {
        "id": 2,
        "text": "To inhibit the metabolism of levodopa in brain"
      },
      {
        "id": 3,
        "text": "To promote the metabolism of levodopa in periphery"
      },
      {
        "id": 4,
        "text": "To reduce the systemic side effects of levodopa"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The rationale behind the combination therapy of<strong> levodopa</strong> with a peripheral DOPA decarboxylase inhibitor like <strong>carbidopa (co-careldopa)</strong> is that inhibition of the metabolism&nbsp;of levodopa (i.e. conversion of levodopa into dopamine) in the peripheral circulation <strong>decreases the systemic side effects</strong> of&nbsp;levodopa, like vomiting.</p>\n<p>Peripheral dopa decarboxylase inhibitors (carbidopa) do not cross the blood-brain barrier. Therefore, they only <strong>inhibit </strong>the<strong> conversion of levodopa</strong> into dopamine in the<strong> periphery</strong> and <strong>not in the brain</strong>. This leads to the increased plasma half-life of levodopa, and therefore, lower doses of levodopa can be prescribed.</p>\n<p>Benefits of combination therapy:</p>\n<ul>\n<li>This therapy inhibits the metabolism of levodopa in the periphery, leading to <strong>increased plasma half-life</strong> of levodopa.</li>\n<li>Combination therapy reduces adverse effects like gastrointestinal side effects, orthostatic hypotension, and cardiac arrhythmias.</li>\n<li>This therapy allows for increased availability of levodopa in the brain.</li>\n<li>Fluctuation in motor control, where the patient is alternately well and disabled, occurs on prolonged therapy with levodopa. This type of \"<strong>on-off</strong>\" effect is <strong>reduced</strong> in combination therapy because of sustained dopamine levels in the brain.</li>\n<li><strong>Pyridoxine</strong> enhances the peripheral metabolism of levodopa. Hence, combination therapy with carbidopa nullifies the interaction of pyridoxine with levodopa metabolism.</li>\n<li><strong>&nbsp;</strong>A<strong> higher&nbsp;degree of improvement</strong> is seen&nbsp;in combination therapy than in monotherapy with levodopa.</li>\n</ul>\n<p>Demerits of combination therapy:</p>\n<p>This therapy decreases the concentration of levodopa in the periphery, but increases the concentration of levodopa reaching the brain.<strong> Involuntary movements </strong>and <strong>behavioral adverse effects</strong> like confusion, hallucinations,&nbsp;nightmares, and delusions are <strong>not reduced </strong>after the addition of carbidopa<strong>. </strong>In fact, they are <strong>increased</strong>&nbsp;in patients who are taking levodopa <strong>with peripheral carboxylase</strong> inhibitors.<strong>&nbsp;</strong>This is because <strong>higher</strong> levels of <strong>dopamine</strong> are formed in CNS.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with recent-onset primary generalized epilepsy develops a skin reaction due to phenytoin sodium. What is the most appropriate course of action?",
    "choices": [
      {
        "id": 1,
        "text": "Switch to clonazepam"
      },
      {
        "id": 2,
        "text": "Stop and restart phenytoin sodium after two weeks"
      },
      {
        "id": 3,
        "text": "Switch to sodium valproate"
      },
      {
        "id": 4,
        "text": "Switch to ethosuximide"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: left;\"><strong>Hypersensitivity reaction</strong> to<strong> phenytoin&nbsp;</strong>warrants <strong>discontinuation</strong> of the drug.&nbsp;<strong>Switching</strong> to <strong>sodium valproate</strong> is the most appropriate course of action for this patient.&nbsp;</p>\n<p style=\"text-align: left;\"><strong>Sodium valproate</strong> is one of the first-line agents indicated for<strong> GTCS. Clonazepam</strong> and <strong>ethosuximide</strong> are primarily used in <strong>absence seizures</strong> and are not indicated for GTCS.&nbsp;</p>\n<p style=\"text-align: left;\">Clonazepam is indicated as <strong>adjunctive therapy</strong> in the absence seizures when first-line agents (ethosuximide, sodium valproate, lamotrigine) fail to control the seizures adequately.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old woman gave birth to a child with the features shown in the given image. On examination, the child had brittle bones, and x-ray scans revealed stippled epiphyses. Which of the following drugs is most likely to be implicated in causing this teratogenic condition?",
    "choices": [
      {
        "id": 1,
        "text": "Alcohol"
      },
      {
        "id": 2,
        "text": "Topiramate"
      },
      {
        "id": 3,
        "text": "Warfarin"
      },
      {
        "id": 4,
        "text": "Lithium"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><span data-preserver-spaces=\"true\">The given image shows a depressed nasal bridge (saddle nose). This image along with the stippling of bone epiphyses points to <strong>fetal warfarin syndrome </strong>or<strong> warfarin embryopathy</strong>.&nbsp;</span></p>\n<p><strong><span data-preserver-spaces=\"true\">Features:</span></strong></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Repeated abortions</span></li>\n<li><span data-preserver-spaces=\"true\">CNS abnormalities</span></li>\n<li><span data-preserver-spaces=\"true\">Depressed nasal bridge/absent nasal bone/saddle nose at birth</span></li>\n<li><span data-preserver-spaces=\"true\">Bleeding diathesis at birth</span></li>\n<li><span data-preserver-spaces=\"true\">Growth retardation - hypoplasia of nose, eye sockets, and long bones with stippling of epiphyses&nbsp;</span></li>\n</ul>\n<p><span data-preserver-spaces=\"true\"><strong>Anticoagulation in pregnancy:</strong></span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Warfarin: Although safe for the mother, it can lead to&nbsp;</span><strong><span data-preserver-spaces=\"true\">warfarin embryopathy</span></strong><span data-preserver-spaces=\"true\">, miscarriage, IUGR, and stillbirths.</span></li>\n<li><span data-preserver-spaces=\"true\">Heparin: It is safe for the fetus</span><span data-preserver-spaces=\"true\">&nbsp;but is less effective than warfarin.</span></li>\n<li><span data-preserver-spaces=\"true\">LMWH: It is inadequate, and ACOG does not recommend its use in pregnant women with prosthetic heart valves.</span></li>\n</ul>\n<table class=\"t1\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\"><strong>Period of gestation</strong></p>\n</td>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\"><strong>Anticoagulant</strong></p>\n</td>\n</tr>\n<tr>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">Till 12 completed weeks</p>\n</td>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">LMWH or UFH</p>\n</td>\n</tr>\n<tr>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">13 to 36 weeks</p>\n</td>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">Warfarin</p>\n</td>\n</tr>\n<tr>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">36 weeks to 6 hours before delivery</p>\n</td>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">LMWH or UFH</p>\n</td>\n</tr>\n<tr>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">6 hours after vaginal and 24 hours after cesarian section</p>\n</td>\n<td class=\"td1\" valign=\"top\">\n<p class=\"p1\">LMWH or UFH (ACOG recommendation)</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><span data-preserver-spaces=\"true\">If delivery occurs while the anticoagulant is still effective, and excessive bleeding happens, then <strong>protamine sulfate</strong> is given intravenously.&nbsp;</span></p>\n<p><span data-preserver-spaces=\"true\">Anticoagulation of pregnant women:</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">The patient taking warfarin should discontinue it as soon as pregnancy is diagnosed and replace it with&nbsp;</span><strong><span data-preserver-spaces=\"true\">heparin 5,000 units twice daily subcutaneously up to the 12th week of gestation</span></strong><span data-preserver-spaces=\"true\">.&nbsp;</span></li>\n<li><span data-preserver-spaces=\"true\">Heparin is then replaced by&nbsp;</span><strong><span data-preserver-spaces=\"true\">a warfarin tablet of 3 mg daily</span></strong><span data-preserver-spaces=\"true\">&nbsp;to be taken at the same time each day and continued&nbsp;</span><strong><span data-preserver-spaces=\"true\">up to 36 weeks </span></strong>in patients with a high risk of thrombosis.</li>\n<li><span data-preserver-spaces=\"true\">Thereafter, warfarin is replaced by&nbsp;</span><strong><span data-preserver-spaces=\"true\">heparin, which is discontinued 6 hours</span></strong><span data-preserver-spaces=\"true\">&nbsp;just before delivery.</span></li>\n<li><span data-preserver-spaces=\"true\">Heparin (unfractionated or LMWH) is restarted 6 hours after vaginal delivery and 24 hours after the cesarean section.</span></li>\n<li><span data-preserver-spaces=\"true\">Unfractionated heparin (UFH), LMWH, and warfarin therapy are&nbsp;</span><strong><span data-preserver-spaces=\"true\">not contraindicated</span></strong><span data-preserver-spaces=\"true\">&nbsp;in breastfeeding.</span></li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a62c3ac562af45468086387959c3bfa1.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0d669e35bc1e4139bd255e4387c48c61x1280x1476.JPEG"
    ]
  },
  {
    "text": "A patient scheduled for a CABG procedure receives preoperative heparin for anticoagulation. During the surgery, the patient starts bleeding massively and there is a drop in BP. Which of the following would you use to manage this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Protamine sulfate"
      },
      {
        "id": 2,
        "text": "Prothrombin complex concentrate"
      },
      {
        "id": 3,
        "text": "Aminocaproic acid"
      },
      {
        "id": 4,
        "text": "Tranexamic acid"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p style=\"text-align: justify;\"><strong>Protamine sulfate </strong>is the drug used to treat life-threatening, <strong>heparin-induced bleeding</strong>.</p>\n<p style=\"text-align: justify;\">It is a mixture of basic polypeptides isolated from <strong>salmon sperm</strong>.\u00a0It binds to acidic heparin with high affinity and neutralizes anticoagulant activity. The resultant protamine-heparin complexes are cleared. Protamine binds only to <strong>long heparin </strong>molecules (UFH). Therefore, protamine only <strong>partially reverses</strong>\u00a0the activity of <strong>LMWH</strong> and has <strong>no effect</strong> on\u00a0<strong>fondaparinux</strong>.\u00a0</p>\n<p class=\"p1\" style=\"text-align: justify;\">It is most commonly used to neutralize heparin-induced anticoagulation after separation from cardiopulmonary bypass. It is also utilized in the setting of dialysis, invasive vascular procedures, and acute ischemic strokes.</p>\n<p class=\"p1\" style=\"text-align: justify;\">Note: Protamine sulfate has<strong> anticoagulant activity</strong> at <strong>higher doses</strong> and hence, only small amounts of protamine (1mg/100 units of heparin) are used for heparin-induced bleeding.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 54-year-old woman presented to the clinic with difficulty in vision. She is a known case of rheumatoid arthritis for which she has been on medication for many years along with drugs for the management of her diabetes and hypertension. Fundus examination of the patient shows the following finding. Which of the following drug could have caused this finding?",
    "choices": [
      {
        "id": 1,
        "text": "Sulfonylurea"
      },
      {
        "id": 2,
        "text": "Captopril"
      },
      {
        "id": 3,
        "text": "Hydroxychloroquine"
      },
      {
        "id": 4,
        "text": "Nonsteroidal anti-inflammatory drugs"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image&nbsp;depicts the<strong> bull&rsquo;s eye maculopathy </strong>which can be caused by<strong> hydroxychloroquine</strong>.<strong>&nbsp;</strong>This patient's history of being treated for rheumatoid arthritis is the most probable reason for the lesion.</p>\n<p>Bull's-eye maculopathy refers to the ophthalmoscopic appearance of a<strong> central area</strong> of<strong> retinal pigment epithelial depigmentation</strong> surrounded by relatively normal retinal pigment epithelium, giving a \"bulls-eye\" appearance to the macula.</p>\n<p><strong>Hydroxychloroquine</strong>, which is generally used for the treatment of rheumatoid arthritis, toxicity causes bull&rsquo;s eye maculopathy. Chloroquine binds to melanin in the retinal pigment epithelium,&nbsp;causing&nbsp;cytotoxic effects.</p>\n<p>Causes of bull&rsquo;s eye maculopathy include:</p>\n<ul>\n<li>Chloroquine</li>\n<li>Hydroxychloroquine</li>\n<li>Congenital cone dystrophy</li>\n</ul>\n<p>Other adverse effects of chloroquine:</p>\n<ul>\n<li>Nail bed and mucosal membrane discoloration</li>\n<li>Irreversible retinopathy</li>\n<li>Ototoxicity</li>\n<li>Toxic myopathy</li>\n<li>Cardiopathy</li>\n<li>Peripheral neuropathy</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1a8b96202a0d4910a43d7c1f31323a4b.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c699ca5e02ed49288892c025fec28dcfx500x333.PNG"
    ]
  },
  {
    "text": "A 30-year-old female patient with early morning stiffness and chronic pain over small joints was diagnosed with rheumatoid arthritis. She has been on drugs for the past few years, without any improvement. Now, it has been decided to start her on biological agents. Which of the following will not be used in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "IL-17A antagonist"
      },
      {
        "id": 2,
        "text": "IL-1 receptor antagonist"
      },
      {
        "id": 3,
        "text": "IL-6 receptor antagonist"
      },
      {
        "id": 4,
        "text": "TNF-alpha antagonist"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>IL-17A antagonist</strong>&nbsp;is not used in the treatment of rheumatoid arthritis.</p>\n<p>IL-17A antagonists<strong>&nbsp;</strong>(secukinumab, ixekizumab) can be used in the treatment of moderate to severe plaque or scalp <strong>psoriasis</strong>.</p>\n<p>All the other 3 are&nbsp;biological <strong>D</strong>isease <strong>M</strong>odifying <strong>A</strong>nti-<strong>R</strong>heumatoid <strong>Drugs</strong>&nbsp;(<strong>DMARDs</strong>) used in the treatment of rheumatoid arthritis. All biological DMARDs <strong>downregulate the immune system</strong> and can lead to adverse effects like <strong>opportunistic infections</strong> and the flaring of latent TB.</p>\n<p>Other options:</p>\n<p>Option B:&nbsp;IL-1 receptor antagonist - anakinra</p>\n<p>Option C:&nbsp;IL-6 receptor antagonist - tocilizumab and sarilumab</p>\n<p>Option D:&nbsp;TNF&nbsp;&alpha; antagonist - adalimumab, golimumab, etanercept, etc.,</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A pregnant female at 36 weeks gestation, presents with palpitations, protrusion of the eyeball, and heat intolerance. On blood investigations, it was found that she had increased T3 and T4 levels and decreased TSH levels.  Which of the following should be the next step in the management of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Methimazole"
      },
      {
        "id": 2,
        "text": "Thyroidectomy"
      },
      {
        "id": 3,
        "text": "Propylthiouracil"
      },
      {
        "id": 4,
        "text": "Radioactive iodine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given clinical scenario, the most likely diagnosis is <strong>thyrotoxicosis</strong>. As she is in her third trimester, the drug of choice for the treatment of thyrotoxicosis is <strong>methimazole.</strong></p>\n<p>Thyrotoxicosis during pregnancy is usually&nbsp;controlled by thionamide drugs. Propylthiouracil was&nbsp;preferred previously because it partially inhibits the conversion of T4 to T3 and crosses the placenta less readily than methimazole. However, since it has a higher risk of causing <strong>propylthiouracil-associated liver failure in pregnancy</strong>, methimazole is prescribed according to guidelines from the second trimester.&nbsp;Methimazole is usually avoided in the first trimester due to <strong>methimazole-associated embryopathy.</strong>&nbsp;</p>\n<p>Other options:</p>\n<p>Option B: A <strong>subtotal thyroidectomy</strong> is done once the hyperthyroidism is medically controlled. It is usually avoided during pregnancy, however, may be done in some cases where it can't be controlled via medication.</p>\n<p>Option D: Radioactive iodine is contraindicated in pregnant women as it may cause <strong>fetal thyroid gland destruction</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 62-year-old woman presents with complaints of fatigue. She is a known case of type 2 diabetes mellitus on treatment. On examination, there is pallor and knuckle pigmentation. Which of the following drugs could have caused her condition?",
    "choices": [
      {
        "id": 1,
        "text": "Gliclazide"
      },
      {
        "id": 2,
        "text": "Acarbose"
      },
      {
        "id": 3,
        "text": "Metformin"
      },
      {
        "id": 4,
        "text": "Rosiglitazone"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Metformin</strong> can cause <strong>vitamin B12 deficiency</strong> which manifests as <strong>megaloblastic anemia</strong>&nbsp;(pallor, fatigue) with <strong>knuckle pigmentation</strong>.</p>\n<p>The most common side effect of metformin is <strong>GI intolerance</strong> as nausea, bloating, abdominal cramps and diarrhoea.</p>\n<p>Note: The exact reason why metformin causes vitamin B12 deficiency is not known.&nbsp;</p>\n<p>The proposed mechanisms include:</p>\n<ul>\n<li>Alterations in small bowel motility, which stimulates bacterial overgrowth and consequential vitamin B12 deficiency</li>\n<li>Competitive inhibition or inactivation of vitamin B12 absorption</li>\n<li>Alterations in intrinsic factor (IF) levels and interaction with the cubilin endocytic receptor.</li>\n<li>Inhibition of the calcium-dependent absorption of the vitamin B12-IF complex at the terminal ileum.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements about oral contraceptive pills is true?",
    "choices": [
      {
        "id": 1,
        "text": "Progesterone is resposible for thromboembolism"
      },
      {
        "id": 2,
        "text": "It is protective against ovarian cancer"
      },
      {
        "id": 3,
        "text": "OCP are used in treatment mastalgia"
      },
      {
        "id": 4,
        "text": "Rifamipicin decreases the metabolism of OCP"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Oral contraceptive pills (<strong>OCP</strong>) protect against <strong>ovarian cancer.</strong>\u00a0</p>\n<p>This benefit is thought to be due to the prolonged <strong>suppression</strong> <strong>of gonadotropin stimulation</strong> of the ovary on long-term use of OCPs.\u00a0</p>\n<p>Other benefits of oral contraceptive pills:</p>\n<ul>\n<li><strong>Lesser</strong> incidence of<strong> endometrial carcinoma</strong> due to progestin component in OCP</li>\n<li>Regularisation of menstrual cycles results in relief of dysmenorrhea and menorrhagia</li>\n<li>Reduced incidence of fibrocystic breast disease and ovarian cysts</li>\n<li>Endometriosis and pelvic inflammatory disease are improved</li>\n</ul>\n<p>Option A: The <strong>estrogen</strong> component of combined oral contraceptive pills is mainly responsible for venous thromboembolism.</p>\n<p>Option C: OCP is not used in the treatment of mastalgia.\u00a0<strong>Mastalgia,</strong> chloasma, and breakthrough bleeding are <strong>known side effects</strong> of oral contraceptive pills.</p>\n<p>Option D: OCPs are metabolized by CYP3A4 enzymes. <strong>Rifampicin</strong> is a <strong>strong inducer</strong> of <strong>CYP3A4</strong>. Hence, if administered together, rifampicin can cause\u00a0<strong>enhanced metabolism </strong>of OCPs and may lead to<strong> contraceptive failure.</strong>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 57-year-old woman is diagnosed with HER 2/neu positive breast cancer. Which of the following monoclonal antibodies is indicated for the management of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Panitumumab"
      },
      {
        "id": 2,
        "text": "Cetuximab"
      },
      {
        "id": 3,
        "text": "Trastuzumab"
      },
      {
        "id": 4,
        "text": "Bevacizumab"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Trastuzumab</strong> is indicated for <strong>adjuvant</strong> therapy in early and metastatic <strong>HER2 positive breast cancer</strong>.&nbsp;</p>\n<p>Trastuzumab is a humanized monoclonal antibody that binds to the extracellular domain of HER2/Neu.</p>\n<div class=\"page\" title=\"Page 1213\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Human epidermal growth factor receptor 2 tyrosine kinase receptor (<strong>HER-2-TK</strong>) <strong>inhibitors</strong> are:</p>\n<ul>\n<li>Lapatinib</li>\n<li>Neratinib</li>\n</ul>\n<p><strong>Anti-Her-2 monoclonal antibodies</strong> are:</p>\n<ul>\n<li>Trastuzumab</li>\n<li>Pertuzumab</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following antineoplastic agents is extracted from the plant shown below?",
    "choices": [
      {
        "id": 1,
        "text": "Epothilones"
      },
      {
        "id": 2,
        "text": "Camptothecin analogs"
      },
      {
        "id": 3,
        "text": "Vinca alkaloids"
      },
      {
        "id": 4,
        "text": "Taxanes"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shown is of the<strong> periwinkle plant&nbsp;</strong>(<em>Catharanthus roseus)</em>. Vinca alkaloids like vinblastine and vincristine are extracted from this plant.</p>\n<p>Sources&nbsp;of few other drugs are:</p>\n<ul>\n<li>Epothilones - Myxobacterium <em>Sorangium cellulosum</em></li>\n<li>Camptothecin analogs -&nbsp;<em>Camptotheca acuminata&nbsp;</em>tree</li>\n<li>Taxanes - bark of the western yew tree.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3028fcb0a53b4536a576398ec8cbb459.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Arrange the following formulations of amphotericin B (AMB) according to the increasing order of nephrotoxicity.",
    "choices": [
      {
        "id": 1,
        "text": "Conventional-AMB < Amphotericin B lipid complex < Liposomal amphotericin B"
      },
      {
        "id": 2,
        "text": "Liposomal amphotericin B < Conventional-AMB < Amphotericin B lipid complex"
      },
      {
        "id": 3,
        "text": "Conventional-AMB < Liposomal amphotericin B < Amphotericin B lipid complex"
      },
      {
        "id": 4,
        "text": "Liposomal amphotericin B < Amphotericin B lipid complex < Conventional-AMB"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The correct order of nephrotoxicity with amphotericin B formulations is <strong>liposomal amphotericin B &lt; amphotericin B lipid complex &lt; conventional-amphotericin B.</strong></p>\n<p>Nephrotoxicity with&nbsp;amphotericin B:</p>\n<p>All <strong>lipid formulations of amphotericin B</strong> are <strong>less nephrotoxic</strong> than conventional amphotericin B.&nbsp;Liposomal amphotericin B is less nephrotoxic than amphotericin B lipid complex, especially in patients with a higher risk of nephrotoxicity. Azotemia is seen in 80% of cases with C-AMB. Renal tubular acidosis and renal wasting of potassium and magnesium are seen. Nephrotoxicity can be <strong>reduced by saline loading.&nbsp;</strong></p>\n<p>Other adverse effects:</p>\n<p><strong>Infusion-related reactions</strong> - It is most prominent with amphotericin B&nbsp;colloidal dispersion. Fever and chills following IV injection is a major acute reactions. Tachypnea, hypotension, or respiratory stridor may be also seen. Meperidine is used to shorten the reaction.</p>\n<p><strong>Hypochromic normocytic anemia</strong> may be seen due to decreased erythropoietin.</p>\n<p>Headache, nausea, malaise, vomiting, and phlebitis at the site of injection is also seen.</p>\n<p>Arachnoiditis may be seen with intrathecal injections.</p>\n<p>Formulations of amphotericin B:</p>\n<p><strong>C-AMB(Conventional&nbsp;amphotericin B)</strong>: It is formulated with bile salt deoxycholate and is given as an intravenous infusion.</p>\n<p><strong>ABCD(Amphotericin B colloidal dispersion)</strong>: It is formed by equimolar concentrations of amphotericin B and cholesteryl sulfate.</p>\n<p><strong>L-AMB(Liposomal&nbsp;amphotericin B)</strong>: Here amphotericin B is incorporated within a small liposomal vesicle.</p>\n<p><strong>ABLC(Amphotericin B lipid complex)</strong>: It is a complex of amphotericin B with two phospholipids.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old woman, in the first trimester of pregnancy from a tribal area, presented with fever and chills for the last 3 days. After examination of the peripheral smear given below, chloroquine was started but there was no improvement in the patient's condition. Which of the following is preferred for treating this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Quinine plus clindamycin"
      },
      {
        "id": 2,
        "text": "Quinine plus doxycycline"
      },
      {
        "id": 3,
        "text": "Artemether plus lumefantrine"
      },
      {
        "id": 4,
        "text": "Artesunate plus pyrimethamine-sulfadoxine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Quinine plus clindamycin</strong> is <strong>preferred</strong> for the treatment of <strong>chloroquine-resistant falciparum malaria</strong> in the <strong>1st trimester of pregnancy</strong>.</p>\n<p>The given clinical vignette is suggestive of a <strong>chloroquine-resistant</strong>\u00a0<strong>malarial infection</strong>. The image given shows ring forms/ early trophozoites in erythrocytes, which are binucleate (double chromatin) and resemble stereo headphones in appearance, characteristic of malaria caused by<strong><em> P. falciparum</em>.</strong>\u00a0</p>\n<p>Worldwide most infections with\u00a0<em>P</em>. f<em>alciparum</em> malaria are resistant to chloroquine. In<strong>\u00a0</strong>the<strong> 1st trimester, </strong>pregnant women diagnosed with<strong> uncomplicated malaria </strong>caused by <strong>chloroquine-resistant\u00a0<em>P. falciparum</em>\u00a0</strong>infection, the drug of choice is a\u00a0<strong>combination of quinine and clindamycin</strong><strong>. </strong>Artemisinin-based combination therapy can be used as an alternative for patients that are unable to tolerate oral quinine.</p>\n<p>In<strong>\u00a0the second and third trimesters</strong>,\u00a0they<strong>\u00a0</strong>can be treated with artemisinin combination therapy<strong>\u00a0</strong>such as:</p>\n<ul>\n<li>Artemether-lumefantrine</li>\n<li>Artesunate-amodiaquine</li>\n<li>Artesunate-mefloquine</li>\n<li>Dihydroartemisinin-piperaquine</li>\n<li>Artesunate + clindamycin</li>\n</ul>\n<p>During pregnancy, <strong><em>P. vivax</em> malaria</strong> is treated with <strong>chloroquine</strong> as it is safe in pregnancy and children.\u00a0In chloroquine-resistant vivax cases,<strong> clindamycin, quinine, chloroquine, </strong>and<strong> proguanil\u00a0</strong>can be used.</p>\n<p>Other options:</p>\n<p>Option B: <strong>Doxycycline</strong> is useful in the treatment of malaria but <strong>not used in pregnancy</strong>.</p>\n<p>Options C: <strong>Artemether plus lumefantrine</strong> is not the drug of choice in the 1st trimester of pregnancy. ACT may be given in the first trimester only if oral quinine is not tolerated or not available.</p>\n<p>Option D: <strong>ACT with pyrimethamine-sulfadoxine</strong>\u00a0is avoided in the first trimester.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/12bad9c206864bd3901a30719dbb8d27.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old lady presents with pulmonary TB is started on anti-tubercular therapy. What is the rationale for administering multi-drug therapy to her?",
    "choices": [
      {
        "id": 1,
        "text": "To delay development of resistance"
      },
      {
        "id": 2,
        "text": "To reduce toxicity"
      },
      {
        "id": 3,
        "text": "To broaden antimicrobial spectrum"
      },
      {
        "id": 4,
        "text": "To prevent toxin release from the organism"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The reason for administering <strong>multi-drug therapy</strong> in tuberculosis is to <strong>prevent</strong>&nbsp;the <strong>development</strong> of <strong>resistance.</strong></p>\n<p><strong>Resistance</strong> to individual drugs in <em>Mycobacterium tuberculosis</em> occurs by <strong>spontaneous point mutations</strong>&nbsp;that occur at a low but predictable rate (10<sup>-7 </sup>to 10<sup>-10 </sup>). Development of this drug resistance is almost invariably the<strong> result of monotherapy,&nbsp;</strong>i.e., the failure of the health care provider to prescribe at least 2 drugs to which the tubercle bacilli are susceptible. Hence, multi-drug therapy is recommended for the treatment of tuberculosis.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Pharmacology Test';
        let hierarchy = ["Marrow", "FMGE Test Series Subject", "2023"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>