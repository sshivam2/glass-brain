<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>37 Development Of Gut, Pelvis & Perineum - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Anatomy
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">10</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>A 35-year-old female presents with persistent flank pain. An abdominal ultrasound reveals that the lower poles of both kidneys are fused. What is the most likely developmental cause of this condition?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Abnormal migration of the metanephros derivative"
      },
      {
        "id": 2,
        "text": "Failure of the ureteric bud to differentiate"
      },
      {
        "id": 3,
        "text": "Complete degeneration of the pronephros"
      },
      {
        "id": 4,
        "text": "Improper development of the urogenital sinus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) <span class=\"customMeta\" data-dictid=\"458e050fdc16927771809854c9fd53\">Abnormal</span> migration of the <span class=\"customMeta\" data-dictid=\"bd2299e27516927771927e0256c91d\">metanephros</span> derivative</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>This presentation is indicative of a <strong>horseshoe kidney.</strong></li>\n\t<li>A condition where the <strong>lower poles</strong> of the <span class=\"customMeta\" data-dictid=\"4aa6035df41692777190b41d4a1583\">kidney</span> <span class=\"customMeta\" data-dictid=\"30bdb5481f1692777203cbadf50a71\">fuse</span> during development.</li>\n\t<li>Normally, the <span class=\"customMeta\" data-dictid=\"4aa6035df41692777190b41d4a1583\">Kidney</span> ascends from the <span class=\"customMeta\" data-dictid=\"c25071fa3816927771955eeaf9d45e\">pelvis</span> to its final position in the abdomen.</li>\n\t<li><strong>Abnormal migration</strong> can prevent this ascent and lead to fusion.</li>\n\t<li>The ascent of the <span class=\"customMeta\" data-dictid=\"2c8df9337316927771897a1681efe1\">horseshoe kidney</span> is blocked at the level of the<strong> <span class=\"customMeta\" data-dictid=\"49c4ef5b9d1692777190c0277f8344\">inferior</span> mesenteric artery.</strong></li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Development of the <span class=\"customMeta\" data-dictid=\"b9356afdba16927771979d068c6587\">Renal</span> System:</strong></p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"500\" src=\"https://image.prepladder.com/content/2h9MCNRtjLJNS25UiVLy1740541842.png\" width=\"500\" /></p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"1035\" src=\"https://image.prepladder.com/content/UCADtdHgpNKi0dx4WpVF1740541890.png\" width=\"500\" /></p>\n\n<ul>\n\t<li><strong>Urogenital Sinus:</strong><strong> (Option D)</strong>\n\n\t<ul>\n\t\t<li>Forms the bladder.</li>\n\t\t<li>Forms the urethra.</li>\n\t\t<li>Contributes to the lower 2/3rd of the vagina.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:590px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<h4 style=\"text-align:center\"><strong>Renal System Development</strong></h4>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<h4 style=\"text-align:center\"><strong>Excretory Part</strong></h4>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<h4 style=\"text-align:center\">Metanephrons</h4>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Bowman's capsule, <span class=\"customMeta\" data-dictid=\"bdbac654081692777196f9aab116f0\">proximal</span> <span class=\"customMeta\" data-dictid=\"3ddb367f1c16927771854815522adf\">convoluted</span> tubules, loop of Henle, <span class=\"customMeta\" data-dictid=\"5ff25303a01692777186731f6a4f5c\">distal</span> <span class=\"customMeta\" data-dictid=\"3ddb367f1c16927771854815522adf\">convoluted</span> tubules.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<h4 style=\"text-align:center\"><strong>Collecting Part</strong></h4>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<h4 style=\"text-align:center\">Ureteric bud</h4>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Collecting duct, minor calyces, major calyces, ureter.</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Note:</strong></p>\n\n<ul>\n\t<li><strong>Metanephric Mesenchyme: </strong>Essential for <span class=\"customMeta\" data-dictid=\"4aa6035df41692777190b41d4a1583\">kidney</span> development.</li>\n\t<li>The <span class=\"customMeta\" data-dictid=\"32b854324a1692777185c6c79fdc99\">definitive</span> <span class=\"customMeta\" data-dictid=\"4aa6035df41692777190b41d4a1583\">kidney</span> becomes functional by the <strong>12th week of gestation</strong>, i.e., it begins excreting urine.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Failure of the ureteric <span class=\"customMeta\" data-dictid=\"fbaff1edd216927771835557d40049\">bud</span> to differentiate</strong><strong>\u00a0(Option B)</strong>\u00a0would lead to malformations with the collecting system of the <span class=\"customMeta\" data-dictid=\"4aa6035df41692777190b41d4a1583\">kidney</span> and does not cause horseshoe kidney.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Complete <span class=\"customMeta\" data-dictid=\"df4f1758e2169277718697ae66f3dd\">degeneration</span> of the pronephros</strong><strong> (Option C)</strong>\u00a0is a normal developmental process and does not cause a horseshoe kidney.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/2h9MCNRtjLJNS25UiVLy1740541842.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A 17-year-old girl with primary amenorrhea is diagnosed with Mullerian agenesis. Which all structures are likely to be affected?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Fallopian tubes, uterus, and upper 1/3rd of the vagina"
      },
      {
        "id": 2,
        "text": "Uterus, epoophoron, and lower 2/3rd of the vagina"
      },
      {
        "id": 3,
        "text": "Fallopian tube, trigone of bladder, and clitoris"
      },
      {
        "id": 4,
        "text": "Ovaries, clitoris, and labia majora"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) <span class=\"customMeta\" data-dictid=\"efc83dab2c1692777202b5d1d06c4f\">Fallopian</span> tubes, uterus, and upper 1/3rd of the <span class=\"customMeta\" data-dictid=\"8537d8358c169277720162f2f6971b\">vagina</span> </strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>In females, the <strong>paramesonephric ducts</strong>, also known as <strong>M\u00fcllerian ducts </strong>give origin to the <span class=\"customMeta\" data-dictid=\"59ff8b38191692777201150e72ebc3\">uterine</span> tubes (<strong>fallopian tubes</strong>), the<strong> uterus</strong>, and the <strong>upper one-third of the vagina.</strong></p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"B. F. Corgosinho, M. C. Farani, V. Gon\u00e7alves, M. Zagatti, F. Yamauchi, R. H. Baroni; S\u00e3o Paulo/BR\" data-hash=\"\" data-license=\"Open Access\" data-source=\"https://epos.myesr.org/poster/esr/ecr2016/C-1574/background\" data-tags=\"\" height=\"417\" src=\"https://image.prepladder.com/content/LJUyxd6ZFZjb53Z2S4sL1740542270.png\" width=\"500\" /></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:591px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Derivatives</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0Wolffian Ducts\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 (Mesonephric Ducts)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>M\u00fcllerian Ducts (Paramesonephric Ducts)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>In males</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Ureteric buds develop into ureters, pelvis, calyces, and collecting tubules of the kidneys.</li>\n\t\t\t\t<li>Trigone of the <span class=\"customMeta\" data-dictid=\"0b72f5e96b16927772018dec8a87e2\">urinary</span> bladder</li>\n\t\t\t\t<li>Posterior wall of the part of the prostatic urethra</li>\n\t\t\t\t<li><strong>Epididymis</strong></li>\n\t\t\t\t<li><strong>Ductus deferens</strong></li>\n\t\t\t\t<li><strong>Seminal vesicles</strong></li>\n\t\t\t\t<li><strong>Ejaculatory ducts</strong></li>\n\t\t\t\t<li>Mesodermal part of the prostate</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Remains <span class=\"customMeta\" data-dictid=\"552c5ff93a16927771977cf35eac28\">rudimentary</span> and forms an <span class=\"customMeta\" data-dictid=\"b790a83bb41692777181cc3c0232af\">appendix</span> of testis</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>In females</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Ureteric buds develop into ureters, pelvis, and calyces, and they collect tubules of the kidneys.</li>\n\t\t\t\t<li>Trigone of the <span class=\"customMeta\" data-dictid=\"0b72f5e96b16927772018dec8a87e2\">urinary</span> bladder</li>\n\t\t\t\t<li>Posterior wall of the urethra</li>\n\t\t\t\t<li>Epoophoron</li>\n\t\t\t\t<li>Paroophoron - Gartner\u2019s duct</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>Uterine tubes</strong></li>\n\t\t\t\t<li><strong>Uterus</strong></li>\n\t\t\t\t<li><strong>Upper one-third of the vagina\u00a0</strong></li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/LJUyxd6ZFZjb53Z2S4sL1740542270.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A 26-year-old female patient presents to the emergency department in active labour. The obstetrician is concerned about the size of the pelvic outlet and its implications for the delivery of the baby. Which of the following structures is NOT considered a boundary of the pelvic outlet?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Lower border of the pubic symphysis"
      },
      {
        "id": 2,
        "text": "Ischial tuberosities"
      },
      {
        "id": 3,
        "text": "Tip of the coccyx"
      },
      {
        "id": 4,
        "text": "Sacral promontory"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) Sacral promontory</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Sacral promontory</strong> is a part of the <strong>pelvic inlet</strong>, not the outlet.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p><strong>Pelvis Components: </strong></p>\n\n<ul>\n\t<li>Structures from <strong>anterior to <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">posterior</span> </strong>are:\n\n\t<ul>\n\t\t<li>Urinary bladder</li>\n\t\t<li>Uterus (in females)</li>\n\t\t<li>Rectum</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><strong>Note: </strong>These components are supported by the<strong> <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> diaphragm</strong> (levator ani and coccygeus).</p>\n\n<p>\u00a0</p>\n\n<p><strong>Boundaries of the <span class=\"customMeta\" data-dictid=\"ea5dd28db71692777195ee64c2f690\">Perineum</span> </strong>(same as <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> outlet)<strong>:</strong></p>\n\n<ul>\n\t<li><strong>Anteriorly: </strong>\n\n\t<ul>\n\t\t<li>Lower border of the <span class=\"customMeta\" data-dictid=\"fff48ca9da16927771966fd16bbacc\">pubic</span> <span class=\"customMeta\" data-dictid=\"48b6a0a5fb1692777199da12372b14\">symphysis</span> <strong>(Option A)</strong></li>\n\t\t<li>Arcuate or <span class=\"customMeta\" data-dictid=\"49c4ef5b9d1692777190c0277f8344\">inferior</span> <span class=\"customMeta\" data-dictid=\"fff48ca9da16927771966fd16bbacc\">pubic</span> ligament</li>\n\t</ul>\n\t</li>\n\t<li><strong>Posteriorly:</strong>\n\t<ul>\n\t\t<li>Tip of the <span class=\"customMeta\" data-dictid=\"a6227f050b16927771843c3fedeec4\">coccyx</span> <strong>(Option C)</strong></li>\n\t</ul>\n\t</li>\n\t<li><strong>On each side from <span class=\"customMeta\" data-dictid=\"1ba6a9cfe11692777181950edd7a6d\">anterior</span> to posterior: </strong>\n\t<ul>\n\t\t<li>Conjoined <span class=\"customMeta\" data-dictid=\"3ac5f3d6ea16927771900382da99e5\">ischiopubic</span> rami<strong> </strong></li>\n\t\t<li>Ischial <span class=\"customMeta\" data-dictid=\"3292cfbbdb169277720182a7b986e4\">tuberosity</span> <strong>(Option B)</strong></li>\n\t\t<li>Sacrotuberous ligament</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"500\" src=\"https://image.prepladder.com/content/bU4to64twNxvKszd7yom1740542539.png\" width=\"500\" /></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:591px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Openings in Perineum</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Males</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Females</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Urethra</li>\n\t\t\t\t<li>Anal canal</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Urethra</li>\n\t\t\t\t<li>Vagina</li>\n\t\t\t\t<li>Anal canal</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/bU4to64twNxvKszd7yom1740542539.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A 35 yr old male with injury to the perineum, presented with blood collection in the perineal area extending to the mid-thigh. Which of the following correctly describes the location and characteristics of the perineal space involved in this patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Obturator fascia and inferior pelvic diaphragm fascia meet to form its apex"
      },
      {
        "id": 2,
        "text": "Located below the perineal membrane, open anteriorly, and continuous with spaces in the scrotum and penis"
      },
      {
        "id": 3,
        "text": "It contains the urethral sphincter within the wall of the urethra"
      },
      {
        "id": 4,
        "text": "Wedge-shaped spaces located below the pelvic diaphragm on either side of the anal canal"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Located below the <span class=\"customMeta\" data-dictid=\"befda305051692777195a95ee0695a\">perineal</span> membrane, open anteriorly, and continuous with spaces in the <span class=\"customMeta\" data-dictid=\"cd68da1b781692777198beaa259249\">scrotum</span> and penis.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li><strong>Superficial <span class=\"customMeta\" data-dictid=\"befda305051692777195a95ee0695a\">perineal</span> space</strong> is involved in this patient.</li>\n\t<li><strong>Location:</strong>\u00a0Superficial <span class=\"customMeta\" data-dictid=\"befda305051692777195a95ee0695a\">perineal</span> space is situated below the <span class=\"customMeta\" data-dictid=\"befda305051692777195a95ee0695a\">perineal</span> membrane, which separates it from the deep <span class=\"customMeta\" data-dictid=\"befda305051692777195a95ee0695a\">perineal</span> space.</li>\n\t<li><strong>Continuity:</strong>\n\t<ul>\n\t\t<li>It is open anteriorly, allowing for <span class=\"customMeta\" data-dictid=\"17e718612e1692777185f79acb759b\">continuity</span> with other <span class=\"customMeta\" data-dictid=\"116f86834a1692777181a914379270\">anatomical</span> spaces.</li>\n\t\t<li>In males, this includes the spaces in the <span class=\"customMeta\" data-dictid=\"cd68da1b781692777198beaa259249\">scrotum</span> and penis, while in females, it connects to the clitoral region.</li>\n\t\t<li>The <strong>Colles' fascia</strong> fuses with the <span class=\"customMeta\" data-dictid=\"65483c739e169277720294dce50377\">fascia</span> lata of the thigh, which typically prevents blood from <span class=\"customMeta\" data-dictid=\"ad56eb6e551692777199ae4ce59798\">spreading</span> further into the thigh beyond this point.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><strong>Perineal Regions:</strong></p>\n\n<ul>\n\t<li>The perineum, located between the thighs, contains the external <span class=\"customMeta\" data-dictid=\"a6a00bd30e169277718892b3a6076c\">genitalia</span> and is divided into <strong>two triangular regions:</strong>\u00a0Anal and urogenital.</li>\n</ul>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:431px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Region</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Description</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Anal Region</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Contains the anal <span class=\"customMeta\" data-dictid=\"371930068716927771839cba840631\">canal</span> and <span class=\"customMeta\" data-dictid=\"618a865d4e1692777190f27bec2ffb\">ischioanal</span> fossa</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Urogenital Region</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Contains external <span class=\"customMeta\" data-dictid=\"2942e9d19616927772014161ee8f70\">urogenital</span> organs</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Perineal Spaces:</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:614px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Space</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Description</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Superficial <span class=\"customMeta\" data-dictid=\"befda305051692777195a95ee0695a\">Perineal</span> Space</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Located below the <span class=\"customMeta\" data-dictid=\"befda305051692777195a95ee0695a\">perineal</span> membrane, open anteriorly, it connects with spaces in the scrotum/penis (males) or <span class=\"customMeta\" data-dictid=\"730ba6fe50169277718492019976c7\">clitoris</span> (females), enclosed posteriorly by Colles' fascia. <strong>(Option B)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Deep <span class=\"customMeta\" data-dictid=\"befda305051692777195a95ee0695a\">Perineal</span> Space</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Situated above the <span class=\"customMeta\" data-dictid=\"befda305051692777195a95ee0695a\">perineal</span> membrane, previously thought to contain the urethral <span class=\"customMeta\" data-dictid=\"1a73a42f071692777199a59120f494\">sphincter</span> (now known to be within the urethra), it is thin and open above. <strong>(Option C)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Ischioanal Fossa</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Wedge-shaped spaces in the anal triangle, located below the <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> diaphragm, base formed by <span class=\"customMeta\" data-dictid=\"befda305051692777195a95ee0695a\">perineal</span> skin, <span class=\"customMeta\" data-dictid=\"2d7ea2751316927771816ceb31afee\">apex</span> where <span class=\"customMeta\" data-dictid=\"215af9957a1692777194e73b21a340\">obturator</span> <span class=\"customMeta\" data-dictid=\"65483c739e169277720294dce50377\">fascia</span> and <span class=\"customMeta\" data-dictid=\"49c4ef5b9d1692777190c0277f8344\">inferior</span> <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> <span class=\"customMeta\" data-dictid=\"5b42867b61169277718692205c2447\">diaphragm</span> <span class=\"customMeta\" data-dictid=\"65483c739e169277720294dce50377\">fascia</span> meet. <strong>(Options A & D)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Clinical Significance:</strong></p>\n\n<h4><strong>1. <span class=\"customMeta\" data-dictid=\"ebb480187d1692777199e233e9e356\">Superficial</span> <span class=\"customMeta\" data-dictid=\"befda305051692777195a95ee0695a\">Perineal</span> Space</strong></h4>\n\n<ul>\n\t<li><strong>Trauma</strong>: <span class=\"customMeta\" data-dictid=\"0423ab014e16927771992dbf460b22\">Straddle</span> injuries may lead to <span class=\"customMeta\" data-dictid=\"832849414c1692777188491f77bb5f\">hematoma</span> or confined <span class=\"customMeta\" data-dictid=\"0096f2a7631692777201eb9f21d5a7\">urine</span> extravasation.</li>\n\t<li><strong>Infections</strong>: Common site for Bartholin's <span class=\"customMeta\" data-dictid=\"5618681fbe16927771804370383aaa\">abscess</span> in females.</li>\n\t<li><strong>Surgery</strong>: Involves structures like the penile/clitoral bulb for reconstruction.</li>\n</ul>\n\n<h4><strong>2. Deep <span class=\"customMeta\" data-dictid=\"befda305051692777195a95ee0695a\">Perineal</span> Space</strong></h4>\n\n<ul>\n\t<li><strong>Urethral Injuries</strong>: <span class=\"customMeta\" data-dictid=\"15753e44ee169277719279696ebf69\">Membranous urethra</span> <span class=\"customMeta\" data-dictid=\"e73553a3a5169277719787fd5f4680\">rupture</span> can cause <span class=\"customMeta\" data-dictid=\"0096f2a7631692777201eb9f21d5a7\">urine</span> leakage, often in <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> fractures.</li>\n\t<li><strong>Surgery</strong>: Relevant in urethral repairs and <span class=\"customMeta\" data-dictid=\"1a73a42f071692777199a59120f494\">sphincter</span> interventions.</li>\n\t<li><strong>Incontinence</strong>: Damage to the external urethral <span class=\"customMeta\" data-dictid=\"1a73a42f071692777199a59120f494\">sphincter</span> may result in <span class=\"customMeta\" data-dictid=\"0b72f5e96b16927772018dec8a87e2\">urinary</span> issues.</li>\n</ul>\n\n<h4><strong>3. <span class=\"customMeta\" data-dictid=\"618a865d4e1692777190f27bec2ffb\">Ischioanal</span> Fossa</strong></h4>\n\n<ul>\n\t<li><strong>Abscesses</strong>: Frequent site for <span class=\"customMeta\" data-dictid=\"618a865d4e1692777190f27bec2ffb\">ischioanal</span> abscesses, which may cross the midline.</li>\n\t<li><strong>Pudendal Nerve Block</strong>: Targeted here for regional anesthesia.</li>\n\t<li><strong>Surgery</strong>: Key area for <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> of abscesses and treatment of anal fistulas.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>In a newborn presenting with ambiguous genitalia at birth, USG reveals the presence of a uterus. The karyotype was found to be XY. What is the most common cause?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Excessive production of DHT."
      },
      {
        "id": 2,
        "text": "Mutation in the SRY gene."
      },
      {
        "id": 3,
        "text": "Inadequate expression of WNT4."
      },
      {
        "id": 4,
        "text": "Increased levels of estrogen."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">Mutation</span> in the SRY gene.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li><strong>Mutation in the SRY gene</strong> prevents the formation of testes</li>\n\t<li>Results in a lack of <strong>testosterone </strong>and <span class=\"customMeta\" data-dictid=\"0b31da4446169277719292c6fbfad2\">M\u00fcllerian</span> Inhibiting Substance (<strong>MIS</strong>).</li>\n\t<li>The absence of <span class=\"customMeta\" data-dictid=\"5b01594c08169277719225566af3e4\">MIS</span> leads to the <span class=\"customMeta\" data-dictid=\"8eedb6cec61692777196a6a3b93d3f\">proliferation</span> of mullerian ducts (<strong>uterus present</strong>) and the lack of <span class=\"customMeta\" data-dictid=\"e54a6646c1169277720031d162bd75\">testosterone</span> leads to <strong>degeneration of the wolfian duct.</strong></li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Genital System Development:</strong></p>\n\n<ul>\n\t<li><strong>Indifferent Stage:</strong>\n\n\t<ul>\n\t\t<li>Both male and female structures can develop from <strong>common precursors.\u00a0</strong></li>\n\t</ul>\n\t</li>\n\t<li><strong>Intermediate Mesoderm:</strong>\n\t<ul>\n\t\t<li>A major portion of the <span class=\"customMeta\" data-dictid=\"2fd33fb2ac16927771889901daadeb\">genitourinary</span> system develops from the<strong> <span class=\"customMeta\" data-dictid=\"cf8f491dba169277719075ce2b5594\">intermediate</span> mesoderm.</strong></li>\n\t\t<li>Forms <span class=\"customMeta\" data-dictid=\"2fd33fb2ac16927771889901daadeb\">genitourinary</span> ridges and ducts.</li>\n\t</ul>\n\t</li>\n\t<li><strong>Genitourinary Ridges:</strong>\n\t<ul>\n\t\t<li>Appears in <strong>5th week of development</strong></li>\n\t\t<li><strong>Give rise to:</strong>\n\t\t<ul>\n\t\t\t<li><strong>Testis </strong>(in males): Appears in the <strong>7th week of development</strong></li>\n\t\t\t<li><strong>Ovary </strong>(in females): Appears in the<strong> 8th week of development</strong></li>\n\t\t\t<li><strong>Kidneys</strong> (although the kidneys develop from the <span class=\"customMeta\" data-dictid=\"8544e173991692777193d9a5472b4f\">nephrogenic</span> cord, which is part of the <span class=\"customMeta\" data-dictid=\"cf8f491dba169277719075ce2b5594\">intermediate</span> mesoderm, they are closely related to the <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">genital</span> structures during development).</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><strong>Duct Types:</strong></p>\n\n<ul>\n\t<li><strong>M\u00fcllerian (Paramesonephric) Duct:</strong>\n\n\t<ul>\n\t\t<li>Functional in females, develops into the <strong>fallopian tubes, uterus, and the upper 1/3rd of the vagina</strong>.</li>\n\t\t<li>Inhibited in males by <strong>M\u00fcllerian Inhibiting Substance (MIS)</strong> (also known as <strong>Anti-M\u00fcllerian Hormone</strong> or AMH), produced by Sertoli cells of the testes.</li>\n\t</ul>\n\t</li>\n\t<li><strong>Wolffian (Mesonephric) Duct:</strong>\n\t<ul>\n\t\t<li>Functional in males, it develops into <strong>epididymis, <span class=\"customMeta\" data-dictid=\"4e612482cf1692777201e5b0ae20f6\">vas</span> deferens, seminal vesicles</strong>, and <strong>ejaculatory ducts.</strong> (<strong>MNEMONIC- SEED</strong>: Seminal vesicle, epididymis, ejaculatory duct, <span class=\"customMeta\" data-dictid=\"7a6864e97b169277718602072817ee\">ductus</span> deferens)</li>\n\t\t<li>Regresses in females in the absence of testosterone.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"OpenStax College\" data-hash=\"\" data-license=\"CC BY 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:2915_Sexual_Differentation-02.jpg\" data-tags=\"\" height=\"936\" src=\"https://image.prepladder.com/content/joCpDSuMzaguakYu4V0a1740541741.png\" width=\"500\" /></p>\n\n<p><strong>External <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">Genital</span> Development by Stage:</strong></p>\n\n<ul>\n\t<li>Arises from the <strong>cloacal folds and <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">genital</span> tubercle</strong> (not the <span class=\"customMeta\" data-dictid=\"51b29c48291692777186b488ac8cd9\">dorsal</span> <span class=\"customMeta\" data-dictid=\"3db910d8571692777198303e3bcb27\">somatic</span> <span class=\"customMeta\" data-dictid=\"fc380e21321692777191739bd99191\">lateral</span> plate mesoderm).</li>\n\t<li>Male and <span class=\"customMeta\" data-dictid=\"1e5e86c1b116927772036943c13e24\">female external genitalia</span> can be differentiated by<strong> 12-14 weeks of <span class=\"customMeta\" data-dictid=\"1d5d2712dc169277719050154d38a1\">intrauterine</span> life.</strong></li>\n</ul>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:538px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Structure</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Male Development</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Female Development</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Genital Tubercle</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Becomes the <strong>phallus (penis)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Becomes the <strong>clitoris</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Urethral Folds</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Fuse to <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> the <strong>penile urethra</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Become the <strong>labia minora</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Genital Swellings</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Form the <strong>scrotum</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Form the <strong>labia majora</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Sex Differentiation:</strong></p>\n\n<ul>\n\t<li><strong>Male Development:</strong>\n\n\t<ul>\n\t\t<li><strong>SRY Gene:</strong>\n\n\t\t<ul>\n\t\t\t<li>Located on the <strong>Y chromosome</strong>, it initiates the development of testes.</li>\n\t\t\t<li>Activates <span class=\"customMeta\" data-dictid=\"f5467ab59316927771863c852a23a6\">downstream</span> genes like <strong>SOX9</strong> and <strong>SF1</strong>, which are essential for Sertoli and Leydig cell differentiation.</li>\n\t\t</ul>\n\t\t</li>\n\t\t<li><strong>Testosterone Effects:</strong>\n\t\t<ul>\n\t\t\t<li>Testosterone, secreted by Leydig cells, stimulates the <strong>mesonephric (Wolffian) ducts</strong> to <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> male <span class=\"customMeta\" data-dictid=\"11e24b369816927771974383c7e17c\">reproductive</span> structures (e.g., epididymis, <span class=\"customMeta\" data-dictid=\"4e612482cf1692777201e5b0ae20f6\">vas</span> deferens, seminal vesicles, and ejaculatory ducts).</li>\n\t\t</ul>\n\t\t</li>\n\t\t<li><strong>Dihydrotestosterone (DHT):</strong>\n\t\t<ul>\n\t\t\t<li>Promotes the development of <strong>external genitalia</strong> (penis and scrotum).</li>\n\t\t</ul>\n\t\t</li>\n\t\t<li><strong>M\u00fcllerian Inhibiting Substance (MIS):</strong>\n\t\t<ul>\n\t\t\t<li>Known as Anti-M\u00fcllerian Hormone (AMH)</li>\n\t\t\t<li>Secreted by Sertoli cells, it causes the <span class=\"customMeta\" data-dictid=\"f30740eaeb16927771978fc4c375eb\">regression</span> of the <strong>paramesonephric (M\u00fcllerian) ducts</strong>, preventing the development of female <span class=\"customMeta\" data-dictid=\"11e24b369816927771974383c7e17c\">reproductive</span> structures.</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n\t<li><strong>Female Development:</strong>\n\t<ul>\n\t\t<li><strong>Absence of SRY Gene:</strong>\n\t\t<ul>\n\t\t\t<li>Without the SRY gene, the gonads develop into <strong>ovaries</strong>.</li>\n\t\t</ul>\n\t\t</li>\n\t\t<li><strong>Paramesonephric (M\u00fcllerian) Ducts:</strong>\n\t\t<ul>\n\t\t\t<li>Develop into the <strong>fallopian tubes, uterus, and upper 1/3rd of the vagina</strong>.</li>\n\t\t</ul>\n\t\t</li>\n\t\t<li><strong>External Genitalia:</strong>\n\t\t<ul>\n\t\t\t<li>Develop in the absence of testosterone, forming the <strong>clitoris, <span class=\"customMeta\" data-dictid=\"99041e636a169277719121835ed133\">labia</span> minora, and <span class=\"customMeta\" data-dictid=\"99041e636a169277719121835ed133\">labia</span> majora</strong>.</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><strong>Excessive production of DHT </strong><strong>(Option A)</strong> promotes the development of male external genitalia.</p>\n\n<p><strong>Inadequate expression of WNT4</strong><strong> (Option C)</strong><strong>:</strong> No role in male development.</p>\n\n<p><strong>Increased levels of estrogen</strong><strong> (Option D)</strong><strong>:</strong> Do not present with functional <span class=\"customMeta\" data-dictid=\"0b31da4446169277719292c6fbfad2\">M\u00fcllerian</span> ducts alongside regressed <span class=\"customMeta\" data-dictid=\"3454aac9c9169277720261faf20ec2\">Wolffian</span> ducts in a genetically male infant.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/joCpDSuMzaguakYu4V0a1740541741.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A 16-year-old adolescent girl developed secondary sexual characteristics at 12 but has never menstruated. Ultrasound indicates no uterus. Karyotyping and hormone assays are normal. Which structure is most likely NOT affected in this patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Ovaries"
      },
      {
        "id": 2,
        "text": "Fallopian Tubes"
      },
      {
        "id": 3,
        "text": "Upper part of the Vagina"
      },
      {
        "id": 4,
        "text": "Cervix"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Ovaries</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The presentation is consistent with <strong>Mayer-Rokitansky-K\u00fcster-Hauser (MRKH) syndrome</strong>, characterised by <strong>M\u00fcllerian agenesis.</strong></li>\n\t<li>In Mullerian agenesis, <strong>Ovaries </strong>are<strong> not affected.</strong></li>\n\t<li>Ovaries develop from the genito-urinary ridge.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Development of the Female <span class=\"customMeta\" data-dictid=\"2fd33fb2ac16927771889901daadeb\">Genitourinary</span> System:</strong></p>\n\n<ul>\n\t<li><strong>M\u00fcllerian (Paramesonephric) Ducts</strong>:\n\n\t<ul>\n\t\t<li><strong>Origin</strong>: Mesodermal derivative.</li>\n\t\t<li><strong>Developmental Fate</strong>:\n\t\t<ul>\n\t\t\t<li>Uterus</li>\n\t\t\t<li>Uterine (<strong>Fallopian</strong>) <strong>tubes\u00a0(Options B)</strong></li>\n\t\t\t<li><strong>Cervix</strong>\u00a0<strong>(Options D)</strong></li>\n\t\t\t<li><strong>Upper one-third of the vagina\u00a0(Options C)</strong></li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n\t<li><strong>Vaginal Development</strong>:\n\t<ul>\n\t\t<li><strong>Upper one-third</strong>: Derived from the fused <span class=\"customMeta\" data-dictid=\"0b31da4446169277719292c6fbfad2\">M\u00fcllerian</span> ducts.</li>\n\t\t<li><strong>Lower two-thirds</strong>: Derived from the <span class=\"customMeta\" data-dictid=\"183f8342f616927771878f722a68ee\">endoderm</span> of the <span class=\"customMeta\" data-dictid=\"2942e9d19616927772014161ee8f70\">urogenital</span> sinus.</li>\n\t</ul>\n\t</li>\n\t<li><strong>Urogenital Sinus</strong>:\n\t<ul>\n\t\t<li><strong>Origin</strong>: <span class=\"customMeta\" data-dictid=\"0a6ca57bb61692777187fa5f7bdbb0\">Endodermal</span> derivative.</li>\n\t\t<li><strong>Forms</strong>:\n\t\t<ul>\n\t\t\t<li>Urinary bladder</li>\n\t\t\t<li>Urethra</li>\n\t\t\t<li>Lower two-thirds of the vagina</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n\t<li><strong>Mesonephros and Mesonephric Ducts</strong>:\n\t<ul>\n\t\t<li><strong>Mesonephros</strong> leaves two <strong>mesonephric ducts</strong> that open into the <span class=\"customMeta\" data-dictid=\"2942e9d19616927772014161ee8f70\">urogenital</span> sinus.</li>\n\t\t<li><strong>Mesonephric duct</strong> gives rise to the <strong>ureteric bud</strong>, which penetrates the metanephros, leading to the formation of the collecting system of the kidney.</li>\n\t</ul>\n\t</li>\n\t<li><strong>Wolffian (Mesonephric) Duct</strong>:\n\t<ul>\n\t\t<li><strong>Vestigial Remnants</strong> (in females):\n\t\t<ul>\n\t\t\t<li><strong>Epoophoron</strong>: Located above the ovary.</li>\n\t\t\t<li><strong>Paroophoron</strong>: Found near the ovary.</li>\n\t\t\t<li><strong>Gartner\u2019s duct</strong>: A <span class=\"customMeta\" data-dictid=\"bead1cecfa16927771979940742ada\">remnant</span> in the <span class=\"customMeta\" data-dictid=\"fc380e21321692777191739bd99191\">lateral</span> <span class=\"customMeta\" data-dictid=\"7cd6eb19341692777195d83aafdcb3\">pelvic</span> area.</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><strong>Note: </strong>Remnants of the Mullerian <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> (<strong>Paramesonephric duct</strong>) in males are the<strong> <span class=\"customMeta\" data-dictid=\"b790a83bb41692777181cc3c0232af\">appendix</span> of the testis.</strong></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>An 8-year-old male child presents with a history of recurrent urinary tract infections. Imaging studies reveal a significant dilation of the ureters and an abnormal configuration of the bladder trigone. The patient is diagnosed with vesicoureteral reflux (VUR). Urologists suspect that the anomaly is linked to the embryological development of the trigone of the bladder. Which of the following statements about the trigone of the urinary bladder is FALSE?</p>",
    "choices": [
      {
        "id": 1,
        "text": "The trigone is formed from the mesonephric duct."
      },
      {
        "id": 2,
        "text": "The trigone is composed of endodermal tissue."
      },
      {
        "id": 3,
        "text": "The proximal part of the mesonephric duct is the Wolffian duct. Mucosal rugosities are absent in trigone region."
      },
      {
        "id": 4,
        "text": "The trigone is formed on the anterior wall of the bladder."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) The <span class=\"customMeta\" data-dictid=\"d89806ebbe1692777200b7b677e616\">trigone</span> is composed of <span class=\"customMeta\" data-dictid=\"0a6ca57bb61692777187fa5f7bdbb0\">endodermal</span> tissue.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The <strong>trigone </strong>of the <span class=\"customMeta\" data-dictid=\"0b72f5e96b16927772018dec8a87e2\">urinary</span> <span class=\"customMeta\" data-dictid=\"e6cfda323816927771839cc83e376d\">bladder</span> is derived from <strong>mesodermal tissue.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Development of the <span class=\"customMeta\" data-dictid=\"d89806ebbe1692777200b7b677e616\">Trigone</span> of the <span class=\"customMeta\" data-dictid=\"0b72f5e96b16927772018dec8a87e2\">Urinary</span> Bladder:</strong></p>\n\n<ul>\n\t<li><strong>Origin: </strong>The <span class=\"customMeta\" data-dictid=\"d89806ebbe1692777200b7b677e616\">trigone</span> is formed from the <span class=\"customMeta\" data-dictid=\"5fcb9396d1169277718069dd7fa788\">absorption</span> of the tip of the <strong>mesonephric (Wolffian) duct</strong> into the <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">posterior</span> wall of the <span class=\"customMeta\" data-dictid=\"2942e9d19616927772014161ee8f70\">urogenital</span> sinus<strong>.</strong><strong> </strong><strong>(Options A & D)</strong></li>\n\t<li><strong>Tissue Derivation:</strong>\n\t<ul>\n\t\t<li>The <span class=\"customMeta\" data-dictid=\"d89806ebbe1692777200b7b677e616\">trigone</span> is composed of <strong>mesodermal tissue. (Option B)</strong></li>\n\t\t<li>The remainder of the <span class=\"customMeta\" data-dictid=\"0b72f5e96b16927772018dec8a87e2\">urinary</span> <span class=\"customMeta\" data-dictid=\"e6cfda323816927771839cc83e376d\">bladder</span> is derived from<strong> <span class=\"customMeta\" data-dictid=\"183f8342f616927771878f722a68ee\">endoderm</span> (urogenital sinus).</strong></li>\n\t</ul>\n\t</li>\n\t<li><strong>Mesonephric Duct:</strong>\n\t<ul>\n\t\t<li>After the formation of the trigone, the <span class=\"customMeta\" data-dictid=\"bdbac654081692777196f9aab116f0\">proximal</span> part of the mesonephric <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> is <span class=\"customMeta\" data-dictid=\"047f8930dd1692777197fed61e213c\">referred</span> to as the Wolffian duct.\u00a0Unlike the rest of the <span class=\"customMeta\" data-dictid=\"e6cfda323816927771839cc83e376d\">bladder</span> mucosa, which has <strong>rugae (folds)</strong> when empty, the <strong>trigone remains smooth</strong> regardless of <span class=\"customMeta\" data-dictid=\"e6cfda323816927771839cc83e376d\">bladder</span> filling.\u00a0<strong>(Option C)</strong></li>\n\t</ul>\n\t</li>\n\t<li><strong>Clinical Significance:</strong>\n\t<ul>\n\t\t<li>Anomalies in the development of the <span class=\"customMeta\" data-dictid=\"d89806ebbe1692777200b7b677e616\">trigone</span> can lead to <span class=\"customMeta\" data-dictid=\"0b72f5e96b16927772018dec8a87e2\">urinary</span> <span class=\"customMeta\" data-dictid=\"1a1307223f16927772017a994bfc39\">tract</span> abnormalities.</li>\n\t</ul>\n\t</li>\n\t<li><strong>Anatomical Significance:</strong>\n\t<ul>\n\t\t<li>The <span class=\"customMeta\" data-dictid=\"d89806ebbe1692777200b7b677e616\">trigone</span> is an important <strong>landmark within the bladder</strong>, delineating the area between the ureteric orifices and the internal urethral orifice.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"500\" src=\"https://image.prepladder.com/content/wVvX38cjIog83LLUgkr71740541984.png\" width=\"500\" /></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/wVvX38cjIog83LLUgkr71740541984.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A one-day-old newborn is admitted to the neonatal intensive care unit (NICU) due to severe respiratory distress. Prenatal ultrasounds had revealed bilateral renal agenesis and severe oligohydramnios. The neonatologist explains that this malformation occurred early in gestation. Which of the following developmental processes is most likely responsible for the bilateral renal agenesis seen in this newborn?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Failure of the ureteric bud formation and induce the metanephric mesenchyme."
      },
      {
        "id": 2,
        "text": "Failure of the pronephros development"
      },
      {
        "id": 3,
        "text": "Failure of the mesonephric duct to fuse with the urogenital sinus"
      },
      {
        "id": 4,
        "text": "Failure of the mesonephric duct to differentiate into kidney"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Failure of the ureteric <span class=\"customMeta\" data-dictid=\"fbaff1edd216927771835557d40049\">bud</span> formation and induce the metanephric mesenchyme</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The <strong>ureteric bud</strong> is an outgrowth from the mesonephric <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> and <strong>induces the metanephric mesenchyme</strong> to <span class=\"customMeta\" data-dictid=\"c9001edbf216927771860f3475b44c\">differentiate</span> into <strong>nephrons</strong> (the functional units of the kidney).</li>\n\t<li>Hence, failure of the ureteric <span class=\"customMeta\" data-dictid=\"fbaff1edd216927771835557d40049\">bud</span> formation or not properly inducing the metanephric <span class=\"customMeta\" data-dictid=\"e8103946c616927771920f96e0e14f\">mesenchyme</span> leads to <strong>bilateral <span class=\"customMeta\" data-dictid=\"b9356afdba16927771979d068c6587\">renal</span> agenesis.</strong></li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"500\" src=\"https://image.prepladder.com/content/SOpKKX9I9gUnyzIwtQMD1740542103.png\" width=\"500\" /></p>\n\n<p>1. <strong>Collecting System (from Ureteric Bud):</strong></p>\n\n<ul>\n\t<li><strong>Forms:</strong>\n\n\t<ul>\n\t\t<li>Ureter</li>\n\t\t<li>Renal pelvis</li>\n\t\t<li>Major calyces</li>\n\t\t<li>Minor calyces</li>\n\t\t<li>Collecting ducts (tubules)</li>\n\t</ul>\n\t</li>\n\t<li><strong>Potential Issues:</strong>\n\t<ul>\n\t\t<li>If the ureteric <span class=\"customMeta\" data-dictid=\"fbaff1edd216927771835557d40049\">bud</span> splits too early, it may result in: <strong>Bifid ureter</strong> (two ureters)</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p>2. <strong>Excretory System (from Metanephric Blastema):</strong></p>\n\n<ul>\n\t<li>Each <span class=\"customMeta\" data-dictid=\"076ee83ea31692777185394706d8a7\">collecting tubule</span> is surrounded by a <strong>metanephric tissue cap</strong>, which forms the <strong>excretory tubules.</strong></li>\n</ul>\n\n<p><strong>Formation of Nephrons (functional units of the kidney):</strong><strong> </strong></p>\n\n<ul>\n\t<li><strong>Proximal end:</strong> Forms Bowman's capsule, which surrounds a glomerulus.</li>\n\t<li><strong>Distal end:</strong> Elongates to <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> the:\n\t<ul>\n\t\t<li>Proximal <span class=\"customMeta\" data-dictid=\"3ddb367f1c16927771854815522adf\">convoluted</span> tubule</li>\n\t\t<li>Loop of Henle</li>\n\t\t<li>Distal <span class=\"customMeta\" data-dictid=\"3ddb367f1c16927771854815522adf\">convoluted</span> tubule</li>\n\t</ul>\n\t</li>\n</ul>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:590px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<h4 style=\"text-align:center\"><strong>Renal System Development</strong></h4>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<h4 style=\"text-align:center\"><strong>Excretory Part</strong></h4>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<h4 style=\"text-align:center\">Metanephrons</h4>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Bowman's capsule, <span class=\"customMeta\" data-dictid=\"bdbac654081692777196f9aab116f0\">proximal</span> <span class=\"customMeta\" data-dictid=\"3ddb367f1c16927771854815522adf\">convoluted</span> tubules, loop of Henle, <span class=\"customMeta\" data-dictid=\"5ff25303a01692777186731f6a4f5c\">distal</span> <span class=\"customMeta\" data-dictid=\"3ddb367f1c16927771854815522adf\">convoluted</span> tubules.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<h4 style=\"text-align:center\"><strong>Collecting Part</strong></h4>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<h4 style=\"text-align:center\">Ureteric bud</h4>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Collecting duct, minor calyces, major calyces, ureter.</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Failure of the <span class=\"customMeta\" data-dictid=\"c2cdf85887169277719603cdf56b1f\">pronephros</span> development (Option B):</strong> The <span class=\"customMeta\" data-dictid=\"c2cdf85887169277719603cdf56b1f\">pronephros</span> is the first, most <span class=\"customMeta\" data-dictid=\"6d6e7d903b169277719662541dd5e2\">primitive</span> <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of the <span class=\"customMeta\" data-dictid=\"4aa6035df41692777190b41d4a1583\">kidney</span> in early embryonic life, but it is non-functional in humans and regresses by the 4th week of gestation. Development or <span class=\"customMeta\" data-dictid=\"2a4713707c1692777190062b13e806\">involution</span> of <span class=\"customMeta\" data-dictid=\"c2cdf85887169277719603cdf56b1f\">pronephros</span> has no significant role in the formation of the permanent kidneys.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p><strong>Failure of the mesonephric <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> to <span class=\"customMeta\" data-dictid=\"30bdb5481f1692777203cbadf50a71\">fuse</span> with the <span class=\"customMeta\" data-dictid=\"2942e9d19616927772014161ee8f70\">urogenital</span> <span class=\"customMeta\" data-dictid=\"b0046463171692777198e0beea83e7\">sinus</span> (Option C):</strong> A failure in this <span class=\"customMeta\" data-dictid=\"a7dfeb385e1692777203302bcf142d\">fusion</span> would lead to malformations of the <span class=\"customMeta\" data-dictid=\"e6cfda323816927771839cc83e376d\">bladder</span> or urethra, not <span class=\"customMeta\" data-dictid=\"625feb7e3a1692777183aa9d923cfd\">bilateral</span> <span class=\"customMeta\" data-dictid=\"b9356afdba16927771979d068c6587\">renal</span> agenesis. Ureteric <span class=\"customMeta\" data-dictid=\"fbaff1edd216927771835557d40049\">bud</span> and metanephric <span class=\"customMeta\" data-dictid=\"17641b73a9169277718312db384ec7\">blastema</span> interactions happen independently of this <span class=\"customMeta\" data-dictid=\"a7dfeb385e1692777203302bcf142d\">fusion</span> process.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p><strong>Failure of the mesonephric <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> to <span class=\"customMeta\" data-dictid=\"c9001edbf216927771860f3475b44c\">differentiate</span> into <span class=\"customMeta\" data-dictid=\"4aa6035df41692777190b41d4a1583\">kidney</span> (Option D):</strong> The mesonephric <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> does not directly <span class=\"customMeta\" data-dictid=\"c9001edbf216927771860f3475b44c\">differentiate</span> into the kidney. It gives rise to the ureteric bud, which then induces the metanephric <span class=\"customMeta\" data-dictid=\"e8103946c616927771920f96e0e14f\">mesenchyme</span> to <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> the functional kidney.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/SOpKKX9I9gUnyzIwtQMD1740542103.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following pairs correctly matches the embryonic structure with its corresponding differentiated structure in males and females during the development of external genitalia?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Genital tubercle \u2192 Clitoris (Female), Glans penis (Male)"
      },
      {
        "id": 2,
        "text": "Genital fold \u2192 Labia majora (Female), Penoscrotal raphe (Male)"
      },
      {
        "id": 3,
        "text": "Genital swelling \u2192 Labia majora (Female), Glans penis (Male)"
      },
      {
        "id": 4,
        "text": "Genital fold \u2192 Labia minora (Female), Scrotum (Male)"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">Genital</span> <span class=\"customMeta\" data-dictid=\"4e55f7e0e6169277720158750ed95c\">tubercle</span> \u2192 <span class=\"customMeta\" data-dictid=\"730ba6fe50169277718492019976c7\">Clitoris</span> (Female), <span class=\"customMeta\" data-dictid=\"e62ab50e7a16927771882c6a886b18\">Glans</span> <span class=\"customMeta\" data-dictid=\"028d70d3e11692777195f204ee2764\">penis</span> (Male)</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>The urethral folds (often <span class=\"customMeta\" data-dictid=\"047f8930dd1692777197fed61e213c\">referred</span> to as <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">genital</span> folds) develop into the <span class=\"customMeta\" data-dictid=\"99041e636a169277719121835ed133\">labia</span> minora in females and contribute to the <span class=\"customMeta\" data-dictid=\"9ccb2fd2f31692777201e231bfda74\">ventral</span> <span class=\"customMeta\" data-dictid=\"a594ff734f16927772016f656d39eb\">urethra</span> in males.</p>\n\n<p><br />\n\u00a0</p>\n\n<p><strong>Development of External Genitalia:</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:469px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Structure</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Female</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Male</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Genital <span class=\"customMeta\" data-dictid=\"4e55f7e0e6169277720158750ed95c\">tubercle</span> (phallus)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Clitoris</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Glans penis</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Genital fold (urethral fold) </strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Labia minora</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Penoscrotal raphe</li>\n\t\t\t\t<li>Part of the <span class=\"customMeta\" data-dictid=\"9ccb2fd2f31692777201e231bfda74\">ventral</span> urethra</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Genital <span class=\"customMeta\" data-dictid=\"e3d212ebd316927771996e0c472d4a\">swelling</span> (labioscrotal swelling)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Labia majora</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Scrotum</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Sciencia58\" data-hash=\"\" data-license=\"CC0 1.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Human_genitalia_-_development_1.png\" data-tags=\"\" height=\"560\" src=\"https://image.prepladder.com/content/TgJV6iqr0nfhR6rIDRbz1740542422.png\" width=\"500\" /></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/TgJV6iqr0nfhR6rIDRbz1740542422.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>During a pelvic exam, a gynaecologist is teaching the medical students about the structures of the vestibule of the vagina. Which of the following structures is NOT located within the vestibule?</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "External urethral orifice"
      },
      {
        "id": 2,
        "text": "Vaginal orifice"
      },
      {
        "id": 3,
        "text": "Clitoral glans"
      },
      {
        "id": 4,
        "text": "Openings of the Bartholin glands"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Clitoral glans</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The<strong> <span class=\"customMeta\" data-dictid=\"586f3a8b251692777201914716d12e\">vestibule</span> begins </strong>just <strong>below the clitoris</strong> and ends inferiorly at the <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">posterior</span> <span class=\"customMeta\" data-dictid=\"293e8a71aa169277718465a7dbefbf\">commissure</span> of the <span class=\"customMeta\" data-dictid=\"99041e636a169277719121835ed133\">labia</span> minora.</li>\n\t<li>It contains the <strong>vaginal</strong> and <strong>external urethral orifices</strong> and the<strong> openings </strong>of the two greater <span class=\"customMeta\" data-dictid=\"e8b3c606051692777201faf2a1a357\">vestibular</span> glands (<strong>Bartholin glands</strong>) and numerous lesser <span class=\"customMeta\" data-dictid=\"e8b3c606051692777201faf2a1a357\">vestibular</span> glands.</li>\n\t<li>The <strong>clitoral glans</strong> is not located within the vestibule.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Vestibule of Vagina:</strong></p>\n\n<ul>\n\t<li>It is the area between the <span class=\"customMeta\" data-dictid=\"99041e636a169277719121835ed133\">labia</span> minora.</li>\n\t<li>It is a smooth area that starts just below the <span class=\"customMeta\" data-dictid=\"730ba6fe50169277718492019976c7\">clitoris</span> at the top and extends downward to the <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">posterior</span> <span class=\"customMeta\" data-dictid=\"9f0942c0b51692777190ee876713e5\">junction</span> of the <span class=\"customMeta\" data-dictid=\"99041e636a169277719121835ed133\">labia</span> minora.</li>\n\t<li><strong>Contents:</strong>\n\t<ul>\n\t\t<li>External urethral orifice<strong> (Option A)</strong></li>\n\t\t<li>Vaginal <span class=\"customMeta\" data-dictid=\"1aca482e7e169277719443d10dbe5f\">orifice</span> <strong> (Option B)</strong></li>\n\t\t<li>Openings of the two<strong> </strong>greater <span class=\"customMeta\" data-dictid=\"e8b3c606051692777201faf2a1a357\">vestibular</span> glands (<strong>Bartholin gland</strong>) <strong>(Option D)</strong></li>\n\t\t<li>Openings of numerous lesser <span class=\"customMeta\" data-dictid=\"e8b3c606051692777201faf2a1a357\">vestibular</span> glands (<strong>Skene's Glands</strong>) -<strong> </strong>mucous-secreting glands.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"500\" src=\"https://image.prepladder.com/content/spjsfNB7B4NNIqLYuRp11740542647.png\" width=\"500\" /></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/spjsfNB7B4NNIqLYuRp11740542647.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  }
];
        let quizName = '37 Development Of Gut, Pelvis & Perineum';
        const quizFilename = '37-development-of-gut-pelvis-perineum-525364cd.html';
        let hierarchy = ["PrepLadder", "qBank", "Anatomy"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>