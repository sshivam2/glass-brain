<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>233 Surgery Ini-Cet 2021 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Surgery
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">29</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "What is triage used for?",
    "choices": [
      {
        "id": 1,
        "text": "To prepare for a disaster"
      },
      {
        "id": 2,
        "text": "To asess the impact of a disaster"
      },
      {
        "id": 3,
        "text": "To classify priority of treatment"
      },
      {
        "id": 4,
        "text": "To rehabilitate following a disaster"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Triage</strong> is used to <strong>classify the priority of treatment</strong>.</p>\n<p>Triage is carried out at the <strong>site of a disaster</strong> to determine the <strong>priority for immediate medical attention, transportation, and hospital admission</strong>. This process involves the <strong>rapid classification of the injured</strong> based on the <strong>severity of their injuries</strong> and the <strong>likelihood of survival with timely medical intervention</strong>.</p>\n<p>Its objective is to provide maximum benefit to the largest number of injured individuals in a disaster situation. Victims whose prognosis would be favorable with simple medical care are given higher priority, while patients in critical condition, who may not benefit significantly from medical attention, are given lower priority. An internationally accepted <strong>four-colour coded</strong> is commonly used, which includes:</p>\n<ul>\n<li>Red - High priority attention or tranfer</li>\n<li>Yellow - Medium priority</li>\n<li>Green - Ambulatory patients</li>\n<li>Black - Dead or moribund patients</li>\n</ul>\n<p>Assessment of impact, rehabilatation and preparedness following a disaster are included in other phases of the disaster management cycle (options A, B and D).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d645b9d59e90406fbbeefece3dccd389x1280x2179.JPEG"
    ]
  },
  {
    "text": "Match the following",
    "choices": [
      {
        "id": 1,
        "text": "1-C,2-D,3-B,4-A"
      },
      {
        "id": 2,
        "text": "1-A,2-D,3-B,4-C"
      },
      {
        "id": 3,
        "text": "1-C,2-D,3-A, 4-B"
      },
      {
        "id": 4,
        "text": "1-D,2-C,3-A,4-B"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Intussusception:</strong></p>\n<p><strong>CT scan </strong>is the <strong>investigation of choice</strong>. It may show the characteristic <strong>target sign</strong>.</p>\n<p><strong>USG</strong> findings in intussusception include:<strong>&nbsp;</strong></p>\n<ul>\n<li><strong>Target sign</strong> (also known as the <strong>doughnut sign</strong>)</li>\n<li><strong>Pseudokidney sign</strong></li>\n<li>Crescent in a doughnut sign</li>\n</ul>\n<p>Barium enema shows the characteristic&nbsp;<strong>coiled spring appearance.</strong></p>\n<p>USG image showing the target sign:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8f5c54d092814a3ba871d25ab2b9aa26x720x816.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d2c09b8e5887467cbbb365772e526889x720x335.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9071c51a8c384f7a8ff213c44c2e54e8x720x742.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/355ca88a82ca4f2ab9f30b7a42f9a088x720x598.JPEG"
    ]
  },
  {
    "text": "A mother notices a swelling in the abdomen of her 3-year-old child while bathing him. He had a history of hematuria two weeks back which resolved spontaneously. On examination, a right-sided reniform ballotable mass was found. What all investigations will you do?",
    "choices": [
      {
        "id": 1,
        "text": "1 and 2"
      },
      {
        "id": 2,
        "text": "2 and 4"
      },
      {
        "id": 3,
        "text": "1, 2, and 3"
      },
      {
        "id": 4,
        "text": "1, 2, 3 and 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical features of <strong>hematuria</strong> and a <strong>ballotable renal mass</strong> in a <strong>3-year-old child </strong>are suggestive of <strong>Wilms tumor (Nephroblastoma)</strong>. <strong>CECT abdomen </strong>is used to identify the extent of the tumor, integrity of the other kidney, and metastasis. Wilms tumor is metabolically active and can concentrate fluorodeoxyglucose therefore <strong>PET/CT</strong> is also helpful to identify regional spread and metastatic lesions. A <strong>biopsy is discouraged</strong> as it may lead to disease upstaging. <strong>24-hour urinary vanillyl mandelic</strong> <strong>acid </strong>is measured to exclude <strong>neuroblastoma</strong>, which is an important differential diagnosis of Wilms tumor.&nbsp;</p>\n<p><strong>Wilms tumor</strong>&nbsp;is the <strong>most common primary malignant renal tumor </strong>in children, typically affecting <strong>children less than 5 years</strong>. After neuroblastoma, it is the <strong>second most common</strong> <strong>malignant abdominal tumor</strong> in <strong>childhood</strong>. It most commonly presents as an <strong>asymptomatic abdominal mass.&nbsp;</strong> Other findings include hypertension, abdominal pain, gross<strong> painless hematuria, </strong>and constitutional symptoms such as fever and weight loss.</p>\n<p>Imaging studies done to diagnose Wilms tumor include <strong>plain radiography, USG, and CT of the abdomen</strong> to demonstrate the renal mass.<strong> USG with doppler study</strong> of renal veins is useful in the evaluation of collecting system and to look for tumor thrombi in renal veins and inferior vena cava. A <strong>chest CT</strong> is done preoperatively to screen for pulmonary metastasis. A <strong>positron emission tomography </strong>(PET) scan is useful in identifying regional spread and metastatic lesions.&nbsp;A <strong>biopsy is discouraged</strong> in this condition as it results in disease upstaging, and is considered only in cases of unusual presentation or imaging.&nbsp;</p>\n<p><strong>Neuroblastoma</strong> is an important <strong>differential diagnosis</strong> to consider, as it can present similarly to Wilms tumor. It is usually seen in <strong>preschool-aged children</strong> and commonly presents as a <strong>palpable abdominal mass</strong>. The retroperitoneum is the most common site for this tumor. Therefore, it is essential to test for <strong>elevated vanillyl mandelic acid </strong>(VMA) in the urine<strong> </strong>in this patient to rule out neuroblastoma.</p>\n<p><strong>Children's oncology group </strong>(previously known as National Wilms Tumor study group) staging system for Wilms tumor:</p>\n<table>\n<tbody>\n<tr>\n<td>Stage I</td>\n<td>Tumour confined to the kidney and completely resected with negative lymph nodes.</td>\n</tr>\n<tr>\n<td>Stage II</td>\n<td>Tumour extends beyond the kidney but is completely resected with negative margins and lymph nodes.</td>\n</tr>\n<tr>\n<td>Stage III</td>\n<td>Residual tumour present following surgery confined to the abdomen, including gross or microscopic tumour.</td>\n</tr>\n<tr>\n<td>Stage IV</td>\n<td>Hematogenous metastases (lung, liver, bone, brain, etc.) or lymph node metastases outside the abdominopelvic region.</td>\n</tr>\n<tr>\n<td><strong>Stage V</strong></td>\n<td>Metastasis to opposite kidney (<strong>bilateral</strong>&nbsp;renal involvement).</td>\n</tr>\n</tbody>\n</table>\n<p>Treatment: Surgery and chemotherapy, with or without radiotherapy, are the mainstays of treatment.</p>\n<ul>\n<li><strong>Radical nephrectomy</strong> is the standard surgical procedure done. Routine sampling of the para-aortic, hilar, and paracaval lymph nodes should be done.</li>\n<li><strong>Nephron-sparing nephrectomy</strong> is done for children with bilateral disease or with a solitary kidney. Preoperative chemotherapy can be used in these cases to induce tumor shrinkage.</li>\n<li>The classical chemotherapy includes vincristine and dactinomycin with the addition of Adriamycin(Doxorubicin).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 26-year-old male presented with a large, round, firm, painless, right-sided testicular swelling associated with a dragging sensation. The left testis was normal. AFP was around 3000U. What is the next best step in the management?",
    "choices": [
      {
        "id": 1,
        "text": "FNAC"
      },
      {
        "id": 2,
        "text": "Scrotal trucut biopsy"
      },
      {
        "id": 3,
        "text": "High inguinal orchidectomy"
      },
      {
        "id": 4,
        "text": "Repeat tumor markers"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical features of a male patient presenting with a <strong>large, round, firm, and painless testicular mass</strong> with <strong>elevated AFP levels</strong> are suggestive of a <strong>non-seminomatous germ cell tumor </strong>(NSGCT). Among the given options, a <strong>high inguinal orchidectomy </strong>would be the next best step in the management.&nbsp;</p>\n<p>An <strong>ultrasound scan (USG)</strong> of the testis is <strong>mandatory to confirm the diagnosis</strong> of a testicular tumor and assess the contralateral testis. Since USG is not given as an option, the next best step in this scenario would be a high inguinal orchidectomy. <strong>FNAC and trucut biopsy are contraindicated</strong> due to <strong>risk of seeding of the scrotrum </strong> and upstaging of the cancer.</p>\n<div class=\"page\" title=\"Page 1799\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Radical inguinal orchiectomy</strong> is the <strong>gold standard treatment </strong>for excision of the primary tumor. <strong>Sperm cryopreservation </strong>should be offered before surgery.</p>\n</div>\n</div>\n</div>\n</div>\n<p>After removal of the affected testis, a metastatic workup is done with <strong>CT</strong> of the chest, abdomen, and pelvis to stage the disease as follows:</p>\n<ul>\n<li>Stage I: Localized tumor with no lymph node involvement or distant metastasis&nbsp;</li>\n<li>Stage II: Regional lymph node metastasis&nbsp;</li>\n<li>Stage III: Distant metastasis or nodal metastasis with elevated tumor markers</li>\n</ul>\n<p>Further management is based on staging with treatment options including <strong>active surveillance</strong>, combination chemotherapy with <strong>bleomycin-etoposide-cisplatin</strong> and <strong>retroperitoneal lymph node dissection</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman who had undergone cholecystectomy presented three days after the surgery with abdominal pain and tachycardia. WBC count is 11000 cells/mm3. USG showed fluid collection 5x5 cm in right sub-hepatic space. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Antibiotics and send home"
      },
      {
        "id": 2,
        "text": "USG guided pigtail catheter drainage"
      },
      {
        "id": 3,
        "text": "Laparoscopy and re-exploration"
      },
      {
        "id": 4,
        "text": "ERCP and T-tube placement"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Management strategy:</strong></p>\n<ul>\n<li><strong>Imaging:&nbsp;</strong>Ultrasonography to assess for a fluid collection and to evaluate the biliary tree<strong>&nbsp;</strong></li>\n<li><strong>Control of infection, limiting inflammation</strong>\n<ul>\n<li>Percutaneous drainage of periportal fluid collections</li>\n<li>Parenteral antibiotics</li>\n</ul>\n</li>\n<li><strong>Clear and thorough delineation of entire biliary anatomy</strong><br />\n<ul>\n<li>Endoscopic retrograde cholangiopancreatography&nbsp;(ERCP), especially if cystic-duct stump leak is suspected. It is both diagnostic and therapeutic.</li>\n<li>Magnetic resonance cholangiopancreatography<em>&nbsp;</em>(MRCP)</li>\n<li>HIDA scanning is also helpful to identify and quantitate bile leaks.</li>\n</ul>\n</li>\n<li><strong>Definitive surgical correction</strong><br />\n<ol>\n<li>Roux-en-Y choledochojejunostomy can be done for benign strictures or duct transections.</li>\n<li>Balloon dilatation with placement of a stent can be done for strictures of recent onset.</li>\n</ol>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5ed6d91654604bdfa99943340b3f5917x1280x2262.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cca21ce5b4ed4c6787168ca02b794de0x1280x3845.JPEG"
    ]
  },
  {
    "text": "The instrument shown in the image is used to insufflate the abdomen for laparoscopic surgery. What is its name?",
    "choices": [
      {
        "id": 1,
        "text": "Veress needle"
      },
      {
        "id": 2,
        "text": "Lind's needle"
      },
      {
        "id": 3,
        "text": "Jacob needle"
      },
      {
        "id": 4,
        "text": "Mathew needle"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Laparoscopic surgeries can be performed under general anesthesia or local anesthesia; although, general anesthesia is preferred. Carbon dioxide gas is usually used for insufflation, and the maximum pressure is typically in the range of 14-15 mm Hg. However, if the procedure is done under local anesthesia, nitrous oxide is used. Insufflation with nitrous oxide is stopped at a pressure of 10 mmHg or when 2L of gas has been insufflated.</p>\n<p><strong>Direct peritoneal access technique</strong> <strong>(Hasson technique)</strong>: The surgeon makes a small umbilical incision and gains access to the peritoneal cavity under direct vision by dissecting through the abdominal fascia and peritoneum. It is preferred in patients who have undergone previous abdominal operations where the small bowel may be adherent to the undersurface of the abdominal wound.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4309f2beeceb44ffb1c1c2eee88eb660.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/da65e8df307e44a78a41afe992a2585bx1280x964.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d3c2de52d3514c9bb9ea0d35ef266a69x572x362.PNG"
    ]
  },
  {
    "text": "A 20-year-old was brought to the ER after falling off his bicycle. His vitals were stable, but he had a bruise over the perineum and he had not passed urine yet. Blood was seen at the meatus and  the bladder was not palpable. How do you manage him?",
    "choices": [
      {
        "id": 1,
        "text": "Wait and send him home"
      },
      {
        "id": 2,
        "text": "Immediate insertion of foleys catheter"
      },
      {
        "id": 3,
        "text": "Suprapubic aspiration of urine"
      },
      {
        "id": 4,
        "text": "Wait for bladder to fill and urge to urinate"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Urethral injuries</strong> can be classified into:</p>\n<table style=\"height: 519px; width: 472.781px;\">\n<tbody>\n<tr style=\"height: 43px;\">\n<td style=\"width: 92px; height: 43px;\">&nbsp;Type</td>\n<td style=\"width: 188px; height: 43px;\"><strong>Proximal urethral injury</strong></td>\n<td style=\"width: 165.781px; height: 43px;\"><strong>Distal urethral injury</strong></td>\n</tr>\n<tr style=\"height: 82px;\">\n<td style=\"width: 92px; height: 82px;\">Site of injury</td>\n<td style=\"width: 188px; height: 82px;\">\n<ul>\n<li>Prostatic urethra</li>\n<li>Membranous urethra</li>\n</ul>\n</td>\n<td style=\"width: 165.781px; height: 82px;\">\n<ul>\n<li><strong>Bulbar urethra</strong></li>\n<li>Penile urethra</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 168px;\">\n<td style=\"width: 92px; height: 168px;\">Mechanism</td>\n<td style=\"width: 188px; height: 168px;\">Secondary to <strong>pelvic fracture</strong></td>\n<td style=\"width: 165.781px; height: 168px;\">\n<p>Occurs due to a blow to the perineum by:</p>\n<ul>\n<li><strong>Straddle injury</strong></li>\n<li><strong>Loose manhole covering</strong></li>\n<li>Gymnasium accidents</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 244px;\">\n<td style=\"width: 92px; height: 244px;\">Clinical features</td>\n<td style=\"width: 188px; height: 244px;\">\n<ul>\n<li>Urinary retention</li>\n<li>Blood at the urethral meatus</li>\n<li>High-riding prostate on digital rectal examination (<strong>Vermooten sign</strong>)</li>\n<li>Deep perineal hematoma</li>\n<li><strong>Injury</strong> to the<strong> membranous urethra</strong>&nbsp;leads to accumulation of urine in the&nbsp;<strong>deep perineal pouch</strong>.</li>\n</ul>\n</td>\n<td style=\"width: 165.781px; height: 244px;\">\n<ul>\n<li>Urinary retention</li>\n<li>Blood at the urethral meatus</li>\n<li>Perineal hematoma (<strong>Butterfly hematoma</strong>)</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>A <strong>retrograde urethrogram</strong> with <strong>water-soluble contrast</strong> is used for <strong>confirmation of the diagnosis</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ee069926e84141a7b30fc319b1a1bbf6x1280x1573.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6339791e8b734d5cb732e51ff3daf5d1x1280x2105.JPEG"
    ]
  },
  {
    "text": "A patient who was admitted after a road traffic accident is put on mechanical ventilation. He opens his eyes on verbal command and moves all four limbs spontaneously. Calculate his GCS.",
    "choices": [
      {
        "id": 1,
        "text": "Eyes-2, Verbal-1, Motor-5"
      },
      {
        "id": 2,
        "text": "Eyes-2, Verbal-NT, Motor-5"
      },
      {
        "id": 3,
        "text": "Eyes-3, Verbal-1, Motor-6"
      },
      {
        "id": 4,
        "text": "Eyes-3, Verbal-NT, Motor-6"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The patients GCS is<strong> Eyes-3, Verbal-NT, Motor-6.</strong></p>\n<p>It is calculated as follows:</p>\n<ul>\n<li><strong>Eye opening</strong>: Opening to verbal command - 3&nbsp;</li>\n<li><strong>Verbal response</strong>: In the case of endotracheal intubation, the verbal response score is noted as NT (non-testable)</li>\n<li><strong>Motor respone</strong>: Movement of all 4 limbs spontaneously - 6</li>\n</ul>\n<p>Total GCS score is not recorded since one of the components is non-testable.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the gauge size of the cannula used here?",
    "choices": [
      {
        "id": 1,
        "text": "14"
      },
      {
        "id": 2,
        "text": "16"
      },
      {
        "id": 3,
        "text": "18"
      },
      {
        "id": 4,
        "text": "20"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>green IV cannula </strong>shown in the image corresponds to a gauge size of <strong>18G.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/353113e882274efa9a76adb8697950a5.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 55-year-old female patient presented with a 4x3 cm lump in the right upper outer quadrant, with no axillary lymph node involvement. Mammography revealed BIRADS 4b staging. She underwent breast conservation surgery, and the final HPE report showed high nuclear grade DCIS with necrosis and 10 mm margin clearance. What is the further management?",
    "choices": [
      {
        "id": 1,
        "text": "Adjuvant radiotherapy"
      },
      {
        "id": 2,
        "text": "Adjuvant chemotherapy"
      },
      {
        "id": 3,
        "text": "Follow up 6 monthly for 2 years and then yearly follow up"
      },
      {
        "id": 4,
        "text": "Trastuzumab therapy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The next step in the management in this patient with <strong>ductal carcinoma in situ</strong> (DCIS) would be <strong>adjuvant radiotherapy, </strong>according to the <strong>University of Southern California/Van Nuys Prognostic Index </strong>(USC/VNPI)<strong>.</strong></p>\n<p>The USC/VNPI &nbsp;is a scoring system that evaluates the following four factors to predict recurrence in patients with DCIS who are undergoing conservative treatment:&nbsp;</p>\n<ul>\n<li>Tumor size</li>\n<li>Margin width</li>\n<li>Pathological classification (based on nuclear grade, and presence or absence of comedonecrosis)</li>\n<li>Age</li>\n</ul>\n<p>This index also provides recommendations for managing patients based on the calculated score.</p>\n<p><strong>Scoring system for&nbsp;USC/VNPI:</strong></p>\n<table style=\"height: 246px; width: 383.104px;\">\n<tbody>\n<tr>\n<td style=\"width: 105px;\"><strong>Parameters</strong></td>\n<td style=\"width: 80px;\"><strong>Score 1</strong></td>\n<td style=\"width: 82px;\"><strong>Score 2</strong></td>\n<td style=\"width: 78.1042px;\"><strong>Score 3</strong></td>\n</tr>\n<tr>\n<td style=\"width: 105px;\"><strong>Size(mm)</strong></td>\n<td style=\"width: 80px;\">&le;15</td>\n<td style=\"width: 82px;\">16-40</td>\n<td style=\"width: 78.1042px;\">&ge;41</td>\n</tr>\n<tr>\n<td style=\"width: 105px;\"><strong>Margin(mm)</strong></td>\n<td style=\"width: 80px;\">&ge;10</td>\n<td style=\"width: 82px;\">1 - 9</td>\n<td style=\"width: 78.1042px;\">&lt;1</td>\n</tr>\n<tr>\n<td style=\"width: 105px;\"><strong>Class</strong></td>\n<td style=\"width: 80px;\">Grade 1 or 2 without necrosis</td>\n<td style=\"width: 82px;\">Grade 1 or 2 with necrosis</td>\n<td style=\"width: 78.1042px;\">Grade 3 with or without necrosis</td>\n</tr>\n<tr>\n<td style=\"width: 105px;\"><strong>Age(years</strong></td>\n<td style=\"width: 80px;\">&gt;60</td>\n<td style=\"width: 82px;\">40-60</td>\n<td style=\"width: 78.1042px;\">&lt;40</td>\n</tr>\n</tbody>\n</table>\n<p>The current recommendations for the management of DCIS according to this index are:</p>\n<ul>\n<li><strong>Excision alone</strong> for scores <strong>4,5, and 6</strong></li>\n<li><strong>Excision plus radiotherapy</strong> for scores <strong>7,8, and 9</strong></li>\n<li><strong>Mastectomy</strong> for scores <strong>10,11, and 12</strong></li>\n</ul>\n<p>In this case,&nbsp;</p>\n<ul>\n<li>Tumor size of <strong>4cm (40mm)</strong>&nbsp;- score 2</li>\n<li><strong>10 mm </strong>margin clearance - score 1</li>\n<li><strong>High nuclear grade with necrosis</strong> - score 3</li>\n<li>Age of <strong>55 years</strong> - score 2</li>\n</ul>\n<p>The total score is 8; hence&nbsp;<strong>radiotherapy is indicated</strong> after breast conservation surgery.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A lady presents with abdominal pain. USG reveals multiple gall stones with no wall thickening. CBD diameter is 12 mm and serum bilirubin was 0.8. Alkaline phosphatase is 380 and GGT is raised by 5 times. What is the next best step of management?",
    "choices": [
      {
        "id": 1,
        "text": "MRCP"
      },
      {
        "id": 2,
        "text": "ERCP"
      },
      {
        "id": 3,
        "text": "Endoscopic ultrasound"
      },
      {
        "id": 4,
        "text": "Laparoscopic cholecystectomy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In this clinical scenario, a patient with <strong>gallstones</strong>, a <strong>dilated common bile duct</strong>, and an <strong>elevated alkaline phosphatase level</strong> raises suspicion for <strong>common bile duct stones</strong>. The next best step would be to perform <strong>magnetic resonance cholangiopancreatography</strong> (MRCP) to confirm their presence.</p>\n<div class=\"page\" title=\"Page 1434\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>A<strong> dilated common bile duct (&gt;8 mm)</strong> detected on ultrasound in a patient with <strong>gallstones</strong>, jaundice, <strong>biliary pain</strong> and an<strong> abnormal liver function panel </strong>(elevated bilirubin, alkaline phosphatase, and transaminases; but these can be normal in some cases)&nbsp;strongly indicates the presence of common bile duct stones (choledocholithiasis).</p>\n<p>If there is <strong>uncertainty</strong> regarding the presence of bile duct stones, as in this case where <strong>bilirubin levels are normal</strong>, <strong>MRCP</strong> offers precise anatomical visualization and exhibits high sensitivity and specificity for diagnosing choledocholithiasis.</p>\n<p>While endoscopic retrograde cholangiopancreatography (<strong>ERCP</strong>) is also highly effective in diagnosing choledocholithiasis, due to its <strong>invasive</strong> nature and the <strong>risks</strong> associated with the procedure, it is <strong>rarely used as a purely diagnostic modality</strong>. Instead, it is reserved for cases in which a <strong>therapeutic intervention</strong>, such as stone extraction or sphincterotomy, is <strong>planned</strong>.</p>\n</div>\n</div>\n</div>\n</div>\n<p>Treatment options:</p>\n<ul>\n<li><strong>ERCP</strong> along with <strong>sphincterotomy</strong> and stone removal.</li>\n<li>Laparoscopic common bile duct exploration</li>\n<li>Open common bile duct exploration is only done when endoscopic and laparoscopic methods are not feasible or when concomitant biliary drainage is needed.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are suturing a laceration in the ER using the interrupted suturing technique. What is the angle of needle placement?",
    "choices": [
      {
        "id": 1,
        "text": "60 degrees"
      },
      {
        "id": 2,
        "text": "70 degrees"
      },
      {
        "id": 3,
        "text": "80 degrees"
      },
      {
        "id": 4,
        "text": "90 degrees"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Subcuticular sutures:</strong> It is used for a better cosmetic appearance. It is also employed in situations where the edges of the wound are easily approximated. In this technique, small bites of the subcuticular tissues are taken on alternate sites of the wound, and then, they are gently pulled together. This causes an approximation of the wound edges without the risk of the cross-hatched markings of interrupted sutures.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/950eb22d037d4db48876d4b8fb38e04ex720x631.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4b94a68f08d746ba84a6a6797d990e7dx1280x1143.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c64dc6b67f0448feb8760ebdd82f185ex1280x1238.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/431e9713865d480bb365d5044894c535x1200x1196.JPEG"
    ]
  },
  {
    "text": "A 26-year-old male patient was brought to the emergency department with abdominal pain and obstipation for 3 days. He gives a history of bull gore to the abdomen 3 days back. His X-ray is given below. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hemothorax"
      },
      {
        "id": 2,
        "text": "Hollow viscus perforation"
      },
      {
        "id": 3,
        "text": "Pneumothorax"
      },
      {
        "id": 4,
        "text": "Intestinal obstruction"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>In <strong>large bowel obstruction</strong>, the presence of <strong>haustrations</strong> is a characteristic feature. Haustral folds are irregular and do not extend across the entire diameter of the bowel. However, it is important to note that haustral folds are absent in the caecum.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/97df23a936e349f28ab3bbe3af8a0e26.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bd1e84119c69416fb1a65f0ccd373deax1280x1410.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7128f4013ab1464f8e3900006f08e510x1280x1446.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6700f18336924ef8aa238557838072e0x1280x1282.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9cc573641ef94774b249856b6a829424x1280x1662.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6977312d05e04163a0fb9d10853b4c62x1280x1642.JPEG"
    ]
  },
  {
    "text": "A man presented with a history of stab injury over the arm. On examination, there was a hematoma present, and radial and ulnar pulses were not felt. A 3.5cm longitudinal tear is noted in the brachial artery. Which among the following is the best treatment option?",
    "choices": [
      {
        "id": 1,
        "text": "Primary repair with end to end anastomosis"
      },
      {
        "id": 2,
        "text": "Repair with great saphenous vein graft"
      },
      {
        "id": 3,
        "text": "Repair with prosthetic graft"
      },
      {
        "id": 4,
        "text": "Repair with saphenous vein patch"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In this patient, who has sustained a<strong> long tear</strong> to the brachial artery due to a stab injury, the best treatment option is to repair it with a <strong>great saphenous vein interposition graft</strong>&nbsp;harvested from the patient's <strong>uninjured</strong> leg.&nbsp;</p>\n<p>The most desirable graft used is the <strong>great saphenous vein</strong> . A native vein graft is preferable to a prosthetic graft because:</p>\n<ul>\n<li>Its <strong>elastic properties</strong> are comparable to that of an artery and enable pulsatile flow&nbsp;</li>\n<li>The <strong>diameter</strong> is <strong>similar</strong> to that of an <strong>extremity artery&nbsp;</strong></li>\n<li>It is <strong>not</strong> <strong>thrombogenic</strong> and has long term patency&nbsp;</li>\n</ul>\n<p>Other grafts that can be used are cephalic vein, lesser saphenous vein, and prosthetic conduits.&nbsp;Cephalic vein is not the first choice because it is less muscular than greater saphenous vein, and might also compromise the upper limb venous access in the already injured patient. Both the cephalic and the lesser saphenous veins present problems while harvesting in a trauma patient.</p>\n<p>Other options:</p>\n<p>Option A:&nbsp;<strong>Primary arterial repair with end-to-end anastomosis</strong> can be done only if the repair is <strong>tension-free</strong>. If the <strong>length</strong> of the injured area is <strong>long</strong>, vessel injuries cannot be repaired by primary end-to-end anastomoses and instead require an <strong>interposition graft.</strong>&nbsp;</p>\n<p>Option C:<strong> Prosthetic grafts</strong> are only preferred when there has been a <strong>trauma to the native saphenous vein</strong> or when there is a <strong>size mis-match</strong>. Polytetrafluoroethylene <strong>(PTFE)</strong> graft is commonly used.</p>\n<p>Option D: <strong>Saphenous vein patch</strong> is used in the closure of the arteriotomy site during <strong>carotid endarterectomies.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 24-year old male patient was brought to the emergency department following a road traffic accident. His heart rate was 100/min, respiratory rate was 24/min, and his chest X-ray is given below. Which of the following is contraindicated in him?",
    "choices": [
      {
        "id": 1,
        "text": "Nasogastric tube insertion"
      },
      {
        "id": 2,
        "text": "Chest tube insertion"
      },
      {
        "id": 3,
        "text": "Log roll"
      },
      {
        "id": 4,
        "text": "Epidural anaesthesia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given radiograph shows <strong>elevation of the left hemidiaphragmatic line</strong> along with the <strong>bowel</strong> <strong>loops </strong>and <strong>stomach </strong>seen in the pleural cavity. The probable cause would be a <strong>diaphragmatic hernia</strong> following <strong>blunt injury</strong> due to a road traffic accident. <strong>Chest tube insertion</strong> is <strong>contraindicated</strong> in <strong>diaphragmatic hernia </strong>due to risk of injury to bowel.</p>\n<p>Chest tube insertion/thoracostomy is indicated cases of pneumothorax, hemothorax, chylothorax, pleural effusion, and pleural empyema. Contraindications include pulmonary adhesions, pulmonary trauma, coagulopathy, and diaphragmatic hernia.</p>\n<p>Chest radiography performed after the placement of a <strong>nasogastric tube</strong> can be helpful in identifying any herniation of the stomach into the chest. Log roll and epidural anesthesia are not contraindicated in diaphragmatic hernia.</p>\n<p>Blunt trauma to the diaphragm results in a linear diaphragmatic rupture, which is typically large and accompanied by the herniation of abdominal contents into the chest. Acute diaphragmatic injuries require repair through the <strong>abdominal approach</strong> to address associated visceral injuries. The diaphragmatic edges are approximated using Allis clamps, and the defect is closed with a running 1-0 polypropylene suture.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/16d1eaac37c34d60b6dd2b2f9a6d5750.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient was received in the casualty following a road traffic accident. His BP was 90/60 mmHg and his pulse rate was 120/min. The emergency room physician asked you to replace the fluid loss in this patient. What is the maximum flow rate of fluid with the IV canula given in the image?",
    "choices": [
      {
        "id": 1,
        "text": "86ml/ min"
      },
      {
        "id": 2,
        "text": "96ml/ min"
      },
      {
        "id": 3,
        "text": "103 ml/ min"
      },
      {
        "id": 4,
        "text": "63 ml/ min"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>green</strong> IV cannula used in this hemodynamically unstable patient is an <strong>18G</strong> cannula, which has a <strong>maximum flow rate </strong>of<strong> 103 ml/ min.&nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6674782846614e17960e811c6ab9eb33.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The most common cause of bladder outlet obstruction in a male child is",
    "choices": [
      {
        "id": 1,
        "text": "Posterior urethral valve"
      },
      {
        "id": 2,
        "text": "Urethral atresia"
      },
      {
        "id": 3,
        "text": "Anterior urethral valve"
      },
      {
        "id": 4,
        "text": "Ureterocele"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Treatment is <strong>initially</strong> supportive by inserting a <strong>urinary catheter</strong> to relieve symptoms of obstruction.&nbsp;<strong>Definitive</strong> treatment is by<strong> urethroscopic destruction</strong> of the<strong> valves</strong> with continuing lifelong supportive treatment of the dilated urinary tract, recurrent urinary infections and uremia.</p>\n<p>Other options:</p>\n<p>Options B and C- Urethral atresia and anterior urethral valve are <strong>rare</strong> congenital anomalies that can also lead to urinary obstruction.</p>\n<p>Option D- <strong>Ureterocele</strong> is the <strong>cystic enlargement</strong> of the intramural ureter. It is common in females. They can present with features of urinary tract infection, bladder obstruction, or ureteral stones. Excretion urography will show <strong>cobra head appearance.</strong></p>\n<p>The image shown below depicts the \"cobra head\" sign in a patient with bilateral ureterocele.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8c347fb00214408eadcfbcf7d0dc8b76x1280x1369.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7089af4467734f4d835d09c58849bbfdx1279x1581.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cb0acccbae454cd3859cd83c84890547x516x630.JPEG"
    ]
  },
  {
    "text": "Which of the following statements are true about colon cancer?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, and 3 only"
      },
      {
        "id": 2,
        "text": "2, 3, and 4 only"
      },
      {
        "id": 3,
        "text": "2 and 4 only"
      },
      {
        "id": 4,
        "text": "1, 2, 3 and 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>All the 4 given statements on colon cancer are true:</p>\n<ul>\n<li class=\"p1\">Right and left colon cancers <strong>present differently</strong>. <strong>Left-sided</strong> tumors commonly cause <strong>obstruction</strong> and present with <strong>changes in bowel habits</strong> or <strong>rectal bleeding</strong>. On the other hand, <strong>right-sided</strong> tumors typically present with<strong> iron deficiency anemia</strong> or a <strong>mass</strong>.</li>\n<li class=\"p1\">While the majority of colorectal cancers occur <strong>sporadically</strong>, <strong>hereditary</strong> cases are also seen in patients with a family history of colorectal cancer. Genetic testing aids in early diagnosis for individuals with a positive family history.</li>\n<li class=\"p1\"><strong>Metformin</strong>, a commonly used biguanide compound for diabetes mellitus, reduces the risk of cancer, including colorectal cancer. It achieves this by disrupting cellular energy supply through the <strong>inhibition of aerobic glycolysis</strong>.</li>\n<li class=\"p1\"><strong>Liver</strong> is the most frequent site of <strong>distant metastasis</strong> for colorectal cancer, with metastases occurring via the <strong>portal venous system</strong>. The risk of hepatic metastasis increases with tumor size and grade. The lung is the second most common site of distant metastasis, also due to hematogenous spread. Carcinomatosis (diffuse peritoneal metastases) results from peritoneal seeding.</li>\n</ul>\n<p class=\"p1\">Note: Regional lymph node involvement is the most common form of spread of colorectal carcinoma and usually precedes distant metastasis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Frozen section was done during the surgery of carcinoma breast. This procedure will be useful for all except",
    "choices": [
      {
        "id": 1,
        "text": "To know sentinel lymph node"
      },
      {
        "id": 2,
        "text": "To know margin positivity"
      },
      {
        "id": 3,
        "text": "To know metastasis"
      },
      {
        "id": 4,
        "text": "To confirm definitive diagnosis immediately in all cases"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Frozen section</strong> analysis performed during breast carcinoma surgery is <strong>not suitable for definitive diagnosis</strong> due to technical challenges, potential quality issues in processing and staining, and the difficulty of obtaining accurate results.</p>\n<p class=\"p1\"><strong>Frozen section</strong> analysis is performed when a <strong>prompt biopsy report</strong> is required, allowing the surgeon to make immediate decisions regarding the further steps of management.</p>\n<ul>\n<li class=\"p1\">Frozen section analysis plays a valuable role in assessing involvement of <strong>sentinel lymph nodes during surgery </strong>(option A). When a positive node is identified intraoperatively, the surgeon can proceed with immediate axillary lymph node clearance. On the other hand, if the sentinel node does not show tumor involvement, further axillary dissection can be avoided.</li>\n<li class=\"p1\">It also helps in diagnosing <strong>nodal metastasis</strong> in clinically identified lymph nodes (option C). However, it may <strong>not detect subcapsular micrometastases</strong>.</li>\n<li class=\"p1\">While performing breast-conserving surgeries, <strong>assessment of tumor margins </strong>(option B) using frozen sections is helpful in ensuring complete tumor excision.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old woman presented with jaundice, fever, and abdominal pain. She is suspected to have cholangitis. Which of the following apart from abdominal pain makes up Reynold's pentad?",
    "choices": [
      {
        "id": 1,
        "text": "1,2,3,4"
      },
      {
        "id": 2,
        "text": "2,3,4,5"
      },
      {
        "id": 3,
        "text": "1,3,4,5"
      },
      {
        "id": 4,
        "text": "1,2,4,5"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Apart from abdominal pain,&nbsp;<strong>1, 2, 3, and 4</strong> form the <strong>Reynold's pentad</strong> which is seen in <strong>severe</strong>&nbsp;<strong>cholangitis</strong>.</p>\n<p>The components of Reynold's pentad are:</p>\n<ul>\n<li>Right upper quadrant abdominal pain</li>\n<li>Fever</li>\n<li>Jaundice</li>\n<li>Hypotension</li>\n<li>Altered sensorium</li>\n</ul>\n<p><strong>Cholangitis</strong> is the <strong>infection</strong> of the <strong>common bile duct</strong> (CBD) secondary to obstruction and increased intraluminal pressure due to CBD stones. Cholangitis presents with the classical <strong>triad </strong>of<strong> fever, right upper quadrant pain,</strong> and<strong> jaundice, </strong>referred to as<strong> Charcot's triad.</strong> It is a medical emergency and if left untreated, it may progress in severity and presents with <strong>Reynold's pentad</strong> - Charcot's triad with<strong> hypotension</strong> and <strong>altered mental status</strong> due to sepsis.&nbsp;</p>\n<p><strong>Abdominal ultrasound</strong> is performed to check for the presence of biliary stones and bile duct dilatations. The patient should be started immediately on a first-line broad-spectrum antibiotic and rehydration, along with biliary drainage. Biliary drainage is done using <strong>endoscopic retrograde cholangiopancreatography</strong> (ERCP). Biliary stones are the cause of cholangitis the majority of the time, which can be removed by endoscopic sphincterotomy during ERCP.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following drain is placed after mastectomy. Identify the type of drain.",
    "choices": [
      {
        "id": 1,
        "text": "Open"
      },
      {
        "id": 2,
        "text": "Closed"
      },
      {
        "id": 3,
        "text": "Semi open"
      },
      {
        "id": 4,
        "text": "Semi closed"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>Romo Vac drain</strong>, depicted in the image, is a <strong>closed type</strong> of drain commonly used after <strong>mastectomy</strong>.</p>\n<p><strong>Drains</strong> are placed at surgical sites to freely collect the air or fluids that may accumulate. This <strong>enhances wound healing</strong> by preventing the formation of unnecessary cavities. Drains are prophylactic in elective surgeries and therapeutic in emergency surgeries. Drains can be -</p>\n<ul>\n<li><strong>Open</strong> - They are based on the principle of <strong>gravity&nbsp;</strong></li>\n<li><strong>Semi-open</strong> - Their action is based on <strong>capillary effect</strong></li>\n<li><strong>Closed</strong> - They carry out their actions through <strong>suction</strong></li>\n</ul>\n<p>Suction drains are commonly used in chest, <strong>breast</strong>, abdominal, thyroid, and plastic surgeries. They remove intraperitoneal secretions, anastomotic leaks, and blood from hemorrhage at the surgical site.&nbsp;<strong>Romo Vac drain&nbsp;</strong>is a <strong>negative suction drain closed</strong> drain kept in the subcutaneous tissue. Romo Vac drain is indicated in modified radical mastectomy, subcutaneous swelling excision, and amputations.&nbsp;</p>\n<p>Special types of drains:</p>\n<ul>\n<li><strong>Chest drains</strong> are connected to an underwater seal to aid the exit of air from the pleural cavity. They are used in pneumothorax, pleural effusion, and hemothorax.&nbsp;</li>\n<li>After surgical exploration of the bile duct, the sphincter of Oddi goes into spasm. To facilitate drainage of bile, a <strong>T tube</strong> may be used.&nbsp;</li>\n</ul>\n<p>Drain insertion site care:&nbsp;The site of insertion of the drain is kept clean by drying and patting the drain insertion site with a clean towel after bath. The dressing is changed daily with folded gauze pieces placed below and above the drain site.&nbsp;</p>\n<p>Removal of drains: The catheter at the site is milked for residual collections. It is then clamped and the suture holding the catheter is cut. The tube is then gently pulled out and any clots at the perforation end are removed. The time of removal of drains for various conditions is as given below.&nbsp;</p>\n<ul>\n<li>Drains used in surgeries like <strong>thyroidectomy</strong> are usually removed within <strong>24 hours</strong>. Their main purpose is to cover postoperative bleeding.&nbsp;</li>\n<li>In a <strong>mastectomy</strong>, a drain is placed for <strong>5 days</strong> to collect serous collections.</li>\n<li>Drains used to cover the <strong>colorectal anastomoses</strong> are placed for <strong>5-7 days.</strong></li>\n<li>Common bile duct<strong> T-tube drains</strong> are usually placed for<strong> 10 days.</strong></li>\n<li>Drains for infections are removed when the infection subsides or when the content of the drain is minimal.</li>\n</ul>\n<p>After the drain is removed, a folded gauze is placed over the drain insertion area.&nbsp;The dressing can be removed after 24 hours. The patient may be given an antibiotic ointment to apply over the area for a week.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5f28c703283a4495bf02b228d4e68164.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Consider the following about hepatocellular carcinoma (HCC) and choose the correct statements.",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3"
      },
      {
        "id": 2,
        "text": "2, 3, 4"
      },
      {
        "id": 3,
        "text": "1, 3, 4"
      },
      {
        "id": 4,
        "text": "1 and 2 only"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The correct statements about hepatocellular carcinoma (HCC) are <strong>1,3 and 4</strong>. <strong>Lenvatinib</strong> is used in the <strong>advanced stages</strong> of hepatocellular carcinoma (HCC).</p>\n<div class=\"page\" title=\"Page 624\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>HCC is the most common cause of primary liver cancer. It is more commonly seen in males and the peak age group is between 65-70 years. The main risk factor for HCC is cirrhosis and associated chronic liver damage due to chronic infection by hepatitis B or C virus (HBV or HCV) infection, alcohol abuse, metabolic syndrome, or hemochromatosis.</p>\n<p>The<strong> incidence </strong>of<strong> HCC</strong> is <strong>increasing</strong>&nbsp;(statement 3) worldwide. This is contributed by the increase in HCV and HBV infections, along with lifestyle disorders like obesity.&nbsp;Obesity is associated with non-alcoholic fatty liver disease (NAFLD). This progresses on to non-alcoholic steatohepatitis (NASH) causing cirrhosis and hepatocellular carcinoma. Thus,&nbsp;<strong>NASH </strong>and <strong>NAFLD</strong> are <strong>risk factors</strong> of <strong>HCC </strong>(statement 4).</p>\n</div>\n</div>\n</div>\n</div>\n<p class=\"p1\">Barcelona-Clinic-Liver Cancer (BCLC) Classification is the commonly used staging system. It stages the tumors as follows:</p>\n<ul>\n<li>Very early HCC - Single, well-differentiated tumor &lt;2cm&nbsp;</li>\n<li>Early HCC - Single tumor or a maximum of 3 nodules &lt;3cm in diameter&nbsp;</li>\n<li>Intermediate HCC - Any other size or number confined to the liver&nbsp;</li>\n<li>Advanced HCC - Presence of cancer-related symptoms or tumors with macrovascular invasion (of any type, including branch, hepatic, or portal vein), lymph node involvement, or extrahepatic spread</li>\n<li>End-stage disease - Severe liver dysfunction with impaired quality of life&nbsp;</li>\n</ul>\n<p><strong>Treatment&nbsp;</strong></p>\n<p>Very early HCC is treated by ablation. Early HCC with a single nodule is resected but when there are multiple nodules over 3 cm, ablation or transplantation are considered.&nbsp;</p>\n<p>Intermediate stage HCC is treated by chemoembolization. <strong>Transarterial chemoembolization(TACE)</strong> is used for multinodular lesions (statement 1).</p>\n<p><strong>Advanced stages</strong> of the disease with macrovascular invasion are treated with systemic therapies. <strong>Lenvatinib</strong> and <strong>sorafenib</strong> are first-line drugs. Supportive care is given at the terminal stage of the disease.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 56-year-old patient with obstructive jaundice has a distended gall bladder and a dilated common bile duct and intrahepatic biliary radicles on ultrasound. Contrast-enhanced CT confirmed the same findings with no additional findings. Which of the following will be most useful to localize the cause?",
    "choices": [
      {
        "id": 1,
        "text": "Magnetic resonance imaging"
      },
      {
        "id": 2,
        "text": "Endoscopic ultrasound"
      },
      {
        "id": 3,
        "text": "Percutaneous transhepatic cholangiography"
      },
      {
        "id": 4,
        "text": "Endoscopic retrograde cholangiopancreatography"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Other options</strong>:</p>\n<p class=\"p1\">Option B-&nbsp;<strong>Endoscopic ultrasound</strong> is used for detecting CBD stones. It is considered as good as ERCP but it is invasive and requires expertise in endoscopic procedure and hence it is not done routinely.</p>\n<p class=\"p1\">Option C- <strong>Percutaneous transhepatic cholangiography</strong> (PTC) is rarely performed in patients with CBD stones. In patients where endoscopic or surgical procedures are contraindicated, it may be used for both diagnostic and therapeutic purposes.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5b313accf29b4436bdcc9a8ba51dbe4ex1280x1369.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/80dc4af43ec4461597a48b47e335b484x1279x1339.JPEG"
    ]
  },
  {
    "text": "All of the following are lower urinary tract symptoms except",
    "choices": [
      {
        "id": 1,
        "text": "Sudden urge to urinate"
      },
      {
        "id": 2,
        "text": "Incontinence while asleep"
      },
      {
        "id": 3,
        "text": "Incontinence when patient lies down and coughs"
      },
      {
        "id": 4,
        "text": "Incontinence during intercourse"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Incontinence during intercourse is not a<strong> lower urinary tract symptom </strong>(LUTS).&nbsp;</p>\n<p>The lower urinary tract symptoms (LUTS) can be classified as:</p>\n<p><strong>Storage LUTS:</strong>&nbsp;This occurs due to the failure of the bladder to act as a urine reservoir. It is commonly seen in the&nbsp;<strong>overactive bladder </strong>or <strong>bladder neuropathy.</strong> Symptoms related to storage LUTS are:</p>\n<ul>\n<li>Frequency - Increased frequency of voiding</li>\n<li>Nocturia - a patient has to wake up at least once at night to void</li>\n<li><strong>Urgency </strong>(option A) - the sudden uncontrollable desire to pass urine</li>\n<li>Urge incontinence - a large volume of involuntary urine leakage preceded by urgency</li>\n<li><strong>Stress incontinence </strong>(option C) - dribbling of urine during coughing, laughing, sneezing, or exercising. This occurs in women who have undergone vaginal deliveries.</li>\n<li><strong>Nocturnal enuresis </strong>(option B) - involuntary leakage of urine during sleep. It is commonly seen in elderly men having chronic retention of urine with overflow incontinence.</li>\n<li>Strangury - is a sensation of constantly needing to void. Commonly occurs due to a lower urinary tract infection.</li>\n</ul>\n<p><strong>Voiding LUTS:</strong> This is commonly seen in bladder outlet obstruction (BOO). Symptoms related to voiding LUTS are:</p>\n<ul>\n<li>Hesitancy - difficulty in initiating micturition</li>\n<li>Reduced stream</li>\n<li>Straining - muscular effort is needed to initiate or to improve the urinary stream</li>\n</ul>\n<p><strong>Post micturitional LUTS: </strong>This is also caused due to BOO. Symptoms related to post micturitional LUTS are:</p>\n<ul>\n<li>Incomplete emptying - a sensation that the bladder is full still remains after micturition</li>\n<li>Post micturition dribble - Involuntary passage of urine after the patient has finished passing urine.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Fluorescence in-situ hybridization(FISH) is required in which of the following IHC interpretations of Her2/neu?",
    "choices": [
      {
        "id": 1,
        "text": "1+"
      },
      {
        "id": 2,
        "text": "2+"
      },
      {
        "id": 3,
        "text": "3+"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Fluorescence in situ hybridization </strong>(FISH) for<strong> gene amplification&nbsp;</strong>should be performed in all cases of breast tumors&nbsp;with an <strong>immunohistochemistry</strong> (IHC) <strong>score </strong>of<strong> 2+.</strong></p>\n<p><strong>HER2/neu</strong> is a protein promoting rapid growth of breast cancer cells. All invasive breast cancers show undergo HER2/neu testing on biopsy or post-surgical removal. HER2 status is crucial for guiding breast cancer treatment. Two tests,<strong> immunohistochemistry</strong> (IHC) and<strong> fluorescence in situ hybridization</strong> (FISH), determine the presence of high HER2 protein levels. As FISH is costlier and more time-consuming, <strong>IHC</strong> is often performed as the <strong>initial test</strong>.</p>\n<p>Her-2/neu IHC interpretation:&nbsp;</p>\n<ul>\n<li>0 to 1+:&nbsp;<strong>Negative</strong> for HER2. These cancers do not respond to drugs targetting HER2 receptors.</li>\n<li>2+:&nbsp;<strong>Equivocal</strong>. Hence, <strong>f</strong><strong>urther testing with FISH is required to clarify the HER2 status.</strong></li>\n<li>3+:&nbsp;<strong>Positive</strong> for HER2. These cancers respond to drugs targetting HER2 receptors.</li>\n</ul>\n<p><strong>Transtuzumab</strong> and <strong>pertuzumab</strong> are monoclonal antibodies specifically used for HER2/neu-positive tumors.</p>\n<div class=\"page\" title=\"Page 954\">&nbsp;</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old male patient came to the outpatient department with complaints of hematuria. A 2x2 cm bladder mass is seen which is a low-grade transitional cell carcinoma. Which among the following is the ideal management?",
    "choices": [
      {
        "id": 1,
        "text": "Transurethral resection of the tumour"
      },
      {
        "id": 2,
        "text": "Resection with ileal conduit"
      },
      {
        "id": 3,
        "text": "Partial cystectomy with bladder reconstruction"
      },
      {
        "id": 4,
        "text": "Neo-adjuvant chemotherapy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This patient with <strong>low-grade 2x2 cm bladder cancer </strong>is likely to have <strong>non-muscle invasive bladder carcinoma (NMIBC)</strong> should undergo <strong>transurethral resection of the bladder tumor</strong> (TURBT) for accurate staging purposes.</p>\n<p>Bladder cancer is graded (G1/2/3) based on level of differentiation. NMIBC includes stages Tis (in-situ), Ta (non-invasive papillary carcinoma), and T1 (invades lamina propria) while muscle invasive bladder cancer (MIBC) includes stages T2 (invades muscularis propria), T3 (invades perivesicular soft tissue), and T4 (invades adfjacent organs). NMIBC accounts for almost 70% of cases at presentation.&nbsp;</p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Treatment:</span></p>\n<ul>\n<li><strong>NMIBC</strong> - The initial management of bladder tumors consists of transurethral resection of bladder tumor (<strong>TURBT</strong>) for accurate <strong>staging</strong>, which aids in determining the subsequent treatment plan.<strong> Intravesical therapy</strong>, involving chemotherapy (with <strong>mitomycin</strong>, doxorubicin, or epirubicin) or immunotherapy (BCG), is administered after TURBT to eradicate any remaining cancer cells. This therapy primarily targets the bladder lining and is not effective for cancers that have invaded deeper layers.</li>\n<li><strong>MIBC</strong> - The standard treatment for muscle-invasive tumors is <strong>radical cystectomy </strong>and pelvic lymphadenectomy <strong>with urinary diversion (ileal conduit) </strong>(option B). Systemic adjuvant and neoadjuvant chemotherapy with <strong>M-VAC</strong> (Methotrexate, vinblastine, doxorubicin, and cisplatin) has shown to be beneficial (option D).&nbsp;</li>\n</ul>\n<p>Option C: Partial cystectomy can be attempted in patients with focal bladder cancer, but the risk of recurrence remains high.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements are true?",
    "choices": [
      {
        "id": 1,
        "text": "2, 3, 4"
      },
      {
        "id": 2,
        "text": "1, 2, 3, 4"
      },
      {
        "id": 3,
        "text": "4 only"
      },
      {
        "id": 4,
        "text": "1, 3, 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Statements <strong>1</strong>,<strong> 3</strong> and <strong>4</strong> are true.&nbsp;</p>\n<p><strong>Screening</strong> with <strong>noninvasive tests</strong> for common cancers aims to achieve early diagnosis, enable less invasive surgical treatments with reduced complications, and potentially improve surgical cure and overall survival rates.</p>\n<p>Statement 1: <strong>Mammography</strong> as a routine screening tool has been found to lower breast cancer mortality at an acceptable cost. In the United Kingdom, an expert panel reported a 20% reduction in breast cancer mortality due to screening, despite the occurrence of <strong>overdiagnosis</strong>. The panel recommended continuing breast screening due to its significant benefits.</p>\n<p>Statement 3: <strong>Visual inspection</strong> of the oral cavity is widely used for <strong>screening oral cancer</strong>. The target population includes individuals aged 30 and above who use tobacco and/or alcohol. Visual inspection is advantageous due to its feasibility, safety, acceptability, accuracy in detecting precancerous and cancerous lesions, and cost-effectiveness in reducing oral cancer mortality.</p>\n<p>Statement 4:<strong> Pap smear</strong> is a <strong>screening</strong> test for <strong>cervical cancer</strong>. Cervical cancer screening should start at age 21. Women aged 21-29 should have Pap smear every 3 years, while women aged 30-65 should have both HPV and Pap co-test every 5 years.</p>\n<p>Other statements:</p>\n<p>Statement 2: American Cancer Society guidelines recommend colon cancer screening for average-risk individuals starting at age 50. Screening options include:</p>\n<ul>\n<li class=\"p1\">Yearly fecal occult blood testing (FOBT) / fecal immunohistochemical testing (FIT)</li>\n<li class=\"p1\">Flexible sigmoidoscopy every&nbsp;5 years,</li>\n<li class=\"p1\">FOBT/FIT and flexible sigmoidoscopy in combination every&nbsp;5 years, or</li>\n<li class=\"p1\">Colonoscopy every 10 years.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the correct method for measurement of nasogastric tube?",
    "choices": [
      {
        "id": 1,
        "text": "Tip of nose to ear lobule to xiphisternum"
      },
      {
        "id": 2,
        "text": "Angle of mouth to tragus to xiphisternum"
      },
      {
        "id": 3,
        "text": "Ala of nose to angle of mandible to xiphisternum"
      },
      {
        "id": 4,
        "text": "Angle of mouth to ear lobule to umbilicus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The correct method for measuring a nasogastric tube (Ryle's tube) is from the <strong>tip of the nose </strong>to the<strong> ear lobule </strong>to the<strong> xiphisternum.</strong></p>\n<p>Nasogastric (NG) tubes play a role in treating intestinal obstruction and can also be used to provide nutritional support. The commonly used method to determine the length of a nasogastric tube (NG tube) is the <strong>NEX method, which involves measuring&nbsp;</strong>from the<strong> tip of the nose </strong>to<strong> ear </strong>to<strong> xiphisternum</strong>. The approximate&nbsp;length<strong>&nbsp;</strong>to be inserted is 55cms.&nbsp;</p>\n<p>Ideally, Ryle's tube is inserted in the <strong>sitting position with the neck slightly flexed</strong>. Confirmation of the correct position is done by the following:</p>\n<ul>\n<li>Auscultation in the epigastric area while injecting a bolus of air</li>\n<li>An <strong>abdominal radiograph</strong> is the <strong>best way to confirm</strong> the <strong>location</strong> of the tube</li>\n</ul>\n<p>An NG tube placed for <strong>suction</strong> should ideally be located <strong>within the stomach</strong> to avoid potential damage to the duodenum. For <strong>decreased risk of aspiration</strong>, the ideal location for an NG tube is <strong>postpyloric </strong>(55-60cm).</p>\n<p><strong>Indications</strong> for NG tube :</p>\n<p>Drainage purposes:</p>\n<ul>\n<li>Conservative management of bowel obstruction and postop paralytic ileus</li>\n<li>Gastric decompression prior to emergency surgery</li>\n<li>Aspiration of gastric fluid</li>\n</ul>\n<p>Feeding purposes:</p>\n<ul>\n<li>Nutritional support in patients in motor neuron disease, stroke, and following upper aerodigestive tract procedures</li>\n<li>Administration of medication</li>\n</ul>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p><strong>Contraindications</strong>:</p>\n<p>Absolute:</p>\n<ul>\n<li>Severe midface trauma</li>\n<li>Recent nasal surgery</li>\n</ul>\n<p>Relative:</p>\n<ul>\n<li>Coagulation abnormality</li>\n<li>Esophageal varices</li>\n<li>Recent banding of esophageal varices</li>\n<li>Anastomoses in the stomach and esophagus</li>\n</ul>\n<p>Instruments tray used for nasogastric tube insertion:&nbsp;</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/25e7e3c855d14990949aa5c8f1f379f2x1280x1602.JPEG"
    ]
  },
  {
    "text": "A surgeon performs an appendicectomy with a grid iron incision. He later converts the incision to Rutherford Morrison incision. Which of the following are cut?",
    "choices": [
      {
        "id": 1,
        "text": "1, 3,  4"
      },
      {
        "id": 2,
        "text": "2, 3, 4"
      },
      {
        "id": 3,
        "text": "1, 2, 3"
      },
      {
        "id": 4,
        "text": "1, 2, 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The structures cut when the initial incision <strong>g</strong><strong>ridiron incision</strong>&nbsp;(McBurney's incision) is converted to the&nbsp;<strong>Rutherford Morrison incision&nbsp;</strong>are the <strong>external oblique, internal oblique,&nbsp;</strong>and<strong> transverse abdominis muscles</strong>.</p>\n<p>When the preoperative diagnosis is reasonably certain, the widely used incision for <strong>appendectomy</strong> is known as the <strong>gridiron incision</strong>. It is made perpendicular to a line connecting the anterior superior iliac spine to the umbilicus, with its center at McBurney's point. When better access is needed, the gridiron incision can be <strong>converted to a Rutherford Morison incision</strong> by extending the incision obliquely upwards and laterally.&nbsp;</p>\n<p>Rutherford Morison's incision is suitable for a <strong>para- or retrocecal appendix</strong> that is fixed. It is an <strong>oblique muscle-cutting incision</strong> starting from McBurney's point and extending upward and laterally as needed. <strong>All layers </strong>(skin, subcutaneous tissues, <strong>external oblique, internal oblique,&nbsp;transversus abdominis</strong>, and the peritoneum)&nbsp;are divided along the incision line.</p>\n<p>In recent years, the <strong>transverse skin crease (Lanz) incision</strong> has gained popularity due to improved exposure and ease of extension when necessary. This incision is placed approximately 2 cm below the umbilicus along the midclavicular-midinguinal line, with its length adjusted according to the patient's size and obesity. If required, the incision can be extended medially by retracting or dividing the rectus abdominis muscle (statement 4).</p>\n<p>When there is <strong>uncertainty</strong> in the diagnosis, especially in the presence of <strong>intestinal obstruction</strong>, a <strong>lower midline abdominal incision</strong> is preferred over a right lower paramedian incision.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a8ca8469c8e84b158acc6eb8fe7b48ddx1280x1585.JPEG"
    ]
  }
];
        let quizName = '233 Surgery Ini-Cet 2021';
        let hierarchy = ["Marrow", "PYQs", "Surgery"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>