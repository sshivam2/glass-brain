<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 6 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A man continuously calls women and achieves sexual gratification by talking obscenely and by sharing obscene pictures. This condition is termed as ________.",
    "choices": [
      {
        "id": 1,
        "text": "Frotterurism"
      },
      {
        "id": 2,
        "text": "Voyeurism"
      },
      {
        "id": 3,
        "text": "Scatologia"
      },
      {
        "id": 4,
        "text": "Coprophilia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<div>\n<p>Telephone and computer<strong> scatology-&nbsp;</strong>it involves <strong>obscene phone calling </strong>or sending of inappropriate&nbsp;<strong>videos/images</strong> to an unsuspecting person.</p>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following dimorphic fungi causes subcutaneous mycosis?",
    "choices": [
      {
        "id": 1,
        "text": "Sporothrix schenckii"
      },
      {
        "id": 2,
        "text": "Histoplasma capsulatum"
      },
      {
        "id": 3,
        "text": "Blastomyces dermatitidis"
      },
      {
        "id": 4,
        "text": "Penicilliosis marneffei"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The dimorphic fungus that causes subcutaneous mycosis is\u00a0<strong><em>Sporothrix schenckii</em>.</strong></p>\n<p><strong>Sporotrichosis </strong>is caused by<strong>\u00a0<em>Sporothrix schenckii,\u00a0</em></strong>a thermally dimorphic fungus that lives on vegetation. The infection occurs following <strong>traumatic</strong> inoculation.</p>\n<p>The lesion initially develops as a <strong>granulomatous nodule</strong> that may progress to form a necrotic or ulcerative lesion. The infection from the lesions in the skin and subcutaneous tissue can spread via the <strong>lymphatic channels</strong> to the lymph nodes. This condition is known as lymphocutaneous sporotrichosis. This disease is commonly encountered among\u00a0<strong>gardeners</strong> and <strong>forest workers</strong>.</p>\n<p>The image below shows lymphocutaneous sporotrichosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e191bf34494849a89ac6c819a8f63facx700x471.JPEG"
    ]
  },
  {
    "text": "Identify the organisation that has the given logo",
    "choices": [
      {
        "id": 1,
        "text": "National Vector Borne Disease Control Programme"
      },
      {
        "id": 2,
        "text": "National Leprosy Eradication Programme"
      },
      {
        "id": 3,
        "text": "Revised National Tuberculosis Control Programme"
      },
      {
        "id": 4,
        "text": "National Aids Control Programme"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image is the emblem of the <strong>National Leprosy Eradication Programme(NLEP)</strong></p>\n<p><strong>Characteristics of NLEP emblem :</strong></p>\n<ul>\n<li>The lotus in the&nbsp;<strong>NLEP Emblem&nbsp;</strong>symbolizes beauty and purity.</li>\n<li>A&nbsp;<strong>partially affected thumb</strong>; a&nbsp;<strong>normal fore-finger</strong>&nbsp;and the&nbsp;<strong>shape of house </strong>symbolize that leprosy can be cured and a patient with leprosy can be a useful member of the society.</li>\n<li>The&nbsp;<strong>rising</strong>&nbsp;<strong>sun</strong> symbolizes hope and optimism.</li>\n<li>The Emblem captures the spirit of hope and positivity in the eradication of Leprosy.</li>\n</ul>\n<p>The<strong>&nbsp;National Leprosy Eradication Programme</strong>&nbsp;is a centrally sponsored Health Scheme of the Ministry of Health and Family Welfare, Govt. of India.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/39db943741e64698a27c523e71042e37.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a6ac9ff20dc8476293e56f5a60be3c3ex358x255.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5c098dd04b6041e3867c32ca3734850cx500x414.JPEG"
    ]
  },
  {
    "text": "A neonate is being evaluated for the finding shown in the image. The mother's prenatal history is significant for viral exanthem in early pregnancy.  On examination, a grade 3 murmur is heard on auscultation. Which of the following is the most likely cause for this patient's murmur?",
    "choices": [
      {
        "id": 1,
        "text": "Patent ductus arteriosus"
      },
      {
        "id": 2,
        "text": "Ventricular septal defect"
      },
      {
        "id": 3,
        "text": "Atrial septal defect"
      },
      {
        "id": 4,
        "text": "Pulmonary stenosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows a bilateral cataract, which along with the antenatal history of viral exanthem is suggestive of <strong>c</strong><strong>ongenital rubella syndrome</strong>.&nbsp;<strong>Patent ductus arteriosus </strong>(PDA) is the <strong>most common</strong> congenital heart disease associated with rubella, followed by pulmonary artery stenosis (PS).</p>\n<p>Frequency of heart disease in congenital rubella: PDA &gt; PS &gt; VSD &gt; ASD.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b40f7f0c25054d328625a35e63106e68.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "An elderly male patient who is a known case of COPD, hypertension, and diabetes mellitus visits the OPD to review his medications. Which of the following criteria should be followed by the physician during the review?",
    "choices": [
      {
        "id": 1,
        "text": "Duke's criteria"
      },
      {
        "id": 2,
        "text": "Light criteria"
      },
      {
        "id": 3,
        "text": "Beer's criteria"
      },
      {
        "id": 4,
        "text": "Jones criteria"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><span data-preserver-spaces=\"true\"><strong>Beer's criteria</strong>\u00a0is widely used for <strong>reducing </strong>the use of <strong>potentially inappropriate medications</strong> and<strong> polypharmacy</strong> in the\u00a0<strong>g</strong></span><strong><span data-preserver-spaces=\"true\">eriatric\u00a0</span></strong><span data-preserver-spaces=\"true\">population.</span></p>\n<p><span data-preserver-spaces=\"true\"><strong>American Geriatric Society </strong>came up with Beer's criteria to review potentially inappropriate medications and avoid polypharmacy and deprescribe irrational medications due to the increased adverse effects of many drugs in the geriatric age group. This includes:</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Explicit list of drugs that should be avoided in older adults</span></li>\n<li><span data-preserver-spaces=\"true\">Drugs that should be avoided or be used at lower doses in patients with reduced kidney function</span></li>\n<li><span data-preserver-spaces=\"true\">Specific drug-disease and drug-drug interactions that are known to be harmful in older adults </span></li>\n</ul>\n<p><span data-preserver-spaces=\"true\">Long-acting benzodiazepines, proton pump inhibitors, antipsychotics, aspirin, dipyridamole, propoxyphene, and amitriptyline were among the most frequently prescribed inappropriate medications.</span></p>\n<p><span data-preserver-spaces=\"true\">Medications like glimepiride, rivaroxaban, tramadol, and certain antipsychotic medications in patients with Parkinson's disease are recently added to the use-with-caution list.</span></p>\n<p><strong>Other options:</strong></p>\n<ul>\n<li>The <strong>Light's Criteria</strong> is used to differentiate between different causes of pleural effusions (transudative vs exudative).</li>\n<li>The <strong>Jones Criteria</strong> is used for the diagnosis of acute rheumatic fever.\u00a0</li>\n<li>The <strong>Duke's Criteria</strong> is used for the diagnosis of Infective Endocarditis (IE)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following vaccines is not included in the Intensified Mission Indradhanush Scheme?",
    "choices": [
      {
        "id": 1,
        "text": "Rota virus vaccine"
      },
      {
        "id": 2,
        "text": "Japanese Encephalitis vaccine"
      },
      {
        "id": 3,
        "text": "Pneumococcal conjugate vaccine"
      },
      {
        "id": 4,
        "text": "Typhoid vaccine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Typhoid vaccine is not a part of the Intensified Mission Indradhanush scheme.&nbsp;</p>\n<p>The Intensified Mission Indradhanush has been introduced to ensure full immunization (more than 90%) by&nbsp;<strong>December 2018</strong>. It now includes <strong>12 vaccine preventable diseases</strong> (updated from the 7 VPDs that Mission Indradhanush focussed on). <strong>4 rounds of immunisation</strong> are proposed to be held for <strong>7 days each month</strong> (from the 7th-13th of each month). The diseases are:</p>\n<ul>\n<li>TB</li>\n<li>Polio</li>\n<li>Hep B</li>\n<li>Diphtheria</li>\n<li>Pertusis</li>\n<li>Tetanus</li>\n<li>Measles</li>\n</ul>\n<p>And included recently:</p>\n<ul>\n<li>Rotavirus diarrhoea</li>\n<li>Rubella (as MR vaccine)</li>\n<li>H. influenzae B diseases (as part of the pentavalent vaccine)</li>\n<li>Pneumococcal meningitis</li>\n<li>Japanese Encephalitis</li>\n</ul>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e35e514a661e4827be330f58fad8e4fcx647x404.JPEG"
    ]
  },
  {
    "text": "A patient is on magnesium sulfate therapy post-cesarean section for preeclampsia.  During her assessment after the 3rd maintenance dose, she has a respiratory rate of 8/min, a random blood glucose level of 240 mg/dL, oliguria, and a bilaterally absent knee reflex. Which of the following is the most appropriate way to manage this case?",
    "choices": [
      {
        "id": 1,
        "text": "Stop magnesium therapy and give IV calcium gluconate"
      },
      {
        "id": 2,
        "text": "Stop magnesium therapy and give oral calcium gluconate"
      },
      {
        "id": 3,
        "text": "Give half dose magnesium therapy and IV calcium gluconate"
      },
      {
        "id": 4,
        "text": "Skip the next maintenance dose and follow up"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><span style=\"font-size: 12pt;\">The next step in this patient with magnesium sulphate&nbsp;(<strong>MgSO<sub>4</sub>)&nbsp;toxicity </strong>is to <strong>stop magnesium therapy and give IV calcium gluconate.</strong></span></p>\n<p><span style=\"font-size: 12pt;\">MgSO4 is used as an <strong>anticonvulsant</strong> in the management of <strong>eclampsia</strong> and as prophylaxis in <strong>severe preeclampsia</strong><strong>.&nbsp;</strong>The therapeutic level of magnesium in eclampsia is<strong> 4&ndash;7 mEq/L</strong>.<strong>&nbsp;</strong>MgSO4 has to be administered up to <strong>24 hrs</strong> <strong>after</strong> the <strong>last</strong> <strong>seizure</strong> (in postpartum seizure) or <strong>delivery</strong>, whichever is later.</span></p>\n<p><span style=\"font-size: 12pt;\">Signs suggestive of&nbsp;<strong>magnesium toxicity </strong>include:</span></p>\n<ul>\n<li><span style=\"font-size: 12pt;\"><strong>Loss</strong> of <strong>deep tendon reflexes</strong></span></li>\n<li><span style=\"font-size: 12pt;\">Decreased respiratory rate <strong>&lt;12/min</strong></span></li>\n<li><span style=\"font-size: 12pt;\"><strong>Urine output&nbsp;</strong><strong>&lt;30 mL/h</strong></span></li>\n<li><span style=\"font-size: 12pt;\">Chest pain and heart block&nbsp;</span></li>\n<li><span style=\"font-size: 12pt;\">Visual changes,<strong> flushing</strong>, muscle paralysis, and <strong>drowsiness</strong></span></li>\n</ul>\n<p><span style=\"font-size: 12pt;\">It is treated by <strong>stopping magnesium therapy </strong>and giving slow IV&nbsp;<strong>calcium gluconate 10 mL&nbsp;</strong>(<strong>10% solution</strong>)<strong>&nbsp;</strong>infusion.&nbsp;Fluid loading and forced diuresis are done and estimation of serum magnesium and creatinine levels. Before administering the <strong>maintenance</strong> dose of&nbsp;MgSO<sub>4,&nbsp;</sub>the above signs are checked. IM injections of magnesium sulfate are continued only under the following conditions:</span></p>\n<ul>\n<li><span style=\"font-size: 12pt;\">The <strong>patellar reflex</strong> is <strong>present</strong></span></li>\n<li><span style=\"font-size: 12pt;\">Respiration is not depressed</span></li>\n<li><span style=\"font-size: 12pt;\">Urine output <strong>&gt;30 mL/h</strong></span></li>\n</ul>\n<p><span style=\"font-size: 12pt;\">&nbsp;The two commonly used MgSO<sub>4</sub> regimens are described below:&nbsp;</span></p>\n<table class=\"t1\" style=\"width: 531px;\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 102px; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><span style=\"font-size: 12pt;\"><strong>Regimen</strong></span></p>\n</td>\n<td class=\"td1\" style=\"width: 201.633px; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><span style=\"font-size: 12pt;\"><strong>Loading Dose</strong></span></p>\n</td>\n<td class=\"td1\" style=\"width: 226.367px; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><span style=\"font-size: 12pt;\"><strong>Maintenance Dose</strong></span></p>\n</td>\n</tr>\n<tr style=\"height: 114px;\">\n<td class=\"td1\" style=\"width: 102px; height: 114px;\" valign=\"top\">\n<p class=\"p1\"><span style=\"font-size: 12pt;\">Intramuscular (<strong>Pritchard</strong>)</span></p>\n</td>\n<td class=\"td1\" style=\"width: 201.633px; height: 114px;\" valign=\"top\">\n<p class=\"p1\"><span style=\"font-size: 12pt;\">4 g (20% solution) IV over 3&ndash;5 minutes, followed by 10 g (50%) deep IM&nbsp;(5 g in each buttock)</span></p>\n</td>\n<td class=\"td1\" style=\"width: 226.367px; height: 114px;\" valign=\"top\">\n<p class=\"p1\"><span style=\"font-size: 12pt;\">5 g (50%) IM 4 hourly in the alternate buttock</span></p>\n</td>\n</tr>\n<tr style=\"height: 72px;\">\n<td class=\"td1\" style=\"width: 102px; height: 72px;\" valign=\"top\">\n<p class=\"p1\"><span style=\"font-size: 12pt;\">Intravenous (Zuspan or <strong>Sibai</strong>)</span></p>\n</td>\n<td class=\"td1\" style=\"width: 201.633px; height: 72px;\" valign=\"top\">\n<p class=\"p1\"><span style=\"font-size: 12pt;\"><strong>4 g IV</strong> slow over 15&ndash;20 minute</span></p>\n</td>\n<td class=\"td1\" style=\"width: 226.367px; height: 72px;\" valign=\"top\">\n<p class=\"p1\"><span style=\"font-size: 12pt;\">1&ndash;2 g/h IV infusion</span></p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The instrument shown below is used for:",
    "choices": [
      {
        "id": 1,
        "text": "Creating pneumoperitoneum"
      },
      {
        "id": 2,
        "text": "Lumbar puncture"
      },
      {
        "id": 3,
        "text": "Bone marrow biopsy"
      },
      {
        "id": 4,
        "text": "Liver biopsy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given instrument is <strong>Veress Needle</strong>.&nbsp;It is used to produce a <strong>pneumoperitoneum</strong> in&nbsp;<strong>direct puncture laparoscopy.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7654aef16a5e4de3844ab854f64cd7d5.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e11c12fd974b4d4ea796acb0994e429bx1280x964.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fdd7306ac90945f88a41e497c9359f0ex720x540.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1fd8eff4edb74ac0b40aeb2e3e78ccb3x281x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2c5b304fff6e4e68b934c7b67767a750x720x368.JPEG"
    ]
  },
  {
    "text": "Where is the pneumotaxic centre located?",
    "choices": [
      {
        "id": 1,
        "text": "Pons"
      },
      {
        "id": 2,
        "text": "Midbrain"
      },
      {
        "id": 3,
        "text": "Medulla"
      },
      {
        "id": 4,
        "text": "Cerebellum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Pneumotaxic center</strong> is located in <strong>upper pons</strong>.</p>\n<p><strong>Neural regulation of respiration</strong>:</p>\n<p>It involves set of neurons located in pons and medulla:</p>\n<ul>\n<li>Pons:\n<ul>\n<li>Pneumotaxic centre</li>\n<li>Apneustic centre</li>\n</ul>\n</li>\n<li>Medulla: Pre-Botzinger complex\n<ul>\n<li>Dorsal respiratory group</li>\n<li>Ventral respiratory group</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/756d0166e98d43029a420ca06255a2c3x818x1056.PNG"
    ]
  },
  {
    "text": "What is the correct sequence of events in Southern blotting?\nA-  Transfer to a membrane, B- Hybridization with a labeled probe sequence, C- Separation of DNA fragments by electrophoresis",
    "choices": [
      {
        "id": 1,
        "text": "C,B,A"
      },
      {
        "id": 2,
        "text": "B,A,C"
      },
      {
        "id": 3,
        "text": "C,A,B"
      },
      {
        "id": 4,
        "text": "A,B,C"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>In Southern blotting DNA fragments are first separated by electrophoresis.</strong></li>\n<li>The DNA in the gel is then made single stranded by exposure to dilute alkali, and transferred by capillary action to the nylon membrane, which is laid over it.</li>\n<li>The relative positions of the different DNA fragments are thus preserved on the membrane.</li>\n<li>The membrane is then soaked in buffer containing the labelled probe, which base pairs with the DNA fragment of interest.</li>\n<li>The position of that fragment is then determined by autoradiographic (exposure of the membrane to X-ray film), or fluorescent detection of the hybridized probe.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7a976265f58f462db822daefeb3bf6a9x800x494.JPEG"
    ]
  },
  {
    "text": "A 31-year-old patient presented to the casualty with severe upper abdominal pain and recurrent retching without vomiting. A nasogastric tube insertion was tried but it was unsuccessful. His X-ray is shown below. Which of the following is most likely related to the above condition?",
    "choices": [
      {
        "id": 1,
        "text": "Borchardt's triad"
      },
      {
        "id": 2,
        "text": "Dieulafoy\u2019s triad"
      },
      {
        "id": 3,
        "text": "Quincke's triad"
      },
      {
        "id": 4,
        "text": "Saint's triad"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario and X-ray showing\u00a0a <strong>gas-filled viscus</strong> in the upper abdomen is suggestive of <strong>gastric volvulus</strong>. Most likely related to gastric volvulus is the\u00a0<strong>Borchardt's triad</strong>.</p>\n<p>Gastric volvulus is the\u00a0<strong>rotation</strong> of the <strong>gastric fundus</strong> occurring on the longitudinal (organoaxial) or vertical (mesenteroaxial) axis of the stomach. This occurs due\u00a0to the <strong>laxity</strong> in the peritoneal attachment of the stomach.</p>\n<p>The <strong>Borchardt triad</strong> comprises of:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Sudden-onset severe upper abdominal pain</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Recurrent retching with minimal vomitus</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Inability to pass a nasogastric (NG) tube</li>\n</ul>\n<p><strong>Organoaxial</strong> gastric volvulus is a torsion that occurs along the <strong>longitudinal</strong> axis of the stomach It is the <strong>most common</strong> type and often occurs acutely. It is associated with a <strong>diaphragmatic defect</strong>.</p>\n<p><strong>Mesenteroaxial </strong>gastric volvulus is a torsion that occurs along the <strong>vertical</strong> axis. It is partial (&lt;180 degrees) and recurrent. It is not associated with a diaphragmatic defect.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3597b7b5cd5d45c9b310d90390d5b499.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/296772ab24de4fa28f3680b3a90730a3x339x480.PNG"
    ]
  },
  {
    "text": "A 60-year-old patient presents with chest pain on the left side radiating to the arm and jaw on the same side. Cardiac troponins are found to be raised. What is the diagnosis based on this ECG?",
    "choices": [
      {
        "id": 1,
        "text": "Anterior wall MI"
      },
      {
        "id": 2,
        "text": "Lateral wall MI"
      },
      {
        "id": 3,
        "text": "Inferior wall MI"
      },
      {
        "id": 4,
        "text": "Posterior wall MI"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given ECG is of <strong>posterior wall MI.</strong></p>\n<p>The ECG findings in posterior wall MI include,</p>\n<ul>\n<li>Reciprocal ST depressions in leads V1 to V3.&nbsp;Posterior wall ischemia is indirectly recognized in this way</li>\n<li>Tall and broad R waves (&gt;30ms)&nbsp;in V2 and V3</li>\n<li>Dominant R waves (R/S ratio &gt; 1) in V2</li>\n<li>Upright terminal portions of the T waves in V2 and V3\n<div class=\"layoutArea\">&nbsp;</div>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4c05f67021ce4d02ae33c976204eaeb5.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient with a direct hernia is posted for Lichtenstein repair. Which of the following is used in the mesh?",
    "choices": [
      {
        "id": 1,
        "text": "Polyglycolic acid"
      },
      {
        "id": 2,
        "text": "Polypropylene"
      },
      {
        "id": 3,
        "text": "Polyacrylamide"
      },
      {
        "id": 4,
        "text": "Polyglactin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>A Lichtenstein mesh repair</strong> is currently one of the most frequently used methods for treating an inguinal hernia. In this technique, a cone-shaped plug of <strong>polypropylene mesh</strong> is used.</p>\n<p><strong>Polypropylene</strong>\u00a0is a\u00a0<strong>monofilament, non-absorbable</strong>\u00a0suture material. It is a\u00a0<strong>propylene</strong>\u00a0polymer. It is used in\u00a0plastic surgery, cardiovascular surgery, hernia repair, ophthalmic surgery, and\u00a0<strong>general surgical subcuticular skin closure.\u00a0Polypropylene mesh</strong>\u00a0is used for\u00a0<strong>hernia</strong>\u00a0repair.</p>\n<p>A <strong>Lichtenstein mesh repair</strong> is done for the <strong>reconstruction</strong> of the <strong>inguinal floor</strong> in <strong>adults</strong>. It is an <strong>anterior tension-free mesh repair</strong> that reduces the chances of\u00a0<strong>recurrence</strong> of a hernia. A piece of prosthetic nonabsorbable <strong>mesh is used</strong> to fit the canal to bridge the defect in this repair.</p>\n<p>Other surgical methods used for the repair of a hernia are:</p>\n<ul>\n<li><strong>Bassini repair</strong> - It is done for the <strong>reconstruction</strong> of the <strong>inguinal floor</strong> in <strong>adults</strong>. In this method, a <strong>mesh is not</strong> used. It is associated with a <strong>high</strong>\u00a0<strong>recurrence</strong>\u00a0and is not used frequently now. It is used only in cases of hernial strangulation and peritonitis where the use of a mesh is not preferred. It is performed by <strong>suturing</strong> the transversus abdominis and internal oblique musculoaponeurotic arches/<strong>conjoined tendon</strong> to the<strong> inguinal ligament</strong>.\u00a0</li>\n<li><strong>Shouldice repair</strong>\u00a0- It is a\u00a0<strong>multilayered repair,</strong>\u00a0where the posterior wall of the inguinal canal is strengthened by <strong>continuous sutures.</strong>\u00a0It involves <strong>double-breasting</strong> of the<strong> transversalis fascia</strong>. It is associated with a\u00a0<strong>very low recurrence rate.</strong></li>\n<li><strong>Gilbert repair</strong> (plug and patch repair) - It\u00a0is an <strong>extension</strong> of <strong>Lichtenstein\u2019s original mesh repair</strong> and has now become the <strong>most commonly</strong> performed <strong>primary anterior inguinal hernia repair</strong>. In this technique, a <strong>cone-shaped plug</strong> of<strong> polypropylene mesh</strong> is used. It is deployed like an upside-down umbrella when inserted into the internal inguinal ring to occlude the hernia</li>\n<li><strong>McVay repair </strong>(Cooper's ligament repair)<strong>\u00a0</strong>is used for the correction of direct inguinal hernia, large indirect hernia,<strong> recurrent hernia</strong>, femoral hernias (particularly suited for <strong>strangulated femoral hernias</strong>). In this method, the\u00a0transversus abdominis aponeurosis is approximated to Cooper's ligament.</li>\n<li><strong>Stoppa-Rives repair</strong>\u00a0- It is used for the repair of large, recurrent, or bilateral hernias. In this method, a sub-umbilical\u00a0<strong>midline incision </strong>is given to place a<strong> large mesh</strong> into the <strong>preperitoneal space.</strong></li>\n<li><strong>Herniotomy</strong> - It is used to treat <strong>inguinal hernia</strong> in a<strong> child </strong>which\u00a0occurs due to the<strong> presence</strong> of a\u00a0<strong>patent processus vaginalis</strong>. Therefore in herniotomy, the repair of the inguinal ring is not done</li>\n</ul>\n<p><strong>Other options:</strong></p>\n<ul>\n<li><strong>Polyglactin (Vicryl)</strong>- This is an\u00a0<strong>absorbable suture material</strong>\u00a0and is commonly used in gut anastomoses, biliary anastomoses, and kidney and ureter surgeries.</li>\n<li><strong>Polyglycolic acid-</strong> Used for other <strong>absorbable</strong> sutures, in particular where slightly<strong> longer wound support </strong>is required.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The Renal function is best assessed by:",
    "choices": [
      {
        "id": 1,
        "text": "Tc 99m DMSA"
      },
      {
        "id": 2,
        "text": "Tc 99m DTPA"
      },
      {
        "id": 3,
        "text": "Tc 99m MAG3"
      },
      {
        "id": 4,
        "text": "Tc 99m pertechnetate"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The Renal function is best assessed by<strong> Tc-99m MAG3 (mercaptoacetyltriglycine). </strong>It<strong>&nbsp;</strong>is eliminated through kidney as via both <strong>glomeruli filtration and tubular excretion</strong>.</p>\n<ul>\n<li><strong>Tc-99m DMSA (dimercaptosuccinic acid)</strong> is used to evaluate renal structure and morphology, particularly in paediatric imaging for detection of scarring and pyelonephritis.</li>\n<li>DMSA is an ideal agent for the assessment of renal cortex as it binds to the sulfhydryl groups in proximal tubules at the renal cortex with longer retention than other agents. Also, it allows better assessment of differential renal function</li>\n<li><strong>Tc-99m DTPA (diethylene-triamine-pentaacetate)</strong> is <strong>cleared only via glomeruli with no tubular excretion. Hence used for direct measurement of GFR.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with a prolonged fever for 2 weeks and new-onset seizures. Transthoracic echocardiography (TTE) obtained on admission showed a 1.5 cm vegetation on the tricuspid valve. Multiple painless skin lesions are present on the hands as shown in the image below. What are these lesions called?",
    "choices": [
      {
        "id": 1,
        "text": "Osler\u2019s node"
      },
      {
        "id": 2,
        "text": "Janeway lesion"
      },
      {
        "id": 3,
        "text": "Roth's spot"
      },
      {
        "id": 4,
        "text": "Pink rim rashes"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The skin lesions shown in the image are&nbsp;<strong>Janeway lesions. </strong>They are <strong>non-tender</strong>, erythematous or hemorrhagic macular or nodular lesions, which are present on the palms or soles.</p>\n<p>Patients with infective endocarditis can have cardiac or non-cardiac manifestations.</p>\n<p>Cardiac manifestations of IE:</p>\n<ul>\n<li>Presence of&nbsp;<strong>new regurgitant murmurs</strong></li>\n<li><strong>Congestive heart failure</strong>&nbsp;due to valve dysfunction</li>\n<li>Perivalvular abscesses and intracardiac fistulae- This is caused due to the extension of infection beyond the valves and into the adjacent myocardial tissue</li>\n<li>Conduction system defects- due to the damage of the interventricular septum by the abscess.</li>\n<li>Embolization of coronary arteries</li>\n</ul>\n<p>Noncardiac manifestations of IE are:</p>\n<ul>\n<li><strong>Arterial emboli-&nbsp;</strong>causing pain of ischemia of the organs</li>\n<li><strong>Osler's nodes</strong>-are <strong>painful</strong>, <strong>red</strong>, nodular lesions usually located in the pads of the fingers and toes</li>\n<li><strong>Roth's spots</strong>- retinal hemorrhages with a pale center</li>\n<li><strong>Janeway lesions-&nbsp;</strong>In contrast to Osler's nodes, these are faint, red, <strong>painless</strong> macules on palms and soles. They occur as a result of septic embolization and are commonly associated with staphylococcal IE.</li>\n<li>Glomerulonephritis</li>\n<li>Positivity for<strong>&nbsp;rheumatoid factor</strong></li>\n<li>Petechiae on oral and conjunctival mucosa</li>\n<li>Splinter subungual haemorrhages-painless, dark red lines in the nailbed.</li>\n<li>Mycotic aneurysms</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9e5b9e328f9a4854941dbb69ffe8e003.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c3d63edfc18c4f9f94efcc959cf489eex600x468.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6cf5ec365ee3472488fbff96ed832bf2x768x1024.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/11f090868c9b4d408151ffb0142b228dx720x548.JPEG"
    ]
  },
  {
    "text": "You are performing a cardiotocograph on a woman in labor, and your findings are shown below. What could be the possible cause of these findings?",
    "choices": [
      {
        "id": 1,
        "text": "Umbilical cord compression"
      },
      {
        "id": 2,
        "text": "Fetal head compression"
      },
      {
        "id": 3,
        "text": "Uteroplacental insufficiency"
      },
      {
        "id": 4,
        "text": "Fetal hypoxia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p class=\"p1\">The given cardiotocograph shows decelerations that are variable with respect to the size, shape, depth, duration, and timing of uterine contractions. This is indicative of <strong>variable decelerations</strong>, and the likely cause among the given options is <strong>umbilical cord compression</strong></p>\n<p>Baseline variability is observed in many conditions such as:</p>\n<p><strong>1. Acceleration:</strong> Transient <strong>increase in fetal heart rate </strong>(FHR) by <strong>15 bpm</strong> or more, lasting for <strong>at least 15 seconds</strong>. It denotes intact neurohormonal and cardiovascular activity and, therefore, a <strong>healthy fetus</strong>.</p>\n<p><strong>2. Deceleration</strong>: Transient <strong>decrease in FHR </strong>below the baseline by<strong> 15 bpm</strong> or more and <strong>lasting &ge;15 seconds</strong>. Three basic types of deceleration are early, late, and variable:</p>\n<ul>\n<li><strong>Early</strong> deceleration/&nbsp;<strong>Type I Dips</strong>: Slowing of FHR and in most cases, the phases of the deceleration (onset, nadir, and recovery)&nbsp;<strong>coincide</strong>&nbsp;with those of the uterine contraction (beginning, peak, and ending). It is due to <strong>head compression</strong> (vagal nerve activation).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3ab61e1345ab47fb8c71565494d5b2c9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/033407835bb44533b38c2f8779e511f6x1279x1228.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e2d898d60ccc46a9b57829f8e273c12dx720x637.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/530baff365cf48d389485c5e72e8ee11x1280x1092.JPEG"
    ]
  },
  {
    "text": "A 32-year-old male sustained head injury about 6 weeks back, following a road traffic accident. Now, he complains of increased frequency of micturition and passing large quantities of urine. He also complains of excessive thirst. Lesion involving which of the following nuclei of the hypothalamus is likely to cause the given condition?",
    "choices": [
      {
        "id": 1,
        "text": "Preoptic nucleus"
      },
      {
        "id": 2,
        "text": "Supraoptic nucleus"
      },
      {
        "id": 3,
        "text": "Suprachiasmatic nucleus"
      },
      {
        "id": 4,
        "text": "Paraventricular nucleus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<div class=\"page\" title=\"Page 655\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Lesion of the <strong>supraoptic nucleus</strong>&nbsp;of the <strong>hypothalamus</strong> causes inhibition of the synthesis of <strong>vasopressin</strong> leading to <strong>diabetes insipidus.</strong></p>\n<p><strong>The hypothalamus</strong> is a part of the <strong>diencephalon</strong> that lies below the thalamus. <strong>Anteriorly,</strong> the preoptic area is included in the hypothalamus. <strong>Posteriorly,</strong> it merges with the tegmentum of the midbrain. <strong>Laterally,</strong> it is bounded by the internal capsule.</p>\n<p>Microscopically, the hypothalamus is divided into multiple nuclei.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The cystographic appearance shown below is seen in ______.",
    "choices": [
      {
        "id": 1,
        "text": "Thimble bladder"
      },
      {
        "id": 2,
        "text": "Neurogenic bladder"
      },
      {
        "id": 3,
        "text": "Bladder carcinoma"
      },
      {
        "id": 4,
        "text": "Schistosomiasis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Christmas tree bladder</strong> or <strong>pine cone</strong> bladder is a cystogram appearance which usually seen in <strong>severe neurogenic bladder with increased sphincter tone</strong>.</p>\n<ul>\n<li>A pine cone bladder or Christmas tree bladder is a cystogram appearance in which the bladder&nbsp;is elongated and pointed with a thickened trabeculated wall.</li>\n<li>It is typically seen in (detrusor sphincter dyssynergia) due to suprasacral lesions (above S2-S4) or epiconal lesions (in and around S2-S4).</li>\n<li>Neurogenic bladder is a term applied to a dysfunctional urinary bladder that results from an injury to the <strong>central or peripheral nerves that control and regulate urination.</strong></li>\n<li>This finding is <strong>not pathognomonic of a neurogenic bladder</strong>. It can also be seen in patients with lesions anywhere along the sacral reflex arc. Occasionally, it is also seen in bladder neck obstruction of a non-neurogenic cause.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/540b985d737c4b059505ddd530a4f41f.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A farmer presents with a painless nodule on his left foot which ruptured to produce draining sinuses, with discharge of granules. What is this clinical condition likely to be?",
    "choices": [
      {
        "id": 1,
        "text": "Sporotrichosis"
      },
      {
        "id": 2,
        "text": "Chromoblastomycosis"
      },
      {
        "id": 3,
        "text": "Mycetoma"
      },
      {
        "id": 4,
        "text": "Phaeohyphomycosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>This patient presents with a typical case of <strong>mycetoma</strong>, mostly seen in tropical countries.</li>\n<li>It is caused by various types of <strong>Fungi&nbsp;</strong>(<strong>Eumycetoma</strong>) or <strong>filamentous bacteria</strong> (<strong>actinomycetes</strong>).</li>\n<li>It presents with a <strong>painless nodule</strong> but with time, <strong>papules</strong> and <strong>pustules</strong> may form which breaks down to form <strong>draining sinuses, with discharge of granules.</strong></li>\n</ul>\n<p><strong>Image:</strong> Mycetoma of Foot</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/18d37ca228ff470bac0025f86c31bc9bx512x381.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/982b3a4f31714e43afc8072d523a4823x359x546.PNG"
    ]
  },
  {
    "text": "Which of the following features would you not expect to see in patients with Parkinson\u2019s disease?",
    "choices": [
      {
        "id": 1,
        "text": "Genitourinary disturbances"
      },
      {
        "id": 2,
        "text": "Orthostatic hypotension"
      },
      {
        "id": 3,
        "text": "Exaggerated deep tendon reflexes"
      },
      {
        "id": 4,
        "text": "Micrographia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Exaggerated deep tendon reflexes are not a feature of Parkinson's disease. Cardinal motor features in PD include:</p>\n<ul>\n<li>Resting tremors</li>\n<li>Bradykinesia</li>\n<li>Rigidity</li>\n<li>Gait disturbance / postural instability</li>\n</ul>\n<p>Mnemonic: TRAP - <strong>T</strong>remors + <strong>R</strong>igidity + <strong>A</strong>kinesia + <strong>P</strong>ostural instability</p>\n<ul>\n<li>Other motor features include:\n<ul>\n<li>Micrographia</li>\n<li>Masked facies (hypomimia)</li>\n<li>Reduced eye blinking</li>\n<li>Soft voice (hypophonia)</li>\n<li>Dysphagia</li>\n</ul>\n</li>\n<li>Non-motor features are:\n<ul>\n<li>Anosmia</li>\n<li>Sensory disturbance (pain)</li>\n<li>Mood Disorders (depression)</li>\n<li>Sleep disturbances (rapid eye movement behavior disorder)</li>\n<li>Autonomic:\n<ul>\n<li>GI disturbances</li>\n<li>Genitourinary disturbances</li>\n<li>Sexual dysfunction</li>\n<li>Orthostatic hypotension</li>\n</ul>\n</li>\n<li>Cognitive impairment</li>\n</ul>\n</li>\n</ul>\n<p>Parkinson&rsquo;s disease(PD)<strong>&nbsp;</strong>is the second most common neurodegenerative disorder after Alzheimer's disease.&nbsp;<strong>UK Brain Bank criteria</strong> is used for the diagnosis of PD.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following instrument is:",
    "choices": [
      {
        "id": 1,
        "text": "Ballenger swivel knife"
      },
      {
        "id": 2,
        "text": "Killian\u2019s nasal gouge"
      },
      {
        "id": 3,
        "text": "Eves\u2019 tonsil snare"
      },
      {
        "id": 4,
        "text": "Leighton tonsillotome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<div class=\"page\" title=\"Page 470\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Ballenger swivel knife.</strong></p>\n<ul>\n<li>Used in removal of septal cartilage in SMR (Submucosal resection) operation.</li>\n<li>The blade of the knife revolves automatically and changes direction when cutting the cartilage anteroposteriorly downwards and posteroanteriorly.</li>\n<li>Different sizes of blades are present.</li>\n<li>Can be used to harvest septal cartilage as a graft for reconstruction.</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b45cdf8aad894576aa4b11d190317a4a.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/22b299d5d9f94fb4bdf66512f88be916x1280x883.JPEG"
    ]
  },
  {
    "text": "A man is speaking about his mother's death and laughing. He is said to have:",
    "choices": [
      {
        "id": 1,
        "text": "Incongruent affect"
      },
      {
        "id": 2,
        "text": "Labile affect"
      },
      {
        "id": 3,
        "text": "Affective flattening"
      },
      {
        "id": 4,
        "text": "Inappropriate affect"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The man is speaking about his mother's death and is expected to be sad, but he is laughing. His laughter is not congruent with the content of his speech and thoughts. He has an <strong>incongruent affect.&nbsp;</strong><strong>Congruency</strong>&nbsp;is described in relation to the<strong> thought content</strong> of the person.</p>\n<p>Other options are:</p>\n<ul>\n<li class=\"p1\"><strong>Labile affect</strong>: excessive variations in emotion without any apparent reason. For example, a person starts laughing and then crying for no reason. Seen in mania.</li>\n<li class=\"p1\"><strong>Affective flattening/flat affect</strong>: severely restricted range of affect (absence of changes in emotion irrespective of the situation). Seen in schizophrenia.</li>\n<li class=\"p1\"><strong>Inappropriate affect</strong>: emotional responses that do not match with the social situation one is in.&nbsp;<strong>Appropriateness</strong>&nbsp;is described in relation to the<strong> social situation</strong>. For example, if a man is laughing at a funeral, he has an inappropriate affect.\n<p class=\"p1\">&nbsp;</p>\n</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A pregnant woman presented with complaints of passing grape-like vesicles vaginally. She also had frequent episodes of vomiting.  A USG scan was done and is shown below. Which of the following is not recommended post-evacuation for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Administer anti-D if mother is Rh-ve"
      },
      {
        "id": 2,
        "text": "Allow pregnancy after 6 months of monitoring, if HCG titres are negative"
      },
      {
        "id": 3,
        "text": "Check hCG levels within 48 hours of evacuation"
      },
      {
        "id": 4,
        "text": "Can insert intrauterine devices for contraception"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario is suggestive of <strong>molar pregnancy</strong> and <strong>intrauterine devices</strong> are<strong> not recommended during </strong>the<strong> period </strong>of<strong> surveillance</strong>, post evacuation.</p>\n<p><span data-preserver-spaces=\"true\">Molar pregnancy may present with bleeding per vaginum or an acute discharge of</span><strong><span data-preserver-spaces=\"true\">&nbsp;vesicular mass per vaginum</span></strong><span data-preserver-spaces=\"true\">. On examination, the</span><strong><span data-preserver-spaces=\"true\">&nbsp;uterine size is more</span></strong><span data-preserver-spaces=\"true\">&nbsp;than the corresponding period of amenorrhea. It shows a&nbsp;characteristic<strong>&nbsp;snowstorm</strong>&nbsp;appearance on USG.&nbsp;</span>&nbsp;</p>\n<p><strong>Suction </strong>and<strong> evacuation</strong>&nbsp;is the treatment of choice. Here post evacuation, <strong>Intrauterine devices</strong> are<strong> not recommended during </strong>the<strong> period </strong>of<strong> surveillance.&nbsp;</strong>This is because there is increased risk of <strong>perforation</strong> during this period if an <strong>invasive mole</strong> is present.</p>\n<p>Post-evacuation recommendations:</p>\n<ul>\n<li>Anti-D immune globulin if Rh D-negative</li>\n<li>Initiate effective contraception-combination hormonal contraception, injectable depot medroxyprogesterone acetate, or progestin implant.</li>\n<li>Review pathology report</li>\n<li>Serum hCG levels: within 48 h of evacuation&rarr; weekly until undetectable&rarr; then monthly for 6 months.</li>\n</ul>\n<p>Pregnancy is allowed after 6 months following a negative hCG titer. However, it is advised to avoid pregnancy for 1 year, preferably 2 years, as a fresh pregnancy will interfere with the hCG titres.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/97afd0f805044cb09d54bc3e0e050c45.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A child is brought with hemarthrosis following a trivial trauma. On testing, you find an isolated prolongation of prothrombin time. Which of the following clotting factors is likely to be deficient in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Factor VII"
      },
      {
        "id": 2,
        "text": "Factor VIII"
      },
      {
        "id": 3,
        "text": "Factor IX"
      },
      {
        "id": 4,
        "text": "Factor II"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Hemarthrosis</strong>\u00a0following a trivial trauma is suggestive of a bleeding disorder and that associated with an <strong>isolated prolonged</strong> <strong>prothrombin</strong> <strong>time</strong>\u00a0shows that<strong>\u00a0clotting factor VII </strong>is likely to be <strong>deficient</strong> in this patient.\u00a0\u00a0</p>\n<p><strong>Prothrombin time </strong>(PT) assesses the <strong>extrinsic pathway</strong> and common coagulation pathways. It measures the time (in seconds) needed for plasma to clot after the addition of an exogenous source of tissue thromboplastin and calcium ions. A prolonged PT can occur due to deficiencies/dysfunction of factors <strong>V</strong>, <strong>VII</strong>, <strong>X</strong>, <strong>II</strong> (prothrombin), and fibrinogen.</p>\n<p><strong>Activated partial thromboplastin time </strong>(aPTT) assesses the <strong>intrinsic pathway</strong> and common coagulation pathways. It measures the time needed for plasma to clot after the addition of kaolin (to activate XII), cephalin (substitutes platelet phospholipids), and calcium ions. aPTT is prolonged due to dysfunction of V, VIII, IX, X, XI, XII, prothrombin, and fibrinogen.\u00a0\u00a0</p>\n<p>Thus this shows that factor VII deficiency is associated with isolated prolongation of PT.</p>\n<p>Clotting factor VII deficiency, otherwise known as <strong>Alexander's disease</strong>, is usually inherited as an autosomal recessive disease. It can present with<strong> recurrent</strong> episodes of <strong>bleeding</strong> into joints, muscles, and closed spaces that start spontaneously or following an injury. Diagnosis can be made by lab results of PT and aPTT and confirmed with factor VII assay. Patients are treated with recombinant factor VIIa.\u00a0\u00a0</p>\n<p>Other options:</p>\n<p>Option B &amp; C: <strong>Factor VIII </strong>and\u00a0<strong>IX\u00a0deficiency</strong>, otherwise known as\u00a0<strong>hemophilia A &amp; B </strong>respectively,\u00a0are associated with <strong>isolated</strong>\u00a0<strong>prolonged aPTT</strong>.</p>\n<p>Option D:<strong> Factor II deficiency</strong> is associated with<strong>\u00a0prolongation </strong>of both <strong>PT</strong> and<strong> aPTT.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Laryngeal mask airway is relatively contraindicated in all of the following conditions except?",
    "choices": [
      {
        "id": 1,
        "text": "Pharyngeal abscess"
      },
      {
        "id": 2,
        "text": "Hiatus hernia"
      },
      {
        "id": 3,
        "text": "Pregnancy"
      },
      {
        "id": 4,
        "text": "Difficult airway"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Laryngeal mask airway</strong> (LMA) is <strong>indicated</strong> in cases with <strong>difficult airway</strong> where endotracheal intubation is not possible or not available. It provides an alternate means of ventilating and oxygenating the patient.\u00a0</p>\n<p><strong>Relative Contraindications for the LMA</strong>:</p>\n<ul>\n<li>Pharyngeal pathology \u2013 Abscess, tumor</li>\n<li>Pharyngeal obstruction</li>\n<li>Conditions with an increased risk of aspiration (eg: pregnancy, hiatal hernia, inadequate NPO) \u2013 LMA may protect the larynx from pharyngeal secretions but not from gastric secretions</li>\n<li>Low pulmonary compliance (eg, restrictive airway disease)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/194b9ae9f30941af84bccaeaf3207e28x1280x1428.JPEG"
    ]
  },
  {
    "text": "Which is the commonly noted vitamin deficiency In drought-affected areas?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin A"
      },
      {
        "id": 2,
        "text": "Vitamin B"
      },
      {
        "id": 3,
        "text": "Vitamin C"
      },
      {
        "id": 4,
        "text": "Vitamin E"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The vitamin most commonly deficient in areas of famines and droughts is <strong>vitamin A; </strong>deficiency of this vitamin&nbsp;leads to&nbsp;xerophthalmia and blindness.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The IL-1 receptor antagonist that is used in the treatment of rheumatoid arthritis is _________",
    "choices": [
      {
        "id": 1,
        "text": "Anakinra"
      },
      {
        "id": 2,
        "text": "Rituximab"
      },
      {
        "id": 3,
        "text": "Tofacitinib"
      },
      {
        "id": 4,
        "text": "Golimumab"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>IL-1 receptor antagonist</strong> that is used in the treatment of rheumatoid arthritis is <strong>anakinra</strong>.</p>\n<p>It is a <strong>biological</strong> <strong>D</strong>isease <strong>M</strong>odifying <strong>A</strong>nti-<strong>R</strong>heumatoid <strong>D</strong>rug (<strong>DMARD</strong>) used in the treatment of rheumatoid arthritis. All biological DMARDs <strong>downregulate the immune system</strong> and can lead to adverse effects like <strong>opportunistic infections</strong> and flaring of latent TB.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the condition shown in this picture?",
    "choices": [
      {
        "id": 1,
        "text": "Shaft of humerus fracture"
      },
      {
        "id": 2,
        "text": "Rupture of triceps tendon"
      },
      {
        "id": 3,
        "text": "Rupture of biceps tendon"
      },
      {
        "id": 4,
        "text": "Supracondylar fracture"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shows <strong>Popeye sign</strong> and it is seen in <strong>rupture of proximal tendon of biceps.\u00a0\u00a0</strong>Proximal tendon of biceps refers to both long head and short head of biceps.</p>\n<p><strong>Popeye sign:</strong> On flexing the elbow there is an extremely prominent bulge of the muscle belly as its <strong>unrestrained fibers contract.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c522cfd16c69457a9b9b6d81eda84d6e.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3a2096fd4bdc48b09f253b4db294058bx236x151.JPEG"
    ]
  },
  {
    "text": "A female patient presents with a hard and irregular lump in the upper outer quadrant of the breast.  The histopathological slide of the mass sample is given below. What is the most likely condition?",
    "choices": [
      {
        "id": 1,
        "text": "Lobular carcinoma"
      },
      {
        "id": 2,
        "text": "Papillary carcinoma"
      },
      {
        "id": 3,
        "text": "Medullary carcinoma"
      },
      {
        "id": 4,
        "text": "Colloidal carcinoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><span data-preserver-spaces=\"true\">The given clinical scenario and histopathological findings are suggestive of\u00a0</span><strong><span data-preserver-spaces=\"true\">lobular</span></strong><span data-preserver-spaces=\"true\">\u00a0</span><strong><span data-preserver-spaces=\"true\">carcinoma</span></strong><span data-preserver-spaces=\"true\">\u00a0</span><strong><span data-preserver-spaces=\"true\">of the breast. Single line of cells </span></strong>are seen lining the normal duct <strong>(bottom right of the image)</strong> which is the characteristic<strong><span data-preserver-spaces=\"true\">\u00a0Indian file/ Single file appearance.</span></strong></p>\n<p><span data-preserver-spaces=\"true\">The histopathological image shows discohesive infiltrating tumor cells, signet-ring cells containing intracytoplasmic mucin droplets, and the</span><strong><span data-preserver-spaces=\"true\">\u00a0Indian file appearance</span></strong><span data-preserver-spaces=\"true\">\u00a0which is suggestive of lobular carcinoma of the breast. Tubule formation is absent in this subtype.</span></p>\n<p><strong><span data-preserver-spaces=\"true\">Lobular Carcinoma:</span></strong></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Usually bilateral</span></li>\n<li><span data-preserver-spaces=\"true\">Multicentric and presents as hard irregular masses</span></li>\n<li><span data-preserver-spaces=\"true\">It can have a diffuse infiltrative pattern with minimal desmoplasia</span></li>\n<li><span data-preserver-spaces=\"true\">It is the\u00a0</span><strong><span data-preserver-spaces=\"true\">most common type of breast carcinoma</span></strong><span data-preserver-spaces=\"true\">\u00a0to present as an\u00a0</span><strong><span data-preserver-spaces=\"true\">occult primary</span></strong></li>\n<li><span data-preserver-spaces=\"true\">Pathogenesis: Mutation in\u00a0</span><strong><span data-preserver-spaces=\"true\">CDH-1 gene\u00a0</span></strong><span data-preserver-spaces=\"true\">which encodes for\u00a0</span><strong><span data-preserver-spaces=\"true\">cadherin.\u00a0</span></strong><span data-preserver-spaces=\"true\">Loss of E-cadherin leads to small, monomorphic discohesive cells arranged one after another. This arrangement is called an\u00a0</span><strong><span data-preserver-spaces=\"true\">Indian file/ Single file appearance.</span></strong></li>\n<li><span data-preserver-spaces=\"true\">Desmoplasia is minimal or absent</span></li>\n<li><span data-preserver-spaces=\"true\">They are</span><strong><span data-preserver-spaces=\"true\">\u00a0Luminal-A type</span></strong></li>\n<li><span data-preserver-spaces=\"true\">Excellent prognosis</span></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6196c8e14a9a402e9e2bba22ef50cb97.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ddf825876d604536abecba38184375a1x1279x1253.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/00c326151acc4ffa9c96f50e6eecef2dx618x419.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6890007f8eca4899a07bd1f149533a2cx1195x891.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e9ef9738fb1b478680fe95e9c60c35f0x640x480.JPEG"
    ]
  },
  {
    "text": "The actions of the muscle marked in the image include ______.",
    "choices": [
      {
        "id": 1,
        "text": "Extorsion, Elevation, and Abduction"
      },
      {
        "id": 2,
        "text": "Intorsion, Depression, and Abduction"
      },
      {
        "id": 3,
        "text": "Extorsion, Depression,  and Adduction"
      },
      {
        "id": 4,
        "text": "Intorsion, Elevation, and Adduction"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p style=\"text-align: left;\">The muscle marked in the above image is the&nbsp;<strong>superior oblique</strong>.</p>\n<p>Actions of the superior oblique:</p>\n<ul>\n<li><strong>Intorsion</strong></li>\n<li><strong>Depression</strong></li>\n<li><strong>Abduction</strong></li>\n</ul>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/45e7e64e4b4245c5837175ce2c856be3.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/58b8b80461c74caab7543848889cce46x800x308.JPEG"
    ]
  }
];
        let quizName = 'Fmge Mini Test - 6';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>