<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dermatology Test I - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The following skin lesion is caused by ___________",
    "choices": [
      {
        "id": 1,
        "text": "Trichophyton verrucosum"
      },
      {
        "id": 2,
        "text": "Microsporum ferrugineum"
      },
      {
        "id": 3,
        "text": "Trichophyton concentricum"
      },
      {
        "id": 4,
        "text": "Hypersensitivity to Herpes Simplex virus infection"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shows numerous <strong>concentric rings</strong> indicative of\u00a0<strong>Tinea imbricata</strong>, resulting from infection by <strong><em>Trichophyton concentricum</em>.</strong></p>\n<p>The lesion presents as\u00a0a scaling ring; centrifugal spread follows, but within the area of central clearing a <strong>second wave of scaling</strong> soon arises. The process is repeated to give numerous concentric rings.\u00a0<strong>Pruritus</strong> is intense and may lead to <strong>lichenification</strong>.\u00a0<strong>Hypopigmentation</strong> may accompany the lesions. It is restricted to the natives of southern Asia, the islands of the South Pacific, Guatemala, southern Mexico and Brazil.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9c60a92320a04b4cac73532dd83c85b2.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "An infant is brought to the dermatology clinic with the following lesions. Which is the incorrect statement regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Pruritus is the hallmark"
      },
      {
        "id": 2,
        "text": "Dennie Morgan fold can be found under lower eyelid"
      },
      {
        "id": 3,
        "text": "It has an extensor distribution in the adults"
      },
      {
        "id": 4,
        "text": "Allergic shiners may be present"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above image is suggestive of infantile&nbsp;<strong>atopic eczema</strong>/dermatitis. It has a <strong>flexural distribution&nbsp;</strong>in&nbsp;<strong>adult type </strong>and<strong> extensor distribution </strong>in <strong>infantile type.</strong></p>\n<p><strong>Clinical features</strong> include:</p>\n<ul>\n<li>Rash-&nbsp;erythematous, itchy papules/papulovesicles&nbsp;</li>\n<li>Excoriations</li>\n<li>Lichenified skin</li>\n<li>Dennie Morgan fold&nbsp;- under lower eyelid.&nbsp;</li>\n<li>Allergic shiners&nbsp;-&nbsp;periorbital pigmentation&nbsp;</li>\n<li>Allergic salute&nbsp;- horizontal groove on dorsum of nasal bridge.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e5132da5bbb04e8cbc76117a9f7e68e9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cd293f61d78b46d4813e50090df34d6dx1280x2281.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/59ecc59d422b432ab7e8323e8444f948x1280x1190.JPEG"
    ]
  },
  {
    "text": "Which of the following is the most common cutaneous manifestation of systemic lupus erythematosus?",
    "choices": [
      {
        "id": 1,
        "text": "Chronic urticaria"
      },
      {
        "id": 2,
        "text": "Malar rash"
      },
      {
        "id": 3,
        "text": "Raynaud's Phenomenon"
      },
      {
        "id": 4,
        "text": "Photosensitivity"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>most common cutaneous</strong> manifestation of <strong>systemic lupus erythematosus</strong> is <strong>photosensitivity</strong>.</p>\n<p>In decreasing order, the cutaneous manifestations in SLE are:</p>\n<ol>\n<li>Photosensitivity</li>\n<li>Raynaud's phenomenon\u00a0</li>\n<li>Malar rash</li>\n<li>Chronic urticaria &gt;36 hrs</li>\n<li>Non-scarring alopecia\u00a0</li>\n<li>Mouth ulceration</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman brings her 50-year-old mother to a PHC with disfiguration of her genitalia as shown below. She says that it has been present for many years but her mother had refused to seek treatment. The PHC medical officer decides to refer the lady to a venereologist. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Lymphogranuloma venerum"
      },
      {
        "id": 2,
        "text": "Chancroid"
      },
      {
        "id": 3,
        "text": "Granuloma inguinale"
      },
      {
        "id": 4,
        "text": "Syphilis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows&nbsp;<strong>esthiomene</strong>, a feature of <strong>lymphogranuloma</strong> <strong>venereum</strong>.&nbsp;</p>\n<p>In the tertiary stage of LGV, there is <strong>lymphatic obstruction</strong> due to <strong>chronic inflammation</strong> and <strong>fibrosis</strong>. This results in genital lymphoedema and inflammation which causes ulceration and chronic granulomatous fibrosis, resulting in esthiomene in women and <strong>elephantiasis</strong> in <strong>men</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3bafe3c3d14b45e78bda47c888af4838.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/93f359dfae694883a8c07775d84e97f5x1280x1491.2270803949225.JPEG"
    ]
  },
  {
    "text": "A 5-year-old child is brought to the OPD with a hypopigmented, finely scaly patch on her face. There is a history of atopy in the family.  What is the clinical diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Leprosy"
      },
      {
        "id": 2,
        "text": "Pityriasis versicolor"
      },
      {
        "id": 3,
        "text": "Pityriasis alba"
      },
      {
        "id": 4,
        "text": "Atopic eczema"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above scenario of a <strong>hypopigmented</strong>, <strong>scaly</strong> patch&nbsp;is suggestive of <strong>pityriasis alba.</strong></p>\n<p>It is a pattern of <strong>dermatitis</strong> in which <strong>hypopigmentation</strong> is the most conspicuous feature. It is seen in the age group of <strong>3-16 years.</strong>&nbsp;</p>\n<p>Lesions have scaling and are&nbsp;usually not well marginated.<strong>&nbsp;</strong>In children, the lesions are often confined to the<strong> face</strong>&nbsp;and are most common on the <strong>cheeks</strong> and around the <strong>mouth</strong> and<strong> chin</strong>.</p>\n<p>It is often a manifestation of <strong>atopic eczema</strong> but it is not confined to atopic individuals.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/78b0096dbf3645fb8d7f5d59336c8a3ax1280x983.JPEG"
    ]
  },
  {
    "text": "Which of the following statements is incorrect regarding the given condition?",
    "choices": [
      {
        "id": 1,
        "text": "Fundus fluorescein angiography shows avascular peripheral retina"
      },
      {
        "id": 2,
        "text": "X-linked recessive inheritance"
      },
      {
        "id": 3,
        "text": "Miscarriage of affected male conceptuses"
      },
      {
        "id": 4,
        "text": "Cone-shaped teeth"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The characteristic finding of <strong>hyperpigmentation</strong> along&nbsp;<strong>Blaschko's</strong> lines is suggestive of <strong>i</strong><strong>ncontinentia pigmenti, </strong>an<strong> X linked dominant </strong>disorder<strong>.</strong>&nbsp;Blaschko's lines are the lines of normal embryological development of skin.&nbsp;</p>\n<p>It occurs due to <strong>loss-of-function mutation </strong>in IKBKG gene which encodes the nuclear factor kappa B essential modulator (<strong>NEMO</strong>), which is essential for protection against tumor necrosis factors.&nbsp;</p>\n<p>It usually affects females, as it is believed to be<strong> lethal in males</strong> in utero leading to miscarriage of the affected male conceptuses.<strong>&nbsp;</strong></p>\n<p>It is characterized by <strong>erythematous</strong> <strong>vesicular</strong> <strong>rash</strong> following Blaschko's lines, malformed<strong> cone-shaped teeth, onychodystrophy,</strong> and<strong> alopecia</strong>.</p>\n<p>The image given below shows cone-shaped teeth.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7ab50e44eac84d32a19707713593e09a.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fd19eede36a3487da4cc9428744748f6x1280x1094.0479548660085.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8c443877d856465aa28d1d2039a62d71x439x602.PNG"
    ]
  },
  {
    "text": "The image shows an investigative modality of nail folds. This along with ANA testing helps in the early diagnosis of:",
    "choices": [
      {
        "id": 1,
        "text": "Dermatomyositis"
      },
      {
        "id": 2,
        "text": "Systemic sclerosis"
      },
      {
        "id": 3,
        "text": "Systemic lupus erythematosus"
      },
      {
        "id": 4,
        "text": "Mixed connective tissue disorder"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows&nbsp;<strong>nail-fold capillaroscopy</strong> findings. The image shows giant capillaries, hemorrhages, and reducing capillary density suggesting an active pattern in&nbsp;<strong>systemic sclerosis</strong>.</p>\n<p>The most important tests for systemic sclerosis are <strong>ANA reactivity</strong> and<strong> nail fold capillaroscopy. </strong>Investigations to exclude or confirm other autoimmune rheumatic diseases including arthritis or other forms of connective tissue disease are also done.&nbsp;</p>\n<p>Nail-fold capillaroscopy is a <strong>non-invasive</strong>, easy, and safe diagnostic technique designed to evaluate the <strong>general architecture of capillary rows</strong> and <strong>fine details</strong> of small vessels of the microcirculation in the nail fold.</p>\n<p>The most important indications for performing capillaroscopy include differential diagnosis of <strong>primary</strong> and<strong> secondary Raynaud's phenomenon</strong>, as well as the&nbsp;assessment of scleroderma spectrum disorders.</p>\n<p>In systemic sclerosis, capillary abnormalities appear and evolve in a clearly defined sequence called the <strong>scleroderma pattern</strong>, which<strong> correlates with internal organ involvement</strong>.</p>\n<p>Nail fold capillaroscopy is also listed as a systemic sclerosis <strong>classification criterion</strong> recognized by the European League Against Rheumatism (<strong>EULAR</strong>).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/aa382cf36199451299426c91a5057aff.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not seen in lepra bonita?",
    "choices": [
      {
        "id": 1,
        "text": "Appearance of premature aging"
      },
      {
        "id": 2,
        "text": "Obliteration of wrinkles and healthy-looking face"
      },
      {
        "id": 3,
        "text": "Lucio phenomenon"
      },
      {
        "id": 4,
        "text": "Absent nerve involvement"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Lepra bonita</strong>&nbsp;usually presents with <strong>pan-neuritis</strong>.&nbsp;It is a <strong>diffuse</strong> form of <strong>lepromatous</strong> leprosy and is also called the leprosy of Lucio and Latapi. &nbsp;</p>\n<p>Diffuse infiltration of the skin of the face causes <strong>obliteration of wrinkles&nbsp;</strong>giving a&nbsp;<strong>myxedema-like</strong> appearance. It appears as a <strong>healthy</strong> look, leading to the name lepra bonita (beautiful leprosy).</p>\n<p>As the disease progresses, the <strong>infiltration</strong> persists but the skin becomes <strong>thinner</strong> and <strong>atrophic</strong> and, consequently, the patient appears to have <strong>prematurely aged</strong>. <strong>Generalized hair loss</strong> is also seen.&nbsp;</p>\n<p><strong>Lucio phenomenon</strong> is a type of <strong>lepra reaction </strong>seen in these patients and is characterized by well-defined, angular, jagged, <strong>purpuric</strong> lesions evolving into <strong>ulcerations</strong> and spreading in <strong>ascending</strong> fashion and healing with <strong>atrophic</strong> white <strong>scarring</strong>, as seen below.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/caaf752f64ec42c197676d97ed47af74x750x394.JPEG"
    ]
  },
  {
    "text": "Which of the following is the most common cutaneous presentation of subacute cutaneous lupus erythematosus?",
    "choices": [
      {
        "id": 1,
        "text": "Scarring papulosquamous eruption"
      },
      {
        "id": 2,
        "text": "Non-scarring papulosquamous eruption"
      },
      {
        "id": 3,
        "text": "Annular polycyclic lesions"
      },
      {
        "id": 4,
        "text": "Discoid plaque with adherent scale"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Subacute cutaneous lupus erythematosus</strong>&nbsp;presents most commonly as a <strong>non\u2010scarring papulosquamous eruption.</strong>&nbsp;It can also present as annular polycyclic lesions.</p>\n<p>Sites of lesions:</p>\n<ul>\n<li>Above the waist</li>\n<li>Around the neck</li>\n<li>On the trunk</li>\n<li>Outer aspects of the arms</li>\n</ul>\n<p>The image below shows <strong>psoriasiform lesions</strong> of subacute cutaneous lupus erythematosus.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/992b257b123d4dd6865ddd5367ad1278x512x363.PNG"
    ]
  },
  {
    "text": "A patient presented with a sudden onset of symmetrical, bilateral, tender, erythematous, warm nodules and raised plaques involving the shins, ankles, and knees. Which of the following is not a trigger for this eruption?",
    "choices": [
      {
        "id": 1,
        "text": "Pregnancy"
      },
      {
        "id": 2,
        "text": "Tuberculosis"
      },
      {
        "id": 3,
        "text": "Sulfonamide use"
      },
      {
        "id": 4,
        "text": "Chronic pancreatitis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The description is classical of <strong>erythema nodosum</strong>. They are&nbsp;<strong>not</strong> seen in chronic pancreatitis.</p>\n<p>Aetiological factors in erythema nodosum:</p>\n<ul>\n<li><strong>NO</strong>- Idiopathic, pregnancy</li>\n<li><strong>DO-Drugs</strong> -<strong>&nbsp;o</strong>ral contraceptives, hormonal replacement therapy,<strong> sulphonamides,</strong> and penicillin</li>\n<li><strong>S- Sarcoidosis,&nbsp;</strong>Sweet syndrome, SLE, RA, Reiter's syndrome</li>\n<li><strong>U</strong>- Ulcerative colitis, Crohn's disease, Behcet's disease</li>\n<li><strong>M-&nbsp;</strong>Malignancy, and microbiology( Infections<strong> - Group A &beta;-hemolytic streptococcus&nbsp;</strong>infection (<strong>most common</strong>), brucella, toxoplasmosis, CMV, E.coli, yersinia, tuberculosis)</li>\n</ul>\n<p>The image below shows erythema nodosum.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9f4b413f06fc41baa27b177d02fa91dcx1223x756.JPEG"
    ]
  },
  {
    "text": "A Chinese woman brought her son to the clinic with the given finding. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Nevus of Ota"
      },
      {
        "id": 2,
        "text": "Nevus of Ito"
      },
      {
        "id": 3,
        "text": "Nevus spilus"
      },
      {
        "id": 4,
        "text": "Becker nevus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This Chinese patient has a <strong>unilateral blue-greyish hyperpigmented macule</strong> on his shoulder, which is suggestive of <strong>nevus of Ito.</strong></p>\n<p>It&nbsp;affects the&nbsp;<strong>acromioclavicular region</strong> and <strong>upper chest</strong>. It primarily occurs in <strong>Chinese</strong> and<strong> Japanese</strong> people.</p>\n<p>It is rarer than nevus of Ota which affects facial skin and sclera.&nbsp;It is distinguished from the nevus of Ota by its location in the area innervated by the<strong> posterior supraclavicular</strong> and<strong> lateral cutaneous brachial nerves.</strong></p>\n<p><strong>Complications </strong>of<strong> nevus of Ota </strong>include&nbsp;<strong>meningeal melanocytoma</strong>&nbsp;of the brain, and&nbsp;<strong>malignant melanoma</strong>&nbsp;involving the meninges, choroid, iris, or orbit. In some rare cases,&nbsp;<strong>cutaneous melanoma</strong>&nbsp;can develop.</p>\n<p><strong>Pigment targeting Q\u2010switched laser</strong> systems is the treatment of choice.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://upload.wikimedia.org/wikipedia/commons/b/bb/Nevus_of_Ito.jpg"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f338071c098342e8a3ba5333ead9144fx1280x1170.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/803395409abb4d7480c1a67730b97c32x427x599.JPEG"
    ]
  },
  {
    "text": "Which of the following skin infections is caused by the organism shown below?",
    "choices": [
      {
        "id": 1,
        "text": "Pyoderma gangrenosum"
      },
      {
        "id": 2,
        "text": "Pemphigus neonatarum"
      },
      {
        "id": 3,
        "text": "Impetigo herpetiformis"
      },
      {
        "id": 4,
        "text": "Ecthyma contagiosum"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image shows Gram-positive cocci in clusters, suggestive of&nbsp;<strong>staphylococcus.&nbsp;</strong>It causes <strong>pemphigus neonatorum</strong> or bullous impetigo of the newborn.</p>\n<p>Option A: <strong>Pyoderma gangrenosum</strong> is a <strong>neutrophilic dermatosis</strong> characterized by chronic, recurrent, very painful ulcers with undermined borders usually found on the lower limbs. It is usually associated with inflammatory bowel disease.</p>\n<p>Option C: <strong>Impetigo herpetiformis</strong> is severe <strong>pustular psoriasis</strong> in pregnancy.</p>\n<p>Option D: <strong>Ecthyma contagiosum</strong> is a contagious pustular dermatitis and a viral zoonotic disease caused by the <strong>parapox virus</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/120797ef77ff42f0a4636d891154180b.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A man comes to the dermatology OPD with the following lesion. Further probing reveals a history of tuberculosis in his wife. Which of the following statements is false about this skin lesion?",
    "choices": [
      {
        "id": 1,
        "text": "It is a multibacillary lesion"
      },
      {
        "id": 2,
        "text": "It occurs in previously sensitised patients"
      },
      {
        "id": 3,
        "text": "Lesions heal with central scarring"
      },
      {
        "id": 4,
        "text": "It is the most common cutaneous manifestation of TB in India"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This clinical scenario with a history of exposure to tuberculosis is suggestive of\u00a0<strong>lupus vulgaris</strong>, which often presents as <strong>atrophic</strong> <strong>warty</strong> <strong>plaques</strong>. It is a <strong>paucibacillary\u00a0</strong>lesion<strong>.</strong></p>\n<p>It occurs in<strong>\u00a0previously sensitized</strong> hosts with <strong>good immunity</strong>. On histology, granulomas with scanty or absent caseation are seen.</p>\n<p>It is the<strong> most common cutaneous tuberculosis</strong> in<strong> India</strong>. In India, it commonly occurs over the\u00a0buttocks or the\u00a0trunk, whereas, in Europe,\u00a0it is common over the head and neck.</p>\n<p>The lesions occur in the form of <strong>plaques</strong> with serpiginous edges or mutilating <strong>ulcers</strong>. They heal with <strong>central scarring</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/475f761133c84fea9e85c64817bb5379.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2993db4944804bbf9c9d81c5d68d0366x1280x1066.9675599435825.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0dda58a1715a4c32888431b13c4c18bcx720x1052.JPEG"
    ]
  },
  {
    "text": "A 50-year-old lady who underwent chemotherapy for breast carcinoma 3 weeks ago now presents with diffuse hair loss as shown below. On examination, she has a depressed affect. Name the condition causing her hair loss.",
    "choices": [
      {
        "id": 1,
        "text": "Alopecia areata"
      },
      {
        "id": 2,
        "text": "Telogen effluvium"
      },
      {
        "id": 3,
        "text": "Anagen effluvium"
      },
      {
        "id": 4,
        "text": "Trichotillomania"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Chemotherapy</strong> causes hair loss known as <strong>anagen effluvium</strong>.</p>\n<p>It is due to the disruption of the <strong>anagen</strong> or proliferating phase of the hair cycle. Hair shedding typically occurs <strong>within</strong> <strong>1&ndash;3 weeks</strong> and it is <strong>complete</strong> <strong>within 1&ndash;2 months</strong> after the initiation of chemotherapy.</p>\n<p>Most important drugs implicated in the order of decreasing frequency of association causing anagen effluvium:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Anti-microtubule agents (e.g., <strong>paclitaxel</strong>)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Topo-isomerase inhibitors (e.g., <strong>doxorubicin</strong>)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Alkylating agents (e.g., <strong>cyclophosphamide</strong>)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Anti-metabolites (e.g., 5-<strong>fluorouracil</strong>)</li>\n</ul>\n<p>Option A:<strong>&nbsp;</strong>Alopecia areata causes patchy, well-circumscribed hair loss, as shown below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6fb25c0029d245bba7e0d3305df07b9e.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/65146eb8fa8f42519adfcb8d527d35dfx1280x1453.JPEG"
    ]
  },
  {
    "text": "A researcher developed a drug 'X' that functions as an IL-17 receptor antagonist for the treatment of psoriasis. Identify drug 'X'.",
    "choices": [
      {
        "id": 1,
        "text": "Secukinumab"
      },
      {
        "id": 2,
        "text": "Ixekizumab"
      },
      {
        "id": 3,
        "text": "Brodalumab"
      },
      {
        "id": 4,
        "text": "Infliximab"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Brodalumab&nbsp;</strong>is a monoclonal antibody against the <strong>IL-17 receptor</strong>.</p>\n<p>These biological drugs are used in cases of <strong>severe psoriasis</strong> and <strong>psoriatic arthritis.</strong>&nbsp;</p>\n<p>Secukinumab and ixekizumab bind to IL-17 and prevent its binding to the receptor. They are considered&nbsp;<strong>IL-17 neutralizers.</strong></p>\n<table style=\"height: 438px; width: 394px;\">\n<tbody>\n<tr>\n<td style=\"width: 183.859px; text-align: center;\"><strong>Class</strong></td>\n<td style=\"text-align: center; width: 192.141px;\"><strong>Drugs</strong></td>\n</tr>\n<tr>\n<td style=\"width: 183.859px;\">TNF-alpha inhibitors</td>\n<td style=\"width: 192.141px;\">\n<ul>\n<li>Adalimumab</li>\n<li>Infliximab</li>\n<li>Etanercept</li>\n<li>Golimumab</li>\n<li>Certolizumab</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 183.859px;\">IL-17 antagonists (neutralizers)</td>\n<td style=\"width: 192.141px;\">\n<ul>\n<li>Secukinumab</li>\n<li>Ixekizumab</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 183.859px;\">IL-17 receptor antagonist</td>\n<td style=\"width: 192.141px;\">\n<ul>\n<li>Brodalumab</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 183.859px;\">IL-23 antagonist</td>\n<td style=\"width: 192.141px;\">\n<ul>\n<li>Guselkumab</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 183.859px;\">IL-12/23 antagonist</td>\n<td style=\"width: 192.141px;\">\n<ul>\n<li>Ustekinumab</li>\n<li>Briakinumab</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 183.859px;\">CD-11a antagonist</td>\n<td style=\"width: 192.141px;\">\n<ul>\n<li>Efalizumab</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 183.859px;\">Phosphodiesterase -4 inhibitors</td>\n<td style=\"width: 192.141px;\">\n<ul>\n<li>Apremilast</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Button-hole sign can be seen in which of the following disorders?",
    "choices": [
      {
        "id": 1,
        "text": "Discoid lupus erythematosus"
      },
      {
        "id": 2,
        "text": "Von Recklinghausen's disease"
      },
      {
        "id": 3,
        "text": "Tuberous sclerosis"
      },
      {
        "id": 4,
        "text": "Xeroderma pigmentosum"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Buttonhole sign</strong> is seen in type 1 neurofibromatosis (<strong>Von Recklinghausen's\u00a0disease</strong>).</p>\n<p>Neurofibromas can be <strong>invaginated</strong> into the <strong>subcutis\u00a0</strong>with the tip of the index finger back and they\u00a0<strong>reappear after</strong> the<strong>\u00a0pressure</strong> is<strong> released. </strong>This is the buttonhole sign.</p>\n<p>This sign is also <strong>positive</strong> in<strong>\u00a0anetoderma</strong> and<strong> dermatofibroma.</strong></p>\n<p>The image below shows a dermatofibroma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/81f0a4ede06c4f85ad9038ad71cdf85cx1280x1100.3667136812412.JPEG"
    ]
  },
  {
    "text": "During your rounds in the neonatal ward, you see a 2-week-old neonate with the following skin finding. It is a disorder of which of the following glands?",
    "choices": [
      {
        "id": 1,
        "text": "Sebaceous glands"
      },
      {
        "id": 2,
        "text": "Apocrine glands"
      },
      {
        "id": 3,
        "text": "Holocrine glands"
      },
      {
        "id": 4,
        "text": "Eccrine glands"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows<strong>&nbsp;</strong>clear, thin\u2010walled, superficial <strong>vesicles 1&ndash;2 mm </strong>in diameter,<strong> without</strong> associated<strong> erythema</strong>, resembling drops of water in a&nbsp;<strong>newborn. </strong>It is suggestive of<strong> miliaria,&nbsp;</strong>a&nbsp;disorder of&nbsp;<strong>eccrine sweat glands.</strong>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f75d9d15bf924ec1a5d06e85cfd57860.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "As a first-year dermatology resident, you see a patient with the following skin lesion. Which of the following disorders is least likely to present in this form?",
    "choices": [
      {
        "id": 1,
        "text": "Reiter's disease"
      },
      {
        "id": 2,
        "text": "Secondary syphilis"
      },
      {
        "id": 3,
        "text": "Mycosis fungoides"
      },
      {
        "id": 4,
        "text": "Basal cell carcinoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows a <strong>papulosquamous</strong> lesion. <strong>Basal cell carcinoma</strong> does not cause papulosquamous lesions.</p>\n<p>Papulosquamous disorders are diseases that present with <strong>papules/plaque</strong> with <strong>scaling.</strong> They include:</p>\n<ul>\n<li>Lichen planus</li>\n<li>Psoriasis</li>\n<li>Parapsoriasis</li>\n<li>Pityriasis rubra pilaris</li>\n<li>Pityriasis rosea</li>\n<li>Seborrheic dermatitis</li>\n<li>Secondary syphilis</li>\n<li>Drug reactions</li>\n<li>Reiter&rsquo;s disease</li>\n<li>Eczema</li>\n<li>Neoplasms (mycosis fungoides, squamous cell carcinoma, Bowen&rsquo;s disease)</li>\n<li>Tinea infection</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d320cd57354f45e48b80147b1976fcb8.GIF"
    ],
    "explanation_images": []
  },
  {
    "text": "In which of the following conditions would you expect to see Darier's sign?",
    "choices": [
      {
        "id": 1,
        "text": "Darier's disease"
      },
      {
        "id": 2,
        "text": "Urticaria pigmentosa"
      },
      {
        "id": 3,
        "text": "Hereditary angioedema"
      },
      {
        "id": 4,
        "text": "Atopic dermatitis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Darier's</strong> sign is seen in&nbsp;<strong>urticaria pigmentosa</strong>. It&nbsp;refers to the development of <strong>urticaria</strong> and <strong>erythema</strong> around the lesions after <strong>mild trauma</strong>, including scratching or rubbing of the lesion.</p>\n<p>Urticaria pigmentosa is the most common pattern of <strong>cutaneous mastocytosis</strong>, which occurs due to an increased number of mast cells in the skin.&nbsp;It presents with <strong>reddish-brown</strong> or pale <strong>maculopapules</strong>, plaques, nodules in <strong>symmetric</strong> distribution, sparing the palms and soles.</p>\n<p>Darier's sign is<strong> not specific</strong> for mastocytosis as it is also rarely seen in <strong>juvenile xanthogranuloma</strong> and <strong>acute</strong> <strong>lymphoblastic leukemia</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bfabb8387f314858949b8192868729e9x1280x2310.JPEG"
    ]
  },
  {
    "text": "A 34-year-old carpenter presents with painful swelling in his left index finger for 1 day. Which organism is commonly responsible for his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Candida albicans"
      },
      {
        "id": 2,
        "text": "Pseudomonas aeruginosa"
      },
      {
        "id": 3,
        "text": "Streptococcus pyogenes"
      },
      {
        "id": 4,
        "text": "Staphylococcus aureus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above scenario depicts <strong>acute</strong> <strong>suppurative</strong> <strong>infection</strong> of the nail <strong>beds</strong> and <strong>folds</strong> which is called <strong>acute</strong> <strong>paronychia</strong>. It is most commonly caused by <em><strong>Staphylococcus aureus</strong></em>.&nbsp;</p>\n<div class=\"page\" title=\"Page 2506\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Acute paronychia is infection of the nail fold are represented by inflammation, swelling and abscess formation.</p>\n</div>\n</div>\n</div>\n</div>\n<p>It presents as <strong>tender</strong>, <strong>purulent</strong> swellings around the nail.</p>\n<p>Diagnosis is clinical and a cover of systemic antibiotics may be needed for deep infections.</p>\n<p>Treatment of pyogenic paronychia:&nbsp;</p>\n<ul>\n<li>Protection against trauma</li>\n<li>Keep affected fingernails dry.</li>\n<li>Abscesses -&nbsp;<strong>incised</strong> and <strong>drained</strong>. (abscess is often opened by pushing the nail fold away from the nail plate)</li>\n<li>Antibiotics- Semisynthetic <strong>penicillin</strong>/ <strong>cephalosporin</strong> with excellent anti-staphylococcal orally.</li>\n</ul>\n<p>Complications of acute paronychia may include osteitis and amputation.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9af6d7cc97b346679fa0a228215ebf82.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is not true regarding piebaldism?",
    "choices": [
      {
        "id": 1,
        "text": "Autosomal dominant inheritance"
      },
      {
        "id": 2,
        "text": "Well-defined hypopigmented macules are seen"
      },
      {
        "id": 3,
        "text": "White forelock is rare"
      },
      {
        "id": 4,
        "text": "Small spots of hyperpigmentation can also be seen"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>White forelock</strong> is quite <strong>common\u00a0</strong>in <strong>piebaldism.</strong></p>\n<p>Piebaldism is an\u00a0<strong>autosomal dominant</strong> benign\u00a0condition. Mutations are in the c\u2010KIT gene.</p>\n<p>Well-defined irregular\u00a0<strong>hypopigmented macules</strong>\u00a0with an absence of melanocytes are seen. <strong>Leucotrichia</strong> is associated with the depigmented macules. Small spots of hyperpigmentation are also seen within hypopigmented patches or on normal skin.\u00a0It is often associated with a <strong>V-shaped leucoderma</strong> on the mid-forehead.\u00a0</p>\n<p><strong>Epidermal cell</strong> or <strong>skin grafting</strong> is the treatment.</p>\n<p>Piebaldism can be distinguished from vitiligo because of the<strong> neonatal presence of white patches.\u00a0</strong></p>\n<p>The images below show patients with piebaldism.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/64f6f8375a5844ebbed9f5ce8ccecb18x512x510.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d9349ee959354067b31b655993544b5fx512x310.PNG"
    ]
  },
  {
    "text": "A 50-year-old retired petroleum refinery worker came with complaints of scaly pruritic patches on his upper and lower extremities. An elliptical skin biopsy was sent for histopathological study and the following T-cell morphology was noted. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pseudolymphoma"
      },
      {
        "id": 2,
        "text": "Mycosis fungoides"
      },
      {
        "id": 3,
        "text": "Adult T Cell leukemia"
      },
      {
        "id": 4,
        "text": "Chronic Myeloid Leukemia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows a characteristic <strong>cerebriform appearance</strong> of T-lymphocytes as seen in <strong>Mycosis fungoides.</strong></p>\n<p>It is a type of <strong>cutaneous T cell lymphoma</strong> with an indolent (slowly progressive) clinical course. Most accepted theory is that <strong>human T\u2010cell leukemia virus 1</strong> <strong>(HTLV-1) </strong>is the causative organism.</p>\n<p><strong>Histopathology findings:</strong></p>\n<ul>\n<li>Moderate lymphocytic infiltrate in the <strong>papillary dermis.</strong></li>\n<li><strong>Epidermotropism</strong>&nbsp;- presence of lymphocytes in the epidermal cells.</li>\n<li><strong>Pautriers&rsquo;s microabscesses</strong> consisting of clusters of atypical lymphocytes.</li>\n<li>Atypical lymphocytes have a <strong>cerebriform appearance</strong> with an irregular nuclear outline and halo around cells.</li>\n</ul>\n<p>Note - Cerebriform appearance is also seen in&nbsp;<strong>S&eacute;zary syndrome.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b9f85bea2a52433cb903637d19c18a90.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9fdb216582614cd4987979f04985bd0fx1280x2049.083215796897.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b73ed8d23dc2461f90c505119f3247cdx1280x1079.605077574048.JPEG"
    ]
  },
  {
    "text": "A patient presents with fine scaly plaque-like lesions on the upper arm. A skin biopsy is taken which shows the following histopathological finding. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Psoriasis"
      },
      {
        "id": 2,
        "text": "Mycosis fungoides"
      },
      {
        "id": 3,
        "text": "Dermatitis herpetiformis"
      },
      {
        "id": 4,
        "text": "Lichen planus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image shows&nbsp;<strong>malignant lymphocytes </strong>that have<strong> migrated </strong>to the<strong> epidermis</strong> from the dermis which is called&nbsp;<strong>epidermotropism.&nbsp;</strong>It&nbsp;is seen in <strong>mycosis fungoides</strong>.</p>\n<p><strong>Pautrier's microabscess</strong> constituting a collection of <strong>atypical T-cells</strong> in the epidermis is also a feature of mycosis fungoides (cutaneous T-cell lymphoma).</p>\n<p>The image below shows<strong>&nbsp;</strong>atypical lymphocytes showing epidermotropism and the formation of Pautrier's microabscesses (H&amp;E stain, 400x).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0039cef4487242188122cd9632b7c7bb.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/32bd435771674c86871207e917bbff6dx483x369.PNG"
    ]
  },
  {
    "text": "A 3-year-old child develops the following lesions over the face. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Variola"
      },
      {
        "id": 2,
        "text": "Chicken pox"
      },
      {
        "id": 3,
        "text": "Molluscum contagiosum"
      },
      {
        "id": 4,
        "text": "Vaccinia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above image shows&nbsp;<strong>shiny, pearly white, umbilicated papules</strong>&nbsp;which are suggestive of<strong>&nbsp;molluscum contagiosum</strong>.</p>\n<p>The peak incidence is&nbsp;between<strong> 2-5 years.&nbsp;</strong>The incubation period is around 14 days-6 months.<strong>&nbsp;</strong>It is mainly caused by type-I molluscum contagiosum virus (<strong>MCV-1</strong>) in<strong> children&nbsp;</strong>and type-II&nbsp;(<strong>MCV\u20102</strong>) in<strong> adults </strong>and<strong> HIV</strong> patients. New lesions develop along the line of trauma (pseudo-Koebner phenomenon).&nbsp;<strong>Sexually transmitted</strong>&nbsp;molluscum contagiosum may be present over the <strong>genital</strong> area.</p>\n<p>Microscopic examination of the lesions shows <strong>eosinophilic inclusions</strong>&nbsp;called <strong>Henderson-Patterson bodies.</strong>&nbsp;</p>\n<p>The condition is usually self-limiting but treatment is required for non-resolving symptomatic lesions. Destruction with&nbsp;cantharidin, trichloroacetic acid, diluted liquefied phenol, or surgical removal are a few options.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2584192220e24a7c8f8fd3903b7b6dc7.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ecb8144413c14f8c94c05e7676512ef7x1280x1207.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a component of SAPHO syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Synovitis"
      },
      {
        "id": 2,
        "text": "Seborrhoea"
      },
      {
        "id": 3,
        "text": "Acne"
      },
      {
        "id": 4,
        "text": "Hyperostosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Seborrhoea</strong> is a constituent of <strong>SAHA</strong> syndrome, not SAPHO syndrome.</p>\n<p><strong>SAPHO syndrome </strong>consists of:</p>\n<ol>\n<li>Synovitis</li>\n<li>Acne</li>\n<li>Pustulosis</li>\n<li>Hyperostosis</li>\n<li>Osteitis</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A model presents to the OPD with the following cutaneous lesions. She informs the dermatologist that these lesions increase in size whenever she consumes alcohol and that they bleed whenever she scratches them. Which of the following is false regarding the pathogenesis of her condition?",
    "choices": [
      {
        "id": 1,
        "text": "Hyperproliferation of epidermis"
      },
      {
        "id": 2,
        "text": "Genetic predisposition HLA\u2010C:06:02"
      },
      {
        "id": 3,
        "text": "Deficient Th1 and Th17 helper cells"
      },
      {
        "id": 4,
        "text": "IFN-\u03b3, TNF-\u03b1, IL-17 levels are raised"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shows sharply marginated, dull-red <strong>plaques</strong> with silvery-white <strong>scales</strong> which have coalesced to form geographical lesions. The history and image point towards a diagnosis of <strong>psoriasis</strong>. Here, there is an&nbsp;<strong>increased number of&nbsp;</strong>activated <strong>Th1, Th17,&nbsp;</strong>and Th22 cells, with a <strong>deficiency</strong> of<strong> Th2 cells.</strong></p>\n<p>It is a common, <strong>chronic, immune-mediated inflammatory</strong> condition in which multiple genetic and environmental factors may lead to the formation of erythematous plaques with silvery-white scales.&nbsp;Genetic predisposition is present in type 1 plaque psoriasis and guttate psoriasis with&nbsp;<strong>HLA\u2010C:06:02</strong>.</p>\n<p>There is <strong>increased keratinocyte turnover.</strong> It&nbsp;normally takes <strong>30 days</strong> for basal keratinocytes to reach the surface but in patients with psoriasis, this is&nbsp;<strong>reduced</strong> to<strong> 4-5 days</strong>.</p>\n<p>The activation of T cells of the adaptive immune system, specifically Th17 cells, in turn,&nbsp;activates keratinocytes to proliferate and produce multiple chemokines and antimicrobial peptides.&nbsp;</p>\n<p>Cytokines in psoriasis:</p>\n<table style=\"width: 471px; height: 147px;\">\n<tbody>\n<tr>\n<td style=\"width: 221.391px; text-align: center;\"><strong>Increased</strong></td>\n<td style=\"width: 233.609px; text-align: center;\"><strong>Decreased</strong></td>\n</tr>\n<tr>\n<td style=\"width: 221.391px;\">\n<p>Inflammatory cells and cytokines</p>\n</td>\n<td style=\"width: 233.609px;\">Anti-inflammatory cells and cytokines</td>\n</tr>\n<tr>\n<td style=\"width: 221.391px;\">Th1 and Th17 cells&nbsp;</td>\n<td style=\"width: 233.609px;\">&nbsp;Th2 cells</td>\n</tr>\n<tr>\n<td style=\"width: 221.391px;\">\n<p>IL\u20102, IL\u20108, IFN\u2010&gamma;,&nbsp;TNF\u2010&alpha;, IL\u201015, IL-17, IL\u201022, and IL\u201023</p>\n</td>\n<td style=\"width: 233.609px;\">\n<p>IL-4 and IL-10 absent</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/98cc9ff35c6144298e189360420d74b6.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following autoantibodies shows a strong association with the given clinical condition?",
    "choices": [
      {
        "id": 1,
        "text": "Anti-Mi-2"
      },
      {
        "id": 2,
        "text": "Anti P155/P140"
      },
      {
        "id": 3,
        "text": "Anti Jo-1"
      },
      {
        "id": 4,
        "text": "Anti Scl-70"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows&nbsp;<strong>pathognomonic </strong>involvement of eyelids in dermatomyositis in which the<strong> upper eyelids</strong> are<strong> preferentially affected </strong>with&nbsp;<strong>erythema</strong> that is lilac in color called<strong>&nbsp;heliotrope rash. </strong>This is associated with<strong> anti-Mi-2 antibodies.</strong></p>\n<p><strong>Gottron&rsquo;s papule</strong>, <strong>h</strong><strong>eliotrope rash</strong>, and <strong>s</strong><strong>hawl sign</strong>&nbsp;are associated with <strong>anti-Mi2 antibodies</strong>.</p>\n<p>Mechanic hand, Myositis, and ILD (Interstitial Lung Disease) are associated with anti\u2010histidyl tRNA synthetase (<strong>anti-Jo-1</strong>) antibodies.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a7199b6d601146efb424d852abb0c474.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "What is correct regarding the diagnosis based on the given image?",
    "choices": [
      {
        "id": 1,
        "text": "The lesions are not infectious"
      },
      {
        "id": 2,
        "text": "Trigeminal dermatome is most commonly affected"
      },
      {
        "id": 3,
        "text": "Anterior nerve roots are more commonly involved"
      },
      {
        "id": 4,
        "text": "Mucous membranes within the affected dermatomes are involved"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above image shows <strong>unilateral</strong>, <strong>painful</strong>, <strong>grouped vesicles</strong> in a single <strong>dermatome</strong> suggestive of herpes zoster or shingles. The <strong>mucous membranes</strong> within the affected dermatomes are involved in shingles.&nbsp;</p>\n<p><br />Herpes zoster/shingles is an acute cutaneous segmental eruption due to the reactivation of latent varicella-zoster virus from <strong>dorsal root ganglia</strong>. An earlier infection with varicella is essential before zoster can occur.&nbsp;</p>\n<p><br />The first symptom of zoster is usually pain, 1-3 days after which the lesions appear. Occasionally, the pain may not be followed by the eruption (&lsquo;zoster sine eruptione&rsquo;). The patients are <strong>infectious</strong>, both from the virus in the lesions and nasopharynx.&nbsp;</p>\n<p><br />The most commonly involved dermatomes in decreasing order of frequency are <strong>thoracic</strong> &gt; cervical &gt; <strong>trigeminal</strong> &gt; lumbosacral. The incidence of ophthalmic zoster increase with age. The posterior nerve roots and ganglia show inflammatory changes.</p>\n<p><br />Herpes zoster ophthalmicus is a variant of zoster involving the ophthalmic division of the trigeminal nerve (V1). Herpes zoster oticus/Ramsay Hunt syndrome is another variant involving the geniculate ganglion and presents with ipsilateral facial nerve palsy, otalgia and vesicles over external ear.&nbsp;</p>\n<p><br />Zoster is a <strong>self-limiting infection</strong> but it is painful and carries a risk of secondary infection and post-herpetic neuralgia. <strong>Analgesia</strong> and treatment of secondary infections are sufficient for mild infections.</p>\n<p><br />Indications for antivirals in VZV (<strong>Acyclovir 800 mg</strong>):<br />&bull; Painful zoster infections in adults<br />&bull; Facial zoster at any age<br />&bull; Immunocompromised</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2ce918eae0784e26ad3534e2fccfd767.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not associated with the given skin condition?",
    "choices": [
      {
        "id": 1,
        "text": "Photosensitivity"
      },
      {
        "id": 2,
        "text": "Blepharitis"
      },
      {
        "id": 3,
        "text": "Flushing"
      },
      {
        "id": 4,
        "text": "Comedones"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows acne rosacea.&nbsp;<strong>Comedones</strong> are&nbsp;<strong>pathognomonic</strong> features of <strong>acne vulgaris,</strong> not rosacea.</p>\n<p>The<strong>&nbsp;absence</strong> of<strong> comedones</strong> helps in <strong>differentiating</strong> rosacea from acne vulgaris.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/65531a12182344969ce481793c53f3c0.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fecaacb2e2d74a9eb35b24538d899d03x1280x1907.JPEG"
    ]
  },
  {
    "text": "Which of the following is not an early feature of the condition depicted below?",
    "choices": [
      {
        "id": 1,
        "text": "Indistinct shiny macules with normal sensation"
      },
      {
        "id": 2,
        "text": "Nasal stuffiness, crusting and epistaxis"
      },
      {
        "id": 3,
        "text": "Oedema of ankles and legs"
      },
      {
        "id": 4,
        "text": "Stocking and glove anaesthesia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image depicts <strong>lepromatous</strong> leprosy. Glove and stocking <strong>anesthesia</strong> is a <strong>late feature</strong>.&nbsp;</p>\n<p>In lepromatous leprosy, the <strong>earliest</strong> clinical manifestations are <strong>dermal.</strong>&nbsp;</p>\n<p>The <strong>early features</strong> include:&nbsp;</p>\n<ul>\n<li>Numerous, ill-defined, shiny macules</li>\n<li>Anhidrosis</li>\n<li>Normal sensation</li>\n<li>Nasal symptoms -&nbsp;stuffiness, discharge, epistaxis</li>\n<li>Peripheral oedema due to capillary stasis</li>\n</ul>\n<p>Early nerve involvement is asymptomatic. <strong>Peripheral</strong> nerves are affected <strong>first.</strong> In&nbsp;the<strong>&nbsp;</strong>late stages, even facial and corneal nerves can be involved. <strong>Loss</strong> of <strong>sensation</strong> begins as <strong>patchy</strong> and later becomes <strong>extensive</strong>. <strong>Stocking</strong> and <strong>glove</strong> anesthesia is a <strong>late</strong> manifestation. The affected skin can become dry and ichthyotic.</p>\n<p>The <strong>late stage</strong> of lepromatous leprosy gives rise to the following features:</p>\n<ul>\n<li>Leonine facies -&nbsp;infiltration of skin folds</li>\n<li>Madarosis - loss of&nbsp;eyelashes eyebrow hair</li>\n<li>Rat-bitten&nbsp;ear - repeated ulceration and healing</li>\n<li>Saddle nose deformity - breakdown of nasal cartilage</li>\n</ul>\n<p>Lepromatous leprosy develops in three stages:</p>\n<ol>\n<li>Early <strong>macular</strong> stage</li>\n<li><strong>Infiltrated</strong> stage - induration due to dermal infiltration, marked in face and ear lobe</li>\n<li>Late <strong>nodulo-plaque</strong> stage - progress to papules, nodules, and plaques, which ulcerate. &nbsp;</li>\n</ol>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/43193ba04c2f475da78cf8ce5017bfc4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old thin-built man presents with urethritis. Gram-staining of the purulent discharge is seen in the following image. What is the treatment of choice for this infection?",
    "choices": [
      {
        "id": 1,
        "text": "Ceftriaxone 250 mg IM + Azithromycin 1g PO stat"
      },
      {
        "id": 2,
        "text": "Ceftriaxone 500 mg IM in a single dose"
      },
      {
        "id": 3,
        "text": "Ceftriaxone 500 mg IM +  Doxycycline 100 mg BD for 7 days"
      },
      {
        "id": 4,
        "text": "Azithromycin 1g PO stat + Doxycycline 100 mg BD for 7 days"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This clinical scenario along with the microscopic findings of <strong>Gram\u2010negative intracellular diplococci </strong>indicates infection with <strong><em>Neisseria gonorrhoeae</em></strong>. As it has not been confirmed by NAAT testing, this patient must also be treated for <strong>concurrent chlamydial infection.</strong></p>\n<p>Single-agent therapy with <strong>ceftriaxone</strong> is preferred for the treatment of gonococcal infections. According to <strong>CDC guidelines (2021)</strong>, treatment of uncomplicated gonococcal infections is as follows:</p>\n<ul>\n<li>Weight &lt;150 kg \u2013 Ceftriaxone 500 mg intramuscular (IM) in a single dose</li>\n<li>Weight \u2265150 kg \u2013 Ceftriaxone 1 g IM in a single dose</li>\n</ul>\n<p>The doses of ceftriaxone are higher than the previous guidelines as the gonococcal minimum inhibitory concentrations (MICs) are rising worldwide. The British BASHH guidelines also recommend a high dose of 1g.</p>\n<p>Concurrent <strong>chlamydial</strong> infection must also be treated unless it has been excluded by <strong>molecular testing</strong>. First-line drug administered is:</p>\n<ul>\n<li>Oral <strong>doxycycline</strong> <strong>100 mg BD </strong>for 7 days\u00a0</li>\n</ul>\n<p><strong>Partner treatment</strong> is also required.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/64d6a57858ba42dfbce6fdda44e11f46.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the incorrect statement regarding scabies.",
    "choices": [
      {
        "id": 1,
        "text": "It is a water-washed disease"
      },
      {
        "id": 2,
        "text": "Itching starts 3 to 4 weeks after infection"
      },
      {
        "id": 3,
        "text": "Animal scabies is characterized by burrows"
      },
      {
        "id": 4,
        "text": "Circle of Hebra is formed by connecting body parts commonly involved"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Burrows</strong> are<strong> absent</strong> in animal scabies. Skin lesions resulting from contact with<strong> animal scabies</strong> are&nbsp;usually composed of <strong>small pruritic weals</strong> or papules, which are frequently excoriated, and resemble human scabies, but without burrows.</p>\n<p><strong>Water-washed diseases </strong>are infections that are caused by <strong>poor</strong> personal <strong>hygiene</strong> resulting from inadequate water availability for e.g. scabies.</p>\n<p>The characteristic symptoms of a scabies infection include <strong>intense itching&nbsp;</strong>which usually manifests 3-4 weeks after infestation and <strong>superficial</strong> <strong>burrows</strong> (pathognomonic).</p>\n<p><strong>Circle of Hebra&nbsp;</strong>is an imaginary circle formed by connecting the main sites of involvement in scabies.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/575c24b0e37d40809e8963b30ee99993x1280x1697.JPEG"
    ]
  },
  {
    "text": "A man was seen for an asymptomatic spotty eruption, of approximately 2 weeks duration, that are localized predominantly to the anterior chest, abdomen, and neck regions. Physical examination revealed several scattered light blue-red, oval to round spots. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pediculosis corporis"
      },
      {
        "id": 2,
        "text": "Pediculosis capitis"
      },
      {
        "id": 3,
        "text": "Pediculosis pubis"
      },
      {
        "id": 4,
        "text": "Scabies"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Maculae cerulae </strong>are blue-red/grey-colored macules on the skin <strong>characteristically</strong> seen in <strong>pediculosis pubis</strong> which is caused due to the infestation by <strong>pubic</strong> <strong>louse</strong> (<strong><em>P</em><em>thirus pubis</em></strong>/crab louse). They mark the&nbsp;hemosiderin-stained purpuric spots where lice have fed.</p>\n<p>The image given below shows pediculosis pubis- countless white spots and lice in pubic hairs.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a71d1bce7f42492dbcc1203772d781b3x508x190.PNG"
    ]
  },
  {
    "text": "Which of the following statements is correct with respect to Perl\u00e8che?",
    "choices": [
      {
        "id": 1,
        "text": "Inflammation around the nail involving the nail folds"
      },
      {
        "id": 2,
        "text": "White creamy patch over tongue"
      },
      {
        "id": 3,
        "text": "Cobbled appearance of tongue"
      },
      {
        "id": 4,
        "text": "Soreness and cracking at the angles of the mouth"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Soreness</strong> and <strong>cracking</strong> at the <strong>angles</strong> of the mouth are seen in <strong>Perl&egrave;che</strong>. It is considered as an <strong>intertrigo</strong> where&nbsp;<strong>candida</strong> is the most common organism implicated.</p>\n<p>It is also called <strong>angular</strong> <strong>stomatitis</strong>. It is a type of <strong>oral</strong> <strong>mucosal</strong> <strong>candidiasis</strong>. Nutritional status and mechanical factors (e.g. the depth of the fold), the presence of moisture from persistent salivation or licking the lips also contribute to stomatitis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3eda3cb312e84e9083f4d4341184c6fax1280x1097.6586741889987.JPEG"
    ]
  },
  {
    "text": "Where are Odland bodies present?",
    "choices": [
      {
        "id": 1,
        "text": "Stratum corneum"
      },
      {
        "id": 2,
        "text": "Stratum lucidum"
      },
      {
        "id": 3,
        "text": "Stratum granulosum"
      },
      {
        "id": 4,
        "text": "Stratum basale"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Odland bodies</strong>, lamellar bodies, or membrane-coating granules or keratinosomes<strong>&nbsp;</strong>are present in the <strong>stratum granulosum</strong> and upper stratum spinosum.&nbsp;</p>\n<p>They <strong>discharge lipid components</strong> into the intercellular space that plays an important role in <strong>barrier function</strong> and<strong> intercellular cohesion.</strong></p>\n<p>The image below shows Odland bodies in stratum granulosum. Green arrows indicate lamellar granules in the cytoplasm. Red arrows indicate secreted lamellar granules.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/16f3b24754b84aee8aa9a915884e5a10x902x830.PNG"
    ]
  },
  {
    "text": "A patient presents with the following itchy lesions. On examination, Nikolsky sign is negative.  Autoantibodies against which of the following antigens are most commonly seen in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "BP180"
      },
      {
        "id": 2,
        "text": "BP230"
      },
      {
        "id": 3,
        "text": "BP280"
      },
      {
        "id": 4,
        "text": "Desmoglein 1"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Tense bullae</strong>&nbsp;over the <strong>flexor</strong> aspect that are <strong>Nikolsky negative</strong> are suggestive of<strong>&nbsp;bullous pemphigoid.&nbsp;</strong>Autoantibodies against&nbsp;<strong>BP180&nbsp;</strong>are most commonly seen in this condition.</p>\n<p>BP180 is also known as <strong>BPAg2</strong> and it is seen in&nbsp;<strong>75&ndash;90%</strong> of bullous pemphigoid patients.&nbsp;Autoantibodies against <strong>BP230</strong> or <strong>BPAg1</strong> are recognized in <strong>50&ndash;70%</strong> of bullous pemphigoid patients.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dfd2160b4ea74dd5bfc4bc4f70d2a5cc.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a histopathological feature of lichenoid tissue reaction?",
    "choices": [
      {
        "id": 1,
        "text": "Liquefactive degeneration"
      },
      {
        "id": 2,
        "text": "Saw toothing"
      },
      {
        "id": 3,
        "text": "Microabscess"
      },
      {
        "id": 4,
        "text": "Colloid body formation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Microabscess</strong> is not typical of lichenoid tissue reactions.</p>\n<div class=\"page\" title=\"Page 118\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Skin changes</strong> in lichenoid tissue reactions:</p>\n<ul>\n<li>Upper dermis - <strong>Band\u2010like infiltrate</strong> of mononuclear cells.</li>\n<li>Dermoepidermal junction -&nbsp;<strong>S</strong><strong>aw\u2010toothed</strong> pattern.</li>\n<li>Basal cell layer -<strong>&nbsp;Liquefaction </strong>degeneration, <strong>colloid body </strong>formation.</li>\n<li>Epidermis - Increase in thickness.</li>\n</ul>\n<p><strong>Lichenoid reactions</strong> are seen in:&nbsp;</p>\n<ul>\n<li>Lichen planus</li>\n<li>Lupus erythematosus</li>\n<li>Lichen sclerosis</li>\n<li>Poikilodermas</li>\n<li>Cutaneous drug eruptions.</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common skin- related complaint reported in patients with HIV is _________.",
    "choices": [
      {
        "id": 1,
        "text": "Idiopathic pruritis"
      },
      {
        "id": 2,
        "text": "Seborrhoeic dermatitis"
      },
      {
        "id": 3,
        "text": "Fungal infections"
      },
      {
        "id": 4,
        "text": "Folliculitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the post-antiretroviral era, <strong>idiopathic pruritus </strong>has become the most common skin-related disease manifestation reported in patients with HIV.</p>\n<p>The other common skin manifestations are:</p>\n<ul>\n<li>Xerosis (23%) and icythyosis</li>\n<li>Nodular prurigo</li>\n<li><strong>Folliculitis</strong></li>\n<li>Eosinophilic folliculitis</li>\n<li>Pruritic papular eruption</li>\n<li><strong>Seborrhoeic dermatitis (9%)</strong></li>\n<li>Granuloma annulare</li>\n<li>Drug eruptions</li>\n<li>Herpes simplex</li>\n<li>Herpes zoster</li>\n<li>Viral warts</li>\n<li>Mollusca</li>\n<li>Oral and vaginal candidosis</li>\n<li><strong>Tinea (including onychomycosis)</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the ratio of the epidermal melanin unit?",
    "choices": [
      {
        "id": 1,
        "text": "28 keratinocytes : 1 melanocyte"
      },
      {
        "id": 2,
        "text": "36 keratinocytes : 2 melanocytes"
      },
      {
        "id": 3,
        "text": "28 keratinocytes : 2 melanocytes"
      },
      {
        "id": 4,
        "text": "36 keratinocytes : 1 melanocyte"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The ratio of the <strong>epidermal melanin unit</strong> is <strong>36 keratinocytes : 1 melanocyte.</strong></p>\n<p>The color of the skin is due to the pigment<strong> melanin</strong> synthesized by <strong>melanocytes</strong>. Melanocytes are <strong>dendritic cells</strong> derived from neural crest cells and are present in the epidermis' stratum basale. Each melanocyte synthesizes melanin and packs it in cell organelles to form <strong>melanosomes.</strong> These melanosomes are transferred through <strong>dendritic processes to 36 keratinocytes</strong> forming the &lsquo;epidermal melanin&rsquo; unit.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the primary site of action of androgen in hair follicle?",
    "choices": [
      {
        "id": 1,
        "text": "Hair follicle epithelium"
      },
      {
        "id": 2,
        "text": "Dermal papilla"
      },
      {
        "id": 3,
        "text": "Bulb"
      },
      {
        "id": 4,
        "text": "Infundibulum"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>dermal papilla</strong> is the primary target of the action of androgen in the hair. This is because the dermal papillae have two important features, namely</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Androgen receptors</strong> which are present only in dermal papillae</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Expression of<strong> 5&alpha;\u2010reductase type 2</strong>&nbsp;which regulates androgen-dependent hair growth.</li>\n</ul>\n<p>Androgens have the following effects on hair growth.</p>\n<ul>\n<li>It increases the number of cells in the dermal papilla which causes hair follicle growth and results in <strong>pubertal hair growth</strong>.&nbsp;</li>\n<li>It causes <strong>miniaturization</strong> of the follicle in other susceptible sites which leads to <strong>male pattern hair loss.</strong></li>\n</ul>\n<p>Finasteride inhibits conversion of testosterone to dihydrotestosterone in the dermal papillae. This prevents miniaturization and further development of alopecia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/307e3abf266a4cb883cf2c9511da89b4x1280x1649.JPEG"
    ]
  },
  {
    "text": "A 26-year-old man presents with the following skin lesion. How will you describe it?",
    "choices": [
      {
        "id": 1,
        "text": "Annular"
      },
      {
        "id": 2,
        "text": "Nummular"
      },
      {
        "id": 3,
        "text": "Arcuate"
      },
      {
        "id": 4,
        "text": "Polycyclic"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image showing a <strong>round</strong> lesion <strong>without central clearing</strong> is called a <strong>nummular</strong>&nbsp;(coin-like) or a&nbsp;<strong>discoid&nbsp;</strong>lesion.&nbsp;</p>\n<p>Both, the <strong>edge </strong>and<strong> center</strong>&nbsp;are equally active and <strong>uniformly colored</strong>. It is seen in discoid eczema, psoriasis.</p>\n<p>Option A: <strong>Annular</strong> lesions&nbsp;are&nbsp;<strong>ring-shaped</strong> with <strong>central clearing</strong>&nbsp;i.e., only the edges are active and appear raised, or in a different color. It is seen in&nbsp;tinea corporis, granuloma annulare.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4ca642b1636549499a3c6d3290d755c9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6b3de936372d4d75b502d9c04ca8919ax1280x1033.5684062059238.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c5138d8f39634ed1996785694f064a34x114x128.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/80a918aad8334babaa03dabc55d78f99x319x430.PNG"
    ]
  },
  {
    "text": "A 28-year-old sexually active man presents with a rash over his palms and soles. On further probing, he admits that his partner was recently diagnosed with syphilis and he himself had an ulcer on his penis a few months back. Which is not a likely feature of this rash?",
    "choices": [
      {
        "id": 1,
        "text": "Non-pruritic"
      },
      {
        "id": 2,
        "text": "Coppery red colour"
      },
      {
        "id": 3,
        "text": "Symmetrical distribution"
      },
      {
        "id": 4,
        "text": "Infectious"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p class=\"p1\">In this patient, a new-onset rash in the setting of syphilis in his partner and a history of a penile ulcer are suggestive of <strong>secondary syphilis</strong>. A <strong>non-infectious maculopapular rash</strong> is usually the earliest manifestation.</p>\n<p class=\"p1\">It usually develops around <strong>8 weeks</strong> after initial infection due to generalized <strong>treponemal dissemination</strong>. Rashes in secondary syphilis have three common features:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Non-pruritic</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Coppery red color</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">S<strong style=\"font-weight: 400;\">ymmetrically</strong> distributed</li>\n</ul>\n<p class=\"p1\"><strong>Cutaneous</strong> lesions of secondary syphilis are <strong>not infectious</strong> as they do not have enough treponemes. <strong>Exceptions</strong> are <strong>condyloma lata</strong> and <strong>mucous</strong> <strong>patches</strong>, which are highly infectious.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with a bullous disorder is referred to the dermatology OPD for further investigations. Direct immunofluorescence microscopy is performed. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Bullous pemphigoid"
      },
      {
        "id": 2,
        "text": "Pemphigus vulgaris"
      },
      {
        "id": 3,
        "text": "Epidermolysis bullosa aquisita"
      },
      {
        "id": 4,
        "text": "Dermatitis herpetiformis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows a characteristic <strong>fish-net </strong>appearance on&nbsp;<strong>direct immunofluorescence,</strong> which is diagnostic of&nbsp;<strong>pemphigus vulgaris</strong>.</p>\n<p>This pattern is&nbsp;due to <strong>intraepidermal</strong> <strong>intercellular</strong> deposition of&nbsp;<strong>IgG</strong> and<strong> C3.</strong></p>\n<p>Direct or indirect immunofluorescence cannot be used to differentiate between pemphigus vulgaris and pemphigus foliaceus, as they present similarly.&nbsp;</p>\n<p>Options A and C: Bullous pemphigoid, cicatricial pemphigoid, and epidermolysis bullosa acquisita present linear or shoreline pattern is seen in due to&nbsp;IgG and C3 deposits along the dermo-epidermal junctions, as seen in the following image.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/54f316f899a14b8f835f408e7fa8ecab.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/156f2788f7c74184963cd732e44fb9dfx512x290.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/57c508942f094ac592fb7bc968ba2925x250x193.PNG"
    ]
  },
  {
    "text": "Bindi Leukoderma is caused by which chemical?",
    "choices": [
      {
        "id": 1,
        "text": "Mono-benzyl ether of Hydroquinone (MBH)"
      },
      {
        "id": 2,
        "text": "Crocein Scarlet MOO and Solvent Yellow 3"
      },
      {
        "id": 3,
        "text": "p-phenylenediamine (PPD)"
      },
      {
        "id": 4,
        "text": "Para Tertiary butylphenol (PTBP)"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Bindi leukoderma is caused by <strong>para tertiary butylphenol (PTBP)</strong> present in adhesive sticker bindi.</p>\n<ul>\n<li>This is called as <strong>Contact Leukoderma</strong> or <strong>Chemical Leukoderma</strong> in which the chemical increases sensitivity and induces apoptosis of the melanocytes in the area of contact.&nbsp;</li>\n<li>There is also evidence that <strong>azo dyes</strong>, by virtue of structural similarity to tyrosine, can <strong>directly inhibit melanogenesis</strong> by competing with that amino acid for <strong>binding with tyrosinase enzyme.</strong></li>\n</ul>\n<p>Common chemicals in the Indian set up which cause Chemical leukoderma are:</p>\n<table style=\"height: 233px;\" width=\"336\">\n<tbody>\n<tr>\n<td style=\"width: 159.766px;\">Bindi Leukoderma</td>\n<td style=\"width: 163.516px;\"><strong>Para Tertiary butyl phenol (PTBP)</strong></td>\n</tr>\n<tr>\n<td style=\"width: 159.766px;\">Synthetic leather, rubber slippers, Latex condoms, rubber gloves</td>\n<td style=\"width: 163.516px;\">\n<p><strong>Mono-benzyl ether of Hydroquinone (MBH)</strong></p>\n<p><strong>-</strong>Rubber Antioxidant</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 159.766px;\">Hair dye</td>\n<td style=\"width: 163.516px;\"><strong>p-phenylenediamine (PPD)</strong></td>\n</tr>\n<tr>\n<td style=\"width: 159.766px;\">Alta (red colour like henna)</td>\n<td style=\"width: 163.516px;\"><strong>Crocein Scarlet MOO and Solvent Yellow 3</strong> (azo dyes)</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3f88529817824c63b0ee93a8eeec6fa2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/68a2d09f47c8453a86f8f293db25b2e2x512x401.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e98d079c9ccc4999aeb7779574039be4x512x370.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b510338bdedd4dec9b14c58befaeab11x512x371.PNG"
    ]
  },
  {
    "text": "Which of the following is not true about lichen nitidus?",
    "choices": [
      {
        "id": 1,
        "text": "It presents with tiny pinhead-sized papules mainly on forearms"
      },
      {
        "id": 2,
        "text": "Mucous membrane lesions are rare"
      },
      {
        "id": 3,
        "text": "Most commonly seen in elderly individuals"
      },
      {
        "id": 4,
        "text": "Koebner's phenomenon is seen"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Most cases of <strong>lichen nitidus</strong> occur in<strong> children or young adults</strong>.</p>\n<p>It presents with&nbsp;<strong>tiny pinhead-sized flesh-colored papules</strong> mainly on the dorsum of the&nbsp;<strong>forearms</strong> or penis. It is <strong>histologically similar</strong>&nbsp;to the&nbsp;<strong>early lesions</strong>&nbsp;of lichen planus.&nbsp;Mucous membrane involvement is&nbsp;quite<strong> rare.&nbsp;</strong>True Koebner's phenomenon is seen.&nbsp;</p>\n<p>Lesions are <strong>self-resolving</strong> and no treatment is required.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/81502188d99c403ebe94937ec40627b9x1280x1186.JPEG"
    ]
  },
  {
    "text": "A child presented with fever and multiple erythematous tender plaques. On microscopic examination, the skin lesions have neutrophilic infiltration in the dermis. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Behcet's Syndrome"
      },
      {
        "id": 2,
        "text": "Pyoderma gangrenosum"
      },
      {
        "id": 3,
        "text": "Kasabach-Meritt Syndrome"
      },
      {
        "id": 4,
        "text": "Sweet's Syndrome"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Neutrophilic infiltration of the dermis indicates one of the diseases under <strong>n</strong><strong>eutrophilic dermatosis</strong>. <strong>Sweet's Syndrome</strong> presents as an <strong>acute febrile</strong> neutrophilic dermatosis which is&nbsp;characterized by <strong>non\u2010itchy</strong>, sometimes<strong> tender</strong>,<strong> erythematous plaques and papules.</strong></p>\n<p>The plaques are often oedematous and as the process develops they may become studded with <strong>pseudovesicles or pseudopustules</strong> (no fluid collection present).</p>\n<p>The lesions in Sweet's Syndrome are most commonly distributed on the arms, upper body, head, and neck.&nbsp;An associated fever and peripheral leucocytosis are commonly seen and <strong>females</strong> are more frequently affected.</p>\n<p>Histological findings include a dense<strong> dermal neutrophilic infiltrate</strong> with edema.&nbsp;Three subgroups are recognized:</p>\n<ul>\n<li>Classical</li>\n<li>Malignancy-associated</li>\n<li>Drug-induced</li>\n</ul>\n<p>Option A:&nbsp;<strong>Behcet's</strong> syndrome is also a neutrophilic dermatosis but presents as <strong>recurrent oral</strong> and<strong> genital aphthous ulcers</strong> with an erythematous halo.</p>\n<p>Option B:&nbsp;Pyoderma gangrenosum, another neutrophilic dermatosis presents as painful ulcerative erythematous plaques or papules with undermined violaceous borders.</p>\n<p>Option C:&nbsp;Kasabach-Merritt's syndrome shows hemangiomas with thrombocytopenia.</p>\n<p>The image given below shows&nbsp;Sweet syndrome- pseudovesicles may occur within the inflammatory plaques.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dc4ea7dffaa54f53b0d0930bba506548x1280x561.PNG"
    ]
  },
  {
    "text": "A male child with cryptorchidism presents with large dirty brown scales on body flexures. Workup revealed steroid sulfatase deficiency. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Ichthyosis vulgaris"
      },
      {
        "id": 2,
        "text": "Lamellar ichthyosis"
      },
      {
        "id": 3,
        "text": "X-linked recessive ichthyosis"
      },
      {
        "id": 4,
        "text": "Non - bullous ichthyosiform erythroderma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>&nbsp;</strong><strong>X</strong>-<strong>linked recessive ichthyosis&nbsp;</strong>is a disease affecting only <strong>males</strong> and presenting with large, generalized <strong>dirty&nbsp;brown-black scales</strong> encroaching <strong>flexures</strong> along with <strong>cryptorchidism</strong>.</p>\n<p>It is due to a mutation in the&nbsp;<strong>STS gene</strong> encoding steroid sulfatase.&nbsp;</p>\n<p>At the age of <strong>2&ndash;6 months</strong>, usually large thick dark brown to yellow\u2010brown hyperkeratosis&nbsp;develop covering the trunk, the extremities and the neck.&nbsp;Skin biopsy shows <strong>hyperkeratosis</strong> with <strong>hypergranulosis</strong>.&nbsp;Palms, soles, and larger flexures are <strong>spared</strong>.&nbsp;Deep stromal <strong>corneal opacity</strong> is a frequent finding.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d4843d86ac2445bf8d0308764696d674x1280x1195.148095909732.JPEG"
    ]
  },
  {
    "text": "A 50-year-old man with a chronic skin condition is noted to have areas of linear discontinuation over his skin. What is this finding called?",
    "choices": [
      {
        "id": 1,
        "text": "Ulcer"
      },
      {
        "id": 2,
        "text": "Excoriation"
      },
      {
        "id": 3,
        "text": "Erosion"
      },
      {
        "id": 4,
        "text": "Fissure"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>A&nbsp;<strong>linear</strong>&nbsp;<strong>crack </strong>or<strong>&nbsp;discontinuation</strong> of the skin surface is called a <strong>fissure</strong>.</p>\n<p>Option A: Ulcer refers to a loss of dermis and epidermis, often involving underlying tissue as well.</p>\n<p>Option B: Excoriation&nbsp;refers to loss of skin substance, specifically produced by&nbsp;scratching.</p>\n<p>Option C: Erosion refers to a&nbsp;loss of the epidermis, which heals without scarring.&nbsp;It commonly follows a blister.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aa8ce19782724cc784f6a737b30907a3x1280x1142.JPEG"
    ]
  },
  {
    "text": "A 4-month-old infant was brought to the OPD with the following lesions on his scalp. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Atopic dermatitis"
      },
      {
        "id": 2,
        "text": "Seborrheic dermatitis"
      },
      {
        "id": 3,
        "text": "Berloque dermatitis"
      },
      {
        "id": 4,
        "text": "Nummular dermatitis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows\u00a0<strong>flaky, white</strong> to <strong>yellowish greasy</strong> scales\u00a0on\u00a0the scalp, suggestive of\u00a0<strong>infantile seborrheic dermatitis.\u00a0</strong></p>\n<p>It\u00a0is a common, <strong>inflammatory</strong> skin condition that causes the formation of flaky, white to yellowish greasy scales\u00a0on\u00a0<strong>oily areas</strong>\u00a0such as the scalp, forehead, nose, or inside the ear.\u00a0<strong>Cradle cap</strong>\u00a0is the term used when it\u00a0affects the scalp of infants.\u00a0</p>\n<p>It commonly <strong>appears</strong>\u00a0around\u00a0<strong>3\u00a0months</strong>\u00a0of age. It is rare after\u00a08 months.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/72b93fe79d144e438b3314e999940ae0.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "In which of the following conditions is interface dermatitis not seen?",
    "choices": [
      {
        "id": 1,
        "text": "Erythema multiforme"
      },
      {
        "id": 2,
        "text": "Lichen planus"
      },
      {
        "id": 3,
        "text": "Graft versus host disease"
      },
      {
        "id": 4,
        "text": "Eczema"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Eczema shows <strong>spongiotic dermatitis </strong>and not <strong>interface dermatitis</strong>.</p>\n<p>Interface dermatitis includes diseases in which the primary pathology involves the <strong>dermo-epidermal junction</strong>.</p>\n<p>The salient <strong>histological findings</strong> include:</p>\n<ul>\n<li>Basal cell vacuolization</li>\n<li>Apoptotic keratinocytes (colloid or Civatte bodies)</li>\n<li>Obscuring of the dermo-epidermal junction by inflammatory cells</li>\n</ul>\n<p>Common conditions showing interface dermatitis are:</p>\n<ul>\n<li>Erythema multiforme</li>\n<li>Lichen planus</li>\n<li>Graft versus host disease</li>\n<li>Fixed drug eruptions</li>\n<li>Lupus erythematosus</li>\n<li>Dermatomyositis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/77f1742a592a41129b4631c30f21f1cdx1280x1307.JPEG"
    ]
  }
];
        let quizName = 'Dermatology Test I';
        const quizFilename = 'dermatology-test-i-8f2fcf03.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>