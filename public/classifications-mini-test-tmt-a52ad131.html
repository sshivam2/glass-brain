<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classifications Mini Test - -Tmt - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2023-24
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 55-year-old man has been in the ICU for the past 1 month due to end-stage liver failure. He is not eligible for a transplant and his doctors have said there is nothing they can do at this stage. His family has consented to organ donation once his heart stops. Which of the categories of non-beating heart donors would this patient fall into as per the modified Maastricht classification?",
    "choices": [
      {
        "id": 1,
        "text": "Category IV"
      },
      {
        "id": 2,
        "text": "Category II"
      },
      {
        "id": 3,
        "text": "Category I"
      },
      {
        "id": 4,
        "text": "Category III"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The patient would fall under <strong>category III.\u00a0</strong></p>\n<p><strong>Modified Maastricht classification</strong>- Categories of non-heart-beating donors:</p>\n<ul>\n<li>Uncontrolled - transplant team not present or prepared\n<ul>\n<li><strong>Category I</strong> - includes <strong>victims of accident and suicide</strong> who are<strong> found dead at the scene</strong> and resuscitation is deemed pointless (e.g. fatal cervical spine fracture).</li>\n<li><strong>Category II</strong> -\u00a0donors are mostly <strong>victims of sudden cardiac or cerebral catastrophes</strong> who are brought to emergency departments while being resuscitated by ambulance personnel or who <strong>die in the department</strong>. Other sources include patients suffering an isolated brain injury, anoxia, and stroke, and victims of major trauma who died soon after hospital admission.</li>\n<li><strong>Category V</strong> - <strong>Unexpected cardiac arrest</strong> during <strong>intensive care</strong>.</li>\n</ul>\n</li>\n<li>Controlled - transplant team present and prepared\n<ul>\n<li><strong>Category III</strong> -\u00a0encompasses <strong>patients who are dying</strong>, often in an<strong> intensive care unit</strong>. These are the patients awaiting cardiac arrest where the treating clinicians have decided to withdraw treatment and not commence resuscitation for various reasons.</li>\n<li><strong>Category IV</strong> - comprises patients who suffer <strong>unexpected cardiac arrest</strong> during or after the determination of <strong>brain death.</strong></li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The contrast-enhanced CT of the abdomen of a 75-year-old woman shows the following findings. Which Bosniak class does the cyst belong to?",
    "choices": [
      {
        "id": 1,
        "text": "Bosniak III"
      },
      {
        "id": 2,
        "text": "Bosniak II"
      },
      {
        "id": 3,
        "text": "Bosniak I"
      },
      {
        "id": 4,
        "text": "Bosniak IV"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<div class=\"page\" title=\"Page 1411\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The presence of a simple renal cyst without any septations, calcifications, or enhancing soft tissue components is classified as <strong>Bosniak class I. </strong>They<strong>\u00a0</strong>do not require treatment or follow-up imaging.</p>\n<p><strong>Bosniak classification:</strong></p>\n</div>\n</div>\n</div>\n</div>\n<p>Depending on the CT characteristics the renal cysts are classified mainly into four classes:</p>\n<p><strong>Class I: </strong>It is a simple benign cyst, without any septations.</p>\n<p><strong>Class II: </strong>The cyst consists of one or more thin (&lt;1 mm) septa running through them. Class II lesions are benign.</p>\n<p>The <strong>subcategory class IIF</strong> includes lesions with multiple class II features, large hyperdense cysts (&gt;3cm), or hyperdense cysts that are totally intrarenal.\u00a0These cysts are more complex and do not fit into categories II or III. They require follow-up for up to 5 years to exclude malignancy.</p>\n<p><strong>Class III: </strong>These are complicated cysts having thickened septa with nodular areas of calcification. The walls of the cyst or septae show enhancement.\u00a0The class III lesions should be surgically explored or biopsied. &lt;50% will turn out to be malignant.</p>\n<p><strong>Class IV:</strong> These are malignant lesions with solid enhancing nodules. Surgical removal to be considered.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/407c4cddb5fe4e52bd99cf02988b9621.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/79ff7d05f140489f984c2ac7ecf0e663x1280x2560.JPEG"
    ]
  },
  {
    "text": "Which is the classification system used for the fracture shown in the x-ray given below?",
    "choices": [
      {
        "id": 1,
        "text": "Schatzker classification"
      },
      {
        "id": 2,
        "text": "Ideberg classification"
      },
      {
        "id": 3,
        "text": "Neer classification"
      },
      {
        "id": 4,
        "text": "Gartland classification"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image is of the <strong>fracture</strong> of the<strong> proximal humerus</strong>. The most widely accepted classification is<strong>&nbsp;</strong>the<strong> Neer</strong>&nbsp;<strong>classification</strong>, which involves 4 major segments in injuries:</p>\n<ul>\n<li>Head of humerus</li>\n<li>Greater tuberosity</li>\n<li>Lesser tuberosity</li>\n<li>Shaft of humerus</li>\n</ul>\n<p><strong>Neer classi\ufb01cation</strong> distinguishes between the number of displaced fragments, with displacement de\ufb01ned as greater than 45 degrees of angulation or 1 cm of separation.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1160d702a77f4942b1f466619bf6d3cc.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/90f7be2afab54949998c499fe44c4637x315x480.PNG"
    ]
  },
  {
    "text": "A pet shop owner presented with upper abdominal discomfort. On examination, mild tenderness is found in the right hypochondrium. USG revealed a cyst with the finding given in the image below. According to WHO classification, this cyst belongs to which of the following type?",
    "choices": [
      {
        "id": 1,
        "text": "CE-1"
      },
      {
        "id": 2,
        "text": "CE-2"
      },
      {
        "id": 3,
        "text": "CE-3"
      },
      {
        "id": 4,
        "text": "CE-4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario and the USG showing a cyst with detached membranes(<strong>Water Lily sign</strong>) are suggestive of a <strong>hydatid cyst</strong>. Cyst with detached membranes is classified as <strong>CE-3</strong> according to the WHO classification.&nbsp;</p>\n<p><strong>WHO classification of hydatid cyst</strong></p>\n<table style=\"width: 558px; height: 808px;\">\n<tbody>\n<tr style=\"height: 46px;\">\n<td style=\"width: 176.906px; height: 46px;\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Stage</strong></p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 352.5px; height: 46px;\"><strong>Description</strong></td>\n</tr>\n<tr style=\"height: 32px;\">\n<td style=\"width: 176.906px; height: 32px;\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>CL (cystic lesion)</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 352.5px; height: 32px;\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Unilocular anechoic cystic lesion without internal echoes or septations</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 29px;\">\n<td style=\"width: 176.906px; height: 29px;\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>CE (cystic echinococcosis) 1</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 352.5px; height: 29px;\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Uniformly anechoic cyst with fine internal echoes that represent protoscolices after rupturing of a vesicle, called &lsquo;hydatid sand&rsquo;</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 39px;\">\n<td style=\"width: 176.906px; height: 39px;\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>CE 2</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 352.5px; height: 39px;\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Cyst with internal septation representing the walls of the daughter cyst described as multivesicular, <strong>honeycomb</strong>, cartwheel, or rosette formation</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 82px;\">\n<td style=\"width: 176.906px; height: 82px;\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>CE 3<br />(transitional stage) description of daughter cyst</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 352.5px; height: 82px;\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>3A: daughter cysts with detached laminated membrane(<strong>Water lily sign</strong>)</p>\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>3B- daughter cysts inside a solid matrix</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 78px;\">\n<td style=\"width: 176.906px; height: 78px;\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>CE 4(inactive/degenerative)</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 352.5px; height: 78px;\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Daughter cysts can no longer be seen.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>A mixture of hypoechoic and hyperechoic features &ndash; like a <strong>bag of wool</strong></p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 78px;\">\n<td style=\"width: 176.906px; height: 78px;\">\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>CE 5</p>\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>(inactive/degenerative)</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 352.5px; height: 78px;\">&nbsp;\n<div class=\"page\" title=\"Page 95\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Calcification of the wall; either partial or complete</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Hydatid Cyst is a zoonotic infection caused by the <strong>Echinococcus species</strong>(dog tapeworm ). Dogs are the definitive hosts of E. granulosus. Sheep are the usual intermediate hosts, but humans are accidental intermediate hosts. Humans are end-stage hosts of the parasite since there is <strong>no human-to-human transmission.</strong></p>\n<p>The clinical presentation of a<strong>&nbsp;hydatid cyst</strong>&nbsp;is&nbsp;<strong>largely asymptomatic</strong>&nbsp;until complications occur. The&nbsp;most common presenting symp&shy;toms&nbsp;are&nbsp;<strong>abdominal pain,</strong>&nbsp;dyspepsia, and vomiting. The&nbsp;most frequent sign&nbsp;is&nbsp;<strong>hepatomegaly.</strong></p>\n<p>Approximately 75% of hydatid cysts are located in the&nbsp;<strong>right lobe of the liver</strong>&nbsp;and are&nbsp;<strong>solitary.</strong></p>\n<p>Computed tomography (<strong>CT</strong>) scan is the<strong>&nbsp;best imaging modality&nbsp;</strong>for hydatid cysts. It shows the presence of a space-occupying lesion with a smooth outline with septa. Diagnosis is suggested by the finding of a multiloculated cyst on ultrasound and is further supported by the finding of a floating membrane within the cysts on a CT scan. Active cysts contain a <strong>large number of smaller daughter cysts</strong> (multi-vesicular rosette-like cystic lesions with daughter cysts) which is characteristic of hydatid cysts of the liver.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0518a227f9bf4b249df8cc1c9937888b.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0d133913c4884961bd5cb12b64739896x512x382.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a71f66d3ecb247ffb66c525f9f4f04ecx720x477.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/59a578902e184691b5cc653d982e9f69x767x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/57aca12fd6bb49ee979afe66750bf842x232x282.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/66b5132aaa314a67b19fb4145f1bb0e0x1280x817.PNG"
    ]
  },
  {
    "text": "A male baby weighing 1.6 kg, born at 34 weeks, has abdominal distension and hematochezia on the 16th day of life. He is apneic, bradycardic, and lethargic. He was fed only with artificial formula milk. An x-ray of the abdomen shows a portal vein gas shadow. What is the stage of disease according to modified Bell's staging criteria?",
    "choices": [
      {
        "id": 1,
        "text": "Stage II A"
      },
      {
        "id": 2,
        "text": "Stage II B"
      },
      {
        "id": 3,
        "text": "Stage III A"
      },
      {
        "id": 4,
        "text": "Stage III B"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Abdominal distension and hematochezia in a preterm baby exclusively fed on formula feed are suggestive of <strong>necrotizing enterocolitis</strong>\u00a0(NEC).<strong>\u00a0</strong>The abdominal x-ray finding of <strong>portal vein gas shadow</strong> is a sign of severe disease and corresponds to <strong>stage IIB</strong>,\u00a0according to<strong> modified Bell's staging</strong> criteria.</p>\n<p>Modified Bell's staging criteria:</p>\n<ul>\n<li>Stage I - Suspected NEC</li>\n<li>Stage II - Proven NEC</li>\n<li>Stage III - Advanced NEC</li>\n</ul>\n<table style=\"height: 753px; width: 236.65px;\">\n<tbody>\n<tr>\n<td style=\"width: 67px; text-align: center;\">Stage</td>\n<td style=\"width: 10px; text-align: center;\">Intestinal signs</td>\n<td style=\"width: 10px; text-align: center;\">Systemic signs</td>\n<td style=\"width: 57.65px; text-align: center;\">Radiological signs</td>\n</tr>\n<tr>\n<td style=\"width: 67px; text-align: center;\">\n<p><strong><strong>I A<br /></strong></strong></p>\n<p>Suspected NEC<strong><br /></strong></p>\n</td>\n<td style=\"width: 10px;\">Mild <br />abdominal distention, emesis, guaiac-positive stool</td>\n<td style=\"width: 10px;\">Temperature instability, apnea, bradycardia, lethargy</td>\n<td style=\"width: 57.65px;\">Normal or intestinal dilatation, mild ileus</td>\n</tr>\n<tr>\n<td style=\"width: 67px; text-align: center;\"><strong>I B</strong></td>\n<td style=\"width: 10px;\">IA + <br />Bright red blood from the\u00a0rectum</td>\n<td style=\"width: 10px;\">Same as IA</td>\n<td style=\"width: 57.65px;\">Same as IA</td>\n</tr>\n<tr>\n<td style=\"width: 67px; text-align: center;\"><strong><strong>II A<br /></strong></strong><strong><br /></strong>Mildly ill<strong><br /></strong></td>\n<td style=\"width: 10px;\"><strong>Absent <br />bowel sounds</strong></td>\n<td style=\"width: 10px;\">Same as IA\u00a0</td>\n<td style=\"width: 57.65px;\"><strong>Pneumatosis intestinalis,<br /></strong>ileus</td>\n</tr>\n<tr>\n<td style=\"width: 67px; text-align: center;\"><strong><strong>II B<br /><br /></strong></strong>Moderately ill<strong><br /></strong></td>\n<td style=\"width: 10px;\">\u00a0IIA + definite abdominal tenderness</td>\n<td style=\"width: 10px;\">IA+ <br />Metabolic acidosis and thrombo-cytopenia\u00a0</td>\n<td style=\"width: 57.65px;\">\u00a0IIA + <br /><strong>portal venous gas</strong>, with or without ascites</td>\n</tr>\n<tr>\n<td style=\"width: 67px; text-align: center;\"><strong><strong>III A<br /><br /></strong></strong>Severely ill, bowel intact\u00a0<strong><br /></strong></td>\n<td style=\"width: 10px;\">IIB + peritonitis <br />with marked tenderness, and abdominal distension\u00a0</td>\n<td style=\"width: 10px;\">IIB+ hypotension, bradycardia, acidosis, DIC, neutropenia\u00a0</td>\n<td style=\"width: 57.65px;\">IIB + <strong>definite ascites</strong>\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 67px; text-align: center;\"><strong><strong>III B<br /><br /></strong></strong>Severely ill, bowel<br />perforated<strong><br /></strong></td>\n<td style=\"width: 10px;\">\u00a0Same as III A</td>\n<td style=\"width: 10px;\">Same as IIIA\u00a0</td>\n<td style=\"width: 57.65px;\">\u00a0IIB +<strong>pneumo-peritoneum</strong></td>\n</tr>\n</tbody>\n</table>\n<p><br /><strong>Necrotizing enterocolitis</strong>\u00a0is the <strong>most common</strong> life-threatening <strong>gastrointestinal disorder</strong> in the newborn period. It is characterized by various degrees of mucosal or transmural inflammation and necrosis of the intestinal tract. It most commonly affects the distal <strong>ileum </strong>and<strong> proximal colon</strong>.\u00a0</p>\n<p>Three major <strong>risk factors</strong> implicated:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Prematurity</strong> is the <strong>greatest risk factor</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Formula feeding</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Bacterial colonization of the intestine</li>\n</ul>\n<p>Incidence and mortality increase with decreasing birth weight and gestational age. It usually presents within the <strong>2nd </strong>or<strong> 3rd week</strong> of life with <strong>abdominal distension</strong> and tenderness, feed intolerance, and\u00a0<strong>occult/gross blood</strong> in the\u00a0<strong>stool</strong>. Systemic features include <strong>hypotension, bradycardia</strong>, <strong>lethargy</strong>, and temperature instability.</p>\n<p>Diagnosis can be made with a <strong>plain abdominal x-ray.</strong> The important signs are :</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Pneumatosis intestinalis-\u00a0</strong>air in the bowel wall is diagnostic, and corresponds to stage <strong>IIA.</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Portal vein gas</strong> is a sign of severe disease and corresponds to <strong>stage IIB</strong>.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Pneumoperitoneum</strong> indicates perforation and corresponds to <strong>stage IIIB</strong>.</li>\n</ul>\n<p>The given x-ray shows pneumatosis intestinalis (black arrows).\u00a0It is seen as a characteristic <strong>train-track lucency</strong>\u00a0appearance\u00a0<strong>within </strong>the<strong> bowel wall</strong>\u00a0due to the gas produced by bacteria.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5c0efce83929417a99e38d7896bb6237x720x1122.PNG"
    ]
  },
  {
    "text": "Todani classification system is used for the assessment of _______.",
    "choices": [
      {
        "id": 1,
        "text": "Duodenal atresia"
      },
      {
        "id": 2,
        "text": "Choledochal cyst"
      },
      {
        "id": 3,
        "text": "Sphincter of Oddi dysfunction"
      },
      {
        "id": 4,
        "text": "Bile duct injuries"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Todani</strong>&nbsp;<strong>classification</strong> is used for the assessment of <strong>Choledochal</strong> <strong>cysts</strong>.</p>\n<p>Other options:</p>\n<div class=\"page\" title=\"Page 1254\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Option C:<strong> Milwaukee classification</strong> is used to assess the <strong>sphincter of Oddi dysfunction</strong>.</p>\n</div>\n</div>\n</div>\n</div>\n<p>Option D:&nbsp;<strong>Strasberg classification</strong> is used in <strong>bile duct injuries</strong>. It is based on the anatomical location of the injury.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/16fb61b80e1b434caac49ec2ff2b6bd6x1280x3846.JPEG"
    ]
  },
  {
    "text": "A 32-year-old man presented to the emergency department following a road traffic accident. His vitals are stable but he complains of flank pain and blood in the urine. On examination, there was some abrasion on the abdomen in the right iliac and lumbar region. Investigations revealed a laceration in the right kidney extending to the collecting ducts with some urine extravasation. What is the grade of renal injury?",
    "choices": [
      {
        "id": 1,
        "text": "Grade 4"
      },
      {
        "id": 2,
        "text": "Grade 3"
      },
      {
        "id": 3,
        "text": "Grade 2"
      },
      {
        "id": 4,
        "text": "Grade 5"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The patient in the given question has <strong>renal laceration with urine extravasation</strong>, indicating that he had a&nbsp;<strong>grade 4 renal injury.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 68-year-old male patient presented to the emergency room with severe chest and back pain. Contrast-enhanced CT revealed a Stanford type B aortic dissection. Which part of the aorta is involved in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Only 1"
      },
      {
        "id": 2,
        "text": "1 and 2"
      },
      {
        "id": 3,
        "text": "Only 3"
      },
      {
        "id": 4,
        "text": "1, 2 and 3"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The part of the aorta involved in the above clinical scenario, i.e.\u00a0<strong>Stanford</strong> <strong>type B</strong> aortic dissection, is<strong>\u00a0the descending aorta</strong>.</p>\n<p class=\"p1\"><strong>Aortic dissection</strong> most commonly occurs in<strong> middle-aged</strong> and<strong> elderly hypertensive</strong> patients.</p>\n<p class=\"p1\">It is initiated by an intimal tear, which allows blood to penetrate into the medial layer, producing a cleavage plane (false lumen) between the inner two-thirds and outer one-third of the media. The true lumen is separated from the false lumen by an intimomedial flap.</p>\n<p><strong>Classification of aortic dissection:</strong></p>\n<p>Acute aortic dissection can be classified by the original <strong>DeBakey system</strong>, which is based on the location of the proximal tear and distal extent of the dissection flap, or the <strong>Stanford system</strong>, which is based only on the location of the proximal tear.\u00a0</p>\n<table style=\"width: 397px;\">\n<tbody>\n<tr style=\"height: 18px;\">\n<td style=\"width: 96px; height: 18px;\"><strong>Site of dissection</strong></td>\n<td style=\"width: 24.083343505859375px; height: 18px;\"><strong>DeBakey</strong></td>\n<td style=\"width: 47.916656494140625px; height: 18px;\"><strong>Stanford</strong></td>\n</tr>\n<tr style=\"height: 56px;\">\n<td style=\"width: 96px; height: 56px;\">Both ascending and descending aorta</td>\n<td style=\"width: 24.083343505859375px; height: 56px;\">Type I</td>\n<td style=\"width: 47.916656494140625px; height: 56px;\">Type A</td>\n</tr>\n<tr style=\"height: 37px;\">\n<td style=\"width: 96px; height: 37px;\">Only ascending aorta and arch of aorta</td>\n<td style=\"width: 24.083343505859375px; height: 37px;\">Type II</td>\n<td style=\"width: 47.916656494140625px; height: 37px;\">Type A</td>\n</tr>\n<tr style=\"height: 103.66668701171875px;\">\n<td style=\"width: 96px; height: 135.66668701171875px;\" rowspan=\"2\">\n<p>Descending the aorta distal to the subclavian artery</p>\n</td>\n<td style=\"width: 24.083343505859375px; height: 103.66668701171875px;\">\n<p>Type IIIa</p>\n<p>Limited to the thoracic aorta</p>\n</td>\n<td style=\"width: 47.916656494140625px; height: 103.66668701171875px;\" rowspan=\"2\">Type B</td>\n</tr>\n<tr style=\"height: 32px;\">\n<td style=\"width: 24.083343505859375px; height: 32px;\">\n<p>Type IIIb</p>\n<p>Extends to the abdominal aorta</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/867f02e1159040d9b1e0a8d4dfbaa4eax1280x1241.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/40954295537341c59bd694df65977c85x512x187.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ebc832840d954b53be7f9da4a4615e75x1280x3028.JPEG"
    ]
  },
  {
    "text": "An elderly lady presented with a history of trivial fall while climbing the stairs. She has pain in the right hip and is unable to walk. An X-ray was performed and is shown below. Which of the following is not a classification system for the above condition?",
    "choices": [
      {
        "id": 1,
        "text": "Anatomical classification"
      },
      {
        "id": 2,
        "text": "Pauwel classification"
      },
      {
        "id": 3,
        "text": "Gartland classification"
      },
      {
        "id": 4,
        "text": "Garden classification"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario and X-ray are suggestive of a <strong>fracture of the neck</strong> of <strong>femur</strong>. <strong>Gartland classification</strong> is used for <strong>supra-condylar fracture of the humerus</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5c124b6ab19342f48773b6b63253c828.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dd0847be7c4f48088e5b1be0f8ae8d18x1280x1586.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e62d2cbe50984d408be843601f52f81fx1279x1149.JPEG"
    ]
  },
  {
    "text": "Match the following columns:",
    "choices": [
      {
        "id": 1,
        "text": "1-a, 2-b, 3-c"
      },
      {
        "id": 2,
        "text": "1-a, 2-c, 3-b"
      },
      {
        "id": 3,
        "text": "1-b, 2-c, 3-a"
      },
      {
        "id": 4,
        "text": "1-b, 2-a, 3-c"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correct answer is <strong>Option B-1-a, 2-c, 3-b.</strong></p>\n<p>There is no need to remember the actual percentage values. Wounds have to be arranged in increasing order of infection rates. <strong>Surgical wounds</strong> are classified based on the <strong>expected</strong> amount of <strong>bacterial load</strong> at the time of surgery.&nbsp;</p>\n<p><strong>Class I</strong> surgical wounds are <strong>clean wounds</strong>. They are <strong>noninfected</strong> surgical wounds <strong>without</strong> any <strong>inflammation</strong>.</p>\n<p>Examples:</p>\n<ul>\n<li><strong>Hernia repair</strong></li>\n<li>Breast biopsy specimen</li>\n</ul>\n<p><strong>Class II</strong> surgical wounds are <strong>clean/contaminated wounds</strong>. They are surgical wounds that include an entry <strong>hollow viscus</strong> such as the respiratory tract or gastrointestinal tract under controlled conditions <strong>without significant spillage</strong>. Examples:</p>\n<ul>\n<li><strong>Elective cholecystectomy</strong></li>\n<li>Elective gastrointestinal surgery (<strong>not colon</strong>)&nbsp;</li>\n<li><strong>Elective colorectal surgeries</strong> have a higher rate of infection among class-II wounds.&nbsp;</li>\n</ul>\n<p><strong>Class III</strong> surgical wounds are<strong>&nbsp;contaminated wounds</strong>. They include<strong>&nbsp;fresh</strong>&nbsp;open&nbsp;<strong>accidental wounds</strong>, surgeries with a major&nbsp;<strong>break in sterile technique</strong>, gross&nbsp;<strong>spillage</strong>&nbsp;of the&nbsp;<strong>gastrointestinal</strong>&nbsp;tract, or incision through an inflamed nonpurulent tissue.</p>\n<p>Examples:</p>\n<ul>\n<li>Open cardiac massage</li>\n<li>Penetrating abdominal trauma</li>\n</ul>\n<p><strong>Class IV</strong> surgical wounds are <strong>dirty wounds</strong>. They are old traumatic wounds with the presence of <strong>necrotic tissue</strong> and perforated viscus with a <strong>heavy</strong> load of <strong>contamination</strong>.</p>\n<p>Examples:</p>\n<ul>\n<li>Perforated diverticulitis</li>\n<li>Necrotizing soft tissue infection</li>\n</ul>\n<table class=\"t1\" style=\"width: 629.781px;\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 1318.78px; height: 46px;\" colspan=\"3\" valign=\"top\">\n<p class=\"p2\"><span class=\"s1\"><strong>Wound Class, representative procedures, and expected infection rates</strong></span></p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td2\" style=\"width: 219px; height: 46px;\" valign=\"middle\">\n<p class=\"p2\"><span class=\"s1\"><strong>WOUND CLASS</strong></span></p>\n</td>\n<td class=\"td3\" style=\"width: 288px; height: 46px;\" valign=\"middle\">\n<p class=\"p2\"><span class=\"s1\"><strong>EXAMPLES OF CASES</strong></span></p>\n</td>\n<td class=\"td4\" style=\"width: 811.781px; height: 46px;\" valign=\"top\">\n<p class=\"p2\"><span class=\"s1\"><strong>EXPECTED INFECTION RATES</strong></span></p>\n</td>\n</tr>\n<tr style=\"height: 78px;\">\n<td class=\"td5\" style=\"width: 219px; height: 78px;\" valign=\"top\">\n<p class=\"p2\"><span class=\"s1\">Clean (class I)</span></p>\n</td>\n<td class=\"td6\" style=\"width: 288px; height: 78px;\" valign=\"top\">\n<p class=\"p2\"><span class=\"s1\"><strong>Hernia Repair,</strong></span></p>\n<p class=\"p2\"><span class=\"s1\">Breast biopsy</span></p>\n</td>\n<td class=\"td7\" style=\"width: 811.781px; height: 78px;\" valign=\"middle\">\n<p class=\"p2\"><strong><span class=\"s1\">1&ndash;2%</span></strong></p>\n</td>\n</tr>\n<tr style=\"height: 64px;\">\n<td class=\"td8\" style=\"width: 219px; height: 64px;\" valign=\"top\">\n<p class=\"p2\"><span class=\"s1\">Clean / contaminated (class II)</span></p>\n</td>\n<td class=\"td9\" style=\"width: 288px; height: 64px;\" valign=\"top\">\n<p class=\"p2\"><span class=\"s1\"><strong>Cholecystectomy,</strong> elective GI surgery (not colon)</span></p>\n</td>\n<td class=\"td10\" style=\"width: 811.781px; height: 64px;\" valign=\"middle\">\n<p class=\"p2\"><strong><span class=\"s1\">2.1&ndash;9.5%</span></strong></p>\n</td>\n</tr>\n<tr style=\"height: 64px;\">\n<td class=\"td2\" style=\"width: 219px; height: 64px;\" valign=\"top\">\n<p class=\"p2\"><span class=\"s1\">Clean / contaminated (class II)</span></p>\n</td>\n<td class=\"td3\" style=\"width: 288px; height: 64px;\" valign=\"top\">\n<p class=\"p2\"><span class=\"s1\"><strong>Colorectal surgery</strong></span></p>\n</td>\n<td class=\"td4\" style=\"width: 811.781px; height: 64px;\" valign=\"middle\">\n<p class=\"p2\"><strong><span class=\"s1\">4&ndash;14%</span></strong></p>\n</td>\n</tr>\n<tr style=\"height: 64px;\">\n<td class=\"td11\" style=\"width: 219px; height: 64px;\" valign=\"top\">\n<p class=\"p2\"><span class=\"s1\">Contaminated (class III)</span></p>\n</td>\n<td class=\"td12\" style=\"width: 288px; height: 64px;\" valign=\"top\">\n<p class=\"p2\"><span class=\"s1\">Penetrating abdominal trauma, large tissue injury, enterotomy during bowel obstruction</span></p>\n</td>\n<td class=\"td13\" style=\"width: 811.781px; height: 64px;\" valign=\"middle\">\n<p class=\"p2\"><span class=\"s1\">3.4&ndash;13.2%</span></p>\n</td>\n</tr>\n<tr style=\"height: 49.8125px;\">\n<td class=\"td2\" style=\"width: 219px; height: 49.8125px;\" valign=\"top\">\n<p class=\"p2\"><span class=\"s1\">Dirty (class IV)</span></p>\n</td>\n<td class=\"td3\" style=\"width: 288px; height: 49.8125px;\" valign=\"top\">\n<p class=\"p2\"><span class=\"s1\">Perforated diverticulitis, necrotizing soft tissue infections</span></p>\n</td>\n<td class=\"td4\" style=\"width: 811.781px; height: 49.8125px;\" valign=\"middle\">\n<p class=\"p2\"><span class=\"s1\">3.1&ndash;12.8%</span></p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As per Sade classification, what is the grade assigned to atelectasis of the middle ear?",
    "choices": [
      {
        "id": 1,
        "text": "Grade 1"
      },
      {
        "id": 2,
        "text": "Grade 2"
      },
      {
        "id": 3,
        "text": "Grade 3"
      },
      {
        "id": 4,
        "text": "Grade 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The term atelectasis is used to define the <strong>tympanic membrane touching the promontory. </strong>This is classified as <strong>grade 3 by Sade classification.</strong></p>\n<ul>\n<li>Pars <strong>T</strong>ensa retraction is graded using <strong>S</strong>ade grading</li>\n<li>Pars flaccida retraction is graded using <strong>T</strong>os grading</li>\n</ul>\n<p><strong>Sade&rsquo;s classification of retraction of pars tensa:</strong></p>\n<ul>\n<li>Grade 1 &ndash; Mild retraction not touching the long process of the incus&nbsp;</li>\n<li>Grade 2 &ndash; Retracted drum touching the long process of the incus</li>\n<li>Grade 3 &ndash; Touching promontory but mobile on segalization&mdash;<strong>atelectasis of the middle ear</strong></li>\n<li>Grade 4 &ndash; Plastered to promontory (immobile)&mdash;<strong>adhesive middle ear</strong></li>\n</ul>\n<p><strong>Tos&rsquo; classification of retraction of pars flaccida:</strong></p>\n<ul>\n<li>Grade 1 &ndash; Mild attic retraction not touching the neck of the malleus.</li>\n<li>Grade 2 &ndash; Touching neck of the malleus</li>\n<li>Grade 3 &ndash; Limited outer attic wall erosion</li>\n<li>Grade 4 &ndash; Severe outer attic wall erosion</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "According to the European Hernia Society classification, the hernia seen in the below image is classified as ____.",
    "choices": [
      {
        "id": 1,
        "text": "M3"
      },
      {
        "id": 2,
        "text": "M4"
      },
      {
        "id": 3,
        "text": "M2"
      },
      {
        "id": 4,
        "text": "M5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above image shows an <strong>epigastric hernia. </strong>According to the European Hernia Society classification, an epigastric hernia&nbsp;is classified under <strong>M2.</strong></p>\n<p>According to the European Hernia Society classification of incisional hernias:</p>\n<p><strong>Midline</strong> incisional hernias are classified as follows:</p>\n<table style=\"height: 105.992px; width: 283px;\">\n<tbody>\n<tr style=\"height: 23.375px;\">\n<td style=\"width: 55px; height: 23.375px;\">M1</td>\n<td style=\"width: 98px; height: 23.375px;\">Subxiphoidal</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 55px; height: 22.3984px;\">M2</td>\n<td style=\"width: 98px; height: 22.3984px;\">Epigastric</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 55px; height: 22.3984px;\">M3</td>\n<td style=\"width: 98px; height: 22.3984px;\">Umbilical</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 55px; height: 22.3984px;\">M4</td>\n<td style=\"width: 98px; height: 22.3984px;\">Infraumbilical</td>\n</tr>\n<tr style=\"height: 15.4219px;\">\n<td style=\"width: 55px; height: 15.4219px;\">M5</td>\n<td style=\"width: 98px; height: 15.4219px;\">Suprapubic</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Lateral</strong> incisional hernias are classified as follows:</p>\n<table style=\"height: 196.594px; width: 216px;\">\n<tbody>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 57.4844px; height: 54.3984px;\">L1</td>\n<td style=\"width: 129.922px; height: 54.3984px;\">\n<p>Subcostal</p>\n</td>\n</tr>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 57.4844px; height: 54.3984px;\">L2</td>\n<td style=\"width: 129.922px; height: 54.3984px;\">\n<p>Flank</p>\n</td>\n</tr>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 57.4844px; height: 54.3984px;\"><strong>L3</strong></td>\n<td style=\"width: 129.922px; height: 54.3984px;\">\n<p><strong>Iliac</strong></p>\n</td>\n</tr>\n<tr style=\"height: 33.3984px;\">\n<td style=\"width: 57.4844px; height: 33.3984px;\">L4</td>\n<td style=\"width: 129.922px; height: 33.3984px;\">\n<p>Lumbar</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/61381fb766b24e44870cd28c11120891.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following category of ultrasound findings is not required to calculate TIRADS score?",
    "choices": [
      {
        "id": 1,
        "text": "Composition of the lesion"
      },
      {
        "id": 2,
        "text": "Echogenicity of the lesion"
      },
      {
        "id": 3,
        "text": "Surface of the lesion"
      },
      {
        "id": 4,
        "text": "Shape of the lesion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The<strong> surface of the lesion</strong> is <strong>not included under</strong> the categories to calculate the <strong>TIRADS</strong> score.</p>\n<p><strong>TI-RADS </strong>is a reporting system for <strong>thyroid nodules</strong> on ultrasound. This uses a standardized scoring system for reports providing users with recommendations for when to use <strong>fine needle aspiration&nbsp;</strong>or<strong> ultrasound</strong> <strong>follow-up</strong> of suspicious nodules, and when to safely leave alone nodules that are benign/not suspicious.</p>\n<p>Scoring is determined from <strong>five categories</strong> of ultrasound findings which include</p>\n<ul>\n<li><strong>Composition</strong></li>\n<li><strong>Echogenicity&nbsp;</strong></li>\n<li><strong>Shape</strong></li>\n<li><strong>Margin</strong></li>\n<li><strong>Echogenic foci<br /></strong></li>\n</ul>\n<table style=\"width: 698.8125px;\">\n<tbody>\n<tr style=\"height: 52px;\">\n<td style=\"width: 248.390625px; height: 52px;\">Scoring and Classification</td>\n<td style=\"width: 247.875px; height: 52px;\">\n<p><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Recommendations</p>\n</td>\n<td style=\"width: 160.21875px; height: 52px;\">Risk of malignancy</td>\n</tr>\n<tr style=\"height: 4.21875px;\">\n<td style=\"width: 248.390625px; height: 4.21875px;\">\n<ul>\n<li><strong>TR1</strong>: 0 points-benign</li>\n</ul>\n</td>\n<td style=\"width: 247.875px; height: 4.21875px;\">no FNA required</td>\n<td style=\"width: 160.21875px; height: 4.21875px;\">0.3%</td>\n</tr>\n<tr style=\"height: 33px;\">\n<td style=\"width: 248.390625px; height: 33px;\">\n<ul>\n<li><strong>TR2</strong>: 2 points-not suspicious</li>\n</ul>\n</td>\n<td style=\"width: 247.875px; height: 33px;\">no FNA required</td>\n<td style=\"width: 160.21875px; height: 33px;\">1.5%</td>\n</tr>\n<tr style=\"height: 43px;\">\n<td style=\"width: 248.390625px; height: 43px;\">\n<ul>\n<li><strong>TR3</strong>: 3 points-mildly suspicious</li>\n</ul>\n</td>\n<td style=\"width: 247.875px; height: 43px;\">&ge;1.5 cm follow-up, &ge;2.5 cm FNA follow-up: 1, 3, and 5 years</td>\n<td style=\"width: 160.21875px; height: 43px;\">4.8%</td>\n</tr>\n<tr style=\"height: 73px;\">\n<td style=\"width: 248.390625px; height: 73px;\">\n<ul>\n<li><strong>TR4</strong>: 4-6 points-moderately suspicious</li>\n</ul>\n</td>\n<td style=\"width: 247.875px; height: 73px;\">&ge;1.0 cm follow-up, &ge;1.5 cm FNA follow-up: 1, 2, 3, and 5 years</td>\n<td style=\"width: 160.21875px; height: 73px;\">\n<p>9.1%</p>\n</td>\n</tr>\n<tr style=\"height: 21px;\">\n<td style=\"width: 248.390625px; height: 21px;\">\n<ul>\n<li><strong>TR5</strong>: &ge;7 points-highly suspicious</li>\n</ul>\n<h4 id=\"nav_recommendations\" class=\"linked-header section-title\"></h4>\n</td>\n<td style=\"width: 247.875px; height: 21px;\">&ge;0.5 cm follow-up, &ge;1.0 cm FNA annual follow-up for up to</td>\n<td style=\"width: 160.21875px; height: 21px;\">35%</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n<h4 id=\"nav_recommendations\" class=\"linked-header section-title\"></h4>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following categories are included under the Modified Robson classification :",
    "choices": [
      {
        "id": 1,
        "text": "1,2,3,4"
      },
      {
        "id": 2,
        "text": "1,2,4"
      },
      {
        "id": 3,
        "text": "2,3,4,5"
      },
      {
        "id": 4,
        "text": "2,4,5"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Under the modified Robson system classification <strong>gestational age, fetal presentation, and onset of labor</strong> are included. The additional categories include <strong>parity and number of fetuses</strong>.</p>\n<p>It is the most widely accepted classification system available for analysing characteristics of delivering women worldwide.&nbsp;It consists of 10 patient population categories.&nbsp;The basis for these categories are based on the following&nbsp;Obstetric variables</p>\n<ul>\n<li>Parity\n<ul>\n<li>Nullipara</li>\n<li>Multipara</li>\n</ul>\n</li>\n<li>&nbsp;Previous CS&nbsp;\n<ul>\n<li>Yes (one or more)</li>\n<li>No</li>\n</ul>\n</li>\n<li>Onset of labor\n<ul>\n<li>Spontaneous</li>\n<li>Induced</li>\n<li>No labour (pre-labour CS)</li>\n</ul>\n</li>\n<li>Number of fetuses\n<ul>\n<li>Singleton</li>\n<li>Multiple</li>\n</ul>\n</li>\n<li>Gestational age&nbsp;\n<ul>\n<li>Preterm (less than 37 weeks)</li>\n<li>Term (37 weeks or more)</li>\n</ul>\n</li>\n<li>Fetal lie and presentation\n<ul>\n<li>Cephalic presentation</li>\n<li>Breech presentation</li>\n<li>Transverse lie</li>\n</ul>\n</li>\n</ul>\n<p>The <strong>modified Robson system</strong> classification is as follows:</p>\n<table style=\"height: 236px; width: 517px;\">\n<tbody>\n<tr style=\"height: 53px;\">\n<td style=\"width: 114.5px; height: 53px;\">Class 1</td>\n<td style=\"width: 385.5px; height: 53px;\">Nullipara, equal to or &gt;37 weeks, single, cephalic, spontaneous labor</td>\n</tr>\n<tr style=\"height: 54px;\">\n<td style=\"width: 114.5px; height: 54px;\">Class 2</td>\n<td style=\"width: 385.5px; height: 54px;\">Nullipara, equal to or &gt;37 weeks, single, cephalic, induced labor or CS before labor i. 2a: induced labor ii. 2b: CS before labor</td>\n</tr>\n<tr style=\"height: 56px;\">\n<td style=\"width: 114.5px; height: 56px;\">Class 3</td>\n<td style=\"width: 385.5px; height: 56px;\">Multipara, equal to or &gt;37 weeks, single, cephalic, spontaneous labor (excludes previous CS)</td>\n</tr>\n<tr style=\"height: 54px;\">\n<td style=\"width: 114.5px; height: 54px;\">Class 4</td>\n<td style=\"width: 385.5px; height: 54px;\">Multipara, equal to or &gt;37 weeks, single, cephalic, induced or CS before labor (excludes previous CS) i. 4a: induced labor ii. 4b: CS before labor</td>\n</tr>\n<tr style=\"height: 49px;\">\n<td style=\"width: 114.5px; height: 49px;\">Class 5</td>\n<td style=\"width: 385.5px; height: 49px;\">Multipara, previous CS, equal to or &gt;37 weeks, single, cephalic</td>\n</tr>\n<tr style=\"height: 49px;\">\n<td style=\"width: 114.5px; height: 49px;\">Class 6</td>\n<td style=\"width: 385.5px; height: 49px;\">Nullipara, single, breech</td>\n</tr>\n<tr style=\"height: 50px;\">\n<td style=\"width: 114.5px; height: 50px;\">Class 7</td>\n<td style=\"width: 385.5px; height: 50px;\">Multipara, single, breech (including previous CS)</td>\n</tr>\n<tr style=\"height: 48px;\">\n<td style=\"width: 114.5px; height: 48px;\">Class 8</td>\n<td style=\"width: 385.5px; height: 48px;\">Multiple pregnancies (with or without previous CS)</td>\n</tr>\n<tr style=\"height: 55.5469px;\">\n<td style=\"width: 114.5px; height: 55.5469px;\">Class 9</td>\n<td style=\"width: 385.5px; height: 55.5469px;\">Singleton pregnancy, oblique/transverse lie (with or without previous CS)</td>\n</tr>\n<tr style=\"height: 52px;\">\n<td style=\"width: 114.5px; height: 52px;\">Class 10</td>\n<td style=\"width: 385.5px; height: 52px;\">&nbsp;Single, cephalic &lt;37 weeks (including previous CS)</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Sequentially arrange the following fractures in ascending order of their severity as per the Gustilo-Anderson classification for open fractures.",
    "choices": [
      {
        "id": 1,
        "text": "4312"
      },
      {
        "id": 2,
        "text": "4321"
      },
      {
        "id": 3,
        "text": "4213"
      },
      {
        "id": 4,
        "text": "4123"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>As per\u00a0Gustilo and Anderson's classification, the respective grades are</p>\n<p>A 16 cm open wound with comminuted fractures but intact soft tissue coverage - <strong>IIIA</strong><br />A 14 cm open wound with comminuted fractures that require concomitant soft tissue reconstructive surgery - <strong>IIIB</strong><br />A 11 cm open wound with comminuted fracture and arterial injury requiring vascular repair - <strong>IIIC</strong><br />A 6 cm open wound with a moderately comminuted fracture and some muscle damage - <strong>II</strong></p>\n<p><strong>Gustilo and Anderson's classification</strong> is the most commonly followed classification for <strong>open fractures</strong>. An<strong> open fracture,</strong> with an<strong> arterial injury,\u00a0</strong>that requires repair\u00a0<strong>regardless of the size of the soft tissue wound,</strong> belongs to classification<strong> IIIC.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Masaoka staging system is used for which tumor?",
    "choices": [
      {
        "id": 1,
        "text": "Carotid body tumor"
      },
      {
        "id": 2,
        "text": "Mediastinal lymphoma"
      },
      {
        "id": 3,
        "text": "Thymoma"
      },
      {
        "id": 4,
        "text": "Pheochromocytoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Masaoka staging system is used for staging <strong>thymoma</strong>. It is based on the presence or absence of metastasis<strong>\u00a0</strong>and<strong>\u00a0</strong>gross or microscopic invasion of the capsule and surrounding structures.\u00a0</p>\n<p>Masaoka staging system for thymoma:</p>\n<table style=\"height: 379px;\" width=\"263\">\n<tbody>\n<tr>\n<td style=\"width: 70.0926px;\">\n<p><strong>Stage</strong></p>\n</td>\n<td style=\"width: 178.981px;\">\n<p><strong>Features</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 70.0926px;\">\n<p>Stage I</p>\n</td>\n<td style=\"width: 178.981px;\">\n<p>Encapsulated tumor with no gross or microscopic evidence of capsular invasion</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 70.0926px;\">\n<p>Stage II</p>\n</td>\n<td style=\"width: 178.981px;\">\n<p>Gross capsular invasion or invasion into the mediastinal fat or pleura or microscopic capsular invasion</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 70.0926px;\">\n<p>Stage III</p>\n</td>\n<td style=\"width: 178.981px;\">\n<p>Gross invasion into the pericardium, great vessels, or lung</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 70.0926px;\">\n<p>Stage IVA</p>\n</td>\n<td style=\"width: 178.981px;\">\n<p>Pleural or pericardial dissemination</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 70.0926px;\">\n<p>Stage IVB</p>\n</td>\n<td style=\"width: 178.981px;\">\n<p>Lymphogenous or hematogenous metastasis</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Management of Thymoma</strong>:</p>\n<p>Stage I - complete surgical excision only</p>\n<p><strong>Stage II &amp; III - complete surgical excision</strong>\u00a0followed by<strong>\u00a0radiotherapy</strong></p>\n<p>Stage IV &amp; metastatic disease - neoadjuvant chemotherapy + surgery + postoperative radiotherapy</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 10-day-old female neonate with hypoxic-ischemic encephalopathy (HIE) is hyper-alert with normal EEG. Examination shows hyperactive tendon reflexes, mydriatic pupil, and clonus.  What stage of HIE is she in?",
    "choices": [
      {
        "id": 1,
        "text": "Stage 1"
      },
      {
        "id": 2,
        "text": "Stage 2"
      },
      {
        "id": 3,
        "text": "Stage 3"
      },
      {
        "id": 4,
        "text": "Stage 4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>According to <strong>Sarnat staging</strong> of <strong>hypoxic-ischemic encephalopathy</strong> (HIE), a <strong>hyperalert</strong> neonate with <strong>mydriatic pupil</strong>, hyperactive tendon reflex, <strong>clonus</strong>, and <strong>normal EEG</strong> belongs to <strong>stage</strong> <strong>1</strong>.&nbsp;</p>\n<p>HIE is a brain injury that <strong>prevents adequate blood supply to the infant's brain</strong>.&nbsp;</p>\n<p>Sarnat staging of HIE:</p>\n<table style=\"width: 446px; height: 576px;\">\n<tbody>\n<tr>\n<td style=\"text-align: center; width: 117.906px;\"><strong>Signs</strong></td>\n<td style=\"text-align: center; width: 92.7344px;\"><strong>Stage 1</strong></td>\n<td style=\"text-align: center; width: 95.7188px;\"><strong>Stage 2</strong></td>\n<td style=\"text-align: center; width: 111.641px;\"><strong>&nbsp;Stage 3</strong></td>\n</tr>\n<tr>\n<td style=\"text-align: center; width: 117.906px;\"><strong>Level of consciousness</strong></td>\n<td style=\"text-align: center; width: 92.7344px;\"><strong>Hyperalert</strong></td>\n<td style=\"text-align: center; width: 95.7188px;\">Lethargic</td>\n<td style=\"text-align: center; width: 111.641px;\">Stuporous, comatose</td>\n</tr>\n<tr>\n<td style=\"text-align: center; width: 117.906px;\"><strong>Muscle tone</strong></td>\n<td style=\"text-align: center; width: 92.7344px;\">Normal</td>\n<td style=\"text-align: center; width: 95.7188px;\">Hypotonic</td>\n<td style=\"text-align: center; width: 111.641px;\">Flaccid</td>\n</tr>\n<tr>\n<td style=\"text-align: center; width: 117.906px;\"><strong>Posture</strong></td>\n<td style=\"text-align: center; width: 92.7344px;\">Normal</td>\n<td style=\"text-align: center; width: 95.7188px;\">Flexion</td>\n<td style=\"text-align: center; width: 111.641px;\">Decerebrate</td>\n</tr>\n<tr>\n<td style=\"text-align: center; width: 117.906px;\"><strong>Tendon reflex/clonus</strong></td>\n<td style=\"text-align: center; width: 92.7344px;\"><strong>Hyperactive</strong></td>\n<td style=\"text-align: center; width: 95.7188px;\">Hyperactive</td>\n<td style=\"text-align: center; width: 111.641px;\">Absent</td>\n</tr>\n<tr>\n<td style=\"text-align: center; width: 117.906px;\"><strong>Myoclonus</strong></td>\n<td style=\"text-align: center; width: 92.7344px;\">Present</td>\n<td style=\"text-align: center; width: 95.7188px;\">Present</td>\n<td style=\"text-align: center; width: 111.641px;\">Absent</td>\n</tr>\n<tr>\n<td style=\"text-align: center; width: 117.906px;\"><strong>Moro reflex</strong></td>\n<td style=\"text-align: center; width: 92.7344px;\">Strong</td>\n<td style=\"text-align: center; width: 95.7188px;\">Weak</td>\n<td style=\"text-align: center; width: 111.641px;\">Absent</td>\n</tr>\n<tr>\n<td style=\"text-align: center; width: 117.906px;\"><strong>Pupils</strong></td>\n<td style=\"text-align: center; width: 92.7344px;\"><strong>Mydriasis</strong></td>\n<td style=\"text-align: center; width: 95.7188px;\">Miosis</td>\n<td style=\"text-align: center; width: 111.641px;\">Unequal, poor light reflex</td>\n</tr>\n<tr>\n<td style=\"text-align: center; width: 117.906px;\"><strong>Seizures</strong></td>\n<td style=\"text-align: center; width: 92.7344px;\">None</td>\n<td style=\"text-align: center; width: 95.7188px;\">Common</td>\n<td style=\"text-align: center; width: 111.641px;\">Decerebration</td>\n</tr>\n<tr>\n<td style=\"text-align: center; width: 117.906px;\"><strong>EEG findings</strong></td>\n<td style=\"text-align: center; width: 92.7344px;\"><strong>Normal</strong></td>\n<td style=\"text-align: center; width: 95.7188px;\">Low voltage changing to seizure activity</td>\n<td style=\"text-align: center; width: 111.641px;\">\n<p>Burst suppression to isoelectric</p>\n</td>\n</tr>\n<tr>\n<td style=\"text-align: center; width: 117.906px;\"><strong>Duration</strong></td>\n<td style=\"text-align: center; width: 92.7344px;\">&lt;24 hours if progress it; otherwise, can remain normal</td>\n<td style=\"text-align: center; width: 95.7188px;\">24 hours to 14 days</td>\n<td style=\"text-align: center; width: 111.641px;\">Days to weeks</td>\n</tr>\n<tr>\n<td style=\"text-align: center; width: 117.906px;\"><strong>Outcome</strong></td>\n<td style=\"text-align: center; width: 92.7344px;\">Good</td>\n<td style=\"text-align: center; width: 95.7188px;\">Variable</td>\n<td style=\"text-align: center; width: 111.641px;\">Death, severe deficits</td>\n</tr>\n</tbody>\n</table>\n<p>Maternal<strong>&nbsp;</strong>causes for HIE are&nbsp;hypoventilation during anesthesia, cyanotic heart disease, respiratory failure, or carbon monoxide poisoning. Failure of oxygenation due to severe anemia, massive blood loss, and intracranial or adrenal hemorrhages are fetal causes of HIE.&nbsp;</p>\n<p>Hypoxia and ischemia cause <strong>anaerobic metabolism</strong> that generates a large amount of <strong>lactate and inorganic phosphates&nbsp;</strong>accumulation of toxic byproducts and overactivation of receptors. This leads to increased cellular permeability to sodium and calcium ions, resulting in cytotoxic edema and neuronal death.&nbsp;The most sensitive imaging modality for detecting hypoxic brain injury in neonates is an <strong>MRI</strong>.</p>\n<p><strong>Therapeutic hypothermia</strong> within the first 6 hours of life reduces mortality and major neurodevelopmental impairment. <strong>High-dose erythropoietin</strong> is used as an adjuvant to therapeutic hypothermia. Antiepileptic medications like phenobarbital and levetiracetam can be used to treat seizures.&nbsp;</p>\n<p>&nbsp;<strong>Poor prognostic factors</strong> in HIE are:</p>\n<ul>\n<li>Initial blood ph less than 6.7</li>\n<li>Low (0-3) 10&nbsp; in Apgar score</li>\n<li>Delayed onset of spontaneous breathing</li>\n<li>Seizure onset in less than 12 hours</li>\n<li>Burst suppression pattern in EEG</li>\n<li>Basal ganglia or thalamic lesion</li>\n<li>Oliguria or anurias for more than 24 hours</li>\n<li>Decerebrate posture</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following cases of leprosy is categorised as paucibacillary?",
    "choices": [
      {
        "id": 1,
        "text": "A patient with a single nerve thickening"
      },
      {
        "id": 2,
        "text": "A patient with 6 hypo-pigmented anaesthetic skin lesions"
      },
      {
        "id": 3,
        "text": "A patient with positive slit skin smear at one site"
      },
      {
        "id": 4,
        "text": "A patient with multiple positive slit skin smears"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>A patient with leprosy with <strong>single</strong> nerve thickening is considered <strong>paucibacillary</strong> <strong>leprosy</strong><strong>&nbsp;</strong>according to <strong>WHO</strong> classification.</p>\n<p><strong>WHO</strong>&nbsp;classification:</p>\n<table style=\"width: 531.441px;\">\n<tbody>\n<tr>\n<td style=\"width: 157px;\">&nbsp;</td>\n<td style=\"width: 181px;\"><strong>Paucibacillary Leprosy</strong></td>\n<td style=\"width: 175.441px;\"><strong>Multibacillary Leprosy</strong></td>\n</tr>\n<tr>\n<td style=\"width: 157px;\">\n<p><strong>Number of skin lesions&nbsp;</strong></p>\n</td>\n<td style=\"width: 181px;\">\n<p>up to 5&nbsp;</p>\n</td>\n<td style=\"width: 175.441px;\">\n<p><strong>6 or more</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 157px;\">\n<p><strong>Nerve involvement&nbsp;</strong></p>\n</td>\n<td style=\"width: 181px;\">\n<p><strong>0-1&nbsp;</strong></p>\n</td>\n<td style=\"width: 175.441px;\">\n<p>2 or more&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 157px;\"><strong>Slit skin smear&nbsp;</strong></td>\n<td style=\"width: 181px;\">Negative on all sites</td>\n<td style=\"width: 175.441px;\">\n<p><strong>Positive at any site</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 157px;\"><strong>Ridley-Jopling&nbsp;</strong></td>\n<td style=\"width: 181px;\">TT, BT</td>\n<td style=\"width: 175.441px;\">\n<p>BB, LL, BL&nbsp;</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;<strong>Ridley Jopling</strong>&nbsp;classification:</p>\n<ul>\n<li>Tuberculoid (TT)</li>\n<li>Borderline tubercular (BT)</li>\n<li>Borderline (BB)</li>\n<li>Borderline lepromatous (BL)</li>\n<li>Lepromatous (LL)</li>\n</ul>\n<p><strong>Madrid</strong>&nbsp;classification:</p>\n<ul>\n<li>Lepromatous (LL)</li>\n<li>Tuberculoid (TT)</li>\n<li>Borderline/dimorphous</li>\n<li>Indeterminate (early unstable type)</li>\n</ul>\n<p><strong>Indian</strong>&nbsp;classification<strong>:&nbsp;</strong>&nbsp;Includes categories under Madrid classification +&nbsp;<strong>pure neuritic type</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "According to the Erlanger and Gasser classification, which type of nerve fiber carries proprioceptive signals?",
    "choices": [
      {
        "id": 1,
        "text": "A\u03b1"
      },
      {
        "id": 2,
        "text": "A\u03b2"
      },
      {
        "id": 3,
        "text": "A\u03b3"
      },
      {
        "id": 4,
        "text": "A\u03b4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>According to the Erlanger and Gasser classification, proprioception is carried by <strong>A\u03b1 fiber.</strong></p>\n<p><strong>Erlanger and Gasser</strong> classified nerve fibers into types A, B, and C, with type A fibers further subdivided into \u03b1, \u03b2, \u03b3, and \u03b4 fibers.</p>\n<ul>\n<li>Type A fibers are the typical large- and medium-\u00adsized myelinated fibers of spinal nerves.</li>\n<li>Type B fibers are smaller fibers with minimal myelination. They transmit impulses of the ANS, including the bladder. (B for <strong>B</strong>ladder)</li>\n<li>Type C fibers are small unmyelinated nerve fibers that conduct impulses at low velocities.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 55-year-old obese male patient was diagnosed with varicose veins a few months back. He now comes to the outpatient clinic with the finding shown in the image. What is the stage of the clinical classification according to the CEAP guidelines?",
    "choices": [
      {
        "id": 1,
        "text": "C3"
      },
      {
        "id": 2,
        "text": "C4a"
      },
      {
        "id": 3,
        "text": "C4b"
      },
      {
        "id": 4,
        "text": "C5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image in a patient with a known case of varicose veins is\u00a0<strong>atrophie blanche. </strong>It\u00a0is classified as<strong> C4b\u00a0</strong>under CEAP guidelines.</p>\n<p><strong>Atrophie blanche </strong>is a localized <strong>white atrophic skin </strong>frequently <strong>surrounded by dilated capillaries and pigmentation</strong>, usually seen around the ankle. This is a sign of severe chronic venous disease.</p>\n<p>Clinical-Etiology-Anatomy-Pathophysiology (<strong>CEAP</strong>) classification system is used to classify <strong>chronic lower extremity venous disease.</strong></p>\n<p>The clinical class of C4 under CEAP includes changes in skin and subcutaneous tissue secondary to chronic venous disease. It is further classified as follows:</p>\n<ul>\n<li><strong>C4a</strong>-Pigmentation or eczema</li>\n<li><strong>C4b</strong>-Lipodermatosclerosis or atrophie blanche</li>\n<li><strong>C4c</strong>-Corona phlebectatica</li>\n</ul>\n<p><strong>Corona phlebectatica</strong> is the presence of <strong>abnormally visible cutaneous</strong> blood vessels.\u00a0<strong>Lipodermatosclerosis</strong> is a chronic inflammation and fibrosis of the skin and subcutaneous tissues, that appears as a \u2018<strong>woody\u2019 leg</strong> on examination.</p>\n<p>Image A shows tortuous dilated veins (C2), Image B is atrophie blanche (C4b), and\u00a0Image C shows fan-shaped telangiectasia (C4c).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d588f1af0e134f6aad93bee04ed28f59.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cef521a31bad4b1da4f19831d8fc50b8x464x1513.PNG"
    ]
  }
];
        let quizName = 'Classifications Mini Test - -Tmt';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2023-24"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>