<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ent Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Test Series Subject / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A young male patient undergoes a submucosal resection. One week later, he presents with bilateral nasal obstruction and pressure sensation over the nasal bridge. On examination, smooth, rounded swelling of the septum is seen bilaterally. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Septal abscess"
      },
      {
        "id": 2,
        "text": "Septal hematoma"
      },
      {
        "id": 3,
        "text": "Septal perforation"
      },
      {
        "id": 4,
        "text": "Septal deviation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The likely diagnosis is a <strong>septal hematoma</strong>.\u00a0</p>\n<p>Septal hematoma occurs when there is an <strong>accumulation of blood</strong> beneath the periosteum or perichondrium of the nasal septum. The most common cause of hematoma is <strong>nasal surgery</strong> or <strong>trauma</strong>. However, it is also seen in individuals with bleeding disorders.\u00a0</p>\n<p>Patients present with <strong>bilateral nasal obstruction</strong>, frontal headache, and <strong>pressure sensation</strong> over the bridge.\u00a0</p>\n<p>Examination, as seen in this patient, will show <strong>bilateral smooth rounded swellings</strong> of the nasal septum. If palpated, the mass will be soft and fluctuant.</p>\n<p>The following image shows the bilateral, smooth, rounded swellings of the nasal septum indicative of septal hematoma.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e12139bc038e40ac9300f9f30e204366x1185x1198.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b8f303bce2294575a56eeaa3c8506569x1280x960.JPEG"
    ]
  },
  {
    "text": "A 49-year-old female from Nagaland presented with right-sided hearing loss. On examination, a dull right  tympanic membrane is noted. Enlarged lymph nodes are seen in the posterior triangle of the neck. Which of the following is the management of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Gromet Insertion and Steroids"
      },
      {
        "id": 2,
        "text": "Radiotherapy"
      },
      {
        "id": 3,
        "text": "Wait and Watch"
      },
      {
        "id": 4,
        "text": "Radical Neck Dissection"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario of a patient presenting with <strong>right-sided hearing loss,</strong> dull tympanic membrane (middle ear effusion leading to a <strong>conductive hearing loss)</strong> and enlarged lymph nodes in the posterior triangle of the neck <strong>(cervical lymphadenopathy)</strong>\u00a0is indicative of <strong>nasopharyngeal carcinoma. Radiotherapy</strong> is the treatment of choice.</p>\n<p>Nasopharyngeal carcinoma is extremely radiosensitive, hence treatment of local and regional disease is invariably radiotherapy.\u00a0</p>\n<ul>\n<li><strong>Stage I and II</strong> are treated by<strong> radiotherapy alone</strong> while</li>\n<li><strong>Stage III and IV </strong>require <strong>concomitant radiation and chemotherapy</strong> or radiation followed by chemotherapy.</li>\n</ul>\n<p>Nasopharyngeal carcinoma is a malignant tumor of the nasopharynx. The theories for etiology include genetics, infection with <strong>Epstein-Barr virus,</strong> air pollution, and smoking.</p>\n<p>It has three types -</p>\n<ol>\n<li>Keratinizing carcinoma</li>\n<li>Nonkeratinizing differentiated carcinoma</li>\n<li>Nonkeratinizing undifferentiated carcinoma.\u00a0</li>\n</ol>\n<p>The most common presenting symptom is <strong>cervical lymphadenopathy,</strong> occurring in <strong>60-90% of cases.</strong>\u00a0The most common site of origin of nasopharyngeal carcinoma is the <strong>fossa of Rosenmuller. </strong>From here, it can spread extensively in any direction locally. It also can spread lymphatically to the cervical, retropharyngeal, or parapharyngeal lymph nodes.\u00a0</p>\n<p>Symptoms include:</p>\n<ul>\n<li>Nasal- Nasal obstruction, denasal speech, nasal discharge, epistaxis.</li>\n<li>Otologic- <strong>unilateral conductive hearing loss</strong>, and serous or suppurative otitis media.\u00a0</li>\n<li>Facial pain and reduced corneal reflex- cranial nerve\u00a0<strong>V. </strong>(<strong>most common</strong> cranial nerve to be involved)</li>\n<li>Squint and diplopia- involvement of cranial nerve VI.\u00a0</li>\n<li>Exophthalmos and blindness- cranial nerve II.</li>\n<li>Horner's syndrome</li>\n<li><strong>Cervical lymphadenopathy</strong> is the most common presenting symptom.</li>\n</ul>\n<p><strong>Nasopharyngeal carcinoma can present with Trotter's triad, which includes:</strong></p>\n<ul>\n<li><strong>Conductive deafness</strong> (eustachian tube blockage),</li>\n<li><strong>Ipsilateral temporoparietal neuralgia </strong>due to involvement of CN V and</li>\n<li><strong>Palatal paralysis</strong> due to involvement of CN X</li>\n</ul>\n<p>Enlarged lateral retropharyngeal nodes compress the cranial nerve IX, X, and XI causing<strong> jugular foramen syndrome.\u00a0</strong>High-resolution contrast-enhanced CT <strong>(HR-CECT)</strong> of nose and nasopharynx is the<strong>\u00a0investigation of choice.</strong></p>\n<p>Other Options:\u00a0</p>\n<p>Option A: <strong>Grommet insertion + steroids </strong>would only treat the <strong>middle ear effusion symptomatically</strong> without addressing the underlying <strong>nasopharyngeal malignancy.</strong></p>\n<p>Option C: <strong>\"Wait and watch</strong>\" would be inappropriate for a <strong>suspected malignancy,</strong> as delayed treatment could lead to disease progression.</p>\n<p>Option D: <strong>Radical neck dissection</strong> alone would be incorrect as it doesn't address the <strong>primary tumor in the nasopharynx</strong>, and <strong>NPC is primarily treated with radiotherapy</strong> rather than surgery due to its <strong>anatomical location and radiosensitivity</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 34-year-old man presented to you with complaints of pain over the nose after falling from height. On examination, there is a fracture of the nasal septum. Which of the following instruments would you use during the surgery for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The instrument used in the above scenario is the <strong>Asch forceps </strong>(image 2)<strong>. </strong>It is mainly used to <strong>reduce a nasal septum fracture.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e98b8b49fa2a4a40beee4b6f27bd0a38.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dd7945010cf14a8e9fb0c3c5cfa8d5e8x600x312.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1c1bb8efdb554f7fa522a0961dc8855ex1280x1274.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a05a27ef5d20400fbf8543bc97137344x599x472.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a93d5a10b62941b0818de544ed0c35b3x600x495.JPEG"
    ]
  },
  {
    "text": "A 34-year-old woman presents with hoarseness and a low-pitched voice. She is a singer and a known smoker. Her laryngoscopy findings are given below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Reinke's edema"
      },
      {
        "id": 2,
        "text": "Laryngeal papilloma"
      },
      {
        "id": 3,
        "text": "Vocal polyp"
      },
      {
        "id": 4,
        "text": "Vocal nodules"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The laryngoscopy findings show <strong>diffuse bilateral edema</strong> of the vocal folds suggestive of <strong>Reinke's edema.</strong></p>\n<p>It occurs due to edema of the subepithelial space (<strong>Reinke\u2019s space</strong>) of the vocal cords\u00a0in the<strong> glottis</strong>.</p>\n<p><strong>Key clinical features</strong></p>\n<ul>\n<li>History of <strong>smoking</strong> and/or voice abuse.</li>\n<li><strong>Hoarseness</strong> is the most common symptom.</li>\n<li>Patients use false cords for voice production and this gives them a <strong>low-pitched</strong> and rough voice.</li>\n</ul>\n<p>On indirect laryngoscopy, both vocal cords show diffuse symmetrical swellings. They appear as fusiform swellings with a pale translucent look. Ventricular bands may appear hyperemic and hypertrophic and may hide the view of the true cords.</p>\n<p><strong>Treatment</strong></p>\n<ul>\n<li>Voice rest and cessation of smoking</li>\n<li>Decortication of the vocal cords, i.e. removal of a strip of epithelium</li>\n<li>Speech therapy for proper voice production.</li>\n</ul>\n<p>Other options</p>\n<p>Option B: <strong>Laryngeal papilloma/ squamous papilloma</strong> are <strong>benign tumors</strong> of the larynx caused by the human papillomavirus (<strong>HPV type 6 and 11</strong>). In children, its called <strong>juvenile papillomatosis</strong>. Patients present with hoarseness, dyspnea or stridor.</p>\n<p>Laryngoscopy shows pinkish to white \u201c<strong>grape-like</strong>\u201d projections that can be sessile or pedunculate with a visible central vascular core.\u00a0</p>\n<p>The image below shows laryngeal papilloma.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e48becf7fc774405b09972bcb43c6392.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/33a0ca51918c422a8ac174c58204c36cx512x422.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2c7edadc331644ceb6249ab5cc7fd429x507x258.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3581adddfd984e86b17bc92a97d0b573x512x380.PNG"
    ]
  },
  {
    "text": "Which of the following is not included in the hypopharynx?",
    "choices": [
      {
        "id": 1,
        "text": "Piriform fossa"
      },
      {
        "id": 2,
        "text": "Post cricoid region"
      },
      {
        "id": 3,
        "text": "Vallecula"
      },
      {
        "id": 4,
        "text": "Posterior pharyngeal wall"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Vallecula</strong> is present in the<strong> oropharynx</strong> and not laryngopharynx.</p>\n<p>The <strong>hypopharynx</strong> or the <strong>laryngopharynx</strong> extends from the superior border of the epiglottis to the inferior border of the cricoid cartilage. It is separated from the oropharynx by the lateral glossoepiglottic folds.</p>\n<p>The anterior wall is made by the parts of the laryngeal inlet, <strong>posterior surfaces of the arytenoid</strong> and <strong>cricoid cartilages</strong>.</p>\n<p><strong>Pyriform fossae</strong> are present between the <strong>aryepiglottic folds</strong> medially and <strong>thyroid cartilage</strong>, thyrohyoid membrane laterally.</p>\n<ul>\n<li>They serve as channels that direct the solid and liquid food from the oral cavity into the esophagus.</li>\n<li>Branches of internal laryngeal nerve lie beneath the mucous membrane of the piriform fossa. Hence this site can be used for infiltrating the local anaesthetics.</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b6d63c43acd041049863be196ce48ea9x1280x1417.JPEG"
    ]
  },
  {
    "text": "What type of tympanogram is expected in this scenario?",
    "choices": [
      {
        "id": 1,
        "text": "A type"
      },
      {
        "id": 2,
        "text": "Ad type"
      },
      {
        "id": 3,
        "text": "As type"
      },
      {
        "id": 4,
        "text": "B type"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Image shows <strong>fluid in the middle ear, i.e., serous otitis media.</strong></p>\n<p>In such condition, <strong>compliance,</strong> i.e., ease of mobility of tympanic membrane <strong>decreases</strong> and hence resulting in a<strong> B curve</strong>.&nbsp;</p>\n<p><strong>Fluid collection</strong> is usually <strong>secondary </strong>to <strong>negative </strong>middle ear pressure<strong> (Eustachian tube obstruction).</strong></p>\n<p>Tympanometry is an <strong>objective test of the middle ear and Eustachian tube functions</strong> (conductive compartment of hearing). Here, the compliance of the TM, i.e., how much it moves to the pressure differentials applied from the external ear is measured.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b60564423c574967ab718a3560f0732a.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A second-year resident performs the tuning fork tests on a patient with hearing loss. The Rinne test is positive in both ears and Weber is lateralized towards the right. What is the interpretation?",
    "choices": [
      {
        "id": 1,
        "text": "Right-sided conductive deafness"
      },
      {
        "id": 2,
        "text": "Left-sided conductive deafness"
      },
      {
        "id": 3,
        "text": "Right-sided sensorineural deafness"
      },
      {
        "id": 4,
        "text": "Left-sided sensorineural deafness"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The patient has&nbsp;<strong>left-sided sensorineural deafness.</strong></p>\n<p><strong>Rinne's test</strong> is positive on both ears implying that there is<strong> no conductive hearing loss. </strong>But there could still be sensorineural hearing loss in either or both ears.</p>\n<p><strong>Weber's</strong> test <strong>lateralized</strong> towards the <strong>right</strong>&nbsp;indicates either <strong>right-sided conductive</strong> hearing loss&nbsp;or <strong>left-sided sensorineural </strong>hearing loss.&nbsp;Since there is no conductive deafness which was inferred from Rinnes's test, the interpretation here is left-sided sensorineural hearing loss.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f148467327fc44af9dfc5ba0e5ed9f20x1280x1605.JPEG"
    ]
  },
  {
    "text": "A middle-aged man presents with unilateral nasal obstruction. To check for patency of the nasal valve, a Cottle test is performed. In which of the following cases is the test positive?",
    "choices": [
      {
        "id": 1,
        "text": "Deviated nasal septum"
      },
      {
        "id": 2,
        "text": "Epistaxis"
      },
      {
        "id": 3,
        "text": "Atrophic rhinitis"
      },
      {
        "id": 4,
        "text": "Nasal polyp"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Cottle test </strong>is positive in patients with a&nbsp;<strong>deviated nasal septum. </strong>It is used to assess the<strong> patency</strong> of the nasal valve and when positive, it indicates the abnormality in the <strong>vestibular component</strong> of the nasal valve.</p>\n<p>In this test, the cheek is drawn laterally while the patient breathes quietly.&nbsp;If the nasal airway improves and the obstruction is relieved on the test side, the test is <strong>positive</strong> and indicates&nbsp;the surgery will be useful and the patient can be taken up for surgery.</p>\n<p>The&nbsp;<strong>nasal valve area</strong>&nbsp;is the&nbsp;<strong>narrowest portion</strong>&nbsp;of the nasal passage. It is bounded <strong>medially</strong> by the <strong>nasal septum</strong>, <strong>superiorly</strong> and <strong>laterally</strong> by the caudal margin of the <strong>upper lateral cartilage</strong>, <strong>inferiorly</strong> by the <strong>floor</strong> of the <strong>piriform aperture</strong> and&nbsp;the nasal valve<strong>&nbsp;</strong>is the specific slit-like segment between the caudal margin of the upper lateral cartilage and the septum.</p>\n<p>Conditions with a positive Cottle test:</p>\n<ul>\n<li><strong>Deviated nasal septum</strong></li>\n<li><strong>Collapsed nasal valve</strong> - causes snoring and sleep apnoea</li>\n<li>Valve stenosis</li>\n</ul>\n<p>The below image depicts Cottle's test</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1635378e424041c58b6a63dd8565d9efx600x606.JPEG"
    ]
  },
  {
    "text": "A male patient presents with a sore throat and difficulty swallowing for 2 days. On oropharyngeal examination, a grey-white membrane is observed over the tonsils. All of the following are differential diagnoses for membrane over the tonsils except",
    "choices": [
      {
        "id": 1,
        "text": "Streptococcal tonsillitis"
      },
      {
        "id": 2,
        "text": "Diphtheria"
      },
      {
        "id": 3,
        "text": "Ludwig\u2019s angina"
      },
      {
        "id": 4,
        "text": "Infectious mononucleosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>All the above-mentioned options are the differential diagnosis for <strong>membrane over the tonsils </strong>except Ludwig&rsquo;s angina.&nbsp;Ludwig&rsquo;s angina is the infection of the submandibular space.</p>\n<p>The differential diagnosis for grey membrane over the tonsils includes the following</p>\n<ul>\n<li>Streptococcus &amp; other <strong>pyogenic organisms</strong></li>\n<li><strong>Diphtheria</strong></li>\n<li>Infectious mononucleosis</li>\n<li>Vincent&rsquo;s angina</li>\n<li>Leukemia</li>\n<li><strong>Candida</strong></li>\n<li>Agranulocytosis</li>\n<li>Malignancy</li>\n<li>Aphthous ulcer</li>\n<li>Traumatic ulcer</li>\n</ul>\n<p>&nbsp;The image given below shows acute tonsillitis presenting with a membrane over the tonsil.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/97c6052cbe9e41fbb0d61be5c7f6e28ax1280x803.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6547702439144d15ba7e700253a8f4d9x720x1019.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d1d2794555404ed4be05cb5fa255ba07x720x486.JPEG"
    ]
  },
  {
    "text": "Match the following signs and the diseases in which they occur.",
    "choices": [
      {
        "id": 1,
        "text": "1-d, 2-c, 3-b, 4-a"
      },
      {
        "id": 2,
        "text": "1-b, 2-c, 3-d, 4-a"
      },
      {
        "id": 3,
        "text": "1-c, 2-b, 3-d, 4-a"
      },
      {
        "id": 4,
        "text": "1-b, 2-c, 3-a, 4-d"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correctly matched pair is <strong>1-b, 2-c, 3-d, 4-a.</strong></p>\n<p>1 - Hennebert's sign in congenital syphilis</p>\n<p><strong>Hennebert's sign </strong>is a <strong>positive fistula sign</strong> (nystagmus occurring on applying positive and negative pressure in the external auditory canal) in the absence of a fistula seen in <strong>congenital syphilis</strong> due to the formation of adhesions between stapes footplate and saccule. It is also seen in a few cases of <strong>Meniere's disease.</strong></p>\n<p>This&nbsp;is not to be confused with <strong>Hennebert's phenomenon </strong>which is disequilibrium following nose blowing or lifting a heavy object. It is seen in the&nbsp;<strong>perilymph fistula.</strong></p>\n<p>2 -&nbsp;Schwartz sign in otosclerosis</p>\n<p>A <strong>pink or reddish hue</strong> seen on the <strong>promontory</strong> through the tympanic membrane is called the&nbsp;<strong>Schwartz sign</strong>. It is seen in <strong>active otosclerosis.</strong></p>\n<p>The image below shows the&nbsp;<strong>Schwartz sign.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/115ceea6c22b46e88334b435e997b15fx720x407.JPEG"
    ]
  },
  {
    "text": "A female patient presents with nasal obstruction, nasal discharge, and loss of smell. On examination of the nose, she has roomy nasal cavities, foul-smelling discharge, and dry greenish crusts. She is also found to have merciful anosmia. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Atrophic rhinitis"
      },
      {
        "id": 2,
        "text": "Nasal polyps"
      },
      {
        "id": 3,
        "text": "Allergic rhinitis"
      },
      {
        "id": 4,
        "text": "Foreign body"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical vignette of<strong> merciful anosmia</strong>, <strong>foul-smelling discharge,</strong> and<strong> roomy nasal cavities</strong>, with<strong> dry greenish crusts</strong>, points to a diagnosis of <strong>atrophic rhinitis</strong>.</p>\n<p>Atrophic rhinitis is a <strong>chronic inflammation</strong> of the nose characterized by <strong>atrophy</strong> of <strong>nasal mucosa</strong> and <strong>turbinate bones. </strong>The exact etiology of this condition is not known. It is more common in <strong>females</strong> and starts around <strong>puberty</strong>.&nbsp;</p>\n<p>Clinically patients present with <strong>nasal obstruction, foul odor,</strong> and<strong> merciful anosmia. </strong>Merciful anosmia is when the patient has <strong>marked anosmia</strong> and is unable to smell the <strong>foul odor</strong>&nbsp;coming from their nose.</p>\n<p>On examination of the nose,<strong> greenish</strong> or<strong> greyish crusting</strong> of the nasal passage, pale nasal mucosa, atrophied nasal turbinates, and epistaxis following the removal of the crusts. The <strong>roomy nasal cavity</strong> is seen due to the resorption of bones of the turbinates.</p>\n<p>Treatment:</p>\n<ul>\n<li><strong>Nasal irrigation -&nbsp;</strong>using&nbsp;<strong>warm saline</strong>&nbsp;or an&nbsp;<strong>alkaline&nbsp;solution</strong>&nbsp;composed of sodium bicarbonate 1 part, sodium biborate 1 part, and sodium chloride 2 parts in 280 mL of water</li>\n<li>Local antibiotics -&nbsp;<strong>Kemicetine antiozaena</strong>&nbsp;solution&nbsp;containing&nbsp;<strong>chloromycetin, oestradiol, and vitamin D2.&nbsp;</strong></li>\n<li>25% glucose in glycerine,&nbsp;estradiol spray, systemic use of streptomycin, potassium iodide, and placental extract.</li>\n<li>Surgical&nbsp;management:\n<ul>\n<li><strong>Young's operation.</strong></li>\n<li><strong>Modified young operation</strong>.</li>\n<li>Narrowing of the nasal cavity can be done by submucosal injection of <strong>Teflon paste</strong>, or by insertion of fat, cartilage, or Teflon strips under the mucoperiosteum.</li>\n</ul>\n</li>\n</ul>\n<p>Other options:</p>\n<p>Option B: <strong>Nasal polyps</strong> are non-neoplastic masses of the edematous nasal or sinus mucosa. Nasal polyps can be antrochoanal polyps or ethmoidal polyps. They present with a polypoid mass in the nose.</p>\n<p>Option C: <strong>Allergic rhinitis</strong> is associated with inferior turbinate hypertrophy and can cause chronic nasal obstruction. It is characterized by watery nasal discharge, sneezing, and itching in the nose.</p>\n<p>Option D: <strong>Foreign body nose</strong> is commonly seen in children. The child presents with unilateral, foul-smelling nasal discharge.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "CNS infections can spread to inner ear through",
    "choices": [
      {
        "id": 1,
        "text": "Endolymphatic sac"
      },
      {
        "id": 2,
        "text": "Cochlear aqueduct"
      },
      {
        "id": 3,
        "text": "Scala media"
      },
      {
        "id": 4,
        "text": "Vestibular aqueduct"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Scala tympani is connected with the subarachnoid space through the aqueduct of cochlea</strong>. Infection spreads from inner ear to CNS or vice versa through this route.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 65-year-old patient presents with right-sided nasal obstruction and occasional blood-stained nasal discharge. His CT and endoscopy findings are shown in the below image. What could be the underlying cause?",
    "choices": [
      {
        "id": 1,
        "text": "Inverted papilloma"
      },
      {
        "id": 2,
        "text": "Carcinoma maxilla"
      },
      {
        "id": 3,
        "text": "Esthesioneuroblastoma"
      },
      {
        "id": 4,
        "text": "Nasopharyngeal angiofibroma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>On the basis of the given images,<strong> inverted papilloma</strong> could be the most likely underlying cause.</p>\n<p><span class=\"word\"><strong>Inverted papilloma</strong> (Ringertz tumor or transitional cell papilloma or&nbsp;Schneiderian papilloma) is</span> <span class=\"word\">a</span><strong>&nbsp;benign</strong> neoplasm&nbsp;<span class=\"word\">of</span> <span class=\"word\">the</span> <span class=\"word\">non-olfactory</span> <span class=\"word\">mucosa</span> <span class=\"word\">of the&nbsp;</span><span class=\"word\">nose</span> <span class=\"word\">(also called the <strong>Schneiderian</strong></span> <span class=\"word\"><strong>membrane</strong>)</span> <span class=\"word\">and</span> <span class=\"word\">paranasal</span> <span class=\"word\">sinuses.</span></p>\n<div class=\"parent-word\" data-transform-scale-x=\"1.1854041257827435\" data-canvas-width=\"332.0503333333334\"><span class=\"word\">The</span><strong><span class=\"word\"> lateral</span> <span class=\"word\">wall</span></strong> <span class=\"word\">of</span>&nbsp;the&nbsp;<span class=\"word\">nose</span> <span class=\"word\">in</span> <span class=\"word\">the&nbsp;</span><span class=\"word\">middle</span> <span class=\"word\">meatus is t</span>he most&nbsp;<span class=\"word\">common</span> <span class=\"word\">site</span> <span class=\"word\">of</span> <span class=\"word\">origin</span><span class=\"word\">. T</span><span class=\"word\">he</span> <span class=\"word\">hyperplastic</span> <span class=\"word\">papillomatous</span> <span class=\"word\">tissue&nbsp;</span><span class=\"word\">grows</span> <span class=\"word\">into</span> <span class=\"word\">the</span> <span class=\"word\">stroma</span><span class=\"word\">.</span></div>\n<div class=\"parent-word\" data-transform-scale-x=\"1.1854041257827435\" data-canvas-width=\"332.0503333333334\"><span class=\"word\">It is common in the 4<sup>th</sup> to 7<sup>th</sup> decades of life with a male preponderance. It</span> <span class=\"word\">is</span> <span class=\"word\">almost&nbsp;</span><span class=\"word\">always</span><strong> <span class=\"word\">unilateral</span></strong> <span class=\"word\">and</span> <span class=\"word\">presents</span> <span class=\"word\">with unilateral</span> <span class=\"word\">nasal</span> <span class=\"word\">obstruction,&nbsp;</span><span class=\"word\">nasal</span> <span class=\"word\">discharge,&nbsp;</span><span class=\"word\">and</span> <span class=\"word\">epistaxis.&nbsp;</span><span class=\"word\">It</span> <span class=\"word\">can</span> <span class=\"word\">invade</span> <span class=\"word\">sinuses</span> <span class=\"word\">or the orbit, the latter of which</span>&nbsp;<span class=\"word\">causes</span> <span class=\"word\">proptosis,</span> <span class=\"word\">diplopia,&nbsp;</span><span class=\"word\">and&nbsp;</span><span class=\"word\">lacrimation.</span></div>\n<div class=\"parent-word\" data-transform-scale-x=\"1.1854041257827435\" data-canvas-width=\"332.0503333333334\">&nbsp;</div>\n<div class=\"parent-word\" data-transform-scale-x=\"1.1854041257827435\" data-canvas-width=\"332.0503333333334\"><span class=\"word\">On</span> <span class=\"word\">examination</span> <span class=\"word\">of</span> <span class=\"word\">nose</span> <span class=\"word\">or</span> <span class=\"word\"><strong>endoscopy</strong>,</span> <span class=\"word\">it</span> <span class=\"word\">presents</span> <span class=\"word\">as</span> <span class=\"word\">a&nbsp;</span><strong><span class=\"word\">polypoidal</span> <span class=\"word\">mass</span></strong> <span class=\"word\">resembling</span> <span class=\"word\">simple</span> <span class=\"word\">nasal</span> <span class=\"word\">polyps</span><span class=\"word\">, as depicted by arrows in the endoscopic image above. A</span>&nbsp;<strong>computed tomography(CT)</strong><span class=\"word\">&nbsp;scan and/or</span>&nbsp;magnetic resonance imaging(MRI) show&nbsp;<span class=\"word\">the</span> <strong><span class=\"word\">location</span> <span class=\"word\">and</span> <span class=\"word\">extent</span></strong> <span class=\"word\">of</span> <span class=\"word\">the</span> <span class=\"word\">le</span><span class=\"word\">sion.</span> <span class=\"word\">MRI</span> <span class=\"word\">provides additional</span> <span class=\"word\">help&nbsp;</span><span class=\"word\">to</span> <span class=\"word\">differentiate</span> <span class=\"word\">associated</span> <span class=\"word\">secretions&nbsp;</span><span class=\"word\">in</span>&nbsp;the&nbsp;<span class=\"word\">sinus</span> <span class=\"word\">from</span> <span class=\"word\">the</span> <span class=\"word\">actual</span> <span class=\"word\">tumor</span> <span class=\"word\">mass.</span>&nbsp;A <strong>biopsy</strong>&nbsp;<span class=\"word\">is</span> <span class=\"word\">essential&nbsp;</span><span class=\"word\">for</span> <span class=\"word\">diagnosis.</span></div>\n<div class=\"parent-word\" data-transform-scale-x=\"1.1854041257827435\" data-canvas-width=\"332.0503333333334\">&nbsp;</div>\n<div class=\"parent-word\" data-transform-scale-x=\"1.1854041257827435\" data-canvas-width=\"332.0503333333334\"><strong><span class=\"word\">Medial</span> <span class=\"word\">maxillectomy</span></strong> <span class=\"word\">is</span> <span class=\"word\">the</span> <span class=\"word\">treatment&nbsp;</span><span class=\"word\">of</span> <span class=\"word\">choice, done preferably via endoscopy.<strong>&nbsp;</strong></span><span class=\"word\"><strong>Recurrence</strong> is common and malignancy has been observed in up to 15% of the cases.</span></div>\n<div class=\"parent-word\" data-transform-scale-x=\"1.1854041257827435\" data-canvas-width=\"332.0503333333334\">&nbsp;</div>\n<div class=\"parent-word\" data-transform-scale-x=\"1.1854041257827435\" data-canvas-width=\"332.0503333333334\"><strong><span class=\"word\">Other options:</span></strong></div>\n<div class=\"parent-word\" data-transform-scale-x=\"1.302474000495019\" data-canvas-width=\"322.31100000000015\"><strong>&nbsp;</strong></div>\n<div class=\"parent-word\" data-transform-scale-x=\"1.302474000495019\" data-canvas-width=\"322.31100000000015\"><span class=\"word\">Option B: <strong>Carcinoma maxilla</strong>&nbsp;arises from the lining of the maxillary sinus and its early features include additional symptoms like facial paraesthesias, pain, or epiphora and depending on the direction of spread of the growth, would cause additional symptoms.</span></div>\n<div class=\"parent-word\" data-transform-scale-x=\"1.302474000495019\" data-canvas-width=\"322.31100000000015\">&nbsp;</div>\n<div class=\"parent-word\" data-transform-scale-x=\"1.302474000495019\" data-canvas-width=\"322.31100000000015\"><span class=\"word\">Option C: <strong>Esthesioneuroblastoma </strong>(olfactory neuroblastoma)<strong>&nbsp;</strong>arises from the olfactory epithelium in the upper third of the nose. It has bimodal peaks of incidence at 10&ndash;20 years and 50&ndash;60 years. Unilateral nasal obstruction and epistaxis are the most common symptoms. The tumour also invades the orbit and the surrounding structures, which results in other symptoms like proptosis, headache, epiphora, diplopia, and blurred vision.<br /></span></div>\n<div class=\"parent-word\" data-transform-scale-x=\"1.302474000495019\" data-canvas-width=\"322.31100000000015\">&nbsp;</div>\n<div class=\"parent-word\" data-transform-scale-x=\"1.302474000495019\" data-canvas-width=\"322.31100000000015\"><span class=\"word\"><span class=\"word\">Option D: <strong>Juvenile nasopharyngeal angiofibroma</strong>&nbsp;is seen almost exclusively in males in the age group of 10&ndash;20 years and is very rarely seen in older people and females.&nbsp;</span></span>Profuse, recurrent, and spontaneous epistaxis is the most common presentation.</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/59bdd5f61b62456295e9955ded775c05.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Where is the electrode placed in cochlear implant procedures?",
    "choices": [
      {
        "id": 1,
        "text": "Round window"
      },
      {
        "id": 2,
        "text": "Oval window"
      },
      {
        "id": 3,
        "text": "Scala vestibuli"
      },
      {
        "id": 4,
        "text": "Scala tympani"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The electrode of a cochlear implant is placed in the <strong>scala tympani.</strong></p>\n<p><strong>A cochlear implant&nbsp;</strong>is a medical device that uses electricity to stimulate the spiral ganglion cells of the auditory nerve to restore sensorineural hearing loss. It converts sound to an electrical signal (transduction) and delivers this to the hearing nerve, which bypasses the damaged hearing apparatus. It cannot be used in patients with cochlear aplasia or without the VIII<sup>th&nbsp;</sup>cranial&nbsp;nerve.</p>\n<p><strong>Cochlear implant:</strong></p>\n<ul>\n<li>An electronic device for&nbsp;<strong>severe to profound SNHL&nbsp;</strong>and&nbsp;who cannot benefit from a hearing aid.</li>\n<li>Principle- surgery to place the electrode array within the&nbsp;<strong>scala tympani</strong>&nbsp;of the cochlea.</li>\n<li>Indication-&nbsp;<strong>bilateral severe to profound deafness</strong></li>\n<li>Prerequisites-<strong>&nbsp;intact 8<sup>th</sup>&nbsp;nerve</strong>&nbsp;and higher auditory pathway</li>\n<li>Surgical approach- facial recess (<strong>posterior tympanotomy</strong>) approach</li>\n<li>The electrode of a cochlear implant is placed in the&nbsp;<strong>scala tympani.</strong>&nbsp;(Note: In the auditory brainstem implant, the&nbsp;site of the implant is the lateral recess of the 4<sup>th</sup>&nbsp;ventricle.)</li>\n</ul>\n<p><strong>The receiver-stimulator</strong>&nbsp;implanted during surgery (under the skin) and the&nbsp;<strong>electrode array&nbsp;</strong>(implanted in the scala tympani of the cochlea) are part of the&nbsp;<strong>internal</strong>&nbsp;component of the cochlear implant. Microphone, speech processor, and transmitter are part of the external component of the cochlear implant, which remains outside the body.</p>\n<p>Cochlear implants replace the non-functional transducer system of hair cells of the cochlea and convert the sound signal to electrical impulses, which directly stimulate the fibers of cranial nerve VIII.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/51bb14a7b2b64e1b98d13107998e2b93x1280x1808.JPEG"
    ]
  },
  {
    "text": "Which of the following is true about laryngeal cancer stage T1b N0 M0?",
    "choices": [
      {
        "id": 1,
        "text": "Both vocal cords involved and fixed"
      },
      {
        "id": 2,
        "text": "Both vocal cords involved and mobile"
      },
      {
        "id": 3,
        "text": "One vocal cord involved and fixed"
      },
      {
        "id": 4,
        "text": "One vocal cord involved and mobile"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In stage <strong>T1b N0 M0 laryngeal cancer</strong>, <strong>both</strong> the <strong>vocal cords</strong> are involved and are <strong>mobile</strong>.&nbsp;</p>\n<p>TNM classification of glottic carcinoma :</p>\n<table style=\"height: 191px; width: 504.56982421875px;\">\n<tbody>\n<tr>\n<td style=\"width: 48px; text-align: center;\"><strong>Stage</strong></td>\n<td style=\"width: 443.57px; text-align: center;\"><strong>Description</strong></td>\n</tr>\n<tr>\n<td style=\"width: 48px;\">T1</td>\n<td style=\"width: 443.56982421875px;\">Tumour limited to vocal cord(s) with <strong>normal mobility</strong></td>\n</tr>\n<tr>\n<td style=\"width: 48px;\">T1a</td>\n<td style=\"width: 443.56982421875px;\"><strong>Tumour limited to one vocal cord</strong></td>\n</tr>\n<tr>\n<td style=\"width: 48px;\">T1b</td>\n<td style=\"width: 443.56982421875px;\"><strong>Tumour involves both vocal cords</strong></td>\n</tr>\n<tr>\n<td style=\"width: 48px;\">T2a</td>\n<td style=\"width: 443.56982421875px;\">Tumour extends to supraglottis and/or subglottis, with normal vocal cord mobility</td>\n</tr>\n<tr>\n<td style=\"width: 48px;\">T2b</td>\n<td style=\"width: 443.56982421875px;\"><strong>Tumour extends to supraglottis and/or subglottis, with impaired vocal cord mobility</strong></td>\n</tr>\n<tr>\n<td style=\"width: 48px;\">T3</td>\n<td style=\"width: 443.56982421875px;\">Tumour limited to the larynx with vocal cord fixation and/or invades paraglottic space and/or&nbsp; minor thyroid cartilage erosion</td>\n</tr>\n<tr>\n<td style=\"width: 48px;\">T4a</td>\n<td style=\"width: 443.56982421875px;\">Tumour invades thyroid cartilage and/or invades tissue beyond the larynx</td>\n</tr>\n<tr>\n<td style=\"width: 48px;\">T4b</td>\n<td style=\"width: 443.56982421875px;\">Tumour invades prevertebral space, encases carotid artery or invades mediastinal structures</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false about the treatment of Bell\u2019s palsy?",
    "choices": [
      {
        "id": 1,
        "text": "Eye care"
      },
      {
        "id": 2,
        "text": "Physiotherapy/ massage of facial muscles"
      },
      {
        "id": 3,
        "text": "Steroids are contraindicated"
      },
      {
        "id": 4,
        "text": "Antivirals like acyclovir are used"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>Steroids</strong> - <strong>Prednisolone is the drug of choice</strong>. If patient reports within 1 week, the adult dose of prednisolone is 1 mg/kg/day divided into morning and evening doses for 5 days.</li>\n<li>Steroids can be combined with acyclovir for Herpes zoster oticus or if viral etiology is suspected in Bell&rsquo;s palsy.</li>\n<li><strong>Care of the eye</strong> &ndash; most important. Eye must be <strong>protected against exposure keratitis</strong>.</li>\n<li><strong>Physiotherapy</strong> with electro-stimulation and massage of the facial muscles gives psychological support to the patient.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with bilateral abductor paralysis is admitted to the intensive care unit. In order to relieve the respiratory obstruction, a tracheostomy is being performed. Which of the following is not an immediate complication of this procedure?",
    "choices": [
      {
        "id": 1,
        "text": "Aspiration of blood"
      },
      {
        "id": 2,
        "text": "Pneumothorax"
      },
      {
        "id": 3,
        "text": "Apnoea"
      },
      {
        "id": 4,
        "text": "Tracheal stenosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Tracheal stenosis</strong>, due to tracheal ulceration and infection, is a<strong> late complication</strong> of tracheostomy and does not occur immediately.</p>\n<div class=\"page\" title=\"Page 374\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>A tracheostomy is a procedure where an opening is made in the anterior wall of the trachea and it is converted into a stoma on the skin surface. It is primarily indicated when there is respiratory <strong>obstruction</strong>, <strong>secretions, </strong>or respiratory<strong> insufficiency.&nbsp;</strong>It is also indicated<strong>&nbsp;</strong>in an <strong>intubated patient</strong> after&nbsp;<strong>2-3 weeks</strong>&nbsp;to avoid&nbsp;<strong>subglottic stenosis.</strong></p>\n</div>\n</div>\n</div>\n<p><strong>Complications of tracheostomy:</strong></p>\n<table style=\"height: 271px; width: 558.359375px;\">\n<tbody>\n<tr>\n<td style=\"width: 177px; text-align: center;\">\n<p><strong>Immediate </strong></p>\n<p>(at the time of operation)</p>\n</td>\n<td style=\"width: 110px; text-align: center;\">\n<p><strong>Intermediate </strong></p>\n<p>(during first few hours or days)</p>\n</td>\n<td style=\"width: 210.359375px; text-align: center;\">\n<p><strong>Late </strong></p>\n<p>(after chronic use for weeks or months)</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 177px;\">\n<ol>\n<li>Primary hemorrhage</li>\n<li>Apnoea due to sudden washout of CO2</li>\n<li>Pneumothorax due to injury to apical pleura</li>\n<li>Injury to recurrent laryngeal nerves</li>\n<li>Aspiration of blood</li>\n<li>Injury to esopgahus</li>\n</ol>\n</td>\n<td style=\"width: 110px;\">\n<ol>\n<li>Reactionary or secondary hemorrhage.</li>\n<li>Displacement of the tube.</li>\n<li>Blocking of the tube.</li>\n<li>Subcutaneous emphysema.</li>\n<li>Tracheitis and tracheobronchitis.</li>\n<li>Atelectasis and lung abscess.</li>\n<li>Local wound infection and granulations.</li>\n</ol>\n</td>\n<td style=\"width: 210.359375px;\">\n<ol>\n<li>Laryngeal stenosis.</li>\n<li>Tracheal stenosis</li>\n<li>Tracheo-oesophageal fistula</li>\n<li>Problems of decannulation.</li>\n<li>Persistent tracheocutaneous fistula.</li>\n<li>Keloid or unsightly scar.</li>\n<li>Aspiration of tracheostomy tube fragments into the tracheobronchial tree</li>\n</ol>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/53ce80cec98c4e1db894222948d61c68x720x569.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8ac6b785f2084d1f9e475bbc1023cc39x1279x1077.JPEG"
    ]
  },
  {
    "text": "What is the instrument shown below?",
    "choices": [
      {
        "id": 1,
        "text": "Meniett device"
      },
      {
        "id": 2,
        "text": "Barany noise box"
      },
      {
        "id": 3,
        "text": "Portable audiometer"
      },
      {
        "id": 4,
        "text": "Higginson syringe"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The instrument shown is&nbsp;<strong>Barany&rsquo;s noise box, </strong>which<strong> masks</strong>&nbsp;the non-test ear while testing bone conduction.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Meniett device</strong> is a small, portable pulse generator that can control <strong>vertigo</strong> in patients with M&eacute;ni&egrave;re's disease.</p>\n<p>Option C: A <strong>portable audiometer</strong> is a device used to screen hearing loss in settings such as small clinics and homes. An image of a portable audiometer is shown below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d3736c4f080644fc9799feb145e30d67.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/04cb5224ae0b42f0a6c9986e007b9c4ex1280x650.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b900284c28d94183ab76289b212d6572x1280x1442.JPEG"
    ]
  },
  {
    "text": "A 52-year-old woman presents to the ENT surgeon with a history of vertigo whenever she moves sideways on the bed while lying supine. She feels nauseous and as if the room is spinning. The symptoms subside after a few minutes but return when she moves her head. Which of the following tests is most appropriate to diagnose this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Dix-Hallpike\u2019s manoeuvre"
      },
      {
        "id": 2,
        "text": "Glycerol test"
      },
      {
        "id": 3,
        "text": "Caloric test"
      },
      {
        "id": 4,
        "text": "Epley\u2019s manoeuvre"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is suggestive of <strong>benign paroxysmal positional vertigo</strong> (BPPV). The <strong>diagnostic</strong> maneuver used in BPPV is the <strong>Dix-Hallpike maneuver</strong>, the <strong>gold standard</strong> for diagnosing BPPV. The <strong>therapeutic</strong> maneuver is<strong> Epley's maneuver</strong>.</p>\n<p>BPPV is one of the common causes of <strong>recurrent vertigo</strong>, and the episodes are brief (&lt;1min) and are always <strong>provoked</strong> by <strong>changes</strong> in <strong>head position.</strong> The attacks are caused by free-floating calcium carbonate crystals usually dislodged from the posterior canal.</p>\n<p>A patient presenting with vertigo should be evaluated for ruling out the central lesions (like a tumor in the fourth ventricle, multiple sclerosis, etc) before confirming the diagnosis of BPPV. <strong>Dix-Hallpike maneuver</strong> helps <strong>rule out central lesions</strong> and also <strong>diagnose BPPV.</strong></p>\n<p><strong>Dix-Hallpike maneuver</strong>:</p>\n<ol>\n<li>The maneuver starts with the patient in a sitting position.</li>\n<li>Their head is turned 45 degrees towards the ear to be tested.</li>\n<li>The examiner quickly brings the patient to a supine position with their head 30 degrees below the horizontal.</li>\n<li>The 45-degree head rotation is maintained during the procedure.</li>\n<li>Now the examiner observes the patient for nystagmus.</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ff2597eeabe84b6a8a78d2048a416872x1280x2095.JPEG"
    ]
  },
  {
    "text": "A young adult presents with intermittent non-foul smelling mucoid discharge from the left ear for the past few years. Otologic examination revealed a central perforation of the tympanic membrane. Which of the following statements is false regarding his condition?",
    "choices": [
      {
        "id": 1,
        "text": "No evidence of bone destruction in CT scans"
      },
      {
        "id": 2,
        "text": "Mixed aerobic and anaerobic infections are seen"
      },
      {
        "id": 3,
        "text": "Aural polyp if present, should never be avulsed"
      },
      {
        "id": 4,
        "text": "Often associated with cholesteatoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The clinical scenario of&nbsp;intermittent mucoid discharge and central perforation of the tympanic membrane points to a diagnosis of <strong>tubotympanic type of</strong>&nbsp;<strong>CSOM,</strong> which&nbsp;is not associated&nbsp;with cholesteatoma. <strong>Atticoantral</strong> type&nbsp;is associated with <strong>cholesteatoma</strong> and it leads to dangerous complications due to its bone-eroding properties.&nbsp;</p>\n<p>Etiology of tubotympanic (benign or safe) type&nbsp;of CSOM:</p>\n<ul>\n<li>As a sequela of acute otitis media</li>\n<li>Ascending infection via the eustachian tube</li>\n<li>Allergic conditions</li>\n</ul>\n<p>Bone destruction is not present in this type.</p>\n<p>Culture reveals mixed aerobic and anaerobic infection.</p>\n<p>Aural polyp if present should be removed and not avulsed before starting local treatment. This is due to the fact that the polyp may be arising from the stapes, facial nerve, or horizontal canal and its avulsion can lead to facial paralysis or labyrinthitis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35 year old male presented to the clinic with complaints of  episodic vertigo,  sense of ear pressure and fullness, decreased hearing, and a low-tone roaring tinnitus. What is the possible clinical diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Meniere's disease"
      },
      {
        "id": 2,
        "text": "Benign paroxysmal positional vertigo (BPPV)"
      },
      {
        "id": 3,
        "text": "Labyrinthitis"
      },
      {
        "id": 4,
        "text": "Syncope"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The possible clinical diagnosis for a 35-year-old male presenting with episodic vertigo, ear pressure and fullness, decreased hearing, and low-tone roaring tinnitus is <strong>Meniere's disease.</strong> It is also called&nbsp;<strong>endolymphatic hydrops</strong>.</p>\n<p>The primary pathology in M&eacute;ni&egrave;re&rsquo;s disease is the&nbsp;<strong>distension of the endolymphatic system</strong> due to an increased endolymph volume. This can result either from increased production of&nbsp;endolymph or its faulty absorption or both. Normally, endolymph secreted by <strong>stria</strong> <strong>vascularis</strong>, fills the membranous&nbsp;labyrinth, and is absorbed through the endolymphatic sac.</p>\n<p>Meniere's disease is a chronic condition of the inner ear that affects balance and hearing. It is characterized by recurrent episodes of vertigo, which are brief and intense episodes of spinning dizziness. Patients may also experience a sense of pressure or fullness in the affected ear, along with fluctuating hearing loss and tinnitus (ringing or buzzing in the ear). The tinnitus associated with Meniere's disease is typically low-tone roaring in nature.</p>\n<p><strong>Other options:</strong></p>\n<ul>\n<li><strong>Benign paroxysmal positional vertigo</strong> (BPPV) is another common cause of vertigo, but it is characterized by brief episodes of vertigo triggered by specific head movements, such as rolling over in bed or looking up. BPPV does not typically cause ear pressure, hearing loss, or low-tone roaring tinnitus.</li>\n<li><strong>Labyrinthitis</strong> is an inflammation of the inner ear, usually caused by a viral or bacterial infection. It can cause vertigo, hearing loss, and tinnitus, but it is usually accompanied by other symptoms such as ear pain, fever, and a general feeling of illness.</li>\n<li><strong>Syncope</strong> refers to a temporary loss of consciousness and muscle tone, often caused by a decrease in blood flow to the brain. It is not associated with the symptoms described in the scenario, such as vertigo, ear pressure, hearing loss, or tinnitus.</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35- year old woman presented to the clinic with the symptoms of hearing loss and pulsatile tinnitus. Further examination reveals conductive hearing loss with Rinne test negative. A reddish mass is seen behind the tympanic membrane. What is the most likely diagnosis for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Acute otitis media"
      },
      {
        "id": 2,
        "text": "Chronic otitis media"
      },
      {
        "id": 3,
        "text": "Glomus tumor"
      },
      {
        "id": 4,
        "text": "Serous otitis media"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This clinical scenario is suggestive of a <strong>glomus tumor</strong>.</p>\n<p>Glomus tumor is the <strong>most common</strong> benign middle ear neoplasm. It is seen frequently in middle-aged females. The tumor consists of <strong>paraganglionic</strong> cells from the <strong>neural crest</strong>. Glomus tumor is an&nbsp;<strong>extremely vascular&nbsp;</strong>benign tumor.</p>\n<p>There are two types of glomus tumors: <strong>glomus jugulare</strong> and <strong>glomus tympanicum</strong>. Glomus jugulare arises from the dome of the jugular bulb and invades the hypotympanum. Glomus tympanicum arises from the promontory of the middle ear.</p>\n<p>Clinical features include conductive <strong>hearing loss</strong> and <strong>pulsatile tinnitus</strong>- earliest symptoms. Otoscopy examination shows a <strong>red reflex</strong> through an intact tympanic membrane as a&nbsp;<strong>\"rising sun\"</strong>&nbsp;appearance since the tumor arises from the floor of the middle ear.&nbsp;Paralysis of the 9th to 12th cranial nerves can also occur. An <strong>audible bruit</strong> over the mastoid is heard on auscultation in all the stages of the tumor.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Acute otitis media</strong> presents with <strong>throbbing earache</strong> and a red and <strong>bulging tympanic membrane</strong> with loss of landmarks on examination. Tuning fork tests reveal a <strong>conductive</strong> type of hearing loss.</p>\n<p>Option B: <strong>Chronic otitis media</strong> presents with mucoid or mucopurulent <strong>ear discharge</strong>, the conductive type of hearing loss, and <strong>central perforation</strong> of the tympanic membrane. <strong>Middle ear mucosa</strong> can be seen through the perforation.&nbsp;&nbsp;</p>\n<p>Option D: Serous otitis media&nbsp;presents with&nbsp;<strong>hearing loss, delayed and defective speech,</strong>&nbsp;and mild earaches associated with&nbsp;upper respiratory tract infections. Otoscopy reveals a&nbsp;<strong>dull</strong>,&nbsp;<strong>opaque, and retracted tympanic membrane</strong>&nbsp;with loss of light reflex, a thin leash of vessels along the handle of the malleus, fluid levels, and&nbsp;<strong>air bubbles</strong>&nbsp;behind the tympanic membrane.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is this view called in which maxillary sinus is seen best?",
    "choices": [
      {
        "id": 1,
        "text": "Water's view"
      },
      {
        "id": 2,
        "text": "Towne's view"
      },
      {
        "id": 3,
        "text": "Law's view"
      },
      {
        "id": 4,
        "text": "Stenver's view"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Occipitomental view with an open mouth is also called the&nbsp;<strong>water&rsquo;s view.</strong></p>\n<p><strong>Water's view:&nbsp;</strong>The patient&rsquo;s head is positioned such that the nose and the chin touch the film while the X-rays are projected from backward. The mouth is usually kept open while taking the X-ray.</p>\n<p>Structures seen in water&rsquo;s view are:</p>\n<ul>\n<li><strong>Maxillary sinuses (seen best)</strong></li>\n<li>Frontal sinuses</li>\n<li>Sphenoid sinus (if the film is taken with open<span class=\"Apple-converted-space\">&nbsp;</span>mouth)</li>\n<li>Zygoma</li>\n<li>Zygomatic arch</li>\n<li>Nasal bone</li>\n<li>Frontal process of maxilla</li>\n<li>Superior orbital fissure</li>\n<li>Infratemporal fossa</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3e9339aa5be34633b5c6892669e80536.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A middle-aged patient presents with multiple nodules in the nasal mucosa. Biopsy from the nodules revealed the presence of Miculikz cells and Russell bodies. Which of the following is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Rhinoscleroma"
      },
      {
        "id": 2,
        "text": "Rhinosporidiosis"
      },
      {
        "id": 3,
        "text": "Lupus vulgaris"
      },
      {
        "id": 4,
        "text": "Granulomatosis with polyangitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario and the biopsy findings showing <strong>Mikulicz cells</strong> and <strong>Russell bodies</strong> are characteristic of <strong>rhinoscleroma.</strong></p>\n<p><strong>Rhinoscleroma </strong>is a <strong>chronic granulomatous disease</strong> caused by&nbsp;<strong><em>Klebsiella rhinoscleromatis</em>&nbsp;</strong>(Frisch bacillus).</p>\n<p><strong>Mikulicz cells</strong> are large foam cells with a central nucleus and vacuolated cytoplasm containing causative bacilli.&nbsp;<strong>Russell bodies</strong> are homogenous eosinophilic<strong> inclusion bodies</strong> found in the plasma cells due to the <strong>accumulation of immunoglobulins</strong>&nbsp;secreted by plasma cells. Histology also shows infiltration of submucosa with plasma cells, lymphocytes and eosinophils.&nbsp;</p>\n<p>The following image shows rhinoscleroma with Mikulicz cells and Russell bodies(marked in black arrows)</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/72287c52b31e4cc4a115d6bbee519d5fx720x480.JPEG"
    ]
  },
  {
    "text": "During syringing, water jet is directed along ______",
    "choices": [
      {
        "id": 1,
        "text": "Anterosuperior wall"
      },
      {
        "id": 2,
        "text": "Posterosuperior wall"
      },
      {
        "id": 3,
        "text": "Anteroinferior wall"
      },
      {
        "id": 4,
        "text": "Posteroinferior wall"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Syringing</strong>: Pinna is pulled upwards and backwards and a stream of water from the ear syringe is directed along the <strong>posterosuperior wall of the meatus</strong>.</p>\n<p>This is derived from 2 anatomic facts:</p>\n<ul>\n<li>The posteroinferior wall of EAC is supplied by the <strong>vagus nerve.</strong> Direct stimulation of this can lead to sudden cardiac arrest.</li>\n<li>On manoeuvring the pinna to bring the EAC into a straight configuration, the posterior wall is straighter and easily accessible than the anterior wall.</li>\n</ul>\n<p>Therefore, the direction of choice for the jet of water is along the posterosuperior wall.\u00a0</p>\n<p><strong>Complications</strong></p>\n<ul>\n<li><strong>Vertigo</strong> \u2013 caloric stimulation of lateral semicircular canal if water is too hot or too cold.</li>\n<li><strong>Rupture of TM.</strong></li>\n<li>Reactivation of quiescent otitis media (if there is pre-existing perforation).</li>\n</ul>\n<p><strong>Contraindications for syringing</strong></p>\n<ul>\n<li>Presence of ear infection, <strong>TM perforation</strong></li>\n<li>Presence of <strong>grommet</strong> or H/O ear surgery</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An elderly diabetic female patient presented with a black, foul-smelling discharge from the nose. On examination, a blackish necrotic mass is seen filling the nasal cavity and eroding the septum and hard palate. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Aspergillosis"
      },
      {
        "id": 2,
        "text": "Mucormycosis"
      },
      {
        "id": 3,
        "text": "Foreign body"
      },
      {
        "id": 4,
        "text": "Rhinosporidiosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of <strong>Mucormycosis.</strong></p>\n<p>Diabetic patients with local tissue destruction with blackish nasal discharge typically resembles the presentation of <strong>invasive mucormycosis</strong>. The <strong>blackish discolouration</strong> is due to <strong>direct fungal invasion</strong> causing <strong>arterial and venous thrombosis</strong> leading to <strong>gangrene. </strong>Mucormycosis is an <strong>opportunistic infection </strong>caused principally by species of Rhizopus, Mucor, and Lichtheimia. The most prevalent species is<em> Rhizopus Oryza.</em>&nbsp;</p>\n<p>Risk factors:</p>\n<ul>\n<li>Diabetes (Diabetic ketoacidosis).</li>\n<li>Immunocompromised individuals</li>\n</ul>\n<p>Treatment:</p>\n<ul>\n<li><strong>Intravenous </strong>administration of <strong>amphotericin B </strong>is the <strong>treatment of choice </strong>for <strong>invasive mucormycosis.</strong></li>\n<li>Surgical debridement</li>\n<li>Control of underlying predisposing causes.</li>\n</ul>\n<p>Other options:</p>\n<p>Option A: Invasive aspergillosis leads to the formation of black or greyish membrane in the nasal mucosa. The maxillary sinus may contain a fungus ball containing semisolid cheesy-white or blackish material.</p>\n<p>Option C: Foreign body nose presents with foul-smelling unilateral discharge.</p>\n<p>Option D: Rhinosporidiosis is a granulomatous condition caused by Rhinosporidium seeberi and presents with nasal discharge, epistaxis, and nasal obstruction by a polypoidal mass.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 12-year-old boy who was treated for acute otitis media 2 weeks back presents with fever,  and pain behind his right ear. On examination, tenderness is present over the mastoid and the pinna is pushed anteriorly suggesting acute mastoiditis. A fluctuant swelling is present between the tip of the mastoid and the angle of the jaw. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Zygomatic abscess"
      },
      {
        "id": 2,
        "text": "Bezold's abscess"
      },
      {
        "id": 3,
        "text": "Luc abscess"
      },
      {
        "id": 4,
        "text": "Citelli\u2019s abscess"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above clinical scenario along is most likely suggestive of the diagnosis of <strong>Bezold's abscess.</strong></p>\n<p>Bezold abscess\u00a0is defined as a <strong>complication</strong> of <strong>acute coalescent mastoiditis</strong> and is formed when\u00a0pus breaks inferiorly, through the thin medial aspect of the tip of the mastoid and collects in the <strong>upper part </strong>of the<strong> neck</strong>, most commonly into the sheath of the<strong> sternocleidomastoid muscle</strong>. The abscess can also take any of the following locations:\u00a0</p>\n<ul>\n<li>Deep to the sternocleidomastoid</li>\n<li>Along the posterior belly of the digastric presenting as a swelling in the tip of the mastoid or the angle of the jaw</li>\n<li>The upper part of the posterior triangle</li>\n<li>Parapharyngeal space</li>\n<li>Along with the carotid vessels.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/290c91bd050d49ab971c6ecc19babe1dx1280x1597.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dc93d1bf4b8844039a4a07c4a6ee50ffx1280x2559.JPEG"
    ]
  },
  {
    "text": "Superior semicircular canal dehiscence syndrome is associated with all except:",
    "choices": [
      {
        "id": 1,
        "text": "Gaze dependent nystagmus"
      },
      {
        "id": 2,
        "text": "Positive Fistula test"
      },
      {
        "id": 3,
        "text": "Sensorineural hearing loss"
      },
      {
        "id": 4,
        "text": "Positive Tulio phenomenon"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Sensorineural hearing loss&nbsp;</strong>is not seen in&nbsp;superior semicircular canal dehiscence syndrome (SSCDS)</p>\n<p><strong>Superior semicircular canal dehiscence syndrome</strong></p>\n<ul>\n<li>Occurs due to the third window effect that gets created because of the <strong>thin/ dehiscent wall</strong> of the superior semicircular canal.</li>\n<li>Endolymph in the labyrinthine system move in relation to sound or pressure, causing an activation of the vestibular system.</li>\n<li>Diagnosed in middle-aged individuals.</li>\n<li><strong>Noise or pressure-induced dizziness ,</strong><strong>chronic imbalance,&nbsp;</strong>avoidance of noisy environments.</li>\n<li><strong>Gaze-evoked tinnitus and/or hyperacusis.&nbsp;</strong></li>\n<li><strong>Tulio phenomenon</strong>(sound or pressure-induced vestibular activation).</li>\n<li><strong>Fistula test is positive(Hennebert Sign)</strong></li>\n<li><strong>Noncontrast HRCT of the temporal bone</strong> can demonstrate the defect</li>\n<li>Treated by surgery if there are severe disabling symptoms else conservative medical management.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old pregnant woman complains of progressive hearing loss, which aggravated during pregnancy. Pure tone audiometry reveals a Carhart's notch and she is diagnosed with otosclerosis. Identify the procedure done for this patient's condition.",
    "choices": [
      {
        "id": 1,
        "text": "Stapedotomy"
      },
      {
        "id": 2,
        "text": "Stapes mobilisation"
      },
      {
        "id": 3,
        "text": "Lempert\u2019s fenestration operation"
      },
      {
        "id": 4,
        "text": "Stapedectomy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above image shows a <strong>stapedotomy</strong> procedure performed in the middle ear.</p>\n<p>It can be identified as a<strong> stapedotomy procedure </strong>by the following features in the image given:</p>\n<ul>\n<li>The footplate of the stapes is not removed</li>\n<li>The prosthesis is placed by creating a hole in the footplate of the stapes</li>\n</ul>\n<p><strong>Stapedotomy</strong>&nbsp;is the&nbsp;<strong>excision of the superstructure of stapes</strong>&nbsp;and drilling a hole in the footplate &amp; placing a piston in the hole.&nbsp;It is done&nbsp;to bypass the immobile stapes&nbsp;using a piston which will take over the function of conducting sound.</p>\n<p><strong>Contraindications</strong>&nbsp;for Stapedotomy:</p>\n<ul>\n<li><strong>Only hearing ear</strong></li>\n<li><strong>Positive Schwartze sign</strong></li>\n<li>Otitis externa</li>\n<li><strong>Meniere&rsquo;s disease</strong>: can damage the inner ear while drilling a hole in the footplate</li>\n<li>Young children</li>\n<li>Professional athletes,<strong>&nbsp;pilots,</strong>&nbsp;construction workers, divers: Sudden change in pressure can displace the piston and cause vertigo.</li>\n<li><strong>Those who work in noisy surroundings</strong>: Surgery makes them more vulnerable to noise-induced hearing loss.</li>\n</ul>\n<p><strong>Otosclerosis</strong> is a primary disease of the bony labyrinth where foci of irregularly placed spongy bone replace part of the normally dense enchondral layer of the bony otic capsule. It is more commonly seen in&nbsp;<strong><span data-preserver-spaces=\"true\">females&nbsp;</span></strong>between<strong><span data-preserver-spaces=\"true\">&nbsp;20-30 years&nbsp;</span></strong>of age and the hearing loss is aggravated during&nbsp;<strong><span data-preserver-spaces=\"true\">pregnancy</span></strong> and<strong><span data-preserver-spaces=\"true\"> menopause</span></strong>.</p>\n<p>Clinically, patients present with painless&nbsp;<strong>progressive bilateral conductive</strong>&nbsp;hearing loss and&nbsp;<strong>paracusis willisii </strong>(patient&nbsp;<strong>hears better in noisy surroundings</strong>&nbsp;as other people raise their voice to be heard).&nbsp;</p>\n<p>Tuning fork tests and <strong>audiometry</strong> will reveal the presence of<strong> conductive hearing loss</strong>. The bone conduction curve may show a <strong>dip</strong>, which is maximum at<strong>&nbsp;2000Hz</strong>,&nbsp;known as&nbsp;<strong>Carhart&rsquo;s notch</strong>.</p>\n<p>The image shown below shows Carhart's notch.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f5e87e1c4fb3416b890bf84bebd06689.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/39516fa7d6664c88a57c5eb70c7644dex1280x1161.JPEG"
    ]
  },
  {
    "text": "Treatment of choice for acoustic neuroma is______",
    "choices": [
      {
        "id": 1,
        "text": "Surgery"
      },
      {
        "id": 2,
        "text": "Radiotherapy"
      },
      {
        "id": 3,
        "text": "Chemotherapy"
      },
      {
        "id": 4,
        "text": "Conservative"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>Surgical removal of the tumor is the treatment of choice.</li>\n<li>The approach depends upon site and size of tumor:\n<ul>\n<li>Middle Cranial fossa approach</li>\n<li>Translabyrinthine approach</li>\n<li>Retrosigmoid/Suboccipital approach</li>\n<li>Combined</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Ent Test';
        const quizFilename = 'ent-test-cbb08e6f.html';
        let hierarchy = ["Marrow", "FMGE Test Series Subject", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>