<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 17 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2023
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following was recommended by the Shrivatsav committee?",
    "choices": [
      {
        "id": 1,
        "text": "Setting up the 3 million plan"
      },
      {
        "id": 2,
        "text": "Integration of health services"
      },
      {
        "id": 3,
        "text": "Multipurpose worker scheme"
      },
      {
        "id": 4,
        "text": "Village health guide scheme"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>village health guide scheme</strong> was proposed by <strong>Shrivastav</strong> committee.&nbsp;</p>\n<p>Village health guide:</p>\n<ul>\n<li>Guidelines for choosing VHG&nbsp;\n<ul>\n<li>Person can be from&nbsp;<strong>either sex</strong>&nbsp;but must be&nbsp;<strong>resident</strong>&nbsp;of the village.</li>\n<li>Person must know to&nbsp;<strong>read and write</strong>&nbsp;and have education up to&nbsp;<strong>6<sup>th</sup>&nbsp;grade</strong>.</li>\n<li>He/she must be able to spare around&nbsp;<strong>2-3 hours</strong>&nbsp;a day for community work.</li>\n<li>He/she must be&nbsp;<strong>acceptable</strong>&nbsp;to all parts of the community.</li>\n</ul>\n</li>\n<li>VHGs were trained for 2-3 months before beginning of work.</li>\n<li>Norm was&nbsp;<strong>1 VHG per 1000 population</strong>.</li>\n</ul>\n<p>Other Options:</p>\n<p>Option A: The health survey and <strong>development</strong> committee (or <strong>Bhore</strong> committee) started the <strong>3 million plan</strong>.&nbsp;</p>\n<p>Option B: The <strong>integration</strong> of health services was proposed by <strong>Jungalwallah</strong> committee.</p>\n<p>Option C: The <strong>multipurpose worker</strong> scheme was by <strong>Kartar Singh</strong> committee.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the pathology from the given image.",
    "choices": [
      {
        "id": 1,
        "text": "Glioma"
      },
      {
        "id": 2,
        "text": "Tuberculoma"
      },
      {
        "id": 3,
        "text": "Canavan disease"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image is magnetic resonance (MR) spectroscopy showing&nbsp;<strong>choline peak,</strong> which is diagnostic of <strong>glioma.</strong></p>\n<p><strong>MR spectroscopy</strong> is a non-invasive means of obtaining <strong>metabolic information</strong>.</p>\n<p>Increased choline reflects increased membrane synthesis and/or an increased number of cells, as seen in tumors. Choline is an important component of the cell membranes.&nbsp;</p>\n<p>&nbsp;</p>\n<p><strong>Image</strong>: The image below shows a normal MR spectroscopy.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/26f1dbf7292a43a0960dcef33e55008b.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0989131dbac446a9b8fbfac2a37ed0a0x1280x802.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a component of fetal biophysical profile?",
    "choices": [
      {
        "id": 1,
        "text": "Fetal movement"
      },
      {
        "id": 2,
        "text": "Fetal breathing"
      },
      {
        "id": 3,
        "text": "Non-stress test"
      },
      {
        "id": 4,
        "text": "Contraction stress test"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The contraction stress test&nbsp;is not a component of the biophysical profile.</p>\n<p>Components of Biophysical profile (BPP)/Manning score:</p>\n<p>(Mnemonic:BATMaN)</p>\n<ul>\n<li>B -&nbsp;<strong>Breathing</strong> movements of the fetus</li>\n<li>A - Amniotic fluid volume</li>\n<li>T - Tone of the fetus</li>\n<li>M -&nbsp;<strong>Movements</strong> of the fetus</li>\n<li>N - <strong>Non-stress test</strong> (NST)</li>\n</ul>\n<p><strong>The modified biophysical score&nbsp;</strong>has only 2 components i.e&nbsp;NST and amniotic fluid index only. It<strong>&nbsp;</strong>is considered abnormal (nonreassuring) when the NST is non-reactive and/or the AFI is &lt;5.</p>\n<p>*Note: The <strong>contraction&nbsp;stress test </strong>(oxytocin challenge test)<strong>&nbsp;</strong>is an invasive method to assess fetal well-being during pregnancy. When there is an alteration in FHR in response&nbsp;to uterine contractions, it suggests fetal hypoxia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false about composting?",
    "choices": [
      {
        "id": 1,
        "text": "Bangalore method is an aerobic process"
      },
      {
        "id": 2,
        "text": "Mechanical composting uses a controlled environment"
      },
      {
        "id": 3,
        "text": "Nightsoil can also be disposed with composting"
      },
      {
        "id": 4,
        "text": "Compost has few or no disease-causing pathogens"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>Bangalore method</strong> of composting is an <strong>anaerobic process.</strong></p>\n<p><strong class=\"ng-binding\">Composting</strong>&nbsp;is a method of combined disposal of <strong>refuse</strong> and <strong>nightsoil.</strong> In this process, organic matter is broken down&nbsp;into&nbsp;compost. It has manure value and few or <strong>no disease-causing pathogens</strong>.</p>\n<p><strong>Bangalore method</strong>&nbsp;is an anaerobic method and is&nbsp;also called&nbsp;<strong>hot fermentation process</strong>.&nbsp;<strong>Trenches</strong>&nbsp;with a depth of&nbsp;<strong>not more than 90cm</strong>&nbsp;are used for this. This is done by spreading a layer of<strong>&nbsp;</strong>refuse (15 cm thick) at the bottom of the trench and nightsoil (5cm thick) is added next. Layers of refuse and nightsoil are added alternatively till the heap rises to 30cm above ground level. The heap is then covered with&nbsp;<strong>excavated earth</strong>. At the end of 4 &ndash; 6 months, decomposition will be completed.</p>\n<p><strong>Mechanical composting </strong>is an&nbsp;<strong>aerobic process.&nbsp;</strong>In this method, compost is manufactured on a&nbsp;<strong>large scale</strong>&nbsp;by processing raw materials and turning out a finished product. The refuse is first cleared of salvageable materials. It is then<strong> pulverised&nbsp;</strong>to reduce the size of particles to <strong>less than 2 inches</strong>. The pulverised refuse is then mixed with sewage, sludge or nightsoil in a rotating machine and incubated.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A worker in a sugarcane factory is at risk of developing ___",
    "choices": [
      {
        "id": 1,
        "text": "Anthracosis"
      },
      {
        "id": 2,
        "text": "Siderosis"
      },
      {
        "id": 3,
        "text": "Bagassosis"
      },
      {
        "id": 4,
        "text": "Bysssinosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A person in a <strong>sugarcane</strong> factory is at risk of developing <strong>Bagassosis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Prolactinoma presents with ________",
    "choices": [
      {
        "id": 1,
        "text": "Bitemporal quadrantanopia"
      },
      {
        "id": 2,
        "text": "Inferior quadrantanopia"
      },
      {
        "id": 3,
        "text": "Priapism"
      },
      {
        "id": 4,
        "text": "Failure of lactation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Among the given options, <strong>bitemporal quadrantanopia</strong> is more likely to be seen in patients with <strong>prolactinoma</strong>.</p>\n<p>The<strong> most commonly</strong> seen visual field defect is <strong>bitemporal hemianopia</strong> often more pronounced superiorly. It occurs because nasal ganglion cell fibers, which cross the optic chiasm, are especially vulnerable to compression of the ventral optic chiasm.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which type of hernia is depicted in the following diagram?",
    "choices": [
      {
        "id": 1,
        "text": "Richter\u2019s hernia"
      },
      {
        "id": 2,
        "text": "Littre\u2019s hernia"
      },
      {
        "id": 3,
        "text": "Pantaloon hernia"
      },
      {
        "id": 4,
        "text": "Maydl hernia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The diagram shows <strong>Maydl\u2019s hernia</strong>/ Hernia-en-W/ retrograde hernia, it has\u00a0two small bowel loops within a single hernial sac forming a <strong>\"W\" </strong>shape. The center portion of the 'W' loop is <strong>strangulated</strong> and it lies within the abdominal cavity.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ec94d9d3b71f4b6d9a6ce0711a2b56d2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7d9444068d1e40abb898bb2cbf1f2a31x720x780.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6702ddb8956a4188bec292f13f72d52dx310x279.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1ee2c61de9c0438fbc4053ce6747d777x919x1280.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1378f16397294d778644b7c3e485ee34x328x358.JPEG"
    ]
  },
  {
    "text": "A child with recurrent urinary tract infection undergoes voiding cystourethrogram for the evaluation of vesicoureteric reflux (VUR). It shows the reflux of urine into the pelvis and calyces, without dilatation of the ureter. The grade of VUR is _____.",
    "choices": [
      {
        "id": 1,
        "text": "Grade II"
      },
      {
        "id": 2,
        "text": "Grade I"
      },
      {
        "id": 3,
        "text": "Grade III"
      },
      {
        "id": 4,
        "text": "Grade IV"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Reflux of urine into pelvis and calyces without dilatation is <strong>Grade II&nbsp;</strong>vesicoureteric reflux (VUR).</p>\n<div class=\"page\" title=\"Page 4172\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>VUR is the retrograde flow of urine from the bladder to the upper urinary tract. VUR is a common clinical entity. The investigation of choice for VUR is <strong>micturating cystourethrogram (MCU)</strong>.</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 1425\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>VUR is graded as follows:</p>\n</div>\n</div>\n</div>\n</div>\n<table style=\"height: 212px; width: 387px;\">\n<tbody>\n<tr>\n<td style=\"width: 62px; text-align: center;\"><strong> &nbsp;GRADE</strong></td>\n<td style=\"width: 308px; text-align: center;\"><strong>DESCRIPTION</strong></td>\n</tr>\n<tr>\n<td style=\"width: 62px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I</td>\n<td style=\"width: 308px;\">Reflux into a non-dilated ureter</td>\n</tr>\n<tr>\n<td style=\"width: 62px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;II</td>\n<td style=\"width: 308px;\">Reflux into the pelvis and calyces without dilatation of the ureter</td>\n</tr>\n<tr>\n<td style=\"width: 62px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;III</td>\n<td style=\"width: 308px;\">Reflux is associated with mild to moderate dilatation of the ureter, renal pelvis,&nbsp;and calyces, with minimal blunting of the fornices</td>\n</tr>\n<tr>\n<td style=\"width: 62px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IV</td>\n<td style=\"width: 308px;\">Moderate ureteral tortuosity and dilatation of the pelvis and calyces</td>\n</tr>\n<tr>\n<td style=\"width: 62px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; V</td>\n<td style=\"width: 308px;\">Gross dilatation of the&nbsp;ureter, pelvis,&nbsp;and calyses; loss of papillary impressions; ureteral&nbsp; tortuosity</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1e66145c4b6f4497bb450c36c0ad77a3x1280x7345.JPEG"
    ]
  },
  {
    "text": "Which of the following is the endocrinological change of PCOD?",
    "choices": [
      {
        "id": 1,
        "text": "Elevated Triglyceride"
      },
      {
        "id": 2,
        "text": "Elevated Testosterone"
      },
      {
        "id": 3,
        "text": "Elevated Fasting insulin"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>All of the above statements are true regarding the endocrinological feature of PCOD.</p>\n<p>Endocrine dysfunction includes the following:&nbsp;</p>\n<ul>\n<li><strong>Insulin resistance</strong>&nbsp;</li>\n<li>impaired glucose tolerance and <strong>Type 2 diabetes mellitus</strong>&nbsp;</li>\n<li><strong>Dyslipidemia</strong>: Increased LDL and <strong>triglyceride</strong> levels, elevated total cholesterol levels: High-density lipoprotein (HDL) ratios</li>\n<li>Risk of <strong>endometrial cancer increased three-folds</strong>&nbsp;</li>\n<li>Infertility/subfertility&nbsp;</li>\n</ul>\n<p>Note:&nbsp;Mild elevations in testosterone levels are consistent with the diagnosis of PCOS. However, <strong>values &gt; 200 ng/dL may suggest an ovarian tumour</strong> and warrant pelvic sonography.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old female patient comes to the psychiatry outpatient department with complaints of low mood, difficulty falling asleep, lack of appetite, lack of energy, and recurring thoughts of death for the past 4 weeks. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Conversion disorder"
      },
      {
        "id": 2,
        "text": "Somatic symptom disorder"
      },
      {
        "id": 3,
        "text": "Dysthymic\u00a0disorder"
      },
      {
        "id": 4,
        "text": "Major depressive disorder"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p class=\"p1\">The possible diagnosis in a patient with complaints of low mood, difficulty falling asleep, lack of appetite, lack of energy, and recurring thoughts of death for a period of 4 weeks is a&nbsp;<strong>major depressive disorder.</strong>&nbsp;</p>\n<p>Major depressive disorder is a mood disorder characterized by pervasive low mood <strong>without manic</strong> or <strong>hypomanic episodes</strong>. A major depressive episode lasts for at least <strong>two weeks</strong> and the patient experiences <strong>at least 4</strong> of the following symptoms:</p>\n<ul>\n<li>Feeling depressed/low mood for most of the day</li>\n<li>Changes in appetite</li>\n<li>Changes in weight</li>\n<li>Changes in sleep</li>\n<li>Changes in activity level</li>\n<li>Lack of energy</li>\n<li>Feelings of guilt</li>\n<li>Recurring thoughts of death/suicidal thoughts</li>\n</ul>\n<p>These symptoms usually cause significant impairment in social, occupational, or other important areas of functioning.</p>\n<p>Other options:<br /><br />Option A: <strong>Conversion disorder</strong> is a condition with symptoms or deficits that involve&nbsp;<strong>voluntary motor</strong>&nbsp;or&nbsp;<strong>sensory functions</strong>. Though it points to an underlying medical condition, in reality, it arises due to&nbsp;<strong>psychological factors</strong>. The symptoms are&nbsp;<strong>not intentionally produced.</strong>&nbsp;Paralysis,&nbsp;<strong>blindness</strong>, and mutism are the most frequently seen conversion disorder symptoms.&nbsp;</p>\n<p>Option B:&nbsp;<strong>Somatic symptom disorder</strong>&nbsp;is characterized by the fear of having a serious illness based on the person's misinterpretation of bodily symptoms. The symptoms are persistent for&nbsp;<strong>over 6 months.&nbsp;</strong></p>\n<p>Option C:&nbsp;&nbsp;<strong>Dysthymic&nbsp;disorder&nbsp;</strong>is the presence of a <strong>persistently depressed mood</strong> that lasts most of the day and is continuous. There are also feelings of guilt, irritability, and anger associated with it. These symptoms are present for <strong>at least 2 years</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 48-year-old man has come for a routine medical check-up. His chest X-ray is shown below. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hodgkin's lymphoma"
      },
      {
        "id": 2,
        "text": "Pulmonary hamartoma"
      },
      {
        "id": 3,
        "text": "Metastasis"
      },
      {
        "id": 4,
        "text": "Fungal ball"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The&nbsp;given image shows&nbsp;<strong>popcorn calcification&nbsp;</strong>(A well-defined round opacity seen at the left upper lung zone)&nbsp;which is suggestive of&nbsp;<strong>pulmonary hamartoma</strong>.</p>\n<p>Pulmonary Hamartoma is the&nbsp;<strong>most common benign tumor of the lung&nbsp;</strong>and it is manifested by the overgrowth of connective tissue. Pulmonary hamartoma is typically seen in <strong>40-60 years old</strong>&nbsp;and<strong>&nbsp;</strong>is&nbsp;more commonly found in <strong>males.&nbsp;</strong></p>\n<p>It is usually discovered as an<strong> incidental</strong>, rounded&nbsp;<strong>coin-like&nbsp;</strong>radio-opacity&nbsp;on a routine chest film. Typically <strong>solitary</strong>, &lt;4 cm, composed of disordered but mature hyaline cartilage, fibrous tissue, smooth muscle, and fat, sometimes with calcification/ossification.&nbsp;&nbsp;It is usually&nbsp;present <strong>peripherally </strong>and has <strong>slow growth </strong>in the lung.</p>\n<p>The <strong>presence</strong> of <strong>fat</strong> in a well-circumscribed <strong>solitary pulmonary nodule</strong> which does not demonstrate significant growth is <strong>pathognomonic</strong> of a pulmonary hamartoma.</p>\n<p>Chest x-ray showing pulmonary hamartoma:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5ed3eb6085f84945b031b8ed1fcd101d.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2d0acae7be664875a70c460f30cc1175x512x566.PNG"
    ]
  },
  {
    "text": "\u03b2 HCG is secreted by_____",
    "choices": [
      {
        "id": 1,
        "text": "Ovary"
      },
      {
        "id": 2,
        "text": "Pituitary"
      },
      {
        "id": 3,
        "text": "Corpus luteum"
      },
      {
        "id": 4,
        "text": "Placenta"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The placental gonadotropin in humans is called <strong>human chorionic gonadotropin (hCG).</strong></p>\n<ul>\n<li>hCG is a glycoprotein that contains galactose and hexos&shy;amine.</li>\n<li>It is produced by the syncytiotrophoblast of the placenta.</li>\n<li>it is made up of &alpha; and &beta; subunits.</li>\n<li>hCG-&alpha; is identical to the &alpha; subunit of LH, FSH, and TSH.</li>\n<li>hCG is primarily luteinizing and luteotropic and has little FSH activity.</li>\n<li>Its presence in early pregnancy in urine is the basis of the various laboratory tests for pregnancy, and it can sometimes be detected in the urine as early as 14 days after conception.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following will increase the GFR?",
    "choices": [
      {
        "id": 1,
        "text": "Efferent arteriole dilation"
      },
      {
        "id": 2,
        "text": "Afferent arteriole constriction"
      },
      {
        "id": 3,
        "text": "Decrease in bowman\u2019s capsule hydrostatic pressure"
      },
      {
        "id": 4,
        "text": "Increase in glomerular plasma flow"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A <strong>decrease in Bowman\u2019s capsule hydrostatic pressure</strong> causes an <strong>increase in glomerular filtration rate (GFR).</strong></p>\n<p>A <strong>decrease in Bowman's Capsule Hydrostatic Pressure increases GFR </strong>because it reduces the opposing force to filtration, thus enhancing the net filtration pressure and increasing the amount of filtrate formed.</p>\n<p>Factors that can<strong> increase the GFR </strong>are as follows:</p>\n<ul>\n<li><strong>Increase in glomerular capillary filtration coefficient Kf:</strong> This coefficient depends on the hydraulic conductivity and surface area of the glomerular capillaries.\u00a0</li>\n<li><strong>Decrease in Bowman's capsule hydrostatic pressure: </strong>Conditions with urinary tract obstruction can lead to an increase in this pressure and a fall in GFR.</li>\n<li><strong>Decrease in glomerular colloid osmotic pressure:</strong> Accumulation of plasma proteins that are not filtered from the blood contributes to this pressure, and an increase reduces further filtration and GFR. It is directly proportional to the following factors: Arterial plasma colloid osmotic pressure.</li>\n<li><strong>Filtration fraction : </strong>An <strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">increase in filtration fraction </strong><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">concentrates the plasma proteins </strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">and <strong>raises the glomerular colloid osmotic pressure</strong> which in turn <strong>decreases the GFR.</strong></span></li>\n</ul>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"><strong>Other options :\u00a0</strong></span></p>\n<p>Option A: <strong>Efferent Arteriole Dilation</strong> reduces the resistance to blood leaving the glomerulus. This leads to a <strong>decrease in glomerular capillary hydrostatic pressure. </strong>A reduction in hydrostatic pressure lowers the driving force for filtration, resulting in a decreased GFR.</p>\n<p>Option B: <strong>Afferent Arteriole Constriction</strong> decreases blood flow into the glomerulus. This <strong>lowers the glomerular capillary hydrostatic pressure.</strong> Lower pressure reduces the filtration rate across the glomerular capillary wall, leading to a decrease in GFR.</p>\n<p>Option C: <strong>Increase in Glomerular Plasma Flow: </strong>If glomerular plasma flow increases but the efferent arteriole doesn't constrict, the extra blood flow is quickly carried away. This prevents a significant rise in the pressure inside the glomerular capillaries. As a result, the glomerular filtration rate (GFR) doesn't significantly increase, because the necessary increase in filtration pressure doesn't occur.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with photophobia and blurring of vision. On examination, the eye appears as shown below.  What is the mainstay of treatment?",
    "choices": [
      {
        "id": 1,
        "text": "Antibiotics and cycloplegics"
      },
      {
        "id": 2,
        "text": "Steroids and cycloplegics"
      },
      {
        "id": 3,
        "text": "Antibiotics and steroids"
      },
      {
        "id": 4,
        "text": "Immunosuppressants"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical scenario of photophobia and blurring of vision along with red-eye and irregularly shaped pupil (image) suggest a diagnosis of <strong>uveitis.</strong>&nbsp;<strong>Steroids and cycloplegics</strong> are the mainstay of the treatment of uveitis.</p>\n<p>Steroids<strong>&nbsp;</strong>are the <strong>drug of choice</strong> in <strong>anterior</strong> uveitis. They reduce inflammation by their anti-inflammatory effect<strong>.&nbsp;</strong></p>\n<p>Cycloplegics<strong>&nbsp;</strong>like&nbsp;1% <strong>atropine, r</strong><strong>elieve spasm</strong> of the iris sphincter and ciliary muscles. They prevent the formation of synechiae and reduce exudation.</p>\n<p><strong>Systemic therapy</strong><strong>&nbsp;</strong>includes steroids, NSAIDs, and immunosuppressants.&nbsp;</p>\n<p>Immunosuppressants&nbsp;like voclosporin (calcineurin inhibitor),&nbsp;are used in severe cases. They are being studied under a program called LUMINATE.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7f2a34ffcc2c49f2970af4750979d8d0.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A young female presented with the following findings on the face. Which among the following will not be useful for its treatment?",
    "choices": [
      {
        "id": 1,
        "text": "Topical benzoyl peroxide"
      },
      {
        "id": 2,
        "text": "Topical fluocinolone"
      },
      {
        "id": 3,
        "text": "Topical tazarotene"
      },
      {
        "id": 4,
        "text": "Topical antibiotics"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The age of the patient and the presence&nbsp;of&nbsp;<strong>papules&nbsp;</strong>and&nbsp;<strong>pustules</strong>&nbsp;with an&nbsp;<strong>erythematous base</strong>&nbsp;on the face are suggestive of&nbsp;<strong>acne.&nbsp;</strong>All the above agents are useful in the treatment of acne except topical fluocinolone (topical steroid). Corticosteroids may provoke an acneform reaction irrespective of their route of administration.</p>\n<p class=\"p1\">Acne is a chronic inflammatory disease of the pilosebaceous unit. It&nbsp;is commonly seen in&nbsp;<strong>teenagers</strong><strong>. </strong>It&nbsp;can vary from very mild&nbsp;<strong>comedonal&nbsp;</strong>acne to severe aggressive&nbsp;<strong>pustular</strong>&nbsp;acne.<strong>&nbsp;</strong>These eventually may lead to&nbsp;<strong>scarring</strong>&nbsp;due to&nbsp;<strong>sinus formation</strong>.</p>\n<p>Acne results from the combination of:</p>\n<ul>\n<li><strong>Increased sebaceous gland activity</strong>&nbsp;under the influence of androgens - oily skin</li>\n<li>Abnormal follicular differentiation with increased keratinization- <strong>hypercornification </strong>of the&nbsp;<strong>duct </strong>due to&nbsp;increased IL-1</li>\n<li><strong>Microbial hypercolonization</strong> of the follicular canal leading to its inflammation.</li>\n</ul>\n<p>Management-</p>\n<ul>\n<li>Mild comedonal acne&nbsp;is treated with a&nbsp;<strong>topical retinoid</strong>.&nbsp;Mild papular and pustular acne&nbsp;is treated with&nbsp;<strong>topical retinoid and topical antibiotics</strong>.</li>\n<li>Moderate papular/pustular acne&nbsp;and&nbsp;moderate nodular acne&nbsp;are treated with&nbsp;<strong>oral antibiotic + topical retinoid with or without benzoyl peroxide.&nbsp;</strong></li>\n<li><strong>Severe</strong>&nbsp;nodular and&nbsp;conglobate acne are treated with&nbsp;<strong>oral isotretinoin.</strong></li>\n</ul>\n<p><strong>Tazarotene</strong> is a&nbsp;fourth\u2010generation retinoid, which is available for the treatment of acne.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b8df49f7a05f4dbd8b21a221ac0d91a9.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient is brought to the casualty following a road traffic accident. The patient is in respiratory distress and his X-ray is shown below. What is the next best step of management?",
    "choices": [
      {
        "id": 1,
        "text": "Tube thoracostomy at 5th intercostal space anterior to mid-axillary line"
      },
      {
        "id": 2,
        "text": "Needle decompression at 5th intercostal space anterior to mid-axillary line"
      },
      {
        "id": 3,
        "text": "Needle decompression at 5th intercostal space in the mid-clavicular line"
      },
      {
        "id": 4,
        "text": "Needle decompression at 2nd intercostal space anterior to mid-axillary line"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Immediate\u00a0</strong>management of a <strong>tension pneumothorax </strong>is done with <strong>needle decompression</strong>\u00a0or\u00a0<strong>needle thoracostomy</strong>\u00a0i.e. <strong>insertion </strong>of a<strong> wide-bore needle</strong> in the<strong> 5th ICS anterior to the midaxillary line</strong></p>\n<p><strong>Definitive</strong> management - <strong>tube thoracostomy</strong>\u00a0or\u00a0<strong>chest tube insertion</strong>\u00a0in the 5th ICS in the<strong> triangle of safety. </strong></p>\n<p><strong>Triangle of safety:</strong></p>\n<p>The boundaries are\u00a0</p>\n<ul>\n<li><span style=\"font-size: 14px;\">Anteriorly - lateral border of the pectoralis major</span></li>\n<li><span style=\"font-size: 14px;\">Posteriorly- latissimus dorsi</span></li>\n<li><span style=\"font-size: 14px;\">Inferiorly- a line perpendicular to the nipple going to the back</span></li>\n</ul>\n<div class=\"page\" title=\"Page 399\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>For <strong>pediatric</strong> patients, n<span style=\"font-size: 14px;\">eedle decompression is done at\u00a0the <strong>midclavicular line in the 2nd\u00a0</strong></span><span style=\"font-size: 14px;\"><strong>intercostal space</strong>.</span></p>\n</div>\n</div>\n</div>\n<p>The images below show the\u00a0triangle of safety\u00a0and technique of chest drain insertion.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6e573290751946608861bb8e63269598.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fd21cd55ab7646578c4cd53d2d385159x600x577.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ee798df373334af1a796790b65496d7bx600x1759.JPEG"
    ]
  },
  {
    "text": "A 10-year-old girl is brought to the OPD with complaints of frequent fainting and sudden falls while playing. She sometimes falls off while sitting in the classroom hitting her head to the desk. She regains consciousness immediately and resumes her activity, and has normal behavior after such episodes. The girl is otherwise healthy. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Typical absence seizures"
      },
      {
        "id": 2,
        "text": "Atonic seizures"
      },
      {
        "id": 3,
        "text": "Syncope"
      },
      {
        "id": 4,
        "text": "Atypical absence seizures"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given history is most consistent with <strong>atonic seizures</strong>. Atonic seizures are characterized by a <strong>sudden loss of postural control&nbsp;</strong>and there is <strong>no postictal confusion</strong>.</p>\n<p>Options A and D: <strong>Absence seizures</strong> usually present as blank stares or unresponsiveness for a few seconds. <strong>Postural control</strong> is <strong>not lost</strong> during absence seizures.</p>\n<p>Option C:&nbsp;The girl regains consciousness immediately and has no associated complaints like sweating, fatigue, or tachycardia. She also resumes her activity after the episodes. Also, there is no precipitating factor that points towards syncope. Hence it is unlikely to be<strong> syncope</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young girl was rushed to the emergency room in a delirious state. Her parents reported her to have consumed a wild fruit as shown below while on a camping trip. On examination, photophobia, staggering gait, flushing, and dry mucous membranes are noticed. The pupils are bilaterally dilated. Which of the following plant poisons she may have consumed?",
    "choices": [
      {
        "id": 1,
        "text": "Datura stramonium"
      },
      {
        "id": 2,
        "text": "Digitalis purpurea"
      },
      {
        "id": 3,
        "text": "Ricinus communis"
      },
      {
        "id": 4,
        "text": "Atropa belladonna"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario along with the image showing cherry-like fruit is suggestive that the plant poison the patient may have consumed is <strong>Atropa belladonna.&nbsp;</strong></p>\n<p>Atropa belladonna is a <strong>deliriant poison</strong> that acts by <strong>inhibiting</strong> the<strong> muscarinic effects </strong>of <strong>acetylcholine.</strong> All the parts of the plants are toxic. The active principle is <strong>1-hyoscyamine.</strong></p>\n<p>Clinical manifestations of Atropa belladonna poisoning include:&nbsp;</p>\n<ul>\n<li>Fever, <strong>flushing</strong>, rash</li>\n<li>Neurological symptoms - <strong>delirium</strong>, <strong>slurred speech</strong>, headache, choreoathetosis, myoclonus,&nbsp;visual and auditory hallucinations, convulsions and coma</li>\n<li>Eye symptoms -&nbsp;<strong>photophobia</strong>, blurred vision, <strong>dilated pupils</strong> poorly reactive to light</li>\n<li>Cardiovascular symptoms -&nbsp;arrhythmia, tachycardia,&nbsp;hypertension</li>\n<li>Gastrointestinal symptoms -&nbsp;<strong>severely dry mouth</strong> and throat,&nbsp;decreased bowel sounds, constipation, ileus</li>\n<li>Renal symptoms -&nbsp;<strong>urinary retention</strong></li>\n</ul>\n<p><strong>Anticholinergic symptoms</strong>&nbsp;include tachycardia, hypertension, flushing, dry mouth, mydriasis and urinary retention.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/21ff84feff18423daedd22bebe652cce.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Folate trap occurs due to the deficiency of ______",
    "choices": [
      {
        "id": 1,
        "text": "Thiamine"
      },
      {
        "id": 2,
        "text": "Vitamin B12"
      },
      {
        "id": 3,
        "text": "Biotin"
      },
      {
        "id": 4,
        "text": "Folic acid"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Folate trap </strong>occurs in the <strong>deficiency of Vitamin B12</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/036e6a7e30474e4abc9d87c9913034a2x1280x1774.JPEG"
    ]
  },
  {
    "text": "The structure marked in the diagram given below supplies which of the following muscles",
    "choices": [
      {
        "id": 1,
        "text": "Serratus anterior"
      },
      {
        "id": 2,
        "text": "Lattismus dorsi"
      },
      {
        "id": 3,
        "text": "Sternocleidomastoid"
      },
      {
        "id": 4,
        "text": "Scalenus anterior"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above image shows <strong>spinal accessory nerve. </strong></p>\n<p><strong>Muscle innervation:</strong> It supplies <strong>trapezius</strong> and the <strong>sternocleidomastoid.</strong></p>\n<p><strong>Course: </strong>Spinal accessory nerve enters the posterior triangle passing deep to the sternocleidomastoid muscle and runs in an oblique direction within the triangle to supply Trapezius.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0e24eb0d86674529b246579f4bb61218.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8ad6c17641b84d7aaac7c0724671da15x600x597.JPEG"
    ]
  },
  {
    "text": "A 23-year-old female patient with a history of breast and ovarian cancers in her siblings underwent genetic testing. She is found to have a mutation in the BRCA1 gene.  She is at the risk of developing:",
    "choices": [
      {
        "id": 1,
        "text": "Melanoma along with breast cancer"
      },
      {
        "id": 2,
        "text": "Low grade breast cancer"
      },
      {
        "id": 3,
        "text": "Post menopausal breast cancer"
      },
      {
        "id": 4,
        "text": "Triple receptor negative breast cancer"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Individuals with BRCA1 mutations are likely to develop&nbsp;<strong>triple receptor-negative</strong> and <strong>high-grade</strong>&nbsp;breast carcinomas.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "6 year old boy fell from the bed and developed swelling in the nose and difficulty in breathing. Management includes",
    "choices": [
      {
        "id": 1,
        "text": "Observation"
      },
      {
        "id": 2,
        "text": "Systemic antibiotics only"
      },
      {
        "id": 3,
        "text": "Surgical drainage"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Swelling in the nose indicates possibility of septal haematoma which mainly presents with bilateral nasal obstruction and needs immediate surgical drainage.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What parameter does the yellow color tracing on the monitor shown below represent?",
    "choices": [
      {
        "id": 1,
        "text": "Capnography"
      },
      {
        "id": 2,
        "text": "Airway pressure"
      },
      {
        "id": 3,
        "text": "O2 pressure in inhaled air"
      },
      {
        "id": 4,
        "text": "O2 pressure in exhaled air"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p class=\"ng-binding\">The yellow color tracing shown in the monitor is <strong>capnography</strong>.</p>\n<p><span data-preserver-spaces=\"true\">Waveform capnography</span><span data-preserver-spaces=\"true\">\u00a0is a\u00a0</span><span data-preserver-spaces=\"true\">continuous<strong> non-invasive </strong>measurement</span><span data-preserver-spaces=\"true\">\u00a0and\u00a0</span><span data-preserver-spaces=\"true\">graphical display</span><span data-preserver-spaces=\"true\">\u00a0of the\u00a0</span><strong><span data-preserver-spaces=\"true\">EtCO2</span></strong><span data-preserver-spaces=\"true\">.\u00a0</span></p>\n<p><span data-preserver-spaces=\"true\">It is a\u00a0</span><span data-preserver-spaces=\"true\">direct</span><span data-preserver-spaces=\"true\">\u00a0measure of\u00a0</span><strong><span data-preserver-spaces=\"true\">lung ventilation</span></strong><span data-preserver-spaces=\"true\">\u00a0and an\u00a0</span><span data-preserver-spaces=\"true\">indirect</span><span data-preserver-spaces=\"true\">\u00a0measure of\u00a0</span><strong><span data-preserver-spaces=\"true\">circulation</span></strong><span data-preserver-spaces=\"true\">\u00a0and\u00a0</span><strong><span data-preserver-spaces=\"true\">metabolism</span></strong><span data-preserver-spaces=\"true\">.</span>\u00a0</p>\n</div>\n<div class=\"ng-scope\">The <strong>normal capnograph</strong> displays the <strong>exhaled CO<sub>2</sub></strong>\u00a0in both the inspiratory and expiratory phases. The expiratory phase is divided into three distinct components:</div>\n</div>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<ul>\n<li aria-level=\"1\"><strong>Phase</strong> <strong>I</strong>: exhalation of dead space gas (i.e., partial pressure of CO<sub>2</sub>, pCO<sub>2</sub>\u00a0\u223c0).</li>\n<li aria-level=\"1\"><strong>Phase</strong> <strong>II</strong>: A sharp<strong> rise</strong> in <strong>pCO<sub>2</sub></strong>\u00a0to a <strong>plateau indicates</strong>\u00a0the sampling of transitional gas between the airways and alveoli.\u00a0</li>\n<li aria-level=\"1\"><strong>Phase</strong> <strong>III</strong>: The plateau region of the capnograph, corresponds to the pCO<sub>2</sub>\u00a0in the alveolar compartment.\u00a0</li>\n<li aria-level=\"1\"><strong>Following phase III,</strong> a sharp inspiratory downstroke\u00a0occurs, which is referred to as the beginning of phase 0 or phase IV.</li>\n</ul>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e5f9c406fbcc48f1b689d16f4622ce03.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9b95ce52d0094747b5ef85f5779d60eax1280x1075.JPEG"
    ]
  },
  {
    "text": "Non-sense mutation is seen in _____________.",
    "choices": [
      {
        "id": 1,
        "text": "Beta-thalassemia"
      },
      {
        "id": 2,
        "text": "Alpha-thalassemia"
      },
      {
        "id": 3,
        "text": "Sickle-cell anemia"
      },
      {
        "id": 4,
        "text": "Hereditary spherocytosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Non-sense mutation</strong> is seen in <strong>&beta;<sup>0</sup>&nbsp;thalassemia.</strong></p>\n<p>A <strong>point mutation</strong> is a change in which a single base is substituted with a different base. The point mutations within the coding sequences of the DNA (i.e., the region of the DNA that&nbsp; codes for proteins) are of two types:</p>\n<ol>\n<li><strong>Missense mutations</strong></li>\n<li><strong>Non-sense mutations</strong></li>\n</ol>\n<p><strong>1. Missense mutations: </strong>These mutations may involve <strong>alteration of a single base in a triplet of bases</strong> and lead to the <strong>replacement of one amino acid by another in the gene product.</strong>&nbsp;Because these mutations alter the meaning of the sequence of the encoded protein, they are often referred to as missense mutations.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Based on the substituted amino acid coded, the missense mutations are again of two types:</p>\n<p>a)&nbsp;<strong>Conservative missense mutation: </strong>The substituted amino acid is biochemically similar to the original. It typically causes little change in the function of the protein.</p>\n<p>b)&nbsp;<strong>Non-conservative missense mutation: </strong>This type of mutation replaces the normal amino acid with a biochemically different one. An example of this type of mutation is <strong>sickle-cell anemia, </strong>which is characterized by point mutation affecting the <strong>&beta;-globin chain of the hemoglobin, </strong>where the nucleotide triplet <strong>CTC</strong> (or GAG in mRNA), which encodes glutamic acid, is changed to <strong>CAC</strong> (or GUG in mRNA), which <strong>encodes valine</strong>.</p>\n<p><strong>2. Nonsense mutations: </strong>It is a point mutation in a sequence of DNA that results in a premature stop codon. For example, a point mutation affecting the codon for glutamine (CAG) creates a <strong>stop codon (UAG)</strong> if U is substituted for C. This change leads to premature termination of &beta;-globin gene translation, and the short peptide that is produced is rapidly degraded. The resulting deficiency of &beta;-globin chains can give rise to a severe form of anemia called&nbsp;<strong>&beta;<sup>0</sup> t</strong><strong>halassemia.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a42b131ed0b94da48af9e2f5309f4eebx1280x917.JPEG"
    ]
  },
  {
    "text": "A young girl is brought by their parents due to concern about her height. On evaluation, growth hormone levels are found to be high, and insulin-like growth factor levels are low. Which among the following is the likely diagnosis in this child?",
    "choices": [
      {
        "id": 1,
        "text": "Turner's Syndrome"
      },
      {
        "id": 2,
        "text": "Pituitary Dwarfism"
      },
      {
        "id": 3,
        "text": "Laron Dwarfism"
      },
      {
        "id": 4,
        "text": "Maternal deprivation dwarfism"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The presence of <strong>high GH </strong>levels and <strong>low insulin-like growth factor</strong>\u00a0<strong>(IGF-1) </strong>levels point towards\u00a0<strong>Laron dwarfism.</strong>\u00a0</p>\n<p>It\u00a0is caused by\u00a0<strong>end-organ resistance </strong>to growth hormone(GH insensitivity)\u00a0due to a<strong>\u00a0mutation </strong>in the\u00a0<strong>GH receptor</strong>.<strong>\u00a0</strong>It is an\u00a0<strong>autosomal-recessive</strong>\u00a0disorder with clinical features like those seen in\u00a0pituitary dwarfism.</p>\n<p>Here, growth hormone is produced but is unable to act on the target tissues. Thus, the resting and stimulated GH\u00a0levels\u00a0are\u00a0high\u00a0and\u00a0IGF-1\u00a0levels are\u00a0low.</p>\n<p>Patients with Laron syndrome present with features such as:</p>\n<ul>\n<li>Growth failure</li>\n<li>Small head circumference</li>\n<li>Characteristic facies with saddle nose and prominent forehead</li>\n<li>Short limb length compared with trunk</li>\n<li>Osteopenia</li>\n<li>Obesity</li>\n<li>In some cases mild to moderately impaired intellect may be seen</li>\n</ul>\n<p>Other options</p>\n<p>Option A: In <strong>Turner's syndrome</strong>, loss of the short arm of the X chromosome is implicated in dwarfism. The short stature occurs due to a state of GH resistance, relative deficiency, and decreased utilization.</p>\n<p>Option B:<strong> Pituitary dwarfism</strong>\u00a0is a condition with GH deficiency.</p>\n<p>Option D:<strong> Maternal deprivation dwarfism</strong>\u00a0is due to psychosocial causes such as emotional deprivation and neglect. There is an inadequate response to GH stimulation tests. The mechanism is not fully understood. No history suggestive of disturbed maternal or family relationships rules this out.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young female patient presents with fever, chills, and abdominal pain 2 days after an uneventful vaginal delivery. The patient is diagnosed with postpartum endometritis. Which among the following is false about her condition?",
    "choices": [
      {
        "id": 1,
        "text": "It is a polymicrobial infection"
      },
      {
        "id": 2,
        "text": "Risk of developing this condition is more with vaginal delivery when compared with caesarian section"
      },
      {
        "id": 3,
        "text": "Prolonged labour is a risk factor for developing this condition"
      },
      {
        "id": 4,
        "text": "Patients are treated with oral or parenteral antimicrobials"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The single most important <strong>risk factor</strong> for developing postpartum endometritis is <strong>cesarean birth</strong>. Hence the statement that the risk of this developing this condition is greater with vaginal delivery is <strong>false.</strong></p>\n<p>Postpartum endometritis is an infective condition of the genital tract<strong>. </strong>The majority of the infections are<strong> polymicrobial </strong>and are caused by the bacteria present in the genital tract.<strong>&nbsp;</strong>Important conditions increasing the risk of developing endometritis are cesarean section, prolonged labor, and chorioamnionitis. Patients present with symptoms such as <strong>fever</strong>, abdominal <strong>tenderness,</strong> and other features of <strong>sepsis.</strong></p>\n<p>Oral or parenteral antibiotics are the mainstay of treatment.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A middle-aged obese, non-diabetic, non-hypertensive female patient has been diagnosed with non-alcoholic steatohepatitis (NASH). Which of the following drugs can be used as the first-line treatment in this scenario?",
    "choices": [
      {
        "id": 1,
        "text": "Ursodeoxycholic acid"
      },
      {
        "id": 2,
        "text": "Alpha tocopherol"
      },
      {
        "id": 3,
        "text": "Metformin"
      },
      {
        "id": 4,
        "text": "N-acetylcysteine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In the given clinical scenario,\u00a0<strong>Alpha-tocopherol</strong> or <strong>vitamin E</strong> is the first-line treatment considered for\u00a0non-alcoholic steatohepatitis <strong>(NASH)</strong> for non-diabetic patients.</p>\n<p>Non-alcoholic fatty liver disease (NAFLD)\u00a0is associated with\u00a0diabetes\u00a0and\u00a0obesity. The fatty change may also be caused due to the effect of\u00a0toxins (including certain medications),\u00a0protein malnutrition,\u00a0dyslipidemia,\u00a0and\u00a0anoxia. Bleomycin, Methotrexate,\u00a0Doxycycline, and l-Asparaginase are other drugs that can cause hepatic steatosis.</p>\n<p>Nonalcoholic steatohepatitis (NASH) is characterized by <strong>hepatic steatosis</strong> which is complicated by histologically evident hepatocyte death and inflammation. Currently, a <strong>liver\u00a0biopsy</strong> is the <strong>best investigation</strong> to establish the diagnosis.</p>\n<p>The current approach to NAFLD management focuses on treatment to avoid or decrease the risk factors for NASH (like obesity, insulin resistance, metabolic syndrome, and dyslipidemia).</p>\n<p><strong>Alpha-tocopherol or vitamin E</strong> is the <strong>first-line treatment</strong> considered for non-alcoholic steatohepatitis (NASH). Various clinical trials demonstrate that vitamin E is well-tolerated, and shows modest improvements in AST levels, radiographic features of hepatic steatosis, and/or histologic features of NASH.</p>\n<ul>\n<li>Vitamin E should only be considered as the first-line pharmacotherapy for<strong> non-diabetic</strong> <strong>NASH patients.</strong></li>\n<li>Dose:<strong> 800 IU/day.</strong></li>\n</ul>\n<p>In patients with diabetes who also have NAS1H/NAFLD, the clinician needs. to consider the presence of NASH while selectingoral anti-hypoglycemic agent. GLP\u20141 agonists and thiazolidinediones, such as pioglitazone, have been shown to improve fibrosis, inflammation,<span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">\u00a0and steatosis.</span></p>\n<p>\u00a0Other options :\u00a0</p>\n<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Option A: <strong>Ursodeoxycholic acid</strong> (a bile acid that improves certain cholestatic liver diseases) and\u00a0omega-3 fatty acids show no histologic benefit in the management of NASH.</span></p>\n<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Option C: <strong>Metformin</strong> is not currently recommended as a treatment for NASH (in patients without diabetes) as there is no conclusive evidence of improved hepatic outcomes.\u00a0</span></p>\n<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Option D: <strong>N-acetylcysteine</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z h-lparen\"><strong>(NAC)\u00a0</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">is a specific antidote for\u00a0</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>paracetamol\u00a0</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>poisoning</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">. It has maximum efficacy when given\u00a0</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>within 8 hours\u00a0</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">and can be given either via the oral or intravenous route.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young patient presents to you with the following finding. What is the nerve affected?",
    "choices": [
      {
        "id": 1,
        "text": "Ulnar nerve"
      },
      {
        "id": 2,
        "text": "Radial nerve"
      },
      {
        "id": 3,
        "text": "Median nerve"
      },
      {
        "id": 4,
        "text": "Long thoracic nerve"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows is that of a<strong> claw hand</strong> classically seen in case of an <strong>ulnar nerve</strong> injury.</p>\n<p>The <strong>ulnar nerve</strong> supplies the\u00a0<strong>medial two lumbricals, adductor pollicis, interossei,\u00a0</strong>and\u00a0<strong>hypothenar muscles </strong>in the hand. The lumbricals are primarily responsible for the <strong>extension</strong> at the <strong>interphalangeal</strong> joints. Therefore, in ulnar nerve palsy, there is clawing of the medial two fingers.</p>\n<p>In <strong>ulnar nerve</strong> palsy, only the <strong>medial two fingers</strong> develop clawing, while in a <strong>combined</strong> <strong>median </strong>and<strong> ulnar nerve</strong> palsy,\u00a0<strong>all four fingers</strong> develop clawing.\u00a0</p>\n<p>The following tests are done to test the integrity of the ulnar nerve:</p>\n<ul>\n<li><strong>Egawa's test -\u00a0</strong>In a positive test, due to the\u00a0<strong>weakness </strong>of the<strong> dorsal interossei</strong>, side-to-side movements of the middle finger is weak.</li>\n<li><strong>Book test or Froment's sign - </strong>The patient is asked to hold a book between the thumb and index finger while the examiner attempt to pull it forcefully.<strong>\u00a0</strong>In case of an ulnar nerve injury, the adductor pollicis is paralyzed and the patient attempts to hold the book with the flexor pollicis longus muscle supplied by the median nerve.</li>\n<li><strong>Card test -\u00a0</strong>In the case of weak palmar interossei, the examiner can pull out the card with ease.<strong>\u00a0</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6ff3dd260bcd4dcf90a27f7335c3ac80.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/66ccd6a833554f0b833d6566327db507x1280x1335.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7c1da898d8aa4abc879bb1f0a4aeca55x1279x1225.JPEG"
    ]
  },
  {
    "text": "Match the auscultatory areas of the heart from image given below",
    "choices": [
      {
        "id": 1,
        "text": "1-Aortic, 2-Pulmonary, 3-Mitral, 4-Tricuspid"
      },
      {
        "id": 2,
        "text": "1-Aortic, 2-Pulmonary, 3- Tricuspid, 4-Mitral"
      },
      {
        "id": 3,
        "text": "1-Mitral, 2-Pulmonary, 3- Tricuspid, 4-Mitral"
      },
      {
        "id": 4,
        "text": "1-Aortic, 2-Tricuspid, 3- Pulmonary, 4-Mitral"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows the auscultation areas of the heart and <strong>option B</strong> is correctly matched.&nbsp;</p>\n<p>The auscultation areas correspond to the areas where the sounds and murmurs of the heart valves can be best heard.&nbsp;</p>\n<ul>\n<li><strong>Mitral</strong> area- At the<strong> apex of the heart</strong> which is at the <strong>5th Intercostal space</strong> in the <strong>midclavicular line</strong>.&nbsp;</li>\n<li><strong>Tricuspid</strong> area- <strong>Lower left sternal edge</strong> in the <strong>left 4th intercoastal space</strong>.</li>\n<li><strong>Pulmonic</strong> area-<strong>Upper left sternal edge</strong> in the <strong>left 2nd intercoastal space</strong></li>\n<li><strong>Aortic</strong> area- <strong>Upper right sternal edge</strong> in the <strong>right 2nd intercoastal space</strong>.&nbsp;</li>\n</ul>\n<p>An image showing the auscultation areas of the heart is shown below:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7e0b8f1e57024751b75ff5ec566c0fdc.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4a0d9bbf118f4735afe5651250f13a4cx1280x1302.JPEG"
    ]
  },
  {
    "text": "A 34-year-old male was on maize as a staple diet for a prolonged period. He presented with diarrhoea and lesion over his neck as shown in the image below. The condition occurs due to deficiency of:",
    "choices": [
      {
        "id": 1,
        "text": "Niacin"
      },
      {
        "id": 2,
        "text": "Zinc"
      },
      {
        "id": 3,
        "text": "Thiamine"
      },
      {
        "id": 4,
        "text": "Iron"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above history and clinical features suggest<strong>&nbsp;niacin/vitamin B3</strong> deficiency.</p>\n<p>Excessive consumption of maize-based diets can cause <strong>pellagra</strong>. Corn/Maize has low levels of niacin and tryptophan.&nbsp;Jowar has high leucine content which inhibits QPRTase, an enzyme in the synthesis of Niacin.</p>\n<p>Niacin deficiency leads to a disease called pellagra which is characterized by</p>\n<ul>\n<li>Diarrhea</li>\n<li>Dermatitis</li>\n<li>Dementia</li>\n</ul>\n<p>The lesion in the neck is characteristic&nbsp;<strong>Casal&rsquo;s necklace pattern</strong>, seen in pellagra. The Casal's collar or Casal's necklace is a clinical sign in which there is an erythematous pigmented skin rash in the distribution of a broad collar (dermatomes C3 and C4).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0bb5f4b18dcf4cc185b5351fc0d1e1ba.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8c0a9800de0f40f5b25c42b0b81bcecfx720x521.JPEG"
    ]
  }
];
        let quizName = 'Fmge Mini Test - 17';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2023"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>