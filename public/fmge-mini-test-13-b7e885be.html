<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 13 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following does not supply the palate?",
    "choices": [
      {
        "id": 1,
        "text": "Tonsillar branch of facial artery"
      },
      {
        "id": 2,
        "text": "Ascending palatine artery"
      },
      {
        "id": 3,
        "text": "Descending palatine artery"
      },
      {
        "id": 4,
        "text": "Ascending pharyngeal artery"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>tonsillar branch of facial artery</strong> supplies the palatine tonsil and not the palate.</p>\n<p>Blood supply of the palate:</p>\n<ul>\n<li>Hard palate - <strong>greater (descending) palatine artery</strong> which is a branch of the third part of the maxillary artery.</li>\n<li>Soft palate - <strong>ascending palatine</strong> branch of the facial artery, <strong>ascending pharyngeal</strong> artery, and <strong>lesser palatine arteries.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ed1053ead37b4522b805f47c8717e4aex1280x1393.JPEG"
    ]
  },
  {
    "text": "Which of the following structures is not pierced during a lumbar puncture?",
    "choices": [
      {
        "id": 1,
        "text": "Ligamentum flavum"
      },
      {
        "id": 2,
        "text": "Interspinous ligament"
      },
      {
        "id": 3,
        "text": "Posterior longitudinal ligament"
      },
      {
        "id": 4,
        "text": "Supraspinous ligament"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The posterior longitudinal ligament is not pierced during lumbar puncture.</p>\n<p>Structures pierced during lumbar puncture (in that order):</p>\n<ul>\n<li><strong>S</strong>kin</li>\n<li><strong>S</strong>ubcutaneous tissue</li>\n<li><strong>S</strong>upraspinous ligament</li>\n<li><strong>I</strong>nterspinous ligament</li>\n<li><strong>L</strong>igamentum flavum</li>\n<li><strong>E</strong>pidural space</li>\n<li><strong>D</strong>ura mater</li>\n<li><strong>A</strong>rachnoid mater</li>\n<li><strong>S</strong>ubarachnoid space</li>\n</ul>\n<p>Mnemonic: <strong>3S</strong> <strong>I</strong> <strong>LED</strong> <strong>AS</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8cdae7d37d3c48af8be77ebab999093ax1280x1712.JPEG"
    ]
  },
  {
    "text": "After overnight fasting, levels of glucose transporters are reduced in ___________.",
    "choices": [
      {
        "id": 1,
        "text": "Brain cells"
      },
      {
        "id": 2,
        "text": "Adipocytes"
      },
      {
        "id": 3,
        "text": "Hepatocytes"
      },
      {
        "id": 4,
        "text": "RBCs"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Levels of insulin-sensitive receptor <strong>GLUT-4 decreases</strong> after <strong>overnight fasting</strong>. The passive uptake of glucose by <strong>muscle</strong> and <strong>adipose tissue</strong> is catalyzed by the GLUT-4 transporter.</p>\n<p>In the absence of insulin, most GLUT 4 molecules are sequestered in membrane vesicles within the cell, but when blood glucose rises, the release of insulin triggers GLUT 4 movement to the plasma membrane.<br /><br /></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A pregnant couple presented to the OPD with concerns about thalassemia in their baby due to a positive family history. Genetic studies revealed that both she and her husband are carriers. What is the probability that the child will have thalassemia major?",
    "choices": [
      {
        "id": 1,
        "text": "25%"
      },
      {
        "id": 2,
        "text": "50%"
      },
      {
        "id": 3,
        "text": "75%"
      },
      {
        "id": 4,
        "text": "100%"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>There is 25% probability that their child will have thalassemia major.</p>\n<p>\u03b2-thalassemia occurs due to mutations causing an\u00a0<strong>impaired</strong><strong>\u00a0synthesis\u00a0</strong>of<strong>\u00a0\u03b2-globin chains</strong>\u00a0of hemoglobin (Hb), leading to anemia, hypoxia, and hemolysis. The mutations can be of two types:</p>\n<ol>\n<li>Absent \u03b2 chain synthesis (<strong>\u03b2<sup>0</sup></strong>)</li>\n<li>Reduced\u00a0\u03b2 chain synthesis (<strong>\u03b2<sup>+</sup></strong>)</li>\n</ol>\n<p>Being an <strong>autosomal recessive disease,</strong> disease occurs <strong>only</strong> when <strong>both alleles </strong>are<strong> defective</strong>. When <strong>only</strong> <strong>one</strong> is defective, they are called <strong>carriers</strong> or trait. Here as both the parents are carriers, their alleles will be\u00a0\u03b2/\u03b2<sup>0</sup> or \u03b2/\u03b2<sup>+\u00a0</sup>(1 \u03b2-thalassemia allele and 1 normal allele). As the clinical disease doesn't alter much based on it being\u00a0\u03b2<sup>+</sup>\u00a0or\u00a0\u03b2<sup>0</sup>, its safe to use use\u00a0\u03b2<sup>+</sup> to represent a thalassemia allele.</p>\n<table style=\"height: 104px; width: 198.039px;\">\n<tbody>\n<tr>\n<td style=\"width: 50px;\">\u00a0</td>\n<td style=\"width: 62px;\">\u03b2</td>\n<td style=\"width: 60.0391px;\">\u03b2<sup>+</sup>\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 50px;\">\u03b2</td>\n<td style=\"width: 62px;\">\u03b2/\u03b2</td>\n<td style=\"width: 60.0391px;\">\u03b2/\u03b2<sup>+</sup></td>\n</tr>\n<tr>\n<td style=\"width: 50px;\">\u03b2<sup>+</sup></td>\n<td style=\"width: 62px;\">\u03b2/\u03b2<sup>+</sup></td>\n<td style=\"width: 60.0391px;\">\u03b2<sup>+/</sup>\u03b2<sup>+</sup></td>\n</tr>\n</tbody>\n</table>\n<p>Thalassemia major means both alleles are mutated. And from the table, that can occur in one of the four ways possible. Hence the answer is 25%</p>\n<p>\u00a0Clinical syndromes of \u03b2-thalassemia depending on the genetic defect:</p>\n<p>Major:\u00a0</p>\n<ul>\n<li><strong>Severe microcytic hypochromic anemia</strong> with target cells, basophilic stippling, and fragmented red cells (typical Hb: 3 to 6 g/dL), requiring <strong>regular blood transfusions</strong></li>\n<li><strong>Crewcut appearance</strong> of facial bones and skull (due to cortical bone erosion by expanding marrow and new bone formation)</li>\n<li><strong>Speen</strong>,<strong> liver</strong>, and<strong> lymph node enlargement</strong>\u00a0(due to extramedullary hematopoiesis)</li>\n</ul>\n<p>Minor:\u00a0</p>\n<ul>\n<li><strong>More common</strong></li>\n<li>Usually asymptomatic</li>\n<li><strong>Mild microcytic hypochromic anemia</strong> with target cells and basophilic stippling (important to rule out iron deficiency anemia by serum iron studies)</li>\n<li>Mild erythroid hyperplasia in bone marrow</li>\n</ul>\n<p>Other features:</p>\n<table style=\"width: 365.703px;\">\n<tbody>\n<tr style=\"height: 36px;\">\n<td style=\"width: 10px; height: 36px;\">\u00a0</td>\n<td style=\"width: 95px; height: 36px; text-align: center;\"><strong>Major</strong></td>\n<td style=\"width: 72.7031px; height: 36px; text-align: center;\"><strong>Minor </strong>(also called<strong> trait</strong>)</td>\n</tr>\n<tr style=\"height: 29px;\">\n<td style=\"width: 10px; height: 29px; text-align: left;\">Genotype</td>\n<td style=\"width: 95px; height: 29px;\">\n<p>\u03b2<sup>0</sup>/\u03b2<sup>0</sup>, \u03b2<sup>0</sup>/\u03b2<sup>+</sup>,\u00a0\u03b2<sup>+</sup>/\u03b2<sup>+\u00a0</sup>(2 \u03b2-thalassemia alleles)</p>\n</td>\n<td style=\"width: 72.7031px; height: 29px;\">\n<p>\u03b2/\u03b2<sup>0</sup>\u00a0or \u03b2/\u03b2<sup>+\u00a0</sup>(1 \u03b2-thalassemia allele and 1 normal allele)</p>\n</td>\n</tr>\n<tr style=\"height: 71px;\">\n<td style=\"width: 10px; height: 71px; text-align: left;\">Hb <br />electro-phoresis</td>\n<td style=\"width: 95px; height: 71px;\">\n<p><strong>HbF</strong>: Major Hb, <strong>markedly elevated</strong></p>\n<p>HbA<sub>2</sub>: Usually normal to low</p>\n<p>HbA: Absent or present in small amounts</p>\n</td>\n<td style=\"width: 72.7031px; height: 71px;\">\n<p><strong>HbA<sub>2</sub></strong>: <strong>Increased</strong> (4-8%) with an elevated ratio of \u03b4-chain to \u03b2-chain synthesis</p>\n<p>HbF: Normal or slightly increased</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>A third clinical syndrome of <strong>moderate severity</strong> is called <strong>\u03b2-thalassemia intermedia</strong>. The genotype in this type includes milder variants of \u03b2<sup>+</sup>/\u03b2<sup>+</sup> or \u03b2<sup>0</sup>/\u03b2<sup>+\u00a0</sup>and does not require regular transfusions.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 23-year-old male patient presents to the OPD with nausea, vomiting, and four episodes of loose stools. On history taking, he reveals to have consumed food from a restaurant 3 hours back. Which of the following is wrong about the toxin involved?",
    "choices": [
      {
        "id": 1,
        "text": "It is a superantigen"
      },
      {
        "id": 2,
        "text": "Causes stimulation of  vomiting centre"
      },
      {
        "id": 3,
        "text": "It is a preformed toxin"
      },
      {
        "id": 4,
        "text": "Toxin is heat labile"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario is highly suggestive of an acute episode of food poisoning caused by <strong>Staphylococcus aureus</strong>. The toxin involved, <strong>enterotoxins</strong>, are <strong>heat stable.</strong></p>\n<p>Staphylococcus causes nausea, vomiting, and diarrhoea 2-6 hours after consuming contaminated food (other organisms causing food poisoning within the same time period of 2-6 hours is Bacillus cereus-Emetic strains).</p>\n<p>Enterotoxin produced by Staphylococcus:</p>\n<ul>\n<li>There are 15 enterotoxins, they are<strong> superantigens</strong></li>\n<li>It is a <strong>preformed toxin</strong> that is <strong>heat stable&nbsp;</strong>(Most of the other exotoxins are <strong>heat-labile</strong>).</li>\n<li>Site of action: This toxin stimulates the <strong>vagus nerve</strong> and vomiting centre of the brain and also stimulates the intestinal peristaltic activity.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with urinary symptoms due to benign prostatic hyperplasia. Which of the following is used to manage the urinary symptoms in the initial stage of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Atropine"
      },
      {
        "id": 2,
        "text": "Tamsulosin"
      },
      {
        "id": 3,
        "text": "Finasteride"
      },
      {
        "id": 4,
        "text": "Danazole"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Tamsulosin</strong> is used for the management of urinary symptoms in the <strong>initial stages </strong>of<strong> Benign prostatic hyperplasia(BPH)</strong>. It improves the urinary flow by inhibiting the smooth muscle contraction of the prostate thereby reducing the resistance at the bladder neck.</p>\n<p><strong>BPH</strong> is characterized by <strong>symptoms</strong> of\u00a0urinary <strong>frequency, urgency, nocturia, incontinence,</strong> slow urinary stream, straining to void, urinary intermittency (stream starting and stopping during micturition), or hesitancy, splitting of the voiding stream, and terminal dribbling. Physical examination reveals a <strong>smooth enlarged</strong> and <strong>non-tender</strong> <strong>prostate</strong>. Lab investigations reveal a <strong>normal PSA\u00a0</strong>(prostate-specific antigen).\u00a0Diagnosis is made based on clinical presentation and a lack of lab findings suggestive of malignancy (elevated PSA). A biopsy is rarely indicated.</p>\n<p><strong>Conservative treatment </strong>is recommended for men with<strong> mild symptoms, flow rate &gt;10ml/s, </strong>and<strong> good bladder emptying</strong> with residual urine &lt;100ml.\u00a0</p>\n<p><strong>Medical management</strong> includes <strong>alpha-adrenergic blocking</strong> agents that inhibit the contraction of smooth muscle that is found in the prostate. Tamsulosin is an adrenoreceptor\u00a0<strong>antagonist</strong>\u00a0with receptor selectivity at\u00a0<strong>\u03b1<sub>1A</sub>.</strong>\u00a0It is used in the treatment of benign prostatic hyperplasia<strong>. </strong></p>\n<p>The other class of drugs is the <strong>5\u03b1-reductase inhibitors,</strong> which inhibit the conversion of testosterone to DHT, the most active form of androgen. Finasteride is a <strong>5\u03b1-reductase enzyme\u00a0inhibitor.\u00a0</strong>It is effective in the treatment of<strong>\u00a0palpable enlarged prostate</strong>. These drugs result in a 25% shrinkage of the prostate gland.</p>\n<p><strong>Indications</strong> for <strong>surgical</strong> management:</p>\n<ul>\n<li>Lower urinary tract symptoms that are refractory to medical therapy</li>\n<li>Refractory urinary retention</li>\n<li>Recurrent urinary tract infection (UTI)</li>\n<li>Hematuria</li>\n<li>Stone formation</li>\n<li>Hydronephrosis, hydroureter with renal functional impairment</li>\n</ul>\n<p><strong>Surgical management</strong> involves the use of the transurethral resection of the prostate <strong>(TURP).\u00a0</strong>Laser ablative techniques using holmium YAG can also be done.\u00a0</p>\n<p>Other options:</p>\n<ul>\n<li>\n<p><strong>Atropine:</strong> Atropine is an anticholinergic medication that can help relax smooth muscles in certain parts of the body, but it is not specifically indicated for treating BPH-related symptoms.\u00a0</p>\n</li>\n<li>\n<p><strong>Finasteride:</strong> Finasteride belongs to a class of drugs known as 5-alpha-reductase inhibitors. It is used in the treatment of BPH to reduce the size of the prostate gland over time, but it may take several months of treatment for noticeable effects to occur.</p>\n</li>\n<li>\n<p><strong>Danazol:</strong> Danazol is primarily known for its use in treating endometriosis and certain other conditions, including hereditary angioedema. Danazol is not considered a first-line or typical therapy for BPH.</p>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5-year-old child with a \u200bhistory of perianal pain is brought to the OPD. On subjecting the specimen from the perianal region to a test, it produces yellow rhombic crystals of spermine picrate. What is the test done?",
    "choices": [
      {
        "id": 1,
        "text": "Barberio test"
      },
      {
        "id": 2,
        "text": "Florence test"
      },
      {
        "id": 3,
        "text": "Takayama test"
      },
      {
        "id": 4,
        "text": "Teichmann test"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The test done in the scenario is <strong>Barberio test</strong>. It is used to detect <strong>seminal fluid.</strong></p>\n<p>When saturated aqueous or alcoholic solution of <strong>picric</strong> <strong>acid</strong> is added to the <strong>spermatic</strong> <strong>fluid</strong>, <strong>yellow needle-shaped</strong> rhombic crystals of<strong> spermine picrate</strong> are produced.</p>\n<p>Other options:&nbsp;</p>\n<p>Option B: Florence test:&nbsp;</p>\n<ul>\n<li>The <strong>suspected</strong>&nbsp;<strong>seminal</strong> <strong>stain</strong> is extracted with 10%&nbsp;<strong>hydrochloric</strong>&nbsp;<strong>acid</strong> and a drop of it is placed over a slide.</li>\n<li>A coverslip is placed over it and a drop of <strong>Florence</strong> <strong>solution </strong>(potassium iodide, iodine, and water) is made to run under the coverslip.</li>\n<li>If semen is present, <strong>dark</strong> <strong>brown</strong> rhombic or needle-shaped crystals of choline iodide appear immediately.</li>\n</ul>\n<p>Option C: Takayama test&nbsp;(Hemochromogen crystal test):&nbsp;</p>\n<ul>\n<li>The test is used to detect suspected<strong> bloodstains.&nbsp;</strong>Small piece of suspected material is added on a glass slide.</li>\n<li>Then, 2-3 drops of Takayama reagent is added and covered with a coverslip.</li>\n<li>If it is a bloodstain,<strong> pink feathery crystals</strong> of <strong>hemochromogen</strong> or <strong>reduced alkaline hematin</strong> appear in a few minutes.</li>\n</ul>\n<p>Option D: Teichmann test (Hemin Crystal Test):&nbsp;</p>\n<ul>\n<li>The test is used to detect suspected <strong>bloodstains</strong>.</li>\n<li>Small piece of suspected material is placed on a glass slide. Then, 2-3 drops of<strong> glacial acetic acid</strong> and a small crystal of <strong>sodium chloride</strong> are added to the glass slide and covered with a coverslip. The slide is then heated.</li>\n<li>If bloodstain is present, faint<strong> yellowish-red</strong> to <strong>brownish-black</strong> <strong>rhombic</strong> <strong>crystals</strong> of <strong>hemin</strong> or <strong>hematin chloride appear.</strong></li>\n<li>When <strong>hydrogen</strong> <strong>peroxide</strong> is added, the hematin crystals give bubbles of gas.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 15-year-old male patient presented with a nasal mass and intermittent epistaxis. On examination, the mass is reaching up to the cheek and causing a unilateral obstruction. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Nasopharyngeal carcinoma"
      },
      {
        "id": 2,
        "text": "Inverted papilloma"
      },
      {
        "id": 3,
        "text": "Nasal polyp"
      },
      {
        "id": 4,
        "text": "Angiofibroma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p class=\"ng-binding\">This patient, with these clinical features, most likely has an angiofibroma.&nbsp;</p>\n<p class=\"ng-binding\"><strong>Angiofibroma,</strong> a benign tumor that affects young male patients, is the most common&nbsp;<strong>benign tumor</strong>&nbsp;of the nasopharynx. It is a histologically benign&nbsp;<strong>but locally aggressive vascular tumor</strong>&nbsp;that grows at the back of the nasal cavity.</p>\n<ul>\n<li>Origin: It originates from the fibrovascular stroma on the&nbsp;<strong>posterolateral wall</strong>&nbsp;of the nasal cavity in the area of the&nbsp;<strong>sphenopalatine foramen.</strong></li>\n</ul>\n<p><strong>A vascular tumor</strong>&nbsp;arising from the periosteum with fibrous tissue and blood vessels.</p>\n<p><strong>It encroaches</strong>&nbsp;by expanding into surrounding areas like the nasal cavity, sphenoidal sinus, pterygopalatine fossa, maxillary sinus, orbit, and cranial cavity.</p>\n<p><strong>Clinical Features</strong></p>\n<ul>\n<ul>\n<li>Blocking of the nose</li>\n<li>Epistaxis</li>\n<li>Secondary sexual characters not well developed</li>\n<li>Rhinolalia clausa</li>\n<li>Anterior/ posterior rhinoscopy</li>\n<li>Bulging of soft palate +/-</li>\n<li>Spread by expansion</li>\n</ul>\n</ul>\n<p>Biopsy should not be attempted</p>\n<p>Blood supply is most commonly from the&nbsp;<strong>internal maxillary artery</strong>&nbsp;of that side.</p>\n<p>Treatment:</p>\n<ul>\n<li>Wilson&rsquo;s transpalatal approach</li>\n<li>Lateral rhinotomy</li>\n</ul>\n<ul>\n<li>If intracranial extension</li>\n</ul>\n<ul>\n<li>Role is doubtful</li>\n</ul>\n<ul>\n<ul>\n<li><strong>Excision</strong></li>\n<li><strong>Radiation</strong></li>\n<li><strong>Hormonal therapy</strong></li>\n</ul>\n</ul>\n<p>&nbsp;</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient who presents to the OPD has a visual field defect as shown below. What is the probable site of the lesion based on the image displayed?",
    "choices": [
      {
        "id": 1,
        "text": "3"
      },
      {
        "id": 2,
        "text": "1"
      },
      {
        "id": 3,
        "text": "4"
      },
      {
        "id": 4,
        "text": "5"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The visual field defect in the image is indicative of <strong>bitemporal hemianopia, </strong>so the probable site of the lesion is the <strong>optic chiasma\u00a0</strong>marked as <strong>3</strong> in the image given.\u00a0</p>\n<p style=\"text-align: left;\">Options marked in the image are:</p>\n<p style=\"text-align: left;\">1. Left optic nerve\u00a0<br />3. Otic chiasma<br />4.\u00a0Left optic tract\u00a0<br />5. Left lateral geniculate nucleus</p>\n<p>Hemianopia or hemianopsia refers to loss of sight in half the visual field. <strong>Bitemporal hemianopia</strong> refers to loss of sight in the <strong>temporal halves</strong> of the visual field, seen in lesions affecting the optic chiasma. The <strong>most common cause</strong> of this is <strong>pituitary gland tumours</strong>. Other causes include\u00a0<strong>suprasellar aneurysms</strong>,<strong> chronic arachnoiditis</strong>, and suprasellar tumours like <strong>craniopharyngioma </strong>and<strong> suprasellar meningioma</strong>.</p>\n<p>Damage to the middle part of the optic chiasm <strong>affects</strong>\u00a0<strong>fibres crossing</strong> at the <strong>nasal retina</strong> of each eye, leaving the uncrossed fibres from the <strong>temporal retinas intact</strong>. The resulting <strong>loss of vision</strong> is confined to the <strong>temporal visual field</strong> of each eye and this is known as bitemporal hemianopia. It is also called <strong>heteronymous</strong> <strong>hemianopia</strong> to emphasize the fact that the parts of the visual field that are lost in each eye do not overlap.</p>\n<p style=\"text-align: left;\">Individuals with this condition are able to see in both left and right central visual fields, with both eyes open. However, all information from the most peripheral parts of visual fields (which are seen only by the nasal retinas) is lost.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bb7da8c9fc99445a84f725c3601889e5.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The cornerstone of treatment for a patient of dengue with warning signs is:",
    "choices": [
      {
        "id": 1,
        "text": "IV Fluids"
      },
      {
        "id": 2,
        "text": "Platelets"
      },
      {
        "id": 3,
        "text": "Cryoglobulins"
      },
      {
        "id": 4,
        "text": "FFP"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>mainstay</strong> of treatment for a patient of <strong>dengue with warning signs</strong> is <strong>IV fluid</strong>s.</p>\n<p>The main pathology in dengue is plasma leakage resulting in intravascular volume depletion and thereby shock. So, supportive management with continuous infusion of crystalloid IV fluids remains the primary modality of treatment in these patients. And often patients respond well to supportive management.</p>\n<p><strong>Platelet transfusion</strong> is limited to patients with <strong>severe thrombocytopenia (&lt;10,000/mm<sup>3</sup></strong>) and <strong>active bleeding</strong>.</p>\n<p>FFP and cryoglobulins are not the preferred treatment modality in dengue.</p>\n<p><strong>Warning signs</strong> in dengue include\u00a0</p>\n<ul>\n<li><strong>Abdominal pain</strong> or tenderness</li>\n<li>Persistent <strong>vomiting</strong></li>\n<li><strong>Clinical fluid accumulation</strong> (ascites, pleural effusion)</li>\n<li><strong>Mucosal bleeding</strong></li>\n<li>Lethargy or restlessness</li>\n<li>Hepatomegaly &gt;2 cm</li>\n<li>Increase in hematocrit concurrent with a rapid decrease in platelet count</li>\n</ul>\n<p><strong>Inpatient management</strong> is advised for all patients with <strong>dengue with warning signs</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Who is the chairman of the National Disaster Management Authority of India?",
    "choices": [
      {
        "id": 1,
        "text": "Minister of Health and Family Welfare"
      },
      {
        "id": 2,
        "text": "Prime Minister of India"
      },
      {
        "id": 3,
        "text": "Union Home Minister"
      },
      {
        "id": 4,
        "text": "Defence Minister"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>National Disaster Management Authority <strong>(NDMA)</strong> is an apex body of the Government of India, with a mandate to lay down policies for disaster management. It is chaired by the<strong> Prime Minister</strong> of India.&nbsp;</p>\n<p>The image given below shows the logo of the NDMA.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9821a45c14ee4f2b8311efcfef77ec7ex720x702.PNG"
    ]
  },
  {
    "text": "The process in the oxidation pond is ________________",
    "choices": [
      {
        "id": 1,
        "text": "Always aerobic"
      },
      {
        "id": 2,
        "text": "Always anaerobic"
      },
      {
        "id": 3,
        "text": "Aerobic during day, anaerobic during night"
      },
      {
        "id": 4,
        "text": "Anaerobic during day, aerobic during night"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The process in the oxidation ponds is <strong>aerobic during day</strong>, and <strong>anaerobic during night. </strong></p>\n<p>An<strong> oxidation pond</strong>\u00a0is a method of sewage disposal that is used to treat both sewage and industrial waste.\u00a0It is an open, shallow pool of around 1 \u2013 1.5m depth with an inlet and outlet.\u00a0It requires\u00a0<strong>algae</strong>, certain types of\u00a0<strong>saprophytic bacteria</strong>\u00a0and\u00a0<strong>sunlight.</strong></p>\n<p>The organic matter is oxidized by bacteria into carbon dioxide, ammonia and water. Algae grow by utilising these with the help of sunlight creating a balance.\u00a0The oxidation ponds are predominantly aerobic during sunshine hours and some hours of the night. In the\u00a0remaining hours of the night, the bottom layers are generally anaerobic. The effluent formed can be used for land irrigation or can be forwarded for further treatment.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A  woman presents with sudden onset of fever, altered mental status, confusion, and petechiae over both lower limbs. Laboratory reports were suggestive of acute kidney injury. Peripheral smear showed thrombocytopenia and schistocytes. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Immune thrombocytopenic purpura"
      },
      {
        "id": 2,
        "text": "Disseminated intravascular coagulation"
      },
      {
        "id": 3,
        "text": "Hemolytic uremic syndrome"
      },
      {
        "id": 4,
        "text": "Thrombotic thrombocytopenic purpura"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The clinical scenario is suggestive of<strong>&nbsp;thrombotic thrombocytopenic purpura </strong>(TTP).</p>\n<p><strong>Thrombotic thrombocytopenic purpura (TTP) </strong>is&nbsp;<strong>thrombotic microangiopathy.</strong>&nbsp;It results from<strong>&nbsp;antibodies to&nbsp;</strong>metalloprotease <strong>ADAMTS13,&nbsp;</strong>which&nbsp;normally <strong>cleaves multimers</strong> of<strong>&nbsp;vWF</strong>. <strong>Failure to cleave</strong> these multimers results in <strong>excessive platelet adhesion </strong>and<strong> aggregation</strong>. This leads to platelet thrombi and fibrin deposits at various sites. These thrombi result in the <strong>classic pentad</strong> of:&nbsp;</p>\n<ul>\n<li>Microangiopathic hemolytic anaemia</li>\n<li>Thrombocytopenia</li>\n<li>Renal failure</li>\n<li>Neurologic findings</li>\n<li>Fever</li>\n</ul>\n<p>The <strong>platelet thrombi narrow</strong> the vessel <strong>lumen,</strong>&nbsp;causing&nbsp;<strong>shearing stress</strong> on the red blood cells that are passing through. This results in microangiopathic hemolytic anemia.&nbsp;On peripheral smear, these fragmented red cells appear as <strong>schistocytes</strong> or <strong>helmet cells,</strong> as shown in the image below:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7698db7a0b9c479d9e61b2dc0d1b4fd4x754x594.PNG"
    ]
  },
  {
    "text": "Identify the deformity depicted in the image.",
    "choices": [
      {
        "id": 1,
        "text": "Swan neck deformity"
      },
      {
        "id": 2,
        "text": "Boutonni\u00e8re deformity"
      },
      {
        "id": 3,
        "text": "Z line deformity"
      },
      {
        "id": 4,
        "text": "Trigger finger"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows <strong>flexion </strong>of the<strong> proximal interphalangeal </strong>(PIP)&nbsp;joint with <strong>hyperextension </strong>of the<strong> distal interphalangeal </strong>(DIP)&nbsp;joint. This deformity is known as <strong>Boutonni&egrave;re deformity </strong>seen in rheumatoid arthritis.</p>\n<p>&nbsp;<strong>Rheumatoid Arthritis :</strong></p>\n<p>It is a chronic inflammatory disease. Its incidence increases between 25 and 55 years of age.</p>\n<p>Signs and symptoms -</p>\n<ul>\n<li>Swelling and pain of the small joints of the hands initially(spares DIP joint)</li>\n<li><strong>Morning stiffness</strong></li>\n<li><strong>Swan-neck deformity</strong>(hyperextension of the PIP joint with flexion of the DIP joint), <strong>Boutonni&egrave;re deformity</strong>(flexion of the PIP joint with hyperextension of the DIP joint), or <strong>Z-line deformity</strong>(subluxation of the first MCP joint with hyperextension of the first interphalangeal (IP) joint )</li>\n<li><strong>Ulnar deviation of fingers</strong></li>\n<li>Constitutional findings such as fever, weight loss, etc</li>\n<li>Monoarthritis of large joints can occur later</li>\n<li>Tenosynovitis of palm(trigger finger0</li>\n<li>Atlantoaxial joint involvement</li>\n</ul>\n<p>Joints commonly affected in Rheumatoid Arthritis: (bilateral and symmetrically involved)&nbsp;</p>\n<ul>\n<li>MCP joints</li>\n<li>Wrists</li>\n<li>PIP joints</li>\n<li>MTP joints</li>\n<li>Atlantoaxial joint</li>\n</ul>\n<p>Diagnosis is made with clinical signs and symptoms with corroboration from lab and imaging findings.</p>\n<p><strong>Anti-CCP, RF</strong>, and synovial fluid analysis are important lab investigations.</p>\n<p>X-ray findings show -<br />soft tissue swelling, joint space narrowing, periarticular osteopenia, and bony erosions</p>\n<p><strong>Treatment of rheumatoid arthritis (RA)</strong></p>\n<p><strong>DMARDs&nbsp;</strong>(Disease-modifying antirheumatic drugs) are the mainstay of treatment.</p>\n<p><strong>Methotrexate is the drug of choice in patients with RA</strong>. It can be used alone (in low disease activity) or with a 3-drug combination (in high disease activity) with other DMARDs such as hydroxychloroquine, sulfasalazine, and leflunomide (reserve drug).</p>\n<ul>\n<li>It is a&nbsp;<strong>folic acid analong</strong></li>\n<li>Inhibits&nbsp;<strong>dihydrofolate reductase</strong></li>\n<li>Causes&nbsp;<strong>reversible</strong>&nbsp;myelosuppression</li>\n<li><strong>Leucovorin</strong>&nbsp;is used to manage myelosuppression</li>\n<li>Can cause&nbsp;<strong>pulmonary fibrosis</strong></li>\n<li>Escalation with&nbsp;<strong>triple therapy&nbsp;</strong>involves<strong>&nbsp;- methotrexate + sulfasalazine + hydroxychloroquine</strong></li>\n<li><strong>Glucocorticoids&nbsp;</strong></li>\n</ul>\n<p>Other extra-articular manifestations are:</p>\n<ul>\n<li>Sjogren's syndrome</li>\n<li>Pericarditis, Mitral regurgitation</li>\n<li>Pleuritis, Interstitial Lung disease</li>\n<li>Vasculitis</li>\n<li>Felty's syndrome</li>\n<li>Diffuse large B cell lymphoma</li>\n</ul>\n<p>The image below shows extraarticular manifestations of rheumatoid arthritis -</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b7f2de168c744b3787f8ade7ece2dec4.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6283a1b17bb74a3fa88adfdbd76f4650x1280x2349.JPEG"
    ]
  },
  {
    "text": "A 30-year-old man presented with the finding shown in the given image. Which among the following conditions is least likely to cause this presentation?",
    "choices": [
      {
        "id": 1,
        "text": "Endocarditis"
      },
      {
        "id": 2,
        "text": "Bronchiectasis"
      },
      {
        "id": 3,
        "text": "Tricuspid atresia"
      },
      {
        "id": 4,
        "text": "Aortic dissection"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image shows&nbsp;<strong>digital clubbing.</strong> Among the given options, aortic dissection is least likely to cause digital clubbing.</p>\n<p><strong>Clubbing</strong> is a&nbsp;selective <strong>bulbous enlargement</strong> of the distal segments of the fingers and toes due to the proliferation of connective tissue, particularly on the dorsal surface.</p>\n<p>Clubbing can occur secondary to:</p>\n<ul>\n<li>Pulmonary disease: Lung cancer, <strong>bronchiectasis</strong>, asbestosis, sarcoidosis, lung abscess, cystic fibrosis, tuberculosis, and mesothelioma</li>\n<li>Cardiac disease: <strong>Cyanotic congenital heart disease</strong>,\u202fother causes of right-to-left shunting, and <strong>bacterial endocarditis</strong>.</li>\n<li>Gastrointestinal disease: Ulcerative colitis, Crohn disease, primary biliary cirrhosis, cirrhosis of the liver.</li>\n<li>Skin disease: Palmoplantar keratoderma, and Fischer-Volavsek syndrome.</li>\n<li>Malignancies: Thyroid cancer, thymus cancer, Hodgkin disease, and disseminated chronic myeloid leukemia.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/37489bade9bd450ea12c5740c6174bf9.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old man was admitted to the hospital with difficulty in breathing. He had puffiness around the eyes, pitting edema of the lower limbs, and ascites. His 24-hour urine protein shows a protein level of 4 g/24h. CT chest shows a saddle embolus. What is the cause of this patient's CT findings?",
    "choices": [
      {
        "id": 1,
        "text": "Loss of antithrombin III (AT III)"
      },
      {
        "id": 2,
        "text": "Decreased metabolism of vitamin K"
      },
      {
        "id": 3,
        "text": "Increase in protein C"
      },
      {
        "id": 4,
        "text": "Increased fibrinogen"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This patient's clinical features are suggestive of a diagnosis of <strong>nephrotic syndrome</strong> complicated to pulmonary embolism. <strong>Thrombo-embolic complications</strong> in nephrotic syndrome are due to the <strong>loss of endogenous anticoagulants </strong>such as <strong>antithrombin III</strong>&nbsp;in the urine.</p>\n<p>Nephrotic syndrome is a condition that occurs due to damage in the glomerular capillary walls thereby leading to increased capillary permeability to plasma proteins.</p>\n<p>The manifestations and the mechanisms of nephrotic syndrome are:</p>\n<ul>\n<li><strong>Massive proteinuria</strong> (&gt;3.5 grams) as a result of leakage in the barrier formed by glomerular basement membrane, endothelium, and visceral epithelial cells.</li>\n<li><strong>Hypoalbuminemia</strong> (albumin &lt;3g/dL) occurs as a consequence of proteinuria. Also, increased catabolism of the kidney contributes to hypoalbuminemia.&nbsp;</li>\n<li><strong>Generalized edema</strong> is seen. The edema is soft and pitting seen in periorbital and dependent portions of the body. It occurs as a result of decreased intravascular colloid osmotic pressure and other factors like sodium and water retention lead to edema.&nbsp;</li>\n<li><strong>Hyperlipidemia</strong> occurs following the increased synthesis of lipoproteins, lipid particles, and decreased catabolism of lipids.</li>\n<li><strong>Lipiduria</strong> is due to leakage of lipids through the glomerular capillary wall.</li>\n</ul>\n<p><strong>Increased susceptibility to infections</strong> is another complication. It is due to loss of immunoglobulins in the urine.</p>\n<p>The image shows the pathophysiology of nephrotic syndrome.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/de658cefde874fd5905f63ab3535dca8x1280x1419.JPEG"
    ]
  },
  {
    "text": "An elderly female was brought to the hospital with a history of severe pain in the renal angle for the past 7 hours. Ultrasound of the kidney reveals a renal stone of 2.5 cm. What is the treatment of choice in this scenario?",
    "choices": [
      {
        "id": 1,
        "text": "Extracorporeal shock-wave lithotripsy (ESWL)"
      },
      {
        "id": 2,
        "text": "Percutaneous nephrolithotomy (PCNL)"
      },
      {
        "id": 3,
        "text": "Ureteroscopic removal"
      },
      {
        "id": 4,
        "text": "Open surgery"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The treatment of choice for renal calculi of size 2.5 cm is<strong> percutaneous nephrolithotomy (PCNL).</strong></p>\n<p><strong>PCNL</strong>&nbsp;is the treatment of choice for large renal stones of diameter more than 2cm. PCNL is indicated in the following types of renal calculi:</p>\n<ul>\n<li>Staghorn calculi</li>\n<li>Multiple stones</li>\n<li>Proximal ureteral stone: &gt;1 cm</li>\n</ul>\n<p><strong>Technique:&nbsp;</strong>Endoscopic instruments are passed into the kidney using a percutaneous technique and stones are removed.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the instrument used in thyroid surgery, shown below.",
    "choices": [
      {
        "id": 1,
        "text": "Travers retractor"
      },
      {
        "id": 2,
        "text": "Spencer Wells retractor"
      },
      {
        "id": 3,
        "text": "Joll retractor"
      },
      {
        "id": 4,
        "text": "Dyball retractor"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The instrument shown in the image above is Joll retractor. Joll retractor is a <strong>self-retaining retractor </strong>used in<strong> thyroid </strong>surgery.</p>\n<p><strong>Travers retractor</strong> is a<strong> self-retaining</strong> retractor used for <strong>herniorrhaphy</strong>, groin dissection for varicose veins, and femoral embolectomy.</p>\n<p>Travers Retractor:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/361ba787cceb44d7af4c1f32b1e9ca0f.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/01f56088863349fcbfae75461bd1a8aax1280x859.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ecbc33dfd035487b9a632124f1b48750x1280x966.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/da360363ebe740348e668b4cf0895475x400x400.PNG"
    ]
  },
  {
    "text": "An infant who is diagnosed with congenital hypothyroidism presents with the following hernia. Which of the following statements is false regarding the management of this child?",
    "choices": [
      {
        "id": 1,
        "text": "The hernia may spontaneously resolve by 2 years of age"
      },
      {
        "id": 2,
        "text": "Surgical repair is indicated if the hernia persists for more than 5 years of age"
      },
      {
        "id": 3,
        "text": "Strangulation is a common complication associated with this type of hernia"
      },
      {
        "id": 4,
        "text": "Mayo\u2019s procedure or mesh repair can be done for this hernia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical history of <strong>congenital hypothyroidism</strong> and the image showing a mass protruding out of the umbilicus is indicative of an <strong>umbilical hernia. Obstruction</strong> and <strong>strangulation</strong> are <strong>uncommon</strong> below the age of 3 years.</p>\n<p><strong>Congenital hypothyroidism</strong>&nbsp;is a condition caused by an embryological defect in the thyroid gland or thyroid hormone synthesis.</p>\n<p>Congenital hypothyroidism is commonly associated with other features such as:</p>\n<ul>\n<li>Myxedematous facies</li>\n<li>Large fontanelles</li>\n<li>Macroglossia</li>\n<li>Umbilical hernia</li>\n<li>Hypotonia</li>\n</ul>\n<p><strong>Mayo&rsquo;s operation</strong> is done for an&nbsp;<strong>umbilical hernia.&nbsp;</strong>Indications for surgery in umbilical hernia are:</p>\n<ul>\n<li>Defect size <strong>&gt;2cm</strong></li>\n<li>Persisting <strong>beyond 5 years</strong></li>\n<li>Progressively enlarging after 2 years of age (usually regresses spontaneously by 2 years of age)</li>\n<li>Symptomatic</li>\n<li>Strangulated</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bdb7a36e794c4ed89dab4c3ddad4f610.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Following a road traffic accident, a child presents with abdominal pain. On examination, vitals are stable and tenderness is present in the left lumbar region. What is the investigation of choice for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Contrast-enhanced CT scan"
      },
      {
        "id": 2,
        "text": "Retrograde urethrogram"
      },
      {
        "id": 3,
        "text": "Wait and watch"
      },
      {
        "id": 4,
        "text": "Emergency laparotomy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical vignette with <strong>abdominal pain</strong> and tenderness in&nbsp;the left lumbar region following a road traffic accident is suggestive of <strong>blunt renal trauma</strong>. The investigation of choice is contrast-enhanced CT (<strong>CECT</strong>) in a<strong> hemodynamically stable patient.</strong></p>\n<p><strong>Blunt trauma</strong> is the main cause of renal injuries and is self-limiting. Radiological investigations are indicated when there is <strong>gross hematuria</strong>, shock in combination with microscopic hematuria, pediatric renal trauma, and penetrating injuries.</p>\n<p><strong>CECT</strong> is the investigation of choice. It assesses&nbsp;the extent of the injury, showing laceration, extravasation, surrounding hemorrhage, and vessel injury. It also shows non-renal injuries and effectively stages renal pedicle injuries. Arterial occlusion will manifest as rim enhancement of the normal renal contour.</p>\n<p>Blunt trauma is mostly treated <strong>conservatively. </strong>Most penetrating injuries require surgical <strong>renal exploration.</strong></p>\n<p>Absolute indications for surgical intervention in renal trauma are</p>\n<ul>\n<li>Massive hemorrhage</li>\n<li>Renal pedicle avulsion (grade 5 injury)</li>\n<li>Expanding, pulsatile, or uncontained <strong>retroperitoneal</strong> hematoma</li>\n</ul>\n<p>Relative indications are</p>\n<ul>\n<li>Large laceration of the renal pelvis or avulsion of the ureteropelvic junction</li>\n<li>Bowel or pancreatic injuries</li>\n<li>Persistent urinary leakage, postinjury urinoma, or perinephric abscess&nbsp;</li>\n<li>Complete renal artery thrombosis of both kidneys&nbsp;</li>\n<li>Renal hypertension</li>\n</ul>\n<p><strong>Exploratory laparotomy</strong> is recommended in stable patients with penetrating renal injuries.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 46-year old lady is being evaluated for abnormal uterine bleeding by a dilatation and curettage procedure. The following instruments are placed on a table in the minor operating theatre. Which of the following instruments will be used in this procedure?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2 and 3"
      },
      {
        "id": 2,
        "text": "1, 4, 5 and 6"
      },
      {
        "id": 3,
        "text": "2, 3 and 6"
      },
      {
        "id": 4,
        "text": "1, 2, 3, and 4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Among the given instruments&nbsp;<strong>1, 2, and 3 -</strong>&nbsp;<strong>Sim's uterine curette, Hegar's dilators, and Simpson's uterine sound</strong>&nbsp;are used for dilatation and curettage (D&amp;C).</p>\n<p>Instruments used in D&amp;C:</p>\n<ul>\n<li>Sim&rsquo;s speculum: It retracts the posterior vaginal wall to expose the cervix</li>\n<li>Anterior vaginal wall retractor: Retracts the anterior vaginal wall to expose the cervix.</li>\n<li>Vulsellum or Allis forceps: To hold the anterior lip of the cervix</li>\n<li>Uterine sound:&nbsp;Simpson's uterine sound is a 30 cm long angulated instrument with a handle at one end and a rounded blunt tip at the other.<br />It is used to measure the length of the uterus. It can be identified by the markings used for measurement</li>\n<li>Cervical dilators:&nbsp;\n<ul>\n<li>Hegar's dilator is a<strong>&nbsp;</strong>double-ended dilator used to dilate the cervix.</li>\n<li>Hawkins&rsquo; single-ended dilator&nbsp;</li>\n<li>Fenton&rsquo;s dilator</li>\n</ul>\n</li>\n<li>Curette:\n<ul>\n<li>Sim's curette is a single-ended curette</li>\n<li>Blake's curette is a double-ended curette</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1494e3dba1504fed83e7d19b4b0aed06.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/44a1e2eab77443b99fff1bce6a4f6440x1280x4487.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ef151151c4164a2292946ce1d95d3b1cx1279x791.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/eb26972d93e748f8926940f3a5db6dd9x1280x796.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/84d0add3c01945aebd771354e227b12cx1280x796.JPEG"
    ]
  },
  {
    "text": "You are performing a cardiotocograph on a woman in labor, and your findings are shown below. What could be the possible cause of these findings?",
    "choices": [
      {
        "id": 1,
        "text": "Umbilical cord compression"
      },
      {
        "id": 2,
        "text": "Fetal head compression"
      },
      {
        "id": 3,
        "text": "Uteroplacental insufficiency"
      },
      {
        "id": 4,
        "text": "Fetal hypoxia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p class=\"p1\">The given cardiotocograph shows decelerations that are variable with respect to the size, shape, depth, duration, and timing of uterine contractions. This is indicative of <strong>variable decelerations</strong>, and the likely cause among the given options is <strong>umbilical cord compression</strong></p>\n<p>Baseline variability is observed in many conditions such as:</p>\n<p><strong>1. Acceleration:</strong> Transient <strong>increase in fetal heart rate </strong>(FHR) by <strong>15 bpm</strong> or more, lasting for <strong>at least 15 seconds</strong>. It denotes intact neurohormonal and cardiovascular activity and, therefore, a <strong>healthy fetus</strong>.</p>\n<p><strong>2. Deceleration</strong>: Transient <strong>decrease in FHR </strong>below the baseline by<strong> 15 bpm</strong> or more and <strong>lasting &ge;15 seconds</strong>. Three basic types of deceleration are early, late, and variable:</p>\n<ul>\n<li><strong>Early</strong> deceleration/&nbsp;<strong>Type I Dips</strong>: Slowing of FHR and in most cases, the phases of the deceleration (onset, nadir, and recovery)&nbsp;<strong>coincide</strong>&nbsp;with those of the uterine contraction (beginning, peak, and ending). It is due to <strong>head compression</strong> (vagal nerve activation).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3ab61e1345ab47fb8c71565494d5b2c9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/033407835bb44533b38c2f8779e511f6x1279x1228.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e2d898d60ccc46a9b57829f8e273c12dx720x637.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/530baff365cf48d389485c5e72e8ee11x1280x1092.JPEG"
    ]
  },
  {
    "text": "A 35-year-old pregnant woman at 36 weeks gestation comes with a history of multiple episodes of convulsions at home. The diagnosis of eclampsia is made. What is the next step of management?",
    "choices": [
      {
        "id": 1,
        "text": "Intravenous\u00a0labetalol alone"
      },
      {
        "id": 2,
        "text": "MgSO4 alone"
      },
      {
        "id": 3,
        "text": "MgSO4 + Intravenous\u00a0labetalol"
      },
      {
        "id": 4,
        "text": "Clonidine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The next step in the management of <strong>eclampsia</strong> is the administration of&nbsp;<strong>MgSO4 + Intravenous&nbsp;labetalol</strong>.</p>\n<p>The&nbsp;<strong>first step</strong>&nbsp;in the&nbsp;management of eclampsia is <strong>maintaining</strong> the&nbsp;<strong>airway</strong><strong>&nbsp;</strong>and preventing aspiration.</p>\n<p>The <strong>immediate measures</strong> in the medical management of eclampsia include the following steps:</p>\n<ul>\n<li>Call for extra&nbsp;<strong>help</strong>&nbsp;(Communication)</li>\n<li>To put the patient in a&nbsp;<strong>left lateral recumbent</strong>&nbsp;position and maintain&nbsp;<strong>oral airway</strong></li>\n<li><strong>O2 inhalation</strong>&nbsp;</li>\n<li>Secure&nbsp;<strong>IV lines:</strong>&nbsp;1 or 2 wide bore cannulas and start fluids.</li>\n<li>Catheterize the patient with a Foley's catheter and an urometer</li>\n<li>Control of seizures:&nbsp;<strong>MgSO4 (IV/IM regimens)</strong></li>\n<li>Control of hypertension:&nbsp;<strong>Labetalol</strong></li>\n<li>Oropharyngeal suction</li>\n<li>Diuretics administration for pulmonary edema, if present.</li>\n</ul>\n<p>The <strong>definitive management</strong> of eclampsia is always the&nbsp;<strong>termination of pregnancy</strong> irrespective of gestational age.&nbsp;If labor does not start and the seizures are controlled, a mature baby is&nbsp;<strong>vaginally delivered</strong>&nbsp;by induction of labor. If the baby is premature, steroids are given(&lt;34 weeks) and delivery is conducted.&nbsp;In case of obstetric contraindications for a vaginal delivery, a&nbsp;<strong>cesarean section</strong>&nbsp;should be done to deliver the fetus.</p>\n<p><strong>Intravenous&nbsp;labetalol</strong>&nbsp;is the <strong>first-line agent</strong> for control of BP in pregnancy.&nbsp;It is a&nbsp;<strong>nonselective&nbsp;&beta; blocker</strong>&nbsp;and&nbsp;<strong>vascular&nbsp;&alpha; blocker</strong> It has a <strong>rapid onset</strong> of action.&nbsp;It should be&nbsp;<strong>avoided</strong>&nbsp;in patients with<strong>&nbsp;asthma</strong>&nbsp;and&nbsp;<strong>congestive heart failure</strong>&nbsp;due to bronchoconstriction.</p>\n<p><strong>MgSO4</strong> is used for the <strong>management</strong> of <strong>eclampsia</strong> and as <strong>prophylaxis</strong> in <strong>severe pre-eclampsia</strong>. Magnesium is mainly used in preeclampsia due to its <strong>specific anticonvulsant action</strong> and <strong>neuroprotective action</strong> on the cortex. MgSO4<strong>&nbsp;</strong>acts as a <strong>membrane stabilizer</strong>. It reduces motor endplate sensitivity to acetylcholine and blocks neuronal calcium influx. It is <strong>not</strong> used to <strong>treat&nbsp;hypertension</strong>, although it shows some hypotensive action by decreasing vascular response to vasopressors.</p>\n<p>The therapeutic level of magnesium in eclampsia is<strong>&nbsp;4-7mEq/L.&nbsp;</strong>The two regimens commonly used are<strong> Pritchard</strong> and <strong>Sibai</strong> regimen.</p>\n<table style=\"width: 781px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 38px;\">\n<td style=\"width: 207px; height: 38px;\">Regimen</td>\n<td style=\"width: 284.953px; height: 38px;\">&nbsp; &nbsp;Loading Dose</td>\n<td style=\"width: 263.047px; height: 38px;\">&nbsp; &nbsp;Maintenance Dose</td>\n</tr>\n<tr style=\"height: 61px;\">\n<td style=\"width: 207px; height: 61px;\">Intramuscular (<strong>Pritchard</strong>)</td>\n<td style=\"width: 284.953px; height: 61px;\">&nbsp;4g (20% solution) IV over 3-5 minute<br />&nbsp;followed by 10g (5O%), deep IM<br />&nbsp;(5 gm in each buttock)</td>\n<td style=\"width: 263.047px; height: 61px;\">&nbsp;5g (5O%) IM 4 hourly in the&nbsp; &nbsp;alternate buttocks</td>\n</tr>\n<tr style=\"height: 59.8828px;\">\n<td style=\"width: 207px; height: 59.8828px;\">Intravenous (<strong>Zuspan or Sibai</strong>)</td>\n<td style=\"width: 284.953px; height: 59.8828px;\">&nbsp;4g IV slow over 15-20 minute</td>\n<td style=\"width: 263.047px; height: 59.8828px;\">&nbsp;1-2g/h IV infusion</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A mother has brought her 6-month-old infant to a pediatrician for a regular checkup. She tells her baby's weight was approximately\u00a0double the birth weight at 5 months of age. The baby's weight would be approximately triple the birth weight by the age of:",
    "choices": [
      {
        "id": 1,
        "text": "1 year"
      },
      {
        "id": 2,
        "text": "10 months"
      },
      {
        "id": 3,
        "text": "1.5 years"
      },
      {
        "id": 4,
        "text": "3 years"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The baby's weight would be approximately <strong>triple</strong> the birth weight by the age of&nbsp;<strong>1 year</strong>.&nbsp;<strong>&nbsp;</strong></p>\n<p>Infant weight approximately <strong>doubles</strong>&nbsp;by the age of 5 months, <strong>triples</strong>&nbsp;by 1 year, and is&nbsp;<strong>4 times</strong>&nbsp;by 2 years of age. Infants may lose up to 10% of their birth weight in the 1<sup>st</sup> week of life as a result of excretion of excess extravascular fluid and limited nutritional intake. They regain their birth weight by their 2<sup>nd</sup> week and thereafter gain weight at specific rates at specific age groups.</p>\n<p>The growth and development of a child between the age of&nbsp;<strong>6-12 months</strong><strong>&nbsp;</strong>can be classified as:</p>\n<ul>\n<li class=\"p1\"><strong><strong>Physical Development:&nbsp;&nbsp;</strong></strong>By 12 months of age, birth weight has tripled, length has increased by 50%, and head circumference has increased by 10 cm. A mature pincer grasp occurs and tooth eruption has started to occur. Motor achievements correlate with increasing myelinization and cerebellar growth.</li>\n<li class=\"p1\"><strong>Cognitive Development:&nbsp;</strong>Object permanence appears by 9 months of age. The baby tries to search for a hidden object.</li>\n<li class=\"p1\"><strong><strong>Emotional Development:&nbsp;</strong></strong>Infants may cling or cry anxiously when a stranger approaches, demonstrating stranger anxiety. Separation anxiety can also seen.</li>\n<li class=\"p1\"><strong><strong>Linguistic Development:&nbsp;</strong></strong>Between 8 and 10 months of age, infants produce multisyllabic sounds (&ldquo;ba-da-ma&rdquo;) called<strong> canonical babbling</strong>. Babies can discriminate between languages.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old patient presents with painful swelling in the middle finger around the proximal phalanx. An X-ray was done and it is shown below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Osteosarcoma"
      },
      {
        "id": 2,
        "text": "Ewing's sarcoma"
      },
      {
        "id": 3,
        "text": "Osteoclastoma"
      },
      {
        "id": 4,
        "text": "Enchondroma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above clinical vignette and X-ray findings point toward the diagnosis of\u00a0<strong>enchondroma</strong>.</p>\n<p>Enchondromas are<strong> benign tumors</strong> consisting of a lobulated mass of cartilage\u00a0encapsulated by fibrous tissue. It is more commonly seen in <strong>20 to 30</strong> years of age. Small bones of<strong> hands and feet</strong> are commonly involved followed by the femur and humerus.\u00a0</p>\n<p>The patient usually presents with long-standing <strong>swelling</strong> from one or more phalanges or metacarpals, without much pain. Diagnosis can be done by X-ray, which can show\u00a0<strong>expanding lytic lesions,</strong> occasionally, a biopsy will be required if the diagnosis is unclear. Enchondromas of long bones may undergo malignant transformation into <strong>chondrosarcoma.</strong></p>\n<p>Treatment is removal by<strong> curettage</strong> and it is indicated if there is pain or pathological fracture.</p>\n<p>Other options:</p>\n<p>Option A:\u00a0<strong>Osteosarcoma</strong>\u00a0is the\u00a0most common primary malignancy\u00a0of bone that produces osteoid matrix or mineralized bone. \u00a0X-ray shows<strong>\u00a0periosteal reaction\u00a0</strong>and it may take the form of a\u00a0<strong>Codman's triangle</strong>\u00a0or it may have a\u00a0<strong>sunburst (sunray) appearance\u00a0</strong>as shown below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4d015b7fba5b4c3a9e2af33c441bec04.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ed7bb4b194074bf594b9538f1326a9eex720x765.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d044c62b7d2e4c44b5386632bd8e10f2x720x1363.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ad4a930d9d54475789620cc809f4e743x720x912.JPEG"
    ]
  },
  {
    "text": "You see a middle-aged man presenting to the psychiatry OPD with the clinical features of speaking to himself, hearing two people talk about him, reduced affect, and impaired judgment which is present for more than 6 months. What is your likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Schizophreniform disorder"
      },
      {
        "id": 2,
        "text": "Schizoaffective disorder"
      },
      {
        "id": 3,
        "text": "Schizophrenia"
      },
      {
        "id": 4,
        "text": "Schizoid personality disorder"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient has&nbsp;auditory hallucination, reduced affect, lack of insight, impaired judgment for <strong>more than 6 months</strong>, which makes the diagnosis of&nbsp;<strong>schizophrenia</strong> more&nbsp;likely.</p>\n<p>Diagnostic criteria for schizophrenia (DSM-5):</p>\n<p class=\"p1\">1. The DSM-5 criteria to diagnose schizophrenia require a total duration of <strong>6 months</strong>.</p>\n<p class=\"p1\">2.&nbsp;Within this 6-month period, there must be at least <strong>1 month</strong> of active-phase symptoms (overt psychotic symptoms) where 2 or more of the following have to be present (at least one must be among the a, b, or c):&nbsp;</p>\n<ol style=\"list-style-type: lower-alpha;\">\n<li>Delusion</li>\n<li>Hallucination</li>\n<li>Disorganized speech (or formal thought disorder)</li>\n<li>Disorganized behavior</li>\n<li>Affective flattening or other negative symptoms</li>\n</ol>\n<p class=\"p1\">3. The rest of the 6-month period may include</p>\n<ul>\n<li class=\"p1\">Continuing psychotic symptoms</li>\n<li class=\"p1\">Prodromal symptoms preceding clear-cut psychosis</li>\n<li class=\"p1\">Residual symptoms after the resolution of the psychotic symptoms</li>\n</ul>\n<p>4. Residual symptoms are defined as attenuated forms of psychotic symptoms, such as:</p>\n<ul>\n<li>Odd beliefs</li>\n<li>Magical thinking</li>\n<li>Ideas of reference</li>\n<li>Odd perceptual experiences</li>\n<li>Peculiar or concrete thinking</li>\n<li>Vague speech</li>\n<li>Odd behavior</li>\n<li>Negative symptoms may also be included</li>\n</ul>\n<p>5. Exclusion of mood disorder &amp; substance abuse</p>\n<p>Note:&nbsp;DSM-5 does not require that delusions must be bizarre.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A  patient was given halothane for a surgical procedure. After few minutes, the anaesthetist noticed that he developed rigidity and hyperthermia. Which of the following ions is the reason for the above symptoms?",
    "choices": [
      {
        "id": 1,
        "text": "Sodium"
      },
      {
        "id": 2,
        "text": "Calcium"
      },
      {
        "id": 3,
        "text": "Pottassium"
      },
      {
        "id": 4,
        "text": "Magnesium"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario of rigidity and hyperthermia with halothane suggests the diagnosis of&nbsp;<strong>malignant hyperthermia.</strong> The ion responsible for it is <strong>calcium.</strong></p>\n<p>Malignant hyperthermia is a rare genetic hypermetabolic muscle disease, the characteristic signs, and symptoms of which most commonly appear with exposure to <strong>inhaled anesthetics</strong> or <strong>succinylcholine</strong>.&nbsp;</p>\n<p>The pathophysiology behind the development of malignant hyperthermia is that there is an <strong>uncontrolled increase in intracellular calcium in skeletal muscle</strong>. The sudden release of calcium from the sarcoplasmic reticulum removes the inhibition of troponin, resulting in sustained muscle contraction. Markedly increased ATPase activity results in an uncontrolled hypermetabolic state with significantly increased oxygen consumption &amp; CO2 production, producing severe lactic acidosis and hyperthermia.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 26-year-old male presented with a skin lesion as shown below. Biopsy shows the presence of multiple neutrophilic foci in the stratum corneum. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Psoriasis"
      },
      {
        "id": 2,
        "text": "Atopic dermatitis"
      },
      {
        "id": 3,
        "text": "Pemphigus vulgaris"
      },
      {
        "id": 4,
        "text": "Pemphigus foliaceus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image represents <strong>plaque psoriasis</strong>. The characteristic histopathological finding in psoriasis consists of multiple neutrophilic foci in the parakeratotic stratum corneum i.e <strong>Munro&rsquo;s microabscesses</strong> and&nbsp;spongiform neutrophils in the spinous layer of the epidermis i.e<strong> spongiform pustules of Kogoj</strong>.</p>\n<p>Psoriasis is a chronic inflammatory condition of the skin with systemic manifestations.&nbsp;<strong>Plaque psoriasis</strong> is the most common type. The nails are frequently involved and <strong>punctate pitting</strong> is the most common finding seen.&nbsp;Psoriasis is associated with <strong>Koebner</strong> or <strong>isomorphic phenomenon</strong>. It describes the appearance of new lesions along the site of <strong>trauma</strong> (linear lesions)</p>\n<ul>\n<li>The peak on occurrence is between 16 to 22 years and between 57 to 62 years. They usually present with <strong>itching</strong> and a&nbsp;<strong>papulosquamous rash</strong>.</li>\n<li>The lesions are red, scaly, and have well demarcation from the normal skin.</li>\n<li>They can also be encircled by a clear peripheral zone which is called the <strong>Woronoff ring</strong>.</li>\n<li>They commonly appear in the scalp, trunk, and <strong>extensor surfaces</strong> of the limbs.</li>\n</ul>\n<p>Topical application of <strong>steroids</strong>, retinoids, vitamin D, and <strong>emollients</strong> is the mainstay of management. <strong>Phototherapy</strong> and oral <strong>methotrexate</strong>, <strong>acitretin</strong>, and cyclosporine can also be used.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bb3244c846c24abebf25c16edda37500.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "33 yr old female with fever, weight loss, elevated levels of ACE levels presented with chest X-ray as below. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "TB"
      },
      {
        "id": 2,
        "text": "Sarcoidosis"
      },
      {
        "id": 3,
        "text": "Silicosis"
      },
      {
        "id": 4,
        "text": "Small cell cancer"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical scenario with elevated ACE levels and <strong>bilateral hilar lymphadenopathy</strong> is suggestive of<strong> sarcoidosis</strong>.</p>\n<p>Depending on the stage of sarcoidosis radiological features can range from a normal chest radiograph to pulmonary fibrosis.</p>\n<p>Stage<strong> 0:</strong>&nbsp;Normal chest radiograph.</p>\n<p>Stage<strong> I:</strong>&nbsp;<strong>Hilar or mediastinal nodal enlargement only.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4c34c56ddfe74713aaba30a07963ea15.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8e98d4fc40aa4ba0ab9f1869191fb9c6x1114x1152.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fbb1a2bd7d2749848e0b5d6c65de14adx1124x1164.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5c88f1e2a4524e66a6dfb9c2b2a71396x1280x967.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/44b2bade4a614bb59f8aefeaad5854aax1280x858.PNG"
    ]
  },
  {
    "text": "The dye used for the diagnosis of esophageal perforation:",
    "choices": [
      {
        "id": 1,
        "text": "Gastrograffin"
      },
      {
        "id": 2,
        "text": "Iohexol"
      },
      {
        "id": 3,
        "text": "Gadolinium"
      },
      {
        "id": 4,
        "text": "Barium sulphate"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Iohexol </strong>is the contrast medium used for the diagnostic work up for a suspected case of esophageal perforation&nbsp;<strong>instead of barium contrast</strong> to prevent barium-related inflammation of the mediastinum.</p>\n<p><strong>Note:</strong> Although&nbsp;<strong>Gastrograffin</strong>&nbsp;(water soluble) was used previously, it has high chances of causing aspiration pneumonitis and pulmonary edema consequently. Hence not preferred nowadays.</p>\n<p><strong>Contraindications to use of Barium:</strong></p>\n<ul>\n<li>Tracheo-esophageal fistula: <strong>Dianosil</strong>-water soluble non-ionic agent is used.</li>\n<li>Esophageal perforation: <strong>Iohexol</strong></li>\n<li>Perforation peritonitis:<strong> Gastrograffin / Iohexol</strong></li>\n</ul>\n<p>Plain chest radiography with a water soluble contrast swallow, showing contrast leakage in a patient with spontaneous rupture of the esophagus:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4643e814ca784c89915f369848f551d3x600x420.JPEG"
    ]
  }
];
        let quizName = 'Fmge Mini Test - 13';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>