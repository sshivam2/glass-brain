<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drugs In Obs - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Cerebellum / qBank / Obstetrics & Gynaecology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">10</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "id": 18705,
    "choices": [
      {
        "id": 74780,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Methyldopa and labetalol are contraindicated in pregnancy due to their teratogenic effects. </span></span></span></p>"
      },
      {
        "id": 74781,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Methyldopa and labetalol are safe choices for the management of hypertension during pregnancy</span></span></span></p>"
      },
      {
        "id": 74782,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Methyldopa is safe, but labetalol should be avoided during pregnancy</span></span></span></p>"
      },
      {
        "id": 74783,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Methyldopa and labetalol can cause intrauterine growth restriction (IUGR) and should be used with caution.</span></span></span></p>"
      }
    ],
    "text": "<p style=\"text-align:justify\"><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">A 28-year-old pregnant woman with a history of hypertension presents to the antenatal clinic for a routine check-up. She is currently 24 weeks pregnant, and her blood pressure is well controlled on a combination of methyldopa and labetalol. She is concerned about the potential risks of these medications to her unborn baby. Which of the following statements about the use of methyldopa and labetalol in pregnancy is correct?</span></span></span></p>",
    "unique_key": "Q3869757",
    "question_audio": null,
    "question_video": null,
    "map_id": 18474,
    "difficulty_level": "beginner",
    "subjects_id": [
      14
    ],
    "solution": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ans. B. Methyldopa and labetalol are safe choices for the management of hypertension during pregnancy</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Explanation: </span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Let&#39;s go through each option:</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option A.&nbsp;</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Methyldopa and labetalol are contraindicated in pregnancy due to their teratogenic effects: <strong>This is Incorrect. </strong>They are not contraindicated in pregnancy. </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option B.</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">&nbsp;Methyldopa and labetalol are safe choices for the management of hypertension during pregnancy: <strong>This is Correct</strong>. Methyldopa and labetalol are commonly used antihypertensive medications during pregnancy because they have a well-established safety profile for both the mother and the unborn baby.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option C. </span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Methyldopa is safe, but labetalol should be avoided during pregnancy: This <strong>statement is Incorrect.</strong> Both methyldopa and labetalol are generally considered safe during pregnancy.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option D.</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">&nbsp;Methyldopa and labetalol can cause intrauterine growth restriction (IUGR) and should be used with caution: <strong>This statement INCORRECT.</strong> The benefits of controlling maternal hypertension often outweigh the potential risks of IUGR when these medications are used.</span></span></span></li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Educational Objective</span></strong><span style=\"font-size:12.0pt\">: </span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Anti-hypertensives in pregnancy:</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">DOC in pregnancy</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">: Labetalol (Max oral dose 2400mg/d); can be given IV in emergencies (Max IV dose is 220 mg)</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Alpha methyl dopa</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">: Greatest safety data available, 48 h for onset of action</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Nifedipine:</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"> CCB, short acting, oral (S/l is c/i) used in emergencies</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Hydralazine:</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"> for emergencies, IV</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Diuretics</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">: only if pulmonary edema </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Beta blockers</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">: long term use causes Growth restriction, not preferred</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">ACE inhibitors and ARB</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"> &ndash; Absolute c/I in pregnancy as they cause fetal renal anomalies</span></span></span></li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ref: Page 1846, Williams Obstetrics 26th edition</span></strong></span></span></p>",
    "correct_choice_id": 74781,
    "solution_audio": null,
    "solution_video": null,
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [
      "ClinicalVignette",
      "TreatmentBased"
    ]
  },
  {
    "id": 18709,
    "choices": [
      {
        "id": 74796,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Nifedipine </span></span></span></p>"
      },
      {
        "id": 74797,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Magnesium sulfate</span></span></span></p>"
      },
      {
        "id": 74798,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Terbutaline</span></span></span></p>"
      },
      {
        "id": 74799,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Indomethacin</span></span></span></p>"
      }
    ],
    "text": "<p style=\"text-align:justify\"><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">A 34-year-old pregnant woman with a history of preterm labor is admitted to the hospital at 32 weeks gestation with regular uterine contractions. She is diagnosed with threatened preterm labor and tocolysis is initiated to delay delivery for corticosteroid administration for fetal lung maturity which among the following should not be used? </span></span></span></p>",
    "unique_key": "Q6520570",
    "question_audio": null,
    "question_video": null,
    "map_id": 18478,
    "difficulty_level": "intermediate",
    "subjects_id": [
      14
    ],
    "solution": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ans. D. Indomethacin</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Explanation</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Indomethacin is a nonsteroidal anti-inflammatory drug (NSAID) that inhibits prostaglandin synthesis and reduces uterine contractions. However, its use is contraindicated after 32 weeks gestation due to the risk of premature closure of the ductus arteriosus in the fetus, leading to potential fetal harm. Therefore, it should not be used for tocolysis in this patient.</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Let&#39;s look at the other options:</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option A.</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">&nbsp;<strong>Nifedipine</strong>: Nifedipine is a calcium channel blocker used for tocolysis in some cases of preterm labor. </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option B.</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">&nbsp;<strong>Magnesium sulfate</strong>: Magnesium sulfate is often used for tocolysis, but it is typically preferred when the primary goal is neuroprotection for the preterm infant rather than delaying delivery for corticosteroid administration.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option C.</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">&nbsp;<strong>Terbutaline</strong>: Terbutaline is a beta-agonist that can be used for tocolysis, but it is not the first-line choice in this scenario when the main objective is to delay delivery for corticosteroid administration.</span></span></span></li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Educational Objective:</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\"><img alt=\"\" src=\"https://cerebellum-web-static.s3.amazonaws.com/media/public/images/2024/01/01/screenshot-2024-01-01-112732.jpg\" style=\"height:778px; width:894px\" /></span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ref: Page 2094, Williams Obstetrics 26th edition</span></strong></span></span></p>",
    "correct_choice_id": 74799,
    "solution_audio": null,
    "solution_video": null,
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [
      "ClinicalVignette",
      "TreatmentBased"
    ]
  },
  {
    "id": 18714,
    "choices": [
      {
        "id": 74816,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Maternal hypotension</span></span></span></p>"
      },
      {
        "id": 74817,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Fetal bradycardia </span></span></span></p>"
      },
      {
        "id": 74818,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Uterine rupture </span></span></span></p>"
      },
      {
        "id": 74819,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Cord Prolapse</span></span></span></p>"
      }
    ],
    "text": "<p style=\"text-align:justify\"><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">A 28-year-old woman is in active labor at 40 weeks gestation. Oxytocin is administered to augment her labor progress. Which of the following is NOT a potential adverse effect associated with the use of oxytocin in labor augmentation?</span></span></span></p>",
    "unique_key": "Q8649263",
    "question_audio": null,
    "question_video": null,
    "map_id": 18483,
    "difficulty_level": "intermediate",
    "subjects_id": [
      14
    ],
    "solution": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ans. D. Cord prolapse</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Explanation </span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Adverse effects of oxytocin:</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\"><img alt=\"\" src=\"https://cerebellum-web-static.s3.amazonaws.com/media/public/images/2024/01/01/screenshot-2024-01-01-113149.jpg\" style=\"height:459px; width:1000px\" /></span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Let&#39;s look at each option: </span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12pt\"><strong>Option A.</strong>&nbsp;</span><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"><strong>Maternal hypotension:</strong> Oxytocin can sometimes cause maternal hypotension and tachycardia</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12pt\"><strong>Option B.</strong>&nbsp;</span><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"><strong>Fetal bradycardia</strong>: Fetal bradycardia (abnormally slow heart rate in the fetus) is a potential adverse effect of oxytocin administration. It can occur due to uterine hyperstimulation, which reduces fetal oxygen supply.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12pt\"><strong>Option C.</strong>&nbsp;</span><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"><strong>Uterine rupture</strong>: It is a rare but serious complication associated with oxytocin use, especially when the uterus becomes hyperstimulated. It can lead to a tear or rupture in the uterine wall, which poses significant risks to both the mother and the baby.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12pt\"><strong>Option D.</strong>&nbsp;</span><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"><strong>Cord prolapse:</strong> Cord prolapse occurs when the umbilical cord slips through the cervix and becomes compressed during labor. It is not directly related to the administration of oxytocin but is a potential obstetric emergency that can happen during labor.</span></span></span></li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Educational Objective:</span></strong> </span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:12.0pt\"><span style=\"font-family:&quot;Calibri&quot;,sans-serif\">Adverse effects of oxytocin:</span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:12.0pt\"><span style=\"font-family:&quot;Calibri&quot;,sans-serif\"><img alt=\"\" src=\"https://cerebellum-web-static.s3.amazonaws.com/media/public/images/2024/01/01/screenshot-2024-01-01-113357.jpg\" style=\"height:456px; width:1000px\" /></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ref: Page 1260, Williams Obstetrics 26th edition</span></strong></span></span></p>",
    "correct_choice_id": 74819,
    "solution_audio": null,
    "solution_video": null,
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [
      "ClinicalVignette",
      "TreatmentBased"
    ]
  },
  {
    "id": 18717,
    "choices": [
      {
        "id": 74828,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Oxytocin is discontinued if the number of contractions is &gt; 5 in a 10-minute period or &gt; 7 in a 15-minute period or with a persistent non-reassuring fetal heart rate pattern.</span></span></span></p>"
      },
      {
        "id": 74829,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">The uterus contracts within 3 to 5 minutes of beginning an oxytocin infusion, and a plasma steady state is reached in 40 minutes</span></span></span></p>"
      },
      {
        "id": 74830,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">When oxytocin is stopped, its concentration in plasma falls slowly because the half-life is long</span></span></span></p>"
      },
      {
        "id": 74831,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Oxytocin is started at doses of 0.5 &ndash; 1.5 mIU/ml and gradually increased to a maximum of 48mIU/ml</span></span></span></p>"
      }
    ],
    "text": "<p style=\"text-align:justify\"><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">A 23y primi presents at 38 weeks with prelabor rupture of membranes. Her Bishop&rsquo;s score is 6 and she is induced with oxytocin. Which is incorrect regarding oxytocin?</span></span></span></p>",
    "unique_key": "Q2101812",
    "question_audio": null,
    "question_video": null,
    "map_id": 18486,
    "difficulty_level": "intermediate",
    "subjects_id": [
      14
    ],
    "solution": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ans. C. When oxytocin is stopped, its concentration in plasma falls slowly because the half-life is long</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Explanation:</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Let&#39;s look at each option:</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option A:</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"> Oxytocin is discontinued if the number of contractions is &gt; 5 in a 10-minute period or &gt; 7 in a 15-minute period or with a persistent non-reassuring fetal heart rate pattern.: This statement is correct. Oxytocin is discontinued if there are excessive contractions or if there is a persistent non-reassuring fetal heart rate pattern to ensure the safety of the mother and the baby.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option B:</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"> The uterus contracts within 3 to 5 minutes of beginning an oxytocin infusion, and a plasma steady state is reached in 40 minutes: This statement is correct. Oxytocin typically starts to induce uterine contractions within a few minutes of administration, and it reaches a steady state in plasma relatively quickly.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option C</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">: When oxytocin is stopped, its concentration in plasma falls slowly because the half-life is long: This statement is incorrect. Oxytocin has a very short half-life, typically in the range of 1-6 minutes. Therefore, its concentration in plasma drops rapidly after discontinuation.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option D</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">: Oxytocin is started at doses of 0.5 &ndash; 1.5 mIU/ml and gradually increased to a maximum of 48mIU/ml: statement is generally accurate. Oxytocin is typically started at low doses and gradually increased to achieve the desired uterine contractions while avoiding excessive stimulation.</span></span></span></li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Educational Objective</span></strong><span style=\"font-size:12.0pt\">: Oxytocin is used for labor induction and augmentation, and it should be administered with close monitoring of uterine contractions and fetal well-being. It has a rapid onset of action and short half-life, to ensure safe and effective use during labor.</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Oxytocin is used for induction and augmentation of labor</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">The goal of induction or augmentation is to effect uterine activity sufficient to produce cervical change and fetal descent, while avoiding development of a nonreassuring fetal status. </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">In general, oxytocin is discontinued if the number of contractions persists with a frequency of more than five in a 10-minute period or more than seven in a 15-minute period or with a persistent non-reassuring fetal heart rate pattern. </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">The uterus contracts within 3 to 5 minutes of beginning an oxytocin infusion, and a plasma steady state is reached in 40 minutes</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Oxytocin discontinuation nearly always rapidly lowers contraction frequency. </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">When oxytocin is stopped, its concentration in plasma rapidly falls because the half-life is approximately 3 to 5 minutes. </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Uterine response to oxytocin increases from 20 to 30 weeks&rsquo; gestation and rises rapidly at term. </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"PT-BR\" style=\"font-size:12.0pt\">Oxytocin Regimens:&nbsp; </span></span></span></li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"PT-BR\" style=\"font-size:12.0pt\"><img alt=\"\" src=\"https://cerebellum-web-static.s3.amazonaws.com/media/public/images/2024/01/01/screenshot-2024-01-01-113912.jpg\" style=\"height:317px; width:1000px\" /></span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"PT-BR\" style=\"font-size:12.0pt\">Max dose: 48 mU/min</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ref: Page no 1263, Williams Obstetrics 26th edition</span></strong></span></span></p>",
    "correct_choice_id": 74830,
    "solution_audio": null,
    "solution_video": null,
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [
      "ClinicalVignette",
      "InvestigationBased"
    ]
  },
  {
    "id": 18720,
    "choices": [
      {
        "id": 74840,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">This is an intravaginal oxytocin release system</span></span></span></p>"
      },
      {
        "id": 74841,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">This is an intracervical oxytocin release system</span></span></span></p>"
      },
      {
        "id": 74842,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">This is an intravaginal PGE2 release system</span></span></span></p>"
      },
      {
        "id": 74843,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">This is an intracervical PGE2 release system</span></span></span></p>"
      }
    ],
    "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">What is CORRECT regarding this?</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\"><img alt=\"\" src=\"https://cerebellum-web-static.s3.amazonaws.com/media/public/images/2023/06/12/untitled-363.jpg\" style=\"height:232px; width:300px\" /></span></span></span></p>",
    "unique_key": "Q2272865",
    "question_audio": null,
    "question_video": null,
    "map_id": 18489,
    "difficulty_level": "intermediate",
    "subjects_id": [
      14
    ],
    "solution": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ans. C. This is an intravaginal PGE2 release system</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Explanation:</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\"><img alt=\"\" src=\"https://cerebellum-web-static.s3.amazonaws.com/media/public/images/2023/06/12/untitled-363_GvFaj2c.jpg\" style=\"height:232px; width:300px\" /></span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">This is an intra-vaginal Dinoprostone (PGE2) system</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">It contains 10mg of PGE2 </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Available by the names Cervidil and Propess</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Used for cervical ripening/ induction of labor</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Thin,</span><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"> flat, rectangular polymeric wafer held within a small, white, mesh polyester sac </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">The sac has a long-attached tail to allow easy removal from the vagina. </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">The insert provides slower release of medication&mdash;0.3 mg/hC</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Cervidil is used as a single dose placed transversely in the posterior vaginal fornix. </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Following insertion, the woman remains recumbent for at least 2 hours. </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">The insert is removed after 12 hours or with labor onset and at least 30 minutes before the administration of oxytocin.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">&nbsp;Since the active drug is encased in a mesh sac, one benefit is the ability for removal if fetal heart rate abnormalities or tachysystole develop.</span></span></span></li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Thus, option C: &nbsp;This is an intravaginal PGE2 release system is correct. </span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Educational Objective:</span></strong> </span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><img alt=\"\" src=\"https://cerebellum-web-static.s3.amazonaws.com/media/public/images/2024/01/01/screenshot-2024-01-01-114242_lqllaB7.jpg\" style=\"height:228px; width:300px\" /></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">This is an intra-vaginal PGE2 release system called Propess or Cervidil</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Intravaginal prostaglandin E2 (PGE2) release systems such as Cervidil are used in obstetrics to facilitate cervical ripening and induce labour when medically indicated.</span></span></span></li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ref: Page 1251, Williams Obstetrics 26th edition</span></strong></span></span></p>",
    "correct_choice_id": 74842,
    "solution_audio": null,
    "solution_video": null,
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [
      "Factual",
      "ImageBased"
    ]
  },
  {
    "id": 18722,
    "choices": [
      {
        "id": 74848,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Oxytocin</span></span></span></p>"
      },
      {
        "id": 74849,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Beta mimetics</span></span></span></p>"
      },
      {
        "id": 74850,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Prostaglandins</span></span></span></p>"
      },
      {
        "id": 74851,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Non Steroidal Anti Inflammatory drugs</span></span></span></p>"
      }
    ],
    "text": "<p style=\"text-align:justify\"><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">A 23y primi presents for induction of labor at 41 weeks. Her cervix is unfavourable with a Bishop score of 4. You proceed with cervical ripening using the agent shown below. This medication belongs to which group of drug?</span></span></span></p>\r\n\r\n<p style=\"text-align:justify\">&nbsp;</p>\r\n\r\n<p><span style=\"font-size:12.0pt\"><span style=\"font-family:&quot;Calibri&quot;,sans-serif\"><img alt=\"\" src=\"https://cerebellum-web-static.s3.amazonaws.com/media/public/images/2023/06/12/untitled-364.jpg\" style=\"height:224px; width:300px\" /></span></span></p>",
    "unique_key": "Q7893809",
    "question_audio": null,
    "question_video": null,
    "map_id": 18491,
    "difficulty_level": "beginner",
    "subjects_id": [
      14
    ],
    "solution": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ans. C. Prostaglandins</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Explanation</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">The likely drug shown is misoprostol (PGE1) which is available as a tablet</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Drugs used for induction of labor are</span></span></span>\r\n\t<ul style=\"list-style-type:circle\">\r\n\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Oxytocin: Available as an injection (Given as an IV infusion)</span></span></span></li>\r\n\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Prostaglandins</span></span></span>\r\n\t\t<ul style=\"list-style-type:square\">\r\n\t\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">PGE1 (misoprostol) &ndash; available as a tablet; given vaginally/ orally or sublingually</span></span></span></li>\r\n\t\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">PGE2 (Dinoprostone) &ndash; available as an intra-cervical gel or as a vaginal insert or as an oral tablet</span></span></span></li>\r\n\t\t</ul>\r\n\t\t</li>\r\n\t</ul>\r\n\t</li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Let us look at each option:</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option A.</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"> <strong>Oxytocin</strong>: Oxytocin is used to induce and augment labour once the cervix is favourable. It stimulates uterine contractions during labour but is not typically used for cervical ripening.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option B</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">. Beta mimetics: Beta mimetics are a class of drugs that can be used for tocolysis in certain situations but are not typically used for cervical ripening.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option C.</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"> <strong>Prostaglandins</strong>: Prostaglandins are commonly used for cervical ripening and induction of labor in cases where the cervix is unfavorable, as described in the scenario.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option D.</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"> <strong>Nonsteroidal Anti-Inflammatory Drugs (NSAIDs):</strong> NSAIDs are not typically used for cervical ripening or labor induction. They are primarily used for pain relief and anti-inflammatory purposes.</span></span></span></li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Educational Objective</span></strong><span style=\"font-size:12.0pt\">: Prostaglandins are a group of drugs used for cervical ripening and induction of labor when the cervix is unfavourable, helping to prepare the cervix for labor and delivery. </span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Drugs used for induction of labor are</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Oxytocin: Available as an injection (Given as an IV infusion)</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Prostaglandins</span></span></span>\r\n\t<ul>\r\n\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">PGE1 (misoprostol) &ndash; available as a tablet; given vaginally/ orally or sublingually</span></span></span></li>\r\n\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">PGE2 (Dinoprostone) &ndash; available as an intra-cervical gel or as a vaginal insert or as an oral tablet</span></span></span></li>\r\n\t</ul>\r\n\t</li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ref: JB Sharma&rsquo;s Textbook of Obstetrics 2<sup>nd</sup> edition</span></strong></span></span></p>",
    "correct_choice_id": 74850,
    "solution_audio": null,
    "solution_video": null,
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [
      "Factual",
      "ImageBased"
    ]
  },
  {
    "id": 18723,
    "choices": [
      {
        "id": 74852,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Thrombocytopenia</span></span></span></p>"
      },
      {
        "id": 74853,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Gastritis and bleeding</span></span></span></p>"
      },
      {
        "id": 74854,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Neonatal pulmonary HTN</span></span></span></p>"
      },
      {
        "id": 74855,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Prolonged patency of the ductus arteriosus</span></span></span></p>"
      }
    ],
    "text": "<p style=\"text-align:justify\"><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Which of the following is a neonatal consequence of in utero exposure to non-steroidal anti-inflammatory drugs?</span></span></span></p>",
    "unique_key": "Q4754213",
    "question_audio": null,
    "question_video": null,
    "map_id": 18492,
    "difficulty_level": "difficult",
    "subjects_id": [
      14
    ],
    "solution": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ans. C. Neonatal pulmonary HTN</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Explanation</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Aspirin and other NSAIDs nonspecifically inhibit both cyclooxygenase 1 (COX-1), which is an enzyme critical to normal platelet function, and COX2, which mediates inflammatory response mechanisms. </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">NSAIDs are associated with </span></span></span>\r\n\t<ul style=\"list-style-type:circle\">\r\n\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Early spontaneous abortions</span></span></span></li>\r\n\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Small increased risk of cardiac malformations</span></span></span></li>\r\n\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Ductus arteriosus constriction (Esp if used &gt; 32 weeks)</span></span></span></li>\r\n\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Neonatal pulmonary hypertension</span></span></span><br />\r\n\t\t&nbsp;</li>\r\n\t</ul>\r\n\t</li>\r\n</ul>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Let us look at each option:</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Option A</span></strong><span style=\"font-size:12.0pt\">. <strong>Thrombocytopenia</strong>: Thrombocytopenia (low platelet count) is not typically associated with in utero exposure to nonsteroidal anti-inflammatory drugs (NSAIDs).</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Option B</span></strong><span style=\"font-size:12.0pt\">. <strong>Gastritis and bleeding:</strong> In utero exposure to NSAIDs can lead to fetal complications such as gastroschisis or gastrointestinal bleeding in rare cases. However, these outcomes are less common compared to neonatal pulmonary hypertension.</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Option C.</span></strong><span style=\"font-size:12.0pt\"> &nbsp;<strong>Neonatal pulmonary hypertension (HTN):</strong> Exposure to NSAIDs during pregnancy, particularly in the third trimester, can lead to closure of the fetal ductus arteriosus, which can result in neonatal pulmonary hypertension. </span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12pt\"><strong>Option D.</strong>&nbsp;</span><span style=\"font-size:12.0pt\"><strong>Prolonged patency of the ductus arteriosus</strong>: While NSAIDs can affect the ductus arteriosus in utero, their exposure typically leads to its closure rather than prolonged patency.</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Educational Objective</span></strong><span style=\"font-size:12.0pt\">: In utero exposure to nonsteroidal anti-inflammatory drugs (NSAIDs) after 32 weeks can lead to neonatal pulmonary hypertension due to the closure of the fetal ductus arteriosus</span></span></span></p>\r\n\r\n<p style=\"margin-left:52px\">&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ref: Page 2910, Williams Gynecology 26th edition</span></strong></span></span></p>",
    "correct_choice_id": 74854,
    "solution_audio": null,
    "solution_video": null,
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [
      "DiagnosisBased",
      "Factual"
    ]
  },
  {
    "id": 18724,
    "choices": [
      {
        "id": 74856,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">1, 2</span></span></span></p>"
      },
      {
        "id": 74857,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">1, 2, 3</span></span></span></p>"
      },
      {
        "id": 74858,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">1, 2, 3, 4</span></span></span></p>"
      },
      {
        "id": 74859,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">1, 2, 3, 4, 5</span></span></span></p>"
      }
    ],
    "text": "<p style=\"text-align:justify\"><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Amongst the following drugs used in Rheumatoid Arthritis which should NOT be used in pregnancy?</span></span></span></p>\r\n\r\n<p style=\"text-align:justify\">&nbsp;</p>\r\n\r\n<ol>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Methotrexate</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Leflunomide</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Sulfasalazine</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Hydroxychloroquine</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Etanercept</span></span></span></li>\r\n</ol>",
    "unique_key": "Q9539889",
    "question_audio": null,
    "question_video": null,
    "map_id": 18493,
    "difficulty_level": "difficult",
    "subjects_id": [
      14
    ],
    "solution": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ans. A. 1, 2</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Explanation:</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Among the drugs used for treatment of RA:</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Methotrexate and Leflunomide are completely contra-indicated in pregnancy due to their teratogenic effects (Both are category X)</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Sulfasalazine and Hydroxychloroquine are safe</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Biological DMARDs have revolutionized rheumatoid arthritis treatment. These include the tumor necrosis factor alpha (TNF-&alpha;) inhibitors infliximab, adalimumab, golimumab, certolizumab, and etanercept. Their use in pregnancy is limited, but they appear to be safe for the fetus</span></span></span></li>\r\n</ul>\r\n\r\n<p style=\"margin-left:24px\">&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Thus, option A; 1,2 i.e. methotrexate and Leflunomide should not be used in pregnancy</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Educational Objective</span></strong><span style=\"font-size:12.0pt\">: </span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Methotrexate and leflunomide should not be used in pregnancy due to the risk of serious birth defects. </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Other medications like sulfasalazine, hydroxychloroquine, and etanercept may have different considerations and should be discussed on a case-by-case basis with the patient&rsquo;s healthcare team.</span></span></span></li>\r\n</ul>\r\n\r\n<p style=\"margin-left:24px\">&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ref: Page 2911, Williams Obstetrics 26<sup>th</sup> edition</span></strong></span></span></p>",
    "correct_choice_id": 74856,
    "solution_audio": null,
    "solution_video": null,
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [
      "Factual",
      "TreatmentBased"
    ]
  },
  {
    "id": 18725,
    "choices": [
      {
        "id": 74860,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Starting folic acid is just as beneficial now and she should start immediately</span></span></span></p>"
      },
      {
        "id": 74861,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">The neural tube does not close until 21 weeks so she should start folic acid 4mg/ day in the next few days</span></span></span></p>"
      },
      {
        "id": 74862,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">The neural tube closes by 6 weeks so folic acid needs to be taken before 6 weeks</span></span></span></p>"
      },
      {
        "id": 74863,
        "text": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">Having a prior child with a neural tube defect does not increase her risk so she need not worry</span></span></span></p>"
      }
    ],
    "text": "<p style=\"text-align:justify\"><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">A 29-year-old multigravida presents at 15 weeks gestation to establish prenatal care. The patient&rsquo;s first child had a neural tube defect. The patient did not know that she was pregnant till this week, so she asks you about starting folic acid as she was earlier counselled at the time of her 1<sup>st</sup> pregnancy to take a higher dose of folic acid. Which of the following statements will you mention during counselling?</span></span></span></p>",
    "unique_key": "Q8606770",
    "question_audio": null,
    "question_video": null,
    "map_id": 18494,
    "difficulty_level": "intermediate",
    "subjects_id": [
      14
    ],
    "solution": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ans. C. The neural tube closes by 6 weeks so folic acid needs to be taken before 6 weeks</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Explanation of options:</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option A:</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"> Starting folic acid is just as beneficial now and she should start immediately: Incorrect. While starting folic acid at any point during pregnancy is beneficial for overall fetal development, it is particularly critical to take it before the neural tube closes, which occurs by approximately 6 weeks of gestation.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option B</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">: The next few days: Incorrect. The neural tube closes much earlier, around 6 weeks, so it is essential to start folic acid supplementation before that time.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option C: </span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">The neural tube closes by 6 weeks, so folic acid needs to be taken before 6 weeks: This statement is correct. Folic acid supplementation is most effective in preventing neural tube defects when taken before conception and during the early weeks of pregnancy when the neural tube is forming.</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Option D:</span></strong><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\"> Having a prior child with a neural tube defect does not increase her risk, so she need not worry: Incorrect. A history of a previous child with a neural tube defect does increase the risk for future pregnancies, and women in this situation should take appropriate precautions, including starting folic acid supplementation before conception.</span></span></span></li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Educational Objective: </span></strong>&nbsp;</span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Pre-conceptional Folic Acid should be taken in all women planning to conceive and if not started pre-conceptionally, should be started before 6 weeks of pregnancy (Before the neural tube closes)</span></span></span>\r\n\r\n\t<ul style=\"list-style-type:circle\">\r\n\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">0.04 mg/ day to low risk</span></span></span></li>\r\n\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">4 mg/ day to high risk for neural tube defects &ndash; NTD. Women at high risk for NTD are</span></span></span>\r\n\t\t<ul style=\"list-style-type:square\">\r\n\t\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">H/o previous baby with NTD</span></span></span></li>\r\n\t\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Pre-gestational Diabetes Mellitus&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span></li>\r\n\t\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Folic acid deficiency</span></span></span></li>\r\n\t\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Obesity</span></span></span></li>\r\n\t\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Epilepsy/ on Antiepileptic Drugs (AED)</span></span></span></li>\r\n\t\t\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Hemoglobinopathy</span></span></span></li>\r\n\t\t</ul>\r\n\t\t</li>\r\n\t</ul>\r\n\t</li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><strong><span style=\"font-size:12.0pt\"><span style=\"font-family:&quot;Calibri&quot;,sans-serif\">Ref: Page 491, Williams Obstetrics 26th edition</span></span></strong></p>",
    "correct_choice_id": 74862,
    "solution_audio": null,
    "solution_video": null,
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [
      "ClinicalVignette",
      "TreatmentBased"
    ]
  },
  {
    "id": 18726,
    "choices": [
      {
        "id": 74864,
        "text": "<p><span dir=\"ltr\" lang=\"PT-BR\" style=\"font-size:12.0pt\"><span style=\"font-family:&quot;Calibri&quot;,sans-serif\">For 24 h </span></span></p>"
      },
      {
        "id": 74865,
        "text": "<p><span dir=\"ltr\" lang=\"PT-BR\" style=\"font-size:12.0pt\"><span style=\"font-family:&quot;Calibri&quot;,sans-serif\">For 48 h </span></span></p>"
      },
      {
        "id": 74866,
        "text": "<p><span style=\"font-size:12.0pt\"><span style=\"font-family:&quot;Calibri&quot;,sans-serif\">For 24 h if the BP is &gt; 160/100 mmHg</span></span></p>"
      },
      {
        "id": 74867,
        "text": "<p><span style=\"font-size:12.0pt\"><span style=\"font-family:&quot;Calibri&quot;,sans-serif\">Continue only if the patient has imminent symptoms of eclampsia</span></span></p>"
      }
    ],
    "text": "<p style=\"text-align:justify\"><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span style=\"font-size:12.0pt\">A 35y G4 presents to the emergency with eclampsia at 35 weeks. After initial management, MgSO4 is administered as per Pritchard regime, and she is induced. Following delivery, for how long should the maintenance dose of MGSO4 continue?</span></span></span></p>",
    "unique_key": "Q9209898",
    "question_audio": null,
    "question_video": null,
    "map_id": 18495,
    "difficulty_level": "intermediate",
    "subjects_id": [
      14
    ],
    "solution": "<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ans. A. For 24 h</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Explanation</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">MgSO4 in Eclampsia</span></strong></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Preferred regime is Pritchard&rsquo;s regime: </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">4 g of MgSO4 as a 20% solution @ 1g/ min + 10 g of 50% MgSO4 (5 g in each buttock) f/b maintenance dose of 5 g 50% MgSO4 on alternate buttocks every 4 h till 24 h after delivery/ last convulsion; whichever is later. </span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">If 20% not available, convert 50% to 20% by adding 1.5 times distilled water (1ml of 50% MgSO4 contains 0.5g MgSO4) i.e. to 8ml of 50% MgSO4 + 12ml of distilled water</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Check &ndash; RR, urine output and DTR before administering MgSO4 (Risk of toxicity)</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">1st to disappear in Mg toxicity: DTR</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Other regimes &ndash; Zuspan (Continuous IV regime); higher risk of Mg toxicity if Mg levels unchecked</span></span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Antidote to MgSO4 is Calcium gluconate</span></span></span></li>\r\n</ul>\r\n\r\n<p style=\"margin-left:24px\">&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><span dir=\"ltr\" lang=\"EN-US\" style=\"font-size:12.0pt\">Thus, option A) For 24 hrs. post-delivery &nbsp;is correct.</span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Educational Objective</span></strong><span style=\"font-size:12.0pt\">: In cases of eclampsia, the maintenance dose of magnesium sulfate (MgSO4) is generally continued for 24 hours after delivery /last convulsion whichever is later as a standard practice to prevent the recurrence of seizures during the postpartum period. </span></span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong><span style=\"font-size:12.0pt\">Ref: Page 1840, Williams Obstetrics 26th edition</span></strong></span></span></p>",
    "correct_choice_id": 74864,
    "solution_audio": null,
    "solution_video": null,
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [
      "ClinicalVignette",
      "TreatmentBased"
    ]
  }
];
        let quizName = 'Drugs In Obs';
        const quizFilename = 'drugs-in-obs-65972fed.html';
        let hierarchy = ["Cerebellum", "qBank", "Obstetrics & Gynaecology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>