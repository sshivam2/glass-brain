<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>24 Antidepressant And Antianxiety Drugs - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / qBank / Pharmacology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">26</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following best describes the mechanism of action of antidepressants?",
    "choices": [
      {
        "id": 1,
        "text": "Change in neurotransmitter receptor sensitivity"
      },
      {
        "id": 2,
        "text": "Decrease in level of neurotransmitters"
      },
      {
        "id": 3,
        "text": "Change in efficacy of neurotransmitters"
      },
      {
        "id": 4,
        "text": "Increase the reuptake of neurotransmitters"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Antidepressants increase levels of neurotransmitters at the synapse by preventing their reuptake. Due to a prolonged increase in the levels of neurotransmitters, there is a<strong> change in neurotransmitter receptor sensitivity</strong> which is thought to be the major mechanism responsible for the treatment of depression.</p>\n<p>Chronic treatment with a number of antidepressants <strong>desensitizes presynaptic autoreceptors and heteroreceptors</strong>, producing long-lasting changes in monoaminergic neurotransmission. Postreceptor effects of antidepressant treatment, including modulation of GPCR signaling and activation of protein kinases and ion channels, are involved in the mediation of the long-term effects of antidepressant drugs.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Moclobemide belongs to which class of drugs?",
    "choices": [
      {
        "id": 1,
        "text": "SSRI"
      },
      {
        "id": 2,
        "text": "SNRI"
      },
      {
        "id": 3,
        "text": "MAO inhibitor"
      },
      {
        "id": 4,
        "text": "Tricyclic antidepressant"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The various classes of drugs used in depression and anxiety are listed below:</p>\n<table style=\"width: 373px;\">\n<tbody>\n<tr>\n<td style=\"width: 196px; text-align: center;\"><strong>Class of drugs</strong></td>\n<td style=\"width: 189px; text-align: center;\"><strong>Examples</strong></td>\n</tr>\n<tr>\n<td style=\"width: 196px;\"><strong>Selective serotonin reuptake inhibitors (SSRI)</strong></td>\n<td style=\"width: 189px;\">\n<ul>\n<li>Fluoxetine</li>\n<li>Fluvoxamine</li>\n<li>Paroxetine</li>\n<li>Sertraline</li>\n<li>Citalopram</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 196px;\"><strong>Serotonin-norepinephrine reuptake inhibitors</strong></td>\n<td style=\"width: 189px;\">\n<ul>\n<li>Venlafaxine</li>\n<li>Desvenlafaxine</li>\n<li>Duloxetine</li>\n<li>Milnacipran</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 196px;\"><strong>Tricyclic antidepressants</strong></td>\n<td style=\"width: 189px;\">\n<ul>\n<li>Amitriptyline</li>\n<li>Imipramine</li>\n<li>Nortriptyline</li>\n<li>Desipramine</li>\n<li>Amoxapine</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 196px;\"><strong>Atypical antipsychotics</strong></td>\n<td style=\"width: 189px;\">\n<ul>\n<li>Aripiprazole</li>\n<li>Olanzapine</li>\n<li>Quetiapine</li>\n<li>Risperidone</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 196px;\"><strong>Monoamine oxidase inhibitors (MAO)</strong></td>\n<td style=\"width: 189px;\">\n<ul>\n<li>Isocarboxazid</li>\n<li>Selegiline</li>\n<li>Phenelzine</li>\n<li>Moclobemide</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 196px;\"><strong>Atypical antidepressants</strong></td>\n<td style=\"width: 189px;\">\n<ul>\n<li>Bupropion</li>\n<li>Trazodone</li>\n<li>Mirtazapine</li>\n<li>Mianserin</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a selective MAO-B inhibitor?",
    "choices": [
      {
        "id": 1,
        "text": "Moclobemide"
      },
      {
        "id": 2,
        "text": "Isocarboxazid"
      },
      {
        "id": 3,
        "text": "Phenelzine"
      },
      {
        "id": 4,
        "text": "Selegiline"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Selegiline</strong> is a <strong>selective MAO-B inhibitor</strong>.</p>\n<table style=\"width: 434px; height: 161px;\">\n<tbody>\n<tr style=\"height: 4px;\">\n<td style=\"width: 207.484px; height: 4px; text-align: center;\">\n<p><strong>Nonselective MAO inhibitors</strong></p>\n</td>\n<td style=\"width: 210.516px; height: 4px; text-align: center;\"><strong>&nbsp;Selective MAO inhibitors</strong></td>\n</tr>\n<tr style=\"height: 99px;\">\n<td style=\"width: 207.484px; height: 99px;\">\n<ul>\n<li>Phenelzine</li>\n<li>Isocarboxazid</li>\n<li>Tranylcypromine</li>\n</ul>\n</td>\n<td style=\"width: 210.516px; height: 99px;\">\n<ul>\n<li>MAO-A inhibitors -&nbsp;Moclobemide</li>\n<li>MAO-B inhibitors -&nbsp;Selegiline,&nbsp;Rasagiline</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following patients is transdermal selegiline approved for use?",
    "choices": [
      {
        "id": 1,
        "text": "30-year-old man with obsessive compulsive disorder"
      },
      {
        "id": 2,
        "text": "64-year-old man with Parkinson's disease"
      },
      {
        "id": 3,
        "text": "29-year-old woman with depression"
      },
      {
        "id": 4,
        "text": "33-year-old woman with generalized anxiety disorder"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Selegiline transdermal</strong> patch is <strong>approved</strong> for<strong> depression.&nbsp;</strong>The transdermal patch provides the high concentration required for antidepressant action.&nbsp;At higher doses, MAO-A is also inhibited and is highly effective in depression.&nbsp;</p>\n<p>Selegiline is a selective MAO-B inhibitor at low doses. It is used in Parkinson's disease at low doses, administered orally.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A college student on MAO inhibitor therapy for depression consumed two bottles of beer during a party. The next day he started experiencing severe headache, nausea, and vomiting. He was taken to the casualty by his friends where his BP was recorded to be 180/110mmHg. Which of the following compounds would be responsible for this complication?",
    "choices": [
      {
        "id": 1,
        "text": "Tyramine"
      },
      {
        "id": 2,
        "text": "Tyrptophan"
      },
      {
        "id": 3,
        "text": "Threonine"
      },
      {
        "id": 4,
        "text": "Thiamine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical presentation of a <strong>hypertensive crisis</strong> in a patient on <strong>MAO inhibitor</strong> therapy is suggestive of <strong>cheese reaction</strong>, which is seen after consumption of foods rich in<strong>&nbsp;tyramine </strong>(beer).</p>\n<p>Tyramine is an indirect <strong>sympathomimetic</strong>. It induces the release of catecholamines from the neurons. Tyramine can be produced in high concentrations in <strong>protein-rich foods</strong> by decarboxylation of tyrosine during fermentation.</p>\n<p>Normally tyramine is <strong>inactivated</strong> when taken orally because it is readily metabolized <strong>by MAO</strong> in the liver. In patients who are on&nbsp;<strong>MAO inhibitor therapy</strong>, the tyramine taken in the diet is <strong>not inactivated</strong> and results in its <strong>increased sympathomimetic effect</strong> resulting in elevated blood pressure, termed as hypertensive crisis or cheese reaction. Drug of choice for cheese reaction is <strong>IV phentolamine.</strong></p>\n<p>When MAO inhibitors are taken along with SSRI or TCA, it results in <strong>serotonin syndrome </strong>due to the overstimulation of 5HT receptors. The clinical features are a triad of:</p>\n<ol>\n<li><strong>Cognitive</strong> effect - delirium, coma</li>\n<li><strong>Autonomic</strong> effects- hypertension, tachycardia</li>\n<li><strong>Somatic</strong> effects- myoclonus, hyperreflexia, tremors</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e161466fb10d429f81c37cb0bbc1f784x1280x1437.JPEG"
    ]
  },
  {
    "text": "A patient presents to the medicine OPD with hypertension. He is already on imipramine for depression. Which of the following antihypertensive drugs will not be effective in him?",
    "choices": [
      {
        "id": 1,
        "text": "Enalapril"
      },
      {
        "id": 2,
        "text": "Atenolol"
      },
      {
        "id": 3,
        "text": "Diltiazem"
      },
      {
        "id": 4,
        "text": "Clonidine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Clonidine will not be effective in this patient.</p>\n<p><strong>Imipramine</strong>, a tricyclic antidepressant would <strong>abolish</strong> the <strong>antihypertensive effect</strong> of <strong>clonidine,</strong> by inhibiting its transport into the adrenergic neurons.</p>\n<p>Side effects of tricyclic antidepressants:</p>\n<table style=\"height: 229px; width: 364.765625px;\">\n<tbody>\n<tr>\n<td style=\"width: 145px;\">Receptor blocked</td>\n<td style=\"width: 204.765625px;\">Side effects</td>\n</tr>\n<tr>\n<td style=\"width: 145px;\">Muscarinic receptor</td>\n<td style=\"width: 204.765625px;\">Anticholinergic - Dry mouth, dilated pupils, tachycardia, urinary retention</td>\n</tr>\n<tr>\n<td style=\"width: 145px;\">Alpha 1 adrenergic receptor</td>\n<td style=\"width: 204.765625px;\">Drowsiness, postural hypotension, sexual dysfunction</td>\n</tr>\n<tr>\n<td style=\"width: 145px;\">H1 receptor</td>\n<td style=\"width: 204.765625px;\">Weight gain, drowsiness</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which tricyclic antidepressant has an additional dopaminergic receptor antagonist action?",
    "choices": [
      {
        "id": 1,
        "text": "Clomipramine"
      },
      {
        "id": 2,
        "text": "Doxepin"
      },
      {
        "id": 3,
        "text": "Imipramine"
      },
      {
        "id": 4,
        "text": "Amoxapine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>tricyclic antidepressant</strong> having an&nbsp;<strong>additional dopaminergic</strong> receptor <strong>antagonist</strong> action is <strong>amoxapine</strong>.</p>\n<p>Tricyclic antidepressants block the transporter of norepinephrine (NET) and serotonin (SERT) thereby preventing their uptake. Some of the TCA additionally block other receptors like alpha<sub> 1</sub>, H<sub>1,</sub> and M<sub>1</sub>.</p>\n<ul>\n<li>TCA blocking NET selectively - desipramine, nortriptyline, amoxapine.</li>\n<li>TCA blocking both NET and SERT equally - imipramine, amitriptyline.</li>\n</ul>\n<p>Clomipramine, doxepin, and imipramine are tertiary amines and do not possess any dopaminergic antagonist effect.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following antidepressants can be used for the treatment of a 6-year-old child diagnosed with nocturnal enuresis?",
    "choices": [
      {
        "id": 1,
        "text": "Imipramine"
      },
      {
        "id": 2,
        "text": "Amitriptyline"
      },
      {
        "id": 3,
        "text": "Desipramine"
      },
      {
        "id": 4,
        "text": "Clomipramine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Imipramine</strong> is a tricyclic antidepressant that can be used for the treatment of <strong>nocturnal enuresis</strong>.</p>\n<p>In children above 5 years,<strong> imipramine</strong> 25 mg <strong>at bedtime </strong>is effective for nocturnal enuresis.</p>\n<p>Intranasal desmopressin is also effective in the treatment of nocturnal enuresis.</p>\n<p>Option B:&nbsp;<strong>Amitriptyline</strong> is used in<strong>&nbsp;postherpetic neuralgia</strong>. It is also used in neuropathic pain.</p>\n<p>Option C:&nbsp;<strong>Desipramine</strong> is used in the treatment of <strong>cocaine dependence.</strong></p>\n<p>Option D: <strong>Clomipramine</strong> is the<strong>&nbsp;</strong>best TCA for <strong>OCD.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following side effects of tricyclic antidepressants are correctly matched to the receptor involved in their pathogenesis?",
    "choices": [
      {
        "id": 1,
        "text": "1, 4 and 5"
      },
      {
        "id": 2,
        "text": "1, 2 and 3"
      },
      {
        "id": 3,
        "text": "3, 4 and 5"
      },
      {
        "id": 4,
        "text": "4 and 5 only"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The blockade of&nbsp;<strong>H<sub>1</sub>, alpha<sub>1</sub>,</strong> and<strong>&nbsp;muscarinic</strong>&nbsp;receptors causes <strong>sedation, postural hypotension,</strong> and <strong>constipation</strong> respectively.</p>\n<p>Tricyclic antidepressants (TCAs) are drugs that act by inhibiting the reuptake of noradrenaline and serotonin from the synaptic clefts.</p>\n<p>The side effects of TCAs are due to blockade of other receptors:</p>\n<ul>\n<li><strong>Muscarinic</strong> (M) receptors: constipation, <strong>dry mouth </strong>(not sialorrhea), arrhythmia</li>\n<li>Histamine (<strong>H</strong><sub><strong>1</strong>)</sub> receptors: sedation</li>\n<li><strong>5HT</strong> receptors: <strong>weight gain</strong> due to increased appetite</li>\n<li><strong>Alpha<sub>1</sub></strong> receptors: postural hypotension</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old woman having depression took multiple tablets of amitriptyline in an attempt to commit suicide. Which of the following statements regarding the management is incorrect?",
    "choices": [
      {
        "id": 1,
        "text": "Physostigmine is not recommended"
      },
      {
        "id": 2,
        "text": "Sodium bicarbonate should be administered to treat acidosis"
      },
      {
        "id": 3,
        "text": "Atropine sulphate should be administered as an antidote"
      },
      {
        "id": 4,
        "text": "Diazepam should be injected to control seizures"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Tricyclic antidepressants</strong> like amitriptyline are <strong>competitive antagonists </strong>of <strong>muscarinic receptors. Atropine</strong> being an antimuscarinic drug should <strong>not</strong> be <strong>administered.</strong></p>\n<p>Tricyclic antidepressant overdose presents with&nbsp;<strong>anticholinergic effects</strong>. Hypotension occurs because of alpha<sub>1</sub> receptor blockade.</p>\n<p>TCAs act on Na<sup>+</sup> channels and cause slowed conduction and depressed cardiac contractility resulting in serious arrhythmias. Seizures and agitation may occur followed by depression.</p>\n<p><strong>Management</strong> of TCA overdose:</p>\n<ul>\n<li>Initial resuscitation by securing airway, breathing, and circulation.</li>\n<li>Hypotension -&nbsp;<strong>IV fluids</strong> and norepinephrine infusion.</li>\n<li>Cardiac-depressant effects - bolus dose of <strong>sodium bicarbonate</strong> helps overcome Na<sup>+</sup> blockade by increasing extracellular Na<sup>+</sup>. It also addresses metabolic acidosis which is often present.</li>\n<li>Arrhythmias - <strong>lignocaine</strong> for ventricular arrhythmias.</li>\n<li>Seizures - <strong>benzodiazepines</strong> like diazepam/lorazepam.</li>\n</ul>\n<p><strong>Physostigmine</strong> can reverse anticholinergic effects but can <strong>aggravate cardiac depression</strong> and cause <strong>seizures</strong>. Therefore physostigmine is not recommended<strong>.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A psychiatrist plans to prescribe an SSRI to a patient diagnosed with generalized anxiety disorder. Which of the following was not likely prescribed?",
    "choices": [
      {
        "id": 1,
        "text": "Fluoxetine"
      },
      {
        "id": 2,
        "text": "Citalopram"
      },
      {
        "id": 3,
        "text": "Paroxetine"
      },
      {
        "id": 4,
        "text": "Duloxetine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>D</strong><strong>uloxetine&nbsp;</strong>is not an SSRI but a&nbsp;<strong>serotonin-norepinephrine reuptake inhibitor </strong>(<strong>SNRI</strong>). It blocks the uptake of both serotonin and norepinephrine.&nbsp;</p>\n<p>The selective serotonin reuptake inhibitors (<strong>SSRIs</strong>) are:</p>\n<ul>\n<li>Fluoxetine</li>\n<li>Fluvoxamine</li>\n<li>Citalopram</li>\n<li>Escitalopram</li>\n<li>Sertraline</li>\n<li>Dapoxetine</li>\n<li>Paroxetine</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a middle-aged man with a history of closed-angle glaucoma, which of the following SNRIs should be avoided?",
    "choices": [
      {
        "id": 1,
        "text": "Venlafaxine"
      },
      {
        "id": 2,
        "text": "Duloxetine"
      },
      {
        "id": 3,
        "text": "Desvenlafaxine"
      },
      {
        "id": 4,
        "text": "Fluoxetine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Duloxetine</strong>&nbsp;should be avoided as it is <strong>contraindicated</strong> in patients with&nbsp;<strong>closed-angle glaucoma.&nbsp;</strong>SNRIs like <strong>duloxetine</strong> and <strong>milnacipran</strong> have anticholinergic side effects like <strong>mydriasis</strong>&nbsp;which can precipitate <strong>closed-angle glaucoma</strong> attacks.</p>\n<p>Duloxetine is the longest-acting SNRI with no withdrawal symptoms. I<span class=\"fontstyle0\">n addition to the treatment of depression and anxiety, i</span>t is also used in fibromyalgia, peripheral neuropathy, and stress incontinence.</p>\n<p>Option A: <strong>Venlafaxine</strong>&nbsp;is the shortest acting SNRI with the maximum risk of withdrawal symptoms. It is approved for use in PTSD, panic disorder, and depression associated with hypotension. It is <strong>contraindicated</strong> in pregnancy.</p>\n<p>Option C: <strong>Desvenlafaxine</strong> is a longer-acting SNRI and hence has lesser risk of withdrawal symptoms.</p>\n<p>Option D: <strong>Fluoxetine</strong> is an SSRI, not an SNRI. It is avoided as it can cause mydriasis and narrow the angle.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 27-year-old man on antidepressant therapy with TCAs for the past five years is being switched to SSRIs. Which of the following would not be an advantage of this change?",
    "choices": [
      {
        "id": 1,
        "text": "Minimal lowering of seizure threshold"
      },
      {
        "id": 2,
        "text": "Minimal anticholinergic side effects"
      },
      {
        "id": 3,
        "text": "Minimal sexual dysfunction"
      },
      {
        "id": 4,
        "text": "Minimal sedation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>SSRIs</strong> have a <strong>higher</strong> incidence of <strong>sexual dysfunction </strong>when compared to TCAs.&nbsp;</p>\n<p>SSRI-induced sexual dysfunction can result in loss of libido, delayed ejaculation, and interference with orgasm.</p>\n<p>Option A: The potential of SSRIs to lower the seizure threshold is less than that of TCAs.</p>\n<p>Options B and D: SSRIs have a selective action on serotonin reuptake with no effect on cholinergic or histaminergic receptors.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Selective serotonin reuptake inhibitors are not the drug of choice in which of the following patients?",
    "choices": [
      {
        "id": 1,
        "text": "A college student with an acute panic attack"
      },
      {
        "id": 2,
        "text": "An adolescent girl with social phobia"
      },
      {
        "id": 3,
        "text": "A young lady with post traumatic stress disorder"
      },
      {
        "id": 4,
        "text": "A middle-aged-man with generalized anxiety disorder"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In acute panic attacks, <strong>benzodiazepines</strong> or<strong> propranolol</strong> are the preferred anxiolytics. SSRIs are not the drug of choice as they have a <strong>long latent period </strong>before beneficial effects are seen.</p>\n<p><strong>SSRIs</strong> are considered as the&nbsp;<strong>drug of choice</strong> for:</p>\n<ul>\n<li>Social anxiety disorder</li>\n<li>Post-traumatic stress disorder</li>\n<li>Generalized anxiety disorder</li>\n<li>Obsessive-compulsive disorder</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient diagnosed with depression has improved symptomatically after initiating SSRIs. On discontinuing the drug, he became irritable and complained of insomnia, nausea, and flu-like symptoms. Which of the following drugs has the least risk of causing these symptoms?",
    "choices": [
      {
        "id": 1,
        "text": "Paroxetine"
      },
      {
        "id": 2,
        "text": "Fluoxetine"
      },
      {
        "id": 3,
        "text": "Sertraline"
      },
      {
        "id": 4,
        "text": "Fluvoxamine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical presentation is suggestive of drug discontinuation or<strong> withdrawal symptoms</strong> which are seen after <strong>sudden discontinuation</strong> of SSRIs.&nbsp;<strong>Fluoxetine</strong>&nbsp;has the <strong>least risk</strong> of causing drug-discontinuation symptoms.</p>\n<p>Drug discontinuation symptoms of SSRIs are:</p>\n<ul>\n<li>Nausea</li>\n<li>Paresthesia</li>\n<li>Flu-like symptoms</li>\n<li>Insomnia</li>\n<li>Irritability</li>\n<li>Fatigue.</li>\n</ul>\n<p>Withdrawal is least with fluoxetine as its metabolite <strong>norfluoxetine&nbsp;</strong>has the <strong>longest half-life</strong>.&nbsp;Thus the plasma level of norfluoxetine is maintained for a long time even after stopping the drug, minimizing withdrawal symptoms. Withdrawal is seen<strong>&nbsp;maximum </strong>with <strong>paroxetine.&nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young man with obsessive-compulsive disorder is taking SSRIs. Which of the following adverse effects would you not expect in him?",
    "choices": [
      {
        "id": 1,
        "text": "Diarrhea"
      },
      {
        "id": 2,
        "text": "Nausea"
      },
      {
        "id": 3,
        "text": "Weight loss"
      },
      {
        "id": 4,
        "text": "Loss of libido"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Weight loss </strong>is <strong>not</strong> an adverse effect of <strong>SSRIs</strong>.</p>\n<p>Side effects of SSRIs:</p>\n<ul>\n<li>Nausea and diarrhea\u00a0(early)</li>\n<li>Loss of libido</li>\n<li>Erectile dysfunction</li>\n<li>Headache</li>\n<li>Sleep disturbances - insomnia or hypersomnia.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drugs is a serotonin receptor antagonist?",
    "choices": [
      {
        "id": 1,
        "text": "Milnacipran"
      },
      {
        "id": 2,
        "text": "Trazodone"
      },
      {
        "id": 3,
        "text": "Citalopram"
      },
      {
        "id": 4,
        "text": "Fluoxetine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Trazodone</strong> is a <strong>serotonin receptor antagonist.</strong></p>\n<p>Trazodone <strong>blocks postsynaptic 5HT<sub>2A</sub></strong> receptors and is considered an <strong>atypical antidepressant.</strong> It has weak serotonin reuptake inhibitory effect.</p>\n<p><strong>Nefazodone</strong> is another serotonin receptor antagonist.</p>\n<p>Option A:<strong>&nbsp;</strong>Milnacipran is a serotonin and norepinephrine reuptake inhibitor.</p>\n<p>Options C and D:<strong>&nbsp;</strong>Citalopram and fluoxetine are selective serotonin reuptake inhibitors.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drugs inhibit dopamine and noradrenaline reuptake?",
    "choices": [
      {
        "id": 1,
        "text": "Clozapine"
      },
      {
        "id": 2,
        "text": "Bupropion"
      },
      {
        "id": 3,
        "text": "Zolpidem"
      },
      {
        "id": 4,
        "text": "Mirtazapine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Bupropion</strong> is an <strong>atypical antidepressant</strong> that <strong>inhibits </strong>the <strong>reuptake</strong> of<strong> noradrenaline </strong>and <strong>dopamine.</strong></p>\n<p>Indications of bupropion are:</p>\n<ul>\n<li>Prevention of a seasonal depressive disorder</li>\n<li>Smoking cessation</li>\n<li>ADHD</li>\n<li>Peripheral neuropathy</li>\n</ul>\n<p>Option A :\u00a0\u00a0<strong>Clozapine\u00a0</strong>is an atypical antipsychotic that selectively\u00a0<strong>blocks</strong>\u00a0dopamine (<strong>D4</strong>) receptors in the brain.\u00a0</p>\n<p>Option C :\u00a0<strong>Zolpidem</strong> - It is a\u00a0nonbenzodiazepine hypnotic. It acts as a\u00a0<strong>selective agonist</strong>\u00a0in benzodiazepine receptor.</p>\n<p>Option D :\u00a0Mirtazapine -\u00a0<strong>block</strong>\u00a0histamine (<strong>H<sub>1</sub></strong>) receptors.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young woman diagnosed with major depressive disorder is refractory to first-line antidepressant therapy. The psychiatrist now decides to prescribe a recently approved NMDA antagonist. Which of the following was most likely prescribed?",
    "choices": [
      {
        "id": 1,
        "text": "Brexanolone"
      },
      {
        "id": 2,
        "text": "Esketamine"
      },
      {
        "id": 3,
        "text": "Lurasidone"
      },
      {
        "id": 4,
        "text": "Lemborexant"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>E</strong><strong>sketamine</strong>&nbsp;is an <strong>NMDA antagonist</strong> recently approved for the treatment of <strong>treatment-resistant&nbsp;</strong><strong>depression</strong>.</p>\n<p>Esketamine is a <strong>non-selective, non-competitive antagonist</strong> of the NMDA receptor, an ionotropic glutamate receptor. Though the <strong>exact mechanism</strong> by which it acts as an antidepressant is <strong>unknown</strong>, a single dose of <strong>intranasal Esketamine</strong> has shown to have&nbsp;<strong>short-term antidepressant efficacy</strong> suggesting a possible use in <strong>suicidality</strong>.</p>\n<p>Option A: <strong>Brexanolone</strong> has GABA<sub>A</sub> modulatory action. It is given via intravenous route for <strong>post-partum depression</strong>.</p>\n<p>Option C: <strong>Lurasidone</strong> is a second-generation antipsychotic that is an antagonist at dopamine (D<sub>2</sub>) and serotonin (5-HT<sub>2A</sub>) receptors. It is approved for use in depressive episodes in <strong>bipolar disorder</strong>.</p>\n<p>Option D: <strong>Lemborexant</strong> is an orexin receptor antagonist indicated for the treatment of adult patients with<strong> insomnia</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old married man complains of low energy and lack of motivation. He mentions that he feels useless and has no hope for the future. He is willing to take medication but is apprehensive about its side effects on his sexual life. Which of the following drugs would you prescribe to him?",
    "choices": [
      {
        "id": 1,
        "text": "Fluoxetine"
      },
      {
        "id": 2,
        "text": "Venlafaxine"
      },
      {
        "id": 3,
        "text": "Mirtazapine"
      },
      {
        "id": 4,
        "text": "Imipramine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The various classes of drugs used in depression and anxiety are listed below</p>\n<table style=\"width: 373px;\">\n<tbody>\n<tr>\n<td style=\"width: 196px;\">Class of drugs</td>\n<td style=\"width: 189px;\">Examples</td>\n</tr>\n<tr>\n<td style=\"width: 196px;\">Selective serotonin reuptake inhibitors (SSRI)</td>\n<td style=\"width: 189px;\">\n<ul>\n<li>Fluoxetine</li>\n<li>Fluvoxamine</li>\n<li>Paroxetine</li>\n<li>Sertraline</li>\n<li>Citalopram</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 196px;\">Serotonin-norepinephrine reuptake inhibitors</td>\n<td style=\"width: 189px;\">\n<ul>\n<li>Venlafaxine</li>\n<li>Desvenlafaxine</li>\n<li>Duloxetine</li>\n<li>Milnacipran</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 196px;\">Tricyclic antidepressants</td>\n<td style=\"width: 189px;\">\n<ul>\n<li>Amitriptyline</li>\n<li>Imipramine</li>\n<li>Nortriptyline</li>\n<li>Desipramine</li>\n<li>Amoxapine</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 196px;\">Atypical antipsychotics</td>\n<td style=\"width: 189px;\">\n<ul>\n<li>Aripiprazole</li>\n<li>Olanzapine</li>\n<li>Quetiapine</li>\n<li>Risperidone</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 196px;\">Monoamine oxidase inhibitors (MAO)</td>\n<td style=\"width: 189px;\">\n<ul>\n<li>Isocarboxazid</li>\n<li>Selegiline</li>\n<li>Phenelzine</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 196px;\">Atypical antidepressants</td>\n<td style=\"width: 189px;\">\n<ul>\n<li>Bupropion</li>\n<li>Trazodone</li>\n<li>Mirtazapine</li>\n<li>Mianserin</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which group does the antianxiety drug buspirone belong to?",
    "choices": [
      {
        "id": 1,
        "text": "Partial antagonist of 5-HT 1A"
      },
      {
        "id": 2,
        "text": "Partial agonist of 5-HT 1A"
      },
      {
        "id": 3,
        "text": "Partial antagonist of 5-HT 2A"
      },
      {
        "id": 4,
        "text": "Partial agonist of 5-HT 2A"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The antianxiety drug<strong> buspirone </strong>is a&nbsp;<strong>partial agonist of 5-HT<sub>1A</sub> receptors</strong>. The most important locations of the 5-HT<sub>1A</sub> receptor are raphe nuclei of brainstem and hippocampus.&nbsp;</p>\n<p>It mimics the antianxiety properties of benzodiazepines but <strong>does not interact with GABAA</strong> receptors or display the sedative and anticonvulsant properties of benzodiazepines.&nbsp;Buspirone is primarily used in the treatment of <strong>generalized anxiety disorder</strong>.</p>\n<p>5-HT<sub>1A</sub> partial agonists are:</p>\n<ul>\n<li>Buspirone</li>\n<li>Gepirone</li>\n<li>Ipsapirone</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A psychiatry resident should not prescribe a tricyclic antidepressant to a patient having which of the following co-morbidities?",
    "choices": [
      {
        "id": 1,
        "text": "Essential hypertension"
      },
      {
        "id": 2,
        "text": "Asthma"
      },
      {
        "id": 3,
        "text": "Narrow angle glaucoma"
      },
      {
        "id": 4,
        "text": "Increased intracranial tension"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Tricyclic antidepressants</strong> produce <strong>anticholinergic effects</strong> of pupillary dilatation and are thus, <strong>contraindicated</strong> in<strong> narrow-angle glaucoma.</strong></p>\n<p>Side effects of tricyclic antidepressants:</p>\n<table style=\"height: 218px; width: 353px;\">\n<tbody>\n<tr style=\"height: 18px;\">\n<td style=\"width: 145.203125px; height: 18px;\">Receptor blocked</td>\n<td style=\"width: 191.8125px; height: 18px;\">Side effect</td>\n</tr>\n<tr style=\"height: 37px;\">\n<td style=\"width: 145.203125px; height: 37px;\">Muscarinic receptor</td>\n<td style=\"width: 191.8125px; height: 37px;\">Anticholinergic- dry mouth, dilated pupils, tachycardia, urinary retention</td>\n</tr>\n<tr style=\"height: 36px;\">\n<td style=\"width: 145.203125px; height: 36px;\">Alpha 1 adrenergic receptor</td>\n<td style=\"width: 191.8125px; height: 36px;\">Drowsiness, postural hypotension, sexual dysfunction</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 145.203125px; height: 18px;\">H1 receptor</td>\n<td style=\"width: 191.8125px; height: 18px;\">Weight gain, drowsiness</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old man was admitted to the emergency ward with priapism lasting for about 7 hours. A detailed history revealed the initiation of a drug for a mood disorder by a psychiatrist 3 weeks ago. Which of the following drugs is responsible for his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Trazodone"
      },
      {
        "id": 2,
        "text": "Venlafaxine"
      },
      {
        "id": 3,
        "text": "Bupropion"
      },
      {
        "id": 4,
        "text": "Mirtazapine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Trazadone</strong> causes priapism.&nbsp;Intracavernous injection of phenylephrine can be used to treat priapism.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A man feels frustrated because of his wife's decreased sexual desire. She was recently diagnosed with depression and started on a drug for the same. Which of the following drugs was most likely prescribed?",
    "choices": [
      {
        "id": 1,
        "text": "Fluoxetine"
      },
      {
        "id": 2,
        "text": "Mirtazapine"
      },
      {
        "id": 3,
        "text": "Bupropion"
      },
      {
        "id": 4,
        "text": "Trazodone"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Fluoxetine</strong> is a <strong>selective serotonin reuptake inhibitor</strong> (SSRI) that is associated with the side effect of <strong>sexual dysfunction</strong>.&nbsp;</p>\n<p>Fluoxetine&nbsp;is used in the treatment of major depression, obsessive-compulsive disorder, post-traumatic stress disorder,&nbsp;bulimia&nbsp;and&nbsp;anorexia nervosa, generalized anxiety disorders, and premenstrual dysphoric disorder.</p>\n<p>Other&nbsp;adverse effects include dry mouth, urinary retention, insomnia, GI disturbances, risk of suicidal behavior, and weight gain.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not an adverse effect of escitalopram?",
    "choices": [
      {
        "id": 1,
        "text": "Nausea"
      },
      {
        "id": 2,
        "text": "Vivid dreams"
      },
      {
        "id": 3,
        "text": "Anorgasmia"
      },
      {
        "id": 4,
        "text": "Sialorrhoea"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Sialorrhoea is <strong>not</strong> an adverse effect of escitalopram.</p>\n<p><strong>Escitalopram</strong> is a selective serotonin reuptake inhibitor <strong>(SSRI)</strong> mainly used to treat major depressive disorder or generalized anxiety disorder.</p>\n<p><strong>Nausea</strong> is the<strong> commonest</strong> side effect of SSRIs as they target the 5HT<sub>3</sub> receptor.</p>\n<p><strong>Vivid dreams</strong> may occur because the drug suppresses REM sleep (the stage of dream), hence when patients eventually fall into REM sleep it may be more intense.&nbsp;</p>\n<p><strong>Anorgasmia</strong> is the persistent inability to achieve orgasm despite responding to sexual stimulation. A proposed mechanism of escitalopram causing <strong>sexual dysfunction</strong> involves stimulation of the 5HT<sub>2C</sub> receptors.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In children and adolescents treated with an SSRI, there appears to be an increased risk of particular ideations. Clinicians are therefore advised to remain vigilant of which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Nihilistic ideations"
      },
      {
        "id": 2,
        "text": "Schizotypal ideations"
      },
      {
        "id": 3,
        "text": "Suicidal ideations"
      },
      {
        "id": 4,
        "text": "Homicidal ideations"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Selective serotonin reuptake inhibitors <strong>(SSRIs)</strong> should be used carefully in the <strong>young</strong> for the management of <strong>depression</strong> due to<strong> increased suicidal ideation.</strong> In&nbsp;children and adolescents, there appears to be a slightly increased risk of suicidal ideations and attempts, but not of completed suicide.</p>\n<p><strong>Somatic symptoms</strong> of depression <strong>improve faster</strong> than psychological symptoms when a patient is started on SSRIs and hence patients have the energy to act on their thoughts of deliberate self-harm and suicide <strong>(paradoxical suicide)</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '24 Antidepressant And Antianxiety Drugs';
        let hierarchy = ["Marrow", "qBank", "Pharmacology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>