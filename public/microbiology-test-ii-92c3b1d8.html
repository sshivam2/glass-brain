<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microbiology Test Ii - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Louis Pasteur is associated with all except_________",
    "choices": [
      {
        "id": 1,
        "text": "Development of hot air oven and autoclave"
      },
      {
        "id": 2,
        "text": "Coined term Vaccine"
      },
      {
        "id": 3,
        "text": "Discovery of bacillus of tuberculosis"
      },
      {
        "id": 4,
        "text": "Rabies Vaccination"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Louis Pasteur is not associated with discovery of bacillus of tuberculosis. <strong>Robert Koch</strong> discovered<strong> bacillus of tuberculosis</strong> (Koch's bacillus,1882) and the <strong>cholera vibrio</strong> (1883).</p>\n<p>Contributions of Louis Pasteur (Father of microbiology) are:</p>\n<ul>\n<li>Proposed principles of fermentation</li>\n<li>Introduced sterilization technique and developed steam sterlizers,hot air oven and autoclave</li>\n<li>Described method of pasteurisation of milk</li>\n<li>Postulated germ theory of disease</li>\n<li>Liquid media concept</li>\n<li>Coined the term vaccine</li>\n<li>Founder of Pasteur institute, Paris</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the illumination system in the image below.",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Illumination system/ light source</strong>&nbsp;of microscope is marked as <strong>2</strong>&nbsp;in the image. It is a steady light source used in place of a mirror.</p>\n<p><strong>1</strong> is <strong>objective lens</strong>. There are usually 3 or 4 objective lenses on a microscope. They almost always consist of 4X, 10X, 40X and 100X powers.</p>\n<p><strong>3</strong> is <strong>coarse focusing knob. </strong>It moves the body tubes with its lenses.</p>\n<p><strong>4</strong> is <strong>condenser</strong>. The purpose of the condenser lens is to focus the light onto the specimen.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d507841fe6c94efdb6b3feae26e139a4.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/86a7fa71334c49d2b09ade3d46ae4948x600x641.JPEG"
    ]
  },
  {
    "text": "Mutation where the triplet code is altered so as to specify an amino acid different from that which is  normally located at a particular  position in the protein is  called _____",
    "choices": [
      {
        "id": 1,
        "text": "Missense mutation"
      },
      {
        "id": 2,
        "text": "Transversion"
      },
      {
        "id": 3,
        "text": "Nonsense Mutation"
      },
      {
        "id": 4,
        "text": "Suppressor mutation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Point mutation where the triplet code is altered so as to specify an amino acid different from that normally located at a particular position in the protein is&nbsp; called Missense mutation.</p>\n<p>Option b) Substitution of a purine for a pyramidine and vice versa in base pairing is transversion.</p>\n<p>Option c) Deletion of a nucleotide within a gene may cause premature polypeptide chain termination by generating a&nbsp; nonsense codon. This is known as nonsense mutation.</p>\n<p>Option d) Reversal of a mutant phenotype by another mutation at a position on the DNA, distinct from that of original mutation is called as suppressor mutation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following codon does not terminate the message for synthesis of a polypeptide ?",
    "choices": [
      {
        "id": 1,
        "text": "UAA"
      },
      {
        "id": 2,
        "text": "UAG"
      },
      {
        "id": 3,
        "text": "UGA"
      },
      {
        "id": 4,
        "text": "UUG"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>UUG is genetic code for leucine. It does not terminate the message for synthesis of a polypeptide i.e it is not a stop codon.</p>\n<p><strong>UAA, UAG, UGA</strong> do not code for any amino acid and are called <strong>stop (nonsense) codons</strong>. They act as punctuation marks terminating the message for synthesis of a polypeptide.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following phases of the bacterial growth curve does sporulation occur?",
    "choices": [
      {
        "id": 1,
        "text": "D"
      },
      {
        "id": 2,
        "text": "A"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "B"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Sporulation</strong> occurs in the\u00a0<strong>stationary phase</strong>\u00a0of the bacterial growth curve, which is marked as <strong>C</strong>\u00a0in the image.</p>\n<p>The bacterial growth curve is obtained when a batch of bacteria is seeded in a liquid medium and incubated. It consists of 4 distinct phases:</p>\n<ol>\n<li><strong>Lag</strong> phase (A) - The bacteria adapt to a new environment. They synthesize and accumulate enzymes and metabolic intermediates required for multiplication. Thus, there is no increase in cell number but cell size increases. <strong>Maximum cell size</strong> is obtained towards the end of this phase.</li>\n<li><strong>Log </strong>or\u00a0<strong>exponential </strong>phase<strong>\u00a0</strong>(B) - The bacteria<strong> </strong>start <strong>dividing</strong> and their <strong>numbers increase</strong> exponentially with time. Cells are smaller and stain uniformly. The growth rate is constant.\u00a0</li>\n<li><strong>Stationary </strong>phase<strong> </strong>(C) - There is depletion of nutrients and accumulation of toxic products. Thus, cell division reduces and a state of <strong>equilibrium </strong>is attained, where the number of new cells formed equals the number that die. Growth rate is zero. <strong>Sporulation</strong> occurs during this phase.\u00a0Many bacteria produce secondary metabolic products such as <strong>exotoxins</strong> and <strong>antibiotics.</strong></li>\n<li><strong>Death</strong> phase or the<strong> </strong>phase of<strong> decline\u00a0</strong>(D) - Growth rate is negative. The <strong>population decreases</strong> due to cell death from nutritional exhaustion, toxin accumulation and the action of autolytic enzymes. Involution forms are common.</li>\n</ol>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/eea81ca0bb234241a3a29f89de33fd42.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0c3dcc2e65fe4335a5e221dc2852bfc7x1280x1252.JPEG"
    ]
  },
  {
    "text": "As per spaulding\u2019s  classification endoscopes should be disinfected by ________",
    "choices": [
      {
        "id": 1,
        "text": "Glutaraldehyde"
      },
      {
        "id": 2,
        "text": "Methyl alcohol"
      },
      {
        "id": 3,
        "text": "Ethylene oxide"
      },
      {
        "id": 4,
        "text": "Hibitane"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>As per spaulding&rsquo;s classification, endoscopes should be disinfected by <strong>glutaraldehyde.</strong></p>\n<p>Spaulding&rsquo;s classification has been used to classify the devices used on the patient. It determines the type of method selected for disinfection or sterilisation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c6b2ccd632c6443f9eaf65694c73976ax478x352.JPEG"
    ]
  },
  {
    "text": "Cysteine-, lactose-, electrolyte-deficient (CLED) agar medium is used in preference to MacConkey agar in relation to the culture of organisms involved in urine infection. The reason is that it  ____.",
    "choices": [
      {
        "id": 1,
        "text": "Prevents swarming of proteus"
      },
      {
        "id": 2,
        "text": "Differentiates LF and NLF"
      },
      {
        "id": 3,
        "text": "Allows Staphylococcus and Candida to grow"
      },
      {
        "id": 4,
        "text": "Identifies Psuedomonas"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Cysteine-, lactose-, electrolyte-deficient (CLED) agar promotes the growth&nbsp;<strong>Staphylococcus, Streptococcus, and Candida</strong>.</p>\n<p><strong>CLED agar:</strong>&nbsp;It is used as an alternative to the&nbsp;combination of blood agar and MacConkey agar for the processing of urine specimens.</p>\n<ul>\n<li>Advantages over MacConkey agar: It is less inhibitory than MacConkey agar and supports the&nbsp;growth of gram-positive bacteria (except beta-hemolytic Streptococcus) and Candida.</li>\n<li>Advantages over blood agar: It can prevent the swarming of Proteus.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is an example of prosodemic disease?",
    "choices": [
      {
        "id": 1,
        "text": "Malaria"
      },
      {
        "id": 2,
        "text": "Cerebrospinal fever"
      },
      {
        "id": 3,
        "text": "Hepatitis"
      },
      {
        "id": 4,
        "text": "Cholera"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Creeping or smoldering epidemics that evolve slowly are known as<strong> prosodemic diseases</strong>. Ex:&nbsp;<strong>Cerebrospinal fever.</strong></p>\n<p><strong>Endemic diseases:</strong> Constantly present in a particular area, e.g., malaria in Africa.</p>\n<p><strong>Epidemic diseases:&nbsp;</strong>Occurrence of cases of an illness in a community or region, which is in excess of the normal expectancy. Influenza causes annual winter epidemics in cold countries.</p>\n<p><strong>Pandemic diseases:</strong> Epidemic that spreads through many areas of the world involving a very large number of people within a short period, e.g., influenza, cholera.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with chronic mucocutaneous candidiasis was administered transfer factor as treatment. What type of immunity does this result in?",
    "choices": [
      {
        "id": 1,
        "text": "Active immunity"
      },
      {
        "id": 2,
        "text": "Passive immunity"
      },
      {
        "id": 3,
        "text": "Combined immunity"
      },
      {
        "id": 4,
        "text": "Adoptive immunity"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Adoptive immunity</strong> occurs when <strong>transfer</strong> <strong>factor</strong> is given.</p>\n<p>Transfer factor is composed of an extract of\u00a0<strong>immunologically competent lymphocytes</strong>\u00a0such as<strong>\u00a0</strong>T lymphocytes,\u00a0NK cells, macrophages, or B cells.\u00a0It has the ability to <strong>passively</strong> transfer <strong>cell-mediated immunity</strong> against antigens to which the donor is sensitive.</p>\n<p>It has been attempted in the treatment of lepromatous leprosy and chronic mucocutaneous candidiasis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The smallest unit of antigenicity is called",
    "choices": [
      {
        "id": 1,
        "text": "Epitope"
      },
      {
        "id": 2,
        "text": "Paratope"
      },
      {
        "id": 3,
        "text": "Simple hapten"
      },
      {
        "id": 4,
        "text": "Complex hapten"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The smallest unit of antigenicity is called the&nbsp;<strong>epitope</strong>&nbsp;or&nbsp;<strong>antigenic determinant</strong>. An epitope is defined as a small area present on the antigen that is capable of sensitizing immunocytes and reacting with a specific site of a T-cell receptor or an antibody.</p>\n<p>A<strong> paratope</strong>&nbsp;(option B)is the specific site of an antibody that reacts with the corresponding epitope of an antigen.</p>\n<p><strong>Haptens</strong>&nbsp;are low molecular weight molecules that lack immunogenicity (cannot induce an immune response) themselves. They can become immunogenic by combining with a large molecule carrier. Haptens are classified as:</p>\n<ul>\n<li><strong>Complex haptens&nbsp;</strong>(option D): They contain two or more epitopes and can precipitate with specific antibodies.</li>\n<li><strong>Simple haptens&nbsp;</strong>(option C): They contain only one epitope. They bind to antibodies but are not precipitating.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following antigen is produced by all of the following pathogens except__________.",
    "choices": [
      {
        "id": 1,
        "text": "Staphylococcus aureus"
      },
      {
        "id": 2,
        "text": "Malassezia furfur"
      },
      {
        "id": 3,
        "text": "Rabies virus"
      },
      {
        "id": 4,
        "text": "Enterococcus faecalis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image depicts a <strong>Superantigen</strong>. <em>Enterococcus faecalis</em> does not produce superantigens.</p>\n<p>Superantigens are a third variety of the biological class of antigens that activate a very large number of T cells, irrespective of antigen specificity. This means they can activate T-cells directly <strong>without being processed by antigen-presenting cells</strong> (APCs).</p>\n<ul>\n<li>The variable \u03b2 region of T-cell receptor (v\u03b2 of TCR) appears to be the receptor for superantigens.</li>\n<li>They directly bridge non-specifically between MHC\u2013II of APCs and T-cells.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2b581f1277b24cc3b0961ec73ae52493.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e6d66282550849bcba0a8a8eb65a7798x1280x876.JPEG"
    ]
  },
  {
    "text": "Immunoglobin showing unique property of homocytotropism ______",
    "choices": [
      {
        "id": 1,
        "text": "IgG"
      },
      {
        "id": 2,
        "text": "IgA"
      },
      {
        "id": 3,
        "text": "IgE"
      },
      {
        "id": 4,
        "text": "IgM"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>IgE exhibit unique property of affinity for the surface of tissue cells (particularly mast cells) of the same species(homocytotropism). Only human IgE can fix to the surface of human cells. It is also the only heat labile antibody, gets inactivated at 56 degree in one hour.</p>\n<ul>\n<li>Highest for daily production, half life(23 days), serum concentration &ndash; IgG antibodies.</li>\n<li>Highest for molecular weight, intravascular distribution (blood antibody), sedimentation coefficient(19) &ndash; IgM antibodies.</li>\n<li>Highest carbohydrate content - IgD.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20 yr old male with history of fever  and enlarged lymph nodes and sore throat was suspected to have infectious mononucleosis and was ordered a Paul bunnel test .Which of the following is the principle of the test?",
    "choices": [
      {
        "id": 1,
        "text": "Heterophile agglutination test"
      },
      {
        "id": 2,
        "text": "Neutralization"
      },
      {
        "id": 3,
        "text": "Complement mediated cell damage"
      },
      {
        "id": 4,
        "text": "Agglutination reaction"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Paul-Bunnell test is an example of <strong>hetrophile agglutination test</strong>;done for infectious mononucleosis(caused by Epstein-Barr virus).</p>\n<p>Here animal red blood cell antigens are used to detect cross-reacting antibodies in patient's sera.</p>\n<p>Principle: Based on the presence of sheep cell agglutinins in the sera of infectious mononucleosis patients, which are adsorbed by ox red cells but not by guinea pig kidney extract.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Herediatry angioneurotic edema is associated with deficiency of __________ .",
    "choices": [
      {
        "id": 1,
        "text": "C1 esterase Inhibitor"
      },
      {
        "id": 2,
        "text": "C3b and its regulatory protein"
      },
      {
        "id": 3,
        "text": "C9"
      },
      {
        "id": 4,
        "text": "C3b inactivator"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Deficiency of C1 esterase inhibitor</strong> is associated with <strong>hereditary angioneurotic edema.</strong></p>\n<p>Herediatry angioneurotic edema a condition characterised by <strong>episodic angioedema</strong> of the <strong>subcutaneous</strong> <strong>tissue</strong> or of <strong>mucosa</strong> <strong>of the respiratory or</strong> <strong>alimentary tracts.</strong></p>\n<p>Clinical syndromes associated with genetic deficiencies of complement components ---</p>\n<table style=\"width: 368px;\">\n<tbody>\n<tr>\n<td style=\"width: 144px;\">Deficiency</td>\n<td style=\"width: 216px;\">Syndrome</td>\n</tr>\n<tr>\n<td style=\"width: 144px;\"><strong>C1 esterase inhibitor</strong></td>\n<td style=\"width: 216px;\"><strong>Herediatry angioneurotic edema</strong></td>\n</tr>\n<tr>\n<td style=\"width: 144px;\">Early components of classical pathway C1, C2, C4</td>\n<td style=\"width: 216px;\">SLE and other collagen vascular diseases</td>\n</tr>\n<tr>\n<td style=\"width: 144px;\"><strong>C3 and its regulatory protein</strong></td>\n<td style=\"width: 216px;\"><strong>Severe recurrent pyogenic infections</strong></td>\n</tr>\n<tr>\n<td style=\"width: 144px;\">C5 to C8</td>\n<td style=\"width: 216px;\">Bacterial(Meningococcal infection), mainly with gram negative diplococci, toxoplasmosis</td>\n</tr>\n<tr>\n<td style=\"width: 144px;\"><strong>C9</strong></td>\n<td style=\"width: 216px;\"><strong>No particular disease</strong></td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a  large granular lymphocyte?",
    "choices": [
      {
        "id": 1,
        "text": "Natural killer cell"
      },
      {
        "id": 2,
        "text": "Kupffer cell"
      },
      {
        "id": 3,
        "text": "Antibody dependent cytotoxic cells"
      },
      {
        "id": 4,
        "text": "Lymphokine activated killer"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Kupffer cell is not a large granular lymphocyte. It is a macrophage, phagocytic cells in liver.</p>\n<p>When lymphocytes lack features of both T and B cells, they are called null cells (large granular lymphocytes).</p>\n<ul>\n<li>They are double the size of small lymphocytes.</li>\n<li>Consists of indented nuclei and abundant cytoplasm containing several azurophilic granules.</li>\n<li>The most important member of this group is natural killer cell,others are antibody dependent cytotoxic cells and the lymphokine activated killer cells.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Synergohymenotropic  toxins of staphylococcus consists of:\na) Alpha lysin\nb) Gamma lysin\nc) Beta lysin\nd) Delta lysin\ne) Panton-Valentine toxin",
    "choices": [
      {
        "id": 1,
        "text": "a and e"
      },
      {
        "id": 2,
        "text": "b and e"
      },
      {
        "id": 3,
        "text": "c and e"
      },
      {
        "id": 4,
        "text": "d and e"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Gamma lysin and Panton-Valentine toxin (PVL) are membrane active toxins of\u00a0 staph.aureus that are composed of two components (bicomponent toxins) and together called as <strong>synergohymenotropic toxins</strong>.</p>\n<p>Synergohymenotropic toxins are a family of bicomponent toxins that act through the synergistic activity of 2 non-associated secretory proteins.</p>\n<p>In the case of PVL, these two components are designated protein class S and F, on the basis of their slow or fast elution in cation-exchange carboxy-methyl cellulose chromatography.</p>\n<p>These proteins are encoded by two contiguous and cotranscribed genes, lukS-PV and lukF-PV.</p>\n<p>In S. aureus, gamma-hemolysin is another bicomponent toxin that is encoded by three genes HlgA and HlgC (belonging to class S) and HlgB (belonging to class F).</p>\n<p>This results in 2 pairs of class S and F components - HlgA and HlgB, HlgC and HlgB.</p>\n<p>This is an important characteristic of this class of toxins; various combinations of class S and F components result in different bicomponent toxins. These toxins create lytic pores sensitive to monovalent cations and are assembled from the two components secreted separately by the organism as water-soluble molecules.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient who had been receiving ceftazidime and amikacin via central venous line for a week suddenly spiked a fever. Blood culture is positive for a vancomycin-resistant, catalase-negative organism whose Gram-stained image is given below. Identify the organism.",
    "choices": [
      {
        "id": 1,
        "text": "Staphylococcus aureus"
      },
      {
        "id": 2,
        "text": "Viridans streptococci"
      },
      {
        "id": 3,
        "text": "Enterococcus faecalis"
      },
      {
        "id": 4,
        "text": "Coagulase-negative staphylococcus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most likely organism involved is <em><strong>Enterococcus faecalis</strong>. </em>The image shows\u00a0<strong>gram-positive cocci</strong> in <strong>chains </strong>that are described as\u00a0catalase-negative. This helps rule out\u00a0<em>Staphylococcus aureus </em>and coagulase-negative staphylococcus, which are Gram-positive cocci in clusters. <em>Streptococcus viridans</em><strong> </strong>is usually sensitive to penicillin and vancomycin hence it is ruled out.</p>\n<p>The <em>Enterococci </em>are oval cocci arranged in short chains. They are non-hemolytic. They can cause bacteremia, especially in patients with intravascular catheters. In the USA, they are the <strong>second most common</strong> etiologic agents of <strong>central line-associated bacteremia.</strong> Recently, <strong>vancomycin-resistant enterococci</strong> (VRE) are emerging. This is due to the alteration of <strong>D-alanyl\u2013D-alanine chains</strong> in the cell wall. <strong>Linezolid</strong> is used for the treatment of VRE.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/139fa87efe9341cb8e6f92fa76b9e0d0.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient has history of sexual intercourse with a commercial sex worker 3 days back, has developed genital discharge resembling \u2018flow of seed\u2019 . What medium should be used for culture of discharge material?",
    "choices": [
      {
        "id": 1,
        "text": "Mannitol salt agar"
      },
      {
        "id": 2,
        "text": "Thayer Martin media"
      },
      {
        "id": 3,
        "text": "Pottasium tellurite agar"
      },
      {
        "id": 4,
        "text": "TCBS"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>It&rsquo;s a case suggestive of gonococcal urethritis. The selective medium Thayer martin&nbsp; is used for culture of discharge material.</p>\n<p>Gonorrhea is a disease acquired by sexual contact. The first step in infection is infection of gonococci&nbsp; to urethera or other mucosal surfaces. Pilli are involved in this adhension. The cocci penetrate the intracellular spaces and reach subepithelial tissue by third day of infection.The incubation period is 2-8 days.</p>\n<p>In men -</p>\n<p>Disease starts as acute urethritis with a mucopurulent discharge containing gonococci in large numbers.</p>\n<p>The infection extends along urethera to the prostate, seminal vesicles and epididymis. Chronic urethritis may lead to stricture formation. The infection&nbsp; may spread to tissuses causing abscess and multiple discharging sinuses (watercan perineum).</p>\n<p>In women -</p>\n<p>The intial infection involves urethra and cervix uteri. The vaginal mucosa is not usually affected in adults because of the stratified squamous epithelum and acid PH of vaginal secretions.</p>\n<p>The infection may extend upto bartholins glands, endometrium and fallopian tube. Rarely, peritonitis may develop with perihepatic inflammation, Fitz &ndash;hugh-curtis-syndrome.</p>\n<p>Culture-Transport-Stuart's transport medium</p>\n<p>Acute gonorrhoea cultures can be obtained - chochlate agar OR Mueller-Hinton agar.</p>\n<p>Mixed infections and in lesion such as proctitis - Thayer-Martin.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Chinese restaurant syndrome after eating fried rice and vanilla sauce is due to-",
    "choices": [
      {
        "id": 1,
        "text": "Clostridium perfringes"
      },
      {
        "id": 2,
        "text": "Bacillus cereus"
      },
      {
        "id": 3,
        "text": "Staphylococcus aureus"
      },
      {
        "id": 4,
        "text": "Clostridium botulinum"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Chinese restaurant syndrome after eating fried rice and vanilla sauce is due to bacillus cereus.</p>\n<p>Two types of food poisioning have been associated with B.cereus:</p>\n<p>i) Diarrheic type - associated with a wide range of foods including cooked meat and vegetables. Characterised by diarrhea and abdominal pain, 8-16 hrs after ingestion of contaminated foods.</p>\n<p>Vomiting is not common.</p>\n<p>ii) Emetic type-associated almost exclusively witrh consumption of cooked rice, usually fried rice from Chinese restaurants. The illness is characterised by acute nausea and vomiting 1-5 hours after meal.</p>\n<p>Diarrhea is not common.</p>\n<p>Both type of illness are mild and self limiting, requiring no specific treatment.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which bacterium best exemplifies the information provided in the image?",
    "choices": [
      {
        "id": 1,
        "text": "Mycobacterium tuberculosis"
      },
      {
        "id": 2,
        "text": "Vibrio cholera"
      },
      {
        "id": 3,
        "text": "Leptospira icterohaemmorrhagiae"
      },
      {
        "id": 4,
        "text": "Helicobacter pylori"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image is of typical endoflagella which is a characteristic feature&nbsp; of Spirochetes such as Leptospira, Treponema and Borrelia.</p>\n<p>Endoflagella (axial filament) are the flagella like organelles in the periplasmic space encased by the outer membrane.The endoflagella begin at each end of the organism and wind around it,extending to and overlaping at the midpoint.Inside&nbsp; the endoflagella is the inner membrane (cytoplasmic membrane) that provides osmotic stability and covers protoplasmic cylinder.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fddb7c50e208490a994f82a3955bc42d.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Patient with history of consumption of raw cows milk. LAB investigation reveals gram positive organsims with tumbling motility:",
    "choices": [
      {
        "id": 1,
        "text": "Listeria monocytogenes"
      },
      {
        "id": 2,
        "text": "Coxiella burnetti"
      },
      {
        "id": 3,
        "text": "Bacillus anthracis"
      },
      {
        "id": 4,
        "text": "Closatridia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Listeria monocytogenes is short, non sporing, Gram positive bacillus, exhibiting a characteristic tumbling motility usually results from contact with infected animals, ingestion of contaminated food or milk.</p>\n<p>Control is by preparation of food by washing of vegetables, pasteurisation of milk and thorough cooking.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Clue cells are seen in _______",
    "choices": [
      {
        "id": 1,
        "text": "Trichomonas vaginalis"
      },
      {
        "id": 2,
        "text": "Bacterial vaginosis"
      },
      {
        "id": 3,
        "text": "Candidiasis"
      },
      {
        "id": 4,
        "text": "Herpes"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Clue cells are seen in <strong>bacterial vaginosis.</strong></p>\n<p>Bacterial vaginosis is a polymicrobial infection characterised by a thin, <strong>malodorous vaginal discharge</strong>. Its rotten fish smell accentuated when it is mixed with a drop of KOH solution. The vaginal Ph is more than 4.5.</p>\n<p>Clue cells are epithelial cells whose surface is covered by adherent bacilli and are seen in stained and unstained films.</p>\n<p>Diagnosis made by Nugent&rsquo;s score which is based on the morphocytes of bacteria seen on examining the gram stained smear from discharge.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In syphilis patient , site which does not help in isolation of organism:",
    "choices": [
      {
        "id": 1,
        "text": "Gumma"
      },
      {
        "id": 2,
        "text": "Primary chancre"
      },
      {
        "id": 3,
        "text": "Mucosal patch"
      },
      {
        "id": 4,
        "text": "Maculopapular rash"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In syphilis patient the site which do not help in isolation of organism is Gumma.Gumma is manifestation of tertiary syphilis&nbsp; and tertiary lesion contain very few spirochetes and may represent manifestations of delayed hypersensitivity.</p>\n<p>Primary chancre or hard chancre&nbsp; is&nbsp; a painless, relatively avascular, circumscribed, indurated, superficially ulcerated lesion, the site of entry in primary lesion. They are covered by a thick, glairy exudate rich in spirochetes.</p>\n<p>Mucosal patch, Maculopapular skin rashes are characteristic lesions of secondary syphilis. Its due to widespread multiplication of spirochetes and their dissemination through blood. Spirochetes are abundant in these lesions and patient is more infectious in the secondary stage.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following most likely cause necrotizing enteritis?",
    "choices": [
      {
        "id": 1,
        "text": "Clostridium botulinum"
      },
      {
        "id": 2,
        "text": "Clostridium tetani"
      },
      {
        "id": 3,
        "text": "Clostridium perfringens C"
      },
      {
        "id": 4,
        "text": "Clostridium perfringens A"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Necrotizing enteritis</strong> (<strong>Enteritis necroticans/gas gangrene of the bowel</strong>) is caused by<strong>&nbsp;Clostridium perfringens C.</strong></p>\n<p>It is a fulminating clinical illness characterized by extensive necrosis of the intestinal mucosa and wall. It is caused by &alpha; toxin&ndash; and &beta; toxin-producing strains, mainly by&nbsp;&beta; toxin.</p>\n<p>Immunization with type C toxoid has been shown to protect against this condition.</p>\n<p><strong>Note</strong>:&nbsp;<strong>C. perfringens type A. </strong>causes&nbsp;<strong>Necrotizing enterocolitis.&nbsp;</strong>(This is why option D is wrong)</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Site of action of tetanus toxin :",
    "choices": [
      {
        "id": 1,
        "text": "Presynaptic terminal of spinal cord"
      },
      {
        "id": 2,
        "text": "Postsynaptic terminal of spinal cord"
      },
      {
        "id": 3,
        "text": "Neuromuscular junction"
      },
      {
        "id": 4,
        "text": "Muscle fibers"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Site of action of tetanus toxin is presynaptic terminal of spinal cord.</p>\n<p>C.tetani produces atleast two distinct toxins - a</p>\n<p>Hemolysin (tetanolysin) and a powerful neurotoxin (tetanospasmin).</p>\n<p>Tetanospasmin is toxin responsible for tetanus. It resembles strychnine in its effects. It specifically blocks synaptic inhibition in the spinal cord, presumably at inhibitory terminals that use glycine and GABA as neurotransmitters. The toxin acts pre synaptically unlike strychinine. The abolition of spinal inhibition causes uncontrolled spread of impulses intiated anywhere in central nervous system. This results in muscle rigidity and spasms due to simultaneous contraction of agonists and antagonists, in the absence of reciprocal inhibition.</p>\n<p>Minimum lethal dose for humans - 130 nanograms.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are performing the test shown in the image on a patient. How many days later do you ask the patient to return so that you get an accurate read on the Mitsuda reaction?",
    "choices": [
      {
        "id": 1,
        "text": "3 days"
      },
      {
        "id": 2,
        "text": "10 days"
      },
      {
        "id": 3,
        "text": "20 days"
      },
      {
        "id": 4,
        "text": "30 days"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Mitsuda's reaction</strong> is read in the\u00a0<strong>3<sup>rd</sup> week,</strong> i.e., on the<strong> 21<sup>st</sup> day</strong>\u00a0or <strong>20 days after</strong> the day of injection.</p>\n<p><strong>Lepromin test</strong>\u00a0is\u00a0a skin test for <strong>delayed hypersensitivity</strong> to lepra antigens. It is the only method for studying immunity in leprosy. A bacillary suspension of inactivated M. leprae is injected just under the skin.</p>\n<p>The first reaction to occur is the <strong>early reaction </strong>of<strong> Fernandez</strong>, which consists of <strong>erythema</strong> and <strong>induration</strong> developing in <strong>24-48 hours.</strong> It usually remains for 3-5 days; it is usually poorly defined and carries less significance. The second and more meaningful result is the <strong>late reaction</strong> of <strong>Mitsuda</strong>, starting at 1-2 weeks (7-10 days), reaching a peak in three or four weeks, and gradually subsiding over the\u00a0next few weeks. On the 21st day,\u00a0if there is a <strong>nodule more than 5 mm</strong> in diameter, the reaction is said to be <strong>positive.\u00a0</strong></p>\n<p><strong>Note: </strong>The 21st day is 20 days after the day of injection which is counted as the 1st day.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6171fd900d1b4ad18022772cfd184347.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 20 yr old man presented with hemorrhagic colitis . The stool sample grew escheria coli in pure culture. The following serotype of escheria coli is likely to be causative agent:",
    "choices": [
      {
        "id": 1,
        "text": "O157 : H7"
      },
      {
        "id": 2,
        "text": "O159 : H9"
      },
      {
        "id": 3,
        "text": "O107 : H7"
      },
      {
        "id": 4,
        "text": "O55 : H7"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>E.coli serotype O157:H</strong>7 is associated with enterohemorrhagic E.coli diarrhoea and its complications like fatal hemorrhagic colitis and hemorrhagic uremic syndrome, particularly in young and elderly.</p>\n<p>O157:H7 doesnot ferment sorbitol, unlike most e.coli strains. So the use of <strong>sorbitol Mc Conkey medium</strong> helps in screening for O157 strains.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Farmer presents with the features of high fever, painful inguinal lymphadenopathy, vomiting and diarrhea and hypotension. Which stain will help in diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Neisser stain"
      },
      {
        "id": 2,
        "text": "Wayson\u2019s stain"
      },
      {
        "id": 3,
        "text": "Albert\u2019s stain"
      },
      {
        "id": 4,
        "text": "Mc fadyeans stain"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>It&rsquo;s a case of <strong>bubonic plague</strong>. Microscopically smears from the bubo stained with methylene blue&nbsp;<strong>(Wayson stain</strong>) show the bipolar stained bacilli, resembling a closed safety pin.</p>\n<p>Points in favour of bubonic plague - Farmer: High risk&nbsp; of exposure to rodents.</p>\n<p>So stain should be used to stain the causative agent Y.pestis. The bacilli may be demonstrated in buboes by microscopy, culture or animal inoculation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Vibrio cholerae toxin acts by disrupting  which of these structure?",
    "choices": [
      {
        "id": 1,
        "text": "Hemidesmosome"
      },
      {
        "id": 2,
        "text": "Gap junctions"
      },
      {
        "id": 3,
        "text": "Zona occludens"
      },
      {
        "id": 4,
        "text": "Zona adherens"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Zona occludens</strong> is disrupted by Vibrio Cholerae.</p>\n<p>Vibrio chollerae also produces additional toxins that may contribute to disease, including the zonula occludens toxin (ZOT) that alters intestinal permeability by acting on intestinal epithelial cells tight junctions and the <strong>accessory cholera endotoxin.</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A farmer presenting with fever off and on for past 4 years was diagnosed to be suffering from chronic brucellosis. All of the following serological tests would be helpful in the diagnosis at this point, except?",
    "choices": [
      {
        "id": 1,
        "text": "Standard Agglutination Test"
      },
      {
        "id": 2,
        "text": "2 Mercaptoethanol"
      },
      {
        "id": 3,
        "text": "Complement Fixation Test"
      },
      {
        "id": 4,
        "text": "Coombs Test"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Standard agglutination test</strong> identifies mainly <strong>IgM antibody</strong>, hence they are useful in acute but not in chronic brucellosis.</p>\n<p>In acute brucellosis -Following 7-10 days of infection ,both IgM and IgG appear ,however the IgM antibodies gradually fall and only IgG antibodies persist in chronic brucellosis.</p>\n<p><strong>The complement fixation test</strong> is more useful in chronic cases as it detect the IgG antibody also.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which one of the following vaccines is contraindicated in children with egg allergy?",
    "choices": [
      {
        "id": 1,
        "text": "MMR"
      },
      {
        "id": 2,
        "text": "BCG"
      },
      {
        "id": 3,
        "text": "DPT"
      },
      {
        "id": 4,
        "text": "Yellow fever"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Vaccine contraindicated in children with egg allergy is <strong>Yellow fever vaccine (17 D strain)</strong> prepared in embryonated egg. Other vaccines are <strong>rabies vaccine</strong> (flurry strain), <strong>influenza virus</strong>&nbsp;(Allontoic inoculation is employed for growing the influenza virus for vaccine production).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following statements are true about bacteriophage, except?",
    "choices": [
      {
        "id": 1,
        "text": "It is a virus that infect bacteria"
      },
      {
        "id": 2,
        "text": "It helps in transduction of bacteria"
      },
      {
        "id": 3,
        "text": "It Imparts toxigencity to bacteria"
      },
      {
        "id": 4,
        "text": "It transfers only chromosomal gene"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Bacteriophages</strong> can transfer chromosomal as well as plasmid coded genes.eg. plasmid mediated beta lactamase resistance.</p>\n<p>It is a virus that infects bacteria, imparts toxigenicity to bacteria. It acts as carriers of genes from one bacterium to another by transduction.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 70yr old women refused to take influenza vaccine, developed flu. Death occurred  1 week after pneumonia. Most common cause of Post influenza pneumonia is:",
    "choices": [
      {
        "id": 1,
        "text": "Staphylococcus aureus"
      },
      {
        "id": 2,
        "text": "Measels"
      },
      {
        "id": 3,
        "text": "Legionella"
      },
      {
        "id": 4,
        "text": "Cytomegalovirus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most common cause of post influenza secondary pneumonia are bacterial pathogens such as <strong>staphylococcus aureus,&nbsp;streptococcus pneumoniae,&nbsp; and haemophilus influenza.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a suspected patient of dengue, all of these are acceptable investigations at day 3 of presentation except:",
    "choices": [
      {
        "id": 1,
        "text": "NS1 antigen detection"
      },
      {
        "id": 2,
        "text": "Viral culture and isolation in aedes albopticus c6/36 cell line"
      },
      {
        "id": 3,
        "text": "RT-PCR"
      },
      {
        "id": 4,
        "text": "ELISA for antibody against dengue virus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>At day 3 of presentation <strong>ELISA for antibody</strong> against dengue virus is not done.</p>\n<p><strong>ELISA</strong> is the most recommended test with excellent sensitivity and specificity. It can detect IgM and IgG&nbsp; separately. IgM appears first after 5 days of fever and dissappears within 90 days, followed by IgG on 14-21 days of illness.</p>\n<p><strong>NS1 antigen</strong> becomes detectable from day 1 of fever and remain positive upto 18 days. Its highly specific for dengue.</p>\n<p>Dengue virus can be detected from blood one day before the onset of symptoms by inoculation into mosquito cell line or detection of specific genes of viral RNA by real time RT-PCR.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old man presents with a 2-month history of loose stools and weight loss. Laboratory diagnostic tests are positive for HIV. Detection of which of the following would be most helpful in diagnosing HIV/AIDS?",
    "choices": [
      {
        "id": 1,
        "text": "Lyme disese"
      },
      {
        "id": 2,
        "text": "Glandular fever-like syndrome"
      },
      {
        "id": 3,
        "text": "Oropharyngeal candidiasis"
      },
      {
        "id": 4,
        "text": "Pulmonary tuberculosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>acute HIV syndrome</strong> presents as acute <strong>infectious mononucleosis (glandular fever)-</strong>like syndrome.</p>\n<p>The syndrome is characterized by the following:</p>\n<p>General: fever, pharyngitis, lymphadenopathy, headache, arthralgia/myalgia, weight loss, vomiting/diarrhea &nbsp;&nbsp;&nbsp;&nbsp;</p>\n<p>Neurologic: meningitis, encephalitis, peripheral neuropathy, myelopathy</p>\n<ul>\n<li>Lyme disease is not associated with HIV</li>\n<li>Fungal infections associated with HIV-associated diarrhea are <strong>histoplasmosis, coccidioidomycosis,&nbsp;and penicilliosis</strong>, not oropharyngeal candidiasis.</li>\n<li>Diarrhea in HIV patients is associated with&nbsp;<em>Mycobacterium avium</em>&nbsp;complex (<strong>MAC</strong>)<strong> infection</strong>, but not pulmonary&nbsp;<em>Mycobacterium tuberculosis </em>(MTB) infection.</li>\n</ul>\n<p><strong>Causes of diarrhea</strong> in HIV patients:</p>\n<p>Bacterial: <em>Salmonella</em>, <em>Shigella</em>, <em>Campylobacter</em>, <em>Clostridium difficile</em>, and MAC.</p>\n<p>Parasitic: Cryptosporidium, Microsporidia, Isospora belli</p>\n<p>Fungal: histoplasmosis, coccidioidomycosis, penicilliosis</p>\n<p>Viral: Cytomegalovirus (CMV) colitis</p>\n<p>AIDS enteropathy chronic diarrheal syndrome for which no etiologic agent is found.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman presents with a positive urine pregnancy test 1 month after taking the MMR vaccine. At the time of receiving the vaccine, she had been advised to avoid conception. What advice do you give her now?",
    "choices": [
      {
        "id": 1,
        "text": "Wait and watch"
      },
      {
        "id": 2,
        "text": "Mandatory termination of pregnancy"
      },
      {
        "id": 3,
        "text": "Low risk; termination of pregnancy may be considered"
      },
      {
        "id": 4,
        "text": "High risk; serious consideration for termination"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In this case scenario, the doctor should <strong>advise</strong>\u00a0the patient to <strong>wait </strong>and<strong> watch.</strong></p>\n<p>The MMR vaccine is a<strong> live-attenuated </strong>vaccine against measles, mumps and rubella. The <strong>vaccine</strong> should <strong>not</strong> be <strong>administered</strong> during <strong>pregnancy</strong>. However, some studies of women, who had mistakenly been administered the rubella vaccine (a component of MMR vaccine) during pregnancy, showed that their children did not develop congenital rubella syndrome. Therefore, if pregnancy occurs<strong> within 28 days</strong> of immunization, the patient should be<strong> counselled </strong>on the theoretical risks of the fetus developing congenital rubella syndrome, and <strong>termination</strong> of pregnancy should <strong>not </strong>be<strong> </strong>considered.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the significance of the mucoid strain of Pseudomonas aeruginosa?",
    "choices": [
      {
        "id": 1,
        "text": "More susceptible to antibiotics"
      },
      {
        "id": 2,
        "text": "Produces biofilms"
      },
      {
        "id": 3,
        "text": "Secrete more toxin"
      },
      {
        "id": 4,
        "text": "Produce more bacteriocin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Mucoid strains</strong> of <em><strong>Pseudomonas aeruginosa</strong> </em>are able to produce a<strong> biofilm (or alginate layer)</strong>.</p>\n<p><em>P. aeruginosa</em>&nbsp;is a gram-negative opportunist pathogen. It shows a special feature of developing a&nbsp;<strong>mucoid capsule&nbsp;</strong>in <strong>cystic fibrosis</strong> patients.&nbsp;This complex polysaccharide generates a <strong>biofilm</strong> that&nbsp;provides a hypoxic environment and thereby protects&nbsp;<em>Pseudomonas</em>&nbsp;against antimicrobial agents.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Complement complex that attacks cell membrane is :",
    "choices": [
      {
        "id": 1,
        "text": "C12345"
      },
      {
        "id": 2,
        "text": "C56789"
      },
      {
        "id": 3,
        "text": "C23456"
      },
      {
        "id": 4,
        "text": "C34567"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Complement complex that attack cell membrane(membrane attack complex) is C56789.omplement system.</p>\n<p>The activation and functions of complement system:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/938646a3121b4d979651a236e8519dcbx644x522.PNG"
    ]
  },
  {
    "text": "A patient presented to a STD clinic with painful genital ulcers and soft non indurated enlarged inguinal lymph node . Identify the pathogen:",
    "choices": [
      {
        "id": 1,
        "text": "Haemophilus ducreyi"
      },
      {
        "id": 2,
        "text": "Tre.pallidum"
      },
      {
        "id": 3,
        "text": "Calymmatobacter"
      },
      {
        "id": 4,
        "text": "Herpes"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Painful gential ulcers and painful, soft nonindurated enlarged inguinal lymph nodes are suggestive infection by <strong>Hemophilus ducreyi</strong>, causing soft sore or <strong>chancroid</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following fungal spores are formed by condensation of the hyphal elements?",
    "choices": [
      {
        "id": 1,
        "text": "Arthrospores"
      },
      {
        "id": 2,
        "text": "Conidiospore"
      },
      {
        "id": 3,
        "text": "Basidiospores"
      },
      {
        "id": 4,
        "text": "Ascospores"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Arthrospores</strong> are <strong>asexual spores</strong> that are formed along the mycelium/hyphae by segmentation and <strong>condensation of hyphae</strong>.</p>\n<p>Arthrospores are commonly formed by <strong>dermatophytes</strong>, especially those belonging to the genus <em><strong>Trichophyton</strong></em>. They are also formed by dimorphic fungi like<em><strong>&nbsp;Coccidiodes sp</strong></em>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f07534dddcfb472bb5106736f5279542x563x383.GIF"
    ]
  },
  {
    "text": "A 55-year-old man  came to the hospital with complaints of progressive swelling of his legs. On examination, the following findings are noted. What is the best next step in the management of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "PCR"
      },
      {
        "id": 2,
        "text": "Lymphoscintigraphy"
      },
      {
        "id": 3,
        "text": "Night blood test for worms"
      },
      {
        "id": 4,
        "text": "Lymphangiography"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Progressive swelling of the legs with non-pitting edema and thickening of the overlying skin (image) is suggestive of <strong>lymphatic</strong>\u00a0<strong>filariasis </strong>(elephantiasis)<strong>.</strong>\u00a0The best next step would be to test the <strong>night blood</strong> for<strong> worms</strong> since the filarial species is nocturnally periodic (between 10 pm and 4 am) in India.</p>\n<p><strong>Lymphatic\u00a0filariasis</strong> is caused by\u00a0<strong><em>Wuchereria bancrofti</em></strong> and\u00a0<strong><em>Brugia malayi</em></strong>. There is obstruction of lymph vessels by adult worms, resulting in lymphangitis and leakage of lymph into tissues, resulting in hard pitting lymphedema. Fibrous tissue is laid down in tissues due to repeated lymphedema, resulting in non-pitting elephantiasis. <strong>Diethylcarbamazine</strong> is the drug of choice.</p>\n<p>Other options:\u00a0</p>\n<p>Option A: PCR is negative in chronic\u00a0filariasis.</p>\n<p>Options B &amp; D: Lymphangiography and lymphoscintigraphy are used to assess the extent of lymphatic damage after the diagnosis of filariasis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/488f4bdd18504a6a86ea27ffdd12713c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A man complains  of pain abdomen ,jaundice with increased alkaline phosphatase and conjugated hyperbilirubinemia :USG shows blocade of biliary tree. What would be the cause?",
    "choices": [
      {
        "id": 1,
        "text": "Fasciola buski"
      },
      {
        "id": 2,
        "text": "Strongyloides"
      },
      {
        "id": 3,
        "text": "Clonorchis sinensis"
      },
      {
        "id": 4,
        "text": "Gnathostoma spinigerum"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The findings are suggestive of infection with <strong>Clonorchis sinensis</strong>.</p>\n<p>Patients in early stage have fever, epigastric pain, diarrhea and tender hepatomegaly. This is followed by biliary colic,jaundice and progressive liver enlargement.</p>\n<p>Chronic infection may result in <strong>calculus formation</strong>. It is also linked with cholangiocarcinoma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Raynaud Braude phenomenon is seen in:",
    "choices": [
      {
        "id": 1,
        "text": "Candida albicans"
      },
      {
        "id": 2,
        "text": "Candida pscitasi"
      },
      {
        "id": 3,
        "text": "Histoplasma"
      },
      {
        "id": 4,
        "text": "Cryptococcus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Raynaud braude phenomenon</strong>&nbsp;is other name of <strong>positive germ tube test</strong> usually seen in Candida albicans, rarely by Candida dubliniensis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The organism which cannot be grown on artificial media is:",
    "choices": [
      {
        "id": 1,
        "text": "Rhinosporidum seeberi"
      },
      {
        "id": 2,
        "text": "Penicillium marneffei"
      },
      {
        "id": 3,
        "text": "Aspergillus flavus"
      },
      {
        "id": 4,
        "text": "Sporothrix schenckii"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p style=\"text-align: justify;\"><strong>Rhinosporidum seeberi</strong> cannot be grown on artificial media; however, it grows in vivo in epithelial carcinoma cell culture lines.</p>\n<p>Non cultivable fungi &ndash; Pneumocystis jirovecii and Locazia.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The (1,3)-\u03b2-D- Glucan pan fungal detection assay is useful in the diagnosis of which one of the following infection?",
    "choices": [
      {
        "id": 1,
        "text": "Rhinosporidiosis"
      },
      {
        "id": 2,
        "text": "Invasive candidiasis"
      },
      {
        "id": 3,
        "text": "Mucormycosis"
      },
      {
        "id": 4,
        "text": "Cryptococcal meningitis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>(1,3)-&beta;-D- Glucan pan fungal detection assay is helpful for identification of <strong>invasive candidiasis</strong>.It is a component of the cell walls of most fungi. The main exceptions are Mucorales (rhizopus,mucor,absidia) and cryptococci ,which release no or little BG to be detected in human serum.</p>\n<p>Beta -(1,3)-d-glucan levels <strong>greater than or equal to&nbsp; 80 pg/mL are positive and associated with invasive candidiasis</strong>&nbsp;, aspergillosis,dimorphic pathogens and other mycoses.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A girl  goes diving in a village pond with her friend and then develops nasal discharge, meningitis and dies in 5 days. Organism responsible is:",
    "choices": [
      {
        "id": 1,
        "text": "Naegleria fowleri"
      },
      {
        "id": 2,
        "text": "Acanthamoeba"
      },
      {
        "id": 3,
        "text": "Toxoplasma"
      },
      {
        "id": 4,
        "text": "P. falcipuram"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The organism is <strong>Naegleria fowleri</strong> which is the only species which infects man.</p>\n<p>Its a pathogenic free living amoebae which causes the disease <strong>primary amoebic meningiencephalitis(PAM)</strong></p>\n<p>Naegleria fowleri:</p>\n<ul>\n<li>Patients are mostly previously healthy young adults or children,&nbsp;infection comes from water containing free living amoeba and usually follows swimming or diving in ponds.</li>\n<li>The&nbsp; amoeba invade the nasal mucosa and pass through the olfactory nerve branches in the cribriform plate into the meninges&nbsp; and&nbsp; brain&nbsp; to initiate an acute purulent meningitis and encephalitis (PAM).</li>\n<li>The incubation period varies from 2 days to 2 weeks.</li>\n<li>In the incubation period ,the patient experiences anosmia,&nbsp;disease advances rapidly ,causing fever ,headache,vomiting ,stiff neck ,ataxia,seizure and coma and&nbsp;ends fatally within a Week.(average 5 days).</li>\n</ul>\n<p>Treatment -</p>\n<p>Drug of choice is amphotericin -B intravenously.It can also be instilled directly into the brain.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Disease caused by staphylocococcus aureus which is not mediated through a toxin is:",
    "choices": [
      {
        "id": 1,
        "text": "Septicemic shock"
      },
      {
        "id": 2,
        "text": "Food poisioning"
      },
      {
        "id": 3,
        "text": "Toxic shock syndrome"
      },
      {
        "id": 4,
        "text": "Staphylococcal scalded skin syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Septicemic shock</strong> is not directly caused by toxins and other virulence factors play a role like protein A,fibrinolysin and coagulase,which are anti-phagocytic ,suppress host immunity and helps in&nbsp; spread of infection. Septicemia is mainly due to endotoxin like activity as seen in gram negative bacilli and not due to exotoxin.</p>\n<p>The common toxin mediated staphylococcal diseases are as follows: Food poisioning ,toxic shock syndrome,scalded skin syndrome.</p>\n<p>Toxins of staphylococcus Aureus :</p>\n<ul>\n<li>Cytolytic toxins:alpha hemolysin- leukocidal and neurotoxic, beta hemolysin-exhibits hot-cold phenomena,delta&nbsp; hemolysin -diarrheal diseases , detergent like effect,leukocidin - induce apoptosis.</li>\n<li>Enterotoxins (A,B,C1-3,D,E ,H):responsible for food poisioning .</li>\n<li>Toxic shock syndrome toxin:most common enterotoxin F &gt;enterotoxin B</li>\n<li>Exfoliative /epidermolytic toxin:causes epidermolysis and scalded skin syndrome.</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which the following filarial worms are non-pathogenic to humans?",
    "choices": [
      {
        "id": 1,
        "text": "Onchocerca volvulus"
      },
      {
        "id": 2,
        "text": "Brugia malayi"
      },
      {
        "id": 3,
        "text": "Wuchereria bancrofti"
      },
      {
        "id": 4,
        "text": "Mansonella ozzardi"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><em><strong>Mansonella ozzardi</strong></em>\u00a0is generally <strong>non-pathogenic </strong>to\u00a0humans.<strong>\u00a0</strong></p>\n<p>Option A: <strong><em>Onchocerca volvulus</em></strong>\u00a0infection may manifest as skin nodules or onchocercoma which are formed as a result of fibroblastic reaction around adult worms deep in the subcutaneous tissues. Microfilariae cause\u00a0lesions in the skin and eyes.</p>\n<p>Options B and C: In lymphatic filariasis (<em><strong>Wuchereria</strong> </em>and <strong><em>Brugia</em></strong>)<strong><em>,</em></strong>\u00a0the typical manifestations are caused by the adult worms blocking lymph nodes and vessels. Microfilaria (larval form) are responsible for allergic manifestations seen in occult filariasis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An orthopedician is performing the following procedure to visualize the anterior cruciate ligament in a patient. Which of the following will be used to sterilise the instrument used?",
    "choices": [
      {
        "id": 1,
        "text": "Ethylene oxide"
      },
      {
        "id": 2,
        "text": "Gamma rays"
      },
      {
        "id": 3,
        "text": "Hydrogen peroxide"
      },
      {
        "id": 4,
        "text": "Ultraviolet rays"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image shows arthroscopy being performed. <strong>Arthroscopes</strong> are sterilized using <strong>plasma sterilization\u00a0</strong>which utilises <strong>hydrogen peroxide.\u00a0</strong></p>\n<p>In plasma sterilisation,<strong> radiofrequency energy</strong> is applied to create an <strong>electromagnetic field</strong> through which hydrogen peroxide vapours are passed. This generates <strong>plasma</strong> which<strong> </strong>contains <strong>free radicals</strong> of hydrogen and oxygen. Plasma denatures all organisms and is used\u00a0sterilize<strong> arthroscopes</strong> and <strong>ureteroscopes</strong>.\u00a0Sterilization control is monitored by <em>Geobacillus stearothermophilus</em> and\u00a0<em>Bacillus atrophaeus.\u00a0</em></p>\n<p>Option A: <strong>Ethylene oxide</strong> has both microbicidal and sporicidal activity. It is used for sterilisation heat-sensitive equipment like heart-lung machines, respirators, suture materials etc. Sterilization control is monitored by <em>Bacillius atrophaeus</em> and <em>Bacillus subtilus.</em></p>\n<p>Option B:<strong> Gamma rays</strong> cause breakage of DNA. It destroys spores and vegetative cells, but is not effective against viruses. It is referred to as cold sterilisation and is used in commercial plants to sterilize plastics, syringes, swabs. Sterilization control is monitored by <em>Bacillus pumilius</em>.\u00a0</p>\n<p>Option D: <strong>Ultraviolet rays</strong> are used to sterilise biosafety cabinets, entryways, operation theatres and laboratories.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/07713fe813f44bdab8c336a521cb14ff.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Pasteurized milk is most commonly tested by:",
    "choices": [
      {
        "id": 1,
        "text": "Phosphatase test"
      },
      {
        "id": 2,
        "text": "Standard plate count"
      },
      {
        "id": 3,
        "text": "Methylene blue red test"
      },
      {
        "id": 4,
        "text": "Coliform count"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The effectiveness of pasteurization of milk is most commonly tested by <strong>Phosphatase test.</strong></p>\n<p>The phosphatase test evaluates the effectiveness of pasteurization in milk by detecting the presence of <strong>alkaline phosphatase</strong>, an enzyme found in <strong>raw milk</strong>. At 60 deg C for 30 mins, this enzyme is usually destroyed. A <strong>positive</strong> result, indicated by enzyme activity, suggests <strong>inadequate pasteurization</strong> or <strong>addition of raw milk.</strong></p>\n<p>Other methods of bacteriological examination of milk-</p>\n<ul>\n<li><strong>Methylene Blue Reduction Test</strong>:\u00a0 It is a microbiological assay used to evaluate the<strong> bacterial load </strong>in milk by measuring the time taken for the methylene blue dye to be reduced to colorless due to microbial activity. A <strong>shorter</strong> reduction time indicates a<strong> higher </strong>level of <strong>microbial contamination</strong>, suggesting that the milk may not be of acceptable quality for consumption. It is <strong>primarily </strong>done for <strong>raw milk</strong> for gross contamination i.e. pre-pasteurization but can also be done for pasteurized milk for post-pasteurization contamination(Option C)</li>\n<li><strong>Standard Plate count:</strong> It is done for <strong>bacteriological quality</strong> of pasteurized milk. The current standards include <strong>&lt;30000 colonies/ml</strong> in pasteurized milk. (Option B)</li>\n<li><strong>Coliform count</strong> : Usually, coliform bacteria should be <strong>absent</strong> in <strong>pasteurized milk</strong>. Hence, their presence in the milk is suggestive of improper pasteurization or post-pasteurization contamination due to<strong> fecal contamination.</strong> (Option D)</li>\n<li><strong>Turbidity test</strong>: The turbidity test assesses <strong>milk sterilization</strong> by boiling the milk to precipitate heat-coagulable proteins, followed by the addition of ammonium sulfate and filtration. A clear filtrate indicates successful sterilization, distinguishing sterilized milk from pasteurized milk, which may show some turbidity due to residual microorganisms.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Microbiology Test Ii';
        const quizFilename = 'microbiology-test-ii-92c3b1d8.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>