<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>53 Pathology Of Female Genital Tract-I - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Pathology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">11</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>Which of the following is not a part of the vaginal epithelium?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Superficial squamous cells"
      },
      {
        "id": 2,
        "text": "Intermediate squamous cells"
      },
      {
        "id": 3,
        "text": "Columnar cells"
      },
      {
        "id": 4,
        "text": "Parabasal cells"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Columnar cells</strong>.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Layers of <span class=\"customMeta\" data-dictid=\"9a1e50b8221692777201b95b66c9de\">vaginal</span> epithelium:</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:656px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Cells</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Functions</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Superficial layer</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\">It forms the outermost protective barrier, eventually shed from the surface.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Intermediate layer</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Provide structural support to the <span class=\"customMeta\" data-dictid=\"53782f88d31692777187177cb73b24\">epithelium</span> and contribute to the <span class=\"customMeta\" data-dictid=\"facd67f6341692777200653d383689\">thickness</span> and <span class=\"customMeta\" data-dictid=\"b11364e7ed169277719777251a2bfe\">resilience</span> of the <span class=\"customMeta\" data-dictid=\"9a1e50b8221692777201b95b66c9de\">vaginal</span> tissue.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Parabasal layer</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Serve as transitional cells between the <span class=\"customMeta\" data-dictid=\"923af580cf16927771829606bce2a7\">basal</span> and <span class=\"customMeta\" data-dictid=\"cf8f491dba169277719075ce2b5594\">intermediate</span> layers, reflecting ongoing epithelial <span class=\"customMeta\" data-dictid=\"a13747deff16927772016cfbf6b284\">turnover</span> and differentiation.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Basal layer</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Mitotically active and serves as the regenerative source for the epithelium.</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><br />\n<br />\n\u00a0</p>\n\n<p>\u00a0</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Jpogi\" data-hash=\"\" data-license=\"Public domain\" data-source=\"https://commons.wikimedia.org/wiki/File:Vagina_(mucosa).JPG\" data-tags=\"\" height=\"361\" src=\"https://image.prepladder.com/content/2sPJAsnjjXQ9BK4KO0ka1736994464.png\" width=\"500\" /></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/2sPJAsnjjXQ9BK4KO0ka1736994464.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/QSLvmfQrNO3IBtNcDVdY1751443986.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/YxvHgu4L53yeUv223ItZ1751444027.mp3"
  },
  {
    "text": "<p>Which strain of the HPV virus is responsible for causing Condyloma acuminatum?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Nephron\" data-hash=\"\" data-license=\"CC BY SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Condyloma_acuminatum_-_intermed_mag.jpg\" data-tags=\"\" height=\"338\" src=\"https://image.prepladder.com/content/dOqrNJicBbhPMk2x2R5J1736994627.png\" width=\"500\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "HPV 6 & 11"
      },
      {
        "id": 2,
        "text": "HPV 16 & 18"
      },
      {
        "id": 3,
        "text": "HPV 6 & 16"
      },
      {
        "id": 4,
        "text": "HPV 11 & 18"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer:</strong> <strong>A) <span class=\"customMeta\" data-dictid=\"6bca6e988d1692777189167b791930\">HPV</span> 6 and 11.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>Histopathology image suggests <span class=\"customMeta\" data-dictid=\"7ab4ca4b6116927771849356a0f8d2\">Condylomata</span> acuminata, which are <span class=\"customMeta\" data-dictid=\"1bbae82f1f16927771824f797639fa\">benign</span> <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">genital</span> warts caused by low-risk <span class=\"customMeta\" data-dictid=\"6bca6e988d1692777189167b791930\">HPV</span> 6 and 11, a double-stranded DNA virus that infects differentiated <span class=\"customMeta\" data-dictid=\"5be0ee4ea316927771997104326685\">squamous</span> epithelial cells.</p>\n\n<ul>\n\t<li>It is sexually transmitted and is characterized by multiple, raised, <span class=\"customMeta\" data-dictid=\"384d0cc3641692777202e927a4d222\">fleshy</span> skin-coloured growths and involves vulvar, vagina, perineal, and <span class=\"customMeta\" data-dictid=\"fb89fe7db116927771957d22da5a71\">perianal</span> regions.</li>\n\t<li><strong>Condyloma acuminata</strong> are cauliflower-like, dry, and bulky, typically found in the <span class=\"customMeta\" data-dictid=\"5be0ee4ea316927771997104326685\">squamous</span> <span class=\"customMeta\" data-dictid=\"31ae8f4dc51692777193069d92be37\">mucosa</span> of the anal canal.</li>\n\t<li><strong>Condyloma lata</strong> are smooth, moist, and flat, often located in the <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">genital</span> area, inner thighs, axillae, or oral mucosa.</li>\n\t<li>Unlike <span class=\"customMeta\" data-dictid=\"2ed8a5f8f2169277718404b6d69c6c\">condyloma</span> acuminata, <span class=\"customMeta\" data-dictid=\"2ed8a5f8f2169277718404b6d69c6c\">condyloma</span> lata may appear ulcerated.</li>\n</ul>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"Hyun, Jin-Soo & Kim, Gee-Bum & Choi, Byung-Seok & Kim, Minsung & Park, Sang-Gon.\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/Gross-finding-of-giant-condyloma-acuminatum-of-anus-A-there-was-large-cauliflower-like_fig3_271219052\" data-tags=\"\" height=\"527\" src=\"https://image.prepladder.com/content/upNccBrlsfmq4ozVIomc1737645802.png\" width=\"169\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<ul>\n\t<li>Microscopic examination reveals papillary, exophytic, treelike stromal cores covered by thickened <span class=\"customMeta\" data-dictid=\"5be0ee4ea316927771997104326685\">squamous</span> epithelium.</li>\n\t<li>Koilocytes are evident, featuring enlarged nuclei, hyperchromasia, and a <span class=\"customMeta\" data-dictid=\"2da8fc47cf169277719576cea1851f\">perinuclear</span> cytoplasmic halo.</li>\n\t<li>These are not precancerous lesions, and <span class=\"customMeta\" data-dictid=\"6bca6e988d1692777189167b791930\">HPV</span> vaccines provide excellent protection.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Nephron\" data-hash=\"\" data-license=\"CC BY SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Condyloma_acuminatum_-_intermed_mag.jpg\" data-tags=\"\" height=\"338\" src=\"https://image.prepladder.com/content/DXuzzW31uSZH1TrfpoTw1736994696.png\" width=\"500\" /></p>\n\n<p>\u00a0\u00a0<br />\n\u00a0</p>\n\n<p><strong>HPV 16 and 18 (Option B):</strong></p>\n\n<p>HPV 16 and 18 are high-risk strains responsible for <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> carcinoma, vulvar <span class=\"customMeta\" data-dictid=\"74b2ee426f169277719000793323ba\">intraepithelial</span> <span class=\"customMeta\" data-dictid=\"e212826c171692777193374ca34435\">neoplasia</span> (VIN) and vulvar carcinoma.</p>",
    "question_images": [
      "https://image.prepladder.com/content/dOqrNJicBbhPMk2x2R5J1736994627.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/upNccBrlsfmq4ozVIomc1737645802.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/MOWi9T2yByyqHtHKzdyP1751444077.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/UFXOrQEnuYxF4VmymCsQ1751444117.mp3"
  },
  {
    "text": "<p>A 25-year-old sexually active female presents with foul-smelling vaginal discharge and dysuria. Upon examination of the cervix, the following appearance is noted. Wet mount microscopy reveals the findings shown in the image below. Which of the following is most likely responsible for this presentation?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Heru Pradjatmo\" data-hash=\"\" data-license=\"CC BY-NC 4.0\" data-source=\"https://www.researchgate.net/figure/The-appearance-of-Strawberry-spot-in-Trichomoniasis-infection-left-and-purulent_fig9_305397752\" data-tags=\"\" height=\"552\" src=\"https://image.prepladder.com/content/tHaFQAXzx9lCiK4mmEAz1736995008.png\" width=\"500\" /></p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Nephron\" data-hash=\"\" data-license=\"CC BY SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Trichomonas_pap_test.jpg\" data-tags=\"\" height=\"397\" src=\"https://image.prepladder.com/content/rOMSobiXfPIKZvXktqBQ1736995071.png\" width=\"500\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Trichomonas vaginalis"
      },
      {
        "id": 2,
        "text": "Candida"
      },
      {
        "id": 3,
        "text": "Herpes simplex virus"
      },
      {
        "id": 4,
        "text": "Human Papilloma virus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) <span class=\"customMeta\" data-dictid=\"bf14a61da11692777200d31b43047d\">Trichomonas</span> vaginalis</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>The clinical presentation, examination, and <span class=\"customMeta\" data-dictid=\"51df8cdfc91692777192aa76f4de51\">microscopy</span> findings suggest <span class=\"customMeta\" data-dictid=\"bf14a61da11692777200d31b43047d\">Trichomonas</span> vaginalis infection, a large, <span class=\"customMeta\" data-dictid=\"9878bc208e169277720243c5c74543\">flagellated</span> <span class=\"customMeta\" data-dictid=\"879f3da46a169277719497d18b5251\">ovoid</span> <span class=\"customMeta\" data-dictid=\"101b1e083716927771969fdfd388d4\">protozoan</span> transmitted by sexual contact.</p>\n\n<ul>\n\t<li>Patients may present with yellow, frothy <span class=\"customMeta\" data-dictid=\"9a1e50b8221692777201b95b66c9de\">vaginal</span> discharge, <span class=\"customMeta\" data-dictid=\"b0b814e5441692777202c969196f0e\">vulvovaginal</span> discomfort, <span class=\"customMeta\" data-dictid=\"a066df2bb91692777186b26b297ea2\">dysuria</span> (painful urination) <span class=\"customMeta\" data-dictid=\"2109919ad7169277718654f3267482\">dyspareunia</span> (painful intercourse).</li>\n\t<li>The <span class=\"customMeta\" data-dictid=\"9a1e50b8221692777201b95b66c9de\">vaginal</span> and <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> <span class=\"customMeta\" data-dictid=\"31ae8f4dc51692777193069d92be37\">mucosa</span> has a fiery-red appearance, with <span class=\"customMeta\" data-dictid=\"d141b433d2169277718681e3ff6bc3\">dilation</span> of <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> mucosal vessels resulting in a \u201cstrawberry cervix.\u201d</li>\n\t<li>Wet mount <span class=\"customMeta\" data-dictid=\"51df8cdfc91692777192aa76f4de51\">microscopy</span> of the <span class=\"customMeta\" data-dictid=\"9dd87431ba1692777186ecfb21d258\">discharge</span> reveals <span class=\"customMeta\" data-dictid=\"27cf09e9d316927771928763e99e0d\">motile</span> organisms with flagella.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Candida (Option B):</strong></p>\n\n<ul>\n\t<li>Clinical features: Curdy white discharge</li>\n\t<li>Pap smear: shish kebab effect</li>\n</ul>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"IARC, WHO\" data-hash=\"\" data-license=\"NA\" data-source=\"https://screening.iarc.fr/atlascolpodetail.php?Index=031&e=,0,1,2,3,8,10,15,19,30,31,43,46,47,60,61,68,73,83,88,89,93,96,102,105,111\" data-tags=\"\" height=\"3543\" src=\"https://image.prepladder.com/content/jsyzfHVZrFLkPcBE8Tnf1737645948.png\" width=\"4167\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Dr Graham Beards\" data-hash=\"\" data-license=\"CC BY SA 4.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Vaginal_candidiasis,_Gram_stain.jpg\" data-tags=\"\" height=\"373\" src=\"https://image.prepladder.com/content/ESwnLXw1ReL9d7LZFefK1736995193.png\" width=\"500\" /></p>\n\n<p><strong>Herpes simplex virus (Option C)</strong></p>\n\n<ul>\n\t<li>HSV is a sexually transmitted disease characterized by <span class=\"customMeta\" data-dictid=\"aa085932ce1692777193be7e5198bf\">multinucleated</span> <span class=\"customMeta\" data-dictid=\"5be0ee4ea316927771997104326685\">squamous</span> cells containing <span class=\"customMeta\" data-dictid=\"91bc3a9b3e16927771871bcff74db7\">eosinophilic</span> <span class=\"customMeta\" data-dictid=\"5cc2d9fac616927772021889ee6d52\">viral</span> inclusions (Cowdry <span class=\"customMeta\" data-dictid=\"10b0d1c12d16927772018830011368\">type A</span> inclusions) with a \u201cground-glass\u201d appearance.</li>\n\t<li>The patient presents with painful <span class=\"customMeta\" data-dictid=\"0c02372a7d1692777196974ab1d772\">purulent</span> vesicles/ulcers, often associated with <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> symptoms such as fever, malaise, and tender inguinal <span class=\"customMeta\" data-dictid=\"4df97a6cbf169277719172fd1af767\">lymph</span> nodes.</li>\n\t<li>Clinical features: Painful vesicles.</li>\n\t<li>Microscopy: <span class=\"customMeta\" data-dictid=\"5be0ee4ea316927771997104326685\">squamous</span> cell <span class=\"customMeta\" data-dictid=\"e6b47028191692777193eb698e43b6\">nuclei</span> exhibit 3Ms : Multinucleation, <span class=\"customMeta\" data-dictid=\"78c0e5e6e01692777192a93cb4bcff\">molding</span> and margination</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"CC BY SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Cytopathic_effect\" data-tags=\"\" height=\"448\" src=\"https://image.prepladder.com/content/wwbloSJEKaki0bfhUdPI1736995359.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>\n\n<p><strong>Human <span class=\"customMeta\" data-dictid=\"70ae0d8a1f1692777194515e8836a4\">Papillomavirus</span> (Option D)</strong></p>\n\n<ul>\n\t<li>Clinical features: Low risk <span class=\"customMeta\" data-dictid=\"6bca6e988d1692777189167b791930\">HPV</span> 6,11 \u2192 cause <span class=\"customMeta\" data-dictid=\"2ed8a5f8f2169277718404b6d69c6c\">condyloma</span> acuminata.</li>\n\t<li>Microscopy; Koilocytes are seen.</li>\n\t<li>High risk <span class=\"customMeta\" data-dictid=\"6bca6e988d1692777189167b791930\">HPV</span> 16, 18 \u2192 cause <span class=\"customMeta\" data-dictid=\"5be0ee4ea316927771997104326685\">squamous</span> cell carcinoma.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Ed Uthman\" data-hash=\"\" data-license=\"CC BY SA 2.0\" data-source=\"https://en.wikipedia.org/wiki/Koilocyte\" data-tags=\"\" height=\"259\" src=\"https://image.prepladder.com/content/EUCWja8crXeQx8BHRxUZ1736995448.png\" width=\"500\" /></p>",
    "question_images": [
      "https://image.prepladder.com/content/tHaFQAXzx9lCiK4mmEAz1736995008.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/jsyzfHVZrFLkPcBE8Tnf1737645948.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/AXZXpdZ2uk2lx1IHpFWx1751444205.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/NCzDemnFdK4bNEYxdavo1751444269.mp3"
  },
  {
    "text": "<p>A 58-year-old woman complains of persistent itching and redness in her vulvar area. On examination, well-defined, erythematous plaques with an eczematous appearance are noted. A biopsy reveals large cells with pale cytoplasm and positive staining for mucopolysaccharides. Immunohistochemical analysis shows positive staining for cytokeratin 7. Based on these findings, what is the most likely diagnosis?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\"Yoshihide Inayama, Kaoru Abiko, Taito Miyamoto, Akihito Horie, Ken Yamaguchi, Tsukasa Baba, Noriomi Matsumura, Sachiko Minamiguchi, Masaki Mandai \"\" data-hash=\"\" data-license=\"CC BY NC ND 4.0\" data-source=\"https://www.researchgate.net/figure/Preoperative-findings-of-invasive-Pagets-disease-of-the-vulva-A-Macroscopic_fig1_327703052\" data-tags=\"\" height=\"354\" src=\"https://image.prepladder.com/content/ysQqXddUXieUBnaY2R2x1736995580.png\" width=\"500\" /></p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Nephron\" data-hash=\"\" data-license=\"CC BY SA 3.0\" data-source=\"https://en.wikipedia.org/wiki/Extramammary_Paget%27s_disease\" data-tags=\"\" height=\"337\" src=\"https://image.prepladder.com/content/4TP0LytnyEUZGuSCZmcx1736995713.png\" width=\"500\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Bowen's disease of the vulva"
      },
      {
        "id": 2,
        "text": "Extramammary Paget's disease"
      },
      {
        "id": 3,
        "text": "Papillary Hidradenoma"
      },
      {
        "id": 4,
        "text": "Squamous cell carcinoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) </strong><strong>Extramammary Paget's disease</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li>Biopsy findings commonly reveal large, round cells, known as Paget cells, within the epidermis.</li>\n\t<li>These cells have pale <span class=\"customMeta\" data-dictid=\"728bb228361692777185b98c34534b\">cytoplasm</span> containing <span class=\"customMeta\" data-dictid=\"f8bfa12f831692777193f515beb9ed\">mucopolysaccharide</span> that stains with PAS, Alcian blue, or <span class=\"customMeta\" data-dictid=\"d770979f3d1692777193ff0fdda2e4\">mucicarmine</span> stains.</li>\n\t<li>Immunohistochemistry <span class=\"customMeta\" data-dictid=\"3b007026bd16927771997ae809b603\">staining</span> often shows positivity for <span class=\"customMeta\" data-dictid=\"bc3875332b1692777185e2c8163a73\">cytokeratin</span> (CK) 7.</li>\n\t<li>Unlike Paget disease of the <span class=\"customMeta\" data-dictid=\"9fdffd913216927771936512ee5b2a\">nipple</span> (Ductal <span class=\"customMeta\" data-dictid=\"988c19e3131692777183b6744d1920\">carcinoma</span> of the breast), vulvar Paget's disease is typically not associated with underlying <span class=\"customMeta\" data-dictid=\"0c7efd2b8716927771914c8cb19e54\">malignancy</span> and is confined to the vulvar epidermis.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Nephron\" data-hash=\"\" data-license=\"CC BY SA 3.0\" data-source=\"https://en.wikipedia.org/wiki/Extramammary_Paget%27s_disease\" data-tags=\"\" height=\"379\" src=\"https://image.prepladder.com/content/GxmQLLeCq5tIkG5tdCqZ1736995776.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/ysQqXddUXieUBnaY2R2x1736995580.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/GxmQLLeCq5tIkG5tdCqZ1736995776.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/2IwKFiWCiWnpLgyjdZcy1751444470.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/VFBJ28RbvhqZpAkGWPuW1751444576.mp3"
  },
  {
    "text": "<p>Which of the following has a strong association with clear cell adenocarcinoma of the vagina?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Male partner who has multiple sexual partners"
      },
      {
        "id": 2,
        "text": "In utero exposure to diethylstilbestrol"
      },
      {
        "id": 3,
        "text": "HPV infection"
      },
      {
        "id": 4,
        "text": "Sexual activity at a young age"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) <span class=\"customMeta\" data-dictid=\"f5942e813b16927771906ad4b3d288\">In utero</span> exposure to diethylstilbestrol</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li>The clinical presentation and <span class=\"customMeta\" data-dictid=\"754ab07a2e1692777183ed178c883d\">biopsy</span> findings suggest Clear cell <span class=\"customMeta\" data-dictid=\"362992dbb11692777180f9017fc04d\">adenocarcinoma</span> of the vagina, characterized histologically by cells with clear <span class=\"customMeta\" data-dictid=\"728bb228361692777185b98c34534b\">cytoplasm</span> and hobnail cells and is strongly associated with in-utero exposure to <span class=\"customMeta\" data-dictid=\"05784774fc1692777186a454f6f3d9\">diethylstilbestrol</span> (DES).</li>\n\t<li>Vaginal <span class=\"customMeta\" data-dictid=\"bc1de18bfd169277718009de79c6cc\">adenosis</span> (precursor <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> for clear cell adenocarcinoma) refers to the presence of <span class=\"customMeta\" data-dictid=\"c2f9d01ba91692777188d264244b6a\">glandular</span> <span class=\"customMeta\" data-dictid=\"8ff554096316927771851cc310435e\">columnar epithelium</span> in the <span class=\"customMeta\" data-dictid=\"bdbac654081692777196f9aab116f0\">proximal</span> vagina.</li>\n\t<li>Diethylstilbestrol is a <span class=\"customMeta\" data-dictid=\"61fbe2173416927771998e7aa0b432\">synthetic</span> non-steroidal <span class=\"customMeta\" data-dictid=\"a58dd68b011692777187eb72633aac\">estrogen</span> that was historically widely used to prevent potential miscarriages by stimulating the <span class=\"customMeta\" data-dictid=\"3fda45538a1692777199ec2a5478a5\">synthesis</span> of <span class=\"customMeta\" data-dictid=\"a58dd68b011692777187eb72633aac\">estrogen</span> and <span class=\"customMeta\" data-dictid=\"183d374ac91692777196c63c850299\">progesterone</span> in the <span class=\"customMeta\" data-dictid=\"5276da31d11692777195f0e82f5e1d\">placenta</span> (especially from the 1940s to the 1970s).</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/8QxYTqUtiI6mAw75mH2n1751444654.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/fGg38Al8xzpJiE3YICEZ1751444804.mp3"
  },
  {
    "text": "<p>A 4-year-old girl presents to the pediatric clinic with complaints of vaginal bleeding and a visible mass protruding from her vagina. On examination, a polypoid mass with a \"grape-like\" appearance is observed. A biopsy is taken, and immunohistochemical staining is positive for desmin. Which of the following will show as a biopsy finding?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Imawan, D.K., Oesman, W.S., Yuseran, H., Mustokoweni, S., Kania, N., Harsono, A.A., & Alkaff, F.F. (2019). Recurrent Cervical Sarcoma Botryoides in a 3-Year-Old Female: Approach in a Limited Resource Setting. The American Journal of Case Reports, 20, 838 - 843.\" data-hash=\"\" data-license=\"NA\" data-source=\"https://www.semanticscholar.org/paper/Recurrent-Cervical-Sarcoma-Botryoides-in-a-Female%3A-Imawan-Oesman/836e0714bdba3e5650688551c02863bb225d5152\" data-tags=\"\" height=\"402\" src=\"https://image.prepladder.com/content/9CEH7gXF7qdNTmnczpVj1737646066.png\" width=\"500\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Cells with small protrusions of cytoplasm from one end"
      },
      {
        "id": 2,
        "text": "Marked atypia of cells with numerous keratin pearls"
      },
      {
        "id": 3,
        "text": "Columnar mucinous epithelium"
      },
      {
        "id": 4,
        "text": "Fibrous stroma covered by mucus-secreting endocervical glands"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Cells with small protrusions of <span class=\"customMeta\" data-dictid=\"728bb228361692777185b98c34534b\">cytoplasm</span> from one end.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>The clinical presentation and IHC findings suggest <span class=\"customMeta\" data-dictid=\"82068425041692777198fe3064c370\">Sarcoma</span> botryoides, a rare type of Embryonal rhabdomyosarcoma, characterised by polypoid,rounded, bulky masses that have the appearance and <span class=\"customMeta\" data-dictid=\"bb67ce71481692777185f0e078535f\">consistency</span> of grapelike clusters, commonly found in infants and children younger than 5 years of age.</p>\n\n<ul>\n\t<li>Histologically characterised by cells with small and <span class=\"customMeta\" data-dictid=\"74793d564816927771943ae4ba74b3\">oval</span> <span class=\"customMeta\" data-dictid=\"e6b47028191692777193eb698e43b6\">nuclei</span> with small protrusions of <span class=\"customMeta\" data-dictid=\"728bb228361692777185b98c34534b\">cytoplasm</span> resembling a tennis racket <strong>(Tennis racket cells/ Tadpole cells) </strong>and rarely cytosolic striations (indicative of muscle differentiation) can be seen.</li>\n\t<li>The \"cambium layer\" in <span class=\"customMeta\" data-dictid=\"82068425041692777198fe3064c370\">sarcoma</span> botryoides refers to <span class=\"customMeta\" data-dictid=\"bac8d4d8b11692777180fccd9b9e73\">a band</span> of <span class=\"customMeta\" data-dictid=\"185df11299169277720149532995cf\">undifferentiated</span> or slightly differentiated tumour cells beneath the surface epithelium.</li>\n\t<li>Its presence aids in diagnosing <span class=\"customMeta\" data-dictid=\"82068425041692777198fe3064c370\">sarcoma</span> botryoides and distinguishing it from other <span class=\"customMeta\" data-dictid=\"9a1e50b8221692777201b95b66c9de\">vaginal</span> tumours.</li>\n\t<li>Immunohistochemical <span class=\"customMeta\" data-dictid=\"3b007026bd16927771997ae809b603\">staining</span> is positive for Desmin/MyoD1.</li>\n\t<li>It tends to invade locally and cause death by <span class=\"customMeta\" data-dictid=\"31dd0b58bb1692777195e6016ecd51\">penetration</span> into the peritoneal <span class=\"customMeta\" data-dictid=\"ddba4206eb169277718335596e86da\">cavity</span> <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> of the <span class=\"customMeta\" data-dictid=\"0b72f5e96b16927772018dec8a87e2\">urinary</span> tract.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/Pathology-slides-for-Case-2-A-Sarcoma-botryoides-4x-The-cambium-layer-green_fig2_350198100\" data-tags=\"\" height=\"160\" src=\"https://image.prepladder.com/content/wqs9yYYskxnrvfIRR1JG1736996175.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/9CEH7gXF7qdNTmnczpVj1737646066.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/wqs9yYYskxnrvfIRR1JG1736996175.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/B7aKyYbF1staEapQy4rQ1751444892.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/xcoCJQYx7WvjpuFYxEOn1751444954.mp3"
  },
  {
    "text": "<p>Which of the following is an advantage of liquid-based cytology (LBC) over the conventional Pap smear?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Cost-effective"
      },
      {
        "id": 2,
        "text": "More widely available in resource-limited settings"
      },
      {
        "id": 3,
        "text": "Adequacy of 8,000-12,000 epithelial cells"
      },
      {
        "id": 4,
        "text": "Allows simultaneous HPV testing"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) </strong><strong>Allows simultaneous <span class=\"customMeta\" data-dictid=\"6bca6e988d1692777189167b791930\">HPV</span> testing</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:655px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:bottom\">\n\t\t\t<p style=\"text-align: center;\"><strong>Aspect</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:bottom\">\n\t\t\t<p style=\"text-align: center;\"><strong>Conventional <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">Cervical</span> Screening (Pap Smear)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:bottom\">\n\t\t\t<p style=\"text-align: center;\"><strong>Liquid-Based <span class=\"customMeta\" data-dictid=\"f3b9227a231692777185b5c30d8602\">Cytology</span> (LBC)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p><strong>Sample Collection</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>Cells are collected using a <span class=\"customMeta\" data-dictid=\"2cd284701016927771984ff3e4605b\">spatula</span> or brush and smeared directly onto a glass slide.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>Cells are collected using a brush and then rinsed into a <span class=\"customMeta\" data-dictid=\"cd235a18081692777202343e31b264\">vial</span> containing a <span class=\"customMeta\" data-dictid=\"d3a8a234c61692777196ab718189bf\">preservative</span> solution.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p><strong>Processing Time</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>Typically longer due to manual preparation and staining.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>Faster automated processing and staining.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p><strong>Sensitivity and Specificity</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>Lower sensitivity and <span class=\"customMeta\" data-dictid=\"e70dd3ea9916927771988faba61d64\">specificity</span> compared to LBC.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>Higher sensitivity and <span class=\"customMeta\" data-dictid=\"e70dd3ea9916927771988faba61d64\">specificity</span> for detecting abnormalities.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p><strong>Cost</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>Generally lower cost.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>Higher cost due to specialized equipment and supplies. <strong>(Option A)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p><strong>Follow-up Testing</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>Additional sample collection may be needed if the initial sample is inadequate.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>Usually provides enough samples for additional tests (e.g., <span class=\"customMeta\" data-dictid=\"6bca6e988d1692777189167b791930\">HPV</span> testing) without recollection. <strong>(Option D)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p><strong>Adequacy of cells</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>8000-12000 epithelial cells/ 10 <span class=\"customMeta\" data-dictid=\"b5e72d80ba16927771893e46220f90\">hpf</span> <strong>(Option C)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>5000 epithelial cells/10 hpf</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p><strong>Resource limited setting</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>Available in resource-limited settings <strong>(Option B)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p>Specialized equipment and infrastructure are needed</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/jqaYwtr06lZJDKb9ohfg1751445032.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/l2qvHYuonC1kIKwO4r1z1751457607.mp3"
  },
  {
    "text": "<p>A 45-year-old woman comes to the OPD for regular Pap smear screening. The smear suggests a low-grade squamous intraepithelial lesion. Which of the following abnormal cell types was most likely seen on the smear?</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"Ed Uthman\" data-hash=\"\" data-license=\"CC BY SA 2.0\" data-source=\"https://en.wikipedia.org/wiki/Koilocyte\" data-tags=\"\" height=\"988\" src=\"https://image.prepladder.com/content/j8y8ojioQob8HX3LwKoU1737647464.png\" width=\"1907\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>",
    "choices": [
      {
        "id": 1,
        "text": "Doderlein cells"
      },
      {
        "id": 2,
        "text": "Hobnail cells"
      },
      {
        "id": 3,
        "text": "Arias-Stella reaction cells"
      },
      {
        "id": 4,
        "text": "Koilocytes"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) Koilocytes </strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>Koilocytes are <span class=\"customMeta\" data-dictid=\"458e050fdc16927771809854c9fd53\">abnormal</span> <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> cells seen on <span class=\"customMeta\" data-dictid=\"db0c1e31b81692777194c625af6798\">pap</span> smears, indicative of <span class=\"customMeta\" data-dictid=\"6bca6e988d1692777189167b791930\">HPV</span> infections of the cervix.</p>\n\n<ul>\n\t<li>They are <span class=\"customMeta\" data-dictid=\"5be0ee4ea316927771997104326685\">squamous</span> epithelial cells with nuclear enlargement, <span class=\"customMeta\" data-dictid=\"28606fa66a169277718407469e7e7c\">coarse</span> chromatin, <span class=\"customMeta\" data-dictid=\"2da8fc47cf169277719576cea1851f\">perinuclear</span> cavitation, and <span class=\"customMeta\" data-dictid=\"863f5457381692777190f05632a8b2\">irregular</span> nuclear membranes.</li>\n\t<li>A rim of condensed <span class=\"customMeta\" data-dictid=\"728bb228361692777185b98c34534b\">cytoplasm</span> often surrounds the <span class=\"customMeta\" data-dictid=\"2da8fc47cf169277719576cea1851f\">perinuclear</span> cavitation, giving the cell a \"halo\" appearance.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Mileta Golubovic,Milena Lopicic,Natasa Terzic,Marija Djurovic,Boban Mugosa,Gordana Mijovi\u0107\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://www.researchgate.net/figure/Histopathological-characteristics-of-cervical-intraepithelial-neoplasm-in-CIN-III-with_fig3_303904799\" data-tags=\"\" height=\"228\" src=\"https://image.prepladder.com/content/0ev8n5Xut7LCTTCArXQr1736996510.png\" width=\"500\" /></p>\n\n<p><strong>Doderlein cells (Option A):</strong></p>\n\n<ul>\n\t<li>Doderlein cells are large, glycogen-rich <span class=\"customMeta\" data-dictid=\"5be0ee4ea316927771997104326685\">squamous</span> epithelial cells in the <span class=\"customMeta\" data-dictid=\"9a1e50b8221692777201b95b66c9de\">vaginal</span> epithelium, associated with <span class=\"customMeta\" data-dictid=\"afc3d4529a16927771910b0e3c52ba\">Lactobacillus</span> species.</li>\n\t<li>A reduction or absence of Doderlein cells can indicate <span class=\"customMeta\" data-dictid=\"c0c247b89916927771948bc5e6d39c\">pathological</span> conditions such as bacterial vaginosis.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Hobnail cells (Option B):</strong></p>\n\n<ul>\n\t<li>Hobnail cells are found in clear cell <span class=\"customMeta\" data-dictid=\"988c19e3131692777183b6744d1920\">carcinoma</span> of the ovary.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Arias-Stella reaction cells (Option C):</strong></p>\n\n<ul>\n\t<li>Arias-Stella reaction cells are a type of <span class=\"customMeta\" data-dictid=\"c2f9d01ba91692777188d264244b6a\">glandular</span> epithelial cell found in the <span class=\"customMeta\" data-dictid=\"2f1603da6716927771878d0cbdd372\">endometrium</span> during pregnancy, <span class=\"customMeta\" data-dictid=\"0decefe0901692777186f7f3f89b2a\">ectopic</span> pregnancy, or <span class=\"customMeta\" data-dictid=\"c0c247b89916927771948bc5e6d39c\">pathological</span> conditions like gestational trophoblastic disease.</li>\n</ul>",
    "question_images": [
      "https://image.prepladder.com/content/j8y8ojioQob8HX3LwKoU1737647464.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/0ev8n5Xut7LCTTCArXQr1736996510.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/wxfzWYlbWFOMJgJAuzaT1746472701.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/rgT2EEiTJIZousBhLesQ1746472804.mp3"
  },
  {
    "text": "<p>Which of the following risk factors is not typically associated with cervical cancer?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Smoking"
      },
      {
        "id": 2,
        "text": "Multiple sexual partners"
      },
      {
        "id": 3,
        "text": "Oral contraceptive pill use"
      },
      {
        "id": 4,
        "text": "Nulliparity"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) Nulliparity</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li>Nulliparity<strong> </strong>is not a risk factor for <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> cancer.</li>\n\t<li>Nulliparity is a risk factor for breast and ovarian cancer.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Risk factors for <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> cancer include:</strong></p>\n\n<ul>\n\t<li>Human <span class=\"customMeta\" data-dictid=\"70ae0d8a1f1692777194515e8836a4\">papillomavirus</span> (HPV) infection, particularly High-risk HPVs, is the most important factor in the development of <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> cancer</li>\n\t<li>Multiple sexual partners <strong>(Option B)</strong><strong> </strong>or early sexual activity</li>\n\t<li>Smoking<strong> </strong><strong>(Option A)</strong></li>\n\t<li>Weak immune system</li>\n\t<li>Long-term use of oral contraceptives (OCP)<strong> (Option C)</strong></li>\n\t<li>High parity</li>\n\t<li>Lack of regular <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> screening (Pap tests)</li>\n\t<li>Family history of <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> cancer</li>\n\t<li>Socioeconomic factors</li>\n</ul>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/57soikShfBFh14mJ1DAt1751457661.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/26i8CoTSCjafqDYYP1Rf1751458548.mp3"
  },
  {
    "text": "<p>A 32-year-old woman undergoes a routine gynecological examination. Abnormalities are detected on her pap smear, and colposcopy-guided biopsy reveals dysplastic changes involving two-thirds of the cervical epithelium. What is the most likely diagnosis?</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"IARC, WHO\" data-hash=\"\" data-license=\"NA\" data-source=\"https://screening.iarc.fr/atlasviadetail.php?Index=22&e=\" data-tags=\"\" height=\"3125\" src=\"https://image.prepladder.com/content/yRiol5Y2KQ3AzWMxcFIZ1737646266.png\" width=\"4167\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Cervical intraepithelial neoplasia 1"
      },
      {
        "id": 2,
        "text": "Cervical intraepithelial neoplasia 2"
      },
      {
        "id": 3,
        "text": "Cervical intraepithelial neoplasia 3"
      },
      {
        "id": 4,
        "text": "Invasive cervical carcinoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">Cervical</span> <span class=\"customMeta\" data-dictid=\"74b2ee426f169277719000793323ba\">intraepithelial</span> <span class=\"customMeta\" data-dictid=\"e212826c171692777193374ca34435\">neoplasia</span> 2 (CIN2)</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:622px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Grade</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>HPE</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Features</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>CIN 1</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\"><img alt=\"\" data-author=\" Syed Hassan A. Kazmi, mahshid mir, Aditya Govindavarjhulla, Charmaine Patel, Lakshmi Gopalakrishnan and Varun Kumar\" data-hash=\"\" data-license=\"CC BY/SA\" data-source=\"https://www.wikidoc.org/index.php/Cervical_intraepithelial_neoplasia\" data-tags=\"\" height=\"658\" src=\"https://image.prepladder.com/content/YC5nmVaVIJHIHAO5h7Kh1736996979.png\" width=\"500\" /></td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Low-grade <span class=\"customMeta\" data-dictid=\"5be0ee4ea316927771997104326685\">squamous</span> <span class=\"customMeta\" data-dictid=\"74b2ee426f169277719000793323ba\">intraepithelial</span> <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> of <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> <span class=\"customMeta\" data-dictid=\"74b2ee426f169277719000793323ba\">intraepithelial</span> <span class=\"customMeta\" data-dictid=\"e212826c171692777193374ca34435\">neoplasia</span> with koilocytic <span class=\"customMeta\" data-dictid=\"79886dc4391692777182791548ca21\">atypia</span> showing <span class=\"customMeta\" data-dictid=\"06123ff61a1692777182e19b790ebc\">atypical</span> cells in the lower 1/3rd of the epithelium.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>CIN 2</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<div style=\"text-align:center\">\n\t\t\t<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"IARC, WHO\" data-hash=\"\" data-license=\"NA\" data-source=\"https://screening.iarc.fr/atlasviadetail.php?Index=22&e=\" data-tags=\"\" height=\"3125\" src=\"https://image.prepladder.com/content/w1Xxvnmi9r1RWQfY8LIB1737646356.png\" width=\"4167\" />\n\t\t\t<figcaption>{{caption_text}}</figcaption>\n\t\t\t</figure>\n\t\t\t</div>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>High-grade <span class=\"customMeta\" data-dictid=\"5be0ee4ea316927771997104326685\">squamous</span> <span class=\"customMeta\" data-dictid=\"74b2ee426f169277719000793323ba\">intraepithelial</span> <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> (HSIL) with progressive <span class=\"customMeta\" data-dictid=\"79886dc4391692777182791548ca21\">atypia</span> and expansion of the <span class=\"customMeta\" data-dictid=\"c219021c491692777189d289f1fc03\">immature</span> <span class=\"customMeta\" data-dictid=\"923af580cf16927771829606bce2a7\">basal</span> cells in the lower 2/3rd of the epithelial thickness</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>CIN 3</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\"><img alt=\"\" data-author=\"Sarahkayb\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Intraepithelial_neoplasia\" data-tags=\"\" height=\"329\" src=\"https://image.prepladder.com/content/pvGF0CSUrS1d4WgATWln1736997053.png\" width=\"500\" /></td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">HSIL with <span class=\"customMeta\" data-dictid=\"89275101301692777186567d1912a0\">diffuse</span> atypia, loss of maturation, and expansion of the <span class=\"customMeta\" data-dictid=\"c219021c491692777189d289f1fc03\">immature</span> <span class=\"customMeta\" data-dictid=\"923af580cf16927771829606bce2a7\">basal</span> cells to the entire length of the epithelial surface.</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p><strong>Invasive <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> <span class=\"customMeta\" data-dictid=\"988c19e3131692777183b6744d1920\">carcinoma</span> (Option D):</strong></p>\n\n<ul>\n\t<li>Invasive <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> <span class=\"customMeta\" data-dictid=\"988c19e3131692777183b6744d1920\">carcinoma</span> presents with invasion beyond the basement <span class=\"customMeta\" data-dictid=\"34cd707428169277719272942b7905\">membrane</span> of the <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> epithelium.</li>\n</ul>",
    "question_images": [
      "https://image.prepladder.com/content/yRiol5Y2KQ3AzWMxcFIZ1737646266.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/YC5nmVaVIJHIHAO5h7Kh1736996979.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/PVZ2njsh2rDgfMLREHsu1751458630.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/NRNGkua7wHpAFgCi52F41751458714.mp3"
  },
  {
    "text": "<p>Which of the following statements is true regarding the squamous cell carcinoma of the cervix?</p>\n\n<ol>\n\t<li>HPV types 16 and 18 are the most common HPV types identified in invasive cervical cancer.</li>\n\t<li>The most common site of metastasis is the lungs.</li>\n\t<li>E6 protein interferes with the activity of the tumor suppressor proteins p53.</li>\n\t<li>Squamous cell carcinoma is the most common histologic subtype.</li>\n</ol>",
    "choices": [
      {
        "id": 1,
        "text": "1,2,3,4"
      },
      {
        "id": 2,
        "text": "1,2,3"
      },
      {
        "id": 3,
        "text": "1,3,4"
      },
      {
        "id": 4,
        "text": "Only 1"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) 1,2,3,4</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Cervical Carcinoma:</strong></p>\n\n<ul>\n\t<li>Squamous cell <span class=\"customMeta\" data-dictid=\"988c19e3131692777183b6744d1920\">carcinoma</span> (80%) and <span class=\"customMeta\" data-dictid=\"362992dbb11692777180f9017fc04d\">adenocarcinoma</span> (15%) are the main <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> cancer subtypes caused by high-risk HPVs (HPV16 and 18).</li>\n\t<li>HPV's E6 and E7 proteins disrupt <span class=\"customMeta\" data-dictid=\"14caf753cb169277719405bdd25002\">p53</span> and Rb tumor suppressors, respectively.</li>\n\t<li>Lung <span class=\"customMeta\" data-dictid=\"d3251bfb0b1692777192b069d7ba4a\">metastasis</span> is common and indicates poor prognosis.</li>\n</ul>\n\n<p><strong>Squamous cell carcinoma:</strong></p>\n\n<p><img alt=\"\" data-author=\"Nephron\" data-hash=\"\" data-license=\"CC BY SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Cervical_squamous_cell_carcinoma_in_situ.jpg\" data-tags=\"\" height=\"337\" src=\"https://image.prepladder.com/content/ngehTRs1znZsUkN4N4Dt1736997235.png\" width=\"500\" /></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/ngehTRs1znZsUkN4N4Dt1736997235.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/6Fo1GBIaVzi87xXDLtBT1751458773.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/mXkixNZp0mfxugxRY7Jz1751458833.mp3"
  }
];
        let quizName = '53 Pathology Of Female Genital Tract-I';
        const quizFilename = '53-pathology-of-female-genital-tract-i-ef861495.html';
        let hierarchy = ["PrepLadder", "qBank", "Pathology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>