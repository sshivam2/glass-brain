<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ophthalmology Test I - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Muscles shown in below given image are derived from",
    "choices": [
      {
        "id": 1,
        "text": "Surface ectoderm"
      },
      {
        "id": 2,
        "text": "Neuroectoderm"
      },
      {
        "id": 3,
        "text": "Neural crest cells"
      },
      {
        "id": 4,
        "text": "Mesoderm"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Sphincter and dilator pupillae</strong> are derived from <strong>neuroectoderm.</strong></p>\n<p>Other derivatives of neuroectoderm are:</p>\n<ul>\n<li>Iris epithelium</li>\n<li>Ciliary epithelium</li>\n<li>Optic vesicle and cup</li>\n<li>Secondary vitreous</li>\n<li>Retina</li>\n<li>Retinal pigment epithelium</li>\n<li>Fibres of the optic nerve</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8b536d2f7f52437db809dd7b63e7173ex1280x1301.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Most common corneal dystrophy is",
    "choices": [
      {
        "id": 1,
        "text": "Map-dot-fingerprint dystrophy"
      },
      {
        "id": 2,
        "text": "Rees Buckler dystrophy"
      },
      {
        "id": 3,
        "text": "Lattice dystrophy"
      },
      {
        "id": 4,
        "text": "Fuch\u2019s endothelial dystrophy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Corneal map-dot-fingerprint dystrophy</strong> is by far the <strong>most common type</strong> of corneal dystrophy.</p>\n<p>Map-dot-fingerprint dystrophy is also known as <strong>epithelial basement membrane dystrophy, anterior basement membrane dystrophy, and Cogan microcystic epithelial dystrophy</strong>.</p>\n<p class=\"p1\">\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Fundus changes in pathological myopia includes all except",
    "choices": [
      {
        "id": 1,
        "text": "Foster fuch\u2019s spots"
      },
      {
        "id": 2,
        "text": "Myopic crescent"
      },
      {
        "id": 3,
        "text": "Pseudopapillitis"
      },
      {
        "id": 4,
        "text": "Lacquer cracks"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Pseudopapillitis</strong> is a feature of <strong>hypermetropia.</strong></p>\n<p><strong>Fundus changes in myopia:</strong></p>\n<ul>\n<li>Large and pale optic disc</li>\n<li>Temporal myopic crescent and peripapillary crescent</li>\n<li>Foster fuch\u2019s spots at the macula (Subretinal neovascularisation and choroidal haemorrhage)</li>\n<li>Cystoid degeneration and Lattice degeneration</li>\n<li>Tigroid or tessellated appearance of fundus</li>\n<li>Lacquer cracks - Linear breaks in Bruch's membrane</li>\n<li>Posterior staphyloma</li>\n<li>Vitreous \u2013 liquefaction, opacities, posterior vitreous detachment \u2013 Weiss reflex</li>\n<li>Total retinal atrophy</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5e0cf9c3044f4f2fa302c0916b1eb792x394x294.PNG"
    ]
  },
  {
    "text": "Microaneurysms which are the earliest manifestation of diabetic retinopathy most frequently develop in which layer",
    "choices": [
      {
        "id": 1,
        "text": "Outer plexiform layer"
      },
      {
        "id": 2,
        "text": "Inner nuclear layer"
      },
      {
        "id": 3,
        "text": "Retinal pigment epithelium"
      },
      {
        "id": 4,
        "text": "Layer of rods and cones"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Microaneurysms</strong> are <strong>localized outpouchings, mainly saccular, of the capillary wall</strong> that may form either by focal dilatation of the capillary wall where <strong>pericytes are absent</strong>, or by fusion of two arms of a capillary loop.</p>\n<ul>\n<li>Most develop in the <strong>inner capillary plexus (inner nuclear layer)</strong>, frequently adjacent to areas of capillary non-perfusion.</li>\n<li><strong>Loss of pericytes</strong> may also lead to <strong>endothelial cell proliferation</strong> with the formation of \u2018cellular\u2019 microaneurysms.</li>\n<li>Microaneurysms may leak plasma constituents into the retina as a result of breakdown in the blood\u2013retinal barrier, or may thrombose.</li>\n<li>They tend to be <strong>the earliest sign of DR.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f1a2d48d6b374e7ca20b3056bbbf0aa5x575x454.PNG"
    ]
  },
  {
    "text": "You would identify the instrument shown in the image below as:",
    "choices": [
      {
        "id": 1,
        "text": "Nagel\u2019s anomaloscope"
      },
      {
        "id": 2,
        "text": "Jackson\u2019s cross cylinder"
      },
      {
        "id": 3,
        "text": "Maddox rod"
      },
      {
        "id": 4,
        "text": "Retinoscope"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows <strong>Jackson&rsquo;s cross cylinder (flip-cross technique) </strong>which is used to refine the&nbsp;<strong>power and axis of the cylindrical lens.</strong></p>\n<p>Option A: Nagel&rsquo;s anomaloscope is used to test color vision.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2852363b09374ea2936e3b151e85ecff.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/eef924355490460a8935762137632411x310x210.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2b49efb09e644acf8fbc80f860d08f16x600x695.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/827d95fb1345404bb7bec09898fd65ccx600x706.JPEG"
    ]
  },
  {
    "text": "Most common cause of condition given in image below is",
    "choices": [
      {
        "id": 1,
        "text": "Rheumatoid arthritis"
      },
      {
        "id": 2,
        "text": "Osteogenesis imperfecta"
      },
      {
        "id": 3,
        "text": "Ehler Danlos syndrome"
      },
      {
        "id": 4,
        "text": "Pseudoxanthoma elasticum"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Image shows <strong>blue sclera</strong>. <strong>Most common cause</strong> of blue sclera is <strong>osteogenesis imperfecta.</strong></p>\n<p><strong>Causes of blue sclera: (Mnemonic \u2013 POGEMaN Happy)</strong></p>\n<ul>\n<li>Pseudoxanthoma elasticum</li>\n<li>Osteogenesis imperfecta</li>\n<li>Glaucoma (Congenital)/Buphthalmos</li>\n<li>Ehler Danlos syndrome</li>\n<li>Marfan\u2019s syndrome</li>\n<li>Nevus of Ota</li>\n<li>High myopia</li>\n<li>Healed Scleritis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/54edb2293ac14f4cb9c43e647869aab8.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Corneal transparency is maintained by all of the following factors, except _______.",
    "choices": [
      {
        "id": 1,
        "text": "Normal intraocular pressure"
      },
      {
        "id": 2,
        "text": "Avascularity"
      },
      {
        "id": 3,
        "text": "Irregularity of stromal collagen fibrils"
      },
      {
        "id": 4,
        "text": "Corneal crystallins"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Corneal transparency is maintained by all of the given factors except <strong>irregularity</strong> of stromal collagen fibrils. The<strong> regularity</strong>&nbsp;of stromal collagen fibrils, which are arranged as a <strong>lattice,&nbsp;</strong>contributes to the transparency of the cornea.&nbsp;</p>\n<p>Other factors contributing to the&nbsp;<strong>transparency </strong>of the <strong>cornea</strong> are:</p>\n<ul>\n<li>Peculiar refractive index of corneal lamellae (Goldmann theory)</li>\n<li><strong>Avascularity</strong> of the cornea</li>\n<li>Endothelial pumps such as <strong>Na<sup>+</sup>/K<sup>+</sup> ATPase pump</strong>, bicarbonate-dependent ATPase, Na<sup>+</sup>/H<sup>+&nbsp;</sup>pump.</li>\n<li>Evaporation from the corneal surface.</li>\n<li>Normal <strong>intraocular pressure.</strong></li>\n<li>Swelling pressure of the stroma.</li>\n<li><strong>Corneal crystallins: </strong>water-soluble proteins of keratocytes</li>\n<li>Barrier function of epithelium and endothelium</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Shaffer\u2019s sign is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Acute iridocyclitis"
      },
      {
        "id": 2,
        "text": "Sympathetic ophthalmitis"
      },
      {
        "id": 3,
        "text": "Retinitis pigmentosa"
      },
      {
        "id": 4,
        "text": "Retinal detachment"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Shaffer&rsquo;s sign</strong> or<strong> tobacco dusting</strong> refers to the presence of pigment cells in the anterior vitreous. It is seen in <strong>retinal detachment </strong>(RD), <strong>especially rhegmatogenous retinal detachment.</strong></p>\n<p>The image shows&nbsp;<strong>tobacco dust appearance</strong>&nbsp;(Shaffer's sign) in the anterior vitreous.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fc2c3b45afda4faab94ee6cc7c6db943x720x723.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7b7e020ce7ca46718388c3359eeb261cx1280x1974.JPEG"
    ]
  },
  {
    "text": "Phacomorphic glaucoma is an example of",
    "choices": [
      {
        "id": 1,
        "text": "Primary open angle glaucoma"
      },
      {
        "id": 2,
        "text": "Primary angle closure glaucoma"
      },
      {
        "id": 3,
        "text": "Secondary open angle glaucoma"
      },
      {
        "id": 4,
        "text": "Secondary angle closure glaucoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Phacomorphic glaucoma</strong> is an acute <strong>secondary angle-closure glaucoma</strong> precipitated by an <strong>intumescent cataractous lens.</strong></p>\n<p>The lens becomes intumescent, either by the rapid development of cataractous changes or after a traumatic rupture of its capsule.</p>\n<p>The <strong>swollen lens obliterates the drainage angle</strong> by forcing the root of the iris against the cornea.</p>\n<p>Note:</p>\n<ul>\n<li><strong>Phacolytic glaucoma</strong> is a <strong>secondary open-angle glaucoma</strong> occurring in association with a <strong>hypermature cataract</strong>. <strong>Trabecular obstruction is caused by high molecular-weight lens proteins</strong> that leak through the intact capsule into the aqueous humour leading to trabecular obstruction; <strong>macrophages</strong> containing lens proteins may also contribute.</li>\n<li><strong>Phacogenic (previously phacoanaphylactic) uveitis</strong>, an <strong>autoimmune granulomatous reaction to exposed lens proteins </strong>occurring with a compromised lens capsule.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Chrysiasis is due to deposition of",
    "choices": [
      {
        "id": 1,
        "text": "Silver"
      },
      {
        "id": 2,
        "text": "Manganese"
      },
      {
        "id": 3,
        "text": "Gold"
      },
      {
        "id": 4,
        "text": "Copper"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Chrysiasis is the deposition of gold in living tissue</strong>, and typically occurs only after prolonged administration.</p>\n<p>Virtually all patients who have received a total dose of gold compound exceeding 1500 mg develop corneal deposits, characterized by dust-like or glittering purple granules scattered throughout the epithelium and stroma, concentrated in the deep layers and the periphery.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/42d00e2f139846079e9f210dd899db4dx572x470.PNG"
    ]
  },
  {
    "text": "Arlt\u2019s line is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Vernal keratoconjunctivitis"
      },
      {
        "id": 2,
        "text": "Phlyctenular keratoconjunctivitis"
      },
      {
        "id": 3,
        "text": "Trachoma"
      },
      {
        "id": 4,
        "text": "Pterygium"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Arlt&rsquo;s line</strong> is a <strong>conjunctival sign seen in trachoma</strong>.</p>\n<p>It is a characteristic <strong>white conjunctival scar</strong> usually formed at the <strong>junction between the lower third and upper two-third of the superior tarsus.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fa92893c595e4500a735d3a1bfa77bc5x460x499.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/21d30c0ec1944e73b396df44157cac75x737x285.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/df4949cd43ab4981897efbbc3eb7ad3fx768x339.PNG"
    ]
  },
  {
    "text": "\u201ca\u201d wave in ERG corresponds to the activity of",
    "choices": [
      {
        "id": 1,
        "text": "Ganglion cell layer"
      },
      {
        "id": 2,
        "text": "Rods and cones"
      },
      {
        "id": 3,
        "text": "Nerve bundle layer"
      },
      {
        "id": 4,
        "text": "Pigment epithelium"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>\"a\" wave in ERG</strong> corresponds to<strong> activity of rods and cones.</strong></p>\n<p>The <strong>electroretinogram (ERG) </strong>is a diagnostic test that <strong>measures the electrical activity generated by neural and non-neuronal cells in the retina in response to a light stimulus.</strong></p>\n<p>The normal ERG is predominantly <strong>biphasic:</strong></p>\n<ul>\n<li><strong>a-wave</strong>: Initial corneal-<strong>negative deflection</strong>, derived from the <strong>cones and rods of the outer photoreceptor layers</strong></li>\n<li><strong>b-wave:</strong>\u00a0Corneal-<strong>positive deflection</strong>; derived from the <strong>inner retina, predominantly Muller and bipolar cells</strong></li>\n<li><strong>c-wave:</strong>\u00a0Derived from the <strong>retinal pigment epithelium and photoreceptors</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ea0756b7715c49a895bfce71c6c435b9x1280x949.JPEG"
    ]
  },
  {
    "text": "Which of the following is false about the newborn eye?",
    "choices": [
      {
        "id": 1,
        "text": "Shallow anterior chamber"
      },
      {
        "id": 2,
        "text": "Spherical lens is present"
      },
      {
        "id": 3,
        "text": "Secretion of tears is absent"
      },
      {
        "id": 4,
        "text": "A refractive error of -2D is present"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>The newborn eye</strong> is usually <strong>hypermetropic</strong> by<strong> +2 to +3 D.</strong></p>\n<p>Features of the eye in a newborn:</p>\n<ul>\n<li>The<strong> anteroposterior diameter </strong>of the eyeball is about 70% of the adult size-\u00a016.5 mm.<strong>\u00a0</strong>Adult size\u00a0is attained by 7\u20138 years of age.</li>\n<li>The<strong> corneal diameter</strong> is approximately\u00a010 mm. Adult size (11.7 mm) is attained by 2 years of age.</li>\n<li>The<strong> anterior chamber</strong>\u00a0has a narrow-angle and is\u00a0<strong>shallow.</strong></li>\n<li>The<strong> pupil</strong> is <strong>small</strong> and does not dilate completely.</li>\n<li>The<strong> lens</strong>\u00a0has a\u00a0<strong>spherical</strong>\u00a0shape at birth and has infantile nucleus.</li>\n<li>The<strong> retina</strong>\u00a0is <strong>fully differentiated</strong>, except for the\u00a0macular area. The differentiation of\u00a0<strong>macula</strong>\u00a0occurs<strong>\u00a04\u20136 months </strong>after birth.</li>\n<li>The myelination of optic nerve fibers reaches upto the lamina cribrosa.</li>\n<li>The newborn is usually <strong>hypermetropic</strong> by<strong> +2</strong> to<strong> +3 D. </strong></li>\n<li>The <strong>orbit </strong>has more<strong> divergence (50\u00b0) </strong>as compared to adult (45\u00b0).</li>\n<li>The<strong> lacrimal gland </strong>is <strong>underdeveloped </strong>and tears are not secreted.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following cause Apollo conjunctivitis except",
    "choices": [
      {
        "id": 1,
        "text": "Adenovirus"
      },
      {
        "id": 2,
        "text": "Coxsackie virus"
      },
      {
        "id": 3,
        "text": "Picornavirus"
      },
      {
        "id": 4,
        "text": "Herpes simplex virus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Herpes simplex virus (HSV) </strong>can cause a <strong>follicular conjunctivitis</strong>, particularly in primary infection; this is usually <strong>unilateral </strong>and there are often associated skin vesicles.</p>\n<p><strong>Apollo conjunctivitis is acute haemorrhagic conjunctivitis</strong> caused by (mnemonic PACE):</p>\n<ul>\n<li>Picornavirus</li>\n<li>Adenovirus 11</li>\n<li>Coxsackie A-24 virus</li>\n<li>Enterovirus 70</li>\n</ul>\n<p>It has a <strong>rapid onset</strong>, and <strong>resolves within 1\u20132 weeks</strong>. <strong>Conjunctival haemorrhage is generally marked.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/adfeb16daa9e41bc865bd3b422f92256x665x235.PNG"
    ]
  },
  {
    "text": "Lesion shown in below given image is classified under which stage according to WHO grading of xerophthalmia",
    "choices": [
      {
        "id": 1,
        "text": "1A"
      },
      {
        "id": 2,
        "text": "1B"
      },
      {
        "id": 3,
        "text": "3A"
      },
      {
        "id": 4,
        "text": "3B"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Image shows <strong>Bitot spots</strong> which is classified under <strong>stage 1B</strong> of WHO staging of xerophthalmia.</p>\n<p><strong>WHO grading of xerophthalmia</strong></p>\n<p>XN = Night blindness</p>\n<p>X1 = Conjunctival xerosis (X1A) with Bitot spots (X1B)</p>\n<p>X2 = Corneal xerosis</p>\n<p>X3 = Corneal ulceration, less than one-third (X3A); more than one-third (X3B)</p>\n<p>XS = Corneal scar</p>\n<p>XF = Xerophthalmic fundus</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7fcce1f538bd4a98b2f2042ca5cee90c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Laser used in LASIK is _____________",
    "choices": [
      {
        "id": 1,
        "text": "ND:YAG laser"
      },
      {
        "id": 2,
        "text": "Holmium:YAG laser"
      },
      {
        "id": 3,
        "text": "Excimer laser"
      },
      {
        "id": 4,
        "text": "Argon laser"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Excimer laser</strong> is used in<strong> LASIK</strong> (Laser-assisted in situ keratomileusis).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Incorrect statement about lens is",
    "choices": [
      {
        "id": 1,
        "text": "Anterior surface is more convex than the posterior surface"
      },
      {
        "id": 2,
        "text": "Lens has highest protein concentration among all body tissues"
      },
      {
        "id": 3,
        "text": "Posterior pole is the thinnest region of capsule"
      },
      {
        "id": 4,
        "text": "Lens grows in size continuously throughout life"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>radius of curvature</strong> of the <strong>anterior surface of the lens is 10 mm</strong> and of the <strong>posterior surface is 6 mm</strong> i.e. <strong>posterior surface is more convex</strong>.</p>\n<p><strong>Option b: </strong>The lens is composed of <strong>64% water, 35% protein, and 1% lipid, carbohydrate and trace elements.</strong></p>\n<p>The <strong>protein concentration</strong> in the lens is actually <strong>the highest amongst body tissues.</strong></p>\n<p>The main types of proteins are alpha (31%), beta (55%) and gamma (2%) crystallins, and insoluble albuminoids (12%).</p>\n<p><strong>Option c: Lens capsule</strong> is <strong>thicker over the anterior surface</strong> than posterior surface. It is <strong>thickest at the pre-equator regions</strong> and <strong>thinnest at the posterior pole.</strong></p>\n<p><strong>Option d: </strong>The lens <strong>grows in size continuously</strong> throughout life, and in this respect it is unique among the organs of the body.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b3f79f55ca1043c6a19ab1d845a1b17bx656x483.JPEG"
    ]
  },
  {
    "text": "Identify the disorder associated with the type of cataract show in below given image",
    "choices": [
      {
        "id": 1,
        "text": "Diabetes mellitus"
      },
      {
        "id": 2,
        "text": "Myotonic dystrophy"
      },
      {
        "id": 3,
        "text": "Atopic dermatitis"
      },
      {
        "id": 4,
        "text": "Blunt trauma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Image shows <strong>shield-like dense anterior subcapsular plaque </strong>that wrinkles the anterior capsule which is characteristic of cataract seen in <strong>atopic dermatitis</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1e0be3e9cb06481f9cb427c46b643d39.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fd9e990f0c1a4321bffc142330787adfx595x395.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6701157dd6e64992bef3993bf5014f19x461x436.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1aac83f59ad4444d8bcc53a639879f8cx381x394.PNG"
    ]
  },
  {
    "text": "Which of the following is not a cause of Ectopia lentis",
    "choices": [
      {
        "id": 1,
        "text": "Hyperlysinaemia"
      },
      {
        "id": 2,
        "text": "Marfan\u2019s syndrome"
      },
      {
        "id": 3,
        "text": "Sulfite oxidase deficiency"
      },
      {
        "id": 4,
        "text": "Myasthenia gravis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Myasthenia gravis is <strong>not a cause</strong> of Ectopia lentis.&nbsp;Hyperlysinaemia, Marfan&rsquo;s syndrome, sulfite oxidase deficiency are all causes of <strong>Ectopia lentis</strong>.</p>\n<p><strong>Ectopia lentis</strong> refers to a hereditary or acquired<strong> displacement of the lens</strong> from its normal position.</p>\n<p><strong>Causes:</strong></p>\n<p><strong>Acquired</strong></p>\n<ul>\n<li>Trauma</li>\n<li>Pseudoexfoliation</li>\n<li>Inflammation, e.g. chronic cyclitis, syphilis</li>\n<li>Hypermature cataract</li>\n<li>Large eye, e.g. high myopia, buphthalmos</li>\n<li>Anterior uveal tumours</li>\n</ul>\n<p>Congenital:</p>\n<ul>\n<li><strong>Familial Ectopia lentis</strong> &ndash; Autosomal dominant, superotemporal displacement.</li>\n<li><strong>Ectopia lentis et pupillae</strong> - AR inheritance, displacement of the pupil and the lens in opposite directions</li>\n<li><strong>Marfan syndrome &ndash; Superotemporal</strong> displacement</li>\n<li><strong>Weil-Marchesani syndrome &ndash; Forward subluxation, spherophakia</strong></li>\n<li><strong>Homocytinuria - Inferonasal displacement</strong></li>\n</ul>\n<p><strong>Other systemic conditions </strong>associated with ectopia lentis include</p>\n<ul>\n<li><strong>Sulfite oxidase deficiency</strong> - Ectopia lentis is <strong>universal</strong></li>\n<li><strong>Stickler syndrome</strong> - Retinal detachment is the most common ocular manifestation</li>\n<li><strong>Ehlers&ndash;Danlos syndrome </strong></li>\n<li><strong>Hyperlysinaemia</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which surgery would you use the instrument shown below?",
    "choices": [
      {
        "id": 1,
        "text": "Cataract"
      },
      {
        "id": 2,
        "text": "Glaucoma"
      },
      {
        "id": 3,
        "text": "Lid surgeries"
      },
      {
        "id": 4,
        "text": "Corneal transplant"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows a\u00a0<strong>Ziegler knife</strong>, which is used to open the lens capsule and aspirate the lens material in <strong>congenital\u00a0</strong><strong>cataract surgeries</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/56ce7cc35a7744aaaa495b3b25864de7.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Haab\u2019s striae is due to tears in:",
    "choices": [
      {
        "id": 1,
        "text": "Bowman\u2019s membrane"
      },
      {
        "id": 2,
        "text": "Descemet\u2019s membrane"
      },
      {
        "id": 3,
        "text": "Corneal stroma"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Haab's striae</strong> are curvilinear healed breaks in Descemet membrane seen in case of <strong>buphthalmos (congenital glaucoma).\u00a0</strong>These occur because Descemet\u2019s membrane is less elastic than corneal stroma.\u00a0It is seen as double '<strong>tram-track</strong>' lines concentric to the limbus.</p>\n<p>Tears are:</p>\n<ul>\n<li>Usually peripheral</li>\n<li>Concentric with the limbus</li>\n<li>Appear as lines with double contour</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cccb9c112ab84afebf7d0a1801aae62ax280x236.PNG"
    ]
  },
  {
    "text": "Maximum resistance to aqueous outflow is at",
    "choices": [
      {
        "id": 1,
        "text": "Uveal meshwork"
      },
      {
        "id": 2,
        "text": "Corneoscleral meshwork"
      },
      {
        "id": 3,
        "text": "Juxtacanalicular meshwork"
      },
      {
        "id": 4,
        "text": "Schlemm\u2019s canal"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Juxtacanalicular/cribriform meshwork offers maximum resistance</strong> to aqueous outflow.</p>\n<p><strong>Aqueous outflow:</strong></p>\n<ul>\n<li><strong>Trabecular/conventional outflow</strong> \u2013 Main outlet <strong>draining 90% of aqueous</strong> via <strong>trabeculum into the Schlemm canal and then the episcleral veins.</strong></li>\n<li><strong>Uveoscleral outflow</strong> \u2013 Drains around <strong>10% of aqueous via ciliary body into the suprachoroidal space</strong>, and is drained by the <strong>venous circulation in the ciliary body, choroid and sclera.</strong></li>\n</ul>\n<p>Trabecular meshwork: It has 3 components</p>\n<ul>\n<li><strong>The uveal meshwork:</strong>\n<ul>\n<li>Innermost portion</li>\n<li>Consists of cord-like endothelial cell-covered strands arising from the iris and ciliary body stroma</li>\n<li>Intertrabecular spaces are relatively large and <strong>offer little resistance</strong> to the passage of aqueous.</li>\n</ul>\n</li>\n<li><strong>The corneoscleral meshwork:</strong>\n<ul>\n<li>Lies external to the uveal meshwork</li>\n<li><strong>Thickest portion</strong> of the trabeculum</li>\n<li>Composed of layers of connective tissue strands with overlying endothelial-like cells</li>\n<li>Intertrabecular spaces are smaller than those of the uveal meshwork, conferring greater resistance to flow.</li>\n</ul>\n</li>\n<li><strong>The juxtacanalicular (cribriform) meshwork:</strong>\n<ul>\n<li>Outer part of the trabeculum</li>\n<li>Consists of cells embedded in a dense extracellular matrix with narrow intercellular spaces</li>\n<li><strong>Offers the major proportion of normal resistance to aqueous outflow.</strong></li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ce910db79ed443d4b382b12ee423ef82x1280x1213.JPEG"
    ]
  },
  {
    "text": "A 26-year-old male presented with complaints of pain, photophobia, and redness in the eye following injury by vegetative matter. On examination, appearance is as shown in the below-given image. Which of the following statements is incorrect about this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Signs are more pronounced than symptoms"
      },
      {
        "id": 2,
        "text": "Wessely\u2019s immune ring is a feature"
      },
      {
        "id": 3,
        "text": "It can occur in immunocompromised patients"
      },
      {
        "id": 4,
        "text": "The hypopyon is sterile"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This patient with history of ocular injury due to <strong>vegetative matter</strong> with ocular <strong>pain</strong>, <strong>redness</strong>, and the image depicting a <strong>corneal ulcer</strong> with<strong> feathery margins</strong> and a <strong>hypopyon</strong> is likely to have a <strong>fungal corneal ulcer.</strong> In this condition, the hypopyon is not sterile.&nbsp;</p>\n<p><strong>Fungal</strong> or mycotic <strong>keratitis</strong> is seen in <strong>tropical</strong> <strong>countries</strong>, rural areas, and in individuals who are <strong>immunocompromised</strong>. It occurs due to inoculation with <em><strong>Aspergillus</strong>, <strong>Fusarium</strong>,</em> or <em><strong>Candida</strong></em> species. It is generally seen after ocular injury with vegetable matter.&nbsp;</p>\n<p>The <strong>signs</strong> of a fungal corneal ulcer are <strong>generally more pronounced</strong> than the <strong>symptoms</strong>. Signs include:&nbsp;</p>\n<ul>\n<li><strong>Dry slough</strong> with <strong>feathery</strong> <strong>borders</strong></li>\n<li>Thick, immobile, <strong>hypopyon</strong> that occurs due to direct invasion of anterior chamber by <strong>fungal hyphae</strong> in thick exudates</li>\n<li><strong>Wesseley's immune ring</strong> due to deposition of immune complexes and inflammatory cells around the ulcer</li>\n<li>Satellite lesions</li>\n<li><strong>Ciliary</strong> and <strong>conjunctival</strong> <strong>congestion</strong> (symptoms of pain, watering, and photophobia are less severe than in cases of bacterial corneal ulcers)</li>\n</ul>\n<p>Fungal corneal ulcers are treated <strong>topically</strong> with <strong>natamycin</strong>, <strong>voriconazole</strong>, <strong>nystatin</strong>, or <strong>amphotericin B drops</strong>. If the ulcers are severe with hypopyon, perforated, or if there is endophthalmitis, then <strong>systemic antifungals</strong> need to be provided. Examples include<strong> oral ketoconazole </strong>or<strong> voriconazole.</strong> Surgical management is indicated if the ulcer progresses despite medical therapy.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://daily-rounds-staging.s3.amazonaws.com/uploads/b00076e7ecb542d09afcc272f845026b.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Wedl cells are described in association with",
    "choices": [
      {
        "id": 1,
        "text": "Retinoblastoma"
      },
      {
        "id": 2,
        "text": "Glaucoma"
      },
      {
        "id": 3,
        "text": "Cataract"
      },
      {
        "id": 4,
        "text": "Lacrimal gland"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Wedl cells</strong> are associated with cataract especially <strong>posterior subcapsular cataract</strong>.</p>\n<p>Histopathologically, PSC is associated with <strong>posterior migration of the lens epithelial cells </strong>from the lens equator to the axis on the inner surface of the posterior capsule. During their migration to or after their arrival at the posterior axis, the cells <strong>undergo aberrant enlargement</strong>. These swollen cells are called\u00a0<strong>Wedl or\u00a0bladder cells.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1e149f5562904122b25fa59e5c4e66dbx502x470.PNG"
    ]
  },
  {
    "text": "90 day glaucoma is seen in:",
    "choices": [
      {
        "id": 1,
        "text": "Central retinal artery occlusion"
      },
      {
        "id": 2,
        "text": "Central retinal vein occlusion"
      },
      {
        "id": 3,
        "text": "Steroid induced glaucoma"
      },
      {
        "id": 4,
        "text": "Uveitis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>90 day glaucoma</strong> is seen in<strong>\u00a0central retinal vein occlusion</strong> because it <strong>typically occurs 3 months after the occlusive event</strong>.</p>\n<p><strong>Central retinal vein occlusions </strong>(CRVO) typically affect <strong>elderly patients</strong> in the sixth or seventh decade of life. Some of the risk factors include :</p>\n<ul>\n<li>Age &gt;50 years</li>\n<li><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"><strong>Hypertension</strong>, <strong>diabetes mellitus</strong></span></li>\n<li><strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Primary open-angle glaucoma</span></strong></li>\n<li><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"><strong>Oral contraceptive pills</strong> and hormone replacement therapy</span></li>\n<li><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Smoking</span></li>\n</ul>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">There are two variants - non-ischemic and ischemic.</span></p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"><strong>Non-ischemic CRVO</strong> is the most common clinical variety and presents with unilateral mild to moderate <strong>blurring of vision</strong> of sudden onset. <strong>Relative apparent pupillary defect</strong> (RAPD) is <strong>absent</strong> or very mild. Fundoscopy reveals mild venous congestion and tortuosity, with superficial peripheral flame-shaped hemorrhages.</span></p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"><strong>Ischemic CRVO</strong> refers to <strong>acute complete occlusion</strong> of the central retinal vein. It is characterized by marked <strong>sudden visual loss</strong> and<strong> RAPD is present</strong>. Fundoscopy shows <strong>massively engorged</strong>, congested and tortuous<strong> retinal veins</strong>. Retinal hemorrhages are massive giving a <strong>splashed tomato appearance</strong>. Cotton wool spots are numerous and the optic disc shows edema and hyperemia. In the late stages, <strong>neovascularization</strong> may be seen at the disc or in the periphery.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/f1ac1e86759c42faaa001c25abedb601.JPEG"
    ]
  },
  {
    "text": "Which of the following instruments can you use to measure corneal thickness?",
    "choices": [
      {
        "id": 1,
        "text": "Keratometer"
      },
      {
        "id": 2,
        "text": "Pachymeter"
      },
      {
        "id": 3,
        "text": "Specular microscopy"
      },
      {
        "id": 4,
        "text": "Ophthalmometer"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>pachymeter</strong> is used to <strong>measure</strong> <strong>corneal thickness.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/abfa0a4b23934c62a7a4c2db8199dc3cx362x406.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f7651f1101974d02ac5918c5a62c7eb2x452x452.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aae445b547b34ffaaa1223cfddedee4bx533x468.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c71f0a0ec10d46d5b26c40fc2a84b68dx974x472.PNG"
    ]
  },
  {
    "text": "Treatment of malignant glaucoma is",
    "choices": [
      {
        "id": 1,
        "text": "Atropine local drops"
      },
      {
        "id": 2,
        "text": "IV mannitol"
      },
      {
        "id": 3,
        "text": "Pars plana vitrectomy"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>All are used in management of malignant glaucoma.</p>\n<p><strong>Malignant glaucoma:</strong></p>\n<ul>\n<li>It can be seen <strong>after</strong> any <strong>intraocular surgery.</strong></li>\n<li>Forward flow of aqueous is\u00a0blocked as tips of ciliary processes rotate forward and press against lens/IOL/Anterior hyaloid of vitreous. Hence aqueous starts collecting in vitreous cavity.</li>\n</ul>\n<p><strong>Clinical features</strong>:</p>\n<ul>\n<li>Persistent Flat AC</li>\n<li><strong>Negative seidel\u2019s test</strong></li>\n<li>Raised IOP</li>\n</ul>\n<p><strong>Treatment</strong></p>\n<ul>\n<li><strong>Atropine:</strong>\n<ul>\n<li>Malignant glaucoma also called <strong>Inverse glaucoma</strong> since atropine is used.</li>\n<li>It dilates the ciliary ring and increase the distance between the ciliary processes and the equator of the lens, thereby tightening the zonule and pulling the lens posteriorly into its normal position.</li>\n</ul>\n</li>\n<li><strong>Intravenous mannitol</strong> may be used if mydriatics are ineffective, in order to shrink the vitreous gel and allow the lens to move posteriorly.</li>\n<li>Nd: YAG laser hyaloidotomy - making opening in the anterior hyaloid membrane</li>\n<li>Pars plana vitrectomy</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Drowsiness is side effect of which of the following agents used in the treatment of glaucoma",
    "choices": [
      {
        "id": 1,
        "text": "Betaxolol"
      },
      {
        "id": 2,
        "text": "Apraclonidine"
      },
      {
        "id": 3,
        "text": "Latanoprost"
      },
      {
        "id": 4,
        "text": "Mannitol"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Apraclonidine</strong> is a <strong>selective alpha 2 agonist</strong> used in <strong>treatment of glaucoma.</strong></p>\n<p><strong>Drowsiness, headache and fatigue</strong> are its systemic side effects.</p>\n<p><strong>Allergies and fluctuations in visual acuity</strong> are the ocular side effects.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Volume of vitreous",
    "choices": [
      {
        "id": 1,
        "text": "1 mL"
      },
      {
        "id": 2,
        "text": "2 mL"
      },
      {
        "id": 3,
        "text": "3 mL"
      },
      {
        "id": 4,
        "text": "4 mL"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>vitreous</strong> is a <strong>transparent extracellular gel</strong> consisting of <strong>collagen, soluble proteins, hyaluronic acid and water.</strong></p>\n<p>Its <strong>total volume is approximately 4.0 ml.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Skin depigmentation, bilateral uveitis, poliosis, and tinnitus are features of",
    "choices": [
      {
        "id": 1,
        "text": "Vogt-Kayanagi-Harada syndrome"
      },
      {
        "id": 2,
        "text": "Waardenburg syndrome"
      },
      {
        "id": 3,
        "text": "Apert syndrome"
      },
      {
        "id": 4,
        "text": "Werner syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Uveitis associated with vitiligo, poliosis, tinnitus and vertigo\u00a0</strong>suggest diagnosis of <strong>Vogt-Koyanagi-Harada syndrome.</strong></p>\n<p><strong>Vogt-Koyanagi-Harada syndrome:</strong></p>\n<ul>\n<li><strong>Idiopathic</strong> multisystem <strong>autoimmune disease</strong> featuring <strong>inflammation of melanocyte-containing tissues</strong> such as the <strong>uvea, ear and meninges</strong>.</li>\n<li>Associated with <strong>HLA-DR1 and HLA-DR4</strong></li>\n<li>Subdivided into\n<ul>\n<li><strong>Vogt\u2013Koyanagi disease</strong> - characterized mainly by skin changes and anterior uveitis</li>\n<li><strong>Harada disease</strong> - neurological features and exudative retinal detachments predominate</li>\n</ul>\n</li>\n</ul>\n<p><strong>Clinical features:</strong></p>\n<p><strong>Prodromal phase:</strong></p>\n<ul>\n<li><strong>N</strong><strong>eurological </strong>- meningitis and rarely encephalopathy with cranial nerve paresis and other focal lesions</li>\n<li><strong>Auditory manifestations</strong> (tinnitus, vertigo and deafness)</li>\n<li><strong>Cranial nerve palsies and optic neuritis</strong> may occur</li>\n</ul>\n<p><strong>Acute uveitic phase: </strong></p>\n<ul>\n<li><strong>Dalen\u2013Fuchs nodules \u2013 </strong>small, discrete, yellow white lesions usually at the periphery formed due to accumulation of epitheloid cells and lymphocytes along with proliferation of retinal pigment epithelium between Bruchs membrane and RPE</li>\n<li>Vitritis</li>\n<li>Papillitis</li>\n<li>Exudative retinal detachments</li>\n</ul>\n<p><strong>Convalescent phase:</strong></p>\n<ul>\n<li><strong>Localized alopecia, poliosis and vitiligo</strong></li>\n<li>Depigmented fundus appearance - <strong>\u2018sunset glow\u2019 fundus</strong></li>\n<li>Depigmented limbal lesions <strong>- Sugiura sign</strong> in pigmented, especially Japanese, patients</li>\n</ul>\n<p>Images below show Dalen Fuch's nodules and sunset glow fundus.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d04e9e7bef3641cda05281e17939f9cbx508x442.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ddd8df61feb24cebb43afc4403604126x506x424.PNG"
    ]
  },
  {
    "text": "Which of the following is currently used for the prophylaxis of non infectious uveitis in LUMINATE programme?",
    "choices": [
      {
        "id": 1,
        "text": "Methotrexate"
      },
      {
        "id": 2,
        "text": "Cyclosporine"
      },
      {
        "id": 3,
        "text": "Voclosporin"
      },
      {
        "id": 4,
        "text": "Infliximab"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>LUMINATE </strong>(Lux Uveitis Multicenter Investigation of a New Approach to Treatment) clinical development program was initiated in 2007 to <strong>assess </strong>the safety and efficacy of<strong> voclosporin </strong>for the treatment, maintenance, and control of all forms of<strong> noninfectious uveitis.</strong></p>\n<p>Currently, available therapies are burdened with toxicities and/or lack definitive evidence of efficacy.</p>\n<p>Voclosporin, a rationally designed <strong>novel calcineurin inhibitor</strong>, exhibits a <strong>favourable safety profile, </strong>a strong correlation between pharmacokinetic and pharmacodynamic response, and a wide therapeutic window.\u00a0</p>\n<p>If LUMINATE is successful, voclosporin will become the first Food and Drug Administration-approved corticosteroid-sparing agent for this condition.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Amsler sign is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Vogt-Kayanagi-Harada syndrome"
      },
      {
        "id": 2,
        "text": "Fuch\u2019s uveitis"
      },
      {
        "id": 3,
        "text": "Sarcoid uveitis"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Amsler sign</strong> refers to <strong>fine filiform hemorrhage from the opposite angle on opening anterior chamber during cataract surgery</strong>.</p>\n<p>It is seen in case of <strong>Fuch\u2019s heterochromic iridocyclitis.</strong></p>\n<ul>\n<li>As the name suggests it is <strong>chronic low-grade non-granulomatous cyclitis associated with heterochromia of iris.</strong></li>\n<li><strong>Fine stellate keratic precipitates </strong>at the back of cornea differentiate it from congenital heterochromia.</li>\n</ul>\n<p>Other features:</p>\n<ul>\n<li>Diffuse stromal iris atrophy</li>\n<li>Faint aqueous flare</li>\n<li>Absence of posterior Synechiae</li>\n<li>Rubeosis iridis</li>\n<li>Posterior subcapsular cataract</li>\n<li>Glaucoma \u2013 typically occurs late</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false regarding the condition shown in the image below?",
    "choices": [
      {
        "id": 1,
        "text": "Treatment of larger defects requires skin grafts."
      },
      {
        "id": 2,
        "text": "It mostly involves upper eyelid."
      },
      {
        "id": 3,
        "text": "Treacher Collins syndrome is associated with coloboma of eyelid."
      },
      {
        "id": 4,
        "text": "It usually occurs near the temporal side"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<div class=\"ng-star-inserted\">\n<div class=\"table-responsive font-weight-light answer-scroll ng-star-inserted\">\n<p>The given image shows a\u00a0<strong>coloboma</strong>\u00a0of the upper eyelid. <strong>Option D</strong> is the false statement as it usually <strong>occurs near the nasal side</strong> and not the temporal side.</p>\n<p><strong>Coloboma</strong> of the eyelid is a partial or full-thickness eyelid defect. It more frequently involves the\u00a0<strong>upper lid</strong>\u00a0(Option B) than the lower lid and usually occurs on the\u00a0<strong>nasal side</strong>.\u00a0It occurs when eyelid development is incomplete, due to failure of <strong>migration</strong> of <strong>lid ectoderm</strong> to fuse with the lid folds.</p>\n<p><strong>Upper-lid</strong> colobomas occur at the junction of the middle\u00a0and inner thirds and have a relatively strong association with<strong>\u00a0cryptophthalmos</strong>, facial abnormalities,\u00a0and <strong>Goldenhar syndrome</strong>. (Cryptophthalmos is a congenital anomaly in which the eyelids\u00a0are absent, replaced by a continuous layer of skin).\u00a0<strong>Lower lid</strong> colobomas occur at the junction of the middle\u00a0and outer thirds and are frequently associated\u00a0with systemic conditions.\u00a0</p>\n<p><strong>Treacher Collins</strong> <strong>syndrome</strong>\u00a0is\u00a0characterized by malformations in the derivatives of first and second branchial arches, primarily mandibular and ear anomalies. <strong>Lower\u00a0eyelid coloboma\u00a0</strong>(Option C) is a feature of this syndrome along with slanted palpebral apertures, cataracts,\u00a0microphthalmos, and lacrimal atresia.\u00a0</p>\n<p>Small defects can be managed by primary closure, while <strong>large defects</strong> require <strong>skin grafts</strong> (Option A) and <strong>rotation flaps</strong>.\u00a0</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/934bade79f5247699ac575c42c105cdb.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1d30e9d509694007ad37e9bdd6437ffex1280x1251.JPEG"
    ]
  },
  {
    "text": "WHO criteria for blindness is visual acuity less than",
    "choices": [
      {
        "id": 1,
        "text": "1/60"
      },
      {
        "id": 2,
        "text": "6/60"
      },
      {
        "id": 3,
        "text": "3/60"
      },
      {
        "id": 4,
        "text": "6/18"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>According to the<strong> WHO</strong>,<strong> blindness</strong>\u00a0is\u00a0<strong>defined</strong>\u00a0as presenting\u00a0<strong>visual acuity of less than 3/60</strong>, or a corresponding <strong>visual field loss to less than 10\u00b0\u00a0</strong>in the <strong>better eye.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Angioid streaks in fundus are seen in case of",
    "choices": [
      {
        "id": 1,
        "text": "Down\u2019s syndrome"
      },
      {
        "id": 2,
        "text": "Hypoparathyroidism"
      },
      {
        "id": 3,
        "text": "Sickle cell disease"
      },
      {
        "id": 4,
        "text": "Osteoporosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Angioid streaks</strong> are found in case of <strong>sickle cell disease.</strong></p>\n<p><strong>Angioid streaks</strong> are <strong>crack-like dehiscences</strong> in brittle thickened and calcified <strong>Bruch membrane</strong>, associated with atrophy of the overlying RPE.</p>\n<p><strong>Causes:</strong></p>\n<ul>\n<li>Pseudoxanthoma elasticum (PXE)</li>\n<li>Ehlers\u2013Danlos syndrome</li>\n<li>Paget disease</li>\n<li>Haemoglobinopathies - Sickle-cell trait and disease and thalassaemias</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/615f0b0ecc674aca8e055f1b3a3a9417x616x393.PNG"
    ]
  },
  {
    "text": "The lesion in the below-given image is a side effect of:",
    "choices": [
      {
        "id": 1,
        "text": "Chloroquine"
      },
      {
        "id": 2,
        "text": "Quinine"
      },
      {
        "id": 3,
        "text": "Methanol"
      },
      {
        "id": 4,
        "text": "Ethambutol"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Image shows <strong>bull\u2019s eye macular lesion</strong>, characterized by a <strong>foveolar island of pigment surrounded by a depigmented zone of RPE atrophy,</strong> which is itself encircled by a hyperpigmented ring.</p>\n<p>It is a <strong>side effect of Chloroquine.</strong></p>\n<p>Other causes are:</p>\n<ul>\n<li><strong>Cone dystrophy</strong></li>\n<li>Cone-rod dystrophy</li>\n<li>Ceroid lipofuscinosis</li>\n<li><strong>Stargardt's and fundus flavimaculatus</strong></li>\n<li>Fenestrated sheen macular dystrophy</li>\n<li>Parafoveal atrophy of RPE secondary to AMD</li>\n<li>Central areolar choroidal dystrophy</li>\n<li>Benign concentric annular macular dystrophy</li>\n<li>Juvenile Batten's disease</li>\n<li>Fucosidosis</li>\n<li><strong>Clofazimine maculopathy </strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7f9b3ab3a99c44578225b8ee76ad74d3.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "True statement about fovea is",
    "choices": [
      {
        "id": 1,
        "text": "Has maximum visual acuity"
      },
      {
        "id": 2,
        "text": "Lowest threshold for light"
      },
      {
        "id": 3,
        "text": "Most sensitive part of retina"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>The fovea</strong></p>\n<ul>\n<li>Depression in the retinal surface at the <strong>centre of the macula</strong> with a <strong>diameter of 1.5 mm.</strong></li>\n<li><strong>It has lowest threshold for light and is responsible for maximum visual acuity.</strong></li>\n<li><strong>It is the most sensitive part of retina.</strong></li>\n</ul>\n<p><strong>Anatomy of retina:</strong></p>\n<p>It is divided by retinal equator (Imaginary line lying in line with the exit of 4 vena verticose) into peripheral retina and posterior pole.</p>\n<p><strong>Posterior pole:</strong></p>\n<p><strong>Optic disc:</strong></p>\n<ul>\n<li>Circular area of <strong>1.5mm diameter</strong></li>\n<li>Depression in centre \u2013 <strong>physiological cup</strong></li>\n<li><strong>Central retinal artery and vein emerge</strong> through the centre of this cup</li>\n</ul>\n<p><strong>Macula lutea</strong></p>\n<p>Also called <strong>yellow spot</strong> - yellow xanthophylls carotenoid pigments lutein and zeaxanthin in far higher concentration than the peripheral retina</p>\n<ul>\n<li><strong>The fovea</strong>\n<ul>\n<li>Depression in the retinal surface at the <strong>centre of the macula</strong> with a <strong>diameter of 1.5 mm.</strong></li>\n<li><strong>It has lowest threshold for light and is responsible for maximum visual acuity.</strong></li>\n<li><strong>It is the most sensitive part of retina.</strong></li>\n</ul>\n</li>\n<li><strong>The foveola </strong>forms the <strong>central floor of the fovea</strong> and has a <strong>diameter of 0.35 mm.</strong> It is the <strong>thinnest part of the retina </strong>and is <strong>devoid of ganglion cells</strong>, consisting <strong>only of a high density of cone photoreceptors</strong> and their nuclei, together with M\u00fcller cells.</li>\n<li><strong>The umbo </strong>is a depression in the very <strong>centre of the foveola</strong> which corresponds to the foveolar light reflex, loss of which may be an early sign of damage.</li>\n<li><strong>The foveal avascular zone </strong>- a central area containing no blood vessels but surrounded by a continuous network of capillaries.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5f743e2ed32046098900e1a6dcc37883x471x468.PNG"
    ]
  },
  {
    "text": "Mizuo phenomenon is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Morning glory syndrome"
      },
      {
        "id": 2,
        "text": "Optic disc hypoplasia"
      },
      {
        "id": 3,
        "text": "Oguchi\u2019s disease"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Mizuo phenomenon is seen in case of Oguchi&rsquo;s disease </strong>(AR).</p>\n<p>The fundus has an <strong>unusual golden yellow colour in the light-adapted state,</strong> which becomes <strong>normal after prolonged dark adaptation (Mizuo or Mizuo&ndash;Nakamura phenomenon)</strong>.</p>\n<p><strong>Rod function is absent</strong> after 30 minutes of dark adaptation but recovers to a near-normal level after a long period of dark adaptation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/074d2e4c70ed4fbd9a53f56d214c6cf6x806x387.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3b2db9268590488bb9ea8e01216f5f03x545x539.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/245871fd6f8f4d93810dd67106133746x449x397.PNG"
    ]
  },
  {
    "text": "Equal and simultaneous innervation to a pair of yoke muscles is explained by __________",
    "choices": [
      {
        "id": 1,
        "text": "Sherrington's law"
      },
      {
        "id": 2,
        "text": "Hering's law"
      },
      {
        "id": 3,
        "text": "Donder's law"
      },
      {
        "id": 4,
        "text": "Listing's law"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Equal and simultaneous innervation to a pair of yoke muscles is explained by the<strong>&nbsp;Hering's law of equal innervation.</strong></p>\n<p>&nbsp;<strong>Hering's law of equal innervation</strong></p>\n<p>Whenever an impulse for the performance of an eye movement is sent out, corresponding yoke muscles of each eye receive equal innervations to contract or to relax. This is the law of equal innervations proposed by Hering.</p>\n<ul>\n<li>Eg: During levoversion, the right medial rectus and left lateral rectus receives an equal and simultaneous flow of innervations.</li>\n</ul>\n<p><strong>Sherrington's law of reciprocal innervation </strong>(Option A):</p>\n<p>It states that during the initiation of an eye movement, increased innervation to an extraocular muscle is accompanied by simultaneous inhibition (a reciprocal decrease in innervation) of the direct antagonist of the contracting muscle of the same eye.</p>\n<ul>\n<li>Eg:&nbsp;During levoversion, An increased innervational flow to the right medial and left lateral rectus, accompanied by decreased flow of innervations to right lateral rectus and left medial rectus &nbsp;</li>\n</ul>\n<p><strong>Donders' law </strong>(Option C):</p>\n<p>It states that for anyone gaze direction, the eye always assumes the same unique orientation in 3 dimensions. The orientation is always the same irrespective of where the eye came from.&nbsp;</p>\n<ul>\n<li>For example, the orientation of the eye when looking up and right is the same when the eye reached this position by first rotating right and then up or first up and then right.</li>\n</ul>\n<p><strong>Listing's Law </strong>(Option D):</p>\n<p>It&nbsp;is the specific realization of the more general 'Donders'&nbsp;law', which states that for any one gaze direction the <strong>eye's 3D spatial orientation is unique and independent of how the eye reached that gaze direction</strong> (previous gaze directions / eye orientations / temporal movements).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Length of intraocular part of the optic nerve",
    "choices": [
      {
        "id": 1,
        "text": "1 mm"
      },
      {
        "id": 2,
        "text": "9 mm"
      },
      {
        "id": 3,
        "text": "16 mm"
      },
      {
        "id": 4,
        "text": "24 mm"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Intraocular part of optic nerve</strong> is approximately <strong>1mm in length. </strong></p>\n<p>The optic nerve consists of approximately 1.2 million axons that arise from the retinal ganglion cells and has four parts:\u00a0</p>\n<ul>\n<li><strong>Intraocular portion (1 mm)</strong>, i.e. the optic nerve head visible as the optic disc on fundus examination</li>\n<li><strong>Intra-orbital portion (25-30 mm)</strong></li>\n<li><strong>Intracanalicular portion (5-9 mm)</strong></li>\n<li><strong>Intracranial portion (10-16 mm)</strong> - goes up to the optic chiasma</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Angle represented in below given image is",
    "choices": [
      {
        "id": 1,
        "text": "Angle alpha"
      },
      {
        "id": 2,
        "text": "Angle gamma"
      },
      {
        "id": 3,
        "text": "Angle kappa"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Image represents <strong>angle kappa between visual axis and pupillary axis.</strong></p>\n<p>Clinically this is the <strong>angle usually measured.</strong>\u00a0</p>\n<p>It is <strong>positive in pseudo-exotropria and negative in pseudo-esotropia.</strong></p>\n<p><strong>Axes of the eye:</strong></p>\n<ul>\n<li><strong>Optic axis</strong> \u2013 Line passing through the centre of cornea, centre of lens and meets retina on nasal side of fovea.</li>\n<li><strong>Visual axis</strong> \u2013 Line passing through fixation point, nodal point and fovea.</li>\n<li><strong>Fixation axis</strong> \u2013 Line passing through fixation point and centre of rotation.</li>\n<li><strong>Pupillary line</strong> \u2013 Line perpendicular to the cornea at the point coinciding to the centre of pupil.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9ca115461be94ddca7121bacee8defbd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ad5e63c66a5e4dc0998e57fe25a9af12x1280x1125.JPEG"
    ]
  },
  {
    "text": "Diagnosis is",
    "choices": [
      {
        "id": 1,
        "text": "Polycoria"
      },
      {
        "id": 2,
        "text": "Iridodialysis"
      },
      {
        "id": 3,
        "text": "Heterochromia iridis"
      },
      {
        "id": 4,
        "text": "Sunset syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Image shows <strong>D-shaped pupil</strong> which is seen in the case of <strong>iridodialysis.</strong></p>\n<p>Iridodialysis - <strong>Iris is torn away from its ciliary attachment</strong> for a variable distance, occurs more frequently.</p>\n<p>A black biconvex area is seen at the periphery, and the pupillary edge bulges slightly inwards forming a 'D'-shaped pupil.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/eb78368c31ad46e6834caa0d62b505ea.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4a951255fe7d41deb64c5df38a537d4fx720x433.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a694d1b7728541cab0b43f8af7a279ccx720x669.JPEG"
    ]
  },
  {
    "text": "Stye is",
    "choices": [
      {
        "id": 1,
        "text": "Suppurative inflammation of Zeis gland"
      },
      {
        "id": 2,
        "text": "Suppurative inflammation of meibomian gland"
      },
      {
        "id": 3,
        "text": "Chronic granulomatous inflammation of meibomian gland"
      },
      {
        "id": 4,
        "text": "Non suppurative inflammation of Zeis Gland"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Hordeolum externum or stye </strong>is a <strong>suppurative inflammation of a Zeis gland.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7898fbd3ce4c44bfab390247c17e5f42x720x540.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e10152d13b69447c82546df8ed33ac91x618x464.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0fabfb9505fb4cd58fa2730f0bd1a53ax618x488.PNG"
    ]
  },
  {
    "text": "Most common primary intraocular malignancy in adults is",
    "choices": [
      {
        "id": 1,
        "text": "Retinoblastoma"
      },
      {
        "id": 2,
        "text": "Malignant melanoma of choroid"
      },
      {
        "id": 3,
        "text": "Rhabdomyosarcoma"
      },
      {
        "id": 4,
        "text": "Haemangioma of choroid"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Choroidal melanoma</strong> is the <strong>most common primary intraocular malignancy in adults</strong> and accounts for 80% of all uveal melanomas.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not true about retinitis pigmentosa?",
    "choices": [
      {
        "id": 1,
        "text": "Retinal pigmentation"
      },
      {
        "id": 2,
        "text": "Pale waxy disc"
      },
      {
        "id": 3,
        "text": "Narrowing of vessels"
      },
      {
        "id": 4,
        "text": "ERG \u2013 normal"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Electroretinogram</strong> (ERG) is <strong>abnormal </strong>in<strong> retinitis pigmentosa\u00a0</strong>(RP).</p>\n<p><strong>ERG</strong> is a sensitive diagnostic test in retinitis pigmentosa that shows <strong>reduced</strong> scotopic, subnormal <strong>responses</strong> in early disease and becomes completely <strong>extinguished</strong> in <strong>advanced disease</strong>. <strong>Electroocoulogram</strong> (EOG) is also <strong>abnorma</strong>l in retinitis pigmentosa.</p>\n<p>Retinitis pigmentosa (RP) is an inherited or acquired <strong>pigmentatory retinal dystrophy</strong> affecting the rods more than the cones. The earliest manifestation is <strong>worsening</strong> of <strong>night blindness\u00a0</strong>and <strong>delayed adaptation</strong> which gradually progresses to <strong>tunnel vision</strong> and ultimately <strong>loss</strong> of <strong>central vision</strong>.</p>\n<p>The <strong>classic triad</strong> of findings in RP comprises:</p>\n<ol>\n<li>Bone-spicule retinal pigmentation</li>\n<li>Arteriolar attenuation</li>\n<li>\u2018Waxy\u2019 disc pallor</li>\n</ol>\n<p>The image below shows the classical <strong>triad</strong> findings of <strong>retinitis pigmentosa</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d223e8c22588422f9573e961c31dd78dx500x333.PNG"
    ]
  },
  {
    "text": "Which of the following is a feature of indirect ophthalmoscopy?",
    "choices": [
      {
        "id": 1,
        "text": "15 times magnification"
      },
      {
        "id": 2,
        "text": "Image is erect and virtual"
      },
      {
        "id": 3,
        "text": "Binocular vision"
      },
      {
        "id": 4,
        "text": "Smaller field of focus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Indirect ophthalmoscope needs a <strong>binocular vision.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Episodic transient obscuration of vision on exertion and on exposure to heat, which recovers on resting or moving away from the heat in an isolated optic neuritis patient is called______",
    "choices": [
      {
        "id": 1,
        "text": "Riddoch phenomenon"
      },
      {
        "id": 2,
        "text": "Pulfrichs\u2019 phenomenon"
      },
      {
        "id": 3,
        "text": "Uhthoff\u2019s phenomenon"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Episodic transient obscuration of vision on exertion and on exposure to heat, which recovers on resting or moving away from the heat in an isolated optic neuritis patient is called&nbsp;<strong>Uhthoff&rsquo;s phenomenon.</strong></p>\n<p><strong>Uhthoff&rsquo;s symptoms</strong></p>\n<ul>\n<li><strong>Episodic transient obscuration of vision</strong> on exertion and on <strong>exposure to heat</strong>, which recovers on resting or moving away from the heat.</li>\n<li>Usually, occurs while having a bath.</li>\n<li>Vision deteriorates on having a bath with <strong>hot water</strong>.</li>\n</ul>\n<p><strong>Pulfrich&rsquo;s phenomenon</strong> <strong>(Option b)</strong></p>\n<ul>\n<li><strong>Depth perception</strong>, particularly for the <strong>moving object</strong> may be <strong>impaired.</strong></li>\n<li>Both are seen in<strong> Multiple sclerosis.</strong></li>\n</ul>\n<p><strong>Option c:</strong></p>\n<p><strong>Riddoch phenomenon</strong></p>\n<ul>\n<li>Ability to perceive <strong>kinetic</strong> but <strong>not static</strong> targets</li>\n<li>Seen in <strong>cortical blindness</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The structure involved in Tolosa-Hunt syndrome is :",
    "choices": [
      {
        "id": 1,
        "text": "Superior orbital fissure"
      },
      {
        "id": 2,
        "text": "Orbital apex"
      },
      {
        "id": 3,
        "text": "Cavernous sinus"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>All the above mentioned structures are involved in\u00a0<strong>Tolosa\u2013Hunt syndrome.</strong></p>\n<p><strong>Tolosa\u2013Hunt syndrome</strong> refers to <strong>idiopathic nonspecific granulomatous inflammation</strong> involving the <strong>superior orbital fissure</strong>, and/or <strong>orbital apex</strong> and/or <strong>cavernous sinus</strong>.</p>\n<p>Clinically, it manifests as <strong>painful</strong> <strong>ophthalmoplegia</strong> and depending upon the extent of involvement may present as superior orbital fissure syndrome or orbital apex syndrome.</p>\n<p><strong>Superior orbital fissure syndrome</strong> is characterized by:</p>\n<ul>\n<li>Pain, typically labeled as retro\u2013orbital ache</li>\n<li>Sensory loss/disturbances in the distribution of ophthalmic division of 5th cranial nerve.</li>\n<li>Ipsilateral ophthalmoplegia due to 3rd, 4th and 6th cranial nerve involvement</li>\n<li>Ptosis due to 3rd nerve paralysis.</li>\n</ul>\n<p><strong>Orbital apex syndrome</strong> includes:</p>\n<ul>\n<li>Features of <strong>superior orbital fissure syndrom</strong>e described above</li>\n<li>Features of <strong>optic nerve </strong>involvement, i.e. early visual loss and afferent pupillary defect.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following muscles originate from apex of orbit except",
    "choices": [
      {
        "id": 1,
        "text": "Superior rectus"
      },
      {
        "id": 2,
        "text": "Superior oblique"
      },
      {
        "id": 3,
        "text": "Inferior rectus"
      },
      {
        "id": 4,
        "text": "Inferior oblique"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Inferior oblique</strong> is the <strong>only extraocular muscle not arising from the apex of the orbit.</strong></p>\n<p><strong>Inferior oblique:</strong></p>\n<ul>\n<li><strong>Origin:</strong> <strong>Anteriorly from the lower and inner orbital walls near the lacrimal fossa</strong> \u2013 orbital surface of maxilla.</li>\n<li>It then passes <strong>below the inferior rectus</strong> (i.e. the inferior rectus lies between the globe and inferior oblique muscle)</li>\n<li><strong>Insertion: Sclera </strong>below and lateral to the posterior pole of the globe.</li>\n<li><strong>Nerve supply: Inferior division of occulomotor nerve</strong></li>\n<li><strong>Function:</strong>\n<ul>\n<li>Primary action \u2013 Extortion</li>\n<li>Secondary action - Elevation (best when eye is in adducted position) and abduction</li>\n</ul>\n</li>\n</ul>\n<p>(<strong>Mnemonic: RAD</strong> \u2013 Recti are adductors; <strong>SIN</strong> \u2013 Superiors are intortors)</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6571bad581334f198bdadb65a4017a27x814x308.PNG"
    ]
  },
  {
    "text": "Fuchs islets are found in relation to",
    "choices": [
      {
        "id": 1,
        "text": "Phlycten"
      },
      {
        "id": 2,
        "text": "Pterygium"
      },
      {
        "id": 3,
        "text": "Pinguecula"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Fuchs islets</strong> are <strong>small discrete whitish flecks</strong> consisting of clusters of pterygial epithelial cells often present at the <strong>advancing edge of a Pterygium</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Ophthalmology Test I';
        const quizFilename = 'ophthalmology-test-i-1faa461c.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>