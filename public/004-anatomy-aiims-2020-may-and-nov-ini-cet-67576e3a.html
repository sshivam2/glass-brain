<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>004 Anatomy Aiims 2020 (May And Nov Ini-Cet) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Anatomy
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">24</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Given is a model of embryological development of the heart. Which structure develops from the area marked as \"A\" ?",
    "choices": [
      {
        "id": 1,
        "text": "Atria"
      },
      {
        "id": 2,
        "text": "Left Ventricle"
      },
      {
        "id": 3,
        "text": "Infundibulum"
      },
      {
        "id": 4,
        "text": "Interventricular septum"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The structure&nbsp;marked is <strong>conus cordis </strong>(middle part of bulbus cordis)<strong>.</strong> The <strong>infundibulum of the heart</strong> develops from this structure.</p>\n<p>The model shows the embryologic stage of the heart at which both the heart tubes have fused and are undergoing dextro-looping or bending. This happens around day 23 of intrauterine life.</p>\n<table width=\"372\">\n<tbody>\n<tr>\n<td colspan=\"2\"><strong>Heart tube and its derivatives&nbsp;</strong></td>\n</tr>\n<tr>\n<td><strong>Part of the heart tube</strong></td>\n<td><strong>Derivative structure in the heart</strong></td>\n</tr>\n<tr>\n<td>\n<p class=\"p2\">Bulbus cordis</p>\n<ul>\n<li class=\"p2\">Proximal 1/3&nbsp;</li>\n</ul>\n<p>&nbsp;</p>\n<ul>\n<li class=\"p2\">Middle 1/3 (conus cordis)</li>\n</ul>\n<p>&nbsp;</p>\n<ul>\n<li class=\"p2\">Distal 1/3 (truncus arteriosus)</li>\n</ul>\n</td>\n<td>\n<p>&nbsp;</p>\n<ul>\n<li class=\"p2\">Trabeculated part of Rt.ventricle</li>\n</ul>\n<p>&nbsp;</p>\n<ul>\n<li class=\"p2\">Outflow tract of Rt. and Lt.ventricles</li>\n</ul>\n<p>&nbsp;</p>\n<ul>\n<li class=\"p2\">Root and proximal portions of aorta and pulmonary artery</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>Primitive ventricle</td>\n<td>\n<ul>\n<li>Trabeculated part of the Lt.ventricle</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>Primitive atrium</td>\n<td>\n<ul>\n<li>The common atrium that splits to Rt. and Lt.atrium</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c665ec22481e4dea9d6ae41b862b817b.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c2640596dfbe4215bcd56556366b593cx1280x1103.JPEG"
    ]
  },
  {
    "text": "A muscle is attached to the area marked in the given image. What is the action of this muscle on the hip joint?",
    "choices": [
      {
        "id": 1,
        "text": "Flexion and  medial rotation"
      },
      {
        "id": 2,
        "text": "Adduction and  lateral rotation"
      },
      {
        "id": 3,
        "text": "Abduction and  medial rotation"
      },
      {
        "id": 4,
        "text": "Extension and  lateral rotation"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The area marked in the given image is the <strong>gluteal tuberosity</strong>. The muscle that is inserted here is the&nbsp;<strong>gluteus maximus</strong> which causes <strong>extension and lateral rotation of the hip joint.</strong></p>\n<p>Gluteus maximus inserts onto iliotibial tract (3/4th part) and deep fibers (1/4th) attach on gluteal tuberosity (marked in image). It is supplied by the inferior gluteal nerve. It is the chief extensor of the lower limb at the hip joint. It additionally also causes lateral rotation, abduction.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7eb3e0adc51e4190a602f33fad59c876.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d2124d735e1c47acb776832424ac6f13x1280x2213.PNG"
    ]
  },
  {
    "text": "Neurotransmitter secreted by the area marked in the given image is?",
    "choices": [
      {
        "id": 1,
        "text": "Acetylcholine"
      },
      {
        "id": 2,
        "text": "Dopamine"
      },
      {
        "id": 3,
        "text": "Glutamine"
      },
      {
        "id": 4,
        "text": "Noradrenaline"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The area marked in the given image is <strong>substantia nigra&nbsp;</strong>(meaning- dark substance). The neurotransmitter secreted by this area is <strong>dopamine</strong>.</p>\n<p>Substantia nigra is a part of the nigrostriatal pathway. Degeneration of dopaminergic neurons is implicated in Parkinson's disease.</p>\n<p>Other dopaminergic pathways include:</p>\n<ul>\n<li>Mesocortical&nbsp;</li>\n<li>Mesolimbic</li>\n<li>Tuberoinfundibular</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ee9fa5bc8a6540c1a82f4ac04e46041c.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2f337370a0fa4b788532ec881db33ce5x1280x1641.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2491e06a6b39434584c8cdbbd11cef88x1280x658.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/26779e47189c4b61b4afe65486da08aax500x496.JPEG"
    ]
  },
  {
    "text": "Which of the following arteries passes in close proximity to the area marked by the arrow in the given image?",
    "choices": [
      {
        "id": 1,
        "text": "Internal carotid artery"
      },
      {
        "id": 2,
        "text": "Middle meningeal artery"
      },
      {
        "id": 3,
        "text": "Anterior cerebral artery"
      },
      {
        "id": 4,
        "text": "Deep temporal artery"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The area marked by an arrow in the given image is&nbsp;<strong>p</strong><strong>terion&nbsp;</strong>and the artery that passes in close proximity&nbsp;to this area is the&nbsp;<strong>middle meningeal artery</strong>.</p>\n<p><strong>The pterion</strong> is an <strong>H shaped sutural junction</strong> between <strong>four bones of the skull:</strong></p>\n<ul>\n<li>Frontal bone</li>\n<li>Squamous part of the temporal bone</li>\n<li>Greater wing of the sphenoid bone</li>\n<li>Parietal bone.</li>\n</ul>\n<p>It is an important structure as it overlies the <strong>anterior</strong> branch of the <strong>middle meningeal artery</strong> and <strong>lateral fissure </strong>of the<strong> cerebral hemisphere</strong>. The bone in this area is thin and any injury to this area may lead to rupture of the middle meningeal artery leading to <strong>extradural hematoma.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/58bf48b9fd2c4d8fb0935eb7dbf713a1.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/93b950527b9348b9ba405b1a9637e698x525x625.PNG"
    ]
  },
  {
    "text": "Where are the Ito cells in the liver located?",
    "choices": [
      {
        "id": 1,
        "text": "Space of disse"
      },
      {
        "id": 2,
        "text": "Space of moll"
      },
      {
        "id": 3,
        "text": "Sinusoids"
      },
      {
        "id": 4,
        "text": "Bile canaliculi"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Ito cells</strong>/<strong>Hepatic stellate cells&nbsp;</strong>are located in the <strong>space of Disse</strong>. They are mesenchymal in origin.</p>\n<p><strong>The space of Disse </strong>or&nbsp;the&nbsp;<strong>perisinusoidal space (or space of Disse)</strong>&nbsp;is a location in the liver between&nbsp;<strong>hepatocytes</strong>&nbsp;and the liver&nbsp;<strong>sinusoid</strong>.</p>\n<p>Significance of Ito cells:</p>\n<p>Ito cells are in a <strong>dormant state</strong> for the majority of the duration. They <strong>store</strong> the fat-soluble <strong>vitamin</strong> <strong>A</strong> in their lipid droplets and are a signi\ufb01cant source of growth factors involved in liver homeostasis and regeneration.</p>\n<p>When there is <strong>liver injury</strong>, Ito cells <strong>get activated</strong>. They replace&nbsp;damaged hepatocytes with collagenous scar tissue and<strong>&nbsp;</strong>secrete intralobular <strong>matrix components,&nbsp;</strong>including <strong>collagen type III</strong> (reticular) \ufb01bres. This&nbsp;leads to <strong>hepatic \ufb01brosis.</strong></p>\n<p><strong>Note:&nbsp;</strong>A narrow space which separates limiting plate (a sleeve of modified hepatocytes) from the connective tissue of the portal area is known as&nbsp;<strong>space of moll.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b31d1f171c9d4d528a26388d29755f65x544x712.PNG"
    ]
  },
  {
    "text": "Which of the following features differentiates the exocrine pancreas from the parotid gland?",
    "choices": [
      {
        "id": 1,
        "text": "Basal lamina lining the serous acini"
      },
      {
        "id": 2,
        "text": "Absence of striated duct"
      },
      {
        "id": 3,
        "text": "Presence of serous acini with acidophilic tip"
      },
      {
        "id": 4,
        "text": "Presence of apical acinar villi"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The exocrine pancreas is comprised entirely of serous acini. Hence, its&nbsp;general structure is similar to that of the parotid&nbsp;gland, but the two are easily distinguished by:</p>\n<ul>\n<li>The parotid gland has striated and intercalated intralobular ducts, whereas the pancreas has only the intercalated type.</li>\n<li>The excretory ducts of the parotid gland are <strong>striated columnar</strong>, whereas the excretory duct of the pancreas is a&nbsp;<strong>simple columnar</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Medial lemniscus is a continuation of which of the following structures?",
    "choices": [
      {
        "id": 1,
        "text": "Spinothalamic tract"
      },
      {
        "id": 2,
        "text": "Spinocerebellar tract"
      },
      {
        "id": 3,
        "text": "Spinotectal tract"
      },
      {
        "id": 4,
        "text": "Fasciculus gracilis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Medial lemniscus is a continuation of<strong> fasciculus gracilis.</strong></p>\n<p><strong>Posterior column\u2013medial lemniscal pathway<span class=\"Apple-converted-space\">:</span></strong></p>\n<p>First-order axons carrying discriminative touch\u00a0and vibration sensations enter the dorsal horn\u00a0and continue traveling upward in the posterior\u00a0white column as the fasciculus gracilis and\u00a0fasciculus cuneatus.</p>\n<p>Fibers of these fasciculi synapse on the\u00a0second-order neurons of the ipsilateral nuclei\u00a0gracilis and cuneatus in the medulla oblongata,\u00a0respectively.</p>\n<p>Axons of these second-order neurons then cross over as the internal arcuate fibers to form the medial lemniscus in the contralateral medulla.</p>\n<p>These second-order axons ascend through the brainstem to reach the third-order neuronal cell bodies in the ventral posterior lateral nucleus of the thalamus. Axons from the third-order neurons then project through the posterior limb of the internal capsule to reach the primary somatosensory cortex.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/57b488add6e9471584851e21f5a0c844x354x550.PNG"
    ]
  },
  {
    "text": "The type of fibers present in the fornix are:",
    "choices": [
      {
        "id": 1,
        "text": "Association and commisural fibers"
      },
      {
        "id": 2,
        "text": "Association and projection fibers"
      },
      {
        "id": 3,
        "text": "Commissural and projection fibers"
      },
      {
        "id": 4,
        "text": "Association fibers"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The fibers present in the <strong>fornix</strong> are <strong>association fibers except for</strong> the&nbsp;<strong>hippocampal commissure of fornix</strong>&nbsp;which has&nbsp;<strong>commissural fibers</strong>. Hence the most appropriate answer is option A. i.e both association and commissural fibers.</p>\n<p>Association fibers<strong>&nbsp;</strong>connect various cortical regions within the same hemisphere whereas commissural fibers connect corresponding regions of two hemispheres.&nbsp;</p>\n<p>Fornix arises <strong>from the hippocampus</strong> and <strong>ends in the mamillary body </strong>of the hypothalamus.&nbsp;It is supplied by the <strong>anterior cerebral artery.</strong></p>\n<p>Note: The function of the commissure of&nbsp;the fornix is to connect the hippocampal formations of&nbsp;the two sides.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Decussation of the superior cerebellar peduncle occurs at which level?",
    "choices": [
      {
        "id": 1,
        "text": "Pons"
      },
      {
        "id": 2,
        "text": "Midbrain"
      },
      {
        "id": 3,
        "text": "Diencephalon"
      },
      {
        "id": 4,
        "text": "Medulla"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>decussation of the superior cerebellar peduncle</strong> occurs in the <strong>midbrain</strong>, at the level of the\u00a0<strong>inferior colliculus.</strong></p>\n<p>The midbrain has four decussations:</p>\n<ul>\n<li>At the level of the superior colliculus:\n<ul>\n<li>Ventral tegmental decussation of the rubrospinal tract</li>\n<li>Dorsal tegmental decussation of the tectospinal tract</li>\n</ul>\n</li>\n<li>At the level of the inferior colliculus:\n<ul>\n<li>Decussation of superior cerebellar peduncles</li>\n<li>Decussation of trochlear nerve</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The pretracheal layer of deep cervical fascia encloses all of the following except:",
    "choices": [
      {
        "id": 1,
        "text": "Oesophagus"
      },
      {
        "id": 2,
        "text": "Sternocleidomastoid"
      },
      {
        "id": 3,
        "text": "Sternohyoid"
      },
      {
        "id": 4,
        "text": "Thyroid gland"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>All the above structures are enclosed by the pretracheal layer of deep cervical fascia except sternocleidomastoid. It is enclosed by the&nbsp;<strong>investing layer of deep cervical fascia</strong>.</p>\n<p>The deep cervical fascia of the neck is organized into the following layers:</p>\n<ul>\n<li>The&nbsp;<strong>investing layer</strong>, which surrounds all structures in the neck</li>\n<li>The <strong>prevertebral layer,</strong> which surrounds the vertebral column and the deep muscles associated with the back.</li>\n<li>The <strong>pretracheal layer</strong>, which encloses the viscera of the neck</li>\n<li>The <strong>carotid sheath</strong>, which receives a contribution from the other three fascial layers</li>\n</ul>\n<p>In the neck, the pretracheal fascia covers the strap muscles i.e <strong>sternohyoid</strong>, omohyoid, sternothyroid, thyrohyoid. It splits to enclose the <strong>thyroid gland</strong>. It also surrounds the trachea and the&nbsp;<strong>esophagus</strong>&nbsp;including the recurrent laryngeal nerve present in the groove between them.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are the contents of the carotid sheath except?",
    "choices": [
      {
        "id": 1,
        "text": "Sympathetic chain"
      },
      {
        "id": 2,
        "text": "Carotid artery"
      },
      {
        "id": 3,
        "text": "Internal jugular vein"
      },
      {
        "id": 4,
        "text": "10th cranial nerve"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>The sympathetic chain</strong> is not&nbsp;the content of the carotid sheath. It&nbsp;lies posterior to the carotid sheath and anterior to the&nbsp;transverse processes of the cervical vertebrae in the neck.</p>\n<p>The carotid sheath is a layer of loose connective tissue formed by&nbsp;adjacent portions of the investing layer of deep cervical fascia, the pretracheal&nbsp;fascia, and the prevertebral fascia.</p>\n<p>Contents of carotid sheath:</p>\n<ul>\n<li>Common and internal&nbsp;<strong>carotid arteries,</strong></li>\n<li><strong>Internal jugular vein,</strong></li>\n<li>Vagus nerve</li>\n<li>Ansa cervicalis</li>\n</ul>\n<p>Note: The&nbsp;<strong>glossopharyngeal</strong>, accessory, and hypoglossal nerves lie within&nbsp;the upper part of the carotid sheath.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with paradoxical respiration. Which of the following nerves is most likely to be affected?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Paradoxical movements </strong>in&nbsp;the&nbsp;<strong>chest </strong>are as follows:</p>\n<ul>\n<li>Paradoxical respiration - the abnormal movement of&nbsp;the <strong>chest</strong> <strong>wall</strong> or <strong>abdominal</strong> <strong>wall</strong>, where they move in during inspiration instead of moving out. It is seen in flail chest.&nbsp;</li>\n<li>Paradoxical movement of the diaphragm - normally, the diaphragm moves down during inspiration. However, in&nbsp;cases of<strong> phrenic nerve palsy,</strong> the affected side of the <strong>diaphragm</strong> moves <strong>upward</strong> <strong>(paradoxical</strong> <strong>respiration</strong>) due to<strong> diaphragmatic paralysis.</strong> The gold standard investigation to detect this is the electrical or magnetic stimulation of the phrenic nerve with a recording of the compound muscle action potential and/or the transdiaphragmatic pressure.&nbsp;This can be observed on ultrasound or fluoroscopy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9bfb132c05094adfb9de9e6e7e796319.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bb75539a3721416fad44527659c7170bx1280x1114.JPEG"
    ]
  },
  {
    "text": "Which of the following muscles is attached to the area marked in the image below?",
    "choices": [
      {
        "id": 1,
        "text": "Abductor pollicis longus"
      },
      {
        "id": 2,
        "text": "Palmar interossei"
      },
      {
        "id": 3,
        "text": "Opponens pollicis"
      },
      {
        "id": 4,
        "text": "Flexor pollicis brevis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The area marked in the image is the<strong> palmar aspect </strong>of the<strong> first metacarpal</strong>. The <strong>opponens pollicis</strong> muscle is inserted at this site.</p>\n<p><strong>Opponens pollicis:</strong></p>\n<p style=\"padding-left: 30px;\"><strong>Origin: \u00a0</strong>Tubercle of the trapezium and flexor retinaculum</p>\n<p style=\"padding-left: 30px;\"><strong>Insertion:</strong>\u00a0Whole length of the lateral border and adjoining lateral half of the palmar aspect of the first metacarpal.</p>\n<p style=\"padding-left: 30px;\"><strong>Action:</strong>\u00a0Flexes the metacarpal bone of the thumb.</p>\n<p>\u00a0The image below shows various intrinsic muscles of the hand.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ef1009ff63074dcb9e1487329cb5e0df.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/78fb7dfe74254cf8afddb45ac363c96fx1280x1342.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bcc9fb0250f94d1196a2251eca03e010x1280x1236.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4e8a6317d28047a693382f4b8b02d385x1280x1342.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bcd2b5e7c0ec4c4395dea0f7ad5063e6x1280x1508.JPEG"
    ]
  },
  {
    "text": "Which of the following marked structures does not form part of the laryngeal skeleton?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The structure marked as 'A', is the <strong>hyoid bone,</strong> which is <strong>not a part of the laryngeal skeleton</strong>.</p>\n<p>The structures marked in the image are:</p>\n<ol style=\"list-style-type: upper-alpha;\">\n<li>Hyoid bone</li>\n<li>Thyroid cartilage</li>\n<li>Epiglottis</li>\n<li>Cricoid cartilage</li>\n</ol>\n<p>The<strong> laryngeal skeleton</strong> is formed by a series of cartilages that are connected by ligaments and fibrous membranes:</p>\n<div class=\"page\" title=\"Page 809\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>The <strong>thyroid, cricoid,</strong> and the <strong>greater part of the arytenoid cartilages</strong> consist of hyaline cartilage.</li>\n<li>The <strong>corniculate, cuneiform, tritiate,</strong> and <strong>epiglottic</strong> cartilages and the apices of the arytenoid cartilage consist of elastic cartilage.</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/90582206183f443284d8c69496b9dd23.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the foramen marked in the image below.",
    "choices": [
      {
        "id": 1,
        "text": "Foramen rotundum"
      },
      {
        "id": 2,
        "text": "Foramen ovale"
      },
      {
        "id": 3,
        "text": "Vidian canal"
      },
      {
        "id": 4,
        "text": "Foramen spinosum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows the <strong>sphenoid</strong> bone. The foramen marked is the&nbsp;<strong>foramen</strong> <strong>rotundum</strong>. Maxillary branch of trigeminal nerve passes through it.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9a57cc0f680f4618b858655553497390.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bb48e90c579f43689f7f3503c102b43fx1280x1383.JPEG"
    ]
  },
  {
    "text": "Reticular fibres are not present in which of the following structures?",
    "choices": [
      {
        "id": 1,
        "text": "Thymus"
      },
      {
        "id": 2,
        "text": "Lymph node"
      },
      {
        "id": 3,
        "text": "Bone marrow"
      },
      {
        "id": 4,
        "text": "Spleen"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Reticular fibres&nbsp;</strong>are mainly found in:</p>\n<ul>\n<li>All lymphoid organs like <strong>spleen, lymph node,</strong> and <strong>bone marrow</strong>&nbsp;(except thymus).</li>\n<li>Glands, liver and kidneys.</li>\n<li>The basement membrane of all epithelia.</li>\n<li>Smooth muscle and nerve cells.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c5b2ea4c70084ed6bfc313c1bde4bdc3x1280x1342.JPEG"
    ]
  },
  {
    "text": "Which of the following muscles is not involved in the overhead abduction of the arm?",
    "choices": [
      {
        "id": 1,
        "text": "Serratus anterior"
      },
      {
        "id": 2,
        "text": "Deltoid"
      },
      {
        "id": 3,
        "text": "Trapezius"
      },
      {
        "id": 4,
        "text": "Pectoralis major"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Pectoralis major</strong> is mainly involved in <strong>adduction</strong> and <strong>medial rotation</strong> of the arm and is not involved in the&nbsp;abduction of the arm.</p>\n<div class=\"page\" title=\"Page 1108\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Glenohumeral abduction</strong> is about 120&deg; or more. The glenohumeral arthrodesis restricts the abduction at about 45&deg;. Further abduction occurs&nbsp;at the sterno&shy; and acromiocla&shy;vicular articulations, and contralateral vertebral flexion.</p>\n<p>Muscles involved in the abduction of the shoulder:</p>\n<ul>\n<li>The<strong> first 15&deg;</strong> of abduction is initiated by the <strong>supraspinatus</strong> muscle.</li>\n<li><strong>15&deg; to 90</strong>&deg; of abduction is carried out mainly by the middle fibers of the <strong>deltoid</strong> muscle.</li>\n<li>Abduction of the arm, <strong>beyond 90&deg;</strong>, is carried out by the movement of the shoulder girdle caused by the action of <strong>trapezius</strong> and <strong>serratus anterior.</strong></li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The structures marked in the image below are found in the epithelial lining  of all of the following sites, except:",
    "choices": [
      {
        "id": 1,
        "text": "Oviduct"
      },
      {
        "id": 2,
        "text": "Epididymis"
      },
      {
        "id": 3,
        "text": "Bronchi"
      },
      {
        "id": 4,
        "text": "Ependyma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Cilia are minute hair-like projections, while stereocilia are very long, thick microvilli measuring about 5&ndash;10 &mu;m in length.</p>\n<p><strong>Ciliated epithelium:</strong></p>\n<ul>\n<li>The epithelium bears cilia, which moves in a coordinated fashion, and help in the movement of the mucus, or propel the movement of any other structures such as ova or spermatozoa.</li>\n<li>The ciliated columnar epithelium is found in&nbsp;most of the <strong>respiratory tract,</strong> the uterus, and the <strong>uterine tube</strong>&nbsp;<strong>(oviduct),</strong> efferent ductules of the testis, parts of the middle ear and auditory tube; the <strong>ependyma</strong> lining the central canal of the spinal cord and the ventricles of the brain.</li>\n<li>The pseudostratified ciliated columnar epithelium is seen in the trachea and in <strong>large bronchi.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9318e76d9e294ac7a22199533ec23ba2.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/019f8a1459f24ce39694e87510f6add7x1280x1345.JPEG"
    ]
  },
  {
    "text": "Which of the following bony structures is present behind the marked area?",
    "choices": [
      {
        "id": 1,
        "text": "Post clivus"
      },
      {
        "id": 2,
        "text": "Lesser wing of sphenoid"
      },
      {
        "id": 3,
        "text": "Sella turcica"
      },
      {
        "id": 4,
        "text": "Carotid canal"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The pterion overlies the <strong>anterior</strong> branch of the <strong>middle meningeal artery</strong> and <strong>lateral fissure </strong>of the cerebral hemisphere. The bone in this area is thin and any injury to this area may lead to rupture of the middle meningeal artery leading to <strong>extradural hematoma.</strong></p>\n<p>The pterion also corresponds to the site of the anterolateral (sphenoidal) fontanelle of the neonatal skull, which closes in the third month after birth.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/580fe909289a493082bef33865ce97a0.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8ed16748633245758ccb4569bf6a2e8fx1280x1525.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8657a3708f3142c68a804d196cb8f4b9x600x666.JPEG"
    ]
  },
  {
    "text": "All of the following nerves are involved in the movement of the eyeball except:",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Extraocular muscles involved in the movement of the eyeball:</p>\n<ul>\n<li>Superior rectus, inferior rectus, medial rectus, inferior oblique, and levator palpebrae superioris muscles - supplied by the&nbsp;<strong>oculomotor (III)</strong> nerve.</li>\n<li><strong>Lateral rectus</strong>&nbsp;- supplied by abducens<strong>&nbsp;(VI) nerve.&nbsp;</strong></li>\n<li><strong>Superior oblique</strong>&nbsp;- supplied by trochlear<strong>&nbsp;(IV) nerve.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ea0200827e9c4e618a3ba5150e69237b.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4f088d168c784c968d1ca284bf6ccbf8x1280x1687.JPEG"
    ]
  },
  {
    "text": "The middle radioulnar joint is an example of a:",
    "choices": [
      {
        "id": 1,
        "text": "Plane synovial"
      },
      {
        "id": 2,
        "text": "Primary cartilaginous"
      },
      {
        "id": 3,
        "text": "Secondary cartilaginous"
      },
      {
        "id": 4,
        "text": "Fibrous joint"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The middle radioulnar joint is an example of a <strong>fibrous joint (syndesmosis).</strong></p>\n<p>The radius and ulna are united with each other by<strong> three joints:</strong></p>\n<ul>\n<li><strong>Proximal</strong> (superior) radioulnar joint</li>\n<li><strong>Middle</strong> radioulnar joint</li>\n<li><strong>Distal</strong> (inferior) radioulnar joint</li>\n</ul>\n<p><strong>Proximal</strong> and<strong> distal</strong> radioulnar joints are uniaxial <strong>pivot joints</strong> (synovial) and are involved in pronation and supination movements of the forearm.</p>\n<p>The <strong>middle radioulnar</strong> joint is a <strong>fibrous</strong> joint (syndesmosis).&nbsp;The radius and ulna, in the middle, are connected by two syndesmoses namely:</p>\n<ul>\n<li>The <strong>oblique cord </strong>-&nbsp;extends from&nbsp;the lateral side of the ulnar tuberosity to the radius, distal to the radial tuberosity.</li>\n<li><strong>Interosseous membrane</strong>&nbsp;- a broad, thin collagenous structure, which runs perpendicular to the oblique cord. It extends&nbsp;distomedially between the interosseous borders of the radius and ulna.</li>\n</ul>\n<p><strong>Based </strong>on the <strong>structure</strong>, joints are classified into <strong>three types:</strong></p>\n<ul>\n<li><strong>Fibrous joints</strong>\n<ul>\n<li>Sutures</li>\n<li>Syndesmosis</li>\n<li>Gomphosis</li>\n</ul>\n</li>\n<li><strong>Cartilaginous joints</strong>\n<ul>\n<li>Primary cartilaginous joints or synchondrosis</li>\n<li>Secondary cartilaginous joints or symphysis</li>\n</ul>\n</li>\n<li><strong>Synovial joints</strong>\n<ul>\n<li>Ball-and-socket or spheroidal joints</li>\n<li>Sellar or saddle joints</li>\n<li>Condylar or bicondylar joints</li>\n<li>Ellipsoid joints</li>\n<li>Hinge joints</li>\n<li>Pivot or trochoid joints</li>\n<li>Plane joints</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bbeb75025a58437aae430a9220f93e3fx1280x792.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5e596a76b7954204a79544f17f1653cbx1280x1587.JPEG"
    ]
  },
  {
    "text": "What is the action of the muscle at the hip, which is attached to the marked area in the image below.",
    "choices": [
      {
        "id": 1,
        "text": "Abduction and external rotation"
      },
      {
        "id": 2,
        "text": "Extension and lateral rotation"
      },
      {
        "id": 3,
        "text": "Extension, adduction, and lateral rotation"
      },
      {
        "id": 4,
        "text": "Flexion and abduction"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Gluteus maximus muscle:</strong></p>\n<p><strong>Origin</strong>:</p>\n<ul>\n<li>Posterior aspect of the dorsal ilium, posterior to the posterior gluteal line</li>\n<li>Posterior superior iliac spine</li>\n<li>Posterior aspect of sacrum and coccyx</li>\n<li>Sacrotuberous ligament.</li>\n</ul>\n<p><strong>Insertion</strong> - It is inserted mainly in fascia lata at the iliotibial band and also into the <strong>gluteal tuberosity</strong> on the posterior femoral surface.</p>\n<p><strong>Action</strong>:</p>\n<ul>\n<li>Major <strong>extensor</strong> of the hip joint</li>\n<li><strong>Lateral rotation</strong> of the hip joint</li>\n<li>Active in powerful abduction of the thigh</li>\n</ul>\n<p><strong>Arterial Supply</strong> -&nbsp;Inferior and superior gluteal arteries and the first perforating branch of the profunda femoris artery.</p>\n<p><strong>Nerve Supply</strong>-&nbsp;Inferior gluteal nerve (L5, S1 and S2).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b9f5ac4f65f742b4a7ed3d011d618512.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5a6da93129d44c2da6fb5e45db7650bdx1280x2117.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7e62a3100058410c81175cda31837e9fx1280x2117.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/848431333a554cea9a21db474161bc8ax1280x2213.JPEG"
    ]
  },
  {
    "text": "Identify the level of the cross-section shown in the image below.",
    "choices": [
      {
        "id": 1,
        "text": "T1 - T2"
      },
      {
        "id": 2,
        "text": "T2 - T3"
      },
      {
        "id": 3,
        "text": "T3 - T4"
      },
      {
        "id": 4,
        "text": "T4 - T5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The cross-section shown in the image is at the level of<strong> T3-T4.</strong></p>\n<p>The cross-section shows a large vascular opening of the <strong>arch </strong>of the <strong>aorta</strong>, along with three small openings corresponding to the <strong>brachiocephalic trunk, left common carotid</strong> artery and <strong>left subclavian</strong> artery. This suggests that the section was taken at the level <strong>between T3 and T4.</strong></p>\n<p>Options A, B: In cross-sections at the levels of T1-T2 and T2-T3, only the small vascular openings of the branches arising from the arch of aorta would be visible.</p>\n<p>Option D: In cross-section at the level of T4-T5, where, the arch of the aorta begins and ends, bifurcation of the pulmonary trunk is visible.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b173cfc81913437a97f0ea9962c88471.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/be6eac567caa48309f9eeee45399a571x1280x1408.JPEG"
    ]
  },
  {
    "text": "A patient is unable to abduct his arm. Which of the following root values is likely to be affected?",
    "choices": [
      {
        "id": 1,
        "text": "C4"
      },
      {
        "id": 2,
        "text": "C5"
      },
      {
        "id": 3,
        "text": "C6"
      },
      {
        "id": 4,
        "text": "C7"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong> inability</strong> to<strong> abduct</strong> the arm is most likely due to a lesion of the&nbsp;<strong>C5 root.</strong></p>\n<p>The <strong>deltoid </strong>muscle is the main muscle involved in the abduction of the arm. It is innervated by the C5 root of the <strong>axillary nerve.&nbsp;</strong>So, a lesion involving the C5 causes inability to abduct the arm.</p>\n<p>The table below shows the movements and muscles tested to determine the location of the lesion in the upper limb.</p>\n<table style=\"width: 432.555px; height: 417px;\">\n<tbody>\n<tr>\n<td style=\"width: 118px;\"><strong>Arm movement</strong></td>\n<td style=\"width: 123px;\"><strong>Muscle</strong></td>\n<td style=\"width: 56px;\"><strong>Root</strong></td>\n<td style=\"width: 102.555px;\"><strong>Nerve</strong></td>\n</tr>\n<tr>\n<td style=\"width: 118px;\">Shoulder abduction</td>\n<td style=\"width: 123px;\">Deltoid</td>\n<td style=\"width: 56px;\">C5</td>\n<td style=\"width: 102.555px;\">Axillary</td>\n</tr>\n<tr>\n<td style=\"width: 118px;\">Elbow extension</td>\n<td style=\"width: 123px;\">Triceps</td>\n<td style=\"width: 56px;\">C7</td>\n<td style=\"width: 102.555px;\">Radial</td>\n</tr>\n<tr>\n<td style=\"width: 118px;\">\n<p>Elbow flexion</p>\n<p>&nbsp;</p>\n</td>\n<td style=\"width: 123px;\">\n<p>Biceps</p>\n<p>Brachioradialis</p>\n</td>\n<td style=\"width: 56px;\">\n<p>C5/6</p>\n<p>C6</p>\n</td>\n<td style=\"width: 102.555px;\">\n<p>Musculocutaneous</p>\n<p>Radial</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 118px;\">Radial wrist extensor</td>\n<td style=\"width: 123px;\">Extensor carpi radialis longus</td>\n<td style=\"width: 56px;\">C6</td>\n<td style=\"width: 102.555px;\">Radial</td>\n</tr>\n<tr>\n<td style=\"width: 118px;\">Finger extensors</td>\n<td style=\"width: 123px;\">Extensor digitorum</td>\n<td style=\"width: 56px;\">C7</td>\n<td style=\"width: 102.555px;\">Posterior interosseus</td>\n</tr>\n<tr>\n<td style=\"width: 118px;\">Finger flexors</td>\n<td style=\"width: 123px;\">\n<div class=\"page\" title=\"Page 1066\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Flexor pollicis longus and flexor digitorum profundus, index</p>\n<div class=\"page\" title=\"Page 1066\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Flexor digitorum profundus, ring and little</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 56px;\">\n<p>C8</p>\n<p>C8</p>\n</td>\n<td style=\"width: 102.555px;\">Anterior interosseous\n<div class=\"page\" title=\"Page 1066\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Ulnar</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr>\n<td style=\"width: 118px;\">Finger abduction</td>\n<td style=\"width: 123px;\">\n<p>First dorsal interosseus</p>\n<p>Abductor pollicis brevis</p>\n</td>\n<td style=\"width: 56px;\">\n<p>T1</p>\n<p>T1&nbsp;</p>\n</td>\n<td style=\"width: 102.555px;\">\n<p>Ulnar&nbsp;</p>\n<p>Median</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '004 Anatomy Aiims 2020 (May And Nov Ini-Cet)';
        let hierarchy = ["Marrow", "PYQs", "Anatomy"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>