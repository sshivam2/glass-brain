<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medicine St 2 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Wolfram\u2019s syndrome includes all except:",
    "choices": [
      {
        "id": 1,
        "text": "Diabetes insipidus"
      },
      {
        "id": 2,
        "text": "Diabetes mellitus"
      },
      {
        "id": 3,
        "text": "Deafness"
      },
      {
        "id": 4,
        "text": "Pituitary adenoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>Pituitary adenoma is not a part of wolfram syndrome.</li>\n<li>Wolfram syndrome (rare autosomal recessive disease ;chromosome 4;mitochondrial)\n<ul>\n<li><strong>D</strong>iabetes <strong>i</strong>nsipidus</li>\n<li><strong>D</strong>iabetes <strong>m</strong>ellitus</li>\n<li><strong>O</strong>ptic atrophy (progressive, bilateral)</li>\n<li><strong>D</strong>eafness (sensorineural)</li>\n</ul>\n</li>\n<li>It is also known as DIDMOAD.</li>\n<li>Neurologic and psychiatric disturbances are prominent in most patients and can cause severe disability.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Hirano bodies are seen in________",
    "choices": [
      {
        "id": 1,
        "text": "Progressive Myoclonic epilepsy"
      },
      {
        "id": 2,
        "text": "Amyotrophic lateral sclerosis"
      },
      {
        "id": 3,
        "text": "Normal brain tissue"
      },
      {
        "id": 4,
        "text": "Alzheimer\u2019s disease"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Intra Neuronal inclusion bodies with their associated conditions are as follows:</strong></p>\n<table style=\"width: 271px;\">\n<tbody>\n<tr>\n<td style=\"width: 120px;\"><strong>Intraneuronal inclusion bodies</strong></td>\n<td style=\"width: 139px;\"><strong>Condition</strong></td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Hirano Bodies</td>\n<td style=\"width: 139px;\">Alzheimers disease</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Bunina body</td>\n<td style=\"width: 139px;\">ALS</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Lofaro body</td>\n<td style=\"width: 139px;\">Progressive myoclonic epilepsy</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Marinesco body</td>\n<td style=\"width: 139px;\">Normal brain tissue</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Confirmatory test for cushing\u2019s syndrome is_______",
    "choices": [
      {
        "id": 1,
        "text": "High dose DEX test"
      },
      {
        "id": 2,
        "text": "Low dose DEX test"
      },
      {
        "id": 3,
        "text": "Corticotrophin releasing hormone test"
      },
      {
        "id": 4,
        "text": "Both option  A and C"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Low dose DEX test is used for confirming cushing&rsquo;s syndrome.</li>\n<li>Other test for screening and confirmation of diagnosis is by:\n<ul>\n<li><strong>24hr urinary free cortisol excretion</strong> (3 times increased above normal )</li>\n<li>Dexamethasone overnight test (plasma cortisol &gt;50 nmol /L at 8-9 a.m after 1 mg of dexamethasone at 11p.m)</li>\n<li>I<strong>f Midnight plasma cortisol</strong> &gt;130 nmol/ L [ or]<strong> midnight salivary cortisol</strong> &gt;5 nmol/ L)</li>\n</ul>\n</li>\n<li>Low dose DEX test is positive if plasma cortisol level is &gt;50nmol/L after 0.5 mg of dexamethasone q6h for 2 days.</li>\n<li>Corticotrophin releasing hormone test is to differentiate between pituitary from ectopic source of ACTH in cushing. The test is positive if ACTH increases &gt;40% at 15-30 minutes + cortisol increase &gt;20% at 45-60 minutes after CRH 100 microgram I.V.</li>\n<li>High dose DEX test A high dose of dexamethasone exerts negative feedback on pituitary ACTH-producing cells, but not on ectopic ACTH-producing cells or adrenal adenoma. The test is positive if cortisol suppressiom &gt;50% after q6h 2 mg dexamethasone for 2 days.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The clinical finding in the given image is seen in which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Systemic sclerosis"
      },
      {
        "id": 2,
        "text": "Systemic lupus erythematosus"
      },
      {
        "id": 3,
        "text": "Angular stomatitis"
      },
      {
        "id": 4,
        "text": "Hand foot mouth disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above image depicts a classical fish mouth (<strong>microstomia</strong>) appearance seen in <strong>systemic sclerosis</strong>/<strong>scleroderma</strong>.</p>\n<p><strong>Scleroderma</strong>\u00a0or\u00a0<strong>Systemic Sclerosis (SSc)</strong>\u00a0is an autoimmune rheumatic disease in which there is a\u00a0<strong>4:1 female</strong>\u00a0predominance.</p>\n<p>A wide spectrum of clinical features are seen in Scleroderma:</p>\n<ul>\n<li>Severe\u00a0<strong>pruritus</strong></li>\n<li>Initially, puffiness and\u00a0non-pitting edema\u00a0of\u00a0fingers</li>\n<li>The skin later becomes indurated, thickened, and fixed to underlying structures resulting in\u00a0<strong>sclerodactyly</strong></li>\n<li><strong>Vasospasm</strong>\u00a0and digital ulceration</li>\n<li>Most patients have\u00a0dysphagia and\u00a0<strong>GERD</strong></li>\n<li><strong>Mask-like facies</strong>\u00a0is seen due to the\u00a0waxy nature of skin\u00a0and\u00a0lack of wrinkles,\u00a0expressionless facies, mat\u2010like telangiectases,\u00a0<strong>microstomia</strong>, perioral furrowing, and beak\u2010like nose.</li>\n</ul>\n<p>The\u00a0<strong>antibodies</strong>\u00a0tested in systemic sclerosis include:</p>\n<ul>\n<li><strong>Antinuclear antibody (ANA)</strong>\u00a0- positive in most cases of systemic sclerosis. The absence of this antibody suggests considering an alternate diagnosis.</li>\n<li><strong>Anticentromere antibody (ACA)</strong>\u00a0- usually positive in limited cutaneous systemic sclerosis</li>\n<li><strong>Antitopoisomerase I (anti-Scl-70) antibody</strong>\u00a0- usually positive with diffuse cutaneous systemic sclerosis\u00a0</li>\n<li><strong>Anti-RNA polymerase III antibody</strong>\u00a0-\u00a0usually positive with diffuse cutaneous systemic sclerosis.</li>\n</ul>\n<p>Other options:</p>\n<p>Option B: <strong>Systemic lupus erythematosus</strong>\u00a0(SLE) is an autoimmune disease that most commonly presents with arthralgia with early morning stiffness.\u00a0Other important features of SLE include malar rash, discoid rash, photosensitivity, oral ulcers, pleuritis, pericarditis, and lupus nephritis.\u00a0<strong>ANA</strong>,\u00a0<strong>Anti-dsDNA</strong>\u00a0antibodies, and\u00a0<strong>anti-Smith</strong>\u00a0antibodies are positive in SLE.\u00a0</p>\n<p>Option C:\u00a0Angular stomatitis is the soreness at the angles of the mouth extending outwards in the folds of the facial skin.</p>\n<p>Option D:<strong> Hand-foot-and-mouth disease\u00a0</strong>is caused by<strong>\u00a0coxsackievirus.\u00a0</strong>It is an exanthematous fever affecting mainly young children, characterized by\u00a0<strong>oral and pharyngeal ulcerations</strong>\u00a0and a\u00a0<strong>vesicular rash\u00a0</strong>of\u00a0the<strong>\u00a0palms and soles</strong>\u00a0that may spread to the arms and legs.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/286a44bdcd1743f9b238e25c91ba2b52.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "High anion gap metabolic acidosis is present in:",
    "choices": [
      {
        "id": 1,
        "text": "Asthma"
      },
      {
        "id": 2,
        "text": "COPD with CO2 retention"
      },
      {
        "id": 3,
        "text": "Renal tubular acidosis"
      },
      {
        "id": 4,
        "text": "Poorly controlled diabetes"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>High Anion gap metabolic acidosis is seen in poorly controlled diabetes.</p>\n<p><strong>High Anion gap is caused by:</strong></p>\n<table style=\"width: 234px;\">\n<tbody>\n<tr>\n<td style=\"width: 89px;\"><strong>Lactic acidosis</strong></td>\n<td style=\"width: 142px;\">\n<p><strong>Toxins</strong></p>\n<p><strong> Ethylene glycol</strong></p>\n<p><strong><strong>Methanol</strong></strong></p>\n<p><strong><strong>Salicylates</strong></strong></p>\n<p><strong><strong>Propylene glycol</strong></strong></p>\n<p><strong><strong>Pyroglutamic acid</strong>&nbsp; &nbsp; &nbsp;</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 89px;\">Ketoacidosis&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Diabetics&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Alcoholic&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Starvation</td>\n<td style=\"width: 142px;\">Renal failure (Acute and chronic)&nbsp;</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "True regarding the diagnostic criteria of obesity hypoventilation syndrome is _______",
    "choices": [
      {
        "id": 1,
        "text": "BMI \u2265 30 kg/ m2"
      },
      {
        "id": 2,
        "text": "Pao2 <20 mmHg"
      },
      {
        "id": 3,
        "text": "Pao2 <80 mmHg"
      },
      {
        "id": 4,
        "text": "Pao2 <90 mmHg"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li><strong>Diagnostic criteria of obesity hypoventilation syndrome includes:</strong>\n<ul>\n<li>BMI &ge;30 kg/ m<sup>2</sup></li>\n<li>Paco2 &ge; 45 mmHg</li>\n<li>Pao2 &lt;70 mmHg</li>\n</ul>\n</li>\n<li>Also known as<strong> pickwickian syndrome</strong>.</li>\n<li>Approximately <strong>90% of the patients</strong> with obesity hypoventilation syndrome also have <strong>obstructive sleep apnoea</strong> that worsens during REM sleep.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Kviem-siltzbach procedure is a specific diagnostic test for which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Leprosy"
      },
      {
        "id": 2,
        "text": "Tuberculosis"
      },
      {
        "id": 3,
        "text": "Sarcoidosis"
      },
      {
        "id": 4,
        "text": "Wegeners granulomatosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>The Kviem-Siltzbach procedure is a <strong>specific diagnostic test for sarcoidosis</strong>.</li>\n<li>An intradermal injection of specially <strong>prepared tissue</strong> derived from the<strong> spleen</strong> of a known sarcoidosis patient is <strong>biopsied 4\u20136 weeks after injection</strong>. If <strong>non caseating granulomas</strong> are seen, this is highly specific for the diagnosis of sarcoidosis.</li>\n<li>There is no commercially available Kviem-Siltzbach reagent, and some locally prepared batches have lower specificity.</li>\n<li>Thus, this test is of historic interest and is rarely used in current clinical practice.</li>\n<li>Because the diagnosis of sarcoidosis can never be certain, over time other features may arise that lead to an alternative diagnosis.</li>\n<li>Conversely, evidence for new organ involvement may eventually confirm the diagnosis of sarcoidosis.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30 year old male patient presents with recurrent genital ulcer and uveitis. Oral examination shows the following findings.Which of the following statement is true about this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Associated with HLA B27"
      },
      {
        "id": 2,
        "text": "Chlamydia can be a preceding infection"
      },
      {
        "id": 3,
        "text": "Less common in female"
      },
      {
        "id": 4,
        "text": "SVC obstruction can be seen"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows <strong>aphthous ulcer (which are painful and it heals without scar)</strong> and this is a case of Behcet's disease fulfilling the criteria which are recurrent oral ulceration + any 2 of the following conditions:</p>\n<ul>\n<li>Recurrent genital ulcer</li>\n<li>Eye lesion</li>\n<li>Skin lesion</li>\n<li>Pathergy test</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/678e3f0bfb9b4d41a7be6aa038eaca98.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Most common cause of Empyema is ______",
    "choices": [
      {
        "id": 1,
        "text": "Tubercular pneumonia"
      },
      {
        "id": 2,
        "text": "Bacterial pneumonia"
      },
      {
        "id": 3,
        "text": "Pleurisy"
      },
      {
        "id": 4,
        "text": "Bronchopleural fistula"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Frankly, purulent pleural fluid (empyema) is almost always caused by bacterial pneumonia</strong>.</li>\n<li>Empyema thoracic is collection of pus in pleural space and is synonymous with grossly purulent exudative parapneumonic effusions.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common metabolic abnormality seen in Addison\u2019s disease is",
    "choices": [
      {
        "id": 1,
        "text": "Hyperkalemia"
      },
      {
        "id": 2,
        "text": "Hypokalemia"
      },
      {
        "id": 3,
        "text": "Hypernatremia"
      },
      {
        "id": 4,
        "text": "Hyponatremia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li><strong>Hyponatremia</strong> is a characteristic biochemical feature in primary adrenal insufficiency and is found in <strong>80%</strong> of patients at presentation.</li>\n<li><strong>Hyperkalemia</strong> is present in<strong> 40%</strong> of patients at initial diagnosis.</li>\n<li>Hyponatremia is primarily caused by mineralocorticoid deficiency but can also occur in secondary adrenal insufficiency due to diminished inhibition of antidiuretic hormone (ADH) release by cortisol, resulting in mild syndrome of inappropriate secretion of antidiuretic hormone(SIADH).</li>\n<li>Most common symptom present in Addison&rsquo;s disease is asthenia.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Massive myoclonus is a hallmark of which stage of SSPE?",
    "choices": [
      {
        "id": 1,
        "text": "Stage 1"
      },
      {
        "id": 2,
        "text": "Stage 2"
      },
      {
        "id": 3,
        "text": "Stage 3"
      },
      {
        "id": 4,
        "text": "Stage 4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Clinical stages of subacute sclerosis panencephalitis:</strong></p>\n<table style=\"width: 174px;\">\n<tbody>\n<tr>\n<td style=\"width: 33px;\">Stage&nbsp;</td>\n<td style=\"width: 135px;\">Clinical manifestations&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 33px;\">Stage I&nbsp;</td>\n<td style=\"width: 135px;\">Personality changes, failure in school, strange&nbsp;behaviour&nbsp;&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 33px;\"><strong>Stage II&nbsp;</strong></td>\n<td style=\"width: 135px;\"><strong>Massive, repetitive, and frequent myoclonic jerks, seizures and dementia&nbsp;&nbsp;</strong></td>\n</tr>\n<tr>\n<td style=\"width: 33px;\">Stage III&nbsp;</td>\n<td style=\"width: 135px;\">Rigidity, extrapyramidal symptoms, and progressive unresponsiveness&nbsp;&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 33px;\">Stage IV&nbsp;</td>\n<td style=\"width: 135px;\">Coma, vegetative state, autonomic failure, and akinetic mutism&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false about Anaphylactoid purpura?",
    "choices": [
      {
        "id": 1,
        "text": "Diagnosis is made using skin biopsy"
      },
      {
        "id": 2,
        "text": "It involves mucus membranes"
      },
      {
        "id": 3,
        "text": "More common in Females"
      },
      {
        "id": 4,
        "text": "It is a post infective phenomena"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Anaphylactoid purpura was previously called as Henoch-schonlein purpura (HSP)</li>\n<li>More common in children 4 to 7 yrs of age</li>\n<li>Male : Female Ratio is 1.5:1</li>\n<li>It is a <strong>post infective phenomena</strong> mostly preceded by URTI</li>\n</ul>\n<p>Clinical Features:</p>\n<ul>\n<li><strong>Palpable purpura over buttock and lower limb</strong> (Hallmark)</li>\n<li>Involves Mucus membranes</li>\n<li>Arthralgia</li>\n<li>IgA Nephropathy (Rare)</li>\n</ul>\n<p>Treatment:</p>\n<ul>\n<li>Reassurance (It has an<strong> excellent prognosis)</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following test gives the glycemic status over the prior 2 weeks duration?",
    "choices": [
      {
        "id": 1,
        "text": "HbA1c"
      },
      {
        "id": 2,
        "text": "Galactosamine assay"
      },
      {
        "id": 3,
        "text": "Fructosamine assay"
      },
      {
        "id": 4,
        "text": "Both B and C"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>Fructosamine</strong> is a glycated albumin that stays in the body for the period of<strong> 2 weeks</strong>.</li>\n<li>Measurement of glycated hemoglobin (<strong>HbA1c</strong>) is the standard method for assessing long-term glycemic control.</li>\n<li>When plasma glucose is consistently elevated, there is an increase in nonenzymatic glycation of hemoglobin; this alteration reflects the glycemic history over the previous 2&ndash;3 months, because erythrocytes have an average life span of<strong> 120 days</strong> (glycemic level in the preceding month contributes about 50% to the HbA1c value). </li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Major susceptible gene for type 1 DM located on chromosome:",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "4"
      },
      {
        "id": 3,
        "text": "6"
      },
      {
        "id": 4,
        "text": "8"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>The major susceptibility gene for type 1 DM is located in the HLA region on <strong>chromosome 6</strong>.</li>\n<li>Polymorphisms in the HLA complex account for 40&ndash;50% of the genetic risk of developing type 1 DM.</li>\n<li>The concordance of type 1 DM in identical twins ranges between 40 and 60%, Most individuals with type 1 DM have the HLA DR3 and/or DR4 haplotype.</li>\n<li>The haplotypes DQA1*0301, DQB1*0302, and DQB1*0201 are most strongly associated with type 1 DM. These haplotypes are present in 40% of children with type 1 DM as compared to 2% of the normal U.S. population. However, most individuals with predisposing haplotypes do not develop diabetes.</li>\n<li>The haplotype <strong>DQA1*0102, DQB1*0602</strong> is extremely rare in individuals with type 1 DM (&lt;1%) and appears to <strong>provide protection from type 1 DM</strong>.</li>\n<li>The risk of developing type 1 DM is increased tenfold in relatives of individuals with the disease, the risk is relatively low: 3&ndash;4% if the parent has type 1 DM and 5&ndash;15% in a sibling (depending on which HLA haplotypes are shared).</li>\n<li>Most Individuals with type 1 DM do not have a first-degree relative with this disorder.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following antibody in SLE is positive for hypercoagulable state?",
    "choices": [
      {
        "id": 1,
        "text": "Anti erythrocyte antibody"
      },
      {
        "id": 2,
        "text": "Anti ribosomal P antibody"
      },
      {
        "id": 3,
        "text": "Anti Phospholipid antibody"
      },
      {
        "id": 4,
        "text": "Anti histone antibody"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Anti phospholipid antibody is positive in SLE patients with hypercoagulable state.</p>\n<table style=\"width: 221px;\">\n<tbody>\n<tr>\n<td style=\"width: 90px;\"><strong>Antibodies in SLE&nbsp;</strong></td>\n<td style=\"width: 119px;\"><strong>Clinical Implication&nbsp;</strong></td>\n</tr>\n<tr>\n<td style=\"width: 90px;\">Anti Ribosomal P&nbsp;</td>\n<td style=\"width: 119px;\">Increased risk of CNS lupus&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 90px;\">Anti erythrocyte&nbsp;&nbsp;</td>\n<td style=\"width: 119px;\">AIHA&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 90px;\">Anti Phospholipid&nbsp;</td>\n<td style=\"width: 119px;\">Hypercoagulable state&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 90px;\">Anti Histone&nbsp;</td>\n<td style=\"width: 119px;\">Drug induced lupus&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 90px;\">Anti Smith&nbsp;</td>\n<td style=\"width: 119px;\">Most specific antibody&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 90px;\">ANA&nbsp;</td>\n<td style=\"width: 119px;\">Most sensitive(best screening test) antibody&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 90px;\">Anti double stranded DNA&nbsp;</td>\n<td style=\"width: 119px;\">Good specificity (preferred in practice)&nbsp;</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following conditions  Means-lerman scratch  is present",
    "choices": [
      {
        "id": 1,
        "text": "Hyperparathyroidism"
      },
      {
        "id": 2,
        "text": "Hypercortisolism"
      },
      {
        "id": 3,
        "text": "Hypoparathyroidism"
      },
      {
        "id": 4,
        "text": "Hyperthyroidism"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>A <strong>systolic pleuropericardial friction rub</strong> (Means-Lerman scratch) may be heard at the left second intercostal space during expiration resulting from rubbing of pericardium against the pleura and is thought to result from the hyperdynamic cardiac motion.</li>\n<li>Means lerman scratch mimics the sound of pericardial rub.</li>\n<li>Common cardiovascular manifestations of hyperthyroidism include palpitations, systolic hypertension, and fatigue.</li>\n<li>Sinus tachycardia is present in ~40% of hyperthyroid patients, and atrial fibrillation is present in ~15%.</li>\n<li>Elderly patients with hyperthyroidism may present with only cardiovascular manifestations of thyrotoxicosis such as sinus tachycardia, atrial fibrillation, and hypertension, all of which may be resistant to therapy until the hyperthyroidism is controlled.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Defect in Na+/ K+/ 2 cl- results in_______",
    "choices": [
      {
        "id": 1,
        "text": "Liddle\u2019s syndrome"
      },
      {
        "id": 2,
        "text": "Gitelman syndrome"
      },
      {
        "id": 3,
        "text": "Alport syndrome"
      },
      {
        "id": 4,
        "text": "Bartter syndrome"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Defect in Na<sup>+</sup>/ K<sup>+</sup>/ 2 Cl<sup>-</sup> results in<strong>&nbsp;Bartter syndrome</strong>.<br /><br /></p>\n<p>&nbsp;</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td><strong>Disease</strong></td>\n<td><strong>Bartter syndrome</strong></td>\n<td><strong>Gitelman syndrome</strong></td>\n<td><strong>Liddle&rsquo;s syndrome</strong></td>\n</tr>\n<tr>\n<td>Defect</td>\n<td>NA<sup>+</sup>/K<sup>+</sup>/2Cl<sup>-</sup></td>\n<td>NA<sup>+</sup>/Cl<sup>-</sup> cotransporter</td>\n<td>Epithelial sodium channel(ENaC)</td>\n</tr>\n<tr>\n<td>Site</td>\n<td>Thick ascending loop of henle</td>\n<td>DCT</td>\n<td>CD</td>\n</tr>\n<tr>\n<td>Inheritance pattern</td>\n<td>A.R</td>\n<td>A.R</td>\n<td><strong>A.D</strong></td>\n</tr>\n<tr>\n<td>Clinical presentation</td>\n<td>Hypotension<br /><strong>Nephrolithiasis</strong></td>\n<td>Hypotension<br />Fatigue&nbsp;<br />Muscle cramps</td>\n<td><strong>Severe Hypertension</strong></td>\n</tr>\n<tr>\n<td>Electrolyte abnormality</td>\n<td>Hypokalemia<br />Hypercalciuria</td>\n<td>Hypokalemia<br /><strong>Hypomagnesemia</strong></td>\n<td>Hypokalemia</td>\n</tr>\n<tr>\n<td>In ABG</td>\n<td>Metabolic alkalosis</td>\n<td>Metabolic alkalosis</td>\n<td>Metabolic alkalosis</td>\n</tr>\n<tr>\n<td>Treatment</td>\n<td>Aggressive hydration+<br />K<sup>+</sup>supplementation + ACE inhibitor</td>\n<td>K<sup>+</sup> &amp; Mg<sup>2+</sup> supplementation</td>\n<td>Amiloride(K<sup>+</sup> sparing diuretics)<br />blocks the dysfunctional epithelialsodium channel</td>\n</tr>\n<tr>\n<td>Prognosis</td>\n<td><strong>Extremely Poor</strong></td>\n<td>Intermediate</td>\n<td>Favourable</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "True statement regarding congenital hypothyroidism is :",
    "choices": [
      {
        "id": 1,
        "text": "Bone age is normal"
      },
      {
        "id": 2,
        "text": "Upper end of tibial epiphyseal Centre present in x ray"
      },
      {
        "id": 3,
        "text": "On examination Hypertonia present"
      },
      {
        "id": 4,
        "text": "Normal birth weight and length"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>The majority of infants appear normal at birth, and &lt;10% are diagnosed based on clinical features, which include prolonged jaundice, feeding problems, <strong>hypotonia</strong>, enlarged tongue, delayed bone maturation and umbilical hernia.</li>\n<li><strong>Epiphyseal dysgenesis is pathognomonic</strong>.</li>\n<li>Bone age is abnormal.&nbsp;</li>\n<li><strong>Epiphyseal Centre that are normally present at birth are upper end of tibia, lower end of femur, talus, calcaneum, cuboid in ankle joint are absent in x-ray</strong>.</li>\n<li>Permanent neurologic damage results if treatment is delayed.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Second most common site for Deep brain stimulation in patients with parkinsonism is:",
    "choices": [
      {
        "id": 1,
        "text": "Subthalamic Nucleus"
      },
      {
        "id": 2,
        "text": "Ventral Intermediate Nucleus of Thalamus"
      },
      {
        "id": 3,
        "text": "Pedunculopontine nucleus"
      },
      {
        "id": 4,
        "text": "Globus Pallidus Internus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li><strong>Second most common site useful for parkinsonism is Globus pallidus Internus</strong>.</li>\n<li>First most common site useful is Subthalamic Nucleus.</li>\n<li>Subthalamic nuclei and Globus pallidus both has been comparable to show equal results in the Deep brain stimulation test for parkinsonism.</li>\n</ul>\n<p>Other targets for DBS are:</p>\n<ul>\n<li>Ventral Intermediate Nucleus of Thalamus(VMI)\n<ul>\n<li>Relieves <strong>only tremors</strong> but other motor symptoms may not respond so this is less preferred for DBS.</li>\n</ul>\n</li>\n<li>Pedunculopontine Nucleus\n<ul>\n<li>Useful for<strong> Advanced Parkinsonism only</strong>.</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following condition there is a decrease in plasma as well as urine osmolality?",
    "choices": [
      {
        "id": 1,
        "text": "Diabetes insipidus"
      },
      {
        "id": 2,
        "text": "Psychogenic polydipsia"
      },
      {
        "id": 3,
        "text": "SIADH"
      },
      {
        "id": 4,
        "text": "Cerebral salt wasting"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Differentiating features of DI,Psychogenic polydypsia, SIADH &amp; Cerebral salt wasting disease:</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following condition is associated with hyperglycemia?",
    "choices": [
      {
        "id": 1,
        "text": "Adrenal insufficiency"
      },
      {
        "id": 2,
        "text": "Hypothyroidism"
      },
      {
        "id": 3,
        "text": "Hypopituitarism"
      },
      {
        "id": 4,
        "text": "Cushing\u2019s syndrome"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Cushing&rsquo;s syndrome associated with hyperglycemia</p>\n<p>Conditions associated with hypoglycemia/ hyperglycemia:</p>\n<table style=\"width: 215px;\">\n<tbody>\n<tr style=\"height: 5px;\">\n<td style=\"width: 10px; height: 5px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong>Hypoglycemia</strong>&nbsp;&nbsp;</td>\n<td style=\"width: 191px; height: 5px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>Hyperglycemia&nbsp;</strong>&nbsp;</td>\n</tr>\n<tr style=\"height: 144px;\">\n<td style=\"width: 10px; height: 144px;\">\n<p>Hypopituitarism&nbsp;</p>\n<p>Adrenal insufficiency&nbsp;</p>\n<p>Hepatitis</p>\n<p>Hypothyroidism</p>\n<p>Insulinoma&nbsp;&nbsp;</p>\n</td>\n<td style=\"width: 191px; height: 144px;\">\n<p>Acromegaly (hyperpituitarism)&nbsp;</p>\n<p>Cushing syndrome&nbsp;</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Myogenic reflex present in:",
    "choices": [
      {
        "id": 1,
        "text": "Afferent arteriole"
      },
      {
        "id": 2,
        "text": "Efferent arteriole"
      },
      {
        "id": 3,
        "text": "Collecting duct"
      },
      {
        "id": 4,
        "text": "Both B and C"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Myogenic reflex present in afferent arteriole of kidney.</p>\n<p>Auto regulation of renal blood flow is by 3 main mechanism</p>\n<ul>\n<li>Autonomous vasoreactive (myogenic) reflex in the afferent arteriole</li>\n<li>Tubuloglomerular feedback of afferent arteriole</li>\n<li>Angiotensin II-mediated vasoconstriction of the efferent arteriole</li>\n</ul>\n<p>The myogenic reflex is a first line of defense against fluctuations in renal blood flow.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/be31ed94f7a949fa85cc2d5dbf3c7371x1065x167.PNG",
      "https://cdn1.dailyrounds.org/uploads/ef5706004a1f4eb9baf73bb1ee3bbfe4x634x282.PNG",
      "https://cdn1.dailyrounds.org/uploads/54df6fcbfbac40a49cb979a64840a6c2x1243x735.PNG"
    ]
  },
  {
    "text": "D-xylose test is false positive in",
    "choices": [
      {
        "id": 1,
        "text": "Ascites"
      },
      {
        "id": 2,
        "text": "Pleural effusion"
      },
      {
        "id": 3,
        "text": "Both A and B"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>D-xylose test is<strong> false positive</strong> in large collection of fluid in a <strong>third space</strong> like</p>\n<ul>\n<li>Pleural effusion</li>\n<li>Pericardial effusion</li>\n<li>Ascites</li>\n</ul>\n<p>D-xylose test is used to distinguish pancreatic cause of malabsorption from an intestinal cause.</p>\n<p>Procedure <strong>25 grams of D-xylose</strong> is given and concentration in <strong>5 hour urine sample is analysed</strong>.</p>\n<p>\u00a0</p>\n<table style=\"width: 244px;\">\n<tbody>\n<tr>\n<td style=\"width: 69.9148px;\"><strong>Positive in\u00a0\u00a0</strong></td>\n<td style=\"width: 115.085px;\"><strong>Negative in\u00a0\u00a0</strong></td>\n</tr>\n<tr>\n<td style=\"width: 69.9148px;\">Small intestinal mucosal disease\u00a0Impaired carbohydrate absorption in small intestine\u00a0\u00a0</td>\n<td style=\"width: 115.085px;\"><strong>Pancreatic insufficiency\u00a0\u00a0</strong></td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/f96bd2c1749a44cb9540cf36b2db6832x1146x487.PNG"
    ]
  },
  {
    "text": "A patient presents with chronic small bowel diarrhoea.Duodenal biopsy shows villous atrophy. Anti endomysial antibodies and IgA TTG antibodies are positive. What is the treatment of choice?",
    "choices": [
      {
        "id": 1,
        "text": "Antibiotics"
      },
      {
        "id": 2,
        "text": "5-ASA"
      },
      {
        "id": 3,
        "text": "Loperamide"
      },
      {
        "id": 4,
        "text": "Gluten free diet"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Villous atrophy on duodenal biopsy together with positive serological test for antiendomysial antibodies and IgA anti TTG antibodies suggests the diagnosis of celiac sprue </strong></p>\n<p><strong>The main stay stay of treatment is Gluten free diet </strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Gene for hereditary pancreatitis is located in",
    "choices": [
      {
        "id": 1,
        "text": "Chromosome 6"
      },
      {
        "id": 2,
        "text": "Chromosome 8"
      },
      {
        "id": 3,
        "text": "Chromosome 7"
      },
      {
        "id": 4,
        "text": "Chromosome 11"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>Mutations in Codon 29 and 122 of chromosome 7 causes autosomal dominant form of hereditary pancreatitis. </strong></li>\n<li><strong>Gene responsible- &nbsp;Cationic trypsinogen </strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Short Bowel syndrome is characterized by all of the following except?",
    "choices": [
      {
        "id": 1,
        "text": "Weight loss"
      },
      {
        "id": 2,
        "text": "Hypogastrinemia"
      },
      {
        "id": 3,
        "text": "Diarrhoea"
      },
      {
        "id": 4,
        "text": "Steatorrhoea"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Short bowel syndrome is <strong>characterized by hypergastrinemia</strong> due to reduced small intestinal catabolism of gastrin. </p>\n<p><strong>Causes of Short bowel Syndrome:</strong></p>\n<ul>\n<li>Mesentric vascular disease- <strong>Mesenteric ischemia</strong> </li>\n<li>Primary musosal and sub mucosal disease- <strong>Crohns disease</strong> </li>\n<li>Operations without preexisting small intestinal disease- <strong>Jejuno ileal bypass for obesity</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with chronic crampy abdominal pain, rectal bleeding, and tenesmus. Endoscopic examination revealed multiple, continuous lesions in the rectum and rectosigmoid without normal mucosa in between. The mucosa was red and the surface was fine granular like sandpaper. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Crohn's disease"
      },
      {
        "id": 2,
        "text": "Diverticulitis"
      },
      {
        "id": 3,
        "text": "Ischemic colitis"
      },
      {
        "id": 4,
        "text": "Ulcerative colitis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The most likely diagnosis is <strong>ulcerative colitis</strong>&nbsp;(UC).</p>\n<p>UC is a <strong>mucosal</strong> disease that primarily involves rectum and extends proximally to involves some parts or whole of the colon. It can cause <strong>proctitis</strong>,<strong> proctocolitis</strong>, and<strong> colitis</strong>.</p>\n<p>The involvement of the mucosa in UC is <strong>continuous</strong> without any normal mucosa in between. The various mucosal changes in different stages of UC are as follows:&nbsp;</p>\n<ul>\n<li>Mild disease - mucosa appears <strong>erythematous&nbsp;</strong>with&nbsp;fine granular surface resembling <strong>sandpaper</strong></li>\n<li>Severe disease - mucosa is hemorrhagic, edematous, and ulcerated</li>\n<li>Long-standing disease - inflammatory polyps (<strong>pseudopolyps)&nbsp;</strong>due to&nbsp;epithelial regeneration.</li>\n</ul>\n<p>Microscopically UC shows the following findings:&nbsp;</p>\n<ul>\n<li><strong>Inflammation</strong> that is limited to <strong>mucosa </strong>and <strong>submucosa</strong></li>\n<li><strong>Distortion</strong> of the<strong> crypt</strong> architecture with the following changes -&nbsp;\n<ul>\n<li>Bifid&nbsp;and reduced number of crypts</li>\n<li>Gap between the crypt base and&nbsp;muscularis mucosae is seen</li>\n<li><strong>Cryptitis </strong>and <strong>crypt abscesses&nbsp;</strong>- due to crypt invasion by neutrophils</li>\n</ul>\n</li>\n<li>Basal plasma cells and multiple basal lymphoid aggregates</li>\n<li>Mucosal vascular congestion with edema and focal haemorrhage&nbsp;</li>\n<li>Mucosal inflammatory cell infiltration by neutrophils, lymphocytes, plasma cells, and macrophages&nbsp;</li>\n<li><strong>Backwash ileitis</strong> with:\n<ul>\n<li>Villous atrophy and crypt regeneration</li>\n<li>Increased neutrophil and mononuclear inflammation in the lamina propria</li>\n<li>Patchy cryptitis and crypt abscesses</li>\n</ul>\n</li>\n</ul>\n<p class=\"p1\">The below image shows pseudopolyps in ulcerative colitis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2fcc72d7f2ff4823a2f3b2d6fadb1ccax550x354.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f8ec978484c64ff6875589a8fc8228bcx800x533.JPEG"
    ]
  },
  {
    "text": "All of the following statements are true regarding Riedel\u2019s thyroiditis except",
    "choices": [
      {
        "id": 1,
        "text": "Thyroid gland is stony hard in consistency"
      },
      {
        "id": 2,
        "text": "It is a painless condition"
      },
      {
        "id": 3,
        "text": "Presents with hyperthyroidism"
      },
      {
        "id": 4,
        "text": "Tamoxifen and steroids are useful in treatment"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Riedel&rsquo;s thyroiditis presents with <strong>hypothyroidism</strong>.</li>\n<li>Riedel&rsquo;s thyroiditis is a rare disorder that typically occurs in middle-aged women.</li>\n<li>It presents with an insidious, painless goiter with local symptoms due to compression of the esophagus, trachea, neck veins, or recurrent laryngeal nerves.</li>\n<li>Dense fibrosis disrupts normal gland architecture and can extend outside the thyroid capsule.</li>\n<li>The goiter is hard,<strong> nontender</strong>&nbsp;often asymmetric, and fixed, leading to suspicion of a malignancy.</li>\n<li>Diagnosis requires <strong>open biopsy</strong> as FNA biopsy is usually inadequate.</li>\n<li>Treatment is directed to surgical relief of compressive symptoms.</li>\n<li><strong>Tamoxifen and&nbsp;steroids</strong> may also be beneficial.<br />&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Natalizumab is useful in _______",
    "choices": [
      {
        "id": 1,
        "text": "Ischemic bowel disease"
      },
      {
        "id": 2,
        "text": "Crohns disease"
      },
      {
        "id": 3,
        "text": "Ulcerative colitis"
      },
      {
        "id": 4,
        "text": "Stagnant bowel syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Natalizumab is a<strong> monoclonal antibody</strong> proven to be useful for crohns disease.&nbsp;</li>\n<li>It is a recombinant <strong>humanized IgG4 antibody against Alpha 4 integrins</strong> which is effective in induction and maintenance of remission in crohns disease patients.</li>\n<li>It has been <strong>approved for</strong> the treatment of patients who are <strong>refractory /intolerant to anti TNF therapy</strong>.</li>\n<li><strong>Medical management of Moderate to severe Crohns disease is as follows</strong> ( 5 ASA being the mainstay of treatment )</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a4e18eea59234f4d9e581ff245b2c0bfx356x352.PNG"
    ]
  },
  {
    "text": "Anti - LKM 2 antibodies are positive in",
    "choices": [
      {
        "id": 1,
        "text": "Chronic Hepatitis C"
      },
      {
        "id": 2,
        "text": "Chronic Hepatitis D"
      },
      {
        "id": 3,
        "text": "Drug induced Hepatitis"
      },
      {
        "id": 4,
        "text": "Autoimmune Hepatitis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Anti LKM(Liver Kidney Microsomes) antibodies are positive in Drug induced Hepatitis.</p>\n<table>\n<tbody>\n<tr>\n<td>Features&nbsp;</td>\n<td>Positive in&nbsp;</td>\n</tr>\n<tr>\n<td>Anti LKM 1&nbsp;</td>\n<td>Chronic Hepatitis C&nbsp;</td>\n</tr>\n<tr>\n<td><strong>Anti LKM 2</strong>&nbsp;</td>\n<td><strong>Drug induced hepatitis&nbsp;&nbsp;</strong></td>\n</tr>\n<tr>\n<td>Anti LKM 3&nbsp;</td>\n<td>Chronic Hepatitis D&nbsp;</td>\n</tr>\n<tr>\n<td>Anti actin&nbsp;</td>\n<td>Auto immune Hepatitis&nbsp;</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the given picture:",
    "choices": [
      {
        "id": 1,
        "text": "Middletons maneuver"
      },
      {
        "id": 2,
        "text": "Nixons Method"
      },
      {
        "id": 3,
        "text": "Castells method"
      },
      {
        "id": 4,
        "text": "Barkuns method"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Middleton's Maneuver.&nbsp;</p>\n<ul>\n<li>Examiner stands on left side of the patient <strong>facing the foot end of the bed</strong>.</li>\n<li>The hooked fingers of the right hand are placed under the costal margin and with left hand pressure is exerted over postero lateral aspect of lower thorax.</li>\n<li><strong>Spleen is left at deep inspiratory</strong> phase.(Palpatory test)</li>\n</ul>\n<p><strong>Percussion for splenic dullness is accomplished with any of the three techniques:</strong></p>\n<p><strong>Nixon&rsquo;s method:</strong> The patient is placed on the right side so that the spleen lies above the colon and stomach. Percussion begins at the lower level of pulmonary resonance in the posterior axillary line and proceeds diagonally along a perpendicular line toward the lower mid anterior costal margin. The upper border of dullness is normally 6&ndash;8 cm above the costal margin. Dullness &gt;8 cm in an adult is presumed to indicate splenic enlargement.</p>\n<p><strong>Castell&rsquo;s method:</strong> With the patient supine, percussion in the lowest intercostal space in the anterior axillary line (eighth or ninth) produces a resonant note if the spleen is normal in size. This is true during expiration or full inspiration. A dull percussion note on full inspiration suggests splenomegaly.</p>\n<p><strong>Percussion of Traube&rsquo;s semilunar space:</strong> The borders of Traube&rsquo;s space are the sixth rib superiorly, the left midaxillary line laterally,and the left costal margin inferiorly. The patient is supine with the left arm slightly abducted. During normal breathing, this space is percussed from medial to lateral margins, yielding a normal resonant sound. A dull percussion note suggests splenomegaly.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4c2969be79804d0f8f61f5b0d9d21081.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is seen with phenytoin therapy?",
    "choices": [
      {
        "id": 1,
        "text": "Hyperplasia of gums"
      },
      {
        "id": 2,
        "text": "Pseudolymphoma"
      },
      {
        "id": 3,
        "text": "Diplopia"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Phenytoin causes the following side effects: </p>\n<ul>\n<li><strong>Hyperplasia of gums </strong></li>\n<li><strong>Hyperglycemia </strong></li>\n<li><strong>Hirsuitism </strong></li>\n<li><strong>Hypersensitivity </strong></li>\n<li><strong>Hydantoin syndrome in pregnancy</strong> </li>\n<li>Megaloblastic anemia </li>\n<li>Osteomalacia </li>\n<li>Lymphadenopathy (Pseudolymphoma) </li>\n<li>Neurological symptoms like ataxia ,dizziness,confusion, Diplopia</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common diabetic cranial mononeuropathy is",
    "choices": [
      {
        "id": 1,
        "text": "7th Cranial Nerve"
      },
      {
        "id": 2,
        "text": "5th Cranial Nerve"
      },
      {
        "id": 3,
        "text": "3rd Cranial Nerve"
      },
      {
        "id": 4,
        "text": "2nd Cranial Nerve"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most common mononeuropathies are </p>\n<ul>\n<li><strong>Median neuropathy at the wrist</strong>.</li>\n<li><strong>Ulnar neuropathy at the elbow</strong>.</li>\n<li><strong>Peroneal neuropathy at the fibular head</strong>.</li>\n<li>In regard to cranial mononeuropathies, seventh nerve palsies are relatively common but may have other, nondiabetic etiologies. </li>\n<li>In diabetics, <strong>a third nerve palsy is most common, followed by sixth nerve</strong>, and, less frequently, fourth nerve palsies.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Upper Dorsal pontine syndrome is otherwise called _______",
    "choices": [
      {
        "id": 1,
        "text": "Raymond ceston syndrome"
      },
      {
        "id": 2,
        "text": "Locked In syndrome"
      },
      {
        "id": 3,
        "text": "Favilles syndrome"
      },
      {
        "id": 4,
        "text": "Benedikts syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Caused by <strong>obstruction of long circumferential branches of basilar artery</strong>.</p>\n<p><strong>Features:</strong></p>\n<table style=\"width: 225px;\">\n<tbody>\n<tr>\n<td style=\"width: 128px;\">Clinical Feature&nbsp;</td>\n<td style=\"width: 87px;\">Due to damage to&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 128px;\">Ipsilateral paralysis of muscles of mastication and sensory loss in face&nbsp;&nbsp;&nbsp;</td>\n<td style=\"width: 87px;\">Sensory and motor nuclei and tracts of CN V&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 128px;\">Ipsilateral ataxia + coarse intention tremor&nbsp;&nbsp;</td>\n<td style=\"width: 87px;\">Superior and middle cerebellar peduncle&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 128px;\">Horizontal Gaze palsy may occur&nbsp;&nbsp;</td>\n<td style=\"width: 87px;\">-&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 128px;\">Contralateral loss of sensory areas of body&nbsp;&nbsp;</td>\n<td style=\"width: 87px;\">Spinothalamic tract and medical lemniscus&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 128px;\">Contralateral hemiparesis of face and body may occur with ventral extension of lesion&nbsp;&nbsp;</td>\n<td style=\"width: 87px;\">Corticospinal tract&nbsp;</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Disease activity score is used in which of the following disease ?",
    "choices": [
      {
        "id": 1,
        "text": "Rheumatoid arthritis"
      },
      {
        "id": 2,
        "text": "Osteoarthritis"
      },
      {
        "id": 3,
        "text": "SLE"
      },
      {
        "id": 4,
        "text": "Both A and C"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>DAS score counted over 28 joints is used to decide the treatment</strong>.</p>\n<ul>\n<li>For mild cases &ndash; DMARD monotherapy</li>\n<li>For moderate cases &ndash; DMARD combination therapy</li>\n<li>For Severe cases &ndash; Combination of DMARD therapy but consider early use of biologicals</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "About syringomyelia all are true except:",
    "choices": [
      {
        "id": 1,
        "text": "Cape distribution of sensory deficits"
      },
      {
        "id": 2,
        "text": "Presents as central cord syndrome"
      },
      {
        "id": 3,
        "text": "There is no satisfactory treatment available"
      },
      {
        "id": 4,
        "text": "It is associated with Chiari type 2 malformations"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>All cases are associated with <strong>Chiari type 1 malformations</strong> in which the cerebellar tonsils protrude through the foramen magnum and into the cervical spinal canal.</li>\n<li>Syringomyelia is a developmental cavity of the cervical cord that may enlarge and produce <strong>progressive myelopathy</strong>.</li>\n<li>The sensory deficit has a distribution that is &ldquo;suspended&rdquo; over the nape of the neck, shoulders, and upper arms (<strong>cape distribution</strong>) or in the hands.</li>\n<li><strong>Muscle wasting in the lower neck, shoulders, arms, and hands with asymmetric</strong> or absent reflexes in the arms reflects expansion of the cavity in the gray matter of the cord.</li>\n<li><strong>Treatment</strong> of syringomyelia is generally <strong>unsatisfactory</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Not an internal manifestation of tuberous sclerosis is?",
    "choices": [
      {
        "id": 1,
        "text": "Retinal hamartomas"
      },
      {
        "id": 2,
        "text": "Pulmonary lymphangioleiomyomatosis"
      },
      {
        "id": 3,
        "text": "Renal angiomyolipomas"
      },
      {
        "id": 4,
        "text": "Adenoma sebacium"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>Adenoma sebacium is an external manifestation of tuberous sclerosis not an internal manifestation.</li>\n<li>In tuberous sclerosis, the <strong>earliest cutaneous sign is macular hypomelanosis</strong>, referred to as an ash leaf spot.</li>\n<li>These lesions are often present at birth and are usually multiple; however, detection may <strong>require Wood&rsquo;s lamp examination, especially in fair-skinned individuals</strong>.</li>\n<li>The <strong>pigment within them is reduced</strong>, but not absent.</li>\n<li>The average size is 1&ndash;3 cm, and the common shapes are polygonal and lance-ovate.</li>\n<li>Examination of the patient for additional cutaneous signs such as multiple angiofibromas of the face (adenoma sebaceum), ungual and gingival fibromas, fibrous plaques of the forehead, and connective tissue nevi (shagreen patches) is recommended.</li>\n<li>It is important to remember that an ash leaf spot on the scalp will result in a circumscribed patch of lightly pigmented hair. Internal manifestations include seizures, mental retardation, central nervous system (CNS) and retinal hamartomas, pulmonary lymphangioleiomyomatosis (women), renal angiomyolipomas, and cardiac rhabdomyomas.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Metabolic encephalopathy presents with",
    "choices": [
      {
        "id": 1,
        "text": "Brocas Aphasia"
      },
      {
        "id": 2,
        "text": "Transcortical sensory aphasia"
      },
      {
        "id": 3,
        "text": "Transcortical motor aphasia"
      },
      {
        "id": 4,
        "text": "Anomic Aphasia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Anomic aphasia is the single <strong>most common language disturbance seen in head trauma, metabolic encephalopathy, and Alzheimer&rsquo;s disease</strong>.</p>\n<p>Articulation, comprehension, and repetition are intact, but confrontation naming, word finding, and spelling are impaired. Word-finding pauses are uncommon, so language output is fluent but paraphasic, circumlocutious, and uninformative.</p>\n<p>The<strong> lesion</strong> sites can be anywhere<strong> within the left hemisphere language network</strong>, including the middle and inferior temporal gyri. </p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "RYR1 gene mutations are associated with",
    "choices": [
      {
        "id": 1,
        "text": "Duchenne muscular dystrophy"
      },
      {
        "id": 2,
        "text": "Tibial muscular dystrophy"
      },
      {
        "id": 3,
        "text": "Limb girdle muscle dystrophy"
      },
      {
        "id": 4,
        "text": "Malignant Hyperthermia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Malignant hyperthermia is associated with RYR1 gene mutations.</p>\n<p>This gene encodes <strong>skeletal muscle ryanodine receptor ,the calcium channel that releases calcium from sarcoplasmic reticulum</strong>.</p>\n<p>Mutations in the ryanodine receptor are associated with:</p>\n<ul>\n<li><strong>Central core myopathy </strong></li>\n<li><strong>Malignant hyperthermia </strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The features given in the images is characteristic of",
    "choices": [
      {
        "id": 1,
        "text": "Hand foot and mouth disease"
      },
      {
        "id": 2,
        "text": "IBD related enteropathic arthropathy"
      },
      {
        "id": 3,
        "text": "Reactive arthritis"
      },
      {
        "id": 4,
        "text": "Peripheral vascular disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>The image shows classical Keratoderma blenorrhagica which is an extra articular manifestation of reactive arthritis. </li>\n<li>Previously this condition was called Reiter&rsquo;s disease.</li>\n</ul>\n<p>Other extra articular manifestations includes:</p>\n<ul>\n<li>Uveitis </li>\n<li>Diarrhoea</li>\n</ul>\n<p>Articular manifestations include:</p>\n<ul>\n<li><strong>Asymmetrical oligo arthritis of large joint </strong></li>\n<li><strong>Additive type of arthritis</strong> </li>\n</ul>\n<p>Diagnosis:</p>\n<ul>\n<li>Mostly Clinical , shows HLA B27 positivity </li>\n</ul>\n<p>Treatment:&nbsp;</p>\n<ul>\n<li>First line- <strong>NSAIDS</strong> (&gt;80% resolution)&nbsp;</li>\n<li>Start with sulphasalazine &amp; Methotrexate if no resolution or if erosions are present</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dd45489e359d40638e6cd75edc1bcae7.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Post ictal confusion is absent in",
    "choices": [
      {
        "id": 1,
        "text": "Grand mal epilepsy"
      },
      {
        "id": 2,
        "text": "Atonic epilepsy"
      },
      {
        "id": 3,
        "text": "Absence seizures"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Post ictal confusion is characteristically absent in absence seizures:</strong></p>\n<ul>\n<li>Typical absence seizures are characterized by sudden, brief lapses of consciousness without loss of postural control.</li>\n<li><strong>The seizure typically lasts for only seconds, consciousness returns as suddenly as it was lost, and there is no postictal confusion. </strong></li>\n<li>In all others options post ictal confusion is present.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "True about the ECG is?",
    "choices": [
      {
        "id": 1,
        "text": "Every second beat is ectopic"
      },
      {
        "id": 2,
        "text": "Every Third beat is ectopic"
      },
      {
        "id": 3,
        "text": "AICDs are  used for occasional trigeminy"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Every Third beat is ectopic. </p>\n<ul>\n<li>The image shows a pattern of 2 normal sinus rhythm beats followed by premature ventricular beats. </li>\n<li>This is seen <strong>in ventricular trigeminy</strong>. </li>\n<li>Trigemini is an irregular heart beat or arrthymia comprising of a repetitive series of<strong> 2 normal heart beat and one premature heart beat</strong>. </li>\n<li><strong>With regard to ECG activity readings, Trigeminy refers to a rhythm where in every third beat is ectopic</strong>. </li>\n<li>That is starting from some other area and not from sinus node. </li>\n<li>PVCs refer to early depolarization commencing in the ventricle instead of the sinus node.</li>\n<li>Ventricular Trigeminy is defined as occurrence of PVCs every third beat. </li>\n<li>Medical treatment of trigemini PVC is Anti arrhythmic medications and beta blockers.</li>\n<li>Surgical treatment includes PACE MAKERS </li>\n<li><strong>Automated implantable Cardioverter Defibrillator (AICDS) are great for treating serious PVCs but are not used for patients with mild or occasional trigemini</strong>. </li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e8e0073979a3454e8c6caec747d13fd1.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The following drugs are contra-indicated for the treatment of atrial fibrillation associated with the WPW syndrome:",
    "choices": [
      {
        "id": 1,
        "text": "Adenosine"
      },
      {
        "id": 2,
        "text": "Amiodarone"
      },
      {
        "id": 3,
        "text": "Verapamil"
      },
      {
        "id": 4,
        "text": "Sotalol"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In WPW digoxin or calcium channel blockers may<strong> increase anterograde conduction through the bypass tract</strong>, so they should be avoided. (increases ventricular rate &gt;300 by decreasing the refractoriness of accessory pathways)</p>\n<p>Treatment for such induced arrhythmias:</p>\n<ul>\n<li>IV Procainamide</li>\n<li>DC cardioversion</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In patients with hypertrophic cardiomyopathy maximum mutations are found in which gene",
    "choices": [
      {
        "id": 1,
        "text": "Beta myosin heavy chain"
      },
      {
        "id": 2,
        "text": "Elastin"
      },
      {
        "id": 3,
        "text": "Alpha tropomyosin"
      },
      {
        "id": 4,
        "text": "Troponin T"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>Mutations in gene for<strong> b- Mysoin heavy chain are associated with 40% of the families</strong> with hypertrophic cardiomyopathy.</li>\n<li><strong>Troponin T mutations- 15% of the families.&nbsp;</strong></li>\n<li><strong>&alpha;- tropomyosin mutations ~5% of the families</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "D-Dimer value may be increased in all of the following except:",
    "choices": [
      {
        "id": 1,
        "text": "Myocardial infarction"
      },
      {
        "id": 2,
        "text": "Pregnancy"
      },
      {
        "id": 3,
        "text": "Anti-coagulation therapy"
      },
      {
        "id": 4,
        "text": "Sepsis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>D-Dimer values are falsely decreased in patients receiving anti coagulation therapy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/fe2dda87d2434f62a5720463e958a604x1121x695.PNG"
    ]
  },
  {
    "text": "A 36-year-old female patient has hyperparathyroidism, pituitary adenoma, and gastrinoma with cutaneous angiofibromas. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "MEN 1"
      },
      {
        "id": 2,
        "text": "MEN 2"
      },
      {
        "id": 3,
        "text": "MEN 3"
      },
      {
        "id": 4,
        "text": "MEN 4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario suggests a diagnosis of <strong>MEN 1 syndrome</strong>.</p>\n<p><strong>Multiple endocrine neoplasia</strong> (MEN) syndromes are characterized by tumors of two or more endocrine glands. There are <strong>four major types</strong> of MEN (MEN 1\u20134), and they either show an <strong>autosomal dominant</strong> pattern of inheritance or occur sporadically.\u00a0</p>\n<p><strong>MEN 1</strong>,\u00a0also known as <strong>Wermer\u2019s syndrome</strong>,\u00a0is characterized by the triad of <strong>parathyroid</strong>, <strong>pancreatic islet cell</strong>, and <strong>anterior pituitary\u00a0</strong><strong>tumors</strong>. Adrenal cortical tumors, carcinoid tumors, facial angiofibromas, collagenomas, thyroid tumors, and lipomas may also occur. MEN 1-associated tumors are usually multiple, larger, and more aggressive, resulting in resistance to treatment and poor patient outcomes.</p>\n<ol>\n<li><strong>Parathyroid tumors-</strong>\u00a0<strong>primary hyperparathyroidism</strong> is the <strong>most common</strong> feature of MEN 1. <strong>Hypercalcemia</strong> with or without symptoms (polyuria, polydipsia, constipation, dyspepsia), nephrolithiasis, and osteitis fibrosa cystica may also occur.\u00a0All four parathyroid glands are usually affected with multiple adenomas or hyperplasia.\u00a0</li>\n<li><strong>Pancreatic islet cell tumors-</strong>\u00a0these are <strong>neuroendocrine tumors</strong>, including:\n<ul>\n<li><strong>Gastrinoma</strong> (gastrin-secreting tumors)- associated with increased gastric acid secretion and multiple peptic ulcers (Zollinger-Ellison syndrome). Patients may present with diarrhea and steatorrhea. Gastrinomas are the<strong> major cause</strong> of <strong>mortality</strong> and morbidity.\u00a0</li>\n<li><strong>Insulinoma</strong>\u00a0(insulin-secreting tumors)- patients present with <strong>hypoglycemic symptoms</strong> (weakness, headaches, sweating, seizures, weight gain) that develop after fasting or exertion and improve after glucose intake. Along with increased plasma insulin levels and hypoglycemia, increased C peptide and proinsulin levels help in diagnosing the condition.</li>\n<li><strong>Glucagonoma</strong>\u00a0(glucagon-secreting tumors)- may be associated with necrolytic migratory erythema, weight loss, anemia, and stomatitis.\u00a0</li>\n<li><strong>VIPomas</strong> (Vasoactive intestinal peptide [VIP]-secreting tumors): The VIPoma syndrome, also known as Verner-Morrison syndrome, is characterized by watery diarrhea, hypokalemia, and achlorhydria. These are mostly located in the <strong>tail</strong> of the <strong>pancreas</strong>.</li>\n<li><strong>PPomas</strong> (Pancreatic polypeptide-secreting tumors) and <strong>nonfunctioning pancreatic tumors-</strong>\u00a0are associated with a <strong>worse prognosis</strong> as they often go undiagnosed due to the absence of both clinical features and biochemical abnormalities.</li>\n</ul>\n</li>\n<li><strong>Pituitary tumors-</strong>\u00a0manifestations depend on the hormone secreted (symptoms of\u00a0hyperprolactinemia, acromegaly, or Cushing\u2019s disease) and tumor size (visual disturbances or hypopituitarism due to compression of the optic chiasm or normal pituitary tissue).\u00a0</li>\n</ol>\n<p><strong>Surgical excision</strong> of the nonmetastatic tumor after localization is the <strong>curative treatment</strong>. Appropriate medical therapy can be used for some tumors when surgery is contraindicated or unsuccessful (calcimemetics for parathyroid tumors, parietal cell H<sup>+</sup>-K<sup>+</sup>-ATPase inhibitors for gastrinomas). In case of metastasis, chemotherapy, hormonal therapy, radiation therapy, and artery embolization may be successful.</p>\n<p>MEN 1 occurs due to a mutation in the <em>MEN1\u00a0</em>gene located on <strong>chromosome 11q13</strong>. Mutational genetic analysis is necessary to confirm the clinical diagnosis and identify family members who harbor the mutation and require screening for tumor detection and early treatment.</p>\n<p>Other options:</p>\n<p>Options B and C: <strong>MEN 2</strong>, also called <strong>Sipple\u2019s syndrome</strong>, is characterized by medullary thyroid carcinoma (MTC), pheochromocytomas, and parathyroid tumors. This occurs due to mutations of the <strong>rearranged during transfection (RET) protooncogene</strong>. There are three clinical variants -</p>\n<ol>\n<li><strong>MEN 2A</strong> (most common): MTC is associated with pheochromocytomas in 50% of patients and parathyroid tumors in 20% of patients. MEN 2A may also be associated with Hirschsprung\u2019s disease and cutaneous lichen amyloidosis.</li>\n<li>MEN 2B<strong>\u00a0(MEN</strong> <strong>3</strong>): MTC is associated with pheochromocytoma, along with Marfanoid habitus; mucosal neuromas of the lips, tongue, and eyelids; medullated corneal fibers; and intestinal autonomic ganglion dysfunction leading to multiple diverticulae and megacolon. Parathyroid tumors are usually absent.</li>\n<li><strong>MTC only </strong>(FMTC): MTC is the only manifestation.</li>\n</ol>\n<p>Option D:\u00a0<strong>MEN 4\u00a0</strong>is characterized by a combination of\u00a0<strong>MEN 1\u2013associated tumors</strong> and\u00a0<strong><em>CDKN1B</em> mutation-related tumors</strong>\u00a0(gonadal, adrenal, renal, and thyroid tumors).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are features of McCune Albright syndrome except?",
    "choices": [
      {
        "id": 1,
        "text": "Pigmented skin patches"
      },
      {
        "id": 2,
        "text": "Polyostotic fibrous dysplasia"
      },
      {
        "id": 3,
        "text": "Short Stature"
      },
      {
        "id": 4,
        "text": "Adrenal Adenoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>McCune Albright syndrome consist of:</p>\n<ul>\n<li>Poly ostotic fibrous dysplasia</li>\n<li>Pigmented skin patches</li>\n<li>Endocrine disorders like <strong>acromegaly</strong>, adrenal adenoma and autonomous ovarian function.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old male patient came with back pain and stiffness. He was found to have sacroiliitis on imaging and was diagnosed with ankylosing spondylitis. He is positive for an HLA marker. This marker positivity is also seen in _____.",
    "choices": [
      {
        "id": 1,
        "text": "1 and 4 only"
      },
      {
        "id": 2,
        "text": "1, 2, and 3"
      },
      {
        "id": 3,
        "text": "1, 2 and 4"
      },
      {
        "id": 4,
        "text": "1 and 2 only"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In the above clinical scenario of <strong>ankylosing spondylitis (AS)</strong>, there will be positivity for <strong>HLA-B27</strong>. This marker positivity is also seen in <strong>psoriatic</strong> <strong>spondylitis (1)</strong> and\u00a0<strong>reactive arthritis (2) due to <em>Shigella</em></strong>.</p>\n<p><strong>HLA-B27 </strong>is also\u00a0found to be positive in the following conditions:</p>\n<ul>\n<li><strong>Psoriatic spondylitis</strong>: Some patients with psoriatic arthritis have axial joint involvement without peripheral involvement, which presents similarly to AS.</li>\n<li><strong>Reactive arthritis</strong>: Acute non-purulent arthritis occurs a few days after a systemic infection or an infection elsewhere in the body. It is usually seen following enteric or urogenital infection. Organisms causing these infections are <em>Shigella, Salmonella, Yersinia, </em>and<em> Chlamydia.</em></li>\n</ul>\n<p><strong>Ankylosing spondylitis</strong>\u00a0is a chronic inflammatory disease affecting the spine and sacroiliac joint. It is more common in\u00a0<strong>young males</strong> and strongly associates with <strong>HLA-B27</strong>.</p>\n<p>Clinically, patients present with\u00a0<strong>recurring backache,</strong>\u00a0which\u00a0<strong>worsens\u00a0</strong>in the<strong>\u00a0early morning\u00a0</strong>or<strong>\u00a0</strong>with<strong>\u00a0inactivity</strong>\u00a0and improves with exercise. Later, they develop fatigue, pain, joint swellings, and heel pain.</p>\n<p><strong>Extra-articular manifestations</strong>\u00a0include uveitis<em>,</em>\u00a0aortic incompetence, carditis, and apical lobe fibrosis.</p>\n<p>X-ray findings:</p>\n<ul>\n<li>Erosion\u00a0of\u00a0sacroiliac joints -\u00a0<strong>sacroiliitis</strong></li>\n<li>Squaring\u00a0of\u00a0vertebrae and\u00a0bamboo spine appearance</li>\n</ul>\n<p>Other options:</p>\n<ul>\n<li><strong>Behcet's disease</strong> - HLA-B51 positive</li>\n<li><strong>Rheumatoid arthritis</strong> - HLA DR4 positive</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Type of MODY associated with renal cyst is",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "3"
      },
      {
        "id": 3,
        "text": "5"
      },
      {
        "id": 4,
        "text": "7"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>MODY 5</strong> is associated with <strong>renal cyst</strong>.</li>\n<li><strong>Most common type of MODY- MODY 3</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Selective proteinuria occurs due to defect in",
    "choices": [
      {
        "id": 1,
        "text": "Foot process of podocytes"
      },
      {
        "id": 2,
        "text": "Glomerular basement membrane"
      },
      {
        "id": 3,
        "text": "Both A and B"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>The foot processes of epithelial cells (podocytes) cover the urinary side of the glomerular basement membrane and produce a series of narrow channels (slit diaphragms) to allow molecular passage of small solutes and water but not proteins.</li>\n<li>Some glomerular disease such as <strong>minimal change disease</strong>, cause fusion of glomerular epithelial cell foot processes, resulting in predominantly <strong>selective loss of albumin</strong>.</li>\n<li>Other glomerular diseases can present with disruption of the basement membrane and slit diaphragms (e.g., by immune complex deposition), resulting in losses of albumin and other plasma proteins.</li>\n<li>The fusion of foot processes causes increased pressure across the capillary basement membrane, resulting in areas with larger pore sizes (and more severe &ldquo;nonselective&rdquo; proteinuria).</li>\n<li>The normal glomerular endothelial cell forms a barrier composed of pores of ~100 nm that retain blood cells but offer little impediment to passage of most proteins.</li>\n<li>The glomerular basement membrane traps most large proteins (&gt;100 kDa).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Medicine St 2';
        const quizFilename = 'medicine-st-2-de5d3b1f.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>