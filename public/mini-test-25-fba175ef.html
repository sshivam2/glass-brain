<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Test 25 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2021-22
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The structure marked \"?\" in the image is composed of _____ cartilage.",
    "choices": [
      {
        "id": 1,
        "text": "Fibrous cartilage"
      },
      {
        "id": 2,
        "text": "Hyaline cartilage"
      },
      {
        "id": 3,
        "text": "Elastic cartilage"
      },
      {
        "id": 4,
        "text": "Yellow fibrocartilage"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p class=\"ng-binding\">The structure marked \"?\" in the image is the <strong>thyroid cartilage</strong>, and it is composed of <strong>hyaline cartilage</strong>.</p>\n<p class=\"ng-binding\">Thyroid cartilage\u00a0is identified by the presence of superior and inferior horns, and its relation with the epiglottis and larynx. The given image shows a cut-open view of the larynx from the back, and here, the thyroid cartilage encases the larynx anteriorly. The stalk of the epiglottis is also seen attached to the inner surface of the thyroid cartilage.</p>\n<p>Hyaline cartilage is made up of chondrocytes and matrix:</p>\n<ul>\n<li>The chondrocytes in the deeper matrix are rounded in shape and may appear in groups of eight that originate from the mitotic divisions of a single chondroblast. These groups of cells are called\u00a0<strong>isogenous cell aggregates</strong>\u00a0or cell nests.</li>\n<li>The important components of the matrix are\u00a0<strong>type II collagen</strong>,\u00a0<strong>aggrecan</strong>\u00a0(proteoglycan), and\u00a0<strong>chondronectin</strong>\u00a0(glycoprotein).</li>\n<li>The matrix that immediately surrounds the chondrocytes is basophilic and is known as the territorial matrix, whereas the matrix that is more distant from the cells appears pale and is known as the\u00a0<strong>interterritorial matrix</strong>.</li>\n</ul>\n<p>Hyaline cartilage is found at various sites:</p>\n<ul>\n<li>Larger respiratory passages (nose, larynx, trachea, and bronchi)</li>\n<li>Thyroid cartilage</li>\n<li>Cricoid cartilage</li>\n<li>Base of the arytenoid cartilage</li>\n<li>Ventral end of ribs, where they articulate with the sternum</li>\n<li>Epiphyseal plate of long bones</li>\n<li>Articular cartilage of synovial joints\u00a0</li>\n<li>Temporary skeleton in embryo</li>\n</ul>\n<p>On microscopy, hyaline cartilage can be identified by the following characteristics:</p>\n</div>\n</div>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<ul>\n<li>Presence of chondrocytes within lacunae.</li>\n<li>Group of two or more chondrocytes, which are known as\u00a0<strong>isogenous cell aggregates</strong>\u00a0or\u00a0<strong>cell nests</strong></li>\n<li>Basophilic territorial matrix and pale interterritorial matrix</li>\n<li>Presence of perichondrium with outer fibrous and the inner cellular layer</li>\n</ul>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0c67afaad5fc4fcbac0add1852c7ae69.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7ac7f4aa81f74695a243ce4e21d274c7x1280x1514.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b6d317d4f815498caafaad4fa976537ex960x720.JPEG"
    ]
  },
  {
    "text": "The type of laryngoscope blade shown in the given image is:",
    "choices": [
      {
        "id": 1,
        "text": "Miller laryngoscope blade"
      },
      {
        "id": 2,
        "text": "Magill laryngoscope blade"
      },
      {
        "id": 3,
        "text": "Macintosh laryngoscope blade"
      },
      {
        "id": 4,
        "text": "McCoy laryngoscope blade"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows a Miller laryngoscopic blade.\u00a0</p>\n<p>A laryngoscope is an instrument used for examination of the larynx and facilitation of tracheal intubation. It has three components: the handle, the blade, and the light source. The Macintosh and Miller blades are the most popularly used blades.</p>\n<p><strong>Miller's </strong>blade\u00a0is a\u00a0<strong>straight blade</strong>. Its curve begins 2 inches from the tip. It is inserted using the para-glossal technique. This technique avoids contact with the maxillary incisors and provides\u00a0maximal tongue control.</p>\n<p>It is used in:</p>\n<ul>\n<li>Neonates, infants, and young children</li>\n<li>Adults with short thyromental distance and long floppy epiglottis.</li>\n</ul>\n<div class=\"page\" title=\"Page 552\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Macintosh</strong> blade is a sharply <strong>curved</strong> blade with a large flange. It is inserted in the right side of the mouth, and the flange is used to sweep the tongue to the left. The blade is advanced and positioned in the vallecula. Advantages of a curved blade include:</p>\n</div>\n</div>\n</div>\n<ul>\n<li>Greater room available for the passage for an endotracheal tube</li>\n<li>Less damage to the teeth</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/536ce741692e4563a4ae137f13a08d0f.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/94f7e038c4754c97b5e546a52508b556x1024x700.jpeg"
    ]
  },
  {
    "text": "An 8-year-old boy is brought with severe pain in his right thigh which has worsened over the last few months. He also has frequent nose bleeds and gets fatigued easily while playing. Examination reveals hepatosplenomegaly. Lab reports show thrombocytopenia and leukocyte assay with low levels of beta-glucosidase activity. What is the inheritance pattern of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "X-linked recessive"
      },
      {
        "id": 2,
        "text": "X-linked dominant"
      },
      {
        "id": 3,
        "text": "Autosomal recessive"
      },
      {
        "id": 4,
        "text": "Autosomal dominant"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario of bone pain, epistaxis, hepatosplenomegaly, and <strong>low levels of\u00a0\u03b2-glucosidase</strong> suggests a diagnosis of <strong>Gaucher's disease</strong> that is inherited in an <strong>autosomal recessive</strong> pattern.</p>\n<p>Gaucher's disease is an inborn error of metabolism\u00a0due to the <strong>deficiency</strong> of the enzyme <strong>acid \u03b2-glucosidase.</strong>\u00a0This leads to the <strong>accumulation\u00a0</strong>of\u00a0<strong>glucosylceramide</strong>\u00a0in the cells of the reticuloendothelial system.</p>\n<p>The clinical features result from the accumulation of lipid-laden macrophages in the spleen, liver, bone marrow, bone, and other tissues. It is characterized by <strong>hematologic</strong> abnormalities, <strong>organomegaly</strong>, and <strong>skeletal</strong> <strong>involvement</strong> like bone pain and pathological fractures. There are 3 clinical subtypes :</p>\n<p><strong>Type 1</strong> - presents from early childhood to late adulthood. These patients present with:</p>\n<ul>\n<li>Hepatosplenomegaly</li>\n<li>Bone pain</li>\n<li>Pathological fractures</li>\n<li>Thrombocytopenia</li>\n<li>Chronic fatigue</li>\n<li>Erlenmeyer flask deformity of distal femur</li>\n</ul>\n<p><strong>Type 2</strong> - <strong>acute</strong> <strong>neuronopathic form</strong>. These patients have a rapid neurodegenerative course and present with increased tone, strabismus, and organomegaly. These patients die within 1 year of life.</p>\n<p><strong>Type 3</strong> - juvenile or <strong>subacute neuronopathic form</strong>. It presents in childhood and there is death by 10-15 years of age.</p>\n<p><strong>Gaucher cells</strong>\u00a0are the pathological hallmark of the disease. They are seen in the reticuloendothelial system, especially in the <strong>bone marrow. </strong>It has a <strong>wrinkled paper appearance</strong>\u00a0due to the presence of intracytoplasmic inclusions. The cytoplasm of the Gaucher cell is strongly PAS-positive.</p>\n<p>Gaucher's disease is treated with <strong>enzyme replacement</strong> <strong>therapy</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the dose of vitamin A prophylaxis given to children between the ages of 1-5 years under the vitamin A distribution scheme in India?",
    "choices": [
      {
        "id": 1,
        "text": "2,00,000 IU  given yearly"
      },
      {
        "id": 2,
        "text": "1,00,000 IU  given yearly"
      },
      {
        "id": 3,
        "text": "1,00,000 IU  given 6-monthly"
      },
      {
        "id": 4,
        "text": "2,00,000 IU given 6-monthly"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Under the vitamin-A distribution scheme in India, <strong>200000 IU </strong>of vitamin A are given orally at<strong> 6-monthly intervals </strong>between the ages<strong> 1-5 years</strong>.</p>\n<p>Vitamin A deficiency is a major public health problem among the lower-income population in India. Thus, India has a national program for the <strong>prevention of nutritional blindness</strong>. The <strong>beneficiaries</strong> include all <strong>pre-school children</strong> between 1-5 years of age.</p>\n<p>The program focuses on the following things:</p>\n<ol>\n<li>Promoting intake of vitamin A-rich foods among preschool children, pregnant, and lactating mothers. The program also promotes appropriate breastfeeding.</li>\n<li>Supplementation of vitamin A in preschool children. The first dose of 100000 IU is given at 9 months of age with MMR vaccine. Subsequent doses of 200000 IU are given every 6 months till the age of 5 years.</li>\n<li>Prompt treatment of xerophthalmia at health facilities. Locally trained primary health workers are trained to treat a wide range of eye conditions like acute conjunctivitis, ophthalmia neonatorum, trachoma, and superficial foreign bodies.</li>\n<li>Supplementation of vitamin A (one dose) in children suffering from measles or severe malnutrition</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a feature of postmortem hanging?",
    "choices": [
      {
        "id": 1,
        "text": "Oblique ligature mark"
      },
      {
        "id": 2,
        "text": "Absence of salivary dribble mark"
      },
      {
        "id": 3,
        "text": "Le facie sympathique"
      },
      {
        "id": 4,
        "text": "Tear of carotid artery intima"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>absence of a salivary dribble</strong> mark is a feature of <strong>postmortem</strong> hanging. The <strong>presence</strong> of a <strong>salivary dribble</strong> is a feature of <strong>antemortem</strong> hanging.</p>\n<p>A <strong>salivary dribble mark</strong> is the <strong>surest</strong> sign of an <strong>antemortem</strong> hanging and is due to\u00a0the consequence of pressure and friction on the submandibular salivary glands due to the ligature. This results in dribbling of the saliva from the angle of the mouth (angle opposite to the knot).\u00a0</p>\n<p>The other options<strong>\u00a0</strong>are all signs of antemortem hanging.</p>\n<p>Option 1 -<strong>\u00a0Oblique ligature mark</strong> is seen in <strong>antemortem</strong> hanging. This is in contrast to the circular ligature mark seen in postmortem hanging.\u00a0</p>\n<p><strong>Option 3 -\u00a0Le facie sympathique</strong> is the term used to describe the phenomenon when the eye on the same side as the ligature mark remains open with a dilated pupil. This is caused by <strong>pressure</strong> on the <strong>cervical sympathetic chain</strong> of that side. It is an indicator of <strong>antemortem</strong> hanging.\u00a0</p>\n<p><strong>Option 4 - </strong>Tear of carotid artery intima, known as the\u00a0<strong>Amussat's sign</strong>,\u00a0is seen with antemortem hanging. These are transverse tears and are most clearly seen in obese victims and posteriorly placed knots. While the absence of this sign doesn't exclude antemortem hanging, it is never seen in postmortem hanging.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a21a55dd1d6e4a07a705b6f41eb22142x1279x1320.JPEG"
    ]
  },
  {
    "text": "A patient presents with a sudden painless loss of vision in his right eye. On fundus examination, the following finding was seen. Which among the following conditions is likely?",
    "choices": [
      {
        "id": 1,
        "text": "Central retinal artery occlusion"
      },
      {
        "id": 2,
        "text": "Central retinal vein occlusion"
      },
      {
        "id": 3,
        "text": "Retinal detachment"
      },
      {
        "id": 4,
        "text": "Retinitis pigmentosa"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows a <strong>splashed sauce appearance</strong> which is characteristic of <strong>central retinal vein occlusion</strong> (CRVO).\u00a0</p>\n<div class=\"page\" title=\"Page 285\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>CRVO refers to sudden or acute occlusion of the central retinal vein. It presents with a sudden loss of vision. On examination, a relative afferent pupillary defect is present.</p>\n<p>Funduscopy shows engorged and tortuous retinal veins, massive <strong>retinal hemorrhages</strong> with <strong>splashed tomato appearance</strong>, and cotton wool spots. The disc is edematous and hyperemic. Changes that occur later include neovascularization at the disc or periphery with pigmentary changes at the macula.</p>\n</div>\n</div>\n</div>\n<p>Complications:</p>\n<ul>\n<li>Rubeosis iridis or neovascularization of the iris</li>\n<li>Neovascular glaucoma (NVG) or 100 day glaucoma</li>\n<li>Vitreous hemorrhage</li>\n</ul>\n<p>100-day glaucoma is a type of neovascular glaucoma (NVG) and is so-called because it typically develops <strong>3 months after</strong> the episode of CRVO.</p>\n<p>Other options:</p>\n<p>Option A- The funduscopy findings in <strong>central retinal artery occlusion</strong>\u00a0include pale retina, thread-like arteries, a cherry-red spot in the macula, and cattle trucking (segmentation of blood in the retinal veins). It is shown below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c661c32698974b0b8cc424f844d50647.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/079b44d9f7f443a998cfafde6927d046x600x448.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/51f0183ebbfe494b835969d693c027f9x648x484.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b9cd3ed48cf74c6db3a249024d611322x720x621.PNG"
    ]
  },
  {
    "text": "A 20-year-old male patient was brought to the emergency department with complaints of bleeding from the nose after a fistfight. On evaluation, it was found to be a vertical fracture of the nasal septum. What is the name of the fracture suffered by this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Chevallet fracture"
      },
      {
        "id": 2,
        "text": "Jarjaway fracture"
      },
      {
        "id": 3,
        "text": "Citelli fracture"
      },
      {
        "id": 4,
        "text": "Tripod fracture"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Since it is a<strong> vertical fracture</strong> of the nasal septum, it is called a <strong>Chevallet fracture</strong>.</p>\n<div class=\"page\" title=\"Page 180\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Injuries to the nasal septum can result from trauma to the nose from the front, side, or below. The septum may get buckled on itself, fracture vertically, horizontally, or get crushed.</p>\n</div>\n</div>\n</div>\n<p>A <strong>Chevallet</strong> <strong>fracture</strong> usually results from a blow to the nose<strong> from below.</strong> This fracture line runs\u00a0<strong>vertically. </strong>It extends\u00a0from the anterior nasal spine upwards to the junction of the bony and cartilaginous dorsum of the nose.</p>\n<p>A<strong> Jarjaway fracture</strong>\u00a0results from a blow to the nose <strong>from the front</strong>. The fracture line runs<strong> horizontally</strong> backward. It begins just above the anterior nasal spine and extends just above the junction of septal cartilage with the vomer.\u00a0</p>\n<div class=\"page\" title=\"Page 180\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Patients with septal injuries with mucosal tears present with profuse epistaxis. Those with an intact mucosa may have a septal hematoma, which should be drained.\u00a0</p>\n<div class=\"page\" title=\"Page 180\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Dislocated or fractured fragments of the septum should be repositioned and supported. This is done with mucoperichondrial flaps, mattress sutures, and nasal packing.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/29bcd8a1502f43bfb56a59c30dc3c3e2x600x1087.JPEG"
    ]
  },
  {
    "text": "A 52-year-old female patient with type 2 diabetes mellitus has been prescribed pioglitazone. What will you tell her when she asks about the most common adverse effect of thiazolidinediones?",
    "choices": [
      {
        "id": 1,
        "text": "Compensated heart failure"
      },
      {
        "id": 2,
        "text": "Weight gain and edema"
      },
      {
        "id": 3,
        "text": "Osteoporosis"
      },
      {
        "id": 4,
        "text": "Liver dysfunction"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span data-preserver-spaces=\"true\">The most common adverse effects of the thiazolidinediones are&nbsp;</span><strong><span data-preserver-spaces=\"true\">weight gain and edema</span></strong><span data-preserver-spaces=\"true\">.</span></p>\n<p><span data-preserver-spaces=\"true\">Thiazolidinediones are a selective agonist of nuclear&nbsp;</span><strong><span data-preserver-spaces=\"true\">peroxisome proliferator-activated receptor gamma&nbsp;</span></strong><span data-preserver-spaces=\"true\">(PPAR-&gamma;). They modulate the expression of genes involved in lipid and glucose metabolism, insulin signal transduction, and adipocyte differentiation. These effects increase the sensitivity of the tissues to insulin.</span></p>\n<p><span data-preserver-spaces=\"true\">Pioglitazone and rosiglitazone are used to treat patients with type 2 diabetes. They are known to cause f</span>luid retention and edema<span data-preserver-spaces=\"true\">&nbsp;and therefore avoided in patients who have heart failure.&nbsp;</span></p>\n<p><span data-preserver-spaces=\"true\">Pioglitazone is metabolized in the liver and constant liver function monitoring is required as it is hepatotoxic. It is thus contraindicated in liver disease.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The marked phase in the cardiac muscle action potential mainly occurs due to ______.",
    "choices": [
      {
        "id": 1,
        "text": "Efflux of the calcium ions"
      },
      {
        "id": 2,
        "text": "Efflux of the sodium ions"
      },
      {
        "id": 3,
        "text": "Efflux of the potassium ions"
      },
      {
        "id": 4,
        "text": "Influx of the sodium ions"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The marked phase in the cardiac action potential is phase 3. It occurs due to the <strong>efflux</strong> of <strong>potassium ions.</strong></p>\n<p>Phases of the cardiac muscle action potential.</p>\n<ul>\n<li><strong>Phase 0 </strong>(depolarization): <strong>Opening</strong> of <strong>fast sodium channels</strong>. When the cardiac cell is stimulated, the fast sodium channels (voltage-gated sodium channels) open and cause sodium influx. This depolarizes the cell and the membrane potential becomes positive. It reaches about +20 mV.\u00a0</li>\n<li><strong>Phase 1 </strong>(initial repolarization): When the membrane potential reaches +20mV, the <strong>fast sodium channels close</strong> and the <strong>potassium channels open</strong>. The potassium ions leave the cell leading to a brief repolarisation.\u00a0</li>\n<li><strong>Phase 2 </strong>(plateau): <strong>Fast potassium channels close</strong> and <strong>calcium channels open</strong>. The voltage-gated Ca<sup>2+</sup> channels start opening slowly in phases 0 and 1. The influx of calcium through these channels is balanced by the decrease in the efflux of potassium via the potassium channels. This produces the <strong>plateau</strong>.\u00a0</li>\n<li><strong>Phase 3 </strong>(rapid repolarization): <strong>Slow potassium channels open</strong> and <strong>calcium channels close</strong>. The potassium ions leave the cell through slow potassium channels and the calcium channels close, stopping the influx of calcium ions. This ends the plateau and brings the membrane potential to the resting level.\u00a0</li>\n<li><strong> Phase 4 </strong>(resting membrane potential):\u00a0 around \u221280 to \u221290 millivolts.</li>\n</ul>\n<p>The illustration given below shows action potential of cardiac muscle.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d76c3296c2ed4436ac4a423f303bba41.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a59918e997944e9287a27acdeaf98065x1280x1419.JPEG"
    ]
  },
  {
    "text": "A middle-aged woman presents with right wrist pain. She says that the pain aggravates while working and improves with rest. On examination, there is local tenderness in the area of the dorsal radial styloid. There is no limitation of motion, but the ulnar deviation is very painful. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Kienb\u00f6ck\u2019s disease"
      },
      {
        "id": 2,
        "text": "Scaphoid fracture"
      },
      {
        "id": 3,
        "text": "Carpometacarpal osteoarthritis"
      },
      {
        "id": 4,
        "text": "De Quervain\u2019s disease"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above clinical scenario is suggestive of <strong>D</strong><strong>e Quervain's disease</strong>.</p>\n<p>De Quervain's disease is a <strong>stenosing tenosynovitis</strong> of the extensor tendons of the first dorsal compartment, namely\u00a0<strong>extensor pollicis brevis </strong>(EPB)<strong>\u00a0</strong>and<strong>\u00a0abductor pollicis longus </strong>(APL). It\u00a0involves <strong>noninflammatory thickening</strong> of both the <strong>tendons</strong> and the tunnel or <strong>sheath</strong> through which they pass. This condition is prominent among females, especially<strong> women</strong> of <strong>childbearing age</strong>.</p>\n<p>Key diagnostic factors:</p>\n<ul>\n<li class=\"bulletIndent2\">History of joint overuse at home or at work.</li>\n<li class=\"bulletIndent2\">Pain and tenderness at the <strong>tip of radial styloid.</strong></li>\n<li class=\"bulletIndent2\"><strong>Positive Finkelstein test</strong></li>\n</ul>\n<p><strong>Finkelstein's test </strong>- The examiner grasps the thumb of the patient and abducts the hand towards the ulnar side. This causes severe pain over the tip of the styloid process.\u00a0It is positive in the following conditions:</p>\n<ul>\n<li><strong>De Quervain's disease</strong> (tenosynovitis)</li>\n<li>Arthritis in the intercarpal\u00a0and radiocarpal joints</li>\n<li>Superficial radial nerve entrapment\u00a0</li>\n<li>Intersection syndrome i.e. tenosynovitis occurs due to friction between the obliquely placed extensor pollicis brevis and abductor pollicis tendons and the\u00a0longitudinally placed extensor tendons.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/878ea34d5ac843c6bdb7843a23e9495ex1280x1492.JPEG"
    ]
  },
  {
    "text": "A 35-year-old woman presents to the OPD with amenorrhea for the last 8 months. She complains of a loss of libido and problems with intercourse with her partner. There is a previous history of chronic radiation exposure. Investigations are given below. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Premature ovarian failure"
      },
      {
        "id": 2,
        "text": "Androgen insensitivity syndrome"
      },
      {
        "id": 3,
        "text": "Prolactinoma"
      },
      {
        "id": 4,
        "text": "Polycystic ovarian syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given clinical scenario, a history of amenorrhea and loss of libido with chronic radiation exposure and elevated FSH levels <strong>(&gt; 40 IU/L) </strong>in a 35-year-old female point toward the diagnosis of <strong>premature ovarian failure</strong>.</p>\n<p>Premature ovarian failure is defined as <strong>ovarian failure</strong> occurring <strong>before</strong> the age of<strong> 40 years</strong>. Clinically, it presents as <strong>secondary amenorrhoea</strong> for<strong>&nbsp;at least 3 months</strong> with <strong>raised FSH, raised FSH/LH ratio,</strong> and <strong>low estrogen.</strong></p>\n<p><strong>Causes of POF</strong></p>\n<ul>\n<li>Migration of germ cells from the yolk sac.</li>\n<li>Germ cell apoptosis.\n<ul>\n<li>Chromosomal abnormalities</li>\n<li>Autoimmune diseases - hypothyroidism, Addison's disease, etc</li>\n<li>Genital TB</li>\n<li>Smoking</li>\n<li><strong>Radiation and chemotherapy</strong></li>\n<li>Hysterectomy</li>\n<li>Prolonged GnRH therapy</li>\n<li>Induction of multiple ovulation.</li>\n</ul>\n</li>\n</ul>\n<p>Clinical features include <strong>amenorrhea,</strong> hot flashes, sweating, <strong>diminished libido,</strong> vaginal dryness, and urinary symptoms.</p>\n<p>Management:</p>\n<ul>\n<li>Treatment of cause</li>\n<li>If <strong>not interested</strong> in <strong>pregnancy:</strong>\n<ul>\n<li>Hormone replacement therapy <strong>(HRT)</strong> - Libido improves with estrogen therapy</li>\n</ul>\n</li>\n<li>If <strong>interested</strong> in <strong>pregnancy:</strong>\n<ul>\n<li><strong>Ovulation induction</strong> (if an ovarian reserve is present) or <strong>donor eggs</strong> for in vitro fertilization.</li>\n</ul>\n</li>\n</ul>\n<p>Other options:</p>\n<p>Option B: Patients with&nbsp;<strong>androgen insensitivity syndrome</strong>&nbsp;would have presented with primary amenorrhea. Karyotyping would reveal a 46XY karyotype. LH is raised, but <strong>FSH is normal</strong>.&nbsp;</p>\n<p>Option C: A&nbsp;<strong>prolactinoma</strong> would present with <strong>elevated prolactin levels.</strong></p>\n<div class=\"page\" title=\"Page 483\">Option D: In <strong>polycystic ovarian syndrome</strong> (PCOS), there are features like menstrual abnormalities, obesity, and hyperandrogenism. LH level is raised, <strong>FSH</strong> level remains <strong>normal</strong>, but FSH/LH ratio falls. <strong>Estrogen</strong> levels <strong>increase</strong>.</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 29-year-old G2 P1 lady at her 20th week of gestation presents to the clinic. Her anomaly scan is suggestive of bilateral renal agenesis. On examination, her fundal height is 15 cm. Which among the following parameters is likely to be seen in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Amniotic fluid index =  32 cm"
      },
      {
        "id": 2,
        "text": "Single deepest vertical pocket = 10 cm"
      },
      {
        "id": 3,
        "text": "Amniotic fluid index = 10 cm"
      },
      {
        "id": 4,
        "text": "Single deepest vertical pocket = 1 cm"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Bilateral renal agenesis leads to decreased production of amniotic fluid or <strong>oligohydramnios</strong>, and the <strong>single deepest vertical pocket</strong> will be <strong>less than 2 cm</strong>. (option D).</p>\n<div class=\"page\" title=\"Page 246\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Oligohydramnios refers to an abnormally decreased amount of amnionic fluid. A diagnosis of oligohydramnios is made when<strong> amniotic fluid index</strong>&nbsp;(<strong>AFI) is less than 5 cm</strong> or a <strong>single deepest vertical pocket (DVP)</strong> of amniotic fluid is <strong>less than 2 cm</strong>.</p>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 247\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Causes of oligohydraminios:</p>\n<ul>\n<li>Placental abnormalities</li>\n<li>Maternal complications leading to uteroplacental insufficiency: Pre-eclampsia, vascular disease</li>\n<li>Renal anomalies:\n<ul>\n<li>Bilateral renal agenesis</li>\n<li>Bilateral multicystic dysplastic kidney</li>\n<li>Unilateral renal agenesis with contralateral multicystic dysplastic kidney</li>\n<li>Infantile form of autosomal recessive polycystic kidney dis&shy;ease</li>\n<li>Fetal bladder outlet obstruction - posterior urethral valves, urethral atresia, or stenosis</li>\n</ul>\n</li>\n<li>Complex fetal anomalies: persistent cloaca and sireno&shy;melia&nbsp;</li>\n<li>Drugs: ACE inhibitors, ARBs, NSAIDs when taken in the 2nd or 3rd trimester</li>\n</ul>\n</div>\n</div>\n</div>\n<p>Other options:</p>\n<p>Options A and B imply<strong>&nbsp;polyhydramnios </strong>since the <strong>AFI</strong>&nbsp;is&nbsp;<strong>greater than&nbsp;24 cm</strong>,<strong>&nbsp;</strong>and the single <strong>deepest vertical pocket (DVP)</strong> is <strong>greater than</strong>&nbsp;<strong>8 cm.</strong></p>\n<p>Option C: AFI = 10 cm indicates&nbsp;<strong>normal AFI (5&ndash;25 cm)</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A middle-aged lady was referred to a dermatology clinic for a lesion on her left cheek as shown in the image below. On diascopy, apple jelly nodules were seen. Skin biopsy showed tubercles with absent central caseation surrounded by epithelioid histiocytes in the superficial dermis.  What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Acne vulgaris"
      },
      {
        "id": 2,
        "text": "Lupus vulgaris"
      },
      {
        "id": 3,
        "text": "Tuberculoid leprosy"
      },
      {
        "id": 4,
        "text": "Discoid lupus erythematosus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows numerous <strong>reddish-brown papules</strong>&nbsp;with an elevated scaly surface and scarring. These lesions, together with the features of apple jelly nodules on diascopy and tubercles with absent central caseation, point towards a diagnosis of <strong>lupus vulgaris</strong>.</p>\n<p><strong>Lupus vulgaris</strong> is a chronic, progressive, <strong>paucibacillary form of cutaneous tuberculosis</strong> which occurs in previously sensitized individuals. The characteristic lesion is a<strong> plaque</strong>, consisting of <strong>soft, reddish-brown papules</strong>. It grows by slow peripheral extension, becoming discoid in shape with areas of atrophy. The lesions are acquired either by hematogenous spread or by direct inoculation.&nbsp;</p>\n<p>There are five clinical variants of lupus vulgaris:</p>\n<ul>\n<li>Plaque form</li>\n<li>Ulcerative and mutilating forms</li>\n<li>Vegetating form</li>\n<li>Tumor-like forms</li>\n<li>Papular and nodular form</li>\n</ul>\n<p>On diascopy, characteristic '<strong>apple jelly nodules'</strong>&nbsp;are seen. Histology shows <strong>tubercles with scanty or absent central caseation</strong>, surrounded by <strong>epithelioid histiocytes</strong> and multinucleated giant cells, present in the superficial dermis. Usually, tubercle bacilli are scanty or absent.&nbsp;Treatment is by standard multidrug <strong>antituberculosis therapy</strong>.</p>\n<p>Complications include scarring, contractures, and tissue destruction. Malignant changes (most commonly, squamous cell carcinomas) are known to arise in longstanding lupus vulgaris.</p>\n<p>Other options:</p>\n<p>Option A:<strong> Acne vulgaris-</strong> Lesions are due to inflammation of the pilosebaceous unit. It can present with open and closed comedones and/or papules, pustules, and nodules.</p>\n<p>Option C:<strong> Tuberculoid leprosy-</strong> Typical lesions are erythematous, copper-colored, or purple plaques, with raised edges sloping towards a hypopigmented center.</p>\n<p>Option D:<strong> Discoid lupus erythematosus:</strong>&nbsp;It is an inflammatory disorder of the skin. The lesions are characterized by well\u2010defined red, scaly patches of variable size.</p>\n<p>The image below shows how diascopy is done:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1a35da1c6dc541bbb8c2d8f51b980027.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/24c7a50b336347a79819a605fe70aaebx512x384.JPEG"
    ]
  },
  {
    "text": "Parents of a child with febrile seizures are concerned about its relapse, complications, and treatment. All of the following are true regarding the risks and management of this case, except:",
    "choices": [
      {
        "id": 1,
        "text": "Antipyretics do not reduce the risk of a recurrent febrile seizure"
      },
      {
        "id": 2,
        "text": "Nitrazepam, clobazam, and clonazepam, help to reduce the risks of recurrence of febrile seizures"
      },
      {
        "id": 3,
        "text": "Antiepileptic therapy can decrease the risk of future epilepsy"
      },
      {
        "id": 4,
        "text": "Iron deficiency is associated with an increased risk of febrile seizures"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>All of the above statements are true, except for <strong>option C</strong>. Future epilepsy does <strong>not</strong> change with or without <strong>antiepileptic therapy</strong>.</p>\n<p><strong>Febrile seizures</strong> are seizures that:</p>\n<ul>\n<li>Occur between the age of 6 months and 5 years</li>\n<li>Occur at a temperature of<strong> 38&deg;C (100.4&deg;F) </strong>or<strong> higher</strong></li>\n<li>Are not due to any CNS infection or any metabolic imbalance</li>\n<li>Occur without a history of prior afebrile seizures</li>\n<li>Occur with <strong>no post-ictal neurological deficit</strong>.</li>\n</ul>\n<p>Antipyretics do not reduce the risk of recurrent febrile seizures.</p>\n<p><strong>Types of febrile seizures:</strong></p>\n<table style=\"width: 446px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 220px; text-align: center;\"><strong>Simple febrile seizures</strong></td>\n<td style=\"width: 218px; text-align: center;\"><strong>Complex (atypical) febrile seizures</strong></td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Occurs within 24 hours of the onset of fever</td>\n<td style=\"width: 218px; text-align: center;\">Can occur at any time during a fever</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Generalized seizures</td>\n<td style=\"width: 218px; text-align: center;\">Focal seizures</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Duration is &lt;15 min</td>\n<td style=\"width: 218px; text-align: center;\">Prolonged</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">No recurrence within 24 hrs of seizures</td>\n<td style=\"width: 218px; text-align: center;\">Recurrent</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Chances of going into epilepsy 1%</td>\n<td style=\"width: 218px; text-align: center;\">Chances of going into epilepsy 6%</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Investigations:</strong></p>\n<ul>\n<li>Lumbar puncture should be performed in the <strong>first episode</strong> of seizures with fever, for all infants <strong>&lt;6 months</strong> age (to exclude meningitis).</li>\n<li>EEG and neuroimaging are advised for children with atypical febrile seizures.</li>\n</ul>\n<p><strong>Treatment:</strong></p>\n<p>Antipyretics and proper hydration. Midazolam or diazepam (rectal) can be used if seizures present.</p>\n<p><strong>Prophylaxis:</strong></p>\n<ul>\n<li><strong>Intermittent prophylaxis:</strong> If the febrile seizures are 3 or more in 6 months, or 4 or more seizures in 1 year, oral <strong>clobazam</strong> (1mg/kg/day) for 3 days during the fever episode.</li>\n<li><strong>Continuous prophylaxis: </strong>If intermittent prophylaxis fails and in recurrent atypical febrile seizures, sodium valproate and phenobarbitone can be used.</li>\n</ul>\n<p>Note:</p>\n<ul>\n<li><strong>Antipyretics</strong> can decrease the discomfort of the child but <strong>do not reduce</strong> the risk of having a recurrent febrile seizure.</li>\n<li>Intermittent oral nitrazepam, clobazam, and clonazepam have also been used. Such therapies <strong>help reduce</strong>, but do not eliminate, the risks of recurrence of febrile seizures.</li>\n<li><strong>Future epilepsy</strong> does not change with or without <strong>antiepileptic therapy. </strong></li>\n<li><strong>Iron deficiency</strong> is associated with an increased risk of febrile seizures, and thus screening and treating it would be appropriate.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old man, who was a welder for the past 10 years presents with a dry cough, easy fatiguability, weight loss, and dyspnea progressing over the past 1 year. On examination, fine end-inspiratory crackles were heard over the bilateral infra-axillary regions. His HRCT finding is shown below. What is the probable diagnosis in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Primary pulmonary hypertension"
      },
      {
        "id": 2,
        "text": "Pulmonary alveolar proteinosis"
      },
      {
        "id": 3,
        "text": "Asbestosis with metastatic malignant mesothelioma"
      },
      {
        "id": 4,
        "text": "Miliary tuberculosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The HRCT provided shows a characteristic <strong>crazy-paving</strong>&nbsp;pattern which is classical of <strong>pulmonary alveolar proteinosis</strong>.&nbsp;</p>\n<p>Pulmonary alveolar proteinosis is a lung disease involving the accumulation of surfactant within the alveoli as a result of decreased clearance. It may be congenital, secondary, or autoimmune.</p>\n<p>Etiology:</p>\n<ul>\n<li>Congenital</li>\n<li>Secondary: due to lung infections, hematologic malignancies, and inhalation of mineral dust such as silica, titanium oxide, aluminum, indium-tin-oxide, and insecticides.</li>\n<li>Autoimmune: autoantibodies against GM-CSF</li>\n</ul>\n<p>Patients may have features like a persistent dry cough (or with scant sputum production), progressive dyspnea, fatigue, weight loss, intermittent low-grade fever and/or night sweats, and pleuritic chest pain. Rarely, they may have cyanosis and hemoptysis. The physical examination will show fine <strong>end-inspiratory</strong> crackles. Clubbing&nbsp;and cyanosis may be present in a few cases.</p>\n<div class=\"page\" title=\"Page 261\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Diagnosis is with bronchoscopic lavage and/or biopsy, along with imaging findings. Chest X-ray shows nonspecific findings with bilateral lung opacification. A batwing appearance may be seen.</p>\n<p>The <strong>CT</strong> shows a characteristic &lsquo;<strong>crazy-paving&rsquo; pattern.</strong>&nbsp;It refers to geographical areas of ground-glass opacification with thickened inter-and intralobular septa.</p>\n<p>Treatment includes whole lung lavage and treatment of the underlying cause. GM-CSF replacement is considered if an underlying autoimmune etiology is suspected.</p>\n</div>\n</div>\n</div>\n</div>\n<p>Other causes causing similar crazy-paving appearance:</p>\n<ul>\n<li>Lipoid pneumonia</li>\n<li>Pneumocystis jirovecii pneumonia</li>\n<li>Sarcoidosis</li>\n<li>Nonspecific interstitial pneumonia</li>\n<li>Silicosis,</li>\n<li>Cryptogenic organizing pneumonia</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/909b9a00b6164f02888107d5dbcb3acd.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "You assist in performing a Whipple procedure in a patient with carcinoma of the pancreas. All of the following structures will be resected in this surgery, except:",
    "choices": [
      {
        "id": 1,
        "text": "1 and 3"
      },
      {
        "id": 2,
        "text": "2 and 4"
      },
      {
        "id": 3,
        "text": "3 and 5"
      },
      {
        "id": 4,
        "text": "4 and 5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Whipple procedure\u00a0does <strong>not</strong> involve the\u00a0removal of the spleen and tail of the pancreas.</p>\n<p>The <strong>Whipple procedure</strong> is a complex surgery done for carcinomas involving the <strong>head of the pancreas</strong>. It is done only in cases when:</p>\n<ul>\n<li>The entire duodenum has to be removed e.g. in familial adenomatous polyposis\u00a0(FAP)</li>\n<li>Tumor encroaches in the first part of the duodenum, or\u00a0stomach</li>\n<li>A clear resection margin is not achieved by pylorus preserving pancreatoduodectomy</li>\n</ul>\n<p>The following structures are removed during Whipple\u2019s procedure:</p>\n<ul>\n<li>Distal stomach</li>\n<li>Duodenum</li>\n<li>Proximal jejunum</li>\n<li>Head of the pancreas</li>\n<li>Gallbladder</li>\n<li>Common bile duct (CBD)</li>\n<li>Regional lymphatics</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/07f48a57633d4d77906091f13eac1771x1280x2559.JPEG"
    ]
  },
  {
    "text": "A patient comes with complaints of non-pulsatile headache of tightening quality on both sides of his forehead. He describes it as wearing a tight cap. He has no nausea, photophobia, or phonophobia.  All of the following drugs can be used in the treatment of this condition except",
    "choices": [
      {
        "id": 1,
        "text": "Aspirin"
      },
      {
        "id": 2,
        "text": "Sumatriptan"
      },
      {
        "id": 3,
        "text": "Acetaminophen"
      },
      {
        "id": 4,
        "text": "Naproxen"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A bilateral, non-pulsatile headache of tightening quality without any nausea or photophobia suggests a diagnosis of <strong>tension-type headache </strong>(TTH). Triptans are not&nbsp;useful in the treatment of this condition. They are useful when the patient has a migraine headache.</p>\n<table style=\"width: 573px; height: 380px;\">\n<tbody>\n<tr style=\"height: 36px;\">\n<td style=\"width: 96px; text-align: center; height: 36px;\">&nbsp;</td>\n<td style=\"width: 142px; text-align: center; height: 36px;\"><strong>Tension-type headache</strong></td>\n<td style=\"width: 194.812px; text-align: center; height: 36px;\"><strong>Migraine&nbsp;</strong></td>\n<td style=\"width: 105.188px; text-align: center; height: 36px;\"><strong>Cluster headache</strong></td>\n</tr>\n<tr style=\"height: 110px;\">\n<td style=\"width: 96px; height: 110px;\">\n<p>Treatment</p>\n</td>\n<td style=\"width: 142px; height: 110px;\">\n<p>Analgesics</p>\n<p>NSAIDs</p>\n<p>Acetaminophen</p>\n</td>\n<td style=\"width: 194.812px; height: 110px;\">\n<p>NSAIDs</p>\n<p>Triptans</p>\n<p>Dihydroergotamine</p>\n</td>\n<td style=\"width: 105.188px; height: 110px;\">\n<p>100% oxygen</p>\n<p>Sumatriptan</p>\n<p>&nbsp;</p>\n</td>\n</tr>\n<tr style=\"height: 189px;\">\n<td style=\"width: 96px; height: 189px;\">Prophylaxis</td>\n<td style=\"width: 142px; height: 189px;\">Amitriptyline</td>\n<td style=\"width: 194.812px; height: 189px;\">&nbsp;\n<ul>\n<li>Lifestyle changes(eg, sleep,exercise, diet)</li>\n<li>&beta;-blockers</li>\n<li>Calcium channel blockers</li>\n<li>Amitriptyline, topiramate, valproate</li>\n<li>CGRP antagonists - erenumab, fremanezumab, galcanezumab, eptinezumab</li>\n</ul>\n</td>\n<td style=\"width: 105.188px; height: 189px;\">Verapamil&nbsp;</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A gardener presents with multiple vesicles on the hands and multiple eruptions along the lymphatic distribution. The lesions are limited to cutaneous tissues. On microscopy of tissue biopsy, flower-like clusters of conidia are seen. Which of the following statements is false about this disease?",
    "choices": [
      {
        "id": 1,
        "text": "Medlar bodies are seen in this condition"
      },
      {
        "id": 2,
        "text": "It is caused by a dimorphic fungus"
      },
      {
        "id": 3,
        "text": "Itraconazole will be effective in this case"
      },
      {
        "id": 4,
        "text": "It is an example of subcutaneous mycoses"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<div class=\"page\" title=\"Page 684\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The presence of multiple vesicles on the hands and <strong>multiple eruptions along lymphatics</strong> in a <strong>gardener</strong>&nbsp;and the microscopic finding of flower-like clusters of conidia are suggestive of&nbsp;<strong>sporotrichosis</strong>&nbsp;caused by&nbsp;<strong><em>Sporothrix schenckii</em>.&nbsp;&nbsp;</strong>In&nbsp;<strong>sporotrichosis</strong>, medlar bodies will not be seen.&nbsp;<strong>Medlar bodies </strong>or<strong>&nbsp;sclerotic bodies </strong>are seen in<strong>&nbsp;chromoblastomycosis.</strong></p>\n<p><strong>Chromoblastomycosis&nbsp;</strong>is a subcutaneous fungal infection caused by many species. In tissue, the lesions appear as spherical brown cells termed muriform or<strong> sclerotic bodies</strong> that divide by <strong>transverse septation</strong>.</p>\n<p><em><strong>S. schenckii</strong></em>&nbsp;is a <strong>dimorphic</strong> fungus that lives on vegetation such as grasses, trees, rose bushes, etc. It&nbsp;occurs in the yeast phase in tissues and in cultures at 3<span class=\"s1\">7&deg;C, </span>and in the m<span class=\"s2\">y</span>celia phase in nature and cultures at 25<span class=\"s1\">&deg;</span>C. The septate hyphae appear very thin and carry <strong>flower-like clusters of small conidia</strong> b<span class=\"s1\">orn</span>e on delicat<span class=\"s1\">e </span>sterigmata.&nbsp;<strong>Asteroid bodies</strong>&nbsp;seen in sporotrichosis consist of a central basophilic yeast cell surrounded by radiating extensions of eosinophilic material.</p>\n<p>Following traumatic inoculation into the skin as in thorn prick, <em>S. schenckii</em> causes sporotrichosis, a chronic granulomatous infection. The initial lesion appears following a trauma or thorn prick.&nbsp;The infection then spreads via the lymphatic channels to the lymph nodes. This results in secondary ulcers on the lymph nodes.</p>\n<p><strong>Treatment:&nbsp;</strong></p>\n<ul>\n<li data-leveltext=\"\uf0b7\" data-font=\"Symbol\" data-listid=\"4\" aria-setsize=\"-1\" data-aria-posinset=\"3\" data-aria-level=\"1\">Cutaneous form can be treated with oral or topical&nbsp;potassium iodide</li>\n<li data-leveltext=\"\uf0b7\" data-font=\"Symbol\" data-listid=\"4\" aria-setsize=\"-1\" data-aria-posinset=\"4\" data-aria-level=\"1\">Lymphocutaneous form &ndash;&nbsp;<strong>Itraconazole</strong> is <strong>effective</strong> in over 90% of patients with lymphocutaneous infection</li>\n<li data-leveltext=\"\uf0b7\" data-font=\"Symbol\" data-listid=\"4\" aria-setsize=\"-1\" data-aria-posinset=\"4\" data-aria-level=\"1\">For <strong>disseminated</strong> infection, <strong>amphotericin B</strong> is the drug of choice.</li>\n</ul>\n<p>The image below shows the<strong> asteroid body</strong>&nbsp;seen in sporotrichosis:</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5f833446913a452b88d79c2c1243bbe3x283x360.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b37ebd1d4adb466093c0226db92553f7x1200x1923.JPEG"
    ]
  },
  {
    "text": "A 34-year-old male patient was suspected to have a seminoma of the testis. The mass was surgically removed and the specimen was sent for histopathological analysis. Which among the following findings is most likely to be seen microscopically?",
    "choices": [
      {
        "id": 1,
        "text": "Fried egg appearance of cells"
      },
      {
        "id": 2,
        "text": "Schiller Duval bodies"
      },
      {
        "id": 3,
        "text": "Crystalloids of Reinke"
      },
      {
        "id": 4,
        "text": "Derivatives of all three germ layers"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Microscopically, seminomas show a <strong>fried egg appearance of cells.\u00a0</strong>This refers to\u00a0cells with clear cytoplasm and a nucleus with a prominent nucleolus.</p>\n<p><strong>Seminoma\u00a0</strong>is the\u00a0<strong>most common </strong>type of germ cell tumor<strong> (around 50% of GCTs).</strong><strong>\u00a0</strong>It is the\u00a0testicular\u00a0equivalent<strong>\u00a0</strong>of an<strong>\u00a0ovarian dysgerminoma</strong><strong>.\u00a0</strong>Immunohistochemistry is positive for<strong><strong>\u00a0KIT, OCT3/4, </strong></strong>and\u00a0<strong>placental alkaline phosphatase (PLAP)</strong><strong>.</strong></p>\n<p>Patients usually present with painless testicular enlargement. Heaviness may be felt if the size is 2-3 times normal. Rarely, it may present with symptoms of metastatic disease.</p>\n<p><strong>The gross specimen\u00a0</strong>shows\u00a0a homogeneous, grey-white, lobulated cut surface, devoid of hemorrhage or necrosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c53c7fb0e97e439690b7774de66a1be2x800x531.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/76b4e33f9e6e42edaad2c96c2199a2e3x800x533.JPEG"
    ]
  },
  {
    "text": "Which of the following is not associated with kleptomania?",
    "choices": [
      {
        "id": 1,
        "text": "Stealing  for monetary value"
      },
      {
        "id": 2,
        "text": "Stealing is not planned"
      },
      {
        "id": 3,
        "text": "Gratification after stealing"
      },
      {
        "id": 4,
        "text": "More common in females"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Kleptomania is characterized by recurrent impulses to steal objects <strong>not needed for personal use</strong> or<strong> for monetary value.\u00a0</strong>Here, the goal is not the object stolen but just the<strong>\u00a0</strong>act of stealing.\u00a0</p>\n<p>Kleptomania is characterized by the following:</p>\n<ul>\n<li>Mounting tension before the act, followed by gratification and lessening of tension after the act.</li>\n<li>The stealing is not planned and does not involve others.\u00a0</li>\n<li>The stealing is not committed to express anger or vengeance and is not in response to a delusion or a hallucination.</li>\n</ul>\n<p>It is more common in females.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Mini Test 25';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2021-22"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>