<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Psychiatry St 1 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "All the following are the features of delirium except:",
    "choices": [
      {
        "id": 1,
        "text": "Altered sensorium"
      },
      {
        "id": 2,
        "text": "Autonomic dysfunction"
      },
      {
        "id": 3,
        "text": "Sleep reversal"
      },
      {
        "id": 4,
        "text": "Rapid spikes on EEG"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>There is slowing of EEG waves in delirium.</p>\n<div class=\"page\" title=\"Page 717\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The EEG usually shows diffuse slowing of background activity, although patients with delirium caused by alcohol or sedative-hypnotic withdrawal have low-voltage fast activity.</p>\n</div>\n</div>\n</div>\n<p>Delirium:</p>\n<ul>\n<li>Is characterized by <strong>acute onset of altered sensorium</strong></li>\n<li><strong>Clouding of consciousness- </strong>is the earliest stage of impaired consciousness. This is followed by drowsiness.</li>\n<li>Associated with <strong>autonomic dysfunction</strong>.</li>\n<li><strong>Sleep reversa</strong>l</li>\n<li><strong>Sun downing&nbsp;</strong>- increase in the symptoms with sunset.</li>\n<li>Slowing of EEG waves &ndash; generalized slowing of waves.</li>\n<li><strong>Confusion</strong> &ndash; inability to think clearly.</li>\n</ul>\n<p>Causes of delirium:</p>\n<ul>\n<li>Dementia</li>\n<li>Parkinson&rsquo;s disease</li>\n<li>Prior stroke</li>\n<li>Advanced age</li>\n<li>Sensory impairment</li>\n</ul>\n<p>Precipitation factors:</p>\n<ul>\n<li>Drugs: narcotics, sedatives, antihistamines, muscle relaxants.</li>\n<li>Infections: Pneumonia, UTI, Meningitis etc.</li>\n<li>Electrolyte disturbances: Hyponatremia, hypercalcemia.</li>\n<li>Metabolic derangements: Volume depletion, Vitamin B12 Deficiency, Hyperglycaemia.</li>\n<li>Systemic illness: Congestive heart failure, hepatic failure, malignancy.</li>\n<li>Central nervous system: Stroke, seizure, head injury.</li>\n</ul>\n<p>Difference between Delirium, Neurocognitive disorder (dementia):</p>\n<table style=\"width: 257px;\">\n<tbody>\n<tr style=\"height: 26px;\">\n<td style=\"width: 128px; height: 26px;\">Delirium&nbsp;</td>\n<td style=\"width: 137px; height: 26px;\">Neurocognitive disorder (dementia)</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 128px; height: 13px;\">Acute onset</td>\n<td style=\"width: 137px; height: 13px;\">Insidious onset</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 128px; height: 13px;\">Fluctuating course</td>\n<td style=\"width: 137px; height: 13px;\">Chronic course</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 128px; height: 13px;\">Lasts days to weeks</td>\n<td style=\"width: 137px; height: 13px;\">Lasts months to years</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 128px; height: 13px;\">Disrupted sleep-wake cycle</td>\n<td style=\"width: 137px; height: 13px;\">Normal sleep-wake cycle</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 128px; height: 13px;\">Disorientation</td>\n<td style=\"width: 137px; height: 13px;\">Minimal issues with orientation at first</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Emotion is regulated by:",
    "choices": [
      {
        "id": 1,
        "text": "Temporal lobe"
      },
      {
        "id": 2,
        "text": "Frontal lobe"
      },
      {
        "id": 3,
        "text": "Limbic system"
      },
      {
        "id": 4,
        "text": "Parietal lobe"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Emotion is regulated by the frontal lobe.</p>\n<p>There are two aspects of emotion:</p>\n<ul>\n<li><strong>Genesis of emotion </strong>and rating of emotional importance&nbsp;&ndash;from the limbic system &ndash; <strong>amygdala.</strong>&nbsp;\n<ul>\n<li>The limbic system houses the emotional association areas, which direct the hypothalamus to express the motor and endocrine components of the emotional state.</li>\n<li>The amygdala rates the emotional importance of an experience and activates the hippocampus (memory) accordingly. Thus an emotionally intense experience is etched in memory, which is the basis for learned fear responses.</li>\n<li>Damage to the amygdala ablates the ability to distinguish fear and anger in other persons' voices and facial expressions.</li>\n</ul>\n</li>\n<li><strong>Regulation of emotion&nbsp;</strong>-&nbsp;<strong>frontal lobe.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d8ef5a926c6d468ba9063acd5f2105afx800x533.PNG"
    ]
  },
  {
    "text": "Hallucinations can be seen in all except",
    "choices": [
      {
        "id": 1,
        "text": "Schizophrenia"
      },
      {
        "id": 2,
        "text": "Mania"
      },
      {
        "id": 3,
        "text": "Acute organic state"
      },
      {
        "id": 4,
        "text": "Obsessive Compulsive Disorders"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Obsessive Compulsive Disorder is a neurotic illness. Hallucinations are seen in <strong>psychotic illness.</strong> <br />Most common hallucination seen in <strong>non-organic psychiatric illness</strong> in the <strong>auditory hallucination.</strong><br />Most common hallucination seen with <strong>organic disease states &ndash; visual hallucination.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most common type of delusion?",
    "choices": [
      {
        "id": 1,
        "text": "Delusion of persecution"
      },
      {
        "id": 2,
        "text": "Delusion of love"
      },
      {
        "id": 3,
        "text": "Delusion of reference"
      },
      {
        "id": 4,
        "text": "Delusion of infidelity"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Delusion of persecution is the most common type of delusion.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old woman comes to the psychiatry OPD with complaints of low mood for the past 2 weeks, reduced socialization, decreased appetite, and inability to sleep for the past 3 months. She also complains of frequent backache and headache, with early morning awakening. What is your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Conversion disorder"
      },
      {
        "id": 2,
        "text": "Somatic symptom disorder"
      },
      {
        "id": 3,
        "text": "Dysthymic\u00a0disorder"
      },
      {
        "id": 4,
        "text": "Major depressive disorder"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p class=\"p1\">The given clinical scenario of low mood for the past<strong>&nbsp;2 weeks</strong>&nbsp;along with reduced appetite, reduced interest in socialization, somatic symptoms, and disturbed sleep<strong>, </strong>points towards a diagnosis of <strong>depression (major depressive disorder).</strong>&nbsp;</p>\n<p>The diagnostic criteria for major depressive disorder are:</p>\n<p>A. Five or more of the following symptoms have been present during the <strong>same 2-week period.&nbsp;</strong>Atleast<strong> one of the symptoms</strong> is either <strong>depressed mood</strong> or <strong>loss of interest</strong> or pleasure.</p>\n<ol>\n<li>Depressed mood most of the day</li>\n<li>Markedly diminished interest or pleasure in activities (anhedonia)</li>\n<li>Significant weight loss when not dieting or weight gain, decrease or increase in appetite</li>\n<li>Insomnia or hypersomnia</li>\n<li>Psychomotor agitation or retardation</li>\n<li>Fatigue or loss of energy</li>\n<li>Feelings of worthlessness or excessive or inappropriate guilt</li>\n<li>Diminished ability to think or concentrate, or indecisiveness</li>\n<li>Recurrent thoughts of death, recurrent suicidal ideation</li>\n</ol>\n<p>B. The symptoms cause <strong>clinically significant distress</strong> or<strong> impairment</strong> in social, occupa&shy;tional, or other important areas <strong>of functioning.</strong></p>\n<p>C. The episode is <strong>not attributable to</strong> the physiological effects of<strong> a substance</strong> or to another medical condition.</p>\n<p>D. The occurrence of the major depressive episode <strong>is not better explained by</strong> schizoaf&shy;fective disorder, schizophrenia, schizophreniform disorder, delusional disorder, or other specified and unspecified <strong>schizophrenia spectrum and other psychotic disorders.</strong></p>\n<p>E. There has <strong>never been</strong> a <strong>manic</strong> episode or a <strong>hypomanic episode</strong>.</p>\n<p>Other Options:<br /><br />Option A: <strong>Conversion disorder</strong> is a condition with symptoms or deficits that involve&nbsp;<strong>voluntary motor</strong>&nbsp;or&nbsp;<strong>sensory functions</strong>. Though it points to an underlying medical condition, in reality, it arises due to&nbsp;<strong>psychological factors</strong>. The symptoms are&nbsp;<strong>not intentionally produced</strong>&nbsp;and the gain obtained is primarily psychological.&nbsp;</p>\n<p>It can be associated with depressive disorders, anxiety disorders, personality disorders, and somatization disorders. Paralysis,&nbsp;<strong>blindness</strong>, and mutism are the most frequently seen conversion disorder symptoms. Anesthesia and paresthesia of the extremities, abnormal movements, and gait disturbance are the other features commonly seen.&nbsp;</p>\n<p>Option B:&nbsp;<strong>Somatic symptom disorder</strong>&nbsp;is characterized by the fear of having a serious illness based on the person's misinterpretation of bodily symptoms. The symptoms are persistent for&nbsp;<strong>over 6 months.&nbsp;</strong>It equally affects men and women and is commonly seen in the&nbsp;<strong>third decade</strong>&nbsp;of life. It is associated with&nbsp;<strong>poor insight.</strong>&nbsp;Patients believe that they have a serious disease that has not yet been detected and they can&shy;not be persuaded otherwise. Their convictions persist despite negative laboratory results, the benign course of the alleged disease over time, and reassurances from doctors.</p>\n<p>Option C:&nbsp;&nbsp;<strong>Dysthymic&nbsp;disorder&nbsp;</strong>is the presence of a <strong>persistently depressed mood</strong> that lasts most of the day and is continuous. There are also feelings of guilt, irritability, and anger associated with it. These symptoms are present for <strong>at least 2 years</strong>.&nbsp;It is distinguished from major depressive disorder by the fact that patients mention that they have always been depressed. There will never be an episode of mania/hypomania in this condition.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "According to the latest  WHO statistics, what is the most common psychiatric disorder in the world?",
    "choices": [
      {
        "id": 1,
        "text": "Eating disorder"
      },
      {
        "id": 2,
        "text": "Depression"
      },
      {
        "id": 3,
        "text": "Bipolar disorder"
      },
      {
        "id": 4,
        "text": "Anxiety disorder"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>According to the WHO global health statistics 2020, <strong>anxiety disorder</strong> is the <strong>most common</strong>&nbsp;psychiatric illness in the world.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As an intern posted in psychiatry, you observe a patient with mania. Which of the following is true about neurotransmitters in this disorder?",
    "choices": [
      {
        "id": 1,
        "text": "Decrease in serotonin"
      },
      {
        "id": 2,
        "text": "Decrease in norepinephrine"
      },
      {
        "id": 3,
        "text": "Increase in neuropeptide Y"
      },
      {
        "id": 4,
        "text": "Increase in norepinephrine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In mania, there is an <strong>increase in norepinephrine and dopamine</strong> levels.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 21-year-old was brought to your OPD by his worried parents. He frequently states that he is more learned than all his professors and is on the verge of a breakthrough. He barely slept and spent long hours talking to his friends about the importance of his ideas. His parents confirmed that he had some periods of withdrawal and depression during his adolescence. What is the drug of choice for the maintenance therapy of this disorder?",
    "choices": [
      {
        "id": 1,
        "text": "Lithium"
      },
      {
        "id": 2,
        "text": "Valproic acid"
      },
      {
        "id": 3,
        "text": "Carbamazepine"
      },
      {
        "id": 4,
        "text": "Anti-psychotics"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is suggestive of <strong>bipolar disorder. Lithium</strong> is the <strong>drug of choice</strong> for <strong>maintenance</strong> therapy&nbsp;of bipolar disorder.</p>\n<p>It is also the most effective long-term treatment choice for bipolar disorder.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common Dissociative Disorder is_____",
    "choices": [
      {
        "id": 1,
        "text": "Dissociative Amnesia"
      },
      {
        "id": 2,
        "text": "Dissociative Fugue"
      },
      {
        "id": 3,
        "text": "Depersonalization Disorder"
      },
      {
        "id": 4,
        "text": "Multiple Personality Disorder"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>Commonest dissociative disorder- dissociative amnesia</li>\n<li>Commonest symptom of hysterical state- motor/ sensory</li>\n<li>Other Causes of fugue (besides dissociative disorder) - Alzheimer&rsquo;s disease, temporal lobe epilepsy, schizophrenia</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a cluster A personality disorder?",
    "choices": [
      {
        "id": 1,
        "text": "Schizoid"
      },
      {
        "id": 2,
        "text": "Narcissistic"
      },
      {
        "id": 3,
        "text": "Paranoid"
      },
      {
        "id": 4,
        "text": "Schizotypal"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Narcissistic</strong> personality disorder is not a cluster A personality disorder. It belongs to <strong>cluster B</strong> personality disorders.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Pyromania is ______",
    "choices": [
      {
        "id": 1,
        "text": "Pathological stealing"
      },
      {
        "id": 2,
        "text": "Pathological Gambling"
      },
      {
        "id": 3,
        "text": "Pathological setting things fire"
      },
      {
        "id": 4,
        "text": "Compuslive pulling of hair"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Pyromania is an impulse control disorder characterized by <strong>deliberate fire-setting</strong> on <strong>more than one occasion</strong>.</p>\n<p>There is anxiety before the act and a release of anxiety after the act, sometimes followed by fascination and gratification.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 18-year-old boy is brought to you by his concerned grandmother with a history of having experienced several episodes of jerking of the body the day before his final exam. There was no history post-ictal confusion or tongue bite and his investigations were normal. Which of the following conditions should be considered?",
    "choices": [
      {
        "id": 1,
        "text": "Malingering"
      },
      {
        "id": 2,
        "text": "Factitious disorder"
      },
      {
        "id": 3,
        "text": "Somatisation syndrome"
      },
      {
        "id": 4,
        "text": "Hypochondriasis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given scenario, absence of muscle spasm, tongue thrusting, or post-ictal confusion, and normal investigations just before the final exam (personal gain), points towards <strong>malingering</strong>.</p>\n<p><strong>Intentional </strong>production of symptoms to achieve some<strong> practical gain</strong> (e.g. avoidance of work, financial compensation, avoidance of criminal responsibility, or military service) is suggestive of malingering.</p>\n<p><strong>Factitious disorder </strong>(Munchausen syndrome)&nbsp;is the <strong>intentional</strong> production of physical symptoms to <strong>obtain medical attention, not a practical gain.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient was brought to the emergency room with complaints of inability to walk or lift his left leg for the past 2 days. History and physical examination were unremarkable. However, he did not seem concerned about his condition.  What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Illness anxiety disorder"
      },
      {
        "id": 2,
        "text": "Factitious disorder"
      },
      {
        "id": 3,
        "text": "Malingering"
      },
      {
        "id": 4,
        "text": "Conversion disorder"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The absence of concern towards one&rsquo;s problem despite an apparent&nbsp;severe disability is known as&nbsp;<strong>La-belle indifference</strong>. It is seen in <strong>conversion disorder.&nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The term dementia praecox is termed by",
    "choices": [
      {
        "id": 1,
        "text": "Eugen Bleuler"
      },
      {
        "id": 2,
        "text": "Sigmund Frued"
      },
      {
        "id": 3,
        "text": "Kraeplin"
      },
      {
        "id": 4,
        "text": "Erich Muir"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>Emil kraeplin </strong>was the first person who coined the term <strong>dementia praecox</strong>. He classified psychiatric illness into 2 categories &ndash; dementia praecox and manic depressive disorder.</li>\n</ul>\n<p>Other terms related to schizophrenia are:</p>\n<ul>\n<li><strong>Demence </strong>precoce - Morel</li>\n<li><strong>Hebephrenia</strong> -&nbsp;Hecker</li>\n<li><strong>Catatonia</strong> -&nbsp;Kahlbaum</li>\n<li><strong>Schizophrenia</strong> -&nbsp;Eugen bleuler</li>\n</ul>\n<p><strong>Eugen Bleuler</strong> coined the term schizophrenia. He also outlined the characteristic symptoms of schizophrenia which are referred to as Eugen Bleuler&rsquo;s Fundamental Symptoms of Schizophrenia (Also called as <strong>4 A&rsquo;s of Bleuler</strong>).</p>\n<ul>\n<li><strong>Ambivalence</strong>: Marked inability to decide for or against</li>\n<li><strong>Autism</strong>: Withdrawal into self</li>\n<li><strong>Affect disturbances</strong>: Disturbances of affect such as inappropriate affect</li>\n<li><strong>Association disturbances</strong>: Loosening of associations; thought disorder</li>\n</ul>\n<p><strong>Sigmund Freud</strong> proposed the <strong>structural theory of mind</strong> which divides mental apparatus into id, ego and super ego.</p>\n<ul>\n<li><strong>Id (new-born)</strong> includes basic survival instincts, aggression, survival drives. It is based on pleasure principle (immediate gratification).</li>\n<li><strong>Ego (reality principle; children)</strong> is based on exposure to reality. It is conscious, except for unconscious defence mechanisms. Ego maintains a balance between id and super-ego on one hand and reality on the other side. It channelizes the drives through the moral boundaries.</li>\n<li><strong>Super ego</strong>: It is concerned with <strong>moral standards</strong> and has two parts: a punitive conscience and a non-punitive ego ideal.</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which neurotransmitter is involved in the pathogenesis of schizophrenia?",
    "choices": [
      {
        "id": 1,
        "text": "Acetyl choline"
      },
      {
        "id": 2,
        "text": "Dopamine"
      },
      {
        "id": 3,
        "text": "Serotonin"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The following neurotransmitters have been implicated in the pathogenesis of schizophrenia:</p>\n<ul>\n<li><strong>Dopamine</strong> &ndash; is<strong> increased</strong> and has been linked to severity of <strong>positive symptoms</strong>. Also plasma homovanillic acid (HVA) a metabolite of dopamine is increased in schizophrenics.</li>\n<li><strong>Serotonin</strong> &ndash; linked to both positive &amp; negative symptoms.</li>\n<li><strong>Norepinephrine</strong> &ndash; selective degeneration of norepinephrine receptors is thought to cause anhedonia.</li>\n<li>Acetylcholine and Nicotine</li>\n<li>Neuropeptides</li>\n<li>Glutamate</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Schneider\u2019s first rank symptoms of schizophrenia include all of the following except:",
    "choices": [
      {
        "id": 1,
        "text": "Ambivalence"
      },
      {
        "id": 2,
        "text": "Somatic passivity"
      },
      {
        "id": 3,
        "text": "Hallucination"
      },
      {
        "id": 4,
        "text": "Thought insertion"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Ambivalence</strong> is one of the fundamental features of schizophrenia (4A&rsquo;s) described by Bleuler.</p>\n<p>Kurl Schneider described the first rank symptoms of schizophrenia. (These symptoms can be present in other illnesses)</p>\n<p>They are:</p>\n<ul>\n<li><strong>3 thought phenomenon</strong> -&nbsp;Insertion, withdrawal and broadcasting (patient complains that his thoughts are leaving his mind and others are able to access his thoughts)</li>\n<li><strong>3 made phenomenon</strong>&nbsp;-\n<ul>\n<li>impulse (someone is putting impulses in the patients mind)</li>\n<li>made affect (someone is changing his moods)</li>\n<li>made volition (actions are being controlled by others)</li>\n</ul>\n</li>\n<li><strong>3 auditory hallucination</strong> -&nbsp;first, second , third person auditory hallucination</li>\n<li><strong>Somatic passivity</strong> - body movement and body sensation is attributed to some external agency.</li>\n<li><strong>Delusional perception</strong> -&nbsp;delusion is attached to a normal perception eg: Patient looks at the sky and understands that his wife wants to kill him.\n<ul>\n<li>Primary delusions - without any previous history of psychiatric disease.</li>\n<li>Secondary delusion -&nbsp;develops secondary to psychiatric phenomenon.</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following about catatonia is false",
    "choices": [
      {
        "id": 1,
        "text": "Catatonia is seen exclusively with schizophrenia"
      },
      {
        "id": 2,
        "text": "Muteness is a feature"
      },
      {
        "id": 3,
        "text": "Waxy Flexibility is a feature"
      },
      {
        "id": 4,
        "text": "Echopraxia is a feature"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Catatonia </strong>is mostly seen in advanced primary mood or psychotic illnesses, including schizophrenia</p>\n<p>The features of catatonia are:</p>\n<ol>\n<li>Mutism: Complete absence of speech</li>\n<li>Rigidity: Maintenance of a rigid posture against efforts to be moved</li>\n<li>Negativism: An apparently motiveless resistance to all commands and attempts to be moved, or doing just the opposite.</li>\n<li>Posturing: Voluntary assumption of an inappropriate and often bizarre posture for long periods of time</li>\n<li>Stupor: Akinesis (no movement) with mutism but with evidence of relative preservation of conscious awareness</li>\n<li>Echolalia: Repetition, echo or mimicking of phrases or words heard</li>\n<li>Echopraxia: Repetition, echo or mimicking of actions observe</li>\n<li>Waxy flexibility: Parts of the body can be placed in positions that will be maintained for long periods of time, even if very uncomfortable; flexible like wax.</li>\n<li>Ambitendency: Due to ambivalence, conflicting impulses and tentative actions are made, but no goal directed action occurs, e.g. on asking to take out tongue, the tongue is slightly protruded but taken back again.</li>\n<li>Other signs such as mannerisms, stereotypes (verbal and behavioural), automatic obedience (commands are followed automatically, irrespective of their nature) and verbigeration (incomprehensible speech).</li>\n</ol>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Folie a duex is a type pf",
    "choices": [
      {
        "id": 1,
        "text": "Delusion"
      },
      {
        "id": 2,
        "text": "Hallucination"
      },
      {
        "id": 3,
        "text": "Illusion"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>Folie a deux is an induced delusional disorder, is also known as <strong>shared psychotic disorder / symbiotic psychosis.</strong></li>\n<li> Here there is sharing of delusions between 2 persons.</li>\n<li>There is a <strong>dominant person</strong> who <strong>induces the delusion</strong> in another dependant person. This dependant person accepts the delusion from the dominant person. If the dominant is removed then the delusion in the non-dominant disappear.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 64-year-old man was brought to the casualty with confusion and gait instability. Medical history is significant for alcohol use disorder, requiring multiple hospitalizations in the past. On examination, he appears inattentive, has bilateral horizontal nystagmus, and his gait is slow and wide-based. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Administer IV dextrose"
      },
      {
        "id": 2,
        "text": "Give haloperidol injection"
      },
      {
        "id": 3,
        "text": "Give thiamine injection"
      },
      {
        "id": 4,
        "text": "Correct electrolytes"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p class=\"p1\">The given clinical scenario is suggestive of <strong>Wernicke's encephalopathy,</strong> which is a medical emergency. <strong>Thiamine administration</strong>&nbsp;(<strong>100 mg IV or IM</strong> for 3 days followed by two to three times a day orally for 1 to 2 weeks) may reduce the risk of it progressing to chronic Korsakoff psychosis which is irreversible.&nbsp;</p>\n<p class=\"p1\"><strong>Wernicke-Korsakoff syndrome</strong> is seen due to the deficiency of thiamine (vitamin B1). Thiamine is a cofactor (TPP) in glucose metabolism. Thus, starting dextrose infusions before thiamine administration will exacerbate the existing thiamine deficiency,&nbsp;precipitating Wernicke&rsquo;s disease. Thiamine is also involved in the conduction of the axon potential and synaptic transmission.&nbsp;</p>\n<p class=\"p1\">Alcohol abuse leads to thiamine deficiency by the following mechanisms:</p>\n<ul>\n<li class=\"p1\">Poor nutritional habits</li>\n<li class=\"p1\">Folate deficiency - reduces thiamine absorption from the gastrointestinal tract</li>\n<li class=\"p1\">Direct damage of the intestinal mucosa</li>\n</ul>\n<p class=\"p1\"><strong>Wernicke's encephalopathy/</strong><span class=\"s1\"><strong>alcoholic encephalopathy</strong> </span>is an <strong>acute</strong> neurological disorder characterized by the clinical triad (GOA):</p>\n<ol>\n<li><strong>G</strong>lobal Confusion</li>\n<li><strong>O</strong>phthalmoplegia ( first symptom to improve with thiamine +dextrose infusion)</li>\n<li><strong>A</strong>taxia</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient undergoing withdrawal from which of the following drugs is least likely to experience suicidal thoughts?",
    "choices": [
      {
        "id": 1,
        "text": "Barbiturates"
      },
      {
        "id": 2,
        "text": "Alcohol"
      },
      {
        "id": 3,
        "text": "Opioids"
      },
      {
        "id": 4,
        "text": "LSD"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Withdrawal symptoms </strong>do\u00a0not occur with hallucinogens such as LSD. Withdrawal symptoms appear when the drug abuse leads to physical dependence.</p>\n<p>Drugs that\u00a0cause significant withdrawal symptoms:</p>\n<ul>\n<li>Alcohol</li>\n<li>Opioids</li>\n<li>Cocaine</li>\n<li>Nicotine</li>\n<li>Barbiturates</li>\n<li>BZD</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Diagnosis of alcohol dependence includes all of the following except _____",
    "choices": [
      {
        "id": 1,
        "text": "Impaired occupational and social functioning"
      },
      {
        "id": 2,
        "text": "Need for daily drinking to function adequately"
      },
      {
        "id": 3,
        "text": "Lack of tolerance for alcohol"
      },
      {
        "id": 4,
        "text": "Inability to cut down alcohol intake"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Tolerance</strong> is one of the important features required to diagnose a patient with alcohol dependence.</p>\n<p class=\"p1\">Tolerance is defined by either of the following:</p>\n<ul>\n<li class=\"p1\">a need for markedly increased amounts of the substance to achieve intoxication or desired effect</li>\n<li class=\"p1\">markedly diminished effect with continued use of the same amount of the substance</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A psychiatry resident is evaluating a chronic alcoholic patient admitted to the ward. When asked about his day, he correctly remembered that he was wheeled out of the ward, but then went on to tell a story of a trip he made to the nearby park, which did not occur. He also made up random names as he went on talking about his children. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Alcohol withdrawal"
      },
      {
        "id": 2,
        "text": "Acute alcohol intoxication"
      },
      {
        "id": 3,
        "text": "Wernicke\u2019s encephalopathy"
      },
      {
        "id": 4,
        "text": "Korsakoff's psychosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario is suggestive of <strong>confabulation. </strong>It&nbsp;is one of the features of Korsafkoff&rsquo;s psychosis. Confabulation is filling up gaps in memory with false stories.</p>\n<p><strong>Korsakoff&rsquo;s psychosis</strong> is a <strong>chronic&nbsp;amnestic syndrome </strong>that can follow Wernicke's encephalopathy due to <strong>thiamine</strong> <strong>deficiency </strong>(secondary to alcoholism).&nbsp;The cardinal features are impaired mental syndrome and anterograde amnesia. Only 20% of patients recover with treatment (whereas in Wernicke's encephalopathy there is complete reversal with treatment).</p>\n<p>Clinical features:</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<ul>\n<li>Impaired mental syndrome - especially recent memory</li>\n<li>Striking inability to form new memories -&nbsp;<strong>severe</strong>&nbsp;<strong>anterograde amnesia</strong></li>\n<li><strong>Retrograde amnesia</strong> is less severe.</li>\n<li>Present with <strong>confabulation</strong>&nbsp;as an attempt to cover the memory deficit</li>\n<li>There is a lack of insight and no intellectual functional loss.</li>\n<li>Overall intact intelligence</li>\n<li>Implicit learning (e.g., learning procedures) is <strong>preserved.</strong></li>\n<li>Long-term and immediate memory is&nbsp;<strong>normal.</strong></li>\n</ul>\n<p>Treatment:&nbsp;<strong>Thiamine</strong> is given <strong>100mg orally</strong> two to three times daily for 3 to 12 months.</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the drug used to manage delirium tremens secondary to alcohol?",
    "choices": [
      {
        "id": 1,
        "text": "Flunazepam"
      },
      {
        "id": 2,
        "text": "Lorazepam"
      },
      {
        "id": 3,
        "text": "Chlordiazepoxide"
      },
      {
        "id": 4,
        "text": "Nitrezepam"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Intravenous Lorazepam</strong> is used to manage delirium tremens.</p>\n<p><strong>Drug therapy for alcohol intoxication and withdrawal:</strong></p>\n<ul>\n<li>Tremulousness, mild to moderate agitation-&nbsp;Chlordiazepoxide/Diazepam (Oral)</li>\n<li>Hallucinosis- Lorazepam (Oral)</li>\n<li>Extreme agitation/delirium-&nbsp;Chlordiazepoxide (Intravenous)</li>\n<li>Withdrawal seizures- Diazepam (Intravenous)</li>\n<li>Delirium tremens- Lorazepam (Intravenous)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "When a patient reveals his feelings unconsciously is known as?",
    "choices": [
      {
        "id": 1,
        "text": "Parapraxis"
      },
      {
        "id": 2,
        "text": "Transference"
      },
      {
        "id": 3,
        "text": "Counter-transference"
      },
      {
        "id": 4,
        "text": "Cathersis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Parapraxis- </strong>It&nbsp;is when the patent reveals some of the details unconsciously by the slip of tongue is known as parapraxis. Freud ascribed parapraxis to unconscious motives.</p>\n<p><strong>Transference</strong>- When the patient transfers his feelings unconsciously to the therapist. <strong>Transference</strong>&nbsp;describes a situation where&nbsp;the feelings, desires, and expectations of one person are redirected and applied to another person. Most commonly, transference refers to a therapeutic setting, where a person in&nbsp;therapy may apply certain feelings or emotions toward the therapist.</p>\n<p><strong>Counter-transference</strong>- Is the therapist&rsquo;s feelings toward the patient.</p>\n<p><strong>Cathersis</strong> &ndash; It is when the person reveals all his emotions and pent up emotions making him to feel light and better. Is also known as ventilation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All the following are the changes in the motivational enhancement therapy except?",
    "choices": [
      {
        "id": 1,
        "text": "Preparation"
      },
      {
        "id": 2,
        "text": "Contemplation"
      },
      {
        "id": 3,
        "text": "Procedure"
      },
      {
        "id": 4,
        "text": "Maintenance"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The stages of motivational enhancement therapy:</p>\n<ul>\n<li><strong>Pre-contemplation</strong> &ndash; Is a stage when the person is still not aware that they have a problem. Is also known as resistant/ unmotivated.</li>\n<li><strong>Contemplation</strong>- Is when they start to recognise the existence of the problem and think that they have to change.</li>\n<li><strong>Preparation</strong>- Is when they have made a decision to change their habits.</li>\n<li><strong>Action</strong>- Stage which requires will power and they actually bring about the changes that are needed and the modifications that are necessary.</li>\n<li><strong>Maintenance</strong>- Is the most important to prevent the relapse.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "SSRI\u2019s should be carefully used in the young for the management of depression due to increase in____",
    "choices": [
      {
        "id": 1,
        "text": "Nihilistic delusion"
      },
      {
        "id": 2,
        "text": "Guilt ideation"
      },
      {
        "id": 3,
        "text": "Suicidal ideation"
      },
      {
        "id": 4,
        "text": "Envious ideation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Somatic symptoms of depression improve faster than psychological symptoms when a patient is started on SSRI&rsquo;s and hence patient have energy to act on their thoughts which can include thoughts of deliberate self-harm and suicide. Hence Cognitive behavioural therapy should be started simultaneously in patients with depression.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following medications are associated with side effect of sexual dysfunction?",
    "choices": [
      {
        "id": 1,
        "text": "Fluoxetine"
      },
      {
        "id": 2,
        "text": "Mirtazapine"
      },
      {
        "id": 3,
        "text": "Bupropion"
      },
      {
        "id": 4,
        "text": "None"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>SSRI are known to cause sexual dysfunction. </p>\n<p>Atypical anti-depressants such as mirtazapine and bupropion does not cause sexual dysfunction.</p>\n<p><strong>Atypical antidepressants:</strong> </p>\n<ul>\n<li><strong>Bupropion-</strong>&nbsp;Inhibits reuptake of NE and dopamine. Also used for smoking cessation. Toxicity: stimulant effects (tachycardia, insomnia), headache, seizures in anorexic/bulimic patients. May help alleviate sexual dysfunction.</li>\n<li><strong>Mirtazapine-</strong> &alpha;2-antagonist (Increases release of NE and 5-HT), potent 5-HT2 and 5-HT3 receptor antagonist and H1 antagonist. Toxicity: sedation (which may be desirable in depressed patients with insomnia), increased appetite, weight gain (which may be desirable in elderly or anorexic patients), dry mouth.</li>\n<li><strong>Trazodone-</strong> Primarily blocks 5-HT2, &alpha;1-adrenergic, and H1 receptors; also weakly inhibits 5-HT reuptake. Used primarily for insomnia, as high doses are needed for antidepressant effects. Toxicity: sedation, nausea, priapism, postural hypotension. Called tra<strong>zzz</strong>o<strong>bone</strong> due to<strong> sedative</strong> and <strong>male-specific side effects</strong>.</li>\n<li><strong>Varenicline-</strong>&nbsp;Nicotinic ACh receptor partial agonist. Used for smoking cessation. Toxicity: sleep disturbance, may depress mood.</li>\n<li><strong>Vilazodone-</strong> Inhibits 5-HT reuptake; 5-HT1A receptor partial agonist. Used for major depressive disorder and generalized anxiety disorder. Toxicity: headache, diarrhea, nausea, increases weight, anticholinergic effects. May cause serotonin syndrome if taken with other serotonergic agents.</li>\n<li><strong>Vortioxetine-</strong> Inhibits 5-HT reuptake; 5-HT1A receptor agonist and 5-HT3 receptor antagonist. Used for major depressive disorder. Toxicity: nausea, sexual dysfunction, sleep disturbances (abnormal dreams), anticholinergic effects. May cause serotonin syndrome if taken with other serotonergic agents.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old woman developed serotonin syndrome after receiving a single dose of imipramine. She was already being treated for depression with paroxetine. Which of the following is not seen on examination?",
    "choices": [
      {
        "id": 1,
        "text": "Tremors"
      },
      {
        "id": 2,
        "text": "Rigidity"
      },
      {
        "id": 3,
        "text": "Hypothermia"
      },
      {
        "id": 4,
        "text": "Myoclonus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Hypothermia&nbsp;is not a feature of serotonin syndrome.</p>\n<p><strong>Serotonin syndrome</strong> is characterized by 3 A&rsquo;s:</p>\n<ol>\n<li>Neuromuscular hyper<strong>a</strong>ctivity (clonus, hyperreflexia, hypertonia, tremor, and seizure)</li>\n<li><strong>A</strong>utonomic stimulation (hyperthermia, diaphoresis, diarrhoea)</li>\n<li><strong>A</strong>gitation.</li>\n</ol>\n<p>It&nbsp;can occur with any drug that increases 5-HT (eg, MAOIs, SSRIs, SNRIs, TCAs, tramadol, ondansetron, triptans, linezolid, MDMA, dextromethorphan).</p>\n<p>Treatment: Discontinuation of the offending drug, supportive management, cyproheptadine (5-HT2 receptor antagonist).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is suggestive of organic mental disorder?",
    "choices": [
      {
        "id": 1,
        "text": "Delusion of persecution"
      },
      {
        "id": 2,
        "text": "Auditory hallucination"
      },
      {
        "id": 3,
        "text": "Visual hallucination"
      },
      {
        "id": 4,
        "text": "Thought insertion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Presence of visual hallucination should prompt workup for organic brain disorders.</p>\n<p>Organic mental disorder (currently cognitive disorders) are those where there is a structural pathology in the brain, which can either be primary or secondary. </p>\n<p>Characteristics of organic brain disorder are: </p>\n<ul>\n<li>Onset is sudden and is seen in older age groups. </li>\n<li>Neurological symptoms and history of neurological disease is present. </li>\n<li>Cognition, concentration and consciousness is affected. </li>\n<li><strong>Visual hallucination</strong> and other non-auditory hallucination is present (<strong>gustatory or olfactory</strong>). </li>\n<li><strong>Confusion and disorientation</strong> is the hallmark for an organic brain syndrome.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Delirium tremens is seen in?",
    "choices": [
      {
        "id": 1,
        "text": "Alcohol intoxication"
      },
      {
        "id": 2,
        "text": "Amphetamine psychosis"
      },
      {
        "id": 3,
        "text": "Cocaine psychosis"
      },
      {
        "id": 4,
        "text": "Alcohol withdrawal"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Delirium tremens (DT):</strong> </p>\n<p>DT is one of the life threatening complication of alcohol withdrawal. It is seen 48-72 hours after last drink. </p>\n<p><strong>Clinical features:</strong> </p>\n<ul>\n<li>Clouding of consciousness with disorientation in time and place. </li>\n<li>Waxing and waning of sensorium </li>\n<li>Visual hallucinations which are vivid and frightening can be seen </li>\n<li>Autonomic disturbance with tachycardia, fever, hypertension, sweating, pupillary dilatation. </li>\n<li>Psychomotor agitation and ataxia. </li>\n<li>Insomnia, with a reversal of sleep-wake pattern. </li>\n<li>Dehydration with electrolyte imbalance can be seen. </li>\n<li>DT is associated with 20% mortality rate. </li>\n</ul>\n<p><strong>Treatment:</strong></p>\n<ul>\n<li>Benzodiazepines, supportive therapy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a reversible cause of dementia?",
    "choices": [
      {
        "id": 1,
        "text": "Vascular dementia"
      },
      {
        "id": 2,
        "text": "Alzheimers"
      },
      {
        "id": 3,
        "text": "Hydrocephalus"
      },
      {
        "id": 4,
        "text": "Huntington's chorea"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Normal pressure hydrocephalus can present with<strong> dementia, ataxia and urinary incontinence</strong>. Timely diagnosis and intervention can lead to reversible of symptoms in NPH.</p>\n<p>Causes of dementia: </p>\n<p>Reversible: </p>\n<ul>\n<li>Brain tumors </li>\n<li>Sub Dural hematoma </li>\n<li>Hypothyroidism </li>\n<li>HIV infection </li>\n<li>Vitamin b 12 deficiency , niacin deficiency , chronic meningoencephalitis</li>\n</ul>\n<p>Irreversible:</p>\n<ul>\n<li>Alzheimer&rsquo;s </li>\n<li>Huntington&rsquo;s disease </li>\n<li>Lewy body disease </li>\n<li>Vascular dementia </li>\n<li>Creutzfeld Jacob disease&nbsp;</li>\n<li>Pick disease</li>\n</ul>\n<p><strong>Differential diagnosis of Dementia:</strong></p>\n<table style=\"width: 283px;\">\n<tbody>\n<tr>\n<td style=\"width: 86px;\">Alzheimer disease&nbsp;</td>\n<td style=\"width: 10px;\">\n<p><strong>Early, insidious onset short-term memory loss</strong>.&nbsp;</p>\n<p>Language deficits and spatial disorientation&nbsp;Later personality changes&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 86px;\">Vascular dementia&nbsp;</td>\n<td style=\"width: 10px;\">\n<p><strong>Stepwise decline</strong></p>\n<p>Early executive dysfunction</p>\n<p>Cerebral infarction&nbsp;&amp;/or deep white matter changes on neuroimaging&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 86px;\">Frontotemporal dementia (pick&rsquo;s disease)&nbsp;</td>\n<td style=\"width: 10px;\">\n<p><strong>Early personality changes</strong></p>\n<p>Apathy, disinhibition &amp; compulsive behaviour&nbsp;Frontotemporal atrophy&nbsp;on neuroimaging&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 86px;\">Lewy body dementia&nbsp;</td>\n<td style=\"width: 10px;\">\n<p><strong>Visual hallucination&nbsp;</strong></p>\n<p>Spontaneous&nbsp;parkinsonism</p>\n<p>Fluctuating cognition&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 86px;\">Normal pressure hydrocephalus&nbsp;</td>\n<td style=\"width: 10px;\">\n<p><strong>Ataxia</strong>&nbsp;early in disease&nbsp;</p>\n<p>Urinary incontinence&nbsp;</p>\n<p>Dilated ventricles&nbsp;on neuroimaging.&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 86px;\">Prion disease&nbsp;</td>\n<td style=\"width: 10px;\">\n<p><strong>Behavioural changes&nbsp;</strong></p>\n<p><strong>Rapidly progressive&nbsp;</strong></p>\n<p><strong>&nbsp;Myoclonus&nbsp;</strong>&amp;/or seizures&nbsp;</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 56 year old male comes to the medicine opd with features of loss of interest in various activities, increased jocularity, and perseveration since 1 year and memory issues since past 3 months. For further evaluation brain biopsy was taken which showed paired helical filaments and ballooned neurons. What is your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Alzheimers disease"
      },
      {
        "id": 2,
        "text": "Pick\u2019s disease"
      },
      {
        "id": 3,
        "text": "Vascular dementia"
      },
      {
        "id": 4,
        "text": "Huntington\u2019s disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>History of personality changes, loss of social restraint followed by issues of memory later on should raise suspicion for<strong> frontotemporal dementia</strong> (pick&rsquo;s disease). </p>\n<p><strong>Pick&rsquo;s disease</strong> presents with personality changes and loss of social restraints initially followed by memory loss. Patient eventually becomes mute, immobile and incontinent. </p>\n<p><strong>Alzheimer&rsquo;s</strong> patients presents with short term memory loss and develops personality changes later on. </p>\n<p>Neuroanatomic findings in FTD: Atrophy in the frontal and temporal lobes. </p>\n<p>Histopathology: <strong>Pick bodies</strong> (intra neuronal argentophilic inclusions) and Pick cells (swollen neurons) in affected areas of the brain. </p>\n<p>Aetiology is unknown. </p>\n<p>Most common in men with family history of Pick disease. </p>\n<p>May see features of Kl&uuml;ver-Bucy syndrome (hyper sexuality, hyperphagia, passivity).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drug is not recommended for Alzheimer\u2019s disease?",
    "choices": [
      {
        "id": 1,
        "text": "Donepezil"
      },
      {
        "id": 2,
        "text": "Galantamine"
      },
      {
        "id": 3,
        "text": "Memantine"
      },
      {
        "id": 4,
        "text": "Benztropine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Characteristic feature of Alzheimer&rsquo;s is<strong> degeneration of cholinergic neurons</strong> leading to reduced levels of acetyl choline. <strong>Benztropine</strong> is a <strong>muscarinic receptor antagonist</strong> which blocks acetyl choline receptors and worsens symptoms. </p>\n<p>Treatment of Alzheimer disease: </p>\n<ul>\n<li>Drugs which increase cholinergic activity- Donepezil, rivastigmine , Galantamine </li>\n<li>NMDA antagonist- Memantine </li>\n<li>Antioxidants can also be given</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not classified under anxiety disorders?",
    "choices": [
      {
        "id": 1,
        "text": "Social anxiety disorder"
      },
      {
        "id": 2,
        "text": "Post-traumatic stress disorder"
      },
      {
        "id": 3,
        "text": "Specific Phobia"
      },
      {
        "id": 4,
        "text": "Panic attacks"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Post-traumatic stress disorder&nbsp;</strong>is classified under <strong>t</strong><strong>rauma and stressor-related disorder</strong>&nbsp;according to <strong>DSM-5</strong>.</p>\n<p>According to <strong>ICD-11</strong>, it is classified under <strong>disorders specifically associated with stress</strong>.</p>\n<p>The following disorders are classified under anxiety disorders:</p>\n<ol>\n<li>Social anxiety disorder</li>\n<li>Specific phobia</li>\n<li>Agoraphobia</li>\n<li>Panic attacks</li>\n<li>Generalized anxiety disorder</li>\n<li>Separation anxiety disorder</li>\n<li>Selective mutism</li>\n<li>Substance/medication-induced anxiety disorder</li>\n<li>Anxiety disorder due to another medical condition</li>\n<li>Unspecified anxiety disorder</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young woman has a fear of places from where escape is difficult. What is this condition known as?",
    "choices": [
      {
        "id": 1,
        "text": "Claustrophobia"
      },
      {
        "id": 2,
        "text": "Aerophobia"
      },
      {
        "id": 3,
        "text": "Agoraphobia"
      },
      {
        "id": 4,
        "text": "Ailurophobia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Agoraphobia</strong> is the fear or avoidance of places from where escape would be difficult&nbsp;e.g.,&nbsp;crowds, public places, or public transportation.</p>\n<p>It is more common in <strong>women</strong>. It leads to severe restrictions on the individual&rsquo;s travel and daily routine.</p>\n<p>Option A: Claustrophobia - Fear of closed spaces</p>\n<p>Option B: Aerophobia - Fear of flying&nbsp;</p>\n<p>Option D: Ailurophobia - Fear of cats</p>\n<p>Note:<strong> Specific phobia</strong> is the<strong> most common</strong> type of phobia. Agoraphobia is not a specific phobia and is classified separately under anxiety disorders.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman presented with a constant fear of sinning. She was unable to look at people for fear that she was offending them by inappropriately glancing. When people crossed their legs in front of her, she thought it was because she had been looking at their genitals. She constantly prayed for forgiveness for not being devout or moral enough. What is the treatment of choice for this disorder?",
    "choices": [
      {
        "id": 1,
        "text": "Psychoanalytic psychotherapy"
      },
      {
        "id": 2,
        "text": "Cognitive behavioral therapy"
      },
      {
        "id": 3,
        "text": "Selective Serotonin Reuptake Inhibitors"
      },
      {
        "id": 4,
        "text": "Electroconvulsive therapy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical scenario describes a woman who suffers from scrupulosity, a type of <strong>obsessive-compulsive disorder</strong> (OCD). Scrupulous individuals are overly concerned that something they thought or did might be a sin or a violation of religious or moral doctrine. The <strong>treatment of choice</strong> for OCD is <strong>c</strong><strong>ognitive behavioral therapy</strong>, especially focussing on exposure and response prevention.&nbsp;</p>\n<p>Other modalities of treatment:</p>\n<ul>\n<li>Drug treatment &ndash; <strong>SSRIs</strong> are the drugs of choice because the serotonergic system is involved in the pathophysiology of OCD.</li>\n<li><strong>Psychoanalytic psychotherapy</strong></li>\n<li><strong>Electroconvulsive therapy</strong>&nbsp;&ndash; in chronic and resistant cases.</li>\n<li>Surgery &ndash; stereotactic limbic leucotomy, stereotactic subcaudate tractotomy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the drug of choice that you will prescribe for a patient with a generalised anxiety disorder?",
    "choices": [
      {
        "id": 1,
        "text": "Sertraline"
      },
      {
        "id": 2,
        "text": "Amitriptyline"
      },
      {
        "id": 3,
        "text": "Alprazolam"
      },
      {
        "id": 4,
        "text": "Selegiline"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Selective serotonin reuptake inhibitors (<strong>SSRIs</strong>) like<strong> sertraline</strong> are the <strong>drug of choice</strong> in the treatment of <strong>generalised anxiety disorder.</strong>&nbsp;CBT is advised along with SSRIs.</p>\n<p><strong>Buspirone</strong> is a <strong>second-line</strong> drug used in generalized anxiety disorder.</p>\n<p>Option C: Short-acting benzodiazepines such as <strong>alprazolam</strong> are used during <strong>acute episodes of panic disorder.&nbsp;</strong></p>\n<p>Options B, D: Tricyclic antidepressants (<strong>amitriptyline</strong>) and monoamine oxidase inhibitors (<strong>selegiline</strong>) are second-line drugs for <strong>panic disorder.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which stage of sleep are sleep spindles and K-complexes observed?",
    "choices": [
      {
        "id": 1,
        "text": "Stage 1 NREM"
      },
      {
        "id": 2,
        "text": "Stage 2 NREM"
      },
      {
        "id": 3,
        "text": "Stage 3 NREM"
      },
      {
        "id": 4,
        "text": "Stage 4 NREM"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Sleep spindles and K complexes are&nbsp;observed in stage 2 NREM sleep.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d27090b0f3d64374accabef11db67c6ex608x313.PNG"
    ]
  },
  {
    "text": "A terrified computer engineer presents to the clinic with complaints of excessive daytime sleepiness and inability to move for a few seconds after waking in the morning. He has a recurring hallucination of being suffocated by a great hound just as he falls asleep, which further disturbs him. Which of the following is the drug of choice for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Low dose benzodiazepines"
      },
      {
        "id": 2,
        "text": "Modafinil"
      },
      {
        "id": 3,
        "text": "Sertraline"
      },
      {
        "id": 4,
        "text": "Amphetamines"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The patient has sleep paralysis, excessive daytime sleepiness, and hypnagogic hallucinations, suggestive of <strong>narcolepsy.</strong> The drug of choice for narcolepsy is <strong>modafinil,</strong>&nbsp;an a1-adrenergic receptor agonist, used to reduce the number of sleep attacks and to improve psychomotor performance in narcolepsy.</p>\n<p>Narcolepsy is characterized by the tetrad of:&nbsp;</p>\n<ol>\n<li>Excessive daytime sleepiness</li>\n<li>Cataplexy (sudden loss of muscle tone)</li>\n<li>Hypnagogic/hypnopompic hallucinations</li>\n<li>Sleep paralysis</li>\n</ol>\n<p>The hallmark of narcolepsy is <strong>decreased REM latency.</strong></p>\n<p>Treatment:&nbsp;</p>\n<ul>\n<li>Sleep hygiene</li>\n<li>Scheduled naps</li>\n<li>Avoidance of alcohol and drugs that cause drowsiness</li>\n<li>Drugs:&nbsp;\n<ul>\n<li><strong>Modafinil </strong>(wakefulness-promoting drug)&nbsp;is the <strong>drug of choice.</strong></li>\n<li>Amphetamines</li>\n<li>Methylphenidate</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is not true regarding autism?",
    "choices": [
      {
        "id": 1,
        "text": "Language impairment is a usual feature"
      },
      {
        "id": 2,
        "text": "It is never associated with intellectual disability"
      },
      {
        "id": 3,
        "text": "Symptoms present in the early developmental period"
      },
      {
        "id": 4,
        "text": "Patients may show an inflexible adherence to routines"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Intellectual disability</strong> is seen in about <strong>30%</strong> of patients with autism.</p>\n<p><strong>Autism or autistic diorder</strong>&nbsp;is a pervasive developmental disorder. Features usually start <strong>before 3 years</strong> of age and is&nbsp;<strong>more common in boys</strong>. Autism is characterized by the <strong>2 core features</strong> of autism spectrum disorder:&nbsp;<strong>deficits in social communication</strong> and <strong>restricted, repetitive patterns</strong> of behavior, interests, or activities.</p>\n<p>In addition, autism is also usually marked by <strong>language impairment</strong>, which&nbsp;occurs early in the developmental period. However this is not a core feature.</p>\n<p><strong>Below-normal intelligence</strong>&nbsp;is seen in about 30% of children with autistic disorder. However, some autistic children have <strong>unusual abilities</strong> in some areas (e.g., exceptional memory or calculation skills). These are referred to as <strong>savant skills.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 13-year-old boy was brought to your clinic by his worried mother. He had been suspended twice from his school for bullying, assaulting his classmates and stealing from them. He would sometimes stay out all night despite his parents telling him not to, and he was recently warned by the local police for vandalism. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Oppositional defiant disorder"
      },
      {
        "id": 2,
        "text": "Conduct disorder"
      },
      {
        "id": 3,
        "text": "Anti-social personality disorder"
      },
      {
        "id": 4,
        "text": "Disruptive mood dysregulation disorder"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A 13-year-old boy with a history of aggression towards people within the past 6 months, destruction of property, and theft for the last couple of years points towards a diagnosis of&nbsp;<strong>conduct disorder.</strong> If it <strong>persists beyond 18 years</strong> of age it is referred to as&nbsp;<strong>anti-social personality disorder</strong>.</p>\n<p>Conduct disorder is diagnosed when <strong>at least 3 behaviors</strong> have been present within the <strong>previous 12 months</strong>, with <strong>at least 1</strong> present in the <strong>past 6 months.</strong></p>\n<p>Conduct disorder can be classified based on onset as:</p>\n<ul>\n<li><strong>Childhood-onset type</strong>: Individuals show at least one symptom characteristic of conduct disorder before the age of 10 years.</li>\n<li><strong>Adolescent-onset type:</strong> Individuals do not show features of conduct disorder before the age of 10 years.</li>\n<li><strong>Unspecified onset</strong>: Criteria for a diagnosis of conduct disorder are met, but there is not enough information available to determine whether the onset of the first symptom was before or after the age of 10 years.</li>\n</ul>\n<table style=\"width: 536px; height: 457px;\">\n<tbody>\n<tr style=\"height: 18px;\">\n<td style=\"width: 526.015625px; height: 18px;\" colspan=\"2\"><strong>DSM-5 criteria for Conduct Disorder</strong>&nbsp;</td>\n</tr>\n<tr style=\"height: 130px;\">\n<td style=\"width: 200.296875px; height: 130px;\">Aggression towards people and animals</td>\n<td style=\"width: 319.71875px; height: 130px;\">\n<p>Initiating physical fights, bullying, threatening, or intimidating others</p>\n<p>Using a weapon to cause serious harm to others</p>\n<p>Being physically cruel to people</p>\n<p>Being physically cruel to animals</p>\n<p>Stealing while confronting a victim</p>\n<p>Forcing someone into sexual activity</p>\n</td>\n</tr>\n<tr style=\"height: 37px;\">\n<td style=\"width: 200.296875px; height: 37px;\">Destruction of property</td>\n<td style=\"width: 319.71875px; height: 37px;\">\n<p>Setting fires</p>\n<p>Intentionally destroying the property of others</p>\n</td>\n</tr>\n<tr style=\"height: 164px;\">\n<td style=\"width: 200.296875px; height: 164px;\">Serious violation of rules</td>\n<td style=\"width: 319.71875px; height: 164px;\">\n<p>Running away overnight at least twice or once without returning for a lengthy period.</p>\n<p>Being truant from school often starting before age 13.</p>\n<p>Frequently staying out at night despite parental prohibitions starting before age 13</p>\n</td>\n</tr>\n<tr style=\"height: 90px;\">\n<td style=\"width: 200.296875px; height: 90px;\">Deceitfulness or theft</td>\n<td style=\"width: 319.71875px; height: 90px;\">\n<p>Frequently lying to obtain goods or favors</p>\n<p>Breaking into a car or building</p>\n<p>Stealing items of nontrivial value without confronting a victim</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Oppositional defiant disorder (ODD):</p>\n<ul>\n<li>A persistent pattern&nbsp;of negativistic, hostile, and <strong>defiant attitude</strong>/<strong>behavior towards adults.</strong></li>\n<li>Seen in children <strong>less than 10 years of age.</strong></li>\n<li>The symptoms must be present&nbsp;<strong>at least 6 months</strong>, during which 4 or more of the following have to be present:\n<ul>\n<li>Argues with others</li>\n<li>Loses temper</li>\n<li>Blames others</li>\n<li>Easily annoyed</li>\n<li>Refuses and defies to listening to adults</li>\n<li>Annoys other people quite often</li>\n</ul>\n</li>\n</ul>\n<p>Unlike conduct disorder, children with ODD <strong>do not indulge</strong> in<strong> destructive</strong> and<strong> physically harmful activities.</strong></p>\n<p>Disruptive mood dysregulation disorder:<strong>&nbsp;</strong>Onset before age 10. Severe, recurrent temper outbursts out of proportion to the situation. Child is constantly angry and irritable between outbreks.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A psychiatry resident is counseling the parents of a teenager with Fragile X syndrome. On evaluation, the boy has an IQ of 40. Which of the following is true?",
    "choices": [
      {
        "id": 1,
        "text": "He will be classified as having mild intellectual disability"
      },
      {
        "id": 2,
        "text": "His mental age is between 6-8 years"
      },
      {
        "id": 3,
        "text": "He will require continous supervision and care"
      },
      {
        "id": 4,
        "text": "He will be able to study till about 4th grade"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A person with an <strong>IQ of 40</strong> will have a <strong>mental age</strong> of<strong> 6-8 years.</strong></p>\n<p>Intellectual disability (ID) is said to be present when IQ&lt;70 and is classified as -&nbsp;</p>\n<ul>\n<li><strong>Mild</strong> Intellectual disability <strong>(50-69)</strong>\n<ul>\n<li>Are educable</li>\n<li>Can study till 6<sup>th&nbsp;</sup>grade</li>\n<li>They are successful and independent</li>\n<li>They can do unskilled and semi-skilled work <strong>without supervision</strong></li>\n</ul>\n</li>\n<li><strong>Moderate</strong> Intellectual disability <strong>(35-49)</strong>\n<ul>\n<li>Trainable</li>\n<li>Can study up to 2<sup>nd&nbsp;</sup>class</li>\n<li>Have a<strong> mental age</strong> of<strong> 6-8 years</strong></li>\n<li>They can do unskilled and semiskilled work under supervision</li>\n</ul>\n</li>\n<li><strong>Severe</strong> Intellectual disability <strong>(20-34)</strong>\n<ul>\n<li>They are dependent</li>\n<li>Cannot be educated</li>\n<li>Have a mental age of <strong>3-6 years</strong></li>\n<li>They can do simple tasks under supervision</li>\n</ul>\n</li>\n<li><strong>Profound</strong> Intellectual disability<strong> (&lt;20)</strong><br />\n<ul>\n<li>Require continuous supervision and care</li>\n<li>Have a mental age of 3 years</li>\n</ul>\n</li>\n</ul>\n<p>Previously, IQ range of 70&ndash;90 was called \"Borderline intellectual functioning\". But DSM-5 has eliminated this term. Contrary to earlier versions, <strong>IQ boundaries </strong>are <strong>no longer</strong> part of the<strong> classification of ID</strong> in <strong>DSM-5.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/26f3f33b358940a68e8f87ad4143eab9x600x287.JPEG"
    ]
  },
  {
    "text": "Sexual pleasure obtained by inflicting pain to the partner is known as _____",
    "choices": [
      {
        "id": 1,
        "text": "Transvertism"
      },
      {
        "id": 2,
        "text": "Sadism"
      },
      {
        "id": 3,
        "text": "Fetishism"
      },
      {
        "id": 4,
        "text": "Masochism"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In this disorder, the person (the &lsquo;sadist&rsquo;) is sexually aroused by physical and/or psycho logical humiliation, suffering or injury of the sexual partner (the &lsquo;victim&rsquo;). Paraphilia&rsquo;s are disorders in sexual preference.</p>\n<p>They include unnatural sexual offences and perversions.</p>\n<p>Unnatural sexual offences are as follows:</p>\n<ul>\n<li>Bestiality</li>\n<li>Paedophilia</li>\n<li>Necrophilia</li>\n<li>Fetishism</li>\n<li>Sodomy</li>\n<li>Perversions</li>\n<li>Exhibitionism- exposure of one&rsquo;s genitalia in public places</li>\n<li>Voyeurism &ndash; watching the sexual act of other people</li>\n<li>Sadism &ndash; obtaining sexual pleasure by inflicting pain</li>\n<li>Masochism is opposite of sadism where they obtain pleasure of being inflicted with pain</li>\n<li>Frotterurism &ndash; rubbing against the body of strangers and women to get sexual gratification</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient is mute and immobile but conscious. He is unresponsive to the environment. How would you describe his state?",
    "choices": [
      {
        "id": 1,
        "text": "Akinetic mutism"
      },
      {
        "id": 2,
        "text": "Stupor"
      },
      {
        "id": 3,
        "text": "Sopor"
      },
      {
        "id": 4,
        "text": "Twilight state"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A patient is said to be in a <strong>stupor</strong> when he is&nbsp;<strong>conscious</strong> but <strong>mute</strong>, <strong>immobile,</strong> and <strong>unresponsive</strong> to the environment.</p>\n<table style=\"height: 389px; width: 283px;\">\n<tbody>\n<tr>\n<td style=\"width: 102px;\">&nbsp;</td>\n<td style=\"width: 98.8281px;\"><strong>Stupor</strong></td>\n<td style=\"width: 78.4688px;\"><strong>Sopor</strong></td>\n<td style=\"width: 103.453px;\"><strong>Coma</strong></td>\n</tr>\n<tr>\n<td style=\"width: 102px;\">Consciousness</td>\n<td style=\"width: 98.8281px;\"><strong>Conscious,</strong> but mute and immobile</td>\n<td style=\"width: 78.4688px;\"><strong>Drowsy,</strong> abnormally deep sleep, difficult to arouse</td>\n<td style=\"width: 103.453px;\"><strong>Unconscious,</strong> cannot be awakened</td>\n</tr>\n<tr>\n<td style=\"width: 102px;\">Response to the environment</td>\n<td style=\"width: 98.8281px;\">No/Decreased</td>\n<td style=\"width: 78.4688px;\">Responds to harsh sound, bright light</td>\n<td style=\"width: 103.453px;\">No&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 102px;\">Response to painful stimulus</td>\n<td style=\"width: 98.8281px;\">Yes</td>\n<td style=\"width: 78.4688px;\">Yes</td>\n<td style=\"width: 103.453px;\">No</td>\n</tr>\n</tbody>\n</table>\n<div class=\"page\" title=\"Page 1436\">&nbsp;</div>\n<p>Option A: Akinetic mutism: The person is mute and immobile but responsive to the environment.</p>\n<p>Option D: Twilight state: A state of disturbed consciousness with hallucinations,&nbsp;during which actions may be performed unconsciously.</p>\n<p>Note:&nbsp;The oneiroid state is a dream-like state in which patients may be deeply confused and not fully oriented to time and place.&nbsp;The term oneiroid schizophrenia has been used for patients who are engaged in their hallucinatory experiences to the point of exclusion of involvement in the real world.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Schizophrenia is characterized by all of the following except",
    "choices": [
      {
        "id": 1,
        "text": "Catatonia"
      },
      {
        "id": 2,
        "text": "Delusions"
      },
      {
        "id": 3,
        "text": "Hallucinations"
      },
      {
        "id": 4,
        "text": "Elation"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Elation is not a symptom of schizophrenia.</p>\n<p>Symptoms of schizophrenia can be classified as positive or negative.</p>\n<ul>\n<li><strong>Positive symptoms</strong> are things <strong>additional to expected behavior</strong> and include delusions, hallucinations, agitation, and talkativeness.</li>\n<li>Positive symptoms <strong>respond well </strong>to most <strong>traditional and atypical antipsychotic agents.</strong></li>\n<li><strong>Negative symptoms</strong> are things <strong>missing from expected behavior</strong> and include lack of motivation, social withdrawal, flattened affect, cognitive disturbances, poor grooming, and poor (i.e., impoverished) speech content.</li>\n<li>Negative symptoms <strong>respond better to atypical</strong> than to traditional antipsychotics.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old woman is brought to the psychiatry OPD with low mood for the past 2 weeks, reduced socialization, decreased appetite and inability to sleep for the past 3 months. She complains of frequent backache and headache, with early morning awakening. Which of the following is increased in this disorder?",
    "choices": [
      {
        "id": 1,
        "text": "Cortisol"
      },
      {
        "id": 2,
        "text": "Dopamine"
      },
      {
        "id": 3,
        "text": "Norepinephrine"
      },
      {
        "id": 4,
        "text": "Serotonin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario of low mood along with reduced appetite, reduced interest in socialization, somatic symptoms, and disturbed sleep, points towards a diagnosis of <strong>depression (major depressive disorder).&nbsp;Cortisol</strong>&nbsp;levels are <strong>increased</strong> in depression.&nbsp;&nbsp;</p>\n<p>The diagnostic criteria for major depressive disorder are as follows:</p>\n<p>A. <strong>Five or more</strong> of the following symptoms have been present during the <strong>same 2 week period.&nbsp;</strong>At least<strong> one of the symptoms</strong> is either <strong>depressed mood</strong> or <strong>loss of interest</strong> or pleasure.</p>\n<ol>\n<li>Depressed mood most of the day</li>\n<li>Markedly diminished interest or pleasure in activities (anhedonia)</li>\n<li>Significant weight loss (loss of more than 5% of body weight in a month) when not dieting or weight gain, decrease or increase in appetite&nbsp;</li>\n<li>Insomnia or hypersomnia</li>\n<li>Psychomotor agitation or retardation</li>\n<li>Fatigue or loss of energy</li>\n<li>Feelings of worthlessness or excessive or inappropriate guilt</li>\n<li>Diminished ability to think or concentrate, or indecisiveness</li>\n<li>Recurrent thoughts of death, recurrent suicidal ideation</li>\n</ol>\n<p>B. The symptoms cause clinically significant <strong>distress or impairment</strong> in social, occupa&shy;tional, or other important areas of functioning.</p>\n<p>C. The episode is <strong>not attributable </strong>to the physiological effects of a<strong> substance</strong> or to another <strong>medical condition</strong>.</p>\n<p>D. The occurrence of the major depressive episode is not better explained by:</p>\n<ul>\n<li>Schizoaf&shy;fective disorder</li>\n<li>Schizophrenia</li>\n<li>Schizophreniform disorder</li>\n<li>Delusional disorder</li>\n<li>Another specified or unspecified schizophrenia spectrum, or other psychotic disorders.</li>\n</ul>\n<p>E. There has <strong>never </strong>been a <strong>manic</strong> episode or a <strong>hypomanic episode</strong>.</p>\n<p>Note<strong>: </strong>The levels of norepinephrine, serotonin, and dopamine are decreased in depression</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A  middle-aged man has been regularly consuming around 750 mL of alcohol for the past 20 years. Of late, he has noticed that he is able to obtain the same effect with just a quarter bottle.  What is this phenomenon called?",
    "choices": [
      {
        "id": 1,
        "text": "Tachyphylaxis"
      },
      {
        "id": 2,
        "text": "Desensitization"
      },
      {
        "id": 3,
        "text": "Reverse tolerance"
      },
      {
        "id": 4,
        "text": "Cross tolerance"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>When an individual requires a lesser dose of alcohol (drug) to obtain the same effect as before, this&nbsp;phenomenon is known as <strong>reverse tolerance</strong>.</p>\n<p>In alcoholics, it is a sign of <strong>late-stage alcoholism</strong>, where the patient has developed <strong>cirrhosis</strong>. The liver&nbsp;doesn&rsquo;t produce enough enzymes like before to metabolize alcohol leading to increased blood alcohol levels.&nbsp;</p>\n<p><span class=\"Y0NH2b CLPzrc\">Option A: </span><strong><span class=\"Y0NH2b CLPzrc\">Tachyphylaxis </span></strong><span class=\"Y0NH2b CLPzrc\">is the&nbsp;</span>rapid development of tolerance when a drug is repeatedly used in quick succession, resulting in a marked reduction in response.</p>\n<p>Option B: <strong>Desensitization</strong> may be equivalent to drug tolerance and refers to a diminished response/effect with continued use of the same dose of the substance.</p>\n<p><span class=\"Y0NH2b CLPzrc\">Option D: <strong>Cross</strong>-<strong>tolerance</strong> is a phenomenon that occurs when tolerance to the effects of one drug produces tolerance to another drug. It often happens between two drugs with similar pharmacological actions. eg. alcohol and benzodiazepines (both are depressants).</span></p>\n<p>Note: A quarter bottle is approximately 180 ml.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient who was initially admitted with a history suggestive of paranoid schizophrenia is now suspected to have drug-induced psychosis. Which of the following drugs is the most likely causative agent?",
    "choices": [
      {
        "id": 1,
        "text": "Clonidine intoxication"
      },
      {
        "id": 2,
        "text": "Amphetamine abuse"
      },
      {
        "id": 3,
        "text": "LSD abuse"
      },
      {
        "id": 4,
        "text": "Cannabis abuse"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\"><strong>Amphetamine abuse</strong>&nbsp;resembles <strong>paranoid schizophrenia. </strong></p>\n<p class=\"p1\">Amphetamine is a stimulant that causes stimulant-induced psychotic disorder. It induces ideas of reference, paranoid delusions, and hallucinations.&nbsp;</p>\n<p>The treatment of choice for the amphetamine-induced psychotic disorder is the short-term use of an antipsychotic medication such as <strong>haloperidol</strong>.</p>\n<p>&nbsp;Drug-induced psychosis can also be seen with chronic and heavy exposure to cocaine.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most common substance abused in India?",
    "choices": [
      {
        "id": 1,
        "text": "Alcohol"
      },
      {
        "id": 2,
        "text": "Cannabis"
      },
      {
        "id": 3,
        "text": "Inhalants"
      },
      {
        "id": 4,
        "text": "Caffeine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Among the given options, <strong>alcohol</strong> is the most commonly abused substance.\u00a0</p>\n<p>Note:\u00a0<strong>Cannabis</strong> is the most commonly used <strong>illegal</strong> <strong>drug</strong> in the <strong>world.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Antipsychotic drug with with least incidence of extrapyramidal side effects and maximum incidence of weight gain is",
    "choices": [
      {
        "id": 1,
        "text": "Pimozide"
      },
      {
        "id": 2,
        "text": "Thioridazine"
      },
      {
        "id": 3,
        "text": "Clozapine"
      },
      {
        "id": 4,
        "text": "Chlorpromazine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Clozapine causes<strong> highest weight gain</strong> amongst all antipsychotics. (Olanzapine cause significant weight gain too)</p>\n<p>Other side effects of clozapine: Agranulocytosis (dose independent), seizure (dose dependent), myocarditis, dyslipidaemia, hyperglycaemia, sedation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Psychiatry St 1';
        const quizFilename = 'psychiatry-st-1-5018f471.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>