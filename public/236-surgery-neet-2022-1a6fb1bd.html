<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>236 Surgery Neet 2022 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Surgery
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">25</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 6-year-old boy came with a history of recurrent urinary tract infections. Imaging was done and is shown below. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Vesicoureteric reflux"
      },
      {
        "id": 2,
        "text": "Urinary bladder diverticulum"
      },
      {
        "id": 3,
        "text": "Urinary bladder hernia"
      },
      {
        "id": 4,
        "text": "Vesicocolic fistula"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p style=\"text-align: justify;\">&nbsp;</p>\n<p style=\"text-align: justify;\">Grades 1-3 resolve spontaneously.&nbsp;Surgical management is done&nbsp;when&nbsp;acute pyelonephritis recurs in spite of antibiotic therapy or if&nbsp;severe reflux is associated with a defect that can be corrected surgically.</p>\n<p style=\"text-align: justify;\">Other options:</p>\n<p style=\"text-align: justify;\">Option B: <strong>Urinary bladder diverticula</strong> occurs due to pressure changes in the bladder leading to the formation of saccules that may protrude through the bladder wall. It is more common in <strong>elderly males &gt;50 years</strong> and is usually asymptomatic or not infected. Symptoms may occur due to associated urinary obstruction, recurrent infection, or pyelonephritis. They are <strong>diagnosed incidentally</strong> on cystoscopy or ultrasonography.&nbsp;</p>\n<p style=\"text-align: justify;\">Option C: <strong>Urinary bladder hernia&nbsp;</strong>is an uncommon condition characterized by herniation of the&nbsp;urinary bladder or ureter into the&nbsp;inguinal canal, scrotum, or femoral canal. Urinary symptoms such as&nbsp;dysuria, frequency, urgency, nocturia, and hematuria can be seen. Retrograde cystography is th<span style=\"font-size: 14px;\">e best technique to image a bladder hernia.&nbsp;</span></p>\n<p style=\"text-align: justify;\">Option D:<strong> Vesicocolic fistula </strong>is an abnormal communication between the bladder and the colon. As a result of this, the fecal matter may enter the bladder. <strong>Diverticulitis</strong> is the most common cause. Bubbles in the urine, pain, hematuria, and recurrent UTI can occur. Cystoscopy reveals <strong>edema </strong>and<strong> gas bubbles</strong>. The fistula can be seen in a cystogram.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a7027a8480904fbe9a4b716a2b7ec0ab.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a269011a879f4dca9dbd2eec15a9e77cx1064x2464.JPEG"
    ]
  },
  {
    "text": "A 45-year-old female patient underwent thyroidectomy. Three days after the surgery, she developed perioral numbness. Which of the following investigations need to be done for her?",
    "choices": [
      {
        "id": 1,
        "text": "Free T3, T4"
      },
      {
        "id": 2,
        "text": "T3, T4, Thyroid-stimulating hormone"
      },
      {
        "id": 3,
        "text": "Radioiodine scan"
      },
      {
        "id": 4,
        "text": "Calcium, phosphate and parathormone levels"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Calcium, phosphate,&nbsp;</strong>and <strong>parathyroid hormone</strong> (PTH) levels should be done in this patient to evaluate <strong>hypoparathyroidism</strong> secondary to thyroidectomy.</p>\n<p>Hypoparathyroidism is a common complication of thyroid surgery. It is temporary and usually lasts for 4-6 weeks. Hypoparathyroidism following thyroid surgery can be diagnosed when there are <strong>decreased serum calcium and/ or PTH levels</strong>, or if there is symptomatic hypocalcemia.&nbsp;</p>\n<p>The features of hypocalcemia are <strong>circumoral paresthesia</strong>, and paresthesia of the neck, fingers, and toes.&nbsp;Muscle twitching, weakness of the forearm, hand, foot, and&nbsp;<strong>carpopedal spasms </strong>can be seen.&nbsp;A carpal spasm can be induced by inflating a blood pressure cuff to 20 mmHg above the systolic blood pressure for 3 minutes. This is known as <strong>Trousseau's sign</strong>.&nbsp;<strong>Chvostek sign </strong>wherein<strong> twitching of facial muscles </strong>is demonstrated by tapping above the angle of the jaw. It is due to the stimulation of the branches of the facial nerve.&nbsp;</p>\n<p><strong>ECG </strong>shows<strong> prolonged QT interval</strong><strong>.</strong></p>\n<p>Management of acute and symptomatic hypocalcemia is by giving 10 mL of intravenous 10% calcium gluconate over 5 minutes.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with blunt trauma to the abdomen. On evaluation, liver injury was noted for which primary repair was done. Coagulation function was monitored intraoperatively, using the method shown below. What is the method used?",
    "choices": [
      {
        "id": 1,
        "text": "Thromboelastography"
      },
      {
        "id": 2,
        "text": "Plethysmography"
      },
      {
        "id": 3,
        "text": "Sonography"
      },
      {
        "id": 4,
        "text": "Elastography"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Advantages of thromboelastography:</p>\n<ul>\n<li class=\"half_rhythm\">\n<div>Blood coagulability, including coagulation cascade, platelet function, and fibrinolysis can be assessed.&nbsp;</div>\n</li>\n<li class=\"half_rhythm\">\n<div>It is a simple bedside test</div>\n</li>\n<li class=\"half_rhythm\">\n<div>Can diagnose coagulopathic bleeding</div>\n</li>\n<li class=\"half_rhythm\">\n<div>Can be used as a guide in transfusion therapy and decrease the use of blood products</div>\n</li>\n<li class=\"half_rhythm\">\n<div>Can detect dynamic changes in blood coagulation during resuscitation</div>\n</li>\n<li class=\"half_rhythm\">\n<div>Predict the clinical efficacy of therapeutic agents affecting blood coagulability</div>\n</li>\n</ul>\n<p>Other options:&nbsp;</p>\n<p>Option B:&nbsp;<strong>Plethysmography</strong> is a semiquantitative method to measure segmental blood flow and velocity in the carotid and peripheral vascular systems. It is safe, inexpensive and easy to use. It is useful in the diagnosis of vascular disease.</p>\n<p>Option C: <strong>Sonography</strong> or ultrasound is a cheap and easily available imaging method. It is used as a first-line imaging method to assess liver, biliary, renal tract, obstetric, and gynecological disease. It is also useful in guiding needle placement during interventional procedures. Ligaments, tendon and muscle injuries can also be studied by an ultrasound. &nbsp;</p>\n<p>Option D:<strong> Elastography</strong> is a newer imaging modality, which detects the changes in elasticity of tissues. It is based on the concept that the pathological process alters the elastic properties of tissue. It is useful in&nbsp;differentiating malignant and benign breast neoplasms, identifying traumatic changes in the&nbsp;muscles and tendons, helping to decide the biopsy site accurately, assess&nbsp;liver fibrosis and steatosis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/541882a89234495f8bd1a0a388493a42.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7f81ffe41b5349379a1f9fc9b475dcdbx1280x1071.JPEG"
    ]
  },
  {
    "text": "A 59-year-old lady presents with a progressive painless lump in the breast. What is the cause for the following skin change?",
    "choices": [
      {
        "id": 1,
        "text": "Infiltration of subdermal lymphatics"
      },
      {
        "id": 2,
        "text": "Infiltration of lactiferous duct"
      },
      {
        "id": 3,
        "text": "Involvement of Cooper's ligament"
      },
      {
        "id": 4,
        "text": "Spread of tumor to anterior chest wall"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows the <strong>peau d'orange</strong> appearance and it occurs due to the<strong> infiltration of the subdermal lymphatics.</strong></p>\n<p>Peau d'orange appearance is a skin change in which the skin of the breast appears like that of an orange. It is due to cutaneous lymphatic edema caused by dermal lymphatic infiltration by malignant cells. It is seen in several conditions such as:</p>\n<ul>\n<li>inflammatory carcinoma of the breast</li>\n<li>mastitis</li>\n<li>chronic abscess</li>\n<li>following breast surgery or radiation</li>\n</ul>\n<p>Other options:</p>\n<p>Option B:&nbsp;Infiltration of <strong>lactiferous</strong> <strong>duct</strong> leads to nipple <strong>retraction</strong>.</p>\n<p>Option C:&nbsp;Involvement of <strong>Cooper's ligament</strong> leads to <strong>dimpling</strong> of the skin over the breast.&nbsp;</p>\n<p>Option D: In case of spread of the tumor to the<strong> anterior chest wall,</strong> the breast will appear <strong>fixed</strong> and will <strong>not fall forwards</strong> when bending. On lifting the arm above the shoulder, the breast will not move upward.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f866203719ce43d7be6f1c2a8ed70735.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A child had a history of stab injury on the anterior abdominal wall and the image is shown below. The child is hemodynamically stable. Which will be the next course of treatment?",
    "choices": [
      {
        "id": 1,
        "text": "Emergency laparotomy"
      },
      {
        "id": 2,
        "text": "Observation"
      },
      {
        "id": 3,
        "text": "Intravenous hydration"
      },
      {
        "id": 4,
        "text": "Wait and watch"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The next course of treatment in the given scenario of a <strong>stab injury</strong> to the abdomen with the image showing <strong>evisceration of the omentum</strong> is <strong>emergency laparotomy.</strong></p>\n<p>Emergency laparotomy is performed to explore and repair abdominal injuries in case of&nbsp;</p>\n<ul>\n<li>Hemodynamic instability</li>\n<li>Peritonitis</li>\n<li><strong>Evisceration</strong></li>\n<li>Gunshot wounds</li>\n</ul>\n<p>The algorithm for management of stab wounds of the abdomen is as follows</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7f3261b23428411181affe1bd060839f.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/08a610ca86a342fcb7afd84dd7f93d65x1280x1993.JPEG"
    ]
  },
  {
    "text": "Which of the following is most likely to be seen due to rupture of a saccular aneurysm?",
    "choices": [
      {
        "id": 1,
        "text": "Subdural hemorrhage"
      },
      {
        "id": 2,
        "text": "Subarachnoid hemorrhage"
      },
      {
        "id": 3,
        "text": "Intracerebral hemorrhage"
      },
      {
        "id": 4,
        "text": "Hydrocephalus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Other options:</p>\n<p>Option A: <strong>Subdural hemorrhage</strong> or subdural hematoma occurs mainly due to <strong>rupture of the cortical bridging veins.</strong> Symptoms of raised intracranial pressure (ICP) &nbsp;such as headache, vomiting, blurring of vision, as well as focal deficits are seen.</p>\n<p>Option C: <strong>Intracerebral hemorrhages</strong> may spontaneously occur in patients with<strong> hypertension, amyloid angiopathy,</strong>&nbsp;coagulation disorders, or as a complication of <strong>ischemic stroke</strong>. Headache, raised ICP, and focal neurological deficits can be present.&nbsp;</p>\n<p>Option D: <strong>Hydrocephalus</strong> is a condition where the cerebrospinal fluid (CSF) circulation is obstructed or there is a failure to resorb thereby leading to an increase in CSF volume with enlargement of the ventricles. Symptoms of raised ICP are seen.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/36ce0ff0983241b38bc0d3cfd8ff7f39x303x345.JPEG"
    ]
  },
  {
    "text": "A patient presents with sudden-onset right leg pain. An investigation was done, and the obtained image is shown below. What is the investigation?",
    "choices": [
      {
        "id": 1,
        "text": "Digital subtraction angiography"
      },
      {
        "id": 2,
        "text": "Ultrasound Doppler"
      },
      {
        "id": 3,
        "text": "MR angiography"
      },
      {
        "id": 4,
        "text": "Plethysmography"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows a <strong>triphasic pattern</strong> of the <strong>arterial waveform,&nbsp;</strong>which is seen in the&nbsp;<strong>ultrasound doppler</strong>.&nbsp;</p>\n<p>Doppler ultrasound is used in diagnosing <strong>peripheral arterial disease</strong>. It uses a handheld doppler ultrasound probe placed at an arterial site. This transmits a continuous wave. A receiver inside the probe picks up the reflected beam.&nbsp;The change in frequency between the reflected beam and the transmitted beam gets converted to a pulsatile audio signal.</p>\n<p>A normal arterial wave has a <strong>triphasic signal</strong>. A triphasic wave has three waveforms consisting of a sharp systolic wave with a forward uprise and fall, a second wave with reverse flow occurring in diastole, and the last wave with a forward flow taking place during diastole.&nbsp;</p>\n<p>Doppler ultrasound can detect moving blood. However, it does not provide information on whether the blood flow is sufficient for the maintenance of limb viability.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A: <strong>Digital subtraction percutaneous angiography</strong>&nbsp;(DSA) is a procedure wherein a radiopaque dye is usually injected percutaneously into the femoral artery. Images obtained are digitalized and the background may be removed for a clear image. It provides information on <strong>dynamic arterial flow</strong> and can be combined with endovascular intervention if needed.&nbsp;</p>\n<p>Option C:&nbsp;<strong>Plethysmography</strong> is a semi-quantitative method to measure segmental blood flow and velocity in the carotid and peripheral vascular systems.&nbsp;</p>\n<p>Option D: <strong>Magnetic resonance angiography </strong>(MRA), or MR angiography, is an imaging modality that can be used when duplex ultrasonography cannot be done or if it cannot produce a clear image. MRA avoids ionizing radiation.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ea3a127d6c9f476682a43fb055cd98a8.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A male patient presented with a 0.3-cm nodule on the left nasolabial fold. It was excised and a pathological examination was done. The image is given below. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Basal cell carcinoma"
      },
      {
        "id": 2,
        "text": "Melanoma"
      },
      {
        "id": 3,
        "text": "Squamous cell carcinoma"
      },
      {
        "id": 4,
        "text": "Nevus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Option D: <strong>Nevus</strong> are aggregates of melanocytes at the dermis or dermo-epidermal junction. It can get transformed into <strong>malignant melanoma</strong> and the features suggestive of malignant transformation are a <strong>change </strong>in<strong> size, shape, color, thickness, satellite lesions,</strong> and<strong> tingling/ itching/serosanguinous discharge.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/688c1798c591438981355db5697e030e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/80795d83ec424e6bac66e0b4cf11b233x720x761.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/20e10a6925614bed8dc583636d1137d5x800x533.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bac49b42a632451e942fae140937d540x1280x1024.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dcf6f993722443c89245666de81247f6x1280x1131.JPEG"
    ]
  },
  {
    "text": "A 45-year-old patient complained of pain in one side of the neck. She is afraid of eating food as it worsens the pain. Ultrasound imaging of the salivary glands is done and shown below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Sialolithiasis"
      },
      {
        "id": 2,
        "text": "Foreign body"
      },
      {
        "id": 3,
        "text": "Osteoma of floor of mouth"
      },
      {
        "id": 4,
        "text": "Cervical lymphadenopathy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario of<strong> pain </strong>on one side of the neck that <strong>worsens with food</strong> and the ultrasound image showing a <strong>stone within Wharton's</strong> <strong>duct</strong> is suggestive of <strong>sialolithiasis</strong>&nbsp;(salivary gland stone).</p>\n<p>The submandibular gland has highly viscous secretions and hence forms the&nbsp;<strong>most common site</strong> for salivary gland stone formation.&nbsp;The two most common sites of stone impaction are near the<strong> punctum</strong> and the<strong> hilum </strong>of the gland where the duct bends over the mylohyoid muscle.&nbsp;</p>\n<p>The patient usually presents with <strong>acute painful swelling</strong> in the <strong>submandibular region,</strong> which is&nbsp;<strong>aggravated </strong>with<strong> food intake</strong>. Symptoms&nbsp;<strong>resolve 1-2 hours after the meal</strong> is completed. On examination, a <strong>tender</strong> and <strong>enlarged submandibular gland</strong> can be noted on bimanual examination. Pus may be seen draining from the sublingual papilla or can be&nbsp;<strong>expressed </strong>on bimanual palpation of the gland.&nbsp;</p>\n<p>Most<strong> submandibular </strong>stones are<strong> radio-opaque </strong>and visible in radiographs. Stones of size&nbsp;<strong>&lt;4 mm</strong> are removed via a <strong>dormia basket</strong> using&nbsp;endoscopic or ultrasound-guided methods under local anesthesia.&nbsp;Stones of size&nbsp;<strong>&gt;4 mm</strong> are <strong>broken</strong> first using <strong>intracorporeal or extracorporeal lithotripsy</strong> and then removed using a dormia basket.&nbsp;</p>\n<p>Submandibular gland excision is done only when minimally invasive techniques have failed or there is evidence of a salivary gland tumor.&nbsp;</p>\n<p>Nerves at risk during the removal of the submandibular gland:&nbsp;</p>\n<ul>\n<li>the marginal mandibular branch of the facial nerve&nbsp;</li>\n<li>the lingual nerve</li>\n<li>the hypoglossal nerve</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d0367b087cbb43daa932b2fcade70a59.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b3fd3068f2a04b60b2f63c093ac478cax1280x1361.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9c126114e8224313b0f0b2d7500d9a31x1280x1204.JPEG"
    ]
  },
  {
    "text": "A delayed intravenous urogram of a patient is given below. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pelviureteric junction obstruction"
      },
      {
        "id": 2,
        "text": "Putty kidney"
      },
      {
        "id": 3,
        "text": "Staghorn calculus"
      },
      {
        "id": 4,
        "text": "Cystic kidney"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>\u00a0</p>\n<p>Option D: <strong>Cystic kidney</strong> is seen in autosomal dominant polycystic kidney disease (ADPKD) due to mutation in genes PKD1 and PKD2. It is associated with hypertension. Multiple renal bilateral cysts will be seen, along with cysts in other organs as well such as the liver, pancreas, etc.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a082d0713f7043e09ddf2a7873ff66c1.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3e2359c60eb54b7e94daaac13619d7c2x346x440.GIF",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5b2ac84a06424dc49957001fddee08e7x502x449.PNG"
    ]
  },
  {
    "text": "A young male patient with a history of a motor vehicle accident is unable to pass urine. Blood is seen at the meatus. What is the most likely site of urethral injury?",
    "choices": [
      {
        "id": 1,
        "text": "Bulbar urethra"
      },
      {
        "id": 2,
        "text": "Spongy urethra"
      },
      {
        "id": 3,
        "text": "Membranous urethra"
      },
      {
        "id": 4,
        "text": "Penile urethra"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given scenario of a young patient with&nbsp;<strong>urinary retention,</strong>&nbsp;<strong>blood</strong> at the <strong>meatus,&nbsp;</strong>and<strong>&nbsp;</strong>a history of a <strong>motor vehicle accident</strong>, the most likely site of injury is the&nbsp;<strong>membranous urethra</strong>. The given retrograde urethrogram shows contrast leakage at the membranous urethra.&nbsp;</p>\n<p>Urethral injuries in men usually occur after&nbsp;<strong>catheterization</strong> or during cystoscopy. Injuries following external trauma are rare, but mainly affect the bulbar or the membranous urethra.&nbsp;</p>\n<p><strong>Membranous urethral rupture</strong>&nbsp;usually occurs following a road traffic accident, crush injury, or a fall. It is associated with <strong>pelvic fracture</strong> and<strong> extraperitoneal bladder rupture.</strong>&nbsp;Clinical features include urinary retention, blood at the meatus, and a high riding prostate on digital examination. Bruising is seen over the pubic area, scrotum, and penis.</p>\n<p>Management is by inserting a <strong>suprapubic catheter</strong>. If there is an associated <strong>bladder rupture</strong>, the bladder will not be seen on the ultrasound, and management in such a case is by <strong>exploration,</strong> <strong>repair</strong>, and placement of a <strong>suprapubic catheter.</strong></p>\n<p>Other options:</p>\n<p>Option A: <strong>Bulbar urethral injury&nbsp;</strong>occurs following a blow to the perineum with a fall astride injury during cycling or gymnasium accidents. A typical feature is a <strong>butterfly-shaped hematoma</strong> in the perineum. Other features such as urinary retention and meatal bleeding can also be present.&nbsp;Analgesia, antibiotics, and <strong>suprapubic catheterization</strong> are needed. The patient should be discouraged from passing urine. Definitive management is&nbsp;<strong>delayed urethroplasty</strong>&nbsp;after 8-12 weeks.</p>\n<p>Options B and D:<strong> Spongy </strong>and<strong> penile</strong> urethral rupture can occur following a <strong>penile fracture during coitus</strong>. <strong>Hematuria</strong>&nbsp;and <strong>difficulty in voiding</strong> can be present in <strong>spongy urethral injury. </strong>A&nbsp;<strong>pop sound</strong> followed by <strong>severe penile pain</strong> and <strong>penile deformity</strong> is characteristic of<strong> penile urethral</strong> injury. Hematoma, blood at the meatus, and voiding difficulties are also seen. &nbsp;</p>\n<p><strong>Retrograde urethrogram</strong> shows loss of smooth contour of the urethra with extravasation of the dye in case of a spongy urethral rupture.<strong> Surgical repair</strong> is needed in both.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4db798c2a59c445eaf0bdd00f3eb2e11.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A male patient presented with a midline neck swelling. He later developed cervical node enlargement. The histopathology of the lesion is shown below. Which of the following statements is false about this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Excellent prognosis is associated with this condition"
      },
      {
        "id": 2,
        "text": "It spreads quickly via lymphatics"
      },
      {
        "id": 3,
        "text": "Nuclear characteristics are used for identification"
      },
      {
        "id": 4,
        "text": "Fine needle aspiration cytology (FNAC) is not diagnostic"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given scenario of a male patient with a midline swelling, cervical lymph node enlargement, and the histopathology showing <strong>branched papillae</strong> with&nbsp;<strong>orphan Annie eye nuclei</strong>&nbsp;is suggestive of <strong>papillary thyroid carcinoma. </strong>The false statement regarding the condition is that FNAC is not diagnostic.</p>\n<p>Papillary thyroid carcinoma is the<strong> most common</strong> thyroid malignancy. It is more commonly seen in women between the ages of 30 and 50. Radiation exposure and family history of thyroid malignancies are the common etiologies. Genetic abnormalities in either the&nbsp;<strong>RET gene</strong>&nbsp;or the&nbsp;<strong>BRAF gene&nbsp;</strong>can be seen in papillary thyroid carcinoma.</p>\n<p>Clinical features include an asymptomatic thyroid<strong>&nbsp;</strong>swelling with <strong>cervical lymph node enlargement</strong>. In advanced disease, there may be features like hoarseness, dysphagia, cough, or dyspnea.&nbsp;</p>\n<p>An ultrasound scan accurately assesses the size and number of nodules, as well as categorizes the lesions as benign, indeterminate, or malignant. <strong>Fine needle aspiration cytology</strong> (FNAC) is a diagnostic test, helpful in investigating an indeterminate or malignant lesion.</p>\n<p>Histopathology shows the following features:</p>\n<ul>\n<li><strong>Branching papillae</strong></li>\n<li><strong>Orphan Annie eye nuclei</strong>:&nbsp;optically clear nuclei with fine nuclear chromatin</li>\n<li><strong>Pseudo inclusions: </strong>invaginations of the nuclear membrane</li>\n<li><strong>Psammoma bodies:</strong>&nbsp;concentric calcifications in the core of the papillae.</li>\n</ul>\n<p>Papillary thyroid carcinoma is known to <strong>spread via lymphatics</strong>, hence lymph node metastasis is commonly seen.</p>\n<p>Management is by<strong> thyroidectomy with neck dissection</strong> (central or local depending upon the site involved) followed by lifelong levothyroxine supplementation. Radioactive iodine is also useful.&nbsp;</p>\n<p>The disease has an <strong>excellent prognosis, </strong>with a high survival rate.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/665834a3b8e64e1dadb15cf054e26366.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old man who is a known case of hypertension presented with multiple episodes of hematuria and loin pain. His elder brother passed away due to stroke at the age of 40. The ultrasound abdomen is shown below. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Renal cell carcinoma"
      },
      {
        "id": 2,
        "text": "Autosomal dominant polycystic kidney disease"
      },
      {
        "id": 3,
        "text": "Tuberculosis of the kidney"
      },
      {
        "id": 4,
        "text": "Autosomal recessive polycystic kidney disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This clinical scenario with a family history of stroke and USG showing a cystic appearance of the kidney is suggestive of&nbsp;<strong>autosomal dominant polycystic kidney disease</strong>&nbsp;(<strong>ADPKD</strong>).&nbsp;</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p>ADPKD is inherited as an<strong>&nbsp;autosomal dominant</strong>&nbsp;trait with mutations in the&nbsp;<em><strong>PKD1</strong></em>(chromosome 16) and&nbsp;<em><strong>PKD2</strong></em>&nbsp;genes (chromosome 4).&nbsp;</p>\n<p>The disease does not usually manifest<strong>&nbsp;before</strong>&nbsp;<strong>30 years&nbsp;</strong>of age, and in some patients, it is never diagnosed.&nbsp;The progression of the disease is faster in males.&nbsp;</p>\n<p><strong>Hypertension&nbsp;</strong>is the most common presentation.&nbsp;<strong>Renal&nbsp;</strong>manifestations&nbsp;of ADPKD&nbsp;include:</p>\n<ul>\n<li>Flank/loin pain -&nbsp;&nbsp;either due to hemorrhage inside cysts or due to renal stones (most commonly&nbsp;<strong>uric acid stones</strong>)</li>\n<li>Irregular upper quadrant renal mass</li>\n<li>Hematuria</li>\n<li>Uremia</li>\n<li><strong>Renal failure&nbsp;</strong>(seen in 10&ndash;15% of the patients who receive hemodialysis)</li>\n</ul>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p>The most common extrarenal manifestation is&nbsp;<strong>hepatic cysts</strong>, which are&nbsp;<strong>derived from the biliary epithelium</strong>.<strong>&nbsp;</strong>Other extra-renal manifestations of ADPKD:</p>\n<ul>\n<li>Pancreatic cysts</li>\n<li>Berry aneurysms (Rupture of cerebral aneurysms is an important cause of morbidity and The prevalence of intracranial aneurysms in patients with PKD is 40%.)</li>\n<li>Colonic diverticula</li>\n<li>Abdominal hernias</li>\n<li>Mitral valve prolapse&nbsp;</li>\n</ul>\n<p>&nbsp;Screening cerebral angiography is strongly considered in all patients with PKD and a family history of cerebral aneurysm or subarachnoid hemorrhage.</p>\n</div>\n</div>\n<p><strong>Intravenous pyelography</strong>&nbsp;shows characteristic&nbsp;<strong>spider leg sign</strong>, as a result of stretched calyces due to multiple cysts. The nephrogram shows a&nbsp;<strong>swiss cheese</strong>&nbsp;appearance. On&nbsp;<strong>prenatal USG</strong>, the presence of either&nbsp;<strong>&gt; 3 cysts&nbsp;</strong>in&nbsp;<strong>unilateral kidneys</strong>&nbsp;or<strong>&nbsp;&gt; 2 cysts</strong>&nbsp;in&nbsp;<strong>each kidney</strong>&nbsp;is suggestive of PKD.&nbsp;</p>\n<p>Treatment&nbsp;includes</p>\n<ul>\n<li><strong>Surgical decompression</strong>&nbsp;is&nbsp;<strong>not</strong>&nbsp;a&nbsp;<strong>routine</strong>&nbsp;procedure performed in these patients. It may be required only in cases of very large cysts causing persistent pain and infected cysts.</li>\n<li>Analgesics</li>\n<li><strong>Increased</strong>&nbsp;<strong>fluid</strong>&nbsp;intake&nbsp;\n<ul>\n<li>Prevents renal stone formation</li>\n<li>Reduces growth of cysts by suppressing ADH release</li>\n</ul>\n</li>\n<li><strong>ACE inhibitors&nbsp;</strong>and ARBs\n<ul>\n<li>Blood pressure control&nbsp;</li>\n<li>Slowing of cyst growth</li>\n</ul>\n</li>\n<li><strong>Tolvaptan&nbsp;</strong>(V2 receptor antagonist)\n<ul>\n<li>Reduce pain and&nbsp;<strong>slow&nbsp;</strong>the<strong>&nbsp;decline&nbsp;</strong>in<strong>&nbsp;renal function</strong></li>\n</ul>\n</li>\n<li>Long-term dialysis</li>\n<li><strong>Renal transplant</strong>\n<ul>\n<li>Definitive management</li>\n<li>Pre-transplant nephrectomy may be required in patients with very large polycystic kidneys</li>\n</ul>\n</li>\n</ul>\n<p><strong>Autosomal recessive</strong>&nbsp;polycystic kidney disease (ARPKD)&nbsp;occurs secondary to a mutation of the&nbsp;<strong>PKHD1</strong>&nbsp;gene.&nbsp;The severe form manifests in-utero or during infancy; milder cases can manifest later in childhood.&nbsp;<strong>50%</strong>&nbsp;of affected&nbsp;<strong>newborns die</strong>&nbsp;in the first few days of life.&nbsp;</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p><strong>Renal cell carcinoma</strong>&nbsp;(RCC) is a relatively&nbsp;<strong>rare complication</strong>&nbsp;of ADPKD. There does not seem to be an increased frequency of RCC in these patients compared to the general population. However, when it occurs, it tends to be&nbsp;<strong>bilateral</strong>,&nbsp;<strong>multicentric,</strong>&nbsp;and of sarcomatoid type.</p>\n<p><strong>&nbsp;Tuberculosis kidney</strong>&nbsp;presents as putty kidney characterized by amorphous dystrophic calcification.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fafb92d4225c472aa0019362c29d4535.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient presents with acute-onset, severe abdominal pain. He is hemodynamically stable. A chest x-ray is shown below. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Gastric lavage"
      },
      {
        "id": 2,
        "text": "Emergency laparotomy"
      },
      {
        "id": 3,
        "text": "Ultrasound"
      },
      {
        "id": 4,
        "text": "Chest tube insertion"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Management</strong>&nbsp;of a hollow viscous perforation is mainly<strong> resuscitation, analgesics, intravenous broad-spectrum antibiotics,&nbsp;</strong>and <strong>emergency laparotomy.&nbsp;</strong>Peritonitis is managed by nutritional support, pain relief, correction of fluid loss and circulating volume, urinary catheterization with or without gastrointestinal compression, antibiotics, analgesics, and specific surgical treatment of the cause.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5a367fb1aecd4a428f383ed07f4f77ec.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/49e13902d4034734a9ab8acc297bc7e4x1279x1410.JPEG"
    ]
  },
  {
    "text": "Calculate the percentage of burns in a preschool child shown in the image below.",
    "choices": [
      {
        "id": 1,
        "text": "15-20%"
      },
      {
        "id": 2,
        "text": "25-30%"
      },
      {
        "id": 3,
        "text": "35-40%"
      },
      {
        "id": 4,
        "text": "10-15%"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Note: <strong>Wallace's rule of nines</strong> is used in estimating medium to large burns in <strong>adults</strong>. It helps in the quick estimation of the burns. In this, the total burn is calculated by dividing the body into areas of 9%. It is not accurate in children.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/25a29240670947898754cda7629638cd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a59754cd48874646bc97486456169894x1280x2300.JPEG"
    ]
  },
  {
    "text": "A 32-year-old patient who is a chronic alcoholic presents with oral ulcers and a burning sensation. A picture of the oral cavity is given below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Leukoplakia"
      },
      {
        "id": 2,
        "text": "Erythroplakia"
      },
      {
        "id": 3,
        "text": "Submucosal fibrosis"
      },
      {
        "id": 4,
        "text": "Malakoplakia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most likely diagnosis in the given scenario of a 32-year-old chronic alcoholic with oral ulcers and a burning sensation and the image showing white lesions on the oral cavity is <strong>leukoplakia.&nbsp;</strong></p>\n<p>Leukoplakia is a <strong>premalignant condition</strong> of the oral cavity characterized by <strong>whitish patches or plaques</strong> that <strong>cannot be rubbed off. &nbsp;</strong></p>\n<p>They appear as small, well-circumscribed lesions and can extensively involve a large area of the oral mucosa.</p>\n<p>Variants of leukoplakia are</p>\n<ul>\n<li><strong>Speckled leukoplakia</strong> is whitish lesions on an erythematous base. They have the highest risk of malignant transformation.&nbsp;</li>\n<li><strong>Proliferative verrucous leukoplakia</strong> is rare and has a high risk for malignant transformation.</li>\n</ul>\n<p>Management includes <strong>smoking cessation</strong> and <strong>reduction in alcohol</strong> consumption. A <strong>biopsy</strong> should be done and a photographic record of the lesion is used for follow-up.</p>\n<p>Other premalignant conditions of the oral cavity are erythroplakia and oral submucosal fibrosis.</p>\n<p><strong>Erthroplakia</strong> (option B) refers to irregular,&nbsp;<strong>reddish velvety plaques</strong> on the oral cavity. The surface may be nodular and may bleed. It has a high risk of malignant transformation. Biopsy should be done followed by surgical ablation.</p>\n<p><strong>Oral submucosal fibrosis</strong> (option C) is characterized by the formation of&nbsp;<strong>fibrous bands</strong> beneath the oral cavity. The disease is progressive and causes <strong>limitation of mouth opening</strong> and <strong>restricted tongue movements</strong>. Intralesional steroids and surgical excision of fibrous bands are recommended.&nbsp;</p>\n<p><strong>Malakoplakia </strong>(Option D) is&nbsp;a rare inflammatory condition affecting<strong> immunocompromised</strong> individuals. It mainly affects the <strong>urinary tract</strong>&nbsp;but can involve any organ system. The clinical presentation includes tender ulcerations, nodules, papules, and plaques or fungating masses with perianal and genital skin involvement.&nbsp;Systemic antibiotics and surgical excision are recommended.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a6f0ab93d310423291b90fd315c6e50b.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient presents with a tender pulsatile mass as shown in the image below. What will be done next for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Ultrasound doppler"
      },
      {
        "id": 2,
        "text": "Needle aspiration"
      },
      {
        "id": 3,
        "text": "CT angiogram with percutaneous management"
      },
      {
        "id": 4,
        "text": "Intravenous antibiotics for 7 days"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given scenario of a patient with<strong> tender pulsatile mass,</strong> and the image showing<span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;Image of an erythematous, firm, swelling at the base of the neck on the left&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:769,&quot;3&quot;:{&quot;1&quot;:0},&quot;11&quot;:4,&quot;12&quot;:0}\">&nbsp;an erythematous swelling at the base of the neck on the left side, is likely to be a<strong> vascular anomaly.&nbsp;Ultrasound Doppler</strong> should be done <strong>next</strong> in this patient.&nbsp;</span></p>\n<p>The diagnosis of vascular anomalies is done clinically and with imaging like <strong>ultrasound Doppler</strong>. <strong>MRI</strong> plays an important role in diagnosing the type and extent of the lesion.&nbsp;<strong>CT angiogram</strong> can be used to find out the feeding vessel (option C).</p>\n<p><span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;Image of an erythematous, firm, swelling at the base of the neck on the left&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:769,&quot;3&quot;:{&quot;1&quot;:0},&quot;11&quot;:4,&quot;12&quot;:0}\">Vascular anomalies include<strong>&nbsp;malformations </strong>and&nbsp;<strong>tumors.&nbsp;</strong></span><span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;Image of an erythematous, firm, swelling at the base of the neck on the left&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:769,&quot;3&quot;:{&quot;1&quot;:0},&quot;11&quot;:4,&quot;12&quot;:0}\"><strong>Vascular malformations</strong> occur as a result of developmental abnormality of an artery, vein, capillary or lymphatic system. They can be <strong>pulsatile</strong> or have a <strong>thrill</strong> when the underlying component is an<strong> artery.&nbsp;</strong></span></p>\n<p><span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;Image of an erythematous, firm, swelling at the base of the neck on the left&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:769,&quot;3&quot;:{&quot;1&quot;:0},&quot;11&quot;:4,&quot;12&quot;:0}\"><strong>Hemangiomas</strong> are the most common vascular tumors. They are seen in infants and present as bright red lesions.&nbsp;</span><span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;Image of an erythematous, firm, swelling at the base of the neck on the left&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:769,&quot;3&quot;:{&quot;1&quot;:0},&quot;11&quot;:4,&quot;12&quot;:0}\">Common sites of a hemangioma include the head and <strong>neck</strong>. </span><span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;Image of an erythematous, firm, swelling at the base of the neck on the left&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:769,&quot;3&quot;:{&quot;1&quot;:0},&quot;11&quot;:4,&quot;12&quot;:0}\">It can be of two types capillary and cavernous hemangioma.&nbsp;</span><span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;Image of an erythematous, firm, swelling at the base of the neck on the left&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:769,&quot;3&quot;:{&quot;1&quot;:0},&quot;11&quot;:4,&quot;12&quot;:0}\"><strong>Compressibility</strong> and <strong>bluish surface</strong> are some clinical features of hemangiomas.&nbsp;</span></p>\n<p>These lesions can be treated by <strong>complete resection</strong>. Debulking is done when complete resection is not possible. Sclerotherapy is mainly useful in venous malformation. Embolization can be done after surgical resection of the lesion.&nbsp;</p>\n<p>Note:&nbsp;<strong>Cirsoid aneurysm&nbsp;</strong>is a slow-growing, tortuous swelling over the <strong>scalp</strong> or <strong>face</strong>&nbsp;that develops due to<strong> abnormal arteriovenous connections</strong>&nbsp;in the scalp and extremities. They are usually <strong>congenital. </strong>However, in some cases, they may be traumatic. The <strong>superficial temporal artery</strong> is commonly involved in cirsoid aneurysms of the scalp.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4d2037d4162340b3ae6e8d4ee4ac4dd7.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient presents with carcinoma of the prostate, which has now spread to the vertebra. What is the route of spread to the lumbar vertebra?",
    "choices": [
      {
        "id": 1,
        "text": "Prostatic venous plexus"
      },
      {
        "id": 2,
        "text": "Transcoelomic spread"
      },
      {
        "id": 3,
        "text": "Inferior vesical vein"
      },
      {
        "id": 4,
        "text": "Internal iliac vein"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The route of the spread of prostate carcinoma to the lumbar vertebra is by <strong>prostatic venous plexus</strong> or <strong>Batson plexus.</strong></p>\n<p><strong>Batson venous plexus&nbsp;</strong>is a valveless vertebral venous plexus communicating with prostatic venous plexus.&nbsp;</p>\n<p>Carcinoma of the prostate metastasizes to the bone usually by the bloodstream through this Batson plexus. Long bones and the lower lumbar vertebrae are usually involved. Other routes of spread of prostate carcinoma are local spread to the seminal vesicles, bladder neck, trigone, and lymphatic spread.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p class=\"ng-binding\"><strong>Carcinoma</strong> of the <strong>prostate</strong><strong>&nbsp;</strong>is the most common malignancy in men above 65 years. The clinical features of prostate cancer are bladder outlet obstruction, pelvic pain, hematuria, arthritis, anemia, pancytopenia, and renal failure. Per rectal examination reveals a hard, nodular, irregularly indurated gland.&nbsp;</p>\n<p class=\"ng-binding\"><strong>Prostate-specific antigen</strong> (PSA) is useful in assessing the follow-up. PSA &gt;10 ng/mL is suggestive of cancer and levels &gt;35 ng/mL are diagnostic of advanced prostate cancer. The prostatic biopsy is indicated when there is a raised PSA level or suspicion of prostate cancer.</p>\n</div>\n<div class=\"ng-scope\">Localized cancer is treated by radical prostatectomy and radiation therapy, while in advanced cancer palliative and hormone ablation should be carried out.&nbsp;</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A male patient presents with impotence and bilateral resting pain. The following finding is seen in the legs. At which level has the pathology occurred?",
    "choices": [
      {
        "id": 1,
        "text": "Bilateral popliteal arteries"
      },
      {
        "id": 2,
        "text": "Bilateral internal iliac arteries"
      },
      {
        "id": 3,
        "text": "Aortoiliac bifurcation"
      },
      {
        "id": 4,
        "text": "Bilateral femoral arteries"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario of a male patient with <strong>impotence</strong>, <strong>bilateral resting pain</strong>, and the image showing a <strong>gangrenous</strong> foot with amputated toes is suggestive of <strong>Leriche's syndrome</strong> and it indicates that the level of occlusion is at the <strong>aortoiliac bifurcation.</strong></p>\n<p>Peripheral arterial diseases occur mainly due to atherosclerosis or thromboembolism.&nbsp;<strong>Lerich's syndrome </strong>is a rare condition in which&nbsp;<strong>aortoiliac obstruction&nbsp;</strong>causes <strong>impotence</strong> and <strong>claudication</strong> (crampy pain) in the thigh or buttocks.&nbsp;Other features of aortoiliac arterial occlusion include absent femoral and distal pulses and a bruit over the aortoiliac region.</p>\n<p>In general, features of chronic lower limb arterial occlusion are <strong>intermittent claudication</strong>,<strong> rest pain</strong>, ulcers, gangrene, absence of arterial pulses, bruit, and delayed capillary refilling. Rest pain occurs when limb perfusion is so severely compromised that anaerobic respiration occurs even at rest. This causes pain that increases on lying down or elevation of the foot. It reduces when the foot hangs below.</p>\n<p>Investigations that are useful include&nbsp;Doppler ultrasound, duplex scanning, ankle-brachial pressure index, and digital subtraction percutaneous angiography (DSA). Through a DSA, endovascular intervention can be performed along with obtaining information on the dynamic arterial flow.</p>\n<p>Management is by exercise, smoking cessation, control of diabetes, and weight loss if obese. Drugs such as HMG CoA reductase inhibitors and 75 mg of clopidogrel or aspirin should be given. Transluminal angioplasty and stenting are useful.</p>\n<p>Other options:</p>\n<p>Options A and D: <strong>Femoropopliteal occlusion</strong>&nbsp;can lead to <strong>claudication in the calf</strong> with a <strong>palpable femoral pulse</strong> but <strong>absent distal pulses</strong>.</p>\n<p>Option B:<strong> Iliac obstruction</strong>&nbsp;causes <strong>thigh</strong> and <strong>calf</strong> <strong>claudication</strong> with a bruit over the aortoiliac region. The femoral and distal pulses are absent.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fbd39c9d7ff74012b39f3b666ba88e9f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "An elderly male patient presented with a sudden onset of scrotal pain and discharge. Based on the image below, what is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Torsion of testis"
      },
      {
        "id": 2,
        "text": "Acute epididymo-orchitis"
      },
      {
        "id": 3,
        "text": "Scrotal carcinoma"
      },
      {
        "id": 4,
        "text": "Fournier's gangrene"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given scenario of an elderly male patient with sudden-onset scrotal pain and discharge, with the image showing a blackish discoloration of the scrotum, is likely to be <strong>Fournier's gangrene.&nbsp;</strong></p>\n<p>Fournier's gangrene is an uncommon <strong>polymicrobial infection</strong>&nbsp;involving the perineal soft tissue, external genitalia, and perianal region.&nbsp;There is subcutaneous tissue inflammation leading to obliterative arteritis and <strong>gangrene.</strong>&nbsp;It typically follows minor injuries or procedures in the perineal area, urethral dilatation, and injection for hemorrhoids are some of the etiological factors.&nbsp;</p>\n<p>Clinically, <strong>sudden scrotal pain</strong> with associated prostration, pallor, and pyrexia can be seen. Other features such as crepitus and<strong> foul-smelling</strong> <strong>exudate</strong> can be present.&nbsp;</p>\n<p><strong>Emergency surgical debridement</strong> is needed after initial measures like <strong>fluid resuscitation</strong> and <strong>broad-spectrum intravenous antibiotics </strong>are undertaken. Urinary diversion and other supportive measures are useful in the management of the condition.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A: <strong>Torsion of testis </strong>is a surgical emergency typically seen in the age group of&nbsp;<strong>10-25</strong>&nbsp;years. It is characterized by <strong>sudden groin </strong>and<strong> lower abdominal pain,&nbsp;</strong>nausea, and vomiting<strong>.</strong>&nbsp;Examination <strong>findings</strong> reveal a swollen, tender scrotum and testis with a twisted tender cord above it and loss of cremasteric reflex.&nbsp;</p>\n<p>Option B: <strong>Acute epididymo-orchitis</strong> is an infection of the epididymis and testis. It is seen in <strong>sexually-active young men.</strong>&nbsp;In&nbsp;<strong>older men, </strong>it is seen following a urinary tract infection, secondary to an indwelling catheter. The <strong>features</strong> include groin ache, fever, swollen and painful epididymis and testis.</p>\n<p>Option C: <strong>Scrotal carcinoma</strong> is a rare carcinoma that is seen in workers exposed to oil, coal products, and aromatic hydrocarbons. It starts as a <strong>wart or ulcer</strong> in the <strong>scrotum</strong> and can extend to the testis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2fc0f1317b0441f3a0d31464349cab0c.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the fluid shown below.",
    "choices": [
      {
        "id": 1,
        "text": "Haemaccel"
      },
      {
        "id": 2,
        "text": "Ringer lactate"
      },
      {
        "id": 3,
        "text": "Isolyte P"
      },
      {
        "id": 4,
        "text": "Isolyte M"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The fluid shown in the image is <strong>ringer lactate </strong>or&nbsp;<strong>Hartmann's solution.</strong></p>\n<p>Ringer lactate, or Hartmann's solution, is a crystalloid made up of&nbsp;<strong>sodium 131 mEq, chloride 112 mEq, potassium 5 mEq, bicarbonate </strong>(as lactate)<strong> 29 mEq</strong>, and <strong>2 mEq of calcium</strong>. It is devoid of glucose.</p>\n<p>It is useful in the following conditions:&nbsp;</p>\n<ul>\n<li>Correction of severe hypovolemia</li>\n<li>Metabolic acidosis</li>\n<li>Postoperative period, burns, diarrhea</li>\n<li>Correction of hypokalemia</li>\n<li>Diabetic ketoacidosis.</li>\n</ul>\n<p>It should be avoided in severe shock, liver diseases, vomiting, nasogastric aspiration, and metabolic alkalosis. It cannot be used along with blood transfusion since calcium in the ringer lactate can bind with citrate in the transfused blood leading to clot formation.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A: <strong>Haemaccel</strong> is a <strong>colloid</strong> and contains 145 mmol of sodium, 6.25 mmol of calcium, and 5.1 mmol of potassium. It is mainly used for rapid volume replacement in circulatory shock, burns, and trauma. These release histamine and hence, H2 blocker has to be supplemented. It is also used in heart-lung machines.</p>\n<p>Options C and D: <strong>Isolyte P</strong> and<strong> Isolyte M</strong> are<strong> crystalloids</strong>.<strong>&nbsp;</strong>Isolyte P is commonly used in fluid therapy for pediatrics<strong>.</strong> One liter contains 50 grams of glucose, 25 mEq of sodium, 22 mEq of potassium, 3 mEq of magnesium, and 23 mEq of acetate. Hyponatremia, renal failure, hyperkalemia, and hypovolemic shock are some of the contraindications.<br /><br />Isolyte M is used for <strong>maintenance. </strong>It mainly contains 50 grams of glucose, 40 mEq sodium, 38 mEq chloride, 35 mEq potassium, 15 mEq phosphate, and 20 mEq acetate. It is useful in correcting hypokalemia in patients with good renal function, and acidosis. It is contraindicated in hyponatremia.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1f856bc80d264b0c98541855fcbe7743.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The image below shows a pressure sore. Which stage does this belong to ?",
    "choices": [
      {
        "id": 1,
        "text": "Stage 1"
      },
      {
        "id": 2,
        "text": "Stage 2"
      },
      {
        "id": 3,
        "text": "Stage 3"
      },
      {
        "id": 4,
        "text": "Stage 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image shows a <strong>pressure sore</strong>&nbsp;with <strong>extensive tissue destruction</strong>, including damage to the <strong>muscle</strong> layer and thus it belongs to&nbsp;<strong>stage 4.</strong></p>\n<p><strong>Pressure sores</strong>&nbsp;also referred known as bed sores, pressure ulcers and decubitus ulcers are ulcers that occur due to prolonged pressure on certain sites thereby leading to tissue necrosis.&nbsp;The commonest sites involved are <strong>ischium</strong>, greater trochanter, sacrum, heel, malleolus (lateral &gt;medial), and occiput. Paraplegic patients, elderly patients, and severely ill patients are at a higher risk of developing pressure sores.</p>\n<p>They are staged as:</p>\n<ul>\n<li><strong>Stage 1</strong> - Erythema with no blanching and no breach in the epidermis.</li>\n<li><strong>Stage 2</strong>- Partial-thickness skin loss with epidermal and dermal involvement.</li>\n<li><strong>Stage 3</strong>- Full-thickness skin loss with intact fascia but the involvement of the subcutaneous tissue.</li>\n<li><strong>Stage 4</strong>- <strong>Full-thickness skin loss</strong> extending to the fascia with <strong>massive tissue destruction</strong> and<strong> involvement </strong>of <strong>muscle</strong>, bone, tendon, or joint.&nbsp;</li>\n</ul>\n<p>Management is primarily proper skin care with pressure dispersion cushions, air-fluidized beds, and urinary or fecal diversion if required. Patients who are bed-bound should be turned once in 2 hours. Those in a wheelchair should lift themselves off the seat for 10 seconds every 10 minutes.</p>\n<p><strong>Surgery</strong> is the last resort and is done after a proper initial <strong>debridement</strong> and <strong>vacuum-assisted closure. </strong>Vacuum-assisted closure is a wound closure technique<strong>&nbsp;</strong>in which negative pressure is applied to the wound which leads to a decrease in edema. This hastens the debridement and formation of granulation tissue. Skin flaps with a muscle are also used for closure.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/117eb3e779bd4df1b3dddeaf427439cf.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the most common site of an intra-abdominal abscess.",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>&nbsp;</p>\n<p>An <strong>intra-abdominal abscess</strong> is a localized collection of infected fluid within the abdominal cavity due to failure of the host's intra-abdominal defense mechanisms. Patients usually present with <strong>acute abdominal pain, fever, rigors, tachycardia, tachypnea</strong>, and<strong> leukocytosis</strong>. Other features such as nausea, anorexia, emesis, constipation, and diarrhea can occur.</p>\n<p><strong>CT scan with IV contrast</strong> is the imaging method of choice for an intra-abdominal abscess. Ultrasonography can also be useful.</p>\n<p>Initial management is by early<strong> intravenous antibiotic therapy, drainage of the abscess, and fluid resuscitation</strong> with crystalloids. Vasopressors, inotropes, and packed red blood cell transfusion are given when needed.</p>\n<p>Other measures include ultrasound or CT-guided percutaneous drainage (non-surgical) and operative drainage. Resection and debridement can also be done. It can be done through a minimally invasive technique or laparotomy.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fcd0340198df42f19194eac3c2c5466a.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8a06d58bf48844608a03d99182f2f454x1280x1792.JPEG"
    ]
  },
  {
    "text": "A man came with complaints of recurrent discharge and pain due to lesions around the anus for 3 years. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pilonidal sinus"
      },
      {
        "id": 2,
        "text": "Carbuncle"
      },
      {
        "id": 3,
        "text": "Boil"
      },
      {
        "id": 4,
        "text": "Fistula in ano"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<div class=\"ng-star-inserted\">\n<div class=\"table-responsive font-weight-light answer-scroll ng-star-inserted\">\n<p>&nbsp;</p>\n<p>The investigations done for fistula-in-ano can include a fistulogram, endoanal ultrasound with hydrogen peroxide,&nbsp;MRI, and computed tomography (CT) scan.&nbsp;An&nbsp;<strong>MRI</strong>&nbsp;is the <strong>gold standard</strong> investigation for fistula imaging. It helps us to identify the secondary extensions of the track, which when missed may cause persistence of the fistula.&nbsp;</p>\n</div>\n</div>\n<div class=\"ng-star-inserted\">\n<div class=\"table-responsive font-weight-light answer-scroll ng-star-inserted\">\n<p>Surgical management includes fistulotomy, fistulectomy, ligation of the intersphincteric fistula tract (LIFT), setons, or advancement flaps.</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a80f4dfefec14914944f45c3e9958160.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fe4ca95939104307a4b92d21dcacde75x1280x1602.JPEG"
    ]
  },
  {
    "text": "According to triage, which of the following categories of patients comes under green?",
    "choices": [
      {
        "id": 1,
        "text": "Ambulatory patients"
      },
      {
        "id": 2,
        "text": "Medium risk patients"
      },
      {
        "id": 3,
        "text": "High risk patients"
      },
      {
        "id": 4,
        "text": "Dead patients"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Ambulatory patients</strong>\u00a0that are stable are likely to survive even if treatment is delayed. Their medical need is not urgent and they come\u00a0under<strong> green</strong>\u00a0according to <strong>triage.\u00a0</strong></p>\n<p>Triage is a method employed to identify the patients in whom treatment at the earliest produces the maximum benefit to the patient. It is used in the management of mass casualties.\u00a0</p>\n<p>Triage categories are based on the <strong>vital signs, patient's ability to walk, mental status,</strong> and presence or absence of <strong>ventilation/capillary perfusion. </strong>It is\u00a0as follows:</p>\n<table style=\"width: 381.3125px; height: 208px;\">\n<tbody>\n<tr>\n<td style=\"width: 72px;\"><strong>Priority</strong></td>\n<td style=\"width: 127px;\"><strong>Color</strong></td>\n<td style=\"width: 96px;\"><strong>Medical need</strong></td>\n<td style=\"width: 163.3125px;\"><strong>Clinical status</strong></td>\n</tr>\n<tr>\n<td style=\"width: 72px;\">First</td>\n<td style=\"width: 127px;\">Red</td>\n<td style=\"width: 96px;\">Immediate</td>\n<td style=\"width: 163.3125px;\">Critical but can survive with early treatment</td>\n</tr>\n<tr>\n<td style=\"width: 72px;\">Second\u00a0</td>\n<td style=\"width: 127px;\">Yellow</td>\n<td style=\"width: 96px;\">Urgent</td>\n<td style=\"width: 163.3125px;\">Critical but can survive when treatment is given within hours</td>\n</tr>\n<tr>\n<td style=\"width: 72px;\">Third</td>\n<td style=\"width: 127px;\"><strong>Green\u00a0</strong></td>\n<td style=\"width: 96px;\"><strong>Non-urgent</strong></td>\n<td style=\"width: 163.3125px;\">Patients are <strong>stable </strong>and can<strong> survive</strong> with<strong> delayed treatment</strong></td>\n</tr>\n<tr>\n<td style=\"width: 72px;\">Last\u00a0</td>\n<td style=\"width: 127px;\">Black\u00a0</td>\n<td style=\"width: 96px;\">Unsalvageable\u00a0</td>\n<td style=\"width: 163.3125px;\">Not breathing, no pulse, severely injured and medical care is unlikely to help.</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '236 Surgery Neet 2022';
        let hierarchy = ["Marrow", "PYQs", "Surgery"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>