<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Test 7 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2021-22
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "What is the range of value of Bispectral index (BIS) for a patient who is under general anesthesia?",
    "choices": [
      {
        "id": 1,
        "text": "20-40"
      },
      {
        "id": 2,
        "text": "40-60"
      },
      {
        "id": 3,
        "text": "60-80"
      },
      {
        "id": 4,
        "text": "80-100"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The Bispectral index value range of <strong>40-60</strong> is seen in a patient under <strong>general anesthesia</strong>.\u00a0</p>\n<p>The bispectral index (BIS) is an empirically derived scale that helps to <strong>monitor </strong>the<strong> depth of anesthesia</strong> and <strong>prevent intraoperative awareness</strong>. It processes the EEG and provides an index value between <strong>0 </strong>to<strong> 100</strong> that indicates the patient\u2019s level of consciousness.</p>\n<p>Bispectral index value range:\u00a0</p>\n<ul>\n<li><strong>100</strong> - <strong>Awake </strong>and<strong> response</strong> to normal voice present</li>\n<li>80 - Light/moderate sedation (May respond to loud commands or mild prodding/shaking)</li>\n<li><strong>60</strong> - <strong>General anesthesia</strong> (Low probability of explicit recall, Unresponsive to verbal stimulus)</li>\n<li>40 - Deep hypnotic state</li>\n<li>20 - Burst suppression</li>\n<li><strong>0 </strong>- <strong>Flatline\u00a0</strong><strong>EEG</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A newborn presents with bilious vomiting and bloody stools a few days after birth. An upper GI contrast study revealed midgut volvulus due to intestinal malrotation. The image below is a diagrammatic representation of the findings of the contrast study. Identify the defective mechanism.",
    "choices": [
      {
        "id": 1,
        "text": "1st rotation clockwise only"
      },
      {
        "id": 2,
        "text": "1st rotation anti-clockwise only"
      },
      {
        "id": 3,
        "text": "3rd rotation absent"
      },
      {
        "id": 4,
        "text": "2nd rotation absent"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given diagram shows the&nbsp;<strong>transverse colon </strong>lying&nbsp;<strong>behind</strong>&nbsp;the <strong>superior</strong> <strong>mesenteric</strong> <strong>artery</strong> and the&nbsp;<strong>duodenum</strong>, indicating&nbsp;<strong>reversed rotation</strong> of the midgut loop. Only the <strong>1<sup>st</sup></strong> <strong>rotation</strong> <strong>occurring</strong>&nbsp;in a <strong>clockwise</strong> direction (instead of the normal anticlockwise) is the <strong>defective</strong> <strong>mechanism</strong>.</p>\n<p>Midgut rotation: The mechanism of midgut rotation is given and represented in the image below.&nbsp;</p>\n<p>The midgut, once formed, lies outside the abdominal cavity and has to rotate and enter the abdominal cavity. When <strong>viewed ventrally</strong>, this rotation occurs for <strong>270&deg;&nbsp;</strong>in an<strong> anti-clockwise direction</strong> with the <strong>axis</strong> formed by the <strong>superior mesenteric artery</strong>. The artery divides the intestinal loop into a <strong>pre-arterial</strong> and <strong>post-arterial segment</strong>.</p>\n<p>The total rotation can be divided into <strong>three stages </strong>of<strong> 90&deg; each</strong>:</p>\n<p><strong>Stage 1/1st rotation</strong>&nbsp;- Initially, the loop lies in the <strong>sagittal</strong> <strong>plane</strong>, the pre-arterial segment cranial, and the post-arterial segment caudal. The <strong>first&nbsp;90&deg;</strong>&nbsp;<strong>anticlockwise</strong> rotation results in the <strong>pre-arterial</strong> segment lying on the <strong>right</strong> and the <strong>post-arterial</strong> segment lying on the <strong>left</strong> of the axis.</p>\n<p><strong>Stage 2/2nd rotation</strong>&nbsp;- The pre-arterial segment undergoes lengthening to form coils of the jejunum and ileum. The <strong>second&nbsp;90&deg;</strong>&nbsp;anticlockwise rotation results in the coils of the jejunum and ileum lying behind the&nbsp;superior mesenteric artery and occupying the posterior left half of the abdominal cavity. As a result, the <strong>duodenum </strong>also<strong> lies behind the artery</strong>.</p>\n<p><strong>Stage 3/3rd rotation</strong> - &nbsp;In this stage, the post-arterial segment enters the abdominal cavity with the last&nbsp;90&deg; anticlockwise rotation, resulting in the <strong>transverse colon lying </strong>in<strong> front </strong>of the<strong>&nbsp;superior mesenteric artery</strong>&nbsp;and the <strong>cecum</strong> lying on the <strong>right</strong> in the abdominal cavity, just below the liver. The cecum gradually descends to its final location in the right iliac fossa.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4e90a234c87844afb03364eb0b37b132.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/26ca209616624b328f0fed043cd7ffeex1200x2541.JPEG"
    ]
  },
  {
    "text": "A 32-year-old woman is diagnosed with epilepsy and is started on phenytoin for management. She presented to the emergency with abdominal pain, dysuria, and hypertension. She was confused and disoriented. A provisional diagnosis of acute intermittent porphyria was made. Which of the following is false about this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Autosomal dominant inheritance"
      },
      {
        "id": 2,
        "text": "Blistering skin lesions are characteristic"
      },
      {
        "id": 3,
        "text": "Precipitated by fasting"
      },
      {
        "id": 4,
        "text": "ALA and PBG increased in urine and plasma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Blistering skin lesions\u00a0are\u00a0not\u00a0seen in acute intermittent porphyria. They are characteristic features of <strong>porphyria cutanea tarda (PCT)</strong>.<strong>\u00a0</strong></p>\n<p><strong>Acute intermittent porphyria\u00a0</strong>(AIP) is a <strong>hepatic porphyria</strong> inherited in an <strong>autosomal dominant</strong> pattern. It occurs due to a\u00a0<strong>deficiency</strong> of <strong>HMB-synthase/uroporphyrinogen I synthase enzyme</strong> in heme synthesis. AIP is generally latent before puberty and is\u00a0<strong>more common</strong>\u00a0in <strong>women</strong>.\u00a0</p>\n<p><strong>Reduced carbohydrate intake</strong> during <strong>fasting</strong> or<strong> illness</strong> can <strong>precipitate acute attacks</strong> of AIP. This occurs due to the <strong>upregulation of ALA synthase</strong> 1 (ALAS1) by hepatic peroxisome proliferator-activated receptor \u03b3 coactivator 1\u03b1 (PGC-1\u03b1), thus increasing heme biosynthesis. Attacks can also be provoked by <strong>infections, surgery,\u00a0</strong>and<strong> ethanol</strong>. A large number of <strong>drugs</strong> are classically known to <strong>precipitate AIP</strong>.</p>\n<p>AIP presents with <strong>neurovisceral symptoms</strong> and <strong>no cutaneous manifestations</strong> are seen. The clinical features of AIP include:</p>\n<div class=\"page\" title=\"Page 3036\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li><strong>Abdominal pain</strong> is the<strong> most common</strong> symptom.</li>\n<li>Nausea and vomiting.</li>\n<li>Tachycardia, restlessness, tremors, and excess sweating are due to <strong>sympathetic overactivity</strong></li>\n<li><strong>Psychiatric symptoms\u00a0</strong>like\u00a0anxiety, insomnia, depression, disorientation, hallucinations, and paranoia can occur in acute attacks.</li>\n<li>Seizures</li>\n<li><strong>Proximal muscle weakness</strong> and sensory loss</li>\n<li><strong>Dysuria</strong> and urinary retention</li>\n<li>Persistant hypertension</li>\n</ul>\n<p>Diagnosis can be made with the appearance of classic symptomology after exposure to an underlying precipitating factor. Plasma and urine<strong> ALA and PBG</strong> levels are <strong>significantly raised</strong> during an acute attack and remain high even after symptoms resolve.</p>\n<p>Management of AIP:</p>\n<ul>\n<li><strong>Intravenous hematin </strong>as<strong> first-line </strong>treatment</li>\n<li>Narcotic analgesia for abdominal pain</li>\n<li>Phenothiazine for nausea, vomiting, restlessness, and anxiety</li>\n<li><strong>Carbohydrate loading</strong> with intravenous glucose</li>\n<li>Removal of precipitating factors</li>\n<li><strong>Orthoptic liver transplant</strong> is <strong>curative</strong> in patients refractory to hemin therapy.</li>\n</ul>\n<p><strong>Blistering skin lesions</strong> are\u00a0<strong>characteristic</strong> features of\u00a0<strong>porphyria cutanea tarda\u00a0</strong>(PCT). PCT is a <strong>cutaneous porphyria</strong> caused due to deficient <strong>uroporphyrinogen decarboxylase</strong> enzyme. It predominantly presents with <strong>cutaneous features</strong> like blisters, milia, hypertrichosis, and hyperpigmentation over <strong>sun-exposed areas</strong>. <strong>Neurologic </strong>features are<strong> absent</strong>.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As the medical officer of a factory, you advise installing a water purification system to treat polluted water which is a by-product of the manufacturing process. The method of water purification is chosen and the blueprint is as shown below. Which of the following is true about this method of purification?",
    "choices": [
      {
        "id": 1,
        "text": "Removal of bacteria ranges from 99.9 - 99.99 %"
      },
      {
        "id": 2,
        "text": "Loss of head allowed is 2-2.5 metres"
      },
      {
        "id": 3,
        "text": "Highly skilled labor is required to operate the filter"
      },
      {
        "id": 4,
        "text": "Preliminary treatment involves chemical coagulation and sedimentation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The blueprint depicts a picture of a\u00a0<strong>slow sand filter</strong>\u00a0where bacteria are cleared more effectively than rapid filters up to <strong>99.9-99.99%</strong>. Rapid filters clear bacteria up to 98-99%</p>\n<p><strong class=\"ng-binding\">Slow Sand Filters:</strong></p>\n<p>These are also called\u00a0<strong>biological filters</strong>. They are accepted as the\u00a0<strong>standard </strong>method of<strong> large-scale</strong> water purification. The\u00a0<strong>Venturi meter</strong>\u00a0measures the\u00a0bed resistance\u00a0or the\u00a0<strong>loss of head.</strong></p>\n<p><strong class=\"ng-binding\">Rapid Sand Filters:</strong></p>\n<div class=\"panel-body ng-scope\">\n<div class=\"panel-body ng-scope\">\n<p>They are also called\u00a0<strong>mechanical filters</strong>\u00a0and are another method of\u00a0<strong>large-scale purification of water.\u00a0</strong>Two types of rapid sand filters are\u00a0<strong>gravity type\u00a0</strong>(e.g. Paterson\u2019s filter) and\u00a0<strong>pressure type</strong>\u00a0(e.g. Candy\u2019s filter).</p>\n<p>Steps in the purification of water by rapid sand filters are:</p>\n<ul>\n<li><strong>Coagulation</strong>\u00a0\u2013 Raw water is first treated with a\u00a0<strong>chemical</strong> <strong>coagulant </strong>like<strong> alum</strong>, the dose of which varies from 5 to 40 mg or more per liter\u00a0depending upon color, turbidity, temperature, and pH value of the water.</li>\n<li><strong>Rapid mixing</strong>\u00a0\u2013 The treated water then undergoes\u00a0<strong>violent agitation</strong>\u00a0in a\u00a0mixing chamber\u00a0which allows\u00a0<strong>complete dissemination of alum</strong>\u00a0throughout the bulk of the water.</li>\n<li><strong>Flocculation</strong>\u00a0\u2013\u00a0<strong>Slow and gentle mixing</strong>\u00a0of water in a\u00a0<strong>flocculation chamber</strong>\u00a0is done for\u00a0<strong>30 minutes</strong>. Usually, a\u00a0mechanical type of flocculator\u00a0is used which has paddles that rotate at 2 to 4 RPM (rotations per minute) with the help of a motor. This results in a\u00a0<strong>thick, copious flocculate of aluminum hydroxide</strong>.</li>\n<li><strong>Sedimentation</strong>\u00a0\u2013 The coagulated water is moved into\u00a0<strong>sedimentation tanks</strong>\u00a0where detaining it for 2 \u2013 6 hours will result in the\u00a0<strong>settling down </strong>of the flocculant along with impurities and bacteria. This is to be removed before the filtration takes place.\u00a0</li>\n<li><strong>Filtration</strong>\u00a0\u2013 The partly purified water is then subjected to rapid sand filtration.\n<ul>\n<li><strong>Filter beds</strong>: Each unit of the filter bed has a surface of about 80 to 90 m<sup>2</sup>. The\u00a0effective size\u00a0of the sand particles/grains is about\u00a00.4 to 0.7 mm. The depth of the sand bed is about 1 meter and has graded gravel below it.</li>\n<li>As the filtration is done, the alum-floc which has not precipitated is held back by the sand bed. This forms a layer that adsorbs bacteria and other impurities. When the\u00a0<strong>loss of head</strong>\u00a0in a rapid sand filter approaches\u00a0<strong>7 \u2013 8 feet</strong>, the\u00a0<strong>filter needs to be cleaned</strong>\u00a0by a process known as\u00a0<strong>backwashing</strong>.</li>\n</ul>\n</li>\n</ul>\n<p>Comparison between rapid and slow sand filters:\u00a0</p>\n<table style=\"height: 240px; width: 708px;\">\n<tbody>\n<tr>\n<td style=\"width: 193px; text-align: center;\">Property</td>\n<td style=\"width: 254.781px; text-align: center;\">Rapid sand filter</td>\n<td style=\"width: 235.219px; text-align: center;\">Slow sand filter</td>\n</tr>\n<tr>\n<td style=\"width: 193px;\">Space</td>\n<td style=\"width: 254.781px; text-align: center;\">Less space</td>\n<td style=\"width: 235.219px; text-align: center;\">Large area</td>\n</tr>\n<tr>\n<td style=\"width: 193px;\">Rate of filtration</td>\n<td style=\"width: 254.781px; text-align: center;\">200m.g.a.d</td>\n<td style=\"width: 235.219px; text-align: center;\">2-3m.g.a.d</td>\n</tr>\n<tr>\n<td style=\"width: 193px;\">Effective size of sand</td>\n<td style=\"width: 254.781px; text-align: center;\">0.4-0.7mm</td>\n<td style=\"width: 235.219px; text-align: center;\">0.2-0.3mm</td>\n</tr>\n<tr>\n<td style=\"width: 193px;\">Preliminary treatment</td>\n<td style=\"width: 254.781px; text-align: center;\"><strong>Chemical coagulation and sedimentation</strong></td>\n<td style=\"width: 235.219px; text-align: center;\"><strong>Plain sedimentation</strong>\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 193px;\">Washing</td>\n<td style=\"width: 254.781px; text-align: center;\">Backwashing</td>\n<td style=\"width: 235.219px; text-align: center;\">Scraping the sand bed</td>\n</tr>\n<tr>\n<td style=\"width: 193px;\">Operation</td>\n<td style=\"width: 254.781px; text-align: center;\"><strong>Highly skilled</strong></td>\n<td style=\"width: 235.219px; text-align: center;\"><strong>Less skilled</strong></td>\n</tr>\n<tr>\n<td style=\"width: 193px;\">Loss of head</td>\n<td style=\"width: 254.781px; text-align: center;\"><strong>2-2.5m / 6-8feet</strong></td>\n<td style=\"width: 235.219px; text-align: center;\"><strong>1.5m / 4feet</strong></td>\n</tr>\n<tr>\n<td style=\"width: 193px;\">Removal of turbidity</td>\n<td style=\"width: 254.781px; text-align: center;\">Good</td>\n<td style=\"width: 235.219px; text-align: center;\">Good</td>\n</tr>\n<tr>\n<td style=\"width: 193px;\">Removal of color</td>\n<td style=\"width: 254.781px; text-align: center;\">Good</td>\n<td style=\"width: 235.219px; text-align: center;\">Fair\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 193px;\">Removal of bacteria</td>\n<td style=\"width: 254.781px; text-align: center;\"><strong>98-99%</strong></td>\n<td style=\"width: 235.219px; text-align: center;\"><strong>99.9-99.99%\u00a0</strong></td>\n</tr>\n</tbody>\n</table>\n<p><br />The blueprint given below depicts rapid sand filtration</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fb0d6e67d0c248e5bd7e2bd161308d5c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fd41120bdb9d4776b66c9b4d4009de4ex1280x959.JPEG"
    ]
  },
  {
    "text": "Which is the incorrect statement regarding the condition shown in the image?",
    "choices": [
      {
        "id": 1,
        "text": "Inframammary area  and intermammary folds may be involved"
      },
      {
        "id": 2,
        "text": "TNF alpha inhibitors can be used in treatment"
      },
      {
        "id": 3,
        "text": "Obesity and smoking are associated with it"
      },
      {
        "id": 4,
        "text": "Surgery cannot be done for this condition."
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image shows <strong>hidradenitis supurativa </strong>or&nbsp;<strong>inverse acne</strong>. Surgical excision is the <strong>best treatment</strong> that offers a cure.</p>\n<p>Hidradenitis suppurativa is a chronic, inflammatory, recurrent, debilitating, follicular disease that usually presents after puberty.</p>\n<p>There are <strong>painful, deep\u2010seated inflamed</strong> lesions in the <strong>apocrine</strong> <strong>gland</strong>\u2010bearing areas of the body, most commonly the<strong> axillary</strong>, inguinal, and anogenital regions.</p>\n<p>This definition is based on the San Francisco modification of the Dessau criteria.</p>\n<p>The following three criteria must be met for the diagnosis to be made:</p>\n<ol>\n<li><strong>Typical lesions - </strong>deep\u2010seated, painful nodules or &lsquo;blind boils&rsquo;; abscesses, <strong>draining sinuses</strong>, <strong>bridged scars,</strong> and paired or multiheaded open pseudocomedones in secondary lesions.</li>\n<li><strong>Typical topography -&nbsp;</strong>axillae, groin, perineal and perianal region, buttocks and infra\u2010 and intermammary folds.</li>\n<li><strong>Chronicity</strong> and<strong> recurrence</strong> of lesions.&nbsp;</li>\n</ol>\n<p>More common in young women of ages 20-29 years.<strong> Obesity</strong> and<strong> smoking</strong> are the two main factors associated with hidradenitis suppurativa.</p>\n<p>Treatment includes:&nbsp;</p>\n<ul>\n<li>Antibiotics - tetracycline, clindamycin</li>\n<li>Intralesional corticosteroids</li>\n<li>Immunosuppressants</li>\n<li>Acitretin</li>\n<li>Anti-TNF alpha therapy</li>\n<li>Surgery</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ce86981a809b406e8f7049c5fa03d8f3.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 52-year-old female patient presents with unilateral tinnitus and progressive hearing loss at higher tones. She also classically complains of difficulty in understanding speech and inability to feel her contact lenses. Audiometric tests were done as follows. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Presbycusis"
      },
      {
        "id": 2,
        "text": "Meniere's disease"
      },
      {
        "id": 3,
        "text": "Noise induced hearing loss"
      },
      {
        "id": 4,
        "text": "Vestibular schwannoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario, along with the interpretation of audiometric tests, is suggestive of the diagnosis as <strong>Vestibular schwannoma</strong>.</p>\n<p>Vestibular schwannoma is a <strong>benign tumour</strong> arising from the vestibular nerve due to the abnormal proliferation of Schwann cells. <strong>Bilateral vestibular schwannoma </strong>is seen in<strong> neurofibromatosis type 2. </strong>It is common in <strong>both sexes</strong> between <strong>40-60</strong> years of age. It usually presents with <strong>unilateral tinnitus </strong>and<strong> progressive retro-cochlear sensorineural hearing loss</strong> at <strong>higher tones </strong>with<strong> poor speech discrimination.</strong>\u00a0</p>\n<p>Tumour growth presents with <strong>corneal </strong>and<strong> facial hypesthesia </strong>(inability to feel the contact lens in the given case)\u00a0due to the involvement of the <strong>trigeminal nerve</strong>. Involvement of the <strong>facial nerve</strong> presents as hypoaesthesia of the posterior meatal wall, known as the <strong>Hitzelbergers sign</strong> and <strong>defective taste </strong>and<strong> lacrimation</strong>. Involvement of <strong>lower cranial nerves</strong> presents as dysphagia, aspiration, voice change, and regurgitation. Rarely cerebellar symptoms may also be seen.</p>\n<ul>\n<li>Pure tone audiometry reveals <strong>sensorineural hearing loss</strong>, particularly in high frequencies.</li>\n<li>Speech audiometry shows the <strong>roll-over phenomenon</strong>.</li>\n<li>The <strong>absence</strong> of the <strong>recruitment phenomenon</strong> is noted.</li>\n<li><strong>Short Increment Sensitivity Index (SISI)</strong> ranges from 0-20%.</li>\n<li><strong>Brainstem Evoked Response Audiometry (BERA)</strong> demonstrates a significant delay of &gt;0.2 ms in wave V between the two ears.</li>\n<li>Magnetic Resonance Imaging (MRI) with <strong>gadolinium contrast</strong> is considered the <strong>gold standard</strong> for diagnosis.</li>\n</ul>\n<p><strong>Surgical removal</strong> by X-knife, Gamma knife, or Cyberknife is the <strong>treatment of choice</strong>. <strong>Radiotherapy has no role</strong>.\u00a0</p>\n<p>Other options:</p>\n<p>Option A - <strong>Presbycusis</strong> is the <strong>physiological</strong> hearing loss due to <strong>old age</strong> and usually manifests at <strong>65 years</strong> of age. Presbycusis occurs due to sensory, neural, metabolic, and conductive pathologies and presents <strong>predominantly cochlear </strong>hearing loss patterns. <strong>High-frequency hearing loss</strong> with <strong>tinnitus</strong>\u00a0are the presenting complaints with <strong>positive</strong> <strong>recruitment</strong> phenomenon. Additional features of corneal hypesthesia are absent.\u00a0</p>\n<p>Option B - <strong>Meniere's</strong> <strong>disease,</strong> also known as endolymphatic hydrops, occurs due to overdistension of the inner ear with endolymph. It is <strong>more</strong> <strong>common</strong> in <strong>males</strong> than females. It may be unilateral or bilateral. <strong>Cardinal</strong> <strong>features</strong> are:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Episodic vertigo</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Fluctuating</strong> <strong>hearing</strong> <strong>loss</strong> of <strong>cochlear</strong> type</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Tinnitus</strong>\u00a0\u00a0</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Sense of <strong>fullness</strong> or pressure in the involved ear.</li>\n</ul>\n<p>Option C - <strong>Noise-induced hearing loss</strong>(NIHL) is a preventable cause of hearing loss and is an occupational hazard. NIHL causes damage to <strong>outer</strong> <strong>hair</strong> cells more than the inner hair cells, starting in the basal turn of the <strong>cochlea</strong>. There is <strong>symmetrical</strong> <strong>hearing</strong> <strong>loss</strong>\u00a0and shows a cochlear pattern on audiometric tests. The audiogram in NIHL shows a typical <strong>notch</strong>\u00a0at <strong>4000</strong> <strong>Hz</strong>, both for air and bone conduction. <strong>Speech frequencies are also affected.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A snake catcher presents with headache, vomiting, difficulty in opening his mouth, and body ache. He is profusely sweating and there is generalized stiffness and tenderness of muscles. An image of the collected urine specimen is shown below. A bite from which of the following snakes is likely to be responsible for his symptoms?",
    "choices": [
      {
        "id": 1,
        "text": "Common krait"
      },
      {
        "id": 2,
        "text": "Sea krait"
      },
      {
        "id": 3,
        "text": "Saw scaled viper"
      },
      {
        "id": 4,
        "text": "Pit viper"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario and the image showing&nbsp;<strong>dark brown </strong>or tea-colored<strong> urine&nbsp;</strong>are suggestive of a <strong>bite</strong> by a <strong>sea krait.</strong></p>\n<p>The sea krait belongs to the <strong>subfamily Hydrophidae,</strong> which also includes other sea snakes.&nbsp;The snake's <strong>venom</strong> is <strong>myotoxic</strong>.</p>\n<p>Some common symptoms include&nbsp;<strong>headache</strong>,<strong> thirst</strong>, <strong>sweating</strong>, and<strong> vomiting</strong>. <strong>Generalized muscle ache</strong>, <strong>stiffness,</strong> and <strong>tenderness</strong>&nbsp;occur subsequently.&nbsp;<strong>Trismus</strong>&nbsp;is an early symptom and is followed by generalized <strong>flaccid paralysis</strong>&nbsp;similar to elapid neurotoxicity.</p>\n<p><strong>Myoglobin</strong> released from <strong>damaged</strong> skeletal <strong>muscles</strong> causes <strong>renal failure&nbsp;</strong>and <strong>myoglobinuria</strong>&nbsp;occurs after a bite, which manifests as the patient passing <strong>dark urine</strong> that is brown, red, or tea-colored. <strong>Potassium released</strong> from <strong>damaged muscles</strong> causes <strong>hyperkalemia</strong>&nbsp;which can cause cardiac failure.</p>\n<p>Other options :</p>\n<p>Option A: Bites of <strong>Elapidae</strong>&nbsp;like Cobras,&nbsp;<strong>Common</strong> <strong>Kraits</strong>, Mambas, and Coral Snakes, generally result in&nbsp;<strong>neurotoxic effects</strong>&nbsp;in the patient. The early symptoms usually include vomiting, hypersalivation, headache, the heaviness of the eyelids, blurred vision, tingling sensation around the mouth, hyperacusis, dizziness, and &lsquo;gooseflesh&rsquo;. Paralysis first presents with&nbsp;<strong>ptosis&nbsp;</strong>followed by&nbsp;<strong>external ophthalmoplegia.&nbsp;</strong>Later paralysis of other muscles continues with&nbsp;<strong>respiratory paralysis&nbsp;</strong>as the end result.</p>\n<p>Options C and D: Bites by <strong>Viperidae</strong> like <strong>Saw scaled viper</strong>, Russell viper, or <strong>Pit Viper</strong> usually produce more severe <strong>local effects.</strong>&nbsp;There may be persistent <strong>bleeding</strong> from the wound site, venipuncture, or injection sites.&nbsp;Spontaneous systemic <strong>hemorrhage,</strong> gingival bleeding, epistaxis, hematemesis, hemoptysis, subconjunctival, retroperitoneal, and intracranial hemorrhages can occur.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1bf4567c6aa64937a0f62c0789c09d63.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient newly diagnosed with chronic lymphocytic leukemia is started on fludarabine. A few days later, he develops vomiting, abdominal pain, and hematuria. His laboratory results reveal new-onset impaired kidney function, hyperkalemia, hyperphosphatemia, hypocalcemia, hyperuricemia, and elevated lactate dehydrogenase levels. Which of the following conditions has he developed?",
    "choices": [
      {
        "id": 1,
        "text": "Tumor lysis syndrome"
      },
      {
        "id": 2,
        "text": "Chronic kidney disease"
      },
      {
        "id": 3,
        "text": "Urate arthropathy"
      },
      {
        "id": 4,
        "text": "Nephrotoxic nephropathy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The patient has developed <strong>tumor lysis syndrome.</strong> The patient has been started on fludarabine, a cytotoxic drug to treat chronic lymphocytic leukemia. The cytotoxic drug causes lysis of tumor cells, leading to <strong>hyperkalemia, hyperphosphatemia, hypocalcemia, and hyperuricemia.</strong> The uric acid crystals and calcium phosphate precipitate in the tubules and cause damage to the epithelium, subsequently causing renal failure.&nbsp;</p>\n<p>Patients with impaired renal function, high tumor burden, and <strong>elevated lactate dehydrogenase </strong>(LDH) level are more likely to develop tumor lysis syndrome.&nbsp;</p>\n<p>Management: <strong>Aggressive hydration</strong> and administration of&nbsp;<strong>allopurinol</strong> at the same time as fludarabine are used to reduce the incidence of tumor lysis syndrome.&nbsp;<strong>Febuxostat</strong>, a non-selective xanthine oxidase inhibitor, can be used to treat hyperuricemia. It does not require dose calculations and can be used in patients with mildly decreased renal function.&nbsp;</p>\n<p><strong>Rasburicase</strong>, a recombinant urate oxidase, may also be used in patients with renal failure.&nbsp;<strong>Hemodialysis</strong> can be done in <strong>severe</strong> cases not responding to treatment.&nbsp;</p>\n<p>Other options: <br /><br />Option B - Chronic kidney disease would have a long-term history of impaired kidney function. This patient&rsquo;s kidney dysfunction is of recent onset. In addition, his laboratory values are more suggestive of tumor lysis syndrome.&nbsp;</p>\n<p>Option C - Urate arthropathy (gouty arthritis) is not likely in this patient as he has no joint involvement.&nbsp;</p>\n<p>Option D - Nephrotoxic nephropathy is unlikely in this patient. Fludarabine is a purine nucleotide analog that causes myelosuppression, immunosuppression, fever, myalgia, and arthralgias.&nbsp;&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most common clinical feature seen in multiple myeloma?",
    "choices": [
      {
        "id": 1,
        "text": "Frequent infections"
      },
      {
        "id": 2,
        "text": "Renal failure"
      },
      {
        "id": 3,
        "text": "Bone pain"
      },
      {
        "id": 4,
        "text": "Visual disturbance"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>most common</strong>\u00a0clinical feature that will be seen in multiple myeloma is <strong>bone pain</strong>. Bone pain occurs in more than 70% of patients with multiple myeloma and may be the presenting symptom.\u00a0</p>\n<p>Multiple myeloma is a <strong>plasma cell dyscrasia</strong> in which there is <strong>unregulated proliferation of plasma cells</strong>. The proliferating cells stimulate osteoclastic activity and suppress osteoblastic activity leading to the formation of <strong>multiple lytic bone lesions</strong>. These lesions can be seen on radiographs as <strong>\u2018punched out\u2019 lesions.</strong>\u00a0 In some severe cases, patients may present with pathological fractures.\u00a0</p>\n<p>Other features of multiple myeloma include:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Acute renal failure in a dehydrated state</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Normocytic normochromic anemia</strong>\u00a0</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Hyperviscosity syndromes</strong> cause headache, exacerbation, or precipitation of heart failure, <strong>visual disturbances</strong>, ataxia, and vertigo</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Bony damage leading to cord compression</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Carpal tunnel syndrome</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Sensory</strong> more than motor <strong>neuropathy</strong> associated with IgM directed against myelin-associated globulin</li>\n</ul>\n<p>The single <strong>most important predictor</strong> for <strong>survival</strong> is <strong>serum \u03b2<sub>2</sub>-microglobulin</strong>. <strong>Serum \u03b2<sub>2</sub>-microglobulin</strong> along with <strong>serum albumin</strong> forms the basis of the\u00a0<strong>International Staging System</strong> for multiple myeloma that <strong>predicts survival</strong>.</p>\n<p><br />Other options:\u00a0</p>\n<p>Option A - Frequent infections are common in multiple myeloma due to immunosuppression. However, bone pain is more common and is usually the presenting symptom. Pneumonia caused by <em>Streptococcus pneumoniae, Staphylococcus aureus, and Klebsiella pneumoniae</em>\u00a0is most commonly seen. <em>Escherichia coli\u00a0</em>causing pyelonephritis is also frequently seen.</p>\n<p>Option B - Renal failure occurs in 25% of patients with multiple myeloma with <strong>hypercalcemia</strong> as the <strong>most common</strong> etiology. Tubular damage associated with excess light chain excretion is almost always noted leading to <strong>adult Fanconi syndrome, </strong>a\u00a0proximal <strong>type 2 renal tubular acidosis.\u00a0</strong></p>\n<p>Option D - Visual disturbances like blurred vision can occur in multiple myeloma as a result of the <strong>hyperviscous</strong> state. It is seen as\u00a0<strong>bilateral central</strong>\u00a0<strong>venous occlusion,\u00a0</strong>reflected as tortous and distended retinal veins. Hemorrhages and exudates also contribute to visual problems, however it is not the most common symptom.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old woman presented with painful genital lesions as shown. On examination, there are enlarged lymph nodes. What is the causative organism?",
    "choices": [
      {
        "id": 1,
        "text": "Chlamydia trachomatis"
      },
      {
        "id": 2,
        "text": "Herpes simplex virus-2"
      },
      {
        "id": 3,
        "text": "Hemophilus ducreyi"
      },
      {
        "id": 4,
        "text": "Klebsiella granulomatis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Painful multiple vesicular ulcers</strong>\u00a0in clusters on the\u00a0genitalia and\u00a0<strong>inguinal lymphadenopathy</strong>\u00a0suggestive of Herpes simplex virus-2.</p>\n<p><strong>Genital herpes </strong>is\u00a0more often caused by HSV-2.\u00a0Genital herpes is characterized by <strong>vesiculoulcerative</strong> lesions\u00a0(grouped vesicles with clear fluid in them) of the penis of the male or of the cervix, vulva, vagina, and perineum of the female.\u00a0<strong>Recurrences</strong> of genital herpetic infections are <strong>common</strong> and tend to be mild.</p>\n<p>Option A: <strong><em>Chlamydia trachomatis</em></strong>\u00a0serovar L1, L2 and L3 cause<strong>\u00a0lymphogranuloma venereum</strong>. The primary lesion is a small, <strong>painless, papulovesicular</strong> lesion appearing on the external genitalia. <strong>Lymph nodes are painful</strong>, enlarged and suppurate associated with scarring and lymphatic blockage. This leads to <strong>elephentiasis </strong>of the<strong> vulva </strong>in women called<strong> esthetiomene</strong>.</p>\n<p>Option C: <strong>Chancroid caused</strong> by\u00a0<strong><em>Haemophilus ducreyi</em>\u00a0</strong>may also present with soft wide indurated <strong>painful genital ulcers</strong> and <strong>painful genital lymphadenopathy.</strong></p>\n<p>Option D: <strong><em>Klebsiella granulomatis</em>\u00a0</strong>causes<strong> donovanosis</strong>. It presents with a <strong>painless papule or nodule</strong> that erodes into a beefy red granulomatous ulcer with rolled edges. There is <strong>no lymphadenopathy</strong>, pseudobubos are seen.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/75705a1c4c0a4daabd21b8a2528ff758.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "During the normal delivery of a primigravida with polyhydramnios, an intern prematurely attempts to remove the placenta, leading to profuse bleeding. Examination reveals that the placenta is still partly attached and that the uterus is partly outside the introitus. The patient is in hemorrhagic shock, so initial resuscitative measures are taken. What is the appropriate management in this situation among the following options?",
    "choices": [
      {
        "id": 1,
        "text": "Manual repositioning of the uterus alone"
      },
      {
        "id": 2,
        "text": "Application of manual pressure"
      },
      {
        "id": 3,
        "text": "Attempt repositioning and administer a trial of tocolytics"
      },
      {
        "id": 4,
        "text": "Placement of a Bakri balloon"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient is diagnosed with <strong>uterine inversion\u00a0</strong>with the placenta still attached and the appropriate management in this condition is to <strong>attempt repositioning </strong>of the uterus<strong> </strong>and<strong> administer a trial of tocolytics</strong>.</p>\n<p>The given clinical scenario of <strong>hemorrhagic shock</strong> after attempts of forceful removal of the placenta is suggestive of <strong>uterine inversion</strong>. It is a hemorrhagic complication encountered in the puerperium. <strong>Polyhydramnios</strong> in this<strong>\u00a0</strong>patient contribute to <strong>uterine atony</strong>.</p>\n<p>Risk factors for uterine inversion include:</p>\n<ul>\n<li>Fundal attachment of the placenta</li>\n<li>Uterine atony</li>\n<li>Attempts at<strong> cord traction before placental delivery</strong></li>\n<li>Adherent placenta</li>\n</ul>\n<p>There are 3 degrees of uterine inversion:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>First-degree</strong> - the fundus of the uterus inverts into the uterine cavity</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Second-degree</strong> - the uterine fundus protrudes through the cervix and lies in the vagina</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Third-degree</strong> -\u00a0 the whole of the uterus is inverted and protrudes through the introitus</li>\n</ul>\n<p>Since uterine inversion presents\u00a0with profuse bleeding and a\u00a0severe degree of shock, it requires prompt diagnosis and management.<strong> Management</strong> includes:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Call for help and arrange blood products.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Evaluate for general anaesthesia.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Administer rapid crystalloid infusion through a large-bore IV cannula.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">If the\u00a0<strong>placenta </strong>has <strong>separated</strong> and the uterus recently inverted - The uterus is replaced by <strong>manually</strong> <strong>pushing</strong> up on the fundus with the palm and fingers in the direction of the long axis of the vagina.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">If the\u00a0<strong>placenta</strong> is still <strong>attached</strong>-\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Attempt repositioning </strong>and<strong> administering a trial of tocolytics </strong>(Option C). This trial of tocolytics helps in uterine relaxation and also repositioning of the uterus. Terbutaline, magnesium sulfate, or nitroglycerin may be used. Once the uterus is repositioned, the placenta is removed manually.\u00a0</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">In case the attempt to reposition fails, the placenta is peeled off and once again uterine repositioning is attempted. Once the anatomy is restored, tocolytics are withheld and ureterotonic agents are started. <strong>Manual pressure (Bimanual compression)</strong> is applied. (Option B)</li>\n</ul>\n</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">A <strong>Bakri balloon</strong> is used to <strong>maintain </strong>the<strong> repositioned uterus</strong>. (Option D)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">If repositioning fails, Surgical intervention<strong>(laparotomy)</strong> is indicated.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A college-going student presents to you with the rapidly increasing power of glasses due to progressive myopia. You also noticed Vogt\u2019s striae on slit-lamp examination, along with Fleischer's rings. These Fleischer's rings are seen due to ______.",
    "choices": [
      {
        "id": 1,
        "text": "Copper deposition in corneal epithelium"
      },
      {
        "id": 2,
        "text": "Copper deposition in corneal Descemet's membrane"
      },
      {
        "id": 3,
        "text": "Iron deposition in corneal epithelium"
      },
      {
        "id": 4,
        "text": "Iron deposition in corneal Descemet's membrane"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario of a patient showing\u00a0<strong>Vogt\u2019s striae</strong> and\u00a0<strong>Fleischer's rings\u00a0</strong>on slit-lamp examination is suggestive of <strong>keratoconus</strong>.</p>\n<p><strong>Fleischer's rings</strong>\u00a0occur due to the deposition of iron in the\u00a0<strong>corneal epithelium</strong>. These are seen as <strong>brownish rings </strong>at the<strong> base </strong>of the<strong> cone </strong>of keratoconus, best seen under<strong> cobalt blue light</strong>.</p>\n<p class=\"p1\"><strong>Keratoconus</strong> is a progressive disorder in which central or paracentral <strong>corneal stromal thinning</strong> occurs, accompanied by apical protrusion and irregular astigmatism.</p>\n<p>Other signs seen in keratoconus:</p>\n<ul>\n<li><strong>Direct ophthalmoscopy</strong>\u00a0from a distance of half a meter shows a fairly well-delineated\u00a0<strong>oil droplet reflex</strong></li>\n<li><strong>Vogt\u2019s striae</strong><strong>:</strong> Vertical\u00a0(rarely horizontal) fine, whitish lines in the deep/posterior stroma and Descemet's membrane</li>\n<li><strong>Munson\u2019s sign</strong>: V-shaped deformity of the lower lid on downward gaze</li>\n<li><strong>Scissoring reflex\u00a0</strong>in retinoscopy</li>\n</ul>\n<p>The image below shows\u00a0<strong>Fleischer's ring </strong>(indicated by the arrow) under<strong> cobalt blue light:</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9ca08257a9654cc3a19b3f35ac982b02x600x477.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9ddc9d4263b047d0930a0bce6eadf663x720x632.PNG"
    ]
  },
  {
    "text": "A middle-aged man presented to the clinic with a history of progressive wrist pain. Examination revealed stiffness of the wrist joint. A radiograph of his wrist is shown below. What is your provisional diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Sever disease"
      },
      {
        "id": 2,
        "text": "Keinbock's disease"
      },
      {
        "id": 3,
        "text": "Kohler's disease"
      },
      {
        "id": 4,
        "text": "Osgood-Schlatter disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given scenario and image showing an <strong>increased opacity</strong> of<strong> lunate</strong>&nbsp;due to interrupted blood supply is suggestive of&nbsp;<strong>Keinbock&rsquo;s disease</strong>.</p>\n<p>Keinbock's disease refers to the <strong>avascular necrosis</strong> of the <strong>lunate</strong> leading to progressive <strong>wrist pain</strong>.&nbsp;Patients present with <strong>tenderness</strong> over the<strong> lunate</strong> and <strong>stiffness </strong>of the <strong>wrist joint</strong>.</p>\n<p>Option A: <strong>Sever disease</strong> or calcaneus apophysitis refers to the <strong>inflammation</strong> of the <strong>calcaneus growth plate</strong> in growing children.&nbsp;</p>\n<p>Option C: <strong>Kohler's disease&nbsp;</strong>refers to the <strong>avascular necrosis</strong> of the <strong>navicular </strong>bone.&nbsp;</p>\n<p>Option D: <strong>Osgood-Schlatter disease</strong>/ tibial tubercle apophysitis refers to the <strong>inflammation&nbsp;</strong>of the<strong> patellar ligament</strong> at the <strong>tibial tuberosity</strong>. It is characterized by a<strong> painful swelling</strong> just below the knee. It worsens with activity and is relieved by rest.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/adc81749065e45c99f0caa50190b0c8f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A male baby weighing 1.6 kg, born at 34 weeks, has abdominal distension and hematochezia on the 16th day of life. He is apneic, bradycardic, and lethargic. He was fed only with artificial formula milk. An x-ray of the abdomen shows a portal vein gas shadow. What is the stage of disease according to modified Bell's staging criteria?",
    "choices": [
      {
        "id": 1,
        "text": "Stage II A"
      },
      {
        "id": 2,
        "text": "Stage II B"
      },
      {
        "id": 3,
        "text": "Stage III A"
      },
      {
        "id": 4,
        "text": "Stage III B"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Abdominal distension and hematochezia in a preterm baby exclusively fed on formula feed are suggestive of <strong>necrotizing enterocolitis</strong>\u00a0(NEC).<strong>\u00a0</strong>The abdominal x-ray finding of <strong>portal vein gas shadow</strong> is a sign of severe disease and corresponds to <strong>stage IIB</strong>,\u00a0according to<strong> modified Bell's staging</strong> criteria.</p>\n<p>Modified Bell's staging criteria:</p>\n<ul>\n<li>Stage I - Suspected NEC</li>\n<li>Stage II - Proven NEC</li>\n<li>Stage III - Advanced NEC</li>\n</ul>\n<table style=\"height: 753px; width: 236.65px;\">\n<tbody>\n<tr>\n<td style=\"width: 67px; text-align: center;\">Stage</td>\n<td style=\"width: 10px; text-align: center;\">Intestinal signs</td>\n<td style=\"width: 10px; text-align: center;\">Systemic signs</td>\n<td style=\"width: 57.65px; text-align: center;\">Radiological signs</td>\n</tr>\n<tr>\n<td style=\"width: 67px; text-align: center;\">\n<p><strong><strong>I A<br /></strong></strong></p>\n<p>Suspected NEC<strong><br /></strong></p>\n</td>\n<td style=\"width: 10px;\">Mild <br />abdominal distention, emesis, guaiac-positive stool</td>\n<td style=\"width: 10px;\">Temperature instability, apnea, bradycardia, lethargy</td>\n<td style=\"width: 57.65px;\">Normal or intestinal dilatation, mild ileus</td>\n</tr>\n<tr>\n<td style=\"width: 67px; text-align: center;\"><strong>I B</strong></td>\n<td style=\"width: 10px;\">IA + <br />Bright red blood from the\u00a0rectum</td>\n<td style=\"width: 10px;\">Same as IA</td>\n<td style=\"width: 57.65px;\">Same as IA</td>\n</tr>\n<tr>\n<td style=\"width: 67px; text-align: center;\"><strong><strong>II A<br /></strong></strong><strong><br /></strong>Mildly ill<strong><br /></strong></td>\n<td style=\"width: 10px;\"><strong>Absent <br />bowel sounds</strong></td>\n<td style=\"width: 10px;\">Same as IA\u00a0</td>\n<td style=\"width: 57.65px;\"><strong>Pneumatosis intestinalis,<br /></strong>ileus</td>\n</tr>\n<tr>\n<td style=\"width: 67px; text-align: center;\"><strong><strong>II B<br /><br /></strong></strong>Moderately ill<strong><br /></strong></td>\n<td style=\"width: 10px;\">\u00a0IIA + definite abdominal tenderness</td>\n<td style=\"width: 10px;\">IA+ <br />Metabolic acidosis and thrombo-cytopenia\u00a0</td>\n<td style=\"width: 57.65px;\">\u00a0IIA + <br /><strong>portal venous gas</strong>, with or without ascites</td>\n</tr>\n<tr>\n<td style=\"width: 67px; text-align: center;\"><strong><strong>III A<br /><br /></strong></strong>Severely ill, bowel intact\u00a0<strong><br /></strong></td>\n<td style=\"width: 10px;\">IIB + peritonitis <br />with marked tenderness, and abdominal distension\u00a0</td>\n<td style=\"width: 10px;\">IIB+ hypotension, bradycardia, acidosis, DIC, neutropenia\u00a0</td>\n<td style=\"width: 57.65px;\">IIB + <strong>definite ascites</strong>\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 67px; text-align: center;\"><strong><strong>III B<br /><br /></strong></strong>Severely ill, bowel<br />perforated<strong><br /></strong></td>\n<td style=\"width: 10px;\">\u00a0Same as III A</td>\n<td style=\"width: 10px;\">Same as IIIA\u00a0</td>\n<td style=\"width: 57.65px;\">\u00a0IIB +<strong>pneumo-peritoneum</strong></td>\n</tr>\n</tbody>\n</table>\n<p><br /><strong>Necrotizing enterocolitis</strong>\u00a0is the <strong>most common</strong> life-threatening <strong>gastrointestinal disorder</strong> in the newborn period. It is characterized by various degrees of mucosal or transmural inflammation and necrosis of the intestinal tract. It most commonly affects the distal <strong>ileum </strong>and<strong> proximal colon</strong>.\u00a0</p>\n<p>Three major <strong>risk factors</strong> implicated:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Prematurity</strong> is the <strong>greatest risk factor</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Formula feeding</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Bacterial colonization of the intestine</li>\n</ul>\n<p>Incidence and mortality increase with decreasing birth weight and gestational age. It usually presents within the <strong>2nd </strong>or<strong> 3rd week</strong> of life with <strong>abdominal distension</strong> and tenderness, feed intolerance, and\u00a0<strong>occult/gross blood</strong> in the\u00a0<strong>stool</strong>. Systemic features include <strong>hypotension, bradycardia</strong>, <strong>lethargy</strong>, and temperature instability.</p>\n<p>Diagnosis can be made with a <strong>plain abdominal x-ray.</strong> The important signs are :</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Pneumatosis intestinalis-\u00a0</strong>air in the bowel wall is diagnostic, and corresponds to stage <strong>IIA.</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Portal vein gas</strong> is a sign of severe disease and corresponds to <strong>stage IIB</strong>.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Pneumoperitoneum</strong> indicates perforation and corresponds to <strong>stage IIIB</strong>.</li>\n</ul>\n<p>The given x-ray shows pneumatosis intestinalis (black arrows).\u00a0It is seen as a characteristic <strong>train-track lucency</strong>\u00a0appearance\u00a0<strong>within </strong>the<strong> bowel wall</strong>\u00a0due to the gas produced by bacteria.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5c0efce83929417a99e38d7896bb6237x720x1122.PNG"
    ]
  },
  {
    "text": "A 6-year-old girl presented with high-grade fever, and recurrent infections of her mouth and skin. Oral examination shows significant gingivitis and periodontitis. Postnatal history is significant for delayed umbilical cord separation. Identify the likely etiology of the patient's condition.",
    "choices": [
      {
        "id": 1,
        "text": "Defective LYST protein"
      },
      {
        "id": 2,
        "text": "Defective Sialyl-Lewis X receptor"
      },
      {
        "id": 3,
        "text": "Defective Kindlin 3"
      },
      {
        "id": 4,
        "text": "Defective CD11/CD18 integrin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario is suggestive of the diagnosis as <strong>leukocyte adhesion defect</strong> 1 (LAD-1) and the etiology is <strong>defective CD11/CD18 integrin.</strong></p>\n<p>The clinical scenario of high-grade fever and recurrent skin and upper respiratory tract infections with a history of <strong>delayed umbilical cord separation</strong>&nbsp;in a child is suggestive of leukocyte adhesion defects. <strong>Gingivitis</strong> and <strong>periodontitis</strong> are <strong>hallmarks </strong>of<strong> LAD-1</strong>.&nbsp;</p>\n<p>Leukocyte Adhesion Defects are <strong>autosomal recessive</strong> disorders of innate immunity characterized by <strong>recurrent infections</strong> in the presence of <strong>neutrophilic leukocytosis</strong>.&nbsp;LAD-1 is caused due to defective leukocyte adhesion because of mutations in the beta chain of CD11/CD18 integrins. As a result, neutrophils cannot adhere to intracellular adhesion molecules ICAM-1 and ICAM-2 expressed on endothelium and transmigrate through the vessel wall. The few neutrophils that do transmigrate fail to recognize microorganisms opsonized by complement iC3b. This results in <strong>defective phagocytosis </strong>and<strong> recurrent infections.&nbsp;</strong></p>\n<p>Clinical features of LAD-1:&nbsp;</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Recurrent infections of the&nbsp;<strong>skin</strong>, <strong>upper respiratory tract</strong>, lower intestinal tract, and genital mucosa.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">History of delayed umbilical cord separation.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Gingivitis </strong>and<strong> periodontitis </strong>are<strong> hallmarks </strong>of<strong> LAD-1.&nbsp;</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Classical signs of inflammation are absent.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Lab work shows significant <strong>neutrophilic leukocytosis &gt;25000/mm<sup>3</sup></strong>.</li>\n</ul>\n<p>Allogeneic <strong>hematopoietic stem cell transplantation</strong> is the <strong>treatment of choice</strong>&nbsp;in LAD-1.</p>\n<p>Other options:</p>\n<p>Option A - Defective <strong>LYST protein</strong> causes <strong>Ch&eacute;diak-Higashi syndrome</strong>. It is inherited in an <strong>autosomal recessive</strong> manner. It is characterized by progressive <strong>neutropenia</strong>, <strong>neutrophil granules,</strong> <strong>occult-cutaneous albinism</strong>, rotary nystagmus, <strong>recurrent infections</strong>, <strong>peripheral neuropathy</strong> with ataxia, and <strong>prolonged bleeding time</strong>. High-dose <strong>ascorbic acid</strong> can be given in a stable state and allogeneic hematopoietic stem cell transplantation is indicated in the accelerated phase.</p>\n<p>Option B - Defective <strong>Sialyl-Lewis X</strong> receptor causes <strong>LAD-2</strong>. Neutrophils rolling and tethering are affected. Clinical features are similar to LAD-1 but <strong>neurological defects, craniofacial dysmorphism, and the Bombay blood group</strong> are <strong>unique </strong>to<strong> LAD-2</strong>. Patients with LAD-2 respond to <strong>fucose supplementation.</strong></p>\n<p>Option C - Defective <strong>Kindlin 3</strong> causes<strong> LAD-3.</strong> Chemotaxis, adhesion, and superoxide formation are affected. It is characterized by <strong>Glanzmann thrombasthenia-like bleeding disorder</strong> with other clinical features similar to LAD-1. Management is similar to LAD-1.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old male patient on long-term lithium treatment came to the emergency room with symptoms of acute gout. He was treated with indomethacin and colchicine. Later, he developed nausea, vomiting, ataxia, coarse tremors, seizures, and hyperreflexia. Identify the drug responsible for this and the mechanism of the interaction.",
    "choices": [
      {
        "id": 1,
        "text": "Indomethacin decreases plasma protein binding of lithium"
      },
      {
        "id": 2,
        "text": "Colchicine decreases renal excretion of lithium"
      },
      {
        "id": 3,
        "text": "Indomethacin increases tubular reabsorption of lithium"
      },
      {
        "id": 4,
        "text": "Colchicine inhibits the metabolism of lithium"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario is suggestive of acute lithium toxicity. The drug responsible for this is <strong>indomethacin</strong> as it&nbsp;<strong>increases</strong> the <strong>proximal tubule reabsorption</strong> of lithium.</p>\n<p>Increased reabsorption of lithium from the proximal tubules is also seen with other non-steroid anti-inflammatory drugs like&nbsp;<strong>i</strong><strong>buprofen, naproxen,</strong> and possibly <strong>aspirin</strong>.</p>\n<p>The important symptoms of acute lithium toxicity are nausea, vomiting, <strong>ataxia</strong>, <strong>coarse tremors</strong>, <strong>dysarthria</strong>, <strong>seizure, </strong>and<strong> hyperreflexia</strong>. There is no specific antidote, and treatment is mainly supportive. In <strong>severe </strong>toxicity,&nbsp;<strong>dialysis</strong> is the most effective treatment.</p>\n<p>Thiazide diuretics may also lead to lithium toxicity. Lithium competes with sodium for reabsorption. Diuresis leads to Na<sup>+</sup> loss and compensatory Li<sup>+</sup> reabsorption from the proximal tubule, leading to toxicity.</p>\n<p>Important side effects of lithium are-</p>\n<ul>\n<li><strong>Fine&nbsp;</strong>tremors in&nbsp;<strong>therapeutic dose</strong></li>\n<li><strong>Seizures</strong></li>\n<li>Significant&nbsp;<strong>weight gain</strong></li>\n<li><strong>Nephrogenic diabetes inspidus</strong></li>\n<li><strong>Hypothyroidism</strong></li>\n<li><strong>T wave flattening</strong></li>\n<li>Worsening of psoriasis</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Teratogenic effect causing <strong>Ebstein anomaly</strong> and<strong> floppy infant</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Leukocytosis</strong></li>\n</ul>\n<p>Other options:</p>\n<p>Colchicine is an <strong>antimitotic</strong> drug that is used in the treatment of <strong>acute gout</strong>. It acts by <strong>inhibiting microtubule</strong> and <strong>spindle formation</strong>&nbsp;and thus:</p>\n<ul>\n<li>Arrests cell division in the G1 phase</li>\n<li>Inhibits neutrophil-mediated phagocytosis&nbsp;</li>\n<li>Decreases the secretion of chemotactic factors <strong>IL-18 and IL-1&beta;</strong></li>\n</ul>\n<p>Colchicine has many other effects that may cause depression of the respiratory center, an enhanced response to sympathomimetic agents, and induction of hypertension by central vasomotor stimulation.&nbsp;</p>\n<p>Important side effects of colchicine are:</p>\n<div class=\"page\" title=\"Page 709\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Nausea and vomiting&nbsp;</li>\n<li>Diarrhea</li>\n<li>Myelosuppression&nbsp;</li>\n<li>Aplastic anemia</li>\n<li>Rhabdomyolysis</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the correct activity of the various relay points involved in the baroreceptor reflex when a patient suddenly stands up after lying down. \n  \u2018+\u2019 Indicates activation and  \u2018-\u2019 indicates inhibition",
    "choices": [
      {
        "id": 1,
        "text": "- Baroreceptor, -NTS, -CVLM, +RVLM"
      },
      {
        "id": 2,
        "text": "+Baroreceptor, -NTS, +CVLM, +RVLM"
      },
      {
        "id": 3,
        "text": "- Baroreceptor, -NTS, -CVLM, -RVLM"
      },
      {
        "id": 4,
        "text": "+Baroreceptor, +NTS, +CVLM, +RVLM"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given scenario, a sudden change in position of the patient from supine to standing causes <strong>peripheral pooling</strong> of blood and <strong>reduced blood pressure</strong>. Thus there is <strong>reduced firing</strong> of the <strong>baroreceptors</strong> which is characterized by&nbsp; <strong>- Baroreceptor, -NTS, -CVLM, +RVLM.</strong></p>\n<p>Baroreceptors are <strong>stretch receptors</strong> in the walls of the hearts and blood vessels. They are <strong>stimulated</strong> by the stretching of the walls of the respective vessels when there is an <strong>increased volume or pressure</strong> in the vessel. They are important in the immediate management of blood pressure.&nbsp;The receptors of <strong>arterial circulation</strong> include:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Carotid sinus</strong> - present in the adventitia of the <strong>internal carotid artery</strong> just above the bifurcation of the common carotid. <strong>Afferent nerve</strong>&nbsp;innervation is by a branch of the <strong>glossopharyngeal nerve</strong> called <strong>carotid sinus nerve</strong>.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Aortic arch</strong> - present in the adventitia of the walls of the <strong>arch of aorta</strong>. <strong>Afferent innervation</strong> is by the <strong>vagus nerve</strong> called <strong>aortic depressor nerve.</strong></li>\n</ul>\n<p>The receptors of <strong>low-pressure system/cardiopulmonary receptors&nbsp;</strong>are:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Atrial receptors</strong> -&nbsp; present in the walls of the right and left atria near the opening of the superior and inferior vena cava and pulmonary veins.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Pulmonary circulation receptors</strong>.</li>\n</ul>\n<p>The afferents from the baroreceptors <strong>activate NTS</strong>&nbsp; by <strong>releasing glutamate</strong>. The NTS in turn <strong>activates CVLM</strong> by releasing <strong>glutamate</strong>. The <strong>CVLM</strong> on activation <strong>releases gamma-aminobutyric acid&nbsp;</strong>(GABA) which is <strong>inhibitory</strong> to the <strong>RVLM</strong>. The <strong>RVLM</strong> is the major <strong>excitatory source</strong> of the <strong>sympathetic nervous system</strong>. As it is inhibited, there is sympathetic inhibition thus reducing the blood pressure. The <strong>NTS</strong> also simultaneously <strong>activates</strong> the <strong>vagal motor neurons</strong> thus causing <strong>bradycardia</strong>. Thus,</p>\n<ul>\n<li><strong>Stimulation</strong> of baroreceptors is characterized by <strong>+Baroreceptor, +NTS, +CVLM, -RVLM.</strong></li>\n<li><strong>Reduced firing</strong> of the baroreceptors<strong>&nbsp;</strong>is characterized by <strong>- Baroreceptor, -NTS, -CVLM, +RVLM.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/121274c657af42cdac234ebf1f6e8dfcx1280x2026.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/97fb8d9e02c145a68659f7da4e3a27c5x1280x1674.JPEG"
    ]
  },
  {
    "text": "A 32-year-old man was recently fired from work and he felt a strong urge to physically harm his boss. To try and control his urge he took up badminton to vent his anger. Identify the type of defense mechanism used by him.",
    "choices": [
      {
        "id": 1,
        "text": "Sublimation"
      },
      {
        "id": 2,
        "text": "Altruism"
      },
      {
        "id": 3,
        "text": "Displacement"
      },
      {
        "id": 4,
        "text": "Projection"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The defense mechanism used is\u00a0<strong>sublimation.</strong></p>\n<p>Sublimation is a <strong>mature</strong> defense mechanism. It means to gratify an impulse by changing the end goal from a <strong>socially objectionable</strong> one to a <strong>socially valued one</strong>. Sublimation of <strong>aggressive impulses</strong> generally takes place through <strong>games </strong>or<strong> sports</strong>. Sublimation allows instincts to be channeled and not dammed up or diverted. Hence, in sublimation, feelings are acknowledged, modified, and directed toward a socially valued/acceptable goal so that modest instinctual satisfaction is achieved.\u00a0In the given scenario, the man sublimates his urge to physically harm his boss (socially objectionable) by taking up badminton (socially valued).</p>\n<p>Other options:</p>\n<p>Option B: <strong>Altruism</strong> is a <strong>mature</strong> defense mechanism. In altruistic defense, the person gratifies an impulse by providing service or help to others even though it can be detrimental to the person itself.\u00a0Example: An alcoholic funding a rehabilitation center even though he may be poor.</p>\n<p>Option C: <strong>Displacement</strong> is a <strong>neurotic</strong> defense mechanism. In displacement, the person carries out purposeful, unconscious shifting of impulses from one object or person to another. Although the object is changed, the <strong>instinctual</strong> <strong>nature</strong> of the impulse and its aim <strong>remain</strong> <strong>unchanged</strong> and this differentiates it from sublimation where the end goal is changed to a socially acceptable one. Example: A person may be angry towards their boss for reprimanding him and wants to abuse his boss by using foul language. Here, the person displaces his anger by being rude and using foul language to his parents at home.\u00a0<br /><br />Option D: <strong>Projection</strong> is an <strong>immature</strong> defense mechanism. On a nonpsychotic level, projection involves attributing one's own unacknowledged feelings to others. At higher levels, it may include misinterpreting motives, attitudes, feelings, or intentions of others.<br />Example: A man wishes to cheat on his wife, instead he says that he is sure his wife is cheating on him. Here, he is projecting his own unacknowledged feelings on his wife.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A radiology consultant advises you to use a water-soluble contrast media having an iodine particle ratio of 3:2 in a patient referred for a radiological investigation. Which of the following contrast media will you prefer?",
    "choices": [
      {
        "id": 1,
        "text": "Non-ionic dimer"
      },
      {
        "id": 2,
        "text": "Non-ionic monomer"
      },
      {
        "id": 3,
        "text": "Ionic dimer"
      },
      {
        "id": 4,
        "text": "Ionic monomer"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Ionic monomers</strong>\u00a0have an Iodine: particle ratio of <strong>3</strong><strong>:2.</strong></p>\n<p>Contrast agents can be divided into water-soluble (iodine-containing) and non-water-soluble (barium) compounds.</p>\n<p><strong>Classification of iodinated contrast:</strong></p>\n<ul>\n<li>Ionic \u2013 Monomer and dimer</li>\n<li>Non-ionic\u2013 Monomer and dimer</li>\n</ul>\n<p>Other options:</p>\n<ul>\n<li><strong>Non-ionic dimers</strong>\u00a0have an Iodine: particle ratio of\u00a0<strong>6:1</strong></li>\n<li><strong>Ionic Dimers</strong>\u00a0have an Iodine: particle ratio of <strong>6:2 or 3:1</strong></li>\n<li><strong>Non-ionic monomers</strong>\u00a0have an Iodine: particle ratio of <strong>3</strong><strong>:1</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 36-year-old man presents with a painless testicular mass with a sense of heaviness in the scrotum. His blood work showed raised LDH and AFP. Which of the following is the imaging modality of choice?",
    "choices": [
      {
        "id": 1,
        "text": "Contrast enhanced computed tomography"
      },
      {
        "id": 2,
        "text": "Ultrasonography"
      },
      {
        "id": 3,
        "text": "Trans-scrotal biopsy"
      },
      {
        "id": 4,
        "text": "Magnetic resonance imaging"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario of a middle-aged man presenting\u00a0with a <strong>painless testicular mass</strong> with a sense of <strong>heaviness</strong> in the scrotum suggests the diagnosis of a\u00a0<strong>testicular tumour</strong>. Blood work showed raised LDH and AFP, which are tumour markers for <strong>non-seminomatous germ cell tumours </strong>(NSGCTs).<strong> </strong>The imaging modality<strong>\u00a0</strong>of\u00a0choice<strong>\u00a0</strong>is<strong>\u00a0ultrasonography.</strong></p>\n<p>Testicular tumours are uncommon male malignancies. <strong>Seminomas</strong> generally occur in the <strong>4th decade</strong> of life, while <strong>NSGCTs</strong>\u00a0are common in the <strong>3rd</strong> decade of life. <strong>Spermatocytic seminomas</strong> occur commonly in men older than <strong>50 years</strong>.</p>\n<p>Clinical features of testicular tumours are:</p>\n<ul>\n<li>Occurrence in the specific age group.</li>\n<li><strong>Painless testicular mass</strong> is the usual symptom</li>\n<li>Sense of <strong>scrotal heaviness</strong></li>\n<li>Abdominal or lumbar mass due to metastasis</li>\n<li>Chest pain, dyspnea, and haemoptysis due to lung metastasis</li>\n<li><strong>Prepubertal interstitial</strong> cell tumours produce <strong>androgens</strong>, causing precocious puberty</li>\n<li><strong>Postpubertal interstitial</strong> cell tumours produce <strong>feminising hormones</strong>, leading to gynecomastia, erectile dysfunction, loss of libido and azoospermia.</li>\n</ul>\n<p>The<strong> initial diagnostic investigation </strong>of<strong> choice </strong>is<strong> ultrasonography (USG)</strong>. USG of the affected as well as the unaffected testis is done and is mandatory. Tumour markers aid in the diagnosis. <strong>Chest X-ray</strong> is done to detect <strong>'cannonball'</strong> metastasis\u00a0in the lungs.</p>\n<p>Other options:</p>\n<p>Option A -\u00a0<strong>Contrast-Enhanced Computed Tomography\u00a0</strong>(CECT) is done to assess the thoracic, abdominal and pelvic areas for <strong>metastasis</strong>. Although it is essential in staging and monitoring response to therapy, it is not the imaging modality of choice.</p>\n<p>Option C:\u00a0<strong>Trans-scrotal biopsy</strong>\u00a0has <strong>no role</strong> in the diagnosis of testicular tumours.</p>\n<p>Option D:\u00a0<strong>Magnetic Resonance Imaging\u00a0</strong>(MRI) may be used as an adjunct if ultrasound findings are equivocal or if the location of the mass is uncertain.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Mini Test 7';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2021-22"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>