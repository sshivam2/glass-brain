<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 005 (Nutrition) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2023
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 34-year-old woman presented with generalized weakness and lightheadedness for 2 weeks. Blood investigations were notable for decreased hemoglobin, increased indirect bilirubin, and increased LDH. Her peripheral smear showed RBC fragments. Which vitamin deficiency is associated with the above presentation?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin A"
      },
      {
        "id": 2,
        "text": "Vitamin E"
      },
      {
        "id": 3,
        "text": "Vitamin D"
      },
      {
        "id": 4,
        "text": "Vitamin K"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical scenario is suggestive of <strong>hemolytic anemia. </strong>It is associated with a <strong>deficiency</strong> of<strong> vitamin E.</strong></p>\n<p>The most important function of vitamin E is its chain-breaking<strong> antioxidant</strong> role. Vitamin E inhibits lipid peroxidation by free radicals, thereby <strong>stabilizing cell membranes</strong>. Hence, its deficiency can result in <strong>erythrocyte membranes</strong> being abnormally <strong>fragile</strong> leading to <strong>hemolytic anemia.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c24af00b0ad24b46ba549c819f04be38x597x667.JPEG"
    ]
  },
  {
    "text": "A baby was brought to the clinic with symptoms of diarrhea, failure to thrive, and hair loss. On examination, the following findings are noted. Identify the mineral deficiency leading to this condition.",
    "choices": [
      {
        "id": 1,
        "text": "Niacin deficiency"
      },
      {
        "id": 2,
        "text": "Zinc deficiency"
      },
      {
        "id": 3,
        "text": "Riboflavin deficiency"
      },
      {
        "id": 4,
        "text": "Selenium deficiency"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical features shown in the images are <strong>periorificial dermatitis</strong> and<strong> alopecia. </strong>These features\u00a0in a young child are suggestive of<strong> acrodermatitis enteropathica</strong>, which is\u00a0seen with <strong>zinc deficiency.</strong></p>\n<p><strong>Acrodermatitis enteropathica</strong>\u00a0is a condition<strong>\u00a0</strong>that occurs due to zinc deficiency and presents after weaning.\u00a0Clinical features include failure to thrive, anorexia, <strong>diarrhea,</strong> recurrent infections, <strong>alopecia,</strong> male hypogonadism, and neurological manifestations like <strong>tremor,</strong> nystagmus, photophobia, hypogeusia, irritability, etc.</p>\n<p>Skin manifestations such as <strong>vesiculobullous dermatitis</strong> on the extremities and periorificial (perianal, perigenital, perioral) regions are commonly seen as shown below. Affected infants require long-term supplementation with zinc.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8e6e6ce577684f71bf478130514e9a33.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/21f51e566c0f4c5bacbf305c8b2cbb66x1280x1610.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/855977aa7f1d4fe6929c5112960e7ae5x720x521.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9e24a8b1d3ff4634b257c3331b333f33x720x678.JPEG"
    ]
  },
  {
    "text": "Which among the following helps in the maturation of collagen?",
    "choices": [
      {
        "id": 1,
        "text": "Proline"
      },
      {
        "id": 2,
        "text": "Copper and zinc"
      },
      {
        "id": 3,
        "text": "Ascorbic acid"
      },
      {
        "id": 4,
        "text": "Phenylalanine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Ascorbic acid/Vitamin C</strong> helps in the maturation of collagen.\u00a0</p>\n<p>Collagen is synthesized intracellularly in <strong>fibroblasts.</strong> Each polypeptide chain of collagen has about 1000 amino acid residues composed of <strong>Glycine-X-Y</strong> repeats, where X and Y are <strong>proline</strong> and<strong> hydroxyproline</strong> predominantly.</p>\n<p><strong>Hydroxylation</strong> of <strong>proline and lysine</strong> residues takes place intracellularly as a part of <strong>post-translational modification</strong> with the help of <strong>prolyl</strong> <strong>hydroxylase</strong> and <strong>lysyl hydroxylase</strong>. These enzymes require iron in a reduced state in its active site. <strong>Vitamin C/ascorbic</strong> acid keeps iron in a reduced state in these enzymes and thus helps in the maturation of collagen. Deficiency of vitamin C leads to<strong> scurvy</strong> which is characterized by bleeding tendencies, anemia, and skeletal abnormalities due to defective collagen in the connective tissue.</p>\n<p>Steps of post-translational modification of collagen includes</p>\n<ul>\n<li><strong>Hydroxylation</strong> of proline and lysine residues</li>\n<li><strong>Glycosylation</strong> of hydroxylysine residues</li>\n<li>Formation of intrachain and interchain disulfide bonds</li>\n<li><strong>Triple helix</strong> formation</li>\n<li><strong>Cleavage</strong> of\u00a025\u201335 kDa portions at both carboxy and amino terminal end</li>\n<li><strong>Quartered staggered</strong> arrangement</li>\n<li><strong>Oxidative deamination</strong> of lysine and hydroxylysine residues</li>\n<li>Formation of intrachain and interchain crosslinks</li>\n</ul>\n<p>Other options:</p>\n<p>Option B:<strong> Lysyl oxidase</strong> is a <strong>copper-containing enzyme</strong> that helps in covalent crosslinking collagen fibers. Deficiency of copper results in defective function of lysyl oxidase, and reduced cross-linkage of collagen leading to a condition called <strong>Menke's disease</strong>. Zinc has no role in collagen maturation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An underweight adolescent girl is found to have the following finding on her ocular examination. What is the WHO grade for this finding?",
    "choices": [
      {
        "id": 1,
        "text": "1A"
      },
      {
        "id": 2,
        "text": "1B"
      },
      {
        "id": 3,
        "text": "2A"
      },
      {
        "id": 4,
        "text": "2B"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows a Bitot spot which is a feature seen in vitamin A deficiency. According to the WHO grading of xerophthalmia,<strong> Bitot spots</strong> are classified as<strong> 1B.</strong></p>\n<p>Bitos spots are triangular, pearly-white or yellowish, foamy spots on the bulbar conjunctiva on either side of the cornea.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/008b64280a5748aba37d39e44c6b5b48.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 10-month-old baby is brought to the pediatric OPD with clinical findings as shown in the image. Further examination shows that the child has a loss of developmental milestones, truncal hypotonia, and failure to thrive. Which of the following enzymes is defective in this child?",
    "choices": [
      {
        "id": 1,
        "text": "Branched-chain alpha-keto acid dehydrogenase"
      },
      {
        "id": 2,
        "text": "Valine transaminase"
      },
      {
        "id": 3,
        "text": "Lysyl oxidase"
      },
      {
        "id": 4,
        "text": "Cystathionine synthase"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image reveals a child with <strong>sparse and kinky hair.</strong> Further examination shows that the child has a <strong>loss of developmental milestones and truncal hypotonia</strong>. These features strongly suggest a diagnosis of <strong>Menkes disease,</strong> which is caused by&nbsp;<strong>defective lysyl oxidase</strong> enzyme.</p>\n<p>This results from a deficiency of its <strong>co-factor </strong>i.e<strong> copper</strong>&nbsp;due to a defect in the&nbsp;<strong><em>ATP7A</em> gene,</strong> which prevents the absorption of copper from the intestine.</p>\n<p>Note :</p>\n<ul>\n<li>ATP7A: Menkes disease - X-linked&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</li>\n<li>ATP7B: Wilson's disease - Autosomal recessive</li>\n</ul>\n<p>Other options:</p>\n<p>Branched-chain alpha-keto acid dehydrogenase(BCKAD) enzyme defect causes&nbsp;Maple syrup urine disease (Option A)</p>\n<p>Valine transaminase enzyme defect causes&nbsp;Hypervalinemia (Option B)</p>\n<p>A defect in&nbsp;Cystathionine synthase causes&nbsp;Homocystinuria type I (Option D)</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bc9468c0f78e40a6a21cce5c2030a830.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A child presents with lesions as shown in the image below. He also complained of decreased vision at night. Which of the following dose of vitamin A prophylaxis given to children under the vitamin A distribution scheme in India could have prevented this condition?",
    "choices": [
      {
        "id": 1,
        "text": "2,00,000 IU  given yearly between the ages 1-6 years"
      },
      {
        "id": 2,
        "text": "1,00,000 IU  given yearly between the ages 1-6 years"
      },
      {
        "id": 3,
        "text": "1,00,000 IU  given 6-monthly between the ages 1-6 years"
      },
      {
        "id": 4,
        "text": "2,00,000 IU given 6-monthly between the ages 1-6 years"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image above showing&nbsp;<strong>phrynoderma&nbsp;</strong>along with the history of decreased vision at the night suggests a likely diagnosis of&nbsp;<strong>vitamin A deficiency</strong>. Under the <strong>vitamin-A distribution scheme </strong>in <strong>India</strong>, <strong>200,000 IU </strong>of vitamin A are given orally at<strong> 6-monthly intervals </strong>between the ages<strong>&nbsp;of 1 to 6 years</strong>.</p>\n<div class=\"page\" title=\"Page 1656\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 1656\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Vitamin A deficiency</strong> is a major preventable cause of blindness in children<strong>. </strong>It&nbsp;can lead to mucocutaneous disease and result in various ocular complications, including blindness. The <strong>earliest sign</strong> of vitamin A deficiency is defective <strong>dark adaptation</strong> and <strong>night blindness (nyctalopia)</strong>. Xerosis and scaling are commonly present in cutaneous findings.<strong> Phrynoderma</strong>, which is characterized by the presence of <strong>keratotic follicular papules</strong> over anterolateral thighs and <strong>posterolateral upper arms</strong> is also seen.</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 1657\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Treatment</strong> is done by administering <strong>50,000&ndash;2,00,000 IU of daily vitamin A supplementation</strong> until clinical signs and symptoms resolve and serum retinol levels normalize.&nbsp;</p>\n<p>The image below shows a Bitot's spot(due to Vitamin A deficiency) seen as a foamy appearance on the surface of the conjunctiva.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5f13278df72a4d4b8a5a5fa737545d91.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e6afff1d0a2943f2b9be1fda9a8f900fx720x449.PNG"
    ]
  },
  {
    "text": "The required increase in caloric intake of a lactating mother in the first 6 months is __",
    "choices": [
      {
        "id": 1,
        "text": "400 Kcal/day"
      },
      {
        "id": 2,
        "text": "600 Kcal/day"
      },
      {
        "id": 3,
        "text": "340 Kcal/day"
      },
      {
        "id": 4,
        "text": "520 Kcal/day"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>During the <strong>first six</strong> months of <strong>lactation</strong>, an increase of <strong>600</strong> Kcal/day is recommended, and from <strong>7-12</strong> <strong>months</strong> of lactation, an addition of&nbsp;<strong>520</strong>&nbsp;Kcal/day is recommended.</p>\n<p>Pregnancy requires an additional <strong>80,000 kcal</strong> during the last 20 weeks. This intake is <strong>not equally</strong> divided during pregnancy. It is divided as <strong>0, ~340,</strong> and<strong>&nbsp;350</strong>&nbsp;kcal/day in the first, <strong>second,</strong> and third trimester, respectively.&nbsp;</p>\n<p>Pregnancy is a period where a mother will require additional nutritional requirements to support the healthy growth and development of the fetus. According to the recommended dietary allowances by the Indian council of medical research (<strong>ICMR)</strong>:&nbsp;</p>\n<table style=\"height: 211px;\" width=\"546\">\n<tbody>\n<tr>\n<td style=\"width: 175.348px;\">Nutrients&nbsp;</td>\n<td style=\"width: 175.348px;\">The additional requirement in pregnancy (compared to non-pregnant women)</td>\n<td style=\"width: 175.359px;\">The additional requirement in lactation&nbsp;(compared to non-pregnant women)</td>\n</tr>\n<tr>\n<td style=\"width: 175.348px;\">Protein</td>\n<td style=\"width: 175.348px;\">\n<p>9.5g/day - 2nd trimester</p>\n<p>22 g/day- 3 rd trimester<strong><br /></strong></p>\n</td>\n<td style=\"width: 175.359px;\">\n<p>17g/day - First 6 months</p>\n<p>13g/day - 7-12 months</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 175.348px;\">Calcium</td>\n<td style=\"width: 175.348px;\">1000mg/day</td>\n<td style=\"width: 175.359px;\">1200mg/day</td>\n</tr>\n<tr>\n<td style=\"width: 175.348px;\">Iodine</td>\n<td style=\"width: 175.348px;\">220&mu;g/day</td>\n<td style=\"width: 175.359px;\">&nbsp;280&mu;g/day</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n<p><strong>Other options:</strong></p>\n<p>Option C: The <strong>caloric intake</strong> per day should be increased to&nbsp;<strong>340</strong> <strong>Kcal/day</strong> for a woman in her <strong>second trimester</strong>.<strong>&nbsp;</strong></p>\n<p>Option D: From <strong>7-12</strong> <strong>months</strong> of lactation, an addition of&nbsp;<strong>520</strong>&nbsp;Kcal/day is recommended.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old woman presents with fatigue. She had pallor on physical examination. Lab values are given below. Serum methyl malonyl CoA levels are normal. Which of the following should be administered as a therapy for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Vit B12"
      },
      {
        "id": 2,
        "text": "Iron"
      },
      {
        "id": 3,
        "text": "Vit C"
      },
      {
        "id": 4,
        "text": "Folic acid"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This patient has&nbsp;<strong>megaloblastic anemia </strong>(high MCV). This could be due to various causes, commonly Vitamin B12 or folic acid deficiency. The presence of <strong>normal methylmalonyl Co-A</strong>&nbsp;favors <strong>folic acid&nbsp;</strong>deficiency. Thus folic acid has to be given as supplements.</p>\n<p>Methylmalonyl-CoA mutase is a vitamin B12-dependent&nbsp;enzyme. The activity of methylmalonyl CoA mutase is greatly reduced in vitamin B12 deficiency, leading to an accumulation of methylmalonic acid and its excretion in urine and&nbsp;is also used to differentiate between megaloblastic anemia&nbsp;due to folate and vitamin B<sub>12</sub> deficiency.</p>\n<p>There are two vitamin B<sub>12</sub>-dependent enzymes:</p>\n<ul>\n<li><strong>Methionine synthase (Homocysteine methyltransferase</strong>): Catalyzes the conversion of homocysteine to methionine</li>\n<li><strong>Methylmalonyl CoA mutase</strong>: Methylmalonyl CoA, formed as an intermediate in the catabolism of valine, isoleucine and propionyl CoA is converted to succinyl CoA</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/555c201536784c6d94528056cb0cdf0cx1280x1774.JPEG"
    ]
  },
  {
    "text": "A 20-year-old female came to OPD with a tingling sensation in her legs and hands. The oral examination shows the following features. Which of the following investigations will be useful in diagnosing the vitamin deficiency seen in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "RBC Trans-ketolase assay"
      },
      {
        "id": 2,
        "text": "Serum methyl malonate level"
      },
      {
        "id": 3,
        "text": "RBC transaminase assay"
      },
      {
        "id": 4,
        "text": "RBC glutathione reductase activity assay"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>RBC glutathione reductase</strong> activity&nbsp;will be useful in diagnosing the <strong>riboflavin deficiency</strong> that this patient has. The image shows <strong>cheilosis and angular stomatitis</strong> which point towards riboflavin deficiency.&nbsp;The&nbsp;<strong>nutritional status of riboflavin </strong>can be assessed by<strong> measuring</strong>&nbsp;the activity of the&nbsp;<strong>RBC glutathione reductase.</strong></p>\n<p>Deficiency state of riboflavin is characterized by the following signs and symptoms:</p>\n<ul>\n<li><strong>Cheilosis</strong>: pallor in the angle of mouth and fissuring of lips, which extends radially to skin.</li>\n<li><strong>Glossitis:</strong> tongue becomes smooth, loss of papilla&nbsp;<strong>(magenta-colored tongue).</strong></li>\n<li><strong>Eyes: </strong>keratitis, conjunctivitis<strong>, corneal vascularisation.</strong></li>\n<li><strong>Other features:&nbsp;</strong>Seborrheic dermatitis, anemia.</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/72fff025cb94475ba9aa410ce1f12861.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "An undernourished child is brought for consultation. You prescribe a mineral supplement that is absorbed by the mechanism shown in the image below. Identify the supplement.",
    "choices": [
      {
        "id": 1,
        "text": "Copper"
      },
      {
        "id": 2,
        "text": "Iron"
      },
      {
        "id": 3,
        "text": "Calcium"
      },
      {
        "id": 4,
        "text": "Zinc"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows <strong>iron absorption and transport</strong> from a duodenal enterocyte into the blood, hence the mineral supplement prescribed can be identified as an <strong>iron</strong> supplement.</p>\n<p>The following image shows in detail, the absorption of iron from a duodenal enterocyte.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d0f7a03d5e45407ba5514ff7eaadc941.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/434650ea843645ec80e4a24389d0209dx1280x1210.JPEG"
    ]
  },
  {
    "text": "Magnesium does not have a role in which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Calcium homeostasis"
      },
      {
        "id": 2,
        "text": "Maintenance of normal cardiac rhythm"
      },
      {
        "id": 3,
        "text": "Copper metabolism"
      },
      {
        "id": 4,
        "text": "Neuromuscular function"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Magnesium has <strong>no role in copper metabolism.</strong></p>\n<p>Magnesium is a major <strong>intracellular cation</strong> required for the function of various enzymes such as hexokinase, phosphofructokinase, alkaline phosphatase, enolase, etc.</p>\n<p>The role of magnesium can be seen in the following processes:</p>\n<ul>\n<li><strong>Calcium homeostasis:</strong> One-half of the total body magnesium is located in bone. Magnesium is important for PTH secretion which controls serum Ca<sup>2+</sup> level.</li>\n<li><strong>Neuromuscular function:</strong> <strong>Hypomagnesemia</strong> may cause generalized alterations in neuromuscular function including tetany, tremor, seizures. <strong>Hypermagnesemia</strong> is known to cause symptoms of neuromuscular blockade such as <strong>hypoactive tendon reflexes</strong>, GI hypomotility, paralysis, etc</li>\n<li><strong>Maintenance of cardiac rhythm:</strong> <strong>Hypomagnesemia</strong> can lead to supraventricular and ventricular arrhythmias. <strong>Hypermagnesemia</strong> can cause bradycardia, heart block, and asystole.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is deficient in a patient with features as shown below:",
    "choices": [
      {
        "id": 1,
        "text": "Phenylalanine"
      },
      {
        "id": 2,
        "text": "Tryptophan"
      },
      {
        "id": 3,
        "text": "Glutamine"
      },
      {
        "id": 4,
        "text": "Arginine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image provided is characteristic of <strong>Casal's necklace</strong>, seen in <strong>pellagra,</strong> and indicates a <strong>deficiency</strong> of <strong>Tryptophan.</strong></p>\n<p>Pellagra can occur due to:</p>\n<ul>\n<li>Vitamin B3 (niacin)\n<ul>\n<li>Niacin is derived from tryptophan and needs B2 and B6 for its synthesis.</li>\n</ul>\n</li>\n<li><strong>Hartnup's disease (tryptophan malabsorption)</strong></li>\n<li>Malignant carcinoid syndrome (&uarr; tryptophan metabolism)</li>\n<li>Isoniazid (&darr; vitamin B6)</li>\n</ul>\n<p>In&nbsp;<strong>Hartnup's disease</strong>,&nbsp;defective membrane transport of tryptophan across PCT and enterocytes leads to malabsorption of tryptophan. This causes a deficiency of tryptophan.</p>\n<p>As a result, the production of niacin from tryptophan is reduced and this manifests as pellagra with&nbsp;<strong>dermatitis,</strong>&nbsp;<strong>diarrhea</strong>&nbsp;and&nbsp;<strong>dementia</strong>&nbsp;<strong>(3D's)</strong> and glossitis. A characteristic skin rash called the Casal&rsquo;s necklace may also be seen.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cb90b72e6eb74bc18f4f360eedb2ac96.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Methyltetrahydrofolic acid gets accumulated in deficiency of which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "B2"
      },
      {
        "id": 2,
        "text": "B12"
      },
      {
        "id": 3,
        "text": "B1"
      },
      {
        "id": 4,
        "text": "B6"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Accumulation of&nbsp;methyltetrahydrofolic acid is seen in <strong>vitamin B12 deficiency.</strong>&nbsp;Vitamin B12 acts as a <strong>cofactor of</strong> <strong>methionine synthase</strong>, an enzyme involved in the regeneration of tetrahydrofolate from methyl-tetrahydrofolate. Hence, in vitamin B12 deficiency methyl-tetrahydrofolate accumulates leading to <strong>functional folate deficiency</strong> known as the <strong>folate trap.</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4198e3e122b746699819240922009d63x1280x1774.JPEG"
    ]
  },
  {
    "text": "A 45-year old man who was a chronic alcoholic presented with confusion, ataxia, and diplopia. What is the treatment protocol?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin B1 injection followed by glucose infusion"
      },
      {
        "id": 2,
        "text": "Glucose infusion followed thiamine injection"
      },
      {
        "id": 3,
        "text": "Glucose infusion alone"
      },
      {
        "id": 4,
        "text": "Thiamine infusion alone"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is of <strong>wernicke's encephalopathy </strong>and treatment is to give <strong>thiamine 100 mg intravenously before administering glucose containing IV fluids.</strong></p>\n<p>The patient's symptoms of confusion, ataxia, and diplopia strongly suggest <strong>Wernicke's encephalopathy</strong>, a neurological disorder commonly seen in individuals with <strong>chronic alcohol</strong> <strong>abuse</strong>. This condition arises due to<strong> thiamine (vitamin B1) deficiency</strong>, which impairs the function of the <strong>pyruvate dehydrogenase enzyme</strong>. The current standard of <strong>treatment</strong> for patients with symptoms of Wernicke's encephalopathy is to give <strong>thiamine 100 mg intravenously before administering glucose-containing IV fluids</strong>.</p>\n<p><strong>Thiamine</strong> is an essential cofactor for the enzyme pyruvate dehydrogenase, a key component of the pyruvate dehydrogenase complex that converts pyruvate to acetyl-CoA. This conversion is critical for linking glycolysis to the citric acid cycle, thereby facilitating energy production in the body.</p>\n<p>Without sufficient thiamine, the activity of pyruvate dehydrogenase is severely impaired, leading to an accumulation of pyruvate and lactate in the blood, causing lactic acidosis. This biochemical disturbance contributes to the neurological symptoms observed. Immediate administration of thiamine is crucial in treating Wernicke's encephalopathy. If left untreated, the condition can progress to<strong> Korsakoff syndrome</strong>, a chronic and debilitating memory disorder. Thus, recognizing the signs and symptoms early and providing thiamine supplementation can lead to rapid improvement and prevent long-term complications.</p>\n<p><strong>Thiamine deficiency</strong>\u00a0leads to the following:</p>\n<p><strong>\u00a0 \u00a0 1. Wernicke\u2019s encephalopathy:\u00a0</strong>It is more commonly seen in alcoholics with chronic thiamine deficiency. It is characterized by :</p>\n<ul>\n<li>Global confusion</li>\n<li>Truncal ataxia</li>\n<li>Ophthalmoplegia</li>\n<li>Horizontal nystagmus\u00a0</li>\n</ul>\n<p>\u00a0 \u00a0 <strong>2. Korsakoff psychosis:</strong>\u00a0symptoms in addition to those of Wernicke's encephalopathy include:</p>\n<ul>\n<li>Memory loss</li>\n<li><strong>Confabulation</strong></li>\n</ul>\n<p>\u00a0 \u00a0 3. <strong>Beriberi:\u00a0</strong>It can present with sensorimotor peripheral neuropathy, and muscle weakness <strong>(dry beriberi)</strong> or tachycardia, cardiomegaly, high-output cardiac failure <strong>(wet beriberi).</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old bodybuilder presented with fatigue on moderate exercise. He had recently started eating raw eggs for protein. Which of the following enzymes is likely deficient in him?",
    "choices": [
      {
        "id": 1,
        "text": "Glucose-6-phosphatase"
      },
      {
        "id": 2,
        "text": "Glycogen phosphorylase"
      },
      {
        "id": 3,
        "text": "Pyruvate carboxylase"
      },
      {
        "id": 4,
        "text": "Phosphoenolpyruvate carboxykinase"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient developed <strong>pyruvate carboxylase</strong> enzyme <strong>deficiency.</strong></p>\n<p>Individuals who eat an excess of <strong>uncooked</strong> <strong>egg-white,</strong> develop <strong>biotin deficiency</strong> and as a result deficiency of the carboxylase enzymes. This is because a protein called, <strong>avidin</strong> present in the egg-white <strong>binds to biotin</strong> in the diet, and makes biotin unavailable for intestinal absorption.</p>\n<p>Biotin deficiency can cause:</p>\n<ul>\n<li>Dermatitis</li>\n<li>Mental status changes (depression, hallucinations)</li>\n<li>Paraesthesia</li>\n<li>Alopecia</li>\n</ul>\n<p>Biotin serves as a co-enzyme for the synthesis of several carboxylase enzymes such as:</p>\n<ul>\n<li style=\"font-weight: 400;\">Acetyl-CoA carboxylase</li>\n<li style=\"font-weight: 400;\">Pyruvate carboxylase</li>\n<li style=\"font-weight: 400;\">Propionyl CoA carboxylase</li>\n<li style=\"font-weight: 400;\">Methylcrotonyl-CoA carboxylase</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A male patient presented with complaints of imbalance, numbness of the foot, and muscle weakness. On history taking, he revealed that he has been taking multivitamin tablets more than the prescribed dose for 1 year. Which of the following is the most likely cause of the associated symptoms seen in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin D toxicity"
      },
      {
        "id": 2,
        "text": "Vitamin B6 toxicity"
      },
      {
        "id": 3,
        "text": "Vitamin C toxicity"
      },
      {
        "id": 4,
        "text": "Vitamin A toxicity"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above clinical vignette points towards the diagnosis of <strong>vitamin B6 toxicity</strong> due to excess intake of vitamin B6 supplements.</p>\n<p>The active form of vitamin B6/pyridoxine is<strong> pyridoxal phosphate(PLP)</strong>. PLP acts as a coenzyme for many reactions such as transaminations, decarboxylations, metabolism of sulfur-containing amino acids, heme synthesis, niacin synthesis, and glycogenolysis.</p>\n<p>Drugs that decrease pyridoxine levels include <strong>isoniazid, cycloserine,oral contraceptives, and alcohol.</strong> Deficiency manifestations of vitamin B6 include <strong>convulsions, peripheral neuritis</strong>, <strong>pellagra</strong> due to decreased niacin synthesis, and <strong>hypochromic microcytic anemia</strong> due to inhibition of heme synthesis. Vitamin B6 levels can be measured by <strong>erythrocyte transaminase assay</strong>.</p>\n<p>Excessive intake of food-based sources of pyridoxine doesn\u2019t cause toxicity, the only source of pyridoxine toxicity is from the intake of supratherapeutic dosing of supplements <strong>more than 100-200mg/day</strong> or iatrogenic. Pyridoxine toxicity manifests as<strong> neurological symptoms</strong> including <strong>numbness, tingling sensation, muscle weakness, and difficulty in ambulation</strong> in severe cases.</p>\n<p>Other options:</p>\n<p>Option A: Intake of vitamin D of <strong>more than 10,000 units</strong> per day can cause toxicity and it manifests as weakness, polyuria, intense thirst, difficulty in speaking, hypertension, weight loss, and <strong>metastatic calcification(calcinosis).</strong></p>\n<p>Option C:\u00a0</p>\n<p>Clinical features of Vitamin C toxicity:</p>\n<ul>\n<li><strong>Abdominal pain,</strong>\u00a0diarrhoea, nausea</li>\n<li>Increased prevalence of\u00a0<strong>kidney stones</strong>\u00a0(oxalate)</li>\n<li>Iron overload (in patients on supplement iron)</li>\n<li><strong>Hemolysis</strong>\u00a0(G6PD deficiency)</li>\n</ul>\n<p>Option D:\u00a0<strong>Acute vitamin A toxicity</strong>\u00a0manifests with headaches, vision changes, fatigue, anorexia, nausea, vomiting, myalgias and arthralgias. Weight loss can be observed with chronic intoxication.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Arjun (32/M) comes to your clinic for a regular health check-up with his wife (28/F). He weighs 65 Kgs and his lifestyle is predominantly sedentary. His wife weighs 55 Kg, is pregnant and is in her second trimester. Her lifestyle is sedentary too. According to the latest NIN RDA guideline, how many calories should Arjun and  his wife respectively consume?",
    "choices": [
      {
        "id": 1,
        "text": "2010 Kcal,  2110 Kcal"
      },
      {
        "id": 2,
        "text": "2110 Kcal,  2010 Kcal"
      },
      {
        "id": 3,
        "text": "2180 kcal,  2110 Kcal"
      },
      {
        "id": 4,
        "text": "2350 kcal, 2150 Kcal"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>According to the <strong>RDA 2020 guideline</strong>, Arjun who is a <strong>sedentary worker</strong> must consume <strong>2110 Kcal.</strong></p>\n<p>His <strong>pregnant wife </strong>with a<strong> sedentary lifestyle</strong> must consume(1660+350)&nbsp;<strong>2010 Kcal.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A mother complains that her child is reluctant when it comes to taking feeds appropriately. Her 15-month-old boy has a length-for-age \u2264 \u20132 SD below the median. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Acute malnutrition"
      },
      {
        "id": 2,
        "text": "Severely wasting"
      },
      {
        "id": 3,
        "text": "Moderately underweight"
      },
      {
        "id": 4,
        "text": "Moderate stunting"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This child with a <strong>length-for-age &le; &ndash;2 SD below the median</strong> is having <strong>moderate stunting.</strong></p>\n<p>The anthropometric measures used are weight for age, height for age, weight for height, BMI, and mid-upper arm circumference.</p>\n<ul>\n<li><strong>Low weight for height</strong>, or <strong>wasting</strong>, indicates&nbsp;<strong>acute malnutrition.</strong>&nbsp;It is also called as <strong>wasting</strong>&nbsp;as a result of a <strong>recent food deficit</strong> or an <strong>acute illness</strong> such as <strong>diarrhea</strong>.</li>\n<li>High weight-for-height indicates overweight.</li>\n<li><strong>Low height-for-age,</strong>&nbsp;or&nbsp;<strong>stunting</strong>, indicates&nbsp;<strong>chronic malnutrition.&nbsp;</strong>This is the best&nbsp;indicator of&nbsp;<strong>long-term&nbsp;</strong>nutritional status in the pediatric population.&nbsp;</li>\n<li><strong><strong>Low&nbsp;weight for age</strong></strong>, or<strong><strong> underweight</strong></strong>&nbsp;indicates&nbsp;<strong>acute or chronic </strong>malnutrition. It&nbsp;does not differentiate between wasting and stunting. Hence, it has limited clinical significance.</li>\n</ul>\n<p><strong>Mid-upper arm circumference</strong>&nbsp;(MUAC) is an&nbsp;<strong>age-independent parameter</strong>&nbsp;used for screening wasting in children. Classification of nutritional status depending on the anthropometry (height/length for age) is given in the pearl below.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Lathyrism is caused by which of the following toxic compounds?",
    "choices": [
      {
        "id": 1,
        "text": "Pyrrolizidine alkaloids"
      },
      {
        "id": 2,
        "text": "BOAA"
      },
      {
        "id": 3,
        "text": "Sanguinarine"
      },
      {
        "id": 4,
        "text": "Aflatoxins"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>BOAA&nbsp;(Beta oxalyl amino alanine)</strong> is the toxic compound causing <strong>Lathyrism.</strong></p>\n<p>It is due to the consumption of <strong>Khesari dal/Lathyrus sativus</strong>.&nbsp;Lathyrism is a paralyzing disease of humans and animals.</p>\n<p>In humans, it is referred to as <strong>neurolathyrism</strong> because it&nbsp;affects the nervous system. It is&nbsp;characterized by gradually developing spastic&nbsp;paralysis of lower limbs.</p>\n<p>The water soluble property of the toxin is used in&nbsp;removing from the pulses by <strong>soaking&nbsp;it in hot water</strong> and rejecting the soaked water.&nbsp;<strong>Vitamin C</strong> in doses of 500-1000mg can be used for the prevention and treatment of lathyrism.</p>\n<table>\n<tbody>\n<tr>\n<td><strong>Disease</strong>&nbsp;&nbsp;</td>\n<td><strong>Food Substance/Contaminant&nbsp;</strong></td>\n<td><strong>Toxic Principle&nbsp;</strong></td>\n</tr>\n<tr>\n<td>Neurolathyrism</td>\n<td>Lathyrus&nbsp;sativus /Khesari&nbsp;dal&nbsp;</td>\n<td>BOAA&nbsp;</td>\n</tr>\n<tr>\n<td>Epidemic dropsy&nbsp;</td>\n<td>Argemone&nbsp;oil&nbsp;</td>\n<td>Sanguinarine&nbsp;</td>\n</tr>\n<tr>\n<td>Ergotism</td>\n<td>Bajra, wheat/ Claviceps purpurea</td>\n<td>Clavine alkaloids</td>\n</tr>\n<tr>\n<td>Endemic ascites&nbsp;</td>\n<td>Crotalaria/Jhunjhunia&nbsp;</td>\n<td>Pyrrolizidine alkaloids&nbsp;</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following vitamin is the most potent and naturally occurring antioxidant?",
    "choices": [
      {
        "id": 1,
        "text": "Beta carotene"
      },
      {
        "id": 2,
        "text": "Vitamin E"
      },
      {
        "id": 3,
        "text": "Vitamin C"
      },
      {
        "id": 4,
        "text": "Vitamin B1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Vitamin E is&nbsp;the most potent </strong>and <strong>naturally occurring antioxidant.</strong></p>\n<p>Protective antioxidant nutrients:</p>\n<ul>\n<li>Selenium</li>\n<li>Vitamin C</li>\n<li>Vitamin E</li>\n<li>&beta;-carotene (vitamin A)and other carotenoids</li>\n<li>Polyphenolic compounds derived from plant foods</li>\n</ul>\n<p>Therapeutic uses of<strong> high dose of Vitamin E:</strong></p>\n<p>1)Retrolental fibroplasia</p>\n<p>2)Bronchopulmonary dysplasia</p>\n<p>3)Intraventricular hemorrhage</p>\n<p>4)Used for treatment of intermittent claudication.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the best indicator of chronic malnutrition?",
    "choices": [
      {
        "id": 1,
        "text": "Mid-arm circumference"
      },
      {
        "id": 2,
        "text": "Height for age"
      },
      {
        "id": 3,
        "text": "Weight for age"
      },
      {
        "id": 4,
        "text": "Weight for height"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Height for age</strong> is the best indicator of <strong>chronic malnutrition</strong>.</p>\n<p>Nutritional status is often assessed in terms of anthropometry:</p>\n<ul>\n<li><strong>Low weight for height</strong>, or wasting, indicates&nbsp;<strong>acute malnutrition.</strong>&nbsp;</li>\n<li>High weight-for-height indicates overweight.</li>\n<li><strong>Low height for age,</strong>&nbsp;or&nbsp;<strong>stunting</strong>, indicates&nbsp;<strong>chronic malnutrition.&nbsp;</strong>This is the best&nbsp;indicator of&nbsp;<strong>long-term&nbsp;</strong>nutritional status in the pediatric population.</li>\n<li><strong>Low&nbsp;weight for the age</strong>&nbsp;indicates&nbsp;<strong>acute or chronic malnutrition</strong>. It&nbsp;does not differentiate between wasting and stunting. Hence, it has limited clinical significance.</li>\n</ul>\n<p><strong>Mid-upper arm circumference</strong>&nbsp;(MUAC) is an&nbsp;<strong>age-independent parameter</strong>&nbsp;used for the screening of wasting in children.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/822453dee40147609896aabb823b8f46x1280x1271.JPEG"
    ]
  },
  {
    "text": "All of the following vitamins are synthesized by the bacterial flora in the intestine except?",
    "choices": [
      {
        "id": 1,
        "text": "Niacin"
      },
      {
        "id": 2,
        "text": "Biotin"
      },
      {
        "id": 3,
        "text": "Vitamin K"
      },
      {
        "id": 4,
        "text": "Pantothenic Acid"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Niacin is not synthesized by the bacterial flora.</p>\n<p><strong>Endogenously synthesized vitamins </strong>can be from 2 sources:</p>\n<p>1. Synthesized by the body</p>\n<ul>\n<li><strong>Niacin:</strong> synthesized from an amino acid <strong>tryptophan</strong></li>\n<li><strong>Vitamin D:</strong> synthesized from 7 Dehydrocholesterol by exposure to UV-B rays (290-315 nm) in the skin.</li>\n</ul>\n<p>2. Synthesized in the body (by <strong>bacterial flora</strong> in the intestine)</p>\n<ul>\n<li><strong>Vitamin K&nbsp;</strong></li>\n<li><strong>Biotin&nbsp;</strong></li>\n<li><strong>Pantothenic Acid&nbsp;</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following biochemical parameters are correct in Vitamin D-dependent rickets?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Lab investigations in rickets reveal <strong>normal/decreased serum calcium, decreased phosphorous, elevated PTH, and increased ALP levels.</strong></p>\n<p>Rickets occurs due to a nutritional deficiency in vitamin D. Decreased vitamin D leads to decreased calcium and phosphate due to reduced absorption. The decreased calcium stimulates increased PTH production.&nbsp;ALP level is increased as it is involved in bone mineralization.</p>\n<p>The interaction between these are given below:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/45db057979574298be3e7b2fc1de4572x1280x1596.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aad07492de3e42808cfcc830954fe9fbx1280x1838.JPEG"
    ]
  },
  {
    "text": "RDA of calcium for pregnant and breastfeeding mothers are, respectively:",
    "choices": [
      {
        "id": 1,
        "text": "1000 mg and 1000 mg"
      },
      {
        "id": 2,
        "text": "1000 mg and 1200 mg"
      },
      {
        "id": 3,
        "text": "1200 mg and 1200 mg"
      },
      {
        "id": 4,
        "text": "1200 mg and 1000 mg"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>According to the <strong>RDA 2020 guideline</strong>,\u00a0RDA of calcium for pregnant and breastfeeding mothers are\u00a01000 mg and 1200 mg, respectively.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 39-year-old woman from China has an echocardiography report showing dilated cardiomyopathy. Which of the following conditions could account for her diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Thiamine deficiency"
      },
      {
        "id": 2,
        "text": "Selenium deficiency"
      },
      {
        "id": 3,
        "text": "Zinc deficiency"
      },
      {
        "id": 4,
        "text": "Copper deficiency"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The patient is probably suffering from <strong>Keshan's disease</strong>, which is due to <strong>selenium deficiency.</strong></p>\n<p><strong>Keshan disease</strong> is <strong>endemic cardiomyopathy </strong>found in children and young women residing in regions of China where <strong>dietary intake of selenium is low</strong>. Mainly dilated cardiomyopathy is characteristic, and may also result in cardiomegaly, congestive cardiac failure and fulminant cardiogenic shock. Selenium is an important trace element that is a part of the<strong> 21st amino acid selenocysteine</strong>.</p>\n<p>There are many selenium-containing enzymes such as,\u00a0Glutathione peroxidase, De-iodinase, Thioredoxin reductase. Selenium is also an <strong>intracellular antioxidant</strong> that complements the role of vitamin E. Dietary sources of selenium include seafood, muscle meat, and some cereals.</p>\n<p><strong>Clinical correlates:</strong></p>\n<ul>\n<li><strong>Keshan disease</strong> is endemic cardiomyopathy found in children and young women residing in regions of China where dietary intake of selenium is low.</li>\n<li class=\"page\" title=\"Page 389\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Selenium toxicity <strong>(Kashinbeck Disease):\u00a0</strong>Chronic ingestion of high amounts of selenium leads to selenosis (<strong>Kashinbeck disease</strong>). It is characterized by hair and nail brittleness, garlic breath odor, myopathy, irritability, and other abnormalities of the nervous system.</p>\n</div>\n</div>\n</div>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 8 month-old baby is brought to the pediatric clinic with symptoms of diarrhea, hair loss and failure to thrive. On clinical examination, there is inflammation of the skin around the mouth and the perianal region. The mineral deficiency responsible for this disease is?",
    "choices": [
      {
        "id": 1,
        "text": "Zinc"
      },
      {
        "id": 2,
        "text": "Selenium"
      },
      {
        "id": 3,
        "text": "Chromium"
      },
      {
        "id": 4,
        "text": "Copper"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The symptoms and clinical findings, strongly suggest a diagnosis of&nbsp;<strong>Acrodermatitis enteropathica</strong> which is due to the <strong>deficiency of zinc.</strong></p>\n<p>It is an autosomal recessive disease due to a defect in <strong>zinc absorbing transmembrane protein.</strong></p>\n<p><strong>Symptoms:</strong></p>\n<ul>\n<li>Growth retardation</li>\n<li>Diarrhea</li>\n<li>Alopecia</li>\n<li>Rash involving the extremities, face, and perineum(rash is characterized by <strong>vesicular</strong> and <strong>pustular crusting </strong>with scaling and erythema)</li>\n<li>Gonadal atrophy</li>\n<li>Muscle wasting</li>\n<li>Impaired wound healing</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/31b2498bd4ef4579a913c4cd72c86a30x428x521.PNG"
    ]
  },
  {
    "text": "A patient has profuse bleeding after the removal of an IV cannula. He underwent a small bowel resection and was given broad-spectrum antibiotics during his hospital stay. His lab investigations show an elevated prothrombin time (PT). The deficiency of which of the following vitamins is responsible for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Riboflavin"
      },
      {
        "id": 2,
        "text": "Vitamin E"
      },
      {
        "id": 3,
        "text": "Niacin"
      },
      {
        "id": 4,
        "text": "Vitamin K"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The deficiency of <strong>vitamin K</strong> is responsible for this condition.</p>\n<p>Vitamin K deficiency in adults may be seen in patients with chronic small-intestinal diseases like celiac disease, Crohn\u2019s disease, obstructed biliary tracts, and <strong>after small-bowel resection.\u00a0</strong>Additionally, <strong>broad-spectrum antibiotics</strong> can precipitate Vitamin K deficiency by reducing the number of gut bacteria, which synthesize menaquinones.</p>\n<div class=\"page\" title=\"Page 2363\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>It is a fat-soluble vitamin that has two natural forms: Vitamin K1, also known as phylloquinone, from vegetable sources, and vitamin K2, or menaquinones, which are synthesized by bacterial flora and found in hepatic tissue.</p>\n</div>\n</div>\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Vitamin K is required for the posttranslational <strong>carboxylation</strong> of <strong>glutamic acid</strong>, which is necessary for <strong>calcium binding to \u03b3-carboxylated proteins</strong> such as</p>\n<ul>\n<li>prothrombin (factor II)</li>\n<li>factors VII, IX, and X</li>\n<li>protein C, protein S</li>\n</ul>\n<div class=\"page\" title=\"Page 2363\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Patients with vitamin K deficiency usually present with a <strong>history of bleeding</strong> either at <strong>venipuncture sites</strong> or minor trauma.</p>\n<p>It is diagnosed on the basis of an <strong>elevated prothrombin time</strong> or <strong>reduced clotting factors.\u00a0</strong>It is treated with supplementation by oral or IV route.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<p>Other options:</p>\n<p>Option A: <strong>Riboflavin</strong> or Vitamin B2 deficiency manifests as angular stomatitis, magenta tongue, seborrhea, corneal vascularization. It is seen in alcoholism, and individuals with a poor diet and decreased intake of dairy products.</p>\n<p>Option B: <strong>Vitamin E</strong> deficiency manifests as peripheral neuropathy, spinocerebellar ataxia, skeletal muscle atrophy, and retinopathy. Usually seen with\u00a0fat malabsorption or genetic abnormalities of vitamin E metabolism.</p>\n<p>Option C: <strong>Niacin</strong> deficiency manifests as <strong>pellagra</strong>, which includes symptoms of diarrhea, a pigmented rash over sun-exposed areas, bright red tongue, memory loss, and altered sensorium.\u00a0Alcoholism, vitamin B6 deficiency, riboflavin, and tryptophan deficiencies predispose to this condition.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Deficiency of which of the following causes Keshan's disease?",
    "choices": [
      {
        "id": 1,
        "text": "Thiamine"
      },
      {
        "id": 2,
        "text": "Selenium"
      },
      {
        "id": 3,
        "text": "Zinc"
      },
      {
        "id": 4,
        "text": "Copper"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Keshan disease</strong>&nbsp;is due to a&nbsp;deficiency of<strong> selenium</strong>.</p>\n<p>Selenium is an important trace element which is a part of the 21st amino acid <strong>Selenocysteine</strong>. There are many selenium-containing enzymes such as :</p>\n<ul>\n<li>Glutathione peroxidase</li>\n<li>De-iodinase</li>\n<li>Thioredoxin reductase</li>\n</ul>\n<p>Selenium is also an <strong>intracellular antioxidant</strong> which complements the role of Vitamin E. Dietary sources of selenium include seafood, meat, and&nbsp;some cereals.</p>\n<p><strong>Keshan disease</strong>&nbsp;is&nbsp;<strong>endemic cardiomyopathy</strong>&nbsp;found in children and young women residing in regions of&nbsp;China&nbsp;where&nbsp;dietary intake of<strong> selenium is low</strong>. <strong>Dilated cardiomyopathy</strong>&nbsp;is the characteristic feature, but it may also result in congestive cardiac failure, cardiomegaly, and fulminant cardiogenic shock. It is associated with&nbsp;<strong>tumorigenesis&nbsp;</strong>(increased risk of progression to metaplasia)&nbsp;and&nbsp;<strong>atherosclerosis</strong>.</p>\n<p>Other options:</p>\n<p>Option A:<strong> Thiamine deficiency</strong> leads to Beri-beri and&nbsp;Wernicke&ndash;Korsakoff&rsquo;s syndrome.</p>\n<p>Option C:<strong> Zinc deficiency&nbsp;</strong>causes&nbsp;<strong>acrodermatitis enteropathica</strong>.&nbsp;Clinical features include failure to thrive, anorexia, <strong>diarrhoea,</strong> recurrent infections, <strong>alopecia</strong>, and neurological manifestations like <strong>tremors,</strong> nystagmus, irritability, and night blindness. Skin changes include&nbsp;<strong>vesiculobullous dermatitis</strong> on the extremities, perianal and perioral regions.&nbsp;<strong>Chronic zinc deficiency&nbsp;</strong>can cause&nbsp;<strong>stunted growth</strong>, decreased taste sensation(<strong>hypogeusia</strong>),&nbsp;<strong>impaired immune function</strong>&nbsp;and<strong>&nbsp;hypogonadism,&nbsp;</strong>and<strong>&nbsp;</strong>hypopigmented hair.</p>\n<p>Option D:&nbsp;<strong>Copper deficiency</strong>&nbsp;can present as anemia, cardiovascular defects including aneurysms, hypopigmentation, and neurological symptoms such as ataxia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 39-year-old man who presented with burning pain in lower extremities along with staggering gait was diagnosed with burning feet syndrome. On further evaluation, he was found to be deficient in a particular vitamin. The deficient vitamin contains which of the following amino acids?",
    "choices": [
      {
        "id": 1,
        "text": "Phenylalanine"
      },
      {
        "id": 2,
        "text": "Arginine"
      },
      {
        "id": 3,
        "text": "Beta-alanine"
      },
      {
        "id": 4,
        "text": "Tryptophan"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The vitamin that is deficient in <strong>burning feet syndrome</strong> is <strong>vitamin B5</strong> (pantothenic acid) which contains <strong>beta-alanine.</strong></p>\n<p>Beta-alanine is seen in:</p>\n<ul>\n<li style=\"font-weight: 400;\">Pantothenic acid (vitamin B5)</li>\n<li style=\"font-weight: 400;\">Coenzyme A</li>\n<li style=\"font-weight: 400;\">Carnosine</li>\n<li style=\"font-weight: 400;\">Anserine</li>\n<li style=\"font-weight: 400;\">Acyl carrier protein</li>\n</ul>\n<p>Other features of pantothenic acid deficiency:</p>\n<ul>\n<li>GI disturbances</li>\n<li>Paraesthesia</li>\n<li>Muscle cramps</li>\n<li>Ataxia</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most common deficiency observed after gastric bypass/bariatric surgery?",
    "choices": [
      {
        "id": 1,
        "text": "Iron"
      },
      {
        "id": 2,
        "text": "Copper"
      },
      {
        "id": 3,
        "text": "Zinc"
      },
      {
        "id": 4,
        "text": "Calcium"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Iron deficiency</strong> is the <strong>most common deficiency</strong> observed <strong>following gastric bypass or bariatric surgery</strong>.&nbsp;Iron is absorbed in the duodenum and proximal jejunum, bypass procedures lead to or exacerbate an existing deficiency by impairing absorption. It is more common in the&nbsp;Roux-en-Y gastric bypass (RYGB) and biliopancreatic diversion with duodenal switch (BPD/DS) procedures than in sleeve gastrectomy (SG).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Fmge Mini Test - 005 (Nutrition)';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2023"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>