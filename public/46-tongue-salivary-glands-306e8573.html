<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>46  Tongue  Salivary Glands - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        DAMS / DQB / Anatomy
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">32</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "id": 50000,
    "choices": [
      {
        "id": 200000,
        "text": "Deviation of tongue to right side"
      },
      {
        "id": 200001,
        "text": "Deviation of tongue to left side"
      },
      {
        "id": 200002,
        "text": "Deviation of soft palate to right side"
      },
      {
        "id": 200003,
        "text": "Deviation of soft palate to left side"
      }
    ],
    "text": "Palsy of right genioglossus causes:",
    "unique_key": "Q9790921",
    "question_audio": null,
    "question_video": null,
    "map_id": 34590970,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Deviation of tongue to right side The genioglossus muscle is responsible for moving the tongue. It is innervated by the hypoglossal nerve (cranial nerve XII). If there is palsy of the right genioglossus, the muscle on the right side will not function properly, leading to a lack of movement on that side of the tongue. Consequently, the tongue will deviate to the right side due to the unopposed action of the genioglossus muscle on the left side. The tongue's deviation toward the side of weakness is a classic sign of hypoglossal nerve or genioglossus dysfunction. Incorrect Answers: B. Deviation of tongue to left side This option is incorrect because if the right genioglossus muscle is paralyzed, the tongue will not move towards the left side. Instead, the weakness of the right side causes the tongue to deviate to the right. The muscle on the left side will continue to pull the tongue towards the left, but without the action of the right side, the tongue will move towards the right side. C. Deviation of soft palate to right side This option is incorrect because the genioglossus muscle affects the tongue, not the soft palate. The movement of the soft palate is controlled by muscles innervated by different cranial nerves, particularly the vagus nerve (cranial nerve X). A palsy in the genioglossus would not impact the movement of the soft palate, so it would not cause deviation of the soft palate to the right. D. Deviation of soft palate to left side This option is incorrect for the same reason as option C. The genioglossus is not involved in the movement of the soft palate. If the soft palate deviates, it would typically indicate issues with the vagus nerve or the palatal muscles, not the genioglossus. Therefore, palsy of the right genioglossus would not lead to a deviation of the soft palate in any direction.",
    "correct_choice_id": 200000,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18417611698072472/18417611698072472.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18417611698072472/18417611698072472.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50001,
    "choices": [
      {
        "id": 200004,
        "text": "Buccopharyngeal fascia"
      },
      {
        "id": 200005,
        "text": "Buccinator"
      },
      {
        "id": 200006,
        "text": "Buccal fat pad"
      },
      {
        "id": 200007,
        "text": "Masseter"
      }
    ],
    "text": "Parotid duct passes through all the following structures EXCEPT:",
    "unique_key": "Q2472522",
    "question_audio": null,
    "question_video": null,
    "map_id": 34315258,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Masseter The parotid duct, also known as Stensen's duct, passes through several structures in the cheek, but it does not pass through the masseter muscle. The masseter is a powerful muscle responsible for elevating the jaw, and although the duct runs near the masseter, it does not pass through it. Instead, the duct travels through the buccal fat pad and the buccinator muscle before opening into the oral cavity. Therefore, the masseter is the exception in this list. Incorrect Answers: A. Buccopharyngeal fascia The parotid duct does pass through the buccopharyngeal fascia. This fascia is a connective tissue layer that covers the pharynx and surrounds structures like the parotid gland. The duct traverses this fascia as it exits the gland and moves towards the oral cavity. B. Buccinator The parotid duct does pass through the buccinator muscle. The buccinator is a thin, flat muscle in the cheek that helps in the manipulation of food within the mouth. The parotid duct traverses through this muscle as it travels toward the mouth, eventually opening opposite the second upper molar. C. Buccal fat pad The parotid duct passes through the buccal fat pad. The buccal fat pad is located in the cheek and provides cushioning for structures like the parotid duct as it travels through the cheek. The duct is positioned near the buccal fat pad, and the fat pad itself plays a role in the structure and movement of the duct within the cheek.",
    "correct_choice_id": 200007,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66530981698072512/66530981698072512.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66530981698072512/66530981698072512.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50002,
    "choices": [
      {
        "id": 200008,
        "text": "Greater petrosal nerve"
      },
      {
        "id": 200009,
        "text": "Chorda tympani in the middle ear cavity"
      },
      {
        "id": 200010,
        "text": "Superior cervical ganglion"
      },
      {
        "id": 200011,
        "text": "Lesser petrosal nerve"
      }
    ],
    "text": "A 46-year-old man complains of dryness of the mouth. On examination he lack salivary secretion from the submandibular gland. This indicates a lesion of which of the following nervous structures?",
    "unique_key": "Q2390928",
    "question_audio": null,
    "question_video": null,
    "map_id": 34135270,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Chorda tympani in the middle ear cavity The chorda tympani is a branch of the facial nerve (CN VII) that carries parasympathetic fibers responsible for stimulating saliva production in the submandibular and sublingual glands. The chorda tympani joins the lingual nerve before synapsing at the submandibular ganglion, where postganglionic fibers then stimulate salivation. A lesion affecting the chorda tympani, particularly in the middle ear cavity, can result in a loss of salivation from the submandibular gland, leading to symptoms like dryness of the mouth. Hence, the correct answer is option B. Incorrect Answers: A. Greater petrosal nerve The greater petrosal nerve also carries parasympathetic fibers from the facial nerve (CN VII) but primarily innervates the lacrimal gland and mucosal glands of the nasal cavity and palate. While it is involved in parasympathetic functions, it does not directly affect the submandibular gland, making it an incorrect choice for this specific symptom of dryness of the mouth. C. Superior cervical ganglion The superior cervical ganglion is part of the sympathetic nervous system, providing sympathetic innervation to structures such as the eyes and the salivary glands. It helps regulate blood flow to the glands and can influence secretion, but it does not directly control parasympathetic salivation, particularly from the submandibular gland. A lesion here is less likely to cause the specific dryness of the mouth seen in this patient, which is related to parasympathetic dysfunction. D. Lesser petrosal nerve The lesser petrosal nerve, another branch of the glossopharyngeal nerve (CN IX), innervates the parotid gland, not the submandibular gland. It carries parasympathetic fibers to the otic ganglion, which then stimulates salivation from the parotid gland. A lesion of the lesser petrosal nerve would affect parotid secretion, not the submandibular gland, making this option incorrect in the context of this patient's symptoms.",
    "correct_choice_id": 200009,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43204431698072657/43204431698072657.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43204431698072657/43204431698072657.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50003,
    "choices": [
      {
        "id": 200012,
        "text": "VII nerve"
      },
      {
        "id": 200013,
        "text": "IX nerve"
      },
      {
        "id": 200014,
        "text": "V nerve"
      },
      {
        "id": 200015,
        "text": "XII nerve"
      }
    ],
    "text": "Pain in post 1/3 tongue after tonsillectomy is due to injury to-",
    "unique_key": "Q1889551",
    "question_audio": null,
    "question_video": null,
    "map_id": 34322719,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) IX nerve. Pain in the posterior third of the tongue after tonsillectomy is due to injury to the glossopharyngeal nerve (cranial nerve IX). The glossopharyngeal nerve is responsible for the sensory innervation of the posterior third of the tongue, including the taste sensation and general sensation. During tonsillectomy, the tonsils are located near the area where the glossopharyngeal nerve provides sensory input. Thus, injury or irritation to this nerve during the procedure can lead to pain in the posterior third of the tongue. This is a common and expected complication following tonsillectomy. Incorrect Options: A. VII nerve: The facial nerve (cranial nerve VII) is responsible for the motor innervation of the muscles of facial expression and the taste sensation of the anterior two-thirds of the tongue. It does not provide sensory innervation to the posterior third of the tongue, so it is not responsible for pain in that region after tonsillectomy. C. V nerve: The trigeminal nerve (cranial nerve V) provides sensory innervation to the face, including parts of the oral cavity, but it does not innervate the posterior third of the tongue. It is more involved in sensation to the face, teeth, and mouth, not the posterior third of the tongue, so it is not responsible for the pain described after tonsillectomy. D. XII nerve: The hypoglossal nerve (cranial nerve XII) primarily provides motor innervation to the muscles of the tongue, controlling movements such as speech and swallowing. It does not carry sensory fibers for the posterior third of the tongue, which is innervated by the glossopharyngeal nerve. Therefore, injury to the hypoglossal nerve is unlikely to cause pain in the posterior third of the tongue following tonsillectomy.",
    "correct_choice_id": 200013,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18908821698072913/18908821698072913.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18908821698072913/18908821698072913.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50004,
    "choices": [
      {
        "id": 200016,
        "text": "Auriculo - temporal nerve"
      },
      {
        "id": 200017,
        "text": "Facial nerve"
      },
      {
        "id": 200018,
        "text": "Trigeminal nerve"
      },
      {
        "id": 200019,
        "text": "Maxillary nerve"
      }
    ],
    "text": "Secretomotor fibres to the parotid is via",
    "unique_key": "Q4721434",
    "question_audio": null,
    "question_video": null,
    "map_id": 34499375,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Auriculo-temporal nerve. The auriculo-temporal nerve is a branch of the mandibular nerve (V3), which is part of the trigeminal nerve. The auriculo-temporal nerve carries secretomotor fibers to the parotid gland. These fibers are parasympathetic fibers that originate in the glossopharyngeal nerve (cranial nerve IX), synapse in the otic ganglion, and then travel via the auriculo-temporal nerve to the parotid gland, stimulating saliva production. Therefore, the auriculo-temporal nerve is the correct pathway for secretomotor innervation to the parotid gland. Incorrect Options: B. Facial nerve: The facial nerve (cranial nerve VII) innervates the muscles of facial expression and provides parasympathetic fibers to the lacrimal glands, submandibular, and sublingual glands. However, it does not provide secretomotor fibers to the parotid gland, making this option incorrect. C. Trigeminal nerve: The trigeminal nerve (cranial nerve V) provides sensory innervation to the face and motor innervation to the muscles of mastication. While it has branches like the mandibular nerve (V3) that contribute to sensory innervation of the parotid region, it does not carry secretomotor fibers to the parotid gland. The secretomotor fibers specifically travel through the auriculo-temporal nerve, which is a branch of V3, but not through the entire trigeminal nerve itself. D. Maxillary nerve: The maxillary nerve (V2) is another branch of the trigeminal nerve, but it does not supply the parotid gland. It primarily provides sensory innervation to the upper face, including the cheek, upper lip, and nasal cavity, but it does not carry secretomotor fibers to the parotid gland.",
    "correct_choice_id": 200016,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27347631698075179/27347631698075179.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27347631698075179/27347631698075179.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50005,
    "choices": [
      {
        "id": 200020,
        "text": "Deep"
      },
      {
        "id": 200021,
        "text": "Superficial"
      },
      {
        "id": 200022,
        "text": "In the Substance of parotid"
      },
      {
        "id": 200023,
        "text": "None"
      }
    ],
    "text": "The relation of facial nerve branches to parotid gland is-",
    "unique_key": "Q1677934",
    "question_audio": null,
    "question_video": null,
    "map_id": 34978653,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) In the substance of parotid The facial nerve (cranial nerve VII) enters the parotid gland and then divides into its five main branches: temporal, zygomatic, buccal, mandibular, and cervical. These branches are located within the substance of the parotid gland, meaning they pass through the gland itself rather than being superficial or deep to it. The facial nerve does not innervate the parotid gland, which is innervated by the glossopharyngeal nerve (via the lesser petrosal nerve), but its branches pass through the parotid to supply the muscles of facial expression. Therefore, the correct answer is C. Incorrect Answers: A. Deep The facial nerve is not located deep to the parotid gland; rather, it passes through the gland. The deep structures, such as the carotid artery, are separate from the facial nerve\u2019s course. Therefore, \"deep\" is not an accurate description of the facial nerve\u2019s relationship with the parotid gland. B. Superficial The facial nerve branches are not superficial to the parotid gland; they travel within the gland. They do not lie directly beneath the skin or on the outermost part of the parotid, so \"superficial\" is incorrect. D. None Since the correct answer is that the facial nerve branches pass through the substance of the parotid gland, \"none\" is not a valid option.",
    "correct_choice_id": 200022,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30791891698073033/30791891698073033.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30791891698073033/30791891698073033.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50006,
    "choices": [
      {
        "id": 200024,
        "text": "Hypoglossal"
      },
      {
        "id": 200025,
        "text": "Chorda tympani"
      },
      {
        "id": 200026,
        "text": "Lingual"
      },
      {
        "id": 200027,
        "text": "Glossopharyngeal"
      }
    ],
    "text": "The posterior 1/3 of the tongue is supplied by nerve:",
    "unique_key": "Q6582471",
    "question_audio": null,
    "question_video": null,
    "map_id": 34889974,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Glossopharyngeal The posterior one-third of the tongue is primarily supplied by the glossopharyngeal nerve (cranial nerve IX). This nerve provides both sensory (taste and general sensation) and motor innervation to the posterior part of the tongue. The glossopharyngeal nerve is responsible for the sensation of taste from the posterior third and general sensation such as touch and pain from the same region. Additionally, it contributes to the motor function of the muscles involved in swallowing, via the pharyngeal muscles. Therefore, option D is correct. Incorrect Answers: A. Hypoglossal The hypoglossal nerve (cranial nerve XII) is primarily responsible for the motor innervation of the muscles of the tongue (except for the palatoglossus, which is innervated by the vagus nerve). It does not supply sensory innervation to the tongue, nor does it supply the posterior third of the tongue. Hence, option A is incorrect. B. Chorda tympani The chorda tympani is a branch of the facial nerve (cranial nerve VII) that carries taste fibers from the anterior two-thirds of the tongue. It does not provide sensation to the posterior third of the tongue. Thus, option B is incorrect. C. Lingual The lingual nerve, a branch of the mandibular division of the trigeminal nerve (cranial nerve V3), provides general sensation (touch, pain, temperature) to the anterior two-thirds of the tongue but not the posterior third. It does not supply the posterior third of the tongue.",
    "correct_choice_id": 200027,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49220991698073199/49220991698073199.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49220991698073199/49220991698073199.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50007,
    "choices": [
      {
        "id": 200028,
        "text": "Stenson\u2019s duct opens near 3rd molar"
      },
      {
        "id": 200029,
        "text": "Facial nerve branches divide it into superficial and deep parts"
      },
      {
        "id": 200030,
        "text": "Facial nerve supplies it"
      },
      {
        "id": 200031,
        "text": "Pierced by retromandibular vein and facial artery"
      }
    ],
    "text": "Which among the following is true regarding anatomy of the parotid gland?",
    "unique_key": "Q6791227",
    "question_audio": null,
    "question_video": null,
    "map_id": 34453642,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Facial nerve branches divide it into superficial and deep parts. Explanation: Correct Answer: (B) Facial nerve branches divide it into superficial and deep parts: The facial nerve (CN VII) enters the parotid gland and divides it into superficial and deep parts. The branches of the facial nerve that emerge from the parotid gland are responsible for innervating the muscles of facial expression. These branches do not supply the parotid gland but pass through it. The division of the gland into superficial and deep parts is a result of the branching of the facial nerve within the gland. Incorrect Answers: (A) Stenson\u2019s duct opens near 3rd molar: Stenson\u2019s duct actually opens on the buccal mucosa opposite the second upper molar, not the third. This duct is the excretory duct of the parotid gland. (C) Facial nerve supplies it: This is incorrect. The facial nerve does not supply the parotid gland. The parotid gland is innervated by the glossopharyngeal nerve via the auriculotemporal nerve, which carries parasympathetic fibers. (D) Pierced by retromandibular vein and facial artery: Although it is true that the retromandibular vein and the facial artery are located near or pass through the parotid gland, this statement is misleading. The parotid gland itself is not pierced by these structures, but they run through or are adjacent to the gland. The facial artery actually arises from the external carotid artery and supplies the face, while the retromandibular vein is formed by the union of the superficial temporal and maxillary veins.",
    "correct_choice_id": 200029,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36393671698075405/36393671698075405.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36393671698075405/36393671698075405.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50008,
    "choices": [
      {
        "id": 200032,
        "text": "Hypoglossal Nerve"
      },
      {
        "id": 200033,
        "text": "Chorda tympani"
      },
      {
        "id": 200034,
        "text": "Glossopharyngeal N."
      },
      {
        "id": 200035,
        "text": "All of the above"
      }
    ],
    "text": "Taste sensation from the anterior 2/3 of tongue is carried by-",
    "unique_key": "Q3122707",
    "question_audio": null,
    "question_video": null,
    "map_id": 34731119,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Chorda tympani. Explanation: The chorda tympani is a branch of the facial nerve (cranial nerve VII), and it carries taste sensation from the anterior two-thirds of the tongue. The chorda tympani joins the lingual nerve (a branch of the mandibular nerve, V3) to reach the tongue, where it transmits taste information from the anterior portion of the tongue. This is the primary nerve responsible for taste sensation in this region. Incorrect responses: A. Hypoglossal Nerve: The hypoglossal nerve (cranial nerve XII) is a motor nerve that innervates the muscles of the tongue (except the palatoglossus, which is innervated by the vagus nerve). It does not carry taste sensation. Therefore, it is not involved in the transmission of taste sensation from the anterior two-thirds of the tongue. C. Glossopharyngeal N.: The glossopharyngeal nerve (cranial nerve IX) is responsible for taste sensation from the posterior one-third of the tongue, not the anterior two-thirds. It also provides general sensation and motor innervation to the pharynx and soft palate. However, it does not contribute to the taste sensation in the anterior part of the tongue. D. All of the above: As explained, the hypoglossal nerve does not carry taste sensation, and the glossopharyngeal nerve is responsible for the posterior third of the tongue. Therefore, this option is incorrect.",
    "correct_choice_id": 200033,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67552441698073838/67552441698073838.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67552441698073838/67552441698073838.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50009,
    "choices": [
      {
        "id": 200036,
        "text": "Hypoglossal nerve"
      },
      {
        "id": 200037,
        "text": "Vagus nerve"
      },
      {
        "id": 200038,
        "text": "Glossopharyngeal nerve"
      },
      {
        "id": 200039,
        "text": "Lingual nerve"
      }
    ],
    "text": "General sensation to the posterior one-third of the tongue is mediated by the -",
    "unique_key": "Q4908641",
    "question_audio": null,
    "question_video": null,
    "map_id": 34111220,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Glossopharyngeal nerve. Explanation: The general sensation (touch, pain, and temperature) to the posterior one-third of the tongue is mediated by the glossopharyngeal nerve (cranial nerve IX). This nerve provides sensory innervation to the posterior third of the tongue, including both general sensation and taste. It also supplies the pharynx, tonsils, and the middle ear. The glossopharyngeal nerve enters the tongue at the posterior third, and its sensory fibers are responsible for the general sensation in that area. Incorrect responses: A. Hypoglossal nerve: The hypoglossal nerve (cranial nerve XII) is responsible for the motor innervation of all the intrinsic and extrinsic muscles of the tongue, except for the palatoglossus (which is innervated by the vagus nerve). It does not carry any sensory information, including general sensation. B. Vagus nerve: The vagus nerve (cranial nerve X) provides motor and sensory innervation to various structures in the neck, chest, and abdomen, including some parts of the pharynx and larynx. While it does contribute to taste sensation in the epiglottis and part of the pharynx, it does not mediate general sensation to the posterior third of the tongue. D. Lingual nerve: The lingual nerve is a branch of the mandibular division of the trigeminal nerve (cranial nerve V). It provides general sensory innervation to the anterior two-thirds of the tongue. However, it does not contribute to the posterior third of the tongue, which is supplied by the glossopharyngeal nerve.",
    "correct_choice_id": 200038,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48644521698073885/48644521698073885.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48644521698073885/48644521698073885.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50010,
    "choices": [
      {
        "id": 200040,
        "text": "Jugulo-digastric LNs"
      },
      {
        "id": 200041,
        "text": "Adenoids"
      },
      {
        "id": 200042,
        "text": "Tubal tonsils"
      },
      {
        "id": 200043,
        "text": "Palatine tonsils"
      }
    ],
    "text": "Waldeyer\u2019s internal ring component does not include?",
    "unique_key": "Q7395609",
    "question_audio": null,
    "question_video": null,
    "map_id": 34546803,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Jugulo-digastric LNs. Explanation: Waldeyer\u2019s ring is a ring of lymphoid tissue located in the pharyngeal region, which plays an important role in the immune system by defending the body against pathogens that enter through the mouth or nose. It consists of several components, but the jugulo-digastric lymph nodes (which are also known as the submandibular or cervical lymph nodes) are not part of this lymphoid ring. The jugulo-digastric lymph nodes are involved in filtering lymph but are not considered part of Waldeyer's ring, which is specifically composed of tonsils and associated lymphoid structures. Incorrect responses: B. Adenoids: The adenoids (or pharyngeal tonsils) are part of Waldeyer\u2019s ring. They are located in the nasopharynx and play a key role in trapping pathogens entering through the nose. These are considered a primary component of Waldeyer\u2019s ring. C. Tubal tonsils: The tubal tonsils are located around the opening of the Eustachian tube in the nasopharynx. They are part of Waldeyer\u2019s ring, contributing to the immune defense against infections that may reach the middle ear or nasopharyngeal area. D. Palatine tonsils: The palatine tonsils are located in the oropharynx and are one of the most well-known components of Waldeyer\u2019s ring. These tonsils help in immune surveillance by trapping pathogens that enter through the mouth.",
    "correct_choice_id": 200040,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28076591698075433/28076591698075433.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28076591698075433/28076591698075433.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50011,
    "choices": [
      {
        "id": 200044,
        "text": "Occipital lymph node"
      },
      {
        "id": 200045,
        "text": "Submental lymph node"
      },
      {
        "id": 200046,
        "text": "Deep cervical lymph nodes"
      },
      {
        "id": 200047,
        "text": "Tonsillar lymph nodes"
      }
    ],
    "text": "Tip of tongue drains into \u2013",
    "unique_key": "Q6180520",
    "question_audio": null,
    "question_video": null,
    "map_id": 34455033,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Submental lymph node. Explanation: The tip of the tongue primarily drains into the submental lymph node. This lymph node is located beneath the chin and is responsible for draining the anterior part of the tongue, along with other structures like the lower lip and the chin area. Incorrect responses: A. Occipital lymph node: The occipital lymph node is located at the back of the head and drains the posterior scalp and neck. It does not play a role in draining the tongue, particularly the tip. C. Deep cervical lymph nodes: The deep cervical lymph nodes are a group of lymph nodes found along the internal jugular vein in the neck. While they do drain the posterior and lateral parts of the tongue, they do not specifically drain the tip of the tongue. D. Tonsillar lymph nodes: The tonsillar lymph nodes drain the tonsillar region and the surrounding areas, including parts of the pharynx, but not the tip of the tongue.",
    "correct_choice_id": 200045,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64058611698074087/64058611698074087.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64058611698074087/64058611698074087.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50012,
    "choices": [
      {
        "id": 200048,
        "text": "Facial artery"
      },
      {
        "id": 200049,
        "text": "Retromandibular vein"
      },
      {
        "id": 200050,
        "text": "External carotid artery"
      },
      {
        "id": 200051,
        "text": "Facial nerve"
      }
    ],
    "text": "Structure which does not traverse parotid gland ?",
    "unique_key": "Q3342476",
    "question_audio": null,
    "question_video": null,
    "map_id": 34596596,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Facial artery. Explanation: The facial artery does not traverse the parotid gland. It is a branch of the external carotid artery that supplies the muscles of facial expression, as well as other structures in the face, but it runs outside the parotid gland, passing anteriorly to the gland and the muscles of the face. Incorrect responses: B. Retromandibular vein: The retromandibular vein does pass through the parotid gland. It forms by the union of the superficial temporal vein and the maxillary vein, and its course is within the gland, where it eventually divides into the anterior and posterior branches. C. External carotid artery: The external carotid artery does pass through the parotid gland. It gives rise to several branches, including the superficial temporal artery and the maxillary artery, while traversing the parotid region. D. Facial nerve: The facial nerve passes through the parotid gland as it divides into its temporal, zygomatic, buccal, mandibular, and cervical branches, which innervate the muscles of facial expression. It runs through the gland, but it does not supply it.",
    "correct_choice_id": 200048,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42095591698075450/42095591698075450.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42095591698075450/42095591698075450.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50013,
    "choices": [
      {
        "id": 200052,
        "text": "Oculomotor"
      },
      {
        "id": 200053,
        "text": "Trochlear"
      },
      {
        "id": 200054,
        "text": "Mandibular"
      },
      {
        "id": 200055,
        "text": "Ophthalmic"
      }
    ],
    "text": "All of the following structures are in lateral wall of cavernous sinus except -",
    "unique_key": "Q6092705",
    "question_audio": null,
    "question_video": null,
    "map_id": 34917152,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Mandibular. Explanation: Mandibular nerve (C): The mandibular nerve (V3) is a branch of the trigeminal nerve (V), and it does not run through the lateral wall of the cavernous sinus. It passes through the foramen ovale and is responsible for the motor innervation to muscles of mastication and sensation to parts of the face. Hence, it is the correct answer because it is not found in the lateral wall of the cavernous sinus. Incorrect options: A. Oculomotor (III): The oculomotor nerve does pass through the lateral wall of the cavernous sinus. It is located in the lateral part of the sinus and carries motor fibers to most of the muscles that control eye movements. B. Trochlear (IV): The trochlear nerve also runs through the lateral wall of the cavernous sinus. It innervates the superior oblique muscle of the eye, which helps in eye movement. D. Ophthalmic (V1): The ophthalmic branch of the trigeminal nerve (V1) passes through the lateral wall of the cavernous sinus. It is responsible for sensory innervation to the forehead, eyes, and the upper parts of the face.",
    "correct_choice_id": 200054,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53429851698074139/53429851698074139.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53429851698074139/53429851698074139.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50014,
    "choices": [
      {
        "id": 200056,
        "text": "Deviation of tongue to right"
      },
      {
        "id": 200057,
        "text": "Deviation of tongue to left"
      },
      {
        "id": 200058,
        "text": "Deviation of soft palate to right"
      },
      {
        "id": 200059,
        "text": "Deviation of soft palate to left"
      }
    ],
    "text": "Palsy of right genioglossus causes -",
    "unique_key": "Q9244996",
    "question_audio": null,
    "question_video": null,
    "map_id": 34278912,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Deviation of tongue to right. Explanation: The genioglossus muscle is responsible for protruding the tongue and helps in tongue movement. The right genioglossus muscle is controlled by the right hypoglossal nerve. If there is paralysis or weakness in the right genioglossus, the muscle will not be able to exert its force properly on the tongue, leading to a lack of balance between the two sides of the tongue. As a result, the tongue will deviate to the weaker side, which in this case is the right side. This deviation occurs due to the action of the unaffected side of the genioglossus muscle pulling the tongue to the opposite direction. Why the other options are incorrect: B. Deviation of tongue to left This option is incorrect. If the right genioglossus is affected, the tongue will deviate towards the right, not the left. The tongue is pulled to the side of the weakness. C. Deviation of soft palate to right The soft palate is innervated by the vagus nerve (not the hypoglossal nerve), and its movement is not directly related to the action of the genioglossus muscle. Palsy of the genioglossus would affect the tongue, not the soft palate. D. Deviation of soft palate to left Similar to option C, the soft palate movement is controlled by the vagus nerve and not the genioglossus. Therefore, this is also not affected by the paralysis of the genioglossus muscle.",
    "correct_choice_id": 200056,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31916001698074316/31916001698074316.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31916001698074316/31916001698074316.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50015,
    "choices": [
      {
        "id": 200060,
        "text": "Otic ganglion"
      },
      {
        "id": 200061,
        "text": "Sphenopalatine ganglion"
      },
      {
        "id": 200062,
        "text": "Geniculate ganglion"
      },
      {
        "id": 200063,
        "text": "Lesser ganglion"
      }
    ],
    "text": "The secetomotor fibre to the parotid gland passes through-",
    "unique_key": "Q5849276",
    "question_audio": null,
    "question_video": null,
    "map_id": 34673622,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Otic ganglion. Explanation: The secretomotor fibers to the parotid gland pass through the otic ganglion. These fibers are part of the parasympathetic nervous system and are carried by the glossopharyngeal nerve (CN IX). The secretomotor fibers from the glossopharyngeal nerve synapse in the otic ganglion, and the postganglionic fibers then travel via the auriculotemporal nerve, a branch of the mandibular nerve (V3), to reach the parotid gland, stimulating the secretion of saliva. This makes the otic ganglion the correct answer for the pathway of secretomotor fibers to the parotid gland. Why the other options are incorrect: Sphenopalatine ganglion (Option B) The sphenopalatine ganglion is involved in the parasympathetic innervation to the lacrimal gland and the nasal mucosa, but it does not play a role in the secretomotor fibers to the parotid gland. It is related to the facial nerve (CN VII) and the lacrimal system, not the parotid gland. Geniculate ganglion (Option C) The geniculate ganglion is associated with the facial nerve (CN VII) and contains the cell bodies of sensory neurons. It is not involved in secretomotor innervation to the parotid gland. It mainly serves the sensory functions of taste from the anterior two-thirds of the tongue and parasympathetic fibers to the lacrimal and salivary glands, but not to the parotid gland specifically. Lesser ganglion (Option D) The lesser ganglion is not a standard anatomical term used for any specific ganglion involved in secretomotor innervation to the parotid gland. This term does not refer to any ganglion directly related to parasympathetic innervation to the parotid, so it is an incorrect choice in this context.",
    "correct_choice_id": 200060,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/10166131698074363/10166131698074363.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/10166131698074363/10166131698074363.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50016,
    "choices": [
      {
        "id": 200064,
        "text": "Hyoglossus"
      },
      {
        "id": 200065,
        "text": "Genioglossus"
      },
      {
        "id": 200066,
        "text": "Palatoglossus"
      },
      {
        "id": 200067,
        "text": "Styloglossus"
      }
    ],
    "text": "Safety muscle of the tongue is \u2013",
    "unique_key": "Q7985432",
    "question_audio": null,
    "question_video": null,
    "map_id": 34582136,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Genioglossus. Explanation: The genioglossus muscle is often referred to as the \"safety muscle\" of the tongue because it plays a key role in preventing airway obstruction. It is the most important muscle for protruding the tongue and keeping the airway open, especially during sleep. In situations where the tongue might fall back and obstruct the airway (such as during anesthesia or sleep), the genioglossus helps to prevent this by pulling the tongue forward. Therefore, it is known as the safety muscle because of its critical role in maintaining an open airway. Why the other options are incorrect: Hyoglossus (Option A) The hyoglossus muscle is responsible for depressing and retracting the tongue. While important for tongue movements, it does not have the same protective role for the airway as the genioglossus muscle. It is involved in controlling the position and movement of the tongue but is not a \"safety muscle\" in the sense of preventing airway obstruction. Palatoglossus (Option C) The palatoglossus muscle primarily elevates the posterior part of the tongue and helps in swallowing. It does not play a significant role in preventing airway obstruction, so it cannot be considered the safety muscle of the tongue. The palatoglossus is more related to soft palate and tongue coordination during swallowing rather than airway protection. Styloglossus (Option D) The styloglossus muscle functions to retract and elevate the tongue. While it contributes to certain tongue movements, it does not specifically function to keep the airway open or prevent airway obstruction, which is the primary role of the genioglossus. Thus, it is not considered the safety muscle of the tongue.",
    "correct_choice_id": 200065,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54979921698074401/54979921698074401.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54979921698074401/54979921698074401.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50017,
    "choices": [
      {
        "id": 200068,
        "text": "Lingual nerve"
      },
      {
        "id": 200069,
        "text": "Glosso pharyngeal nerve"
      },
      {
        "id": 200070,
        "text": "Chorda tymapni"
      },
      {
        "id": 200071,
        "text": "Hypoglossal"
      }
    ],
    "text": "Muscles of tongue are supplied by-",
    "unique_key": "Q8279368",
    "question_audio": null,
    "question_video": null,
    "map_id": 34548384,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Hypoglossal. Explanation: The hypoglossal nerve (CN XII) is responsible for the motor innervation of the muscles of the tongue. All intrinsic and extrinsic muscles of the tongue (except for the palatoglossus) are supplied by the hypoglossal nerve. The hypoglossal nerve controls tongue movements such as protrusion, retraction, and elevation, which are essential for actions like speaking, swallowing, and chewing. Why the other options are incorrect: Lingual nerve (Option A) The lingual nerve is a branch of the mandibular nerve (V3) and is responsible for sensory innervation of the anterior two-thirds of the tongue, but it does not supply motor innervation to the tongue muscles. It provides sensation (touch, pain, temperature) and taste via the chorda tympani, but not motor control. Therefore, it is not involved in supplying the muscles of the tongue. Glossopharyngeal nerve (Option B) The glossopharyngeal nerve (CN IX) is responsible for taste and sensation from the posterior third of the tongue and provides motor innervation to the stylopharyngeus muscle. However, it does not supply the motor innervation to the muscles of the tongue, which is the role of the hypoglossal nerve. Therefore, it is incorrect in this context. Chorda tympani (Option C) The chorda tympani is a branch of the facial nerve (CN VII) and carries taste fibers from the anterior two-thirds of the tongue. However, it does not provide motor innervation to the tongue muscles. Instead, it is involved in taste sensation and parasympathetic innervation to the submandibular and sublingual salivary glands. Thus, it does not supply the muscles of the tongue.",
    "correct_choice_id": 200071,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74906421698074476/74906421698074476.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74906421698074476/74906421698074476.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50018,
    "choices": [
      {
        "id": 200072,
        "text": "2nd largest salivary gland"
      },
      {
        "id": 200073,
        "text": "Stenson\u2019s duct opens behind upper 3rd molar"
      },
      {
        "id": 200074,
        "text": "Divided by branches of facial nerve"
      },
      {
        "id": 200075,
        "text": "Only benign tumours arise from parotid gland"
      }
    ],
    "text": "True statement about parotid gland is",
    "unique_key": "Q6205032",
    "question_audio": null,
    "question_video": null,
    "map_id": 34338793,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Divided by branches of facial nerve. Explanation: The parotid gland is indeed divided by the branches of the facial nerve (cranial nerve VII). The facial nerve passes through the parotid gland, dividing it into superficial and deep lobes. It is important to understand this division when performing surgical procedures involving the parotid gland, as injury to the facial nerve can cause facial paralysis. Why the other options are incorrect: 2nd largest salivary gland (Option A) The parotid gland is actually the largest of the salivary glands, not the second largest. The second largest salivary gland is the submandibular gland. The parotid gland is located near the ear and produces the majority of the serous saliva in the oral cavity. Stenson\u2019s duct opens behind upper 3rd molar (Option B) Stenson's duct, which drains the parotid gland, opens into the mouth near the upper second molar, not the upper third molar. It is important to note this anatomical feature when examining patients for issues like salivary duct obstructions or infections. Only benign tumors arise from parotid gland (Option D) This statement is incorrect. While benign tumors, such as pleomorphic adenomas, are more common in the parotid gland, malignant tumors can also arise, including mucoepidermoid carcinoma and acinic cell carcinoma. Therefore, the statement that only benign tumors arise from the parotid gland is false.",
    "correct_choice_id": 200074,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1609031698075540/1609031698075540.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1609031698075540/1609031698075540.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50019,
    "choices": [
      {
        "id": 200076,
        "text": "Genioglossus"
      },
      {
        "id": 200077,
        "text": "Medial pterygoid"
      },
      {
        "id": 200078,
        "text": "Hyoglossus"
      },
      {
        "id": 200079,
        "text": "Lateral pterygoid"
      }
    ],
    "text": "Ipsilateral deviation of tongue is due to paralysis of-",
    "unique_key": "Q4943358",
    "question_audio": null,
    "question_video": null,
    "map_id": 34435805,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Genioglossus. Explanation: The genioglossus is a muscle of the tongue, and it plays a major role in controlling the movement and position of the tongue. Ipsilateral deviation of the tongue occurs when the hypoglossal nerve (cranial nerve XII), which innervates the genioglossus, is damaged or paralyzed on one side. When the genioglossus muscle on one side is paralyzed, the normal action of pulling the tongue forward is weakened, causing the tongue to deviate towards the side of the paralysis during protrusion. Therefore, paralysis of the genioglossus muscle leads to the ipsilateral deviation of the tongue. Why the other options are incorrect: Medial pterygoid (Option B) The medial pterygoid is a muscle of mastication and is innervated by the mandibular nerve (V3). It is not responsible for tongue movement. The medial pterygoid helps in elevating the mandible and is involved in chewing, so damage to this muscle would not result in tongue deviation. Hyoglossus (Option C) The hyoglossus muscle is involved in depressing the tongue and helping with tongue movements. It is also innervated by the hypoglossal nerve (cranial nerve XII). While damage to this muscle may affect the function of the tongue, it does not typically cause ipsilateral deviation. The main muscle responsible for tongue deviation due to paralysis is the genioglossus. Lateral pterygoid (Option D) The lateral pterygoid is another muscle of mastication, innervated by the mandibular nerve (V3). It is responsible for moving the jaw side to side and for protracting the jaw. Damage to this muscle would affect jaw movement and not tongue deviation, so it is not involved in the deviation of the tongue.",
    "correct_choice_id": 200076,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4165431698074756/4165431698074756.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4165431698074756/4165431698074756.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50020,
    "choices": [
      {
        "id": 200080,
        "text": "Greater petrosal nerve"
      },
      {
        "id": 200081,
        "text": "Chorda tympani in the middle ear cavity"
      },
      {
        "id": 200082,
        "text": "Superior cervical ganglion"
      },
      {
        "id": 200083,
        "text": "Lesser petrosal nerve"
      }
    ],
    "text": "A 52 years old man complains of dryness of the mouth. On examination he lack salivary secretion from the submandibular gland. This indicates a lesion of which of the following nervous structures?",
    "unique_key": "Q3716892",
    "question_audio": null,
    "question_video": null,
    "map_id": 34667902,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Chorda tympani carries fibres for salivation to the submandibular gland<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/10(276).png\" alt=\"Solution Image\"></p>",
    "correct_choice_id": 200081,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73518111698323990/73518111698323990.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73518111698323990/73518111698323990.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50021,
    "choices": [
      {
        "id": 200084,
        "text": "Greater petrosal nerve"
      },
      {
        "id": 200085,
        "text": "Chorda tympani in the middle ear cavity"
      },
      {
        "id": 200086,
        "text": "Superior cervical ganglion"
      },
      {
        "id": 200087,
        "text": "Lesser petrosal nerve"
      }
    ],
    "text": "A 52 years old man complains of dryness of the mouth. On examination he lack salivary secretion from the Parotid gland. This indicates a lesion of which of the following nervous structures?",
    "unique_key": "Q7554013",
    "question_audio": null,
    "question_video": null,
    "map_id": 34054098,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (d) Lesser petrosal nerve carries fibres for salivation to the parotid gland",
    "correct_choice_id": 200087,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/10215271698324006/10215271698324006.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/10215271698324006/10215271698324006.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50022,
    "choices": [
      {
        "id": 200088,
        "text": "Auriculotemporal nerve"
      },
      {
        "id": 200089,
        "text": "ChordaTympani"
      },
      {
        "id": 200090,
        "text": "Lingual nerve"
      },
      {
        "id": 200091,
        "text": "Mental nerve"
      },
      {
        "id": 200092,
        "text": "Glossopharyngeal nerve"
      }
    ],
    "text": "While operating on third molar teeth, the dentist must warn the patient of possible lasting numbness of the tip of the tongue. This loss of general sensation is due to damage to the",
    "unique_key": "Q1088221",
    "question_audio": null,
    "question_video": null,
    "map_id": 34394906,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (c) General sensations from anterior 2/3rd is carried by Lingual nerve and Taste by Chorda Tympani.<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/sddefault.jpg\" alt=\"Solution Image\"></p>",
    "correct_choice_id": 200090,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32917131698324050/32917131698324050.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32917131698324050/32917131698324050.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50023,
    "choices": [
      {
        "id": 200093,
        "text": "Decreased gag reflex on the left"
      },
      {
        "id": 200094,
        "text": "Decreased gag reflex on the right"
      },
      {
        "id": 200095,
        "text": "Decreased salivation from the left submandibular and sublingual salivary glands"
      },
      {
        "id": 200096,
        "text": "Deviation of the tongue to the left on protrusion"
      },
      {
        "id": 200097,
        "text": "Deviation of the tongue to the right on protrusion"
      },
      {
        "id": 200098,
        "text": "Inability to elevate the pharynx on the left during swallowing"
      },
      {
        "id": 200099,
        "text": "Inability to perceive sweet and salt taste sensation on the anterior part of the left side of the tongue"
      }
    ],
    "text": "A patient's left hypoglossal nerve (CN XII) is injured during a surgical procedure. Which of the following would most likely result from this injury?",
    "unique_key": "Q1160522",
    "question_audio": null,
    "question_video": null,
    "map_id": 34846038,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) left genioglossus is paralysed and unopposed action of right genioglossus leads to deviation of the tongue to the left on protrusion.",
    "correct_choice_id": 200096,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55227741698324070/55227741698324070.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55227741698324070/55227741698324070.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50024,
    "choices": [
      {
        "id": 200100,
        "text": "Aphthous ulcers"
      },
      {
        "id": 200101,
        "text": "Candidal colonies"
      },
      {
        "id": 200102,
        "text": "Circumvallate papillae"
      },
      {
        "id": 200103,
        "text": "Filiform papillae"
      }
    ],
    "text": "An otherwise healthy curious young science student visits the doctor for a physical examination. He is taking no medications. He is concerned because he has noticed several painless uniform \u201clarge bumps\u201d at the back of his tongue. These are most likely",
    "unique_key": "Q8560565",
    "question_audio": null,
    "question_video": null,
    "map_id": 34105772,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) The large bumps at the back of his tongue are circumvallate papillae. These are large circular structures surrounded by moatlike depressions. The lateral surfaces of these papillae contain taste buds. Aphthous ulcers are small, white or red mouth lesions. Candidal colonies appear in thrush, which occurs more commonly in the immunocompromised host or in those taking antibacterial drugs. You are told that the patient is healthy and not taking medications, making this condition unlikely. Filiform papillae are the most numerous papillae of the tongue. They are elongated cones that create the tongue\u2019s rough texture. They do not contain taste buds.<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/5_1(20).jpg\" alt=\"Solution Image\"></p>",
    "correct_choice_id": 200102,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16064771698329855/16064771698329855.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16064771698329855/16064771698329855.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50025,
    "choices": [
      {
        "id": 200104,
        "text": "Auriculotemporal nerve"
      },
      {
        "id": 200105,
        "text": "Lingual nerve"
      },
      {
        "id": 200106,
        "text": "Glossopharyngeal nerve"
      },
      {
        "id": 200107,
        "text": "Inferior alveolar nerve"
      }
    ],
    "text": "What is the nerve supply of Parotid gland",
    "unique_key": "Q7766892",
    "question_audio": null,
    "question_video": null,
    "map_id": 34072349,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Option A-Auriculotemporal nerve Pathway :- 9th Nerve -> Jacobson plexus -> tympanic plexus ->lesser petrosal Nerve-> comes out of foramen ovale (along with mandibular nerve) -> relay in otic ganglion> Auriculo-temporal nerve. Option B-Lingual nerve is associated with submandibular ganglion. Option C-Glossopharyngeal nerve supplies stylopharyngeus. Option D-Inferior alveolar nerve supplies lower alveolar sockets.",
    "correct_choice_id": 200104,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/11869781698501828/11869781698501828.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/11869781698501828/11869781698501828.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50026,
    "choices": [
      {
        "id": 200108,
        "text": "Lingual nerve"
      },
      {
        "id": 200109,
        "text": "Mandibular nerve"
      },
      {
        "id": 200110,
        "text": "Chorda tympani nerve"
      },
      {
        "id": 200111,
        "text": "Inferior alveolar nerve"
      }
    ],
    "text": "Which nerve passes through the marked foramen in the given image<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/5(632).jpg\" alt=\"Question Image\"></p>",
    "unique_key": "Q1195439",
    "question_audio": null,
    "question_video": null,
    "map_id": 34619933,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Option A-Lingual nerve is a branch of posterior division of mandibular nerve which supplies anterior 2/3rd of tongue. Option B-Mandibular nerve comes out of foramen ovale. Option C-Chorda tympani nerve joins lingual nerve and supplies anterior 2/3rd of tongue. Option D-Inferior alveolar nerve passes through the marked foramen i.e,mandibular foramen and travels through the bone and emerge out of mental foramen as mental nerve..<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/34(157).jpg\" alt=\"Solution Image\"></p>",
    "correct_choice_id": 200111,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43056561698501745/43056561698501745.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43056561698501745/43056561698501745.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50027,
    "choices": [
      {
        "id": 200112,
        "text": "Auriculotemporal nerve"
      },
      {
        "id": 200113,
        "text": "Greater auricular nerve"
      },
      {
        "id": 200114,
        "text": "Lingual nerve"
      },
      {
        "id": 200115,
        "text": "Inferior alveolar nerve"
      }
    ],
    "text": "Nerve injured in frey\u2019s syndrome is",
    "unique_key": "Q6396866",
    "question_audio": null,
    "question_video": null,
    "map_id": 34412458,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Frey syndrome usually occurs with auriculotemporal nerve injury caused by surgical intervention or trauma in the parotid region, The auriculotemporal nerve, a branch of the trigeminal nerve, consists of parasympathetic fibers that signal the parotid gland to produce saliva and sympathetic fibers that innervate the sweat glands of the face and scalp. When an insult to the parasympathetic and sympathetic nerve fibers of the auriculotemporal nerve in the parotid region occurs, the resulting aberrant regeneration of post-ganglionic parasympathetic nerve fibers (responsible for salivary secretion) along the pre-existing sympathetic pathways to the vessels and sweat glands of the skin leads to the development of Frey syndrome. Patients with Frey syndrome often present with facial warmth, flushing, and sweating in the territory of the auriculotemporal nerve overlying the parotid gland, which may include the preauricular skin, the temporal skin, the scalp, and the temporomandibular joint region. Symptoms occur during meals, especially with spicy and sour foods.<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/43(107).jpg\" alt=\"Solution Image\"></p>",
    "correct_choice_id": 200112,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37351921698501428/37351921698501428.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37351921698501428/37351921698501428.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50028,
    "choices": [
      {
        "id": 200116,
        "text": "Inferior alveolar nerve"
      },
      {
        "id": 200117,
        "text": "Lingual nerve"
      },
      {
        "id": 200118,
        "text": "Glossopharyngeal nerve"
      },
      {
        "id": 200119,
        "text": "Facial nerve"
      }
    ],
    "text": "Structure injured in submandibular gland excision:",
    "unique_key": "Q5878502",
    "question_audio": null,
    "question_video": null,
    "map_id": 34120669,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Option A-Inferior alveolar nerve enters tha mandibular foramen and runs within mandibular canal. Option B-W.r.t submandibular gland- we have a nerve looping around (Mnemonic:- L-lingual & L- loop) and another nerve (not looping) present beside it is hypoglossal nerve. When we are operating in this area, both these nerves are at high risk of injury. Option C-Glossopharyngeal nerve lies wall away from submandibular gland. Option D-Facial nerve is injured during parotid surgeries.<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/12(424).jpg\" alt=\"Solution Image\"></p>",
    "correct_choice_id": 200117,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57808671698504201/57808671698504201.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57808671698504201/57808671698504201.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50029,
    "choices": [
      {
        "id": 200120,
        "text": "Main trunk of Facial Nerve"
      },
      {
        "id": 200121,
        "text": "Cervical branch of Facial Nerve"
      },
      {
        "id": 200122,
        "text": "Temporal branch of Facial Nerve"
      },
      {
        "id": 200123,
        "text": "Ansa cervicalis"
      }
    ],
    "text": "A Patient who underwent Parotid surgery noticed weakness in lower lip movement after surgery, Which of the following nerve is injured in this patient.",
    "unique_key": "Q9286902",
    "question_audio": null,
    "question_video": null,
    "map_id": 34469710,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) The most common nerve injury affecting the lower lip after parotidectomy is the marginal mandibular branch of the facial nerve. Since \"Marginal Mandibular branch\" is not an option, there's an issue with the question's options if it expects a single, precise answer. However, let's think if one of the given options could be the intended answer due to some anatomical nuance. The cervical branch innervates the platysma, which can depress the lower lip and angle of the mouth. So, injury to the cervical branch could contribute to perceived lower lip weakness, especially if it's broad depression of the mouth. If the question is well-posed and has a single correct answer among the options, the most plausible link to \"lower lip movement\" amongst the facial nerve branches listed is the Cervical branch, due to its innervation of the platysma. While the marginal mandibular branch is the direct nerve for specific lower lip depressors, the platysma also contributes to lower facial expression. Therefore, the most likely intended answer, if the marginal mandibular branch is not an option, is B. Cervical branch of Facial Nerve",
    "correct_choice_id": 200121,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32460701701774977/32460701701774977.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32460701701774977/32460701701774977.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50030,
    "choices": [
      {
        "id": 200124,
        "text": "Protraction"
      },
      {
        "id": 200125,
        "text": "Retraction"
      },
      {
        "id": 200126,
        "text": "Depression"
      },
      {
        "id": 200127,
        "text": "Elevation"
      }
    ],
    "text": "Which of the following is the function of the marked muscles?<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/20(259).jpg\" alt=\"Question Image\"></p>",
    "unique_key": "Q2237251",
    "question_audio": null,
    "question_video": null,
    "map_id": 34797037,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Option A-Protraction is also carried out by medial pterygoid,hence,Depression is a better answer here. Option B-Retraction is caused by temporalis muscle. Option C-Marked muscle is Lateral Pterygoid and it's Action is Protraction and Depression but Protraction is also carried out by medial pterygoid,hence,Depression is a better answer here. Option D-Elevation is caused by masseter.",
    "correct_choice_id": 200126,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32122021701775483/32122021701775483.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32122021701775483/32122021701775483.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50031,
    "choices": [
      {
        "id": 200128,
        "text": "main trunk"
      },
      {
        "id": 200129,
        "text": "Temporal branch"
      },
      {
        "id": 200130,
        "text": "cervical branch"
      },
      {
        "id": 200131,
        "text": "parotid duct"
      }
    ],
    "text": "Drooping of angle of mouth after parotidectomy due to damage of ?",
    "unique_key": "Q8319951",
    "question_audio": null,
    "question_video": null,
    "map_id": 34959123,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Cervical branch",
    "correct_choice_id": 200130,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72694691721393051/72694691721393051.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72694691721393051/72694691721393051.m3u8",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '46  Tongue  Salivary Glands';
        const quizFilename = '46-tongue-salivary-glands-306e8573.html';
        let hierarchy = ["DAMS", "DQB", "Anatomy"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on navigation
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>