<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orthopedics St2 (From Q-Bank) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The following image is suggestive of:",
    "choices": [
      {
        "id": 1,
        "text": "Posterior dislocation of hip"
      },
      {
        "id": 2,
        "text": "Central dislocation of hip"
      },
      {
        "id": 3,
        "text": "Anterior dislocation of hip"
      },
      {
        "id": 4,
        "text": "Fracture neck of femur"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Typical appearance of<strong> hip flexion and abduction</strong> is seen in <strong>anterior hip dislocations</strong>.</p>\n<p>In posterior hip dislocations, attitude is that of flexion, adduction and internal rotation. In the central dislocation, there will be shortening of the limb. In fracture neck of femur, there will be a minimal external rotation of the limb with or without shortening.</p>\n<table style=\"width: 417px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 163px;\">\n<p style=\"text-align: center;\"><strong>Deformities</strong></p>\n</td>\n<td style=\"width: 248px; text-align: center;\">\n<p><strong>Diagnosis</strong></p>\n</td>\n</tr>\n<tr style=\"text-align: center;\">\n<td style=\"width: 163px;\">\n<p>Wry neck</p>\n</td>\n<td style=\"width: 248px;\">\n<p>Cervical spine injuries</p>\n</td>\n</tr>\n<tr style=\"text-align: center;\">\n<td style=\"width: 163px;\">\n<p>Drooping of shoulder</p>\n</td>\n<td style=\"width: 248px;\">\n<p>Clavicle fracture</p>\n</td>\n</tr>\n<tr style=\"text-align: center;\">\n<td style=\"width: 163px;\">\n<p>Flat shoulder</p>\n</td>\n<td style=\"width: 248px;\">\n<p>Anterior dislocation of shoulder</p>\n</td>\n</tr>\n<tr style=\"text-align: center;\">\n<td style=\"width: 163px;\">\n<p>S-shaped deformity of humerus</p>\n</td>\n<td style=\"width: 248px;\">\n<p>Supracondylar humerus fracture</p>\n</td>\n</tr>\n<tr style=\"text-align: center;\">\n<td style=\"width: 163px;\">\n<p>Dinner fork deformity</p>\n</td>\n<td style=\"width: 248px;\">\n<p>Colles&rsquo; fracture</p>\n</td>\n</tr>\n<tr style=\"text-align: center;\">\n<td style=\"width: 163px;\">\n<p>Boutonniere deformity</p>\n</td>\n<td style=\"width: 248px;\">\n<p>Rupture of central extensor slips of finger</p>\n</td>\n</tr>\n<tr style=\"text-align: center;\">\n<td style=\"width: 163px;\">\n<p>Mallet finger</p>\n</td>\n<td style=\"width: 248px;\">\n<p>Rupture of distal end of index extensor</p>\n</td>\n</tr>\n<tr style=\"text-align: center;\">\n<td style=\"width: 163px;\">\n<p>Jersey finger</p>\n</td>\n<td style=\"width: 248px;\">\n<p>Rupture of distal end of flexor digitorum profundus of index finger</p>\n</td>\n</tr>\n<tr style=\"text-align: center;\">\n<td style=\"width: 163px;\">\n<p>Flexion adduction and internal rotation of lower limb</p>\n</td>\n<td style=\"width: 248px;\">\n<p>Posterior dislocation of the hip</p>\n</td>\n</tr>\n<tr style=\"text-align: center;\">\n<td style=\"width: 163px;\">\n<p>Flexion Abduction and external rotation of lower limb</p>\n</td>\n<td style=\"width: 248px;\">\n<p>Anterior dislocation of hip</p>\n</td>\n</tr>\n<tr style=\"text-align: center;\">\n<td style=\"width: 163px;\">\n<p>Incomplete external rotation of lower limbs</p>\n</td>\n<td style=\"width: 248px;\">\n<p>Fracture neck of femur (intracapsular)</p>\n</td>\n</tr>\n<tr style=\"text-align: center;\">\n<td style=\"width: 163px;\">\n<p>Complete external rotation of lower limbs</p>\n</td>\n<td style=\"width: 248px;\">\n<p>Fracture trochanter, and shaft of femur, Fractures of leg bones</p>\n</td>\n</tr>\n<tr style=\"text-align: center;\">\n<td style=\"width: 163px;\">\n<p>S-shaped ankle</p>\n</td>\n<td style=\"width: 248px;\">\n<p>Ankle dislocations</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e14103ad40a8470ba673d1e6e0d188dc.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 55-year-old woman presents with painful restriction of movements of her left hip. She had a history of a fall a few months back which she ignored. A recent radiograph is given below. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Osteoarthritis"
      },
      {
        "id": 2,
        "text": "Slipped capital femoral epiphysis"
      },
      {
        "id": 3,
        "text": "Fibrous ankylosis"
      },
      {
        "id": 4,
        "text": "Avascular necrosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario and x-ray showing&nbsp;<strong>flattening of the femoral head</strong> is suggestive of&nbsp;<strong>avascular necrosis</strong>. It is most commonly seen after a fracture neck of femur.&nbsp;</p>\n<p>The patient complains of pain and walks with a limp. The condition is treated by&nbsp;a<strong> total hip replacement</strong>. If untreated, osteoarthritis of the hip develops.</p>\n<p>The image below shows the <strong>crescent sign,</strong> which is caused by&nbsp;<strong>the necrotic and repair processes</strong>&nbsp;that occur during avascular necrosis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c2ab527323bb484ab6a8dd63af41cd13.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/39e1de935c5549cc85f301053a52d2cax1280x1354.JPEG"
    ]
  },
  {
    "text": "A patient presented with non-union of tibial fracture. The orthopedician suggested treatment by providing stability using a cast or brace. Which of the following type of nonunion does the patient most likely has?",
    "choices": [
      {
        "id": 1,
        "text": "Hypertrophic"
      },
      {
        "id": 2,
        "text": "Atrophic"
      },
      {
        "id": 3,
        "text": "Oligotrophic"
      },
      {
        "id": 4,
        "text": "Pseudoarthrosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><span class=\"fontstyle0\"><strong>Stabilization</strong> using casts and braces are used in the treatment of <strong>hypertrophic nonunion</strong>.&nbsp;&nbsp;</span></p>\n<p>Management of nonunion:</p>\n<ul>\n<li><strong><span class=\"fontstyle0\">Hypertrophic </span></strong><span class=\"fontstyle0\">nonunion</span><span class=\"fontstyle0\">: </span><span class=\"fontstyle0\"><strong>Stabilization</strong> to&nbsp;</span>allow chondrocyte-mediated mineralization of the fibrocartilage between fracture ends. With stabilization, healing usually occurs by 8 weeks.</li>\n<li><strong>Oligotrophic </strong>nonunion:&nbsp;Correcting the issues related to bone contact through <strong>mechanical compression</strong> or <strong>bone grafting</strong> to close the defects. In some cases, a combination of biologic and mechanical methods is used.</li>\n<li><strong>Atrophic </strong>nonunion:<strong> Autogenous bone graft or BMP</strong> to provide biologic stimulus at the fracture site. The other procedure done is <strong>debridement</strong> or excision of the non-vital bone ends.&nbsp;</li>\n<li><strong>Pseudoarthrosis</strong>:<strong> Debridement</strong> of the pseudoarthrosis, opening of the medullary canal and providing more <strong>stability</strong> usually with <strong>compression</strong> at the nonunion site. In some cases, biologic stimulation may be helpful to promote healing.&nbsp;&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following are not true about fractures in children?",
    "choices": [
      {
        "id": 1,
        "text": "Fractures take longer duration to heal in children"
      },
      {
        "id": 2,
        "text": "Children are less likely to experience morbidity from immobilization"
      },
      {
        "id": 3,
        "text": "Children are less compliant with activity restrictions"
      },
      {
        "id": 4,
        "text": "Impending compartment syndrome should be managed urgently"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In general, <strong>fractures in children</strong>, including physeal injuries,<strong> heal more rapidly</strong> than in adults, and they are less likely to experience morbidity or mortality from prolonged immobilization. Children are also often less compliant with postoperative activity restrictions, making cast immobilization a necessary adjunct to therapy.</p>\n<p>Injuries involving neurovascular compromise or impending compartment syndrome should be managed urgently. Intra-articular fractures (such as Salter&ndash;Harris types III and IV) require anatomic reduction to restore the articular surface and prevent epiphyseal&ndash;metaphyseal cross union.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The rotator interval in the shoulder is between _____",
    "choices": [
      {
        "id": 1,
        "text": "Supraspinatus and teres minor"
      },
      {
        "id": 2,
        "text": "Teres major and teres minor"
      },
      {
        "id": 3,
        "text": "Supraspinatus and subscapularis"
      },
      {
        "id": 4,
        "text": "Subscapularis and infraspinatus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The rotator interval is defined as the triangular area in the anterior and superior shoulder where no rotator cuff tendons are present. As such, the interval i<strong>s bounded by the supraspinatus superiorly, the subscapularis inferiorly, and the coracoid medially.</strong> The apex of the triangle is marked laterally by the transverse humeral ligament. The coracohumeral ligament, biceps tendon, and superior glenohumeral ligament are found in the rotator interval.</p>\n<p>The rotator interval is altered in pathologic states and has been found to be contracted in patients with adhesive capsulitis and expanded in those with shoulder instability.</p>\n<p>The following image depicts the rotator cuff and rotator interval.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b553b0024c6249d38605de8254d636f1x1280x1490.JPEG"
    ]
  },
  {
    "text": "What is the preferred management in an adult with a Galeazzi fracture-dislocation?",
    "choices": [
      {
        "id": 1,
        "text": "Closed reduction with above elbow cast"
      },
      {
        "id": 2,
        "text": "Closed reduction with below elbow cast"
      },
      {
        "id": 3,
        "text": "External fixation with Ilizarov method"
      },
      {
        "id": 4,
        "text": "Internal fixation with compression plating"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Galeazzi fracture-dislocation</strong> in an <strong>adult</strong> is managed by <strong>internal fixation </strong>with <strong>compression plating</strong> of the radius.&nbsp;In <strong>children</strong>, <strong>closed reduction</strong> is usually successful.</p>\n<p>Note: <strong>Galeazzi's sign</strong>&nbsp;is seen in <strong>developmental dysplasia of the hip</strong> where the infant's knees are flexed and approximated when lying down. One knee is higher than the other in developmental dysplasia.</p>\n<p>The below image shows Galeazzi's sign.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1a88ea822e7046f1a88362268c354756x1280x1360.JPEG"
    ]
  },
  {
    "text": "Which of the following is known as Bowler's thumb?",
    "choices": [
      {
        "id": 1,
        "text": "Fracture dislocation of the neck of first metacarpal"
      },
      {
        "id": 2,
        "text": "Neuropathy of the digital nerve"
      },
      {
        "id": 3,
        "text": "Injury of the abductor pollicis longus tendon"
      },
      {
        "id": 4,
        "text": "Fracture of the base of first metacarpal"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Bowler&rsquo;s thumb is a <strong>perineural fibrosis</strong> caused by repetitious compression of the <strong>ulnar digital nerve of the thumb</strong> while grasping a bowling ball.</p>\n<p>Tingling and hyperesthesia around the pulp accompany this condition. A palpable lump that is exceedingly tender and at times accompanied by distal skin atrophy usually is present.</p>\n<p>Early awareness of the cause can lead to protection of the thumb by a shield or splint and rest from bowling to help reduce the symptoms and to prevent the condition from becoming chronic. Occasionally, neurolysis and dorsal transfer of the nerve become necessary.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young sportsman presented with pain in his right elbow. On examination, Cozen's test was positive. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Draughtman's elbow"
      },
      {
        "id": 2,
        "text": "Pitcher's elbow"
      },
      {
        "id": 3,
        "text": "Golfer's elbow"
      },
      {
        "id": 4,
        "text": "Tennis elbow"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario along with <strong>positive</strong>&nbsp;<strong>Cozen's test</strong>&nbsp;is suggestive of <strong>tennis elbow</strong> (lateral epicondylitis).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Swimmer\u2019s view radio-graph is useful for evaluating:",
    "choices": [
      {
        "id": 1,
        "text": "Cervicothoracic junction"
      },
      {
        "id": 2,
        "text": "Atlanto-axial joint"
      },
      {
        "id": 3,
        "text": "Odontoid process"
      },
      {
        "id": 4,
        "text": "Atlanto-occipital joint"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Swimmer&rsquo;s view</strong> can enhance the clarity of radiographs involving the cervicothoracic junction by eliminating overlapping shadows of the deltoid and glenohumeral joint.</p>\n<p><strong>Open mouth view</strong>&nbsp;is for assessing odontoid process.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old patient presents with posterior hip dislocation. Which of the following reduction methods is not used for the management of this patient's condition?",
    "choices": [
      {
        "id": 1,
        "text": "Kocher's manoevre"
      },
      {
        "id": 2,
        "text": "Bigelow's method"
      },
      {
        "id": 3,
        "text": "Stimson's gravity method"
      },
      {
        "id": 4,
        "text": "Allis method"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Kocher&rsquo;s maneuver</strong>&nbsp;is used for the management of&nbsp;<strong>shoulder dislocation.&nbsp;</strong></p>\n<p>Reduction of hip dislocation (closed or open) should ideally be performed within <strong>6 hours</strong> to prevent osteonecrosis of the hip joint.</p>\n<p>Methods of closed reduction for posterior hip dislocation are:</p>\n<p>1. <strong>Allis maneuver</strong>- traction applied opposite to the direction of deformity</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c80bc0ac222b49a9a8226e05d5eda640x1280x3725.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4064a7969f1f44e6bfe4c936f73e7113x1280x1802.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ceff1512f38e400da3245c2849db261fx1280x4053.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cd4721634a9c4725a6c05dd4d17a1af8x1280x1692.JPEG"
    ]
  },
  {
    "text": "A radiograph of a patient with knee pain following an RTA revealed a floating knee. Which of the following injuries are likely to cause this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Fracture of  lower end of femur and dislocation of patella"
      },
      {
        "id": 2,
        "text": "Fracture of lower end of femur and upper end of tibia"
      },
      {
        "id": 3,
        "text": "Complete tear of medial and lateral collateral ligaments"
      },
      {
        "id": 4,
        "text": "Complete tear of anterior and posterior cruciate ligaments"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Fracture</strong> of <strong>lower end </strong>of<strong> femur</strong> and <strong>upper end </strong>of <strong>tibia</strong> can result in a&nbsp;<strong>floating knee</strong>.</p>\n<p>It refers to the knee that is separated from the femur and tibia.&nbsp;It usually results from motor vehicle accidents.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The Weber classification characterizes fractures of _____",
    "choices": [
      {
        "id": 1,
        "text": "Lateral malleolus"
      },
      {
        "id": 2,
        "text": "Medial malleolus"
      },
      {
        "id": 3,
        "text": "Talus"
      },
      {
        "id": 4,
        "text": "Neck of femur"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Classification of malleolar fracture of ankle <strong>developed by Danis and modified by Weber&nbsp;</strong>describes the injury based on the location of the lateral malleolar fracture.</p>\n<p>Fractures may be classified as A, B, or C with a fracture below, at the level of, or above the syndesmosis respectively.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/435ea38187d44e1aa7c13b634a0e16ccx656x493.PNG"
    ]
  },
  {
    "text": "Keeping the fixation techniques for lateral malleolar fractures in mind, match the following correctly: \n\nColumn A: 1)Fibular fractures 2)Long oblique fracture  3)Low transverse fracture 4)Both malleoli\n\nColumn B: a)Two lag screws b)Tension band wiring and lag screw  c) One-third semi-tubular plate and screws d)Single malleolar screw",
    "choices": [
      {
        "id": 1,
        "text": "1c 2a 3d 4b"
      },
      {
        "id": 2,
        "text": "1c 2d 3b 4a"
      },
      {
        "id": 3,
        "text": "1b 2d 3c 4a"
      },
      {
        "id": 4,
        "text": "1d 2c 3a 4b"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The fixation techniques for lateral malleolar fractures are:</p>\n<ul>\n<li>Fibular fractures- one third semi-tubular plate 3.5 mm and screws or multiple 3.5 mm lag screws</li>\n<li>Long oblique fracture- Two lag screws</li>\n<li>Low transverse fracture- Single 4.5 mm malleolar screw</li>\n<li>Both malleoli fracture- Tension band wiring for the lateral malleolar fracture and 4 mm lag screw for associated medial malleolar fracture.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year old patient who is a known case of rheumatoid arthritis presented to the clinic with the following deformity. What is it called?",
    "choices": [
      {
        "id": 1,
        "text": "Hallux valgus"
      },
      {
        "id": 2,
        "text": "Hallux varus"
      },
      {
        "id": 3,
        "text": "Gout"
      },
      {
        "id": 4,
        "text": "Hammertoe"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The deformity shown is the&nbsp;<strong>hallux valgus.&nbsp;</strong>It is caused due to the <strong>excessive lateral deviation</strong> of the <strong>great toe</strong> with the prominence of the head of the first metatarsal.</p>\n<p>It can be congenital or a consequence of <strong>rheumatoid arthritis</strong>&nbsp;or excessive usage of footwear with narrow toe space.</p>\n<p>On the contrary, <strong>hallux varus</strong>&nbsp;is the excessive <strong>medial</strong> deviation of the great toe.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cd839ea740ac499b8543014bd627d94f.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/71e181cf630c48718337baa1be7d4895x1280x890.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aff0c5085e9b4a49b5cd9a16a483cd20x1280x972.JPEG"
    ]
  },
  {
    "text": "A patient with a spinal injury presents with decreased sensation over the radial aspect of the forearm, thumb, and index finger. There is weakness of wrist extension on examination. Which nerve root has been damaged here?",
    "choices": [
      {
        "id": 1,
        "text": "C8"
      },
      {
        "id": 2,
        "text": "C5"
      },
      {
        "id": 3,
        "text": "C6"
      },
      {
        "id": 4,
        "text": "C7"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The<strong> C6 </strong>nerve root has been <strong>damaged</strong> in this case of <strong>loss of sensation</strong> over the <strong>radial aspect</strong> of <strong>forearm</strong> and <strong>weakened wrist extension</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is an indication for observation in the treatment of scoliosis?",
    "choices": [
      {
        "id": 1,
        "text": "Curve of more than 40 degrees in skeletally immature persons"
      },
      {
        "id": 2,
        "text": "Curve of 30-40 degrees in skeletally immature persons"
      },
      {
        "id": 3,
        "text": "Curve less than 20 degrees in skeletally immature persons"
      },
      {
        "id": 4,
        "text": "Curve more than 50 degrees in skeletally immature persons."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Generally Accepted Guidelines for Observation in scoliosis:</strong></p>\n<ul>\n<li>Curves of <strong>less than 20\u00b0</strong> in <strong>skeletally immature</strong> persons are examined every 6 months.</li>\n<li>Curves <strong>less than 20\u00b0</strong> in <strong>skeletally mature persons</strong> require no further evaluation.</li>\n<li>Curves <strong>more than 20\u00b0</strong> in <strong>skeletally immature patients</strong> should be examined every <strong>3\u20134 months.</strong></li>\n<li>Curves between<strong>\u00a030\u201340\u00b0</strong> in skeletally mature persons do not require treatment. However, they are examined radiographically for progression every 2\u20133 years.</li>\n</ul>\n<p>Indications for surgery in Scoliosis:</p>\n<ul>\n<li>Curves &gt;50\u00b0 in skeletally mature patients</li>\n<li>Curves &gt;10\u00b0 with marked rotations</li>\n<li>Double major curves &gt;30\u00b0</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following patients with disc prolapse have an absolute indication for surgery?",
    "choices": [
      {
        "id": 1,
        "text": "Patient experiencing debilitating sciatica"
      },
      {
        "id": 2,
        "text": "Patient with sciatica not improving with epidural steroid injection"
      },
      {
        "id": 3,
        "text": "Patient that is diagnosed with cauda equina syndrome"
      },
      {
        "id": 4,
        "text": "Patient with progressive loss of sensation in the lower limbs"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Cauda equina syndrome</strong> is the only <strong>absolute</strong> and urgent <strong>indication</strong> for<strong> surgery</strong> in disc prolapse.</p>\n<p>The&nbsp;<strong>relative indications</strong> for elective surgery in disc prolapse include:</p>\n<ul>\n<li>Failed conservative management</li>\n<li>Progressive neurological deficit</li>\n<li>Recurrent episodes of incapacitating sciatica</li>\n<li>Pain not relieved by complete rest from activities</li>\n</ul>\n<p>The aim of the surgery is to relieve the pressure on the nerve root. The prolapsed disc is removed (<strong>discectomy</strong>), followed by <strong>stabilization of the spine</strong>.&nbsp;&nbsp;</p>\n<p>In <strong>most cases</strong> of disc prolapse, <strong>conservative treatment</strong> is given.&nbsp;Conservative therapy for this condition includes:</p>\n<ul>\n<li>Bed rest</li>\n<li>Heat</li>\n<li>Ice</li>\n<li>Analgesics</li>\n<li>Non-steroidal anti-inflammatory drugs (NSAIDs)</li>\n<li>Antidepressants</li>\n<li>Muscle relaxants</li>\n<li>Epidural steroids</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a differential diagnosis for tuberculous arthritis of the hip joint?",
    "choices": [
      {
        "id": 1,
        "text": "Rheumatoid arthritis"
      },
      {
        "id": 2,
        "text": "Perthes  disease"
      },
      {
        "id": 3,
        "text": "Septic arthritis"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Septic arthritis</strong> of low grade and rheumatoid arthritis are other causes for monoarthritis of the hip joint and thereby are important differential diagnoses to be kept in mind.</p>\n<p>Even an inguinal lymphadenopathy or psoas abscess may present with a flexion deformity of the hip because of the spasm of iliopsoas.</p>\n<p>Congenital dislocation of the hip, coxa vara, and Perthes disease are other causes of a limp at that age.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the marked arrows in the given posterior view of knee joint, indicate anterior cruciate ligament?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Given image shows the <strong>posterior aspect of knee joint</strong>. Hence, the ligament which is going toward anterior surface of tibia<strong> (B) is ACL.</strong></p>\n<p><strong>(A)</strong> is attached to the posterior surface of tibia and hence it is posterior cruciate ligament.</p>\n<p><strong>(C)\u00a0</strong>is the meniscus and<strong> (D) </strong>is lateral collateral ligament.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5f2fca43547c49f39fdac9a13057735a.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b5c5fba4649f46a595979518d10f7544x1280x1289.JPEG"
    ]
  },
  {
    "text": "The black arrow and arrowhead in the picture below denote?",
    "choices": [
      {
        "id": 1,
        "text": "Osteophytic growth"
      },
      {
        "id": 2,
        "text": "Non uniform loss of cartilage"
      },
      {
        "id": 3,
        "text": "Stretching of the articular capsule"
      },
      {
        "id": 4,
        "text": "Sclerosis of the bone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The black arrowhead and the black arrow when compared, shows&nbsp;<strong>non-uniform loss of cartilage</strong>,<strong>&nbsp;</strong>which is a key pathological feature of osteoarthritis.</p>\n<p>The red arrow demonstrates the osteophyte.</p>\n<p>The increased thickness of sub-chondral bone envelope is shown by the black arrow.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dbe8612e15b54222a3913f3c1361e0c8.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the option which is correctly matched with the name of the components marked in the picture.",
    "choices": [
      {
        "id": 1,
        "text": "Option 1"
      },
      {
        "id": 2,
        "text": "Option 2"
      },
      {
        "id": 3,
        "text": "Option 3"
      },
      {
        "id": 4,
        "text": "Option 4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Components of total knee replacement prosthesis are:</p>\n<ul>\n<li>Femoral component (A)</li>\n<li>Patellar button (B)</li>\n<li>Plastic spacer tibial base plate (C)</li>\n<li>Tibial implant (D)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/de65d8a778be478a91c09c3200de0616.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ef3e7e7aa732475d9d218462df5b18fcx1280x1861.JPEG"
    ]
  },
  {
    "text": "A patient is diagnosed with Paget's disease. X-ray of the patient is given below. In which phase of the disease is the patient at?",
    "choices": [
      {
        "id": 1,
        "text": "Osteolytic phase"
      },
      {
        "id": 2,
        "text": "Phase of bone formation"
      },
      {
        "id": 3,
        "text": "Sclerotic phase"
      },
      {
        "id": 4,
        "text": "Osteoporotic phase"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given X-ray shows&nbsp;<strong>blade of grass&nbsp;</strong>deformity seen in the&nbsp;<strong>osteolytic phase </strong>of Paget's disease.</p>\n<p>An initial <strong>osteolytic phase</strong> involves prominent <strong>bone resorption </strong>and marked hypervascularization. Radiographically, this manifests as an advancing lytic wedge or<strong>&nbsp;blade of grass </strong>or<strong> flame shaped</strong> lesion.</p>\n<p>The <strong>second phase</strong> is a period of very active bone formation and resorption. It is characterised by normal lamellar bone replaced with haphazard (woven) bone.</p>\n<p>In the final <strong>sclerotic phase</strong>, bone resorption declines progressively and leads to a hard, dense, less vascular mosaic bone, which represents the so-called burned-out phase of Paget&rsquo;s disease.</p>\n<p>The arrow mark in the following image indicates blade of grass appearance.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/31aa75d373a146bc9df72d2d0fc9b37a.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7fbda48b52dd43e382e3f07a8ff7c55dx720x720.JPEG"
    ]
  },
  {
    "text": "A newborn baby is found to have deformity as shown in the image. Which of the following findings would you not expect in him?",
    "choices": [
      {
        "id": 1,
        "text": "Loss of abduction of the arm"
      },
      {
        "id": 2,
        "text": "Loss of lateral rotation of the arm"
      },
      {
        "id": 3,
        "text": "Loss of sensation in the lateral 2 fingers"
      },
      {
        "id": 4,
        "text": "Loss of flexion of the elbow"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shows&nbsp;<strong>Erb's palsy</strong> (waiter's tip deformity). In this condition, there is a <strong>loss of sensation</strong> over a small area of the <strong>lower part of the deltoid</strong>, and not&nbsp;in the lateral 2 fingers.</p>\n<p>It is caused by injury to C5, C6, and rarely C7. It is seen most commonly in babies with shoulder dystocia at delivery.</p>\n<p>The following are seen in Erb's palsy:</p>\n<ul>\n<li>Loss of abduction and lateral rotation of the arm</li>\n<li>Loss of flexion of the elbow</li>\n<li>Loss of supination of the forearm</li>\n<li>Loss of biceps, supinator, and inverse supinator jerks</li>\n<li>Loss of sensation over a small area of the lower part of the deltoid</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/784618517f5747459382ad8439e8fcf8.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/513c89cb4e404ffb88ce5f20bd226e18x1280x1622.JPEG"
    ]
  },
  {
    "text": "What happens to the nerve conduction in case of carpal tunnel syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Absence of any transmitted impulse across the suspected site"
      },
      {
        "id": 2,
        "text": "Delay in transmission of impulse"
      },
      {
        "id": 3,
        "text": "Faster transmission of conducted impulse"
      },
      {
        "id": 4,
        "text": "Impulse transmission is not affected as it is only a compressive pathology"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Absence of any transmitted impulse</strong> across the suspected site is an indicator of <strong>complete nerve injury.</strong></li>\n<li>The<strong> conduction velocity may simply be delayed</strong> in compressive nerve lesions such as <strong>carpal tunnel syndrome.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false regarding gout?",
    "choices": [
      {
        "id": 1,
        "text": "More common in males than females"
      },
      {
        "id": 2,
        "text": "Abrupt fall in uric acid levels can precipitate an attack of gout"
      },
      {
        "id": 3,
        "text": "Chronic gouty arthritis is the most common clinical manifestation of gout"
      },
      {
        "id": 4,
        "text": "Gout can cause Heberden nodes"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Acute gouty arthritis</strong> is the <strong>most common</strong> clinical manifestation of gout, not chronic.</p>\n<p>It is <strong>more common in men</strong> than in women. An\u00a0abrupt fall in uric acid levels will precipitate an attack, as uric acid itself suppresses inflammatory cytokines.</p>\n<p>Inflamed Heberden's or Bouchard's nodes may be the first manifestation of gouty arthritis.</p>\n<p><strong>Heberden and Bouchard nodes</strong> are also usually seen in <strong>osteoarthritis.\u00a0</strong></p>\n<p>The following images shows\u00a0Heberden's node in clinical and X-ray aspect respectively:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/049b994f00af493fb2d015ab758f198ax800x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/486fa959e4da4af3b47089eefe5145a1x335x506.JPEG"
    ]
  },
  {
    "text": "A 5-year-old boy with Ewing's sarcoma is on chemotherapy. Which of the following is an indicator of poor prognosis?",
    "choices": [
      {
        "id": 1,
        "text": "Levels of beta 2 microglobulin"
      },
      {
        "id": 2,
        "text": "Fever"
      },
      {
        "id": 3,
        "text": "Thrombocytosis"
      },
      {
        "id": 4,
        "text": "Histologic grade"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Fever </strong>is one of the indicators for <strong>poor prognosis</strong> in Ewing's sarcoma.</p>\n<p><strong>Indicators</strong> of <strong>poor prognosis</strong> in patients with <strong>Ewing's sarcoma</strong>:</p>\n<ul>\n<li>Presence of <strong>distant</strong> <strong>metastasis</strong> -&nbsp;<strong>worst</strong> <strong>prognostic</strong> <strong>factor</strong></li>\n<li>Size and location of the primary lesion</li>\n<li>Presence of fever, anaemia</li>\n<li>Leukocytosis</li>\n<li>Raised ESR</li>\n<li>Male child and age 12&ndash;15 years</li>\n</ul>\n<p>Histologic grade is of no prognostic significance because <strong>all Ewing's sarcomas</strong> are considered <strong>high grade</strong>.</p>\n<p>Note:<strong>&nbsp;</strong>High levels of <strong>beta 2 microglobulin</strong> is an indicator of poor prognosis in<strong> multiple myeloma.&nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common pulmonary manifestation of rheumatoid arthritis?",
    "choices": [
      {
        "id": 1,
        "text": "Pleuritis"
      },
      {
        "id": 2,
        "text": "Pulmonary nodules"
      },
      {
        "id": 3,
        "text": "Interstitial lung disease"
      },
      {
        "id": 4,
        "text": "Caplan's syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most common pulmonary manifestation of rheumatoid arthritis is <strong>pleuritis</strong>.</p>\n<p>The image below shows pleural effusion secondary to pleuritis in a patient with rheumatoid arthritits.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/204eaaa3fea24fee97f036c64254e9fdx1080x1475.JPEG"
    ]
  },
  {
    "text": "Identify one of the cause of condition marked by small arrow in the radiograph.",
    "choices": [
      {
        "id": 1,
        "text": "Eosinophilic granuloma"
      },
      {
        "id": 2,
        "text": "Benign fibrous histiocytoma"
      },
      {
        "id": 3,
        "text": "Pigmented vilonodular synovitis"
      },
      {
        "id": 4,
        "text": "Ankylosing spondylitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above radiograph depicts<strong> &lsquo;vertebra plana'. </strong>It is<strong>&nbsp;</strong><strong>loss of height</strong> of the vertebral body <strong>both anteriorly and posteriorly </strong>(small arrows). It is seen in&nbsp;<strong>eosinophilic granuloma</strong>.</p>\n<p>Mild <strong>vertebral sclerosis</strong> is a result of treatment and healing (open arrows) in a case of multiple myeloma .<br /><br /></p>\n<p>Causes of vertebra plana can be remembered as:</p>\n<p><strong>IMELT-</strong></p>\n<ul>\n<li>Infection</li>\n<li>Metastasis/Multiple myeloma</li>\n<li>Eosinophilic granuloma</li>\n<li>Lymphoma leukemia</li>\n<li>Trauma,Tuberculosis&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7e878ccbabb54d9497d07b3589bfdd4f.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The prosthesis used for above knee amputation is _____",
    "choices": [
      {
        "id": 1,
        "text": "Quadrilateral Socket Prosthesis"
      },
      {
        "id": 2,
        "text": "Patellar Tendon Bearing prosthesis"
      },
      {
        "id": 3,
        "text": "Canadian Syme\u2019s prosthesis"
      },
      {
        "id": 4,
        "text": "Shoefillers"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>Quadrilateral socket prosthesis is commonly used for above knee amputation.</li>\n<li>Patellar Tendon Bearing Prosthesis is used for below knee amputation.</li>\n<li>Canadian Syme's Prosthesis is used as a below knee prosthesis after Syme's amputation.</li>\n<li>Shoefillers are used in partial foot amputations.</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/703c3ca12e3a44469bcf5ee5c8d66d4bx196x570.JPEG"
    ]
  },
  {
    "text": "Which of the following is the gold standard for guiding antibiotic therapy in a case of osteomyelitis?",
    "choices": [
      {
        "id": 1,
        "text": "Blood culture"
      },
      {
        "id": 2,
        "text": "Bone biopsy"
      },
      {
        "id": 3,
        "text": "Wound swab"
      },
      {
        "id": 4,
        "text": "Sinus tract culture"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Bone biopsy </strong>followed by tissue culture remains the <strong>gold standard</strong> method for guiding antibiotic therapy in case of osteomyelitis.\u00a0\u00a0</p>\n<p>A blood culture may be used to guide antibiotic therapy for hematologically acquired osteomyelitis. However, due to higher specificity in comparison to blood culture, a bone biopsy is considered the gold standard method of investigation.\u00a0</p>\n<p>Wound swab is not a definitive method to confirm the origin of bacterial infection because the organism need not necessarily contaminate the wound. Similarly, a negative sinus tract culture also does not rule out the possibility of an infection on the inside as it is not essential for the organism to travel up to the surface.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "According to Wright and Moll's scheme, which pattern is not included in the classification of psoriatic arthritis?",
    "choices": [
      {
        "id": 1,
        "text": "Arthritis of distal interphalangeal joints (DIP)"
      },
      {
        "id": 2,
        "text": "Asymmetric oligoarthritis"
      },
      {
        "id": 3,
        "text": "Arthritis mutilans"
      },
      {
        "id": 4,
        "text": "Asymmetric polyarthritis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Asymmetric polyarthritis is not included in the classification of psoriatic arthritis.</p>\n<p><strong>Wright &amp; Moll Classification of Psoriatic Arthritis</strong></p>\n<ul>\n<li>Arthritis of the <strong>DIP joints</strong></li>\n<li><strong>Asymmetric oligoarthritis</strong></li>\n<li><strong>Symmetric polyarthritis</strong></li>\n<li>Axial involvement such as <strong>spine and sacroiliac joints</strong></li>\n<li><strong>Arthritis mutilans</strong>, a destructive form of arthritis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Classification for Monteggia fracture dislocation is ______",
    "choices": [
      {
        "id": 1,
        "text": "Bado"
      },
      {
        "id": 2,
        "text": "Mayo"
      },
      {
        "id": 3,
        "text": "Jupiter"
      },
      {
        "id": 4,
        "text": "Regan-Morrey"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most common classification system used for Monteggia fracture dislocation is that of <strong>Bado</strong>, which is based on the <strong>direction of radial head dislocation</strong>. Type 1 is the most common.</p>\n<p><strong>Type 1 :&nbsp;</strong>Anterior radial head dislocation.</p>\n<p><strong>Type 2 :&nbsp;</strong>Posterior&nbsp;radial head dislocation.</p>\n<p><strong>Type 3 : </strong>Lateral<strong>&nbsp;</strong>radial head dislocation.</p>\n<p><strong>Type 4 :&nbsp;</strong>Associated fracture<strong>&nbsp;</strong>of radius.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c226c79a15474700813a331228f84b64x645x599.JPEG"
    ]
  },
  {
    "text": "Which of these is not a part of the terrible triad of the elbow?",
    "choices": [
      {
        "id": 1,
        "text": "Posterior dislocation of the elbow"
      },
      {
        "id": 2,
        "text": "Radial head fracture"
      },
      {
        "id": 3,
        "text": "Fracture of coronoid process of ulna"
      },
      {
        "id": 4,
        "text": "Fracture olecranon"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The terrible triad of the elbow does not include fracture of olecranon.&nbsp;</p>\n<p>The <strong>terrible triad </strong>of the<strong> elbow </strong>or <strong>Hotchkiss&nbsp;triad</strong> includes:</p>\n<ol>\n<li>Posterior dislocation of the elbow</li>\n<li>Radial head fracture</li>\n<li>Fracture coronoid process of the ulna</li>\n</ol>\n<p>Note: Unhappy triad of the knee occurs due to a lateral blow to the&nbsp;knee causing injury to the anterior cruciate ligament, medial meniscus, and medial collateral ligament.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the right order of correction of deformities in an infant with CTEV?",
    "choices": [
      {
        "id": 1,
        "text": "Cavus, adduction,  varus,  equinus"
      },
      {
        "id": 2,
        "text": "Valgus,  abduction, equinus, cavus"
      },
      {
        "id": 3,
        "text": "Cavus, abduction,  varus,  equinus"
      },
      {
        "id": 4,
        "text": "Cavus, adduction, valgus, equinus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The right order of correction of CTEV is <strong>c</strong>avus followed by<strong> a</strong>dduction, then <strong>v</strong>arus, and lastly <strong>e</strong>quinus <strong>(CAVE).</strong></p>\n<p>An <strong>incorrect sequence</strong> of correction or overtreatment of CTEV can result in the development of the&nbsp;<strong>rocker-bottom foot</strong>. It is&nbsp;characterized by a prominent heel and a convex sole.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5ac4833dc0f74b57865e8a2d045f2d82x1280x1442.JPEG"
    ]
  },
  {
    "text": "What is the treatment of choice for a 3-year-old with genu varum?",
    "choices": [
      {
        "id": 1,
        "text": "Lateral epiphyseal stapling"
      },
      {
        "id": 2,
        "text": "Supracondylar medial open-wedge osteotomy"
      },
      {
        "id": 3,
        "text": "Supracondylar lateral closed-wedge osteotomy"
      },
      {
        "id": 4,
        "text": "Dynamic bracing"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Dynamic bracing</strong> should be done for a 3-year-old with genu varum.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following is an early radiographic finding in spinal tuberculosis?",
    "choices": [
      {
        "id": 1,
        "text": "Reduction of disc space"
      },
      {
        "id": 2,
        "text": "Bird\u2019s nest abscess"
      },
      {
        "id": 3,
        "text": "Sclerotic appearance of vertebrae"
      },
      {
        "id": 4,
        "text": "Anterior wedging of vertebrae"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>reduction </strong>of<strong> disc space</strong> between the vertebrae is an <strong>early radiographic finding</strong> in spinal tuberculosis. This indicates the destruction of the intervertebral disc due to spinal tuberculosis.</p>\n<p>The infection first involves the vertebral bodies and the intervertebral disc. Hence, the early radiographic features include rarefaction/osteopenic appearance of the involved vertebrae and reduction of disc space between the vertebrae.</p>\n<p>In <strong>later stages</strong>, the infection leads to para-vertebral abscess formation and vertebral destruction. These features can be seen on a radiograph as<strong> bird&rsquo;s nest abscess</strong> and <strong>anterior wedging </strong>of<strong> vertebrae</strong> respectively.</p>\n<p>When the disease is in the<strong> healing phase</strong>, the&nbsp;<strong>sclerotic </strong>appearance of<strong> vertebrae</strong> can be seen.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following image reflects the histopathology of ______",
    "choices": [
      {
        "id": 1,
        "text": "Aneurysmal bone cyst"
      },
      {
        "id": 2,
        "text": "Solitary bone cyst"
      },
      {
        "id": 3,
        "text": "Giant cell tumour"
      },
      {
        "id": 4,
        "text": "Osteoid osteoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows histopathology of <strong>aneurysmal bone cyst</strong>.</p>\n<p>It consists of multiple<strong> blood filled cystic spaces&nbsp;</strong>separated by tan white septa. The walls are composed of plump uniform <strong>fibroblasts, multi-nucleated osteoclast giant cells, and reactive woven bone.&nbsp;</strong>The bone is lined by <strong>osteoblast cells.</strong></p>\n<p>In <strong>Giant cell tumour</strong>, sheets of uniform spindle to oval mononuclear cells and numerous osteoclast-type giant cells with 100 or more nuclei are seen.</p>\n<p>The following image shows histology of giant cell tumour.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/183cd2364ed14e4993d742f9d29f9800.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a8432787baad4f7480299433da56dfb9x800x533.JPEG"
    ]
  },
  {
    "text": "Why is an osteochondroma not considered a true neoplasm?",
    "choices": [
      {
        "id": 1,
        "text": "The bony prominence has a cartilage capping"
      },
      {
        "id": 2,
        "text": "The lesion is angled away from the growth plate"
      },
      {
        "id": 3,
        "text": "It stops growing with cessation of the growth at the Epiphyseal plate"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>An <strong>osteochondroma</strong> is not considered a true neoplasm since its growth stops with cessation of growth at the Epiphyseal plate.</li>\n<li>They are <strong>developmental malformations</strong> which are thought to originate <strong>within the periosteum</strong> as small cartilaginous nodules.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young female presents with pain and swelling over the knee joint. There is stiffness of the knee joint. The X-ray picture of the patient is given below. A chest radiograph showed right upper lobe airspace disease with associated hilar adenopathy. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Rheumatoid arthritis"
      },
      {
        "id": 2,
        "text": "Septic arthritis"
      },
      {
        "id": 3,
        "text": "Tuberculous arthritis"
      },
      {
        "id": 4,
        "text": "Villonodular synovitis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Young female with pain, swelling and stiffness at the knee joint, along with right upper lobe airspace disease, hilar lymphadenopathy with the knee x ray showing joint space destruction and marked periarticular rarefaction is suggestive of <strong>tubercular arthritis.</strong></p>\n<p>In case of synovial tuberculosis, which is most common site; the x-ray is most often normal. There may be a soft tissue shadow corresponding to the distended knee. The joint space could be initially widened. A diffuse osteoporosis of the bones around the joint is also seen.\u00a0</p>\n<p><strong>Marked periarticular rarefaction</strong> is seen.</p>\n<p>When the origin of the disease is osseous, there are lytic lesions.<strong> In late stages,</strong> the joint space is reduced or even completely lost.<strong> In the end stages</strong>, even triple deformity with cavitations of the bone may be visible.</p>\n<p><strong>Pigmented villonodular synovitis</strong>\u00a0(<strong>PVNS</strong>) is a joint disease characterized by inflammation and overgrowth of the synovium.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0c87dfc04e2e4aab85aaa1e7a7e9ec99.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "What are rotationally unstable, but vertically stable pelvic ring fractures classified as?",
    "choices": [
      {
        "id": 1,
        "text": "Tile type B"
      },
      {
        "id": 2,
        "text": "Tile type C"
      },
      {
        "id": 3,
        "text": "Neer type 1"
      },
      {
        "id": 4,
        "text": "Neer type 2"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Rotationally unstable</strong>, but <strong>vertically stable</strong> pelvic ring fractures are classified as <strong>Tile type B.&nbsp;</strong></p>\n<p>Two classification systems are used in the evaluation of pelvic ring fractures:</p>\n<p>1. The <strong>Tile classification</strong> provides an assessment of the stability of the pelvis. It helps the surgeon predict the need for surgery. Pelvic ring fractures are classified into 3 types:&nbsp;</p>\n<table style=\"height: 261px; width: 619px;\">\n<tbody>\n<tr>\n<td style=\"width: 145.531px;\"><strong>Tile classification</strong></td>\n<td style=\"width: 220.469px;\"><strong>Stability</strong></td>\n<td style=\"width: 228px;\"><strong>Management</strong></td>\n</tr>\n<tr>\n<td style=\"width: 145.531px;\">Type A</td>\n<td style=\"width: 220.469px;\">Rotationally and vertically <strong>stable</strong></td>\n<td style=\"width: 228px;\">Conservative</td>\n</tr>\n<tr>\n<td style=\"width: 145.531px;\">Type B</td>\n<td style=\"width: 220.469px;\">Rotationally unstable and vertically stable</td>\n<td style=\"width: 228px;\">External fixation is used for definitive management. Anterior fixation is additionally done if pubic bones have separated by more than 2.5 cm.</td>\n</tr>\n<tr>\n<td style=\"width: 145.531px;\">Type C</td>\n<td style=\"width: 220.469px;\">Rotationally and vertically <strong>unstable</strong></td>\n<td style=\"width: 228px;\">&nbsp;Posterior fixation is done for vertical stability along with external fixation.</td>\n</tr>\n</tbody>\n</table>\n<p>2. The<strong> Young and Burgess classification</strong> is based on the mechanism of injury. It helps the surgeon predict the severity of the injury, blood loss, and deformity or displacement.&nbsp;</p>\n<p>Note:<strong> Neer</strong> classification is used for <strong>proximal humerus</strong> fractures.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The image shown below is an example of :",
    "choices": [
      {
        "id": 1,
        "text": "Intramedullary splinting"
      },
      {
        "id": 2,
        "text": "Buttress plating"
      },
      {
        "id": 3,
        "text": "Splinting with neutralization plate"
      },
      {
        "id": 4,
        "text": "Splinting with external fixator"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This is an example of <strong>splinting with neutralization plate</strong>. It is a type of <strong>extra-medullary splinting</strong>.</p>\n<p>This plate is being used to just splint the fracture<strong>, without producing any compression</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/32139b307ac64f9798ef085e267ed14d.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "This is the chest X-ray of a 30-year-old male who presented with back pain and weight loss. Which of the following statements is false?",
    "choices": [
      {
        "id": 1,
        "text": "The X-ray shows bird nest abscess"
      },
      {
        "id": 2,
        "text": "There is mediastinal widening in a patient with Pott's spine"
      },
      {
        "id": 3,
        "text": "The width of the abscess is greater than its length"
      },
      {
        "id": 4,
        "text": "It is more commonly associated with paraplegia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The X-ray clearly shows an abscess in the <strong>paravertebral region (</strong><strong>bird nest&nbsp;abscess</strong>&ndash;length is greater than its width).</p>\n<p>It&nbsp;indicates pus under pressure and is commonly associated with paraplegia.</p>\n<p>An abscess from the dorsal spine may present as widened mediastinum. Globular&nbsp;or tense&nbsp;abscess&ndash;an&nbsp;abscess&nbsp;whose width is greater than the length.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1161b6b0b1664e3399567dceaa54c1b2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/de3ab45038d64599af116d04ad9cb7efx720x708.JPEG"
    ]
  },
  {
    "text": "A 74-year-old man presented with low back pain that was radiating to his legs. On examination of the spine, a palpable step was felt in the lumbosacral region. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Spondylolysis"
      },
      {
        "id": 2,
        "text": "Spondylolisthesis"
      },
      {
        "id": 3,
        "text": "Disk prolapse"
      },
      {
        "id": 4,
        "text": "Spondylosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In the above clinical scenario, the patient most likely has<strong> spondylolisthesis. </strong>A<strong>\u00a0</strong><strong>palpable step</strong>\u00a0in the lumbosacral spine<strong>\u00a0</strong>is a classic clinical feature of this condition.\u00a0\u00a0It is known as <strong>step sign.</strong></p>\n<p><strong>Normally</strong>, the <strong>spinous processes</strong> of the adjacent vertebrae are aligned with each other. They can be palpated on the back in a <strong>smooth</strong> way.</p>\n<p>In <strong>spondylolisthesis</strong>, one vertebra has moved over the other. Therefore, a <strong>step-off</strong> or <strong>step sign</strong> can be felt over the spinous process\u00a0at the affected level.\u00a0</p>\n<p>Note: The step-off sign is also used to describe the\u00a0radiographic appearance of<strong>\u00a0Lisfranc injury</strong> of the foot. There is a dorsal displacement of the tarsal bones with respect to the metatarsal bones.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false regarding acute compartment syndrome of the forearm?",
    "choices": [
      {
        "id": 1,
        "text": "It is defined by compartment pressure of >30 mm of Hg"
      },
      {
        "id": 2,
        "text": "Whiteside\u2019s technique is used to measure compartment pressure"
      },
      {
        "id": 3,
        "text": "Mobile wad of Henry compartment is most commonly involved"
      },
      {
        "id": 4,
        "text": "Fasciotomy is the treatment of choice"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Mobile wad of Henry</strong> refers to the lateral compartment of the forearm and is not commonly associated in&nbsp;acute compartment syndrome. Volar (anterior) compartment is most commonly involved.</p>\n<p><strong>Whiteside</strong>&nbsp;described a technique for measuring compartment pressures using an 18-gauge needle, saline syringe, three-way stopcock, and a mercury manometer.</p>\n<p><strong>Fasciotomy is the treatment of choice&nbsp;</strong>and should be performed when the difference between compartment and diastolic pressure is less than 30 mm of mercury or if compartment pressure is more than 30 mmhg.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which statement about Salmonella osteomyelitis is incorrect?",
    "choices": [
      {
        "id": 1,
        "text": "Several bones are involved"
      },
      {
        "id": 2,
        "text": "Common in sickle cell anemia patients"
      },
      {
        "id": 3,
        "text": "Asymmetrical involvement of bones"
      },
      {
        "id": 4,
        "text": "Stool culture may be positive"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><em>Salmonella osteomyelitis</em> has a <strong>symmetrical involvement</strong>.</p>\n<p>The features of <em>Salmonella osteomyelitis</em> can be remembered by the help of alphabet \"S.\"</p>\n<ul>\n<li>Several bones are involved</li>\n<li>Symmetrical involvement of bones</li>\n<li>Severe osteomyelitis</li>\n<li>Spine may be involved</li>\n<li>Sickle cell anemia present</li>\n<li>Stool culture positive</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a cause for thoracic outlet syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Cleidocranial dysostosis"
      },
      {
        "id": 2,
        "text": "Malunion of fracture clavicle"
      },
      {
        "id": 3,
        "text": "Cervico-thoracic scoliosis"
      },
      {
        "id": 4,
        "text": "Pancoast tumor"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Cleidocranial dysostosis does not cause thoracic outlet syndrome.</p>\n<p>Tumor arising from the upper lobe of the lung (eg: Pancoast tumor), cervicothoracic scoliosis, and malunion or nonunion of fracture clavicle are causes of thoracic outlet syndrome.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old archer presents with complaints of weakness of the shoulder and tingling sensation in his fingers while in the full draw position. You suspect thoracic outlet syndrome.  All of the following are provocative tests for this condition, except:",
    "choices": [
      {
        "id": 1,
        "text": "Adson's test"
      },
      {
        "id": 2,
        "text": "Wright's test"
      },
      {
        "id": 3,
        "text": "Jobe's test"
      },
      {
        "id": 4,
        "text": "Roos's test"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Jobe's test is not a provocative test for thoracic outlet syndrome.&nbsp;Jobe's test is performed to evaluate for shoulder impingement syndrome.</p>\n<p>The provocative tests for thoracic outlet syndrome include&nbsp;<strong>Adson's test, Wright's test, </strong>and<strong> Roos's test</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Choose the true statement regarding the natural history of skeletal tuberculosis:",
    "choices": [
      {
        "id": 1,
        "text": "Bone and joint Tuberculosis are mostly secondary"
      },
      {
        "id": 2,
        "text": "Demineralisation of bone occurs due to intense local hyperemia"
      },
      {
        "id": 3,
        "text": "The infected granulation tissue and pus localizes in the sub-periosteal and soft tissue planes in the form of abscesses"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Bone and joint tuberculosis are almost always secondary to some primary focus in the lungs, lymphnodes etc. Mode of spread from the primary focus may be either hematigenous or by direct extension.</p>\n<p>Inflammation as a result of TB results in trabecular necrosis and caseation. The intense local hyperemia leads to demineralization of the bone. If there is no interference at this stage, then the cortex also gets eroded. The infected granulation tissue and pus track beneath the subperiosteal planes and soft tissue planes, resulting in the formation of a cold abscess.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child presents with multiple painless swellings over the costochondral junction. Which of the following conditions is least likely in this child?",
    "choices": [
      {
        "id": 1,
        "text": "Rickets"
      },
      {
        "id": 2,
        "text": "Primary hyperparathyroidism"
      },
      {
        "id": 3,
        "text": "Hypophosphatemia"
      },
      {
        "id": 4,
        "text": "Hemangiopericytoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Multiple painless swellings at the costochondral junction is suggestive of<strong> rachitic rosary&nbsp;</strong>in this child.&nbsp;It is&nbsp;not seen in primary hyperparathyroidism.</p>\n<p>Rachitic rosary is seen in&nbsp;<strong>rickets</strong> and all the conditions leading to<strong> hypocalcemia</strong> and <strong>hypophosphatemia</strong>.&nbsp;<strong>Hemangiopericytoma</strong> causes hypophosphataemic vitamin D-resistant rickets.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Select the false statement regarding electromyograph.",
    "choices": [
      {
        "id": 1,
        "text": "A normal muscle at rest shows no electrical activity"
      },
      {
        "id": 2,
        "text": "Interference pattern is seen in a strong contraction"
      },
      {
        "id": 3,
        "text": "A denervated muscle shows electrical activity at rest"
      },
      {
        "id": 4,
        "text": "Denervation potentials appearing within 2 weeks after a nerve injury is a good prognostic sign"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The denervated muscle has <strong>spontaneous electrical activity </strong>at rest called<strong> denervation potentials.</strong>. These appear at around <strong>15-20</strong> days after muscle denervation.</p>\n<p>If these potentials &lsquo;<strong>have not appeared by the second week of nerve injury</strong>,<strong> it is a good prognostic sign&rsquo;.</strong></p>\n<p>EMG is the graphic recording of the electrical activity of a muscle at rest and during activity.</p>\n<ul>\n<li>A <strong>normal muscle</strong> at rest shows <strong>no electrical activity</strong>.</li>\n<li>With <strong>voluntary contraction</strong>, action potentials develop in the motor units.</li>\n<li>In a <strong>strong contraction,</strong> impulses of a number of motor units firing simultaneously are super-imposed, giving rise to an <strong>interference pattern.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ec9d13435f4f42b3b4064f5e69ee6931x800x508.JPEG"
    ]
  }
];
        let quizName = 'Orthopedics St2 (From Q-Bank)';
        const quizFilename = 'orthopedics-st2-from-q-bank-d7ff04dc.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>